{"version":3,"sources":["node_modules/vue/dist/vue.runtime.esm.js","webpack://xterm/webpack/universalModuleDefinition","webpack://xterm/src/browser/AccessibilityManager.ts","webpack://xterm/src/browser/Clipboard.ts","webpack://xterm/src/browser/Color.ts","webpack://xterm/src/browser/ColorContrastCache.ts","webpack://xterm/src/browser/ColorManager.ts","webpack://xterm/src/browser/Dom.ts","webpack://xterm/src/browser/Lifecycle.ts","webpack://xterm/src/browser/Linkifier.ts","webpack://xterm/src/browser/Linkifier2.ts","webpack://xterm/src/browser/LocalizableStrings.ts","webpack://xterm/src/browser/MouseZoneManager.ts","webpack://xterm/src/browser/RenderDebouncer.ts","webpack://xterm/src/browser/ScreenDprMonitor.ts","webpack://xterm/src/browser/Terminal.ts","webpack://xterm/src/browser/Viewport.ts","webpack://xterm/src/browser/input/CompositionHelper.ts","webpack://xterm/src/browser/input/Mouse.ts","webpack://xterm/src/browser/input/MoveToCell.ts","webpack://xterm/src/browser/public/AddonManager.ts","webpack://xterm/src/browser/public/Terminal.ts","webpack://xterm/src/browser/renderer/BaseRenderLayer.ts","webpack://xterm/src/browser/renderer/CursorRenderLayer.ts","webpack://xterm/src/browser/renderer/GridCache.ts","webpack://xterm/src/browser/renderer/LinkRenderLayer.ts","webpack://xterm/src/browser/renderer/Renderer.ts","webpack://xterm/src/browser/renderer/RendererUtils.ts","webpack://xterm/src/browser/renderer/SelectionRenderLayer.ts","webpack://xterm/src/browser/renderer/TextRenderLayer.ts","webpack://xterm/src/browser/renderer/atlas/BaseCharAtlas.ts","webpack://xterm/src/browser/renderer/atlas/CharAtlasCache.ts","webpack://xterm/src/browser/renderer/atlas/CharAtlasUtils.ts","webpack://xterm/src/browser/renderer/atlas/Constants.ts","webpack://xterm/src/browser/renderer/atlas/DynamicCharAtlas.ts","webpack://xterm/src/browser/renderer/atlas/LRUMap.ts","webpack://xterm/src/browser/renderer/dom/DomRenderer.ts","webpack://xterm/src/browser/renderer/dom/DomRendererRowFactory.ts","webpack://xterm/src/browser/selection/SelectionModel.ts","webpack://xterm/src/browser/services/CharSizeService.ts","webpack://xterm/src/browser/services/CharacterJoinerService.ts","webpack://xterm/src/browser/services/CoreBrowserService.ts","webpack://xterm/src/browser/services/MouseService.ts","webpack://xterm/src/browser/services/RenderService.ts","webpack://xterm/src/browser/services/SelectionService.ts","webpack://xterm/src/browser/services/Services.ts","webpack://xterm/src/browser/services/SoundService.ts","webpack://xterm/src/common/CircularList.ts","webpack://xterm/src/common/Clone.ts","webpack://xterm/src/common/CoreTerminal.ts","webpack://xterm/src/common/EventEmitter.ts","webpack://xterm/src/common/InputHandler.ts","webpack://xterm/src/common/Lifecycle.ts","webpack://xterm/src/common/Platform.ts","webpack://xterm/src/common/TypedArrayUtils.ts","webpack://xterm/src/common/WindowsMode.ts","webpack://xterm/src/common/buffer/AttributeData.ts","webpack://xterm/src/common/buffer/Buffer.ts","webpack://xterm/src/common/buffer/BufferLine.ts","webpack://xterm/src/common/buffer/BufferRange.ts","webpack://xterm/src/common/buffer/BufferReflow.ts","webpack://xterm/src/common/buffer/BufferSet.ts","webpack://xterm/src/common/buffer/CellData.ts","webpack://xterm/src/common/buffer/Constants.ts","webpack://xterm/src/common/buffer/Marker.ts","webpack://xterm/src/common/data/Charsets.ts","webpack://xterm/src/common/data/EscapeSequences.ts","webpack://xterm/src/common/input/Keyboard.ts","webpack://xterm/src/common/input/TextDecoder.ts","webpack://xterm/src/common/input/UnicodeV6.ts","webpack://xterm/src/common/input/WriteBuffer.ts","webpack://xterm/src/common/parser/Constants.ts","webpack://xterm/src/common/parser/DcsParser.ts","webpack://xterm/src/common/parser/EscapeSequenceParser.ts","webpack://xterm/src/common/parser/OscParser.ts","webpack://xterm/src/common/parser/Params.ts","webpack://xterm/src/common/services/BufferService.ts","webpack://xterm/src/common/services/CharsetService.ts","webpack://xterm/src/common/services/CoreMouseService.ts","webpack://xterm/src/common/services/CoreService.ts","webpack://xterm/src/common/services/DirtyRowService.ts","webpack://xterm/src/common/services/InstantiationService.ts","webpack://xterm/src/common/services/LogService.ts","webpack://xterm/src/common/services/OptionsService.ts","webpack://xterm/src/common/services/ServiceRegistry.ts","webpack://xterm/src/common/services/Services.ts","webpack://xterm/src/common/services/UnicodeService.ts","webpack://xterm/webpack/bootstrap","webpack://xterm/webpack/startup","webpack://FitAddon/webpack/universalModuleDefinition","webpack://FitAddon/src/FitAddon.ts","webpack://FitAddon/webpack/bootstrap","webpack://FitAddon/webpack/startup","webpack://AttachAddon/webpack/universalModuleDefinition","webpack://AttachAddon/webpack/bootstrap","webpack://AttachAddon/src/AttachAddon.ts","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/vue-hot-reload-api/dist/index.js","app.vue","index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["emptyObject","Object","freeze","isUndef","v","undefined","isDef","isTrue","isFalse","isPrimitive","value","isObject","obj","_toString","prototype","toString","toRawType","call","slice","isPlainObject","isRegExp","isValidArrayIndex","val","n","parseFloat","String","Math","floor","isFinite","isPromise","then","catch","Array","isArray","JSON","stringify","toNumber","isNaN","makeMap","str","expectsLowerCase","map","create","list","split","i","length","toLowerCase","isBuiltInTag","isReservedAttribute","remove","arr","item","index","indexOf","splice","hasOwnProperty","hasOwn","key","cached","fn","cache","cachedFn","hit","camelizeRE","camelize","replace","_","c","toUpperCase","capitalize","charAt","hyphenateRE","hyphenate","polyfillBind","ctx","boundFn","a","l","arguments","apply","_length","nativeBind","bind","Function","toArray","start","ret","extend","to","_from","toObject","res","noop","b","no","identity","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","every","e","Date","getTime","keysA","keys","keysB","looseIndexOf","once","called","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","config","optionMergeStrategies","silent","productionTip","devtools","performance","errorHandler","warnHandler","ignoredElements","keyCodes","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","async","_lifecycleHooks","unicodeRegExp","isReserved","charCodeAt","def","enumerable","defineProperty","writable","configurable","bailRE","RegExp","source","parsePath","path","test","segments","hasProto","inBrowser","window","inWeex","WXEnvironment","platform","weexPlatform","UA","navigator","userAgent","isIE","isIE9","isEdge","isAndroid","isIOS","isChrome","isPhantomJS","isFF","match","nativeWatch","watch","supportsPassive","opts","get","addEventListener","_isServer","isServerRendering","global","env","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","Ctor","hasSymbol","Symbol","Reflect","ownKeys","_Set","Set","set","has","add","clear","warn","tip","generateComponentTrace","formatComponentName","hasConsole","console","classifyRE","classify","msg","vm","trace","error","includeFile","$root","options","cid","_isVue","$options","constructor","name","_componentTag","file","__file","repeat","$parent","tree","currentRecursiveSequence","last","push","join","uid","Dep","id","subs","addSub","sub","removeSub","depend","target","addDep","notify","sort","update","targetStack","pushTarget","popTarget","pop","VNode","tag","data","children","text","elm","context","componentOptions","asyncFactory","ns","fnContext","fnOptions","fnScopeId","componentInstance","parent","raw","isStatic","isRootInsert","isComment","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","prototypeAccessors","child","defineProperties","createEmptyVNode","node","createTextVNode","cloneVNode","vnode","cloned","arrayProto","arrayMethods","methodsToPatch","forEach","method","original","mutator","args","len","result","ob","__ob__","inserted","observeArray","dep","arrayKeys","getOwnPropertyNames","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","walk","defineReactive$$1","items","observe","src","__proto__","asRootData","isExtensible","customSetter","shallow","property","getOwnPropertyDescriptor","getter","setter","childOb","reactiveGetter","dependArray","reactiveSetter","newVal","max","del","strats","el","propsData","defaultStrat","mergeData","from","toVal","fromVal","mergeDataOrFn","parentVal","childVal","mergedDataFn","mergedInstanceDataFn","instanceData","defaultData","mergeHook","concat","dedupeHooks","hooks","hook","mergeAssets","assertObjectType","type","key$1","props","methods","inject","computed","provide","checkComponents","components","validateComponentName","normalizeProps","normalizeInject","normalized","normalizeDirectives","dirs","directives","def$$1","mergeOptions","_base","extends","mixins","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","prop","absent","booleanIndex","getTypeIndex","Boolean","stringIndex","getPropDefaultValue","prevShouldObserve","assertProp","default","_props","getType","required","valid","expectedTypes","assertedType","assertType","expectedType","getInvalidTypeMessage","validator","simpleCheckRE","t","isSameType","message","receivedType","expectedValue","styleValue","receivedValue","isExplicable","isBoolean","Number","explicitTypes","some","elem","handleError","err","info","cur","errorCaptured","capture","globalHandleError","invokeWithErrorHandling","handler","_handled","logError","isUsingMicroTask","callbacks","pending","flushCallbacks","copies","timerFunc","Promise","p","resolve","setTimeout","MutationObserver","counter","observer","textNode","document","createTextNode","characterData","setImmediate","nextTick","cb","_resolve","initProxy","allowedGlobals","warnNonPresent","warnReservedPrefix","hasProxy","Proxy","isBuiltInModifier","hasHandler","isAllowed","$data","getHandler","handlers","render","_withStripped","_renderProxy","seenObjects","traverse","_traverse","seen","isA","isFrozen","depId","mark","measure","perf","clearMarks","clearMeasures","startTag","endTag","normalizeEvent","passive","once$$1","createFnInvoker","fns","invoker","arguments$1","updateListeners","on","oldOn","remove$$1","createOnceHandler","old","event","params","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","extractPropsFromVNodeData","attrs","altKey","keyInLowerCase","checkProp","hash","preserve","simpleNormalizeChildren","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","lastIndex","shift","_isVList","initProvide","_provided","initInjections","resolveInject","provideKey","provideDefault","resolveSlots","slots","slot","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","_normalized","$hasNormal","normalizeScopedSlot","key$2","proxyNormalSlot","proxy","renderList","iterator","next","done","renderSlot","fallback","bindObject","scopedSlotFn","$scopedSlots","nodes","$slots","$createElement","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","domProps","camelizedKey","hyphenatedKey","$event","renderStatic","isInFor","_staticTrees","staticRenderFns","markStatic","markOnce","markStaticNode","bindObjectListeners","existing","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","values","prependModifier","symbol","installRenderHelpers","_o","_n","_s","_l","_t","_q","_i","_m","_f","_k","_b","_v","_e","_u","_g","_d","_p","FunctionalRenderContext","this$1","contextVm","_original","isCompiled","_compiled","needNormalization","listeners","injections","scopedSlots","_scopeId","_c","d","createElement","createFunctionalComponent","mergeProps","renderContext","cloneAndMarkFunctionalResult","vnodes","clone","devtoolsMeta","componentVNodeHooks","init","hydrating","_isDestroyed","keepAlive","mountedNode","prepatch","createComponentInstanceForVnode","activeInstance","$mount","oldVnode","updateChildComponent","insert","_isMounted","callHook","queueActivatedComponent","activateChildComponent","destroy","$destroy","deactivateChildComponent","hooksToMerge","createComponent","baseCtor","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","model","transformModel","functional","nativeOn","abstract","installComponentHooks","_isComponent","_parentVnode","inlineTemplate","toMerge","_merged","mergeHook$1","f1","f2","callback","SIMPLE_NORMALIZE","ALWAYS_NORMALIZE","normalizationType","alwaysNormalize","_createElement","is","$vnode","pre","applyNS","registerDeepBindings","force","style","class","initRender","_vnode","parentVnode","_renderChildren","parentData","isUpdatingChildComponent","_parentListeners","currentRenderingInstance","renderMixin","Vue","$nextTick","_render","ref","renderError","ensureCtor","comp","base","__esModule","toStringTag","factory","errorComp","resolved","owner","owners","loading","loadingComp","sync","timerLoading","timerTimeout","$on","forceRender","renderCompleted","$forceUpdate","clearTimeout","reject","reason","component","delay","timeout","getFirstComponentChild","initEvents","_events","_hasHookEvent","updateComponentListeners","remove$1","$off","_target","onceHandler","oldListeners","eventsMixin","hookRE","$once","i$1","cbs","$emit","lowerCaseEvent","setActiveInstance","prevActiveInstance","initLifecycle","$children","$refs","_watcher","_inactive","_directInactive","_isBeingDestroyed","lifecycleMixin","_update","prevEl","$el","prevVnode","restoreActiveInstance","__patch__","__vue__","teardown","_watchers","_data","mountComponent","template","updateComponent","_name","_uid","Watcher","before","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","$attrs","$listeners","propKeys","_propKeys","isInInactiveTree","direct","j","MAX_UPDATE_COUNT","queue","activatedChildren","circular","waiting","flushing","resetSchedulerState","currentFlushTimestamp","getNow","now","createEvent","timeStamp","flushSchedulerQueue","watcher","run","user","expression","activatedQueue","updatedQueue","callActivatedHooks","callUpdatedHooks","emit","queueWatcher","uid$2","expOrFn","isRenderWatcher","deep","lazy","active","dirty","deps","newDeps","depIds","newDepIds","cleanupDeps","tmp","oldValue","evaluate","sharedPropertyDefinition","sourceKey","proxyGetter","proxySetter","initState","initProps","initMethods","initData","initComputed","initWatch","propsOptions","isRoot","getData","computedWatcherOptions","watchers","_computedWatchers","isSSR","userDef","defineComputed","shouldCache","createComputedGetter","createGetterInvoker","computedGetter","createWatcher","$watch","stateMixin","dataDef","propsDef","$set","$delete","immediate","unwatchFn","uid$3","initMixin","_init","initInternalComponent","_self","vnodeComponentOptions","super","superOptions","cachedSuperOptions","modifiedOptions","resolveModifiedOptions","extendOptions","modified","latest","sealed","sealedOptions","initUse","use","plugin","installedPlugins","_installedPlugins","unshift","install","initMixin$1","mixin","initExtend","Super","SuperId","cachedCtors","_Ctor","Sub","VueComponent","initProps$1","initComputed$1","Comp","initAssetRegisters","definition","getComponentName","matches","pattern","pruneCache","keepAliveInstance","filter","cachedNode","pruneCacheEntry","current","cached$$1","patternTypes","KeepAlive","include","exclude","created","destroyed","mounted","ref$1","parseInt","builtInComponents","initGlobalAPI","configDef","util","defineReactive","delete","observable","ssrContext","version","acceptValue","attr","isEnumeratedAttr","isValidContentEditableValue","convertEnumeratedValue","isFalsyAttrValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","genClassForVnode","parentNode","childNode","mergeClassData","renderClass","staticClass","dynamicClass","stringifyClass","stringifyArray","stringifyObject","stringified","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","HTMLUnknownElement","HTMLElement","isTextInputType","query","selected","querySelector","createElement$1","tagName","multiple","setAttribute","createElementNS","namespace","createComment","insertBefore","newNode","referenceNode","removeChild","appendChild","nextSibling","setTextContent","textContent","setStyleScope","scopeId","nodeOps","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","sameInputType","typeA","typeB","createKeyToOldIdx","beginIdx","endIdx","createPatchFunction","backend","modules","emptyNodeAt","createRmCb","childElm","removeNode","isUnknownElement$$1","inVPre","ignore","creatingElmInVPre","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","setScope","createChildren","invokeCreateHooks","isReactivated","initComponent","reactivateComponent","pendingInsert","isPatchable","innerNode","transition","activate","ref$$1","checkDuplicateKeys","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","ch","removeAndInvokeRemoveHook","rm","updateChildren","oldCh","newCh","removeOnly","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","vnodeToMove","canMove","patchVnode","findIdxInOld","seenKeys","end","hydrate","postpatch","invokeInsertHook","initial","hydrationBailed","isRenderedModule","assertNodeMatch","hasChildNodes","innerHTML","childrenMatch","firstChild","childNodes","fullInvoke","nodeType","patch","isInitialPatch","isRealElement","hasAttribute","removeAttribute","oldElm","_leaveCb","patchable","i$2","updateDirectives","unbindDirectives","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldDir","dir","callHook$1","oldArg","arg","componentUpdated","callInsert","emptyModifiers","modifiers","getRawDirName","rawName","baseModules","updateAttrs","inheritAttrs","oldAttrs","setAttr","removeAttributeNS","baseSetAttr","setAttributeNS","__ieph","blocker","stopImmediatePropagation","removeEventListener","updateClass","oldData","cls","transitionClass","_transitionClasses","_prevClass","klass","RANGE_TOKEN","CHECKBOX_RADIO_TOKEN","normalizeEvents","change","target$1","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","currentTarget","ownerDocument","updateDOMListeners","events","svgContainer","updateDOMProps","oldProps","_value","strCur","shouldUpdateValue","checkVal","composing","isNotInFocusAndDirty","isDirtyWithModifiers","notInFocus","activeElement","_vModifiers","number","trim","parseStyleText","cssText","listDelimiter","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","getStyle","checkChild","styleData","cssVarRE","importantRE","setProp","setProperty","normalizedName","normalize","vendorNames","emptyStyle","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","whitespaceRE","addClass","classList","getAttribute","removeClass","tar","resolveTransition","css","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","requestAnimationFrame","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","getTransitionInfo","propCount","ended","onEnd","transformRE","styles","getComputedStyle","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","s","enter","toggleDisplay","cancelled","_enterCb","appearClass","appearToClass","appearActiveClass","beforeEnter","afterEnter","enterCancelled","beforeAppear","appear","afterAppear","appearCancelled","duration","transitionNode","isAppear","startClass","activeClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","checkDuration","expectsCSS","userWantsControl","getHookArgumentsLength","show","pendingNode","_pending","isValidDuration","leave","beforeLeave","afterLeave","leaveCancelled","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","platformModules","vmodel","trigger","directive","binding","_vOptions","setSelected","getValue","onCompositionStart","onCompositionEnd","prevOptions","curOptions","o","needReset","hasNoMatchingOption","actuallySetSelected","isMultiple","option","selectedIndex","initEvent","dispatchEvent","locateNode","transition$$1","originalDisplay","__vOriginalDisplay","display","unbind","platformDirectives","transitionProps","mode","getRealChild","compOptions","extractTransitionData","placeholder","h","rawChild","hasParentTransition","isSameChild","oldChild","isNotTextNode","isVShowDirective","Transition","_leaving","oldRawChild","delayedLeave","moveClass","TransitionGroup","beforeMount","kept","prevChildren","rawChildren","transitionData","removed","c$1","pos","getBoundingClientRect","updated","hasMove","callPendingCbs","recordPosition","applyTranslation","_reflow","body","offsetHeight","moved","transform","WebkitTransform","transitionDuration","_moveCb","propertyName","_hasMove","cloneNode","newPos","oldPos","dx","left","dy","top","platformComponents","root","exports","module","define","amd","self","_terminal","_renderService","_liveRegionLineCount","_charsToConsume","_charsToAnnounce","_accessibilityTreeRoot","_rowContainer","_rowElements","rows","_createAccessibilityTreeNode","_topBoundaryFocusListener","_onBoundaryFocus","_bottomBoundaryFocusListener","_refreshRowsDimensions","_renderRowsDebouncer","RenderDebouncer","_renderRows","_refreshRows","_liveRegion","element","Error","insertAdjacentElement","register","onResize","_onResize","onRender","onScroll","onA11yChar","char","_onChar","onLineFeed","onA11yTab","spaceCount","_onTab","onKey","_onKey","onBlur","_clearLiveRegion","onDimensionsChange","_screenDprMonitor","ScreenDprMonitor","setListener","addDisposableDomListener","dispose","removeElementFromParent","this","position","boundaryElement","beforeBoundaryElement","buffer","lines","relatedTarget","topBoundaryElement","bottomBoundaryElement","newElement","scrollLines","focus","preventDefault","tabIndex","_refreshRowDimensions","MAX_ROWS_TO_READ","Strings","tooMuchOutput","isMac","keyChar","refresh","setSize","lineData","translateBufferLineToString","ydisp","posInSet","innerText","_announceCharacters","dimensions","actualCellHeight","height","Disposable","AccessibilityManager","prepareTextForTerminal","bracketTextForPaste","bracketedPasteMode","paste","textarea","coreService","decPrivateModes","triggerDataEvent","moveTextAreaUnderMouseCursor","ev","screenElement","clientX","clientY","width","zIndex","selectionService","clipboardData","setData","selectionText","stopPropagation","shouldSelectWord","rightClickSelect","select","channels","rgb","rgba","toPaddedHex","contrastRatio","l1","l2","toCss","r","g","toRgba","color","blend","bg","fg","fgR","fgG","fgB","bgR","bgG","bgB","round","isOpaque","ensureContrastRatio","ratio","toColor","opaque","rgbaColor","toChannels","opacity","relativeLuminance2","rs","gs","bs","pow","relativeLuminance","reduceLuminance","bgRgba","fgRgba","cr","ceil","increaseLuminance","min","bgL","fgL","_color","_rgba","setCss","getCss","setColor","getColor","ColorContrastCache","DEFAULT_FOREGROUND","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","DEFAULT_ANSI_COLORS","colors","allowTransparency","canvas","getContext","_ctx","globalCompositeOperation","_litmusColor","createLinearGradient","_contrastCache","foreground","background","cursor","cursorAccent","selectionTransparent","selectionOpaque","ansi","contrastCache","onOptionsChange","setTheme","theme","_parseColor","selection","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fillStyle","fillRect","getImageData","substring","alpha","ColorManager","elements","parentElement","disposed","_bufferService","_logService","_unicodeService","_linkMatchers","_nextLinkMatcherId","_onShowLinkUnderline","EventEmitter","_onHideLinkUnderline","_onLinkTooltip","_rowsToLinkify","attachToDom","mouseZoneManager","_element","_mouseZoneManager","linkifyRows","clearAll","_rowsTimeoutId","_linkifyRows","Linkifier","_timeBeforeLatency","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","cols","hasNext","_doLinkifyRow","range","first","content","debug","registerLinkMatcher","regex","matcher","matchIndex","validationCallback","hoverTooltipCallback","tooltipCallback","hoverLeaveCallback","leaveCallback","willLinkActivate","priority","_addLinkMatcherToList","deregisterLinkMatcher","matcherId","rowIndex","rex","flags","uri","bufferIndex","stringIndexToBufferIndex","line","getFg","isValid","_addLink","exec","x","y","getStringCellWidth","x1","y1","x2","y2","MouseZone","newWindow","open","opener","location","href","fire","_createLinkHoverEvent","IBufferService","ILogService","IUnicodeService","clickCallback","hoverCallback","_linkProviders","_linkCacheDisposables","_isMouseOut","_activeLine","getDisposeArrayDisposable","_currentLink","registerLinkProvider","linkProvider","providerIndex","mouseService","renderService","_mouseService","_clearCurrentLink","_onMouseMove","_onClick","_lastMouseEvent","_positionFromMouseEvent","composedPath","contains","_lastBufferCell","_onHover","_askForLink","_linkAtPosition","link","useLineCache","_activeProviderReplies","reply","linkWithState","Map","linkProvided","_checkLinkProviderResult","provideLinks","links","linksWithState","size","_removeIntersectingLinks","replies","occupiedCells","providerReply","startX","endX","hasLinkBefore","linkAtPosition","find","_handleNewLink","currentLink","startRow","endRow","_linkLeave","disposeArray","state","decorations","underline","pointerCursor","isHovered","_linkHover","toggle","_fireUnderlineEvent","onRenderedBufferChange","hover","showEvent","scrollOffset","_createLinkUnderlineEvent","sameLine","wrappedFromLeft","wrappedToRight","coords","getCoords","Linkifier2","promptLabel","_screenElement","_selectionService","_optionsService","_zones","_areZonesActive","_lastHoverCoords","_initialSelectionLength","_onMouseDown","_mouseMoveListener","_mouseLeaveListener","_onMouseLeave","_clickListener","_deactivate","zone","_activate","_currentZone","pageX","pageY","_findZoneEventAt","_tooltipTimeout","_onTooltip","linkTooltipHoverDuration","_getSelectionLength","currentSelectionLength","IMouseService","ISelectionService","IOptionsService","MouseZoneManager","_renderCallback","_animationFrame","cancelAnimationFrame","rowStart","rowEnd","rowCount","_rowCount","_rowStart","_rowEnd","_innerRefresh","_currentDevicePixelRatio","devicePixelRatio","listener","_listener","clearListener","_outerListener","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","browser","Browser","_keyDownHandled","_onCursorMove","_onRender","_onSelectionChange","_onTitleChange","_onBell","_onFocus","_onBlur","_onA11yCharEmitter","_onA11yTabEmitter","_setup","linkifier","_instantiationService","createInstance","linkifier2","_inputHandler","onRequestBell","bell","onRequestRefreshRows","onRequestReset","reset","onRequestWindowsOptionsReport","_reportWindowsOptions","onAnsiColorChange","_changeAnsiColor","forwardEvent","onCursorMove","onTitleChange","_afterResize","optionsService","_colorManager","ansiColor","colorIndex","setColors","viewport","onThemeChange","_isDisposed","_customKeyEventHandler","write","buffers","preventScroll","_updateOptions","_charSizeService","setRenderer","_createRenderer","syncScrollArea","screenReaderMode","_accessibilityManager","setupTabStops","_setTheme","_onTextAreaFocus","_coreService","sendFocus","C0","ESC","updateCursorStyle","_showCursor","blur","_onTextAreaBlur","_syncTextArea","isCursorInViewport","_compositionHelper","isComposing","cursorY","ybase","bufferLine","cursorX","cellHeight","getWidth","cellWidth","actualCellWidth","cursorTop","cursorLeft","lineHeight","_initGlobal","_bindKeys","hasSelection","copyHandler","pasteHandlerWrapper","handlePasteEvent","isFirefox","button","rightClickHandler","rightClickSelectsWord","isLinux","_keyUp","_keyDown","_keyPress","compositionstart","compositionupdate","compositionend","updateCompositionElements","_queueLinkification","isConnected","_document","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","coreBrowserService","CoreBrowserService","setService","ICoreBrowserService","CharSizeService","ICharSizeService","_theme","onOptionChange","_characterJoinerService","CharacterJoinerService","ICharacterJoinerService","renderer","RenderService","IRenderService","resize","_compositionView","CompositionHelper","_soundService","SoundService","ISoundService","MouseService","Viewport","amount","onRequestSyncScrollBar","onFocus","SelectionService","onRequestScrollLines","suppressScrollEvent","onSelectionChange","onRequestRedraw","onSelectionChanged","columnSelectMode","onLinuxMouseSelection","_onScroll","onMouseDown","_coreMouseService","areMouseEventsActive","disable","enable","bindMouse","rendererType","Renderer","DomRenderer","sendEvent","but","action","getRawByteCoords","overrideType","buttons","deltaY","triggerMouseEvent","col","row","ctrl","ctrlKey","alt","shiftKey","requestedEvents","mouseup","wheel","mousedrag","mousemove","eventListeners","cancel","onProtocolChange","logLevel","explainEvents","activeProtocol","shouldForceSelection","hasScrollback","getLinesScrolled","sequence","applicationCursorKeys","abs","onWheel","onTouchStart","onTouchMove","refreshRows","shouldColumnSelect","isCursorInitialized","disp","attachCustomKeyEventHandler","customKeyEventHandler","registerCharacterJoiner","joinerId","deregisterCharacterJoiner","deregister","markers","addMarker","cursorYOffset","normal","column","setSelection","getSelection","getSelectionPosition","startColumn","selectionStart","endColumn","selectionEnd","clearSelection","selectAll","selectLines","keydown","scrollToBottom","evaluateKeyboardEvent","macOptionIsMeta","scrollCount","_isThirdLevelShift","ETX","CR","domEvent","thirdLevelKey","metaKey","isWindows","keyCode","wasModifierKeyOnlyEvent","charCode","which","fromCharCode","_soundBell","playBellSound","hasValidSize","getBlankLine","DEFAULT_ATTR_DATA","WindowsOptionsReportType","GET_WIN_SIZE_PIXELS","canvasWidth","scaledCanvasWidth","toFixed","canvasHeight","scaledCanvasHeight","GET_CELL_SIZE_PIXELS","scaledCellWidth","scaledCellHeight","cancelEvents","_visualBell","bellStyle","CoreTerminal","Terminal","_scrollLines","_scrollArea","scrollBarWidth","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastTouchY","_lastScrollTop","_wheelPartialScroll","_refreshAnimationFrame","_ignoreNextScrollEvent","offsetWidth","backgroundColor","_refresh","newBufferHeight","scrollTop","newScrollTop","offsetParent","diff","_bubbleScroll","scrollPosFromTop","cancelable","_getPixelsScrolled","_applyScrollModifier","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","modifier","fastScrollModifier","fastScrollSensitivity","scrollSensitivity","touches","_textarea","_isComposing","_isSendingComposition","_compositionPosition","_dataAlreadySent","_finalizeComposition","_handleAnyTextareaChanges","waitForPropagation","input","dontRecurse","fontFamily","fontSize","compositionViewBounds","ICoreService","getCoordsRelativeToElement","rect","colCount","hasValidCharSize","isSelection","moveToRequestedRow","startY","targetY","bufferService","applicationCursor","wrappedRowsForRow","wrappedRows","direction","verticalDirection","isWrapped","wrappedRowsCount","currentRow","lineWraps","startCol","endCol","forward","currentCol","bufferStr","mod","count","rpt","targetX","resetStartingRow","horizontalDirection","moveToRequestedCol","rowDifference","currX","colsFromRowEnd","_addons","instance","loadAddon","terminal","loadedAddon","isDisposed","_wrappedAddonDispose","AddonManager","_core","_addonManager","_checkProposedApi","allowProposedApi","onData","onBinary","onBell","_parser","ParserApi","UnicodeApi","_buffer","BufferNamespaceApi","columns","_verifyIntegers","registerMarker","scrollPages","pageCount","scrollToTop","scrollToLine","writeUtf8","writeln","getOption","setOption","addon","Infinity","getLine","BufferLineApiView","getNullCell","CellData","_onBufferChange","_normal","BufferApiView","_alternate","onBufferActivate","alternate","_line","getCell","cell","loadCell","translateToString","trimRight","registerCsiHandler","addCsiHandler","registerDcsHandler","addDcsHandler","registerEscHandler","addEscHandler","registerOscHandler","ident","addOscHandler","provider","unicodeService","versions","activeVersion","_container","_alpha","_colors","_rendererId","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","chars","code","bold","dim","italic","_canvas","_initCanvas","_charAtlas","throwIfFalsy","_clearAll","onOptionsChanged","onGridChanged","colorSet","_refreshCharAtlas","_setTransparency","oldCanvas","replaceChild","acquireCharAtlas","warmUp","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","_fillCells","_fillBottomLineAtCells","_fillLeftLineAtCell","_strokeRectAtCell","lineWidth","strokeRect","clearRect","_clearCells","_fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","getChars","_drawChars","contrastColor","_getContrastColor","isFgRGB","isBgRGB","_drawUncachedChars","isInverse","isBgDefault","INVERTED_DEFAULT_COLOR","getBgColor","isFgDefault","getFgColor","DEFAULT_COLOR","drawBoldTextInBrightColors","isBold","WHITESPACE_CELL_CHAR","getCode","WHITESPACE_CELL_CODE","isDim","isItalic","draw","fgOverride","save","AttributeData","toColorRGB","globalAlpha","DIM_OPACITY","restore","beginPath","clip","fontWeightBold","fontWeight","minimumContrastRatio","adjustedColor","fgColor","fgColorMode","getFgColorMode","bgColor","bgColorMode","getBgColorMode","temp","temp2","_resolveBackgroundRgba","_resolveForegroundRgba","inverse","BaseRenderLayer","BLINK_INTERVAL","container","rendererId","_onRequestRedraw","_coreBrowserService","_cell","_state","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","cursorBlink","CursorBlinkStateManager","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","isCursorHidden","viewportRelativeCursorY","cursorStyle","_renderBlurCursor","isCursorVisible","cursorWidth","strokeStyle","CursorRenderLayer","_restartInterval","_blinkStartTimeout","_blinkInterval","clearInterval","_animationTimeRestarted","timeToStart","time","setInterval","GridCache","onShowLinkUnderline","onHideLinkUnderline","middleRowCount","is256Color","LinkRenderLayer","nextRendererId","instantiationService","_id","_renderLayers","TextRenderLayer","SelectionRenderLayer","_devicePixelRatio","_updateDimensions","removeTerminalFromCache","onDevicePixelRatioChange","onCharSizeChanged","_runOperation","operation","renderRows","letterSpacing","IInstantiationService","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","startRowEndCol","middleRowsCount","_areCoordinatesEqual","coord1","coord2","_characterWidth","_characterFont","_characterOverlapCache","_workCell","terminalFont","_forEachCell","firstRow","lastRow","joinedRanges","getJoinedCharacters","isJoined","lastCharX","JoinedCellData","_isOverlapping","getCodePoint","NULL_CELL_CODE","_drawBackground","prevFillStyle","nextFillStyle","isBgPalette","_drawForeground","isInvisible","isUnderline","beginFrame","overlaps","measureText","_didWarmUp","_doWarmUp","BaseCharAtlas","charAtlasCache","newConfig","generateConfig","ownedByIndex","entry","ownedBy","configEquals","atlas","newEntry","DynamicCharAtlas","clonedColors","colorCode","CHAR_ATLAS_CELL_SPACING","TRANSPARENT_COLOR","getGlyphCacheKey","glyph","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","_width","_height","capacity","_cacheMap","LRUMap","prealloc","_canCache","glyphKey","cacheValue","_drawFromCache","peek","_drawToCache","_toCoordinateX","_toCoordinateY","isEmpty","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","idx","_getBackgroundColor","_getForegroundColor","fontStyle","imageData","offset","clearColor","putImageData","_addGlyphToBitmap","isSafari","_generateBitmap","glyphsMovingToBitmap","createImageBitmap","bitmap","NoneCharAtlas","_map","_head","_tail","_nodePool","_unlinkNode","prev","_appendNode","tail","nodePool","peekValue","head","TERMINAL_CLASS_PREFIX","FG_CLASS_PREFIX","BG_CLASS_PREFIX","FOCUS_CLASS","nextTerminalId","_linkifier","_linkifier2","_terminalClass","_refreshRowElements","_selectionContainer","_injectCss","_rowFactory","DomRendererRowFactory","_onLinkHover","_onLinkLeave","_themeStyleElement","_dimensionsStyleElement","overflow","_terminalSelector","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","documentFragment","_createSelectionElement","colStart","colEnd","cursorAbsoluteY","rowElement","createRow","_setCellUnderline","enabled","span","textDecoration","DIM_CLASS","UNDERLINE_CLASS","isCursorRow","lineLength","charElement","_applyMinimumContrast","_addStyle","padStart","padChar","isSelectAllActive","selectionStartLength","areSelectionValuesReversed","startPlusLength","onTrim","SelectionModel","_onCharSizeChange","_measureStrategy","DomMeasureStrategy","_parentElement","_result","_measureElement","geometry","firstCell","combinedData","isCombined","setFromCharData","getAsCharData","_characterJoiners","_nextCharacterJoinerId","joiner","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","getBg","getTrimmedLength","_getJoinedRanges","startIndex","endIndex","joinerRanges","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","getString","newRange","inRange","getRootNode","hasFocus","_renderer","_isPaused","_needsFullRefresh","_isNextRenderRedrawOnly","_needsSelectionRefresh","_canvasWidth","_canvasHeight","_selectionState","_onDimensionsChange","_onRefreshRequest","_renderDebouncer","_fullRefresh","onCharSizeChange","IntersectionObserver","_onIntersectionChange","threshold","disconnect","isIntersecting","intersectionRatio","isRedrawOnly","_fireOnCanvasResize","changeOptions","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","_dragScrollAmount","_enabled","_mouseDownTimeStamp","_oldHasSelection","_oldSelectionStart","_oldSelectionEnd","_onLinuxMouseSelection","_onRedrawRequest","_onRequestScrollLines","_mouseUpListener","_onMouseUp","onUserInput","_trimListener","_onTrim","_onBufferActivate","_model","_activeSelectionMode","_removeMouseDownListeners","finalSelectionStart","finalSelectionEnd","lineText","isLinuxMouseSelection","_isClickInSelection","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAtCursor","allowWhitespaceOnlySelection","getRangeLength","_selectWordAt","_getMouseEventScrollAmount","terminalHeight","macOptionClickForcesSelection","_onIncrementalClick","detail","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","_dragScrollIntervalTimer","_dragScroll","hasWidth","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","coordinates","moveToCellSequence","_fireEventIfSelectionChanged","_fireOnSelectionChange","activeBuffer","_convertViewportColToCharacterIndex","charIndex","_getWordAt","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","_isCharWordSeparator","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","wordSeparator","wrappedRange","getWrappedRangeForLine","createDecorator","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","bellSound","connect","destination","base64","binaryString","atob","bytes","Uint8Array","dataURI","_maxLength","onDeleteEmitter","onInsertEmitter","onTrimEmitter","_array","_startIndex","newMaxLength","newArray","_getCyclicIndex","newLength","recycle","deleteCount","countToTrim","trimStart","shiftElements","expandListBy","CircularList","depth","clonedObject","hasWriteSyncWarnHappened","_onBinary","_onData","_onLineFeed","InstantiationService","OptionsService","BufferService","LogService","CoreService","CoreMouseService","ICoreMouseService","_dirtyRowService","DirtyRowService","IDirtyRowService","UnicodeService","_charsetService","CharsetService","ICharsetService","InputHandler","markRangeDirty","scrollBottom","_writeBuffer","WriteBuffer","promiseResult","parse","_onScrollApi","_windowsMode","writeSync","maxSubsequentCalls","LogLevelEnum","WARN","MINIMUM_COLS","MINIMUM_ROWS","scroll","eraseAttr","windowsMode","_enableWindowsMode","updateWindowsModeWrappedState","final","_listeners","_disposed","_event","arg1","arg2","GLEVEL","MAX_PARSEBUFFER_LENGTH","paramToWindowOption","setWinLines","restoreWin","minimizeWin","setWinPosition","setWinSizePixels","raiseWin","lowerWin","refreshWin","setWinSizeChars","maximizeWin","fullscreenWin","getWinState","getWinPosition","getWinSizePixels","getScreenSizePixels","getCellSizePixels","getWinSizeChars","getScreenSizeChars","getIconTitle","getWinTitle","pushTitle","popTitle","Uint32Array","put","subarray","unhook","success","utf32ToString","pt","EscapeSequenceParser","_parseBuffer","_stringDecoder","StringToUtf32","_utf8Decoder","Utf8ToUtf32","_windowTitle","_iconName","_windowTitleStack","_iconNameStack","_curAttrData","_eraseAttrDataInternal","_onRequestBell","_onRequestRefreshRows","_onRequestReset","_onRequestSyncScrollBar","_onRequestWindowsOptionsReport","_onA11yChar","_onA11yTab","_onAnsiColorChange","_parseStack","paused","cursorStartX","cursorStartY","decodedLength","setCsiHandlerFallback","identifier","identToString","setEscHandlerFallback","setExecuteHandlerFallback","setOscHandlerFallback","setDcsHandlerFallback","payload","setPrintHandler","print","insertChars","intermediates","scrollLeft","cursorUp","scrollRight","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","prefix","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributesPrimary","sendDeviceAttributesSecondary","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","setModePrivate","resetMode","resetModePrivate","charAttributes","deviceStatus","deviceStatusPrivate","softReset","setCursorStyle","setScrollRegion","saveCursor","windowOptions","restoreCursor","insertColumns","deleteColumns","setExecuteHandler","BEL","LF","lineFeed","VT","FF","carriageReturn","BS","backspace","HT","tab","SO","shiftOut","SI","shiftIn","C1","IND","NEL","nextLine","HTS","tabSet","OscHandler","setTitle","setIconName","setAnsiColor","reverseIndex","keypadApplicationMode","keypadNumericMode","fullReset","setgLevel","selectDefaultCharset","flag","selectCharset","CHARSETS","screenAlignmentPattern","setErrorHandler","DECRQSS","_preserveStack","_logSlowResolvingAsync","race","rej","wasPaused","clearRange","decode","chWidth","charset","wraparoundMode","wraparound","insertMode","modes","curAttr","bufferRow","markDirty","setCellFromCodePoint","extended","wcwidth","stringFromCodePoint","_eraseAttrData","insertCells","NULL_CELL_WIDTH","addCodepointToCell","precedingCodepoint","hasContent","DcsHandler","convertEol","reverseWraparound","_restrictCursor","originalX","nextStop","maxCol","origin","_setCursor","_moveCursor","diffToTop","diffToBottom","param","tabs","prevStop","_eraseInBufferLine","clearWrap","replaceCells","_resetBufferLine","fill","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","deleteCells","_is","term","termName","setgCharset","DEFAULT_CHARSET","applicationKeypad","activeEncoding","activateAltBuffer","activateNormalBuffer","_updateAttrColor","c1","c2","c3","fromColorRGB","_extractColor","accu","cSpace","advance","hasSubParams","subparams","getSubParams","underlineColor","_processUnderline","underlineStyle","updateExtended","savedX","savedY","savedCurAttrData","savedCharset","isBlinking","bottom","second","_savedCharset","_parseAnsiColorChange","collectAndFlag","scrollRegionHeight","level","yOffset","markAllDirty","_disposables","unregister","disposables","array","isNode","includes","isIpad","isIphone","fillFallback","lastChar","CHAR_DATA_CODE_INDEX","ExtendedAttrs","newObj","isBlink","isFgPalette","isAttributeDefault","hasExtendedAttrs","getUnderlineColor","getUnderlineColorMode","isUnderlineColorRGB","isUnderlineColorPalette","isUnderlineColorDefault","getUnderlineStyle","MAX_BUFFER_SIZE","_hasScrollback","_nullCell","fromCharData","NULL_CELL_CHAR","_whitespaceCell","WHITESPACE_CELL_WIDTH","_cols","_rows","_getCorrectBufferLength","getWhitespaceCell","BufferLine","maxLength","relativeY","correctBufferLength","scrollback","fillViewportRows","fillAttr","newCols","newRows","nullCell","addToY","amountToTrim","_isReflowEnabled","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","wrappedLines","absoluteY","trimmedLines","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","newLines","newLine","destLineIndex","destCol","srcLineIndex","srcCol","cellsToCopy","copyCellsFrom","wrappedLinesIndex","getWrappedLineTrimmedLength","setCell","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","insertCountEmitted","lineIndex","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CHAR_INDEX","tabStopWidth","marker","Marker","onInsert","onDelete","onDispose","_removeMarker","startOverscan","endOverscan","BufferStringIterator","Buffer","_trimRight","_endIndex","_startOverscan","_endOverscan","_current","fillCellData","_combined","_extendedAttrs","cp","CHAR_DATA_ATTR_INDEX","codePoint","eAttrs","copyFrom","applyInReverse","srcData","srcCombinedKeys","endsInNull","followingLineStartsWithWide","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","reduce","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","_alt","_activeBuffer","inactiveBuffer","BufferSet","combined","DEFAULT_ATTR","_nextId","_onDispose","C","NUL","SOH","STX","EOT","ENQ","ACK","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","FS","GS","RS","US","SP","DEL","PAD","HOP","BPH","NBH","SSA","ESA","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","applicationCursorMode","keyMapping","codepoint","_interim","startPos","interim","byte1","byte2","byte3","byte4","discardInterim","missing","fourStop","table","BMP_COMBINING","HIGH_COMBINING","num","ucs","mid","bisearch","UnicodeV6","qmt","queueMicrotask","_action","_callbacks","_pendingData","_bufferOffset","_isSyncWriting","_syncCalls","chunk","_innerWrite","lastTime","startTime","PAYLOAD_LIMIT","EMPTY_HANDLERS","_handlers","_active","_ident","_handlerFb","_stack","loopPosition","fallThrough","registerHandler","handlerList","handlerIndex","clearHandler","setHandlerFallback","handlerResult","DcsParser","EMPTY_PARAMS","Params","addParam","_handler","_params","_hitLimit","setDefault","addMany","codes","TransitionTable","NON_ASCII_PRINTABLE","VT500_TRANSITION_TABLE","blueprint","unused","PRINTABLES","EXECUTABLES","states","_transitions","handlerPos","chunkPos","initialState","currentState","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscParser","OscParser","_dcsParser","_errorHandler","_identifier","finalRange","intermediate","finalCode","reverse","clearPrintHandler","clearEscHandler","clearExecuteHandler","clearCsiHandler","clearDcsHandler","clearOscHandler","clearErrorHandler","collect","abort","addSubParam","addDigit","handlersEsc","jj","_start","_put","MAX_VALUE","maxSubParamsLength","Int32Array","_subParams","_subParamsLength","_subParamsIdx","Uint16Array","_rejectDigits","_rejectSubDigits","_digitIsSub","fromArray","k","newParams","getSubParamsAll","store","isUserScrolling","_cachedBlankLine","topRow","bottomRow","willBufferBeTrimmed","isFull","oldYdisp","scrollAmount","glevel","_charsets","DEFAULT_PROTOCOLS","NONE","restrict","X10","VT200","DRAG","ANY","eventCode","isSGR","S","DEFAULT_ENCODINGS","DEFAULT","SGR","_protocols","_encodings","_activeProtocol","_activeEncoding","_onProtocolChange","_lastEvent","addProtocol","addEncoding","protocol","encoding","_compareEvents","report","triggerBinaryEvent","down","up","drag","move","e1","e2","DEFAULT_MODES","DEFAULT_DEC_PRIVATE_MODES","_onUserInput","_scrollToBottom","wasUserInput","disableStdin","_end","_entries","entries","service","ServiceCollection","_services","getService","ctor","serviceDependencies","getServiceDependencies","serviceArgs","dependency","firstServiceArgPos","optionsKeyToLogLevel","DEBUG","INFO","ERROR","off","OFF","_updateLogLevel","_evalLazyOptionalParams","optionalParams","_log","log","DEFAULT_BELL_SOUND","DEFAULT_OPTIONS","altClickMovesCursor","FONT_WEIGHT_OPTIONS","CONSTRUCTOR_ONLY_OPTIONS","_onOptionChange","newValue","_sanitizeAndValidateOption","storeServiceDependency","serviceRegistry","decorator","_providers","_onChange","defaultProvider","_activeProvider","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","fit","dims","proposeDimensions","core","parentElementStyle","parentElementHeight","getPropertyValue","parentElementWidth","elementStyle","availableHeight","availableWidth","FitAddon","installedModules","m","object","socket","_socket","binaryType","_bidirectional","bidirectional","addSocketListener","_sendData","_sendBinary","readyState","send","AttachAddon","bundleURL","getBundleURLCached","getBundleURL","stack","getBaseURL","url","bundle","require","updateLink","newLink","onload","cssTimeout","reloadCSS","querySelectorAll","App","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","ws","onmessage","handled","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","overlay","createErrorOverlay","getElementById","stackTrace","getParents","parents"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AACA;AAEA,IAAIA,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,CAAlB,EAEA;AACA;;AACA,SAASC,OAAT,CAAkBC,CAAlB,EAAqB;AACnB,SAAOA,CAAC,KAAKC,SAAN,IAAmBD,CAAC,KAAK,IAAhC;AACD;;AAED,SAASE,KAAT,CAAgBF,CAAhB,EAAmB;AACjB,SAAOA,CAAC,KAAKC,SAAN,IAAmBD,CAAC,KAAK,IAAhC;AACD;;AAED,SAASG,MAAT,CAAiBH,CAAjB,EAAoB;AAClB,SAAOA,CAAC,KAAK,IAAb;AACD;;AAED,SAASI,OAAT,CAAkBJ,CAAlB,EAAqB;AACnB,SAAOA,CAAC,KAAK,KAAb;AACD;AAED;AACA;AACA;;;AACA,SAASK,WAAT,CAAsBC,KAAtB,EAA6B;AAC3B,SACE,OAAOA,KAAP,KAAiB,QAAjB,IACA,OAAOA,KAAP,KAAiB,QADjB,IAEA;AACA,SAAOA,KAAP,KAAiB,QAHjB,IAIA,OAAOA,KAAP,KAAiB,SALnB;AAOD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,QAAT,CAAmBC,GAAnB,EAAwB;AACtB,SAAOA,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,QAAtC;AACD;AAED;AACA;AACA;;;AACA,IAAIC,SAAS,GAAGZ,MAAM,CAACa,SAAP,CAAiBC,QAAjC;;AAEA,SAASC,SAAT,CAAoBN,KAApB,EAA2B;AACzB,SAAOG,SAAS,CAACI,IAAV,CAAeP,KAAf,EAAsBQ,KAAtB,CAA4B,CAA5B,EAA+B,CAAC,CAAhC,CAAP;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASC,aAAT,CAAwBP,GAAxB,EAA6B;AAC3B,SAAOC,SAAS,CAACI,IAAV,CAAeL,GAAf,MAAwB,iBAA/B;AACD;;AAED,SAASQ,QAAT,CAAmBhB,CAAnB,EAAsB;AACpB,SAAOS,SAAS,CAACI,IAAV,CAAeb,CAAf,MAAsB,iBAA7B;AACD;AAED;AACA;AACA;;;AACA,SAASiB,iBAAT,CAA4BC,GAA5B,EAAiC;AAC/B,MAAIC,CAAC,GAAGC,UAAU,CAACC,MAAM,CAACH,GAAD,CAAP,CAAlB;AACA,SAAOC,CAAC,IAAI,CAAL,IAAUG,IAAI,CAACC,KAAL,CAAWJ,CAAX,MAAkBA,CAA5B,IAAiCK,QAAQ,CAACN,GAAD,CAAhD;AACD;;AAED,SAASO,SAAT,CAAoBP,GAApB,EAAyB;AACvB,SACEhB,KAAK,CAACgB,GAAD,CAAL,IACA,OAAOA,GAAG,CAACQ,IAAX,KAAoB,UADpB,IAEA,OAAOR,GAAG,CAACS,KAAX,KAAqB,UAHvB;AAKD;AAED;AACA;AACA;;;AACA,SAAShB,QAAT,CAAmBO,GAAnB,EAAwB;AACtB,SAAOA,GAAG,IAAI,IAAP,GACH,EADG,GAEHU,KAAK,CAACC,OAAN,CAAcX,GAAd,KAAuBH,aAAa,CAACG,GAAD,CAAb,IAAsBA,GAAG,CAACP,QAAJ,KAAiBF,SAA9D,GACEqB,IAAI,CAACC,SAAL,CAAeb,GAAf,EAAoB,IAApB,EAA0B,CAA1B,CADF,GAEEG,MAAM,CAACH,GAAD,CAJZ;AAKD;AAED;AACA;AACA;AACA;;;AACA,SAASc,QAAT,CAAmBd,GAAnB,EAAwB;AACtB,MAAIC,CAAC,GAAGC,UAAU,CAACF,GAAD,CAAlB;AACA,SAAOe,KAAK,CAACd,CAAD,CAAL,GAAWD,GAAX,GAAiBC,CAAxB;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASe,OAAT,CACEC,GADF,EAEEC,gBAFF,EAGE;AACA,MAAIC,GAAG,GAAGxC,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAV;AACA,MAAIC,IAAI,GAAGJ,GAAG,CAACK,KAAJ,CAAU,GAAV,CAAX;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCJ,IAAAA,GAAG,CAACE,IAAI,CAACE,CAAD,CAAL,CAAH,GAAe,IAAf;AACD;;AACD,SAAOL,gBAAgB,GACnB,UAAUlB,GAAV,EAAe;AAAE,WAAOmB,GAAG,CAACnB,GAAG,CAACyB,WAAJ,EAAD,CAAV;AAAgC,GAD9B,GAEnB,UAAUzB,GAAV,EAAe;AAAE,WAAOmB,GAAG,CAACnB,GAAD,CAAV;AAAkB,GAFvC;AAGD;AAED;AACA;AACA;;;AACA,IAAI0B,YAAY,GAAGV,OAAO,CAAC,gBAAD,EAAmB,IAAnB,CAA1B;AAEA;AACA;AACA;;AACA,IAAIW,mBAAmB,GAAGX,OAAO,CAAC,4BAAD,CAAjC;AAEA;AACA;AACA;;AACA,SAASY,MAAT,CAAiBC,GAAjB,EAAsBC,IAAtB,EAA4B;AAC1B,MAAID,GAAG,CAACL,MAAR,EAAgB;AACd,QAAIO,KAAK,GAAGF,GAAG,CAACG,OAAJ,CAAYF,IAAZ,CAAZ;;AACA,QAAIC,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,aAAOF,GAAG,CAACI,MAAJ,CAAWF,KAAX,EAAkB,CAAlB,CAAP;AACD;AACF;AACF;AAED;AACA;AACA;;;AACA,IAAIG,cAAc,GAAGvD,MAAM,CAACa,SAAP,CAAiB0C,cAAtC;;AACA,SAASC,MAAT,CAAiB7C,GAAjB,EAAsB8C,GAAtB,EAA2B;AACzB,SAAOF,cAAc,CAACvC,IAAf,CAAoBL,GAApB,EAAyB8C,GAAzB,CAAP;AACD;AAED;AACA;AACA;;;AACA,SAASC,MAAT,CAAiBC,EAAjB,EAAqB;AACnB,MAAIC,KAAK,GAAG5D,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAZ;AACA,SAAQ,SAASoB,QAAT,CAAmBvB,GAAnB,EAAwB;AAC9B,QAAIwB,GAAG,GAAGF,KAAK,CAACtB,GAAD,CAAf;AACA,WAAOwB,GAAG,KAAKF,KAAK,CAACtB,GAAD,CAAL,GAAaqB,EAAE,CAACrB,GAAD,CAApB,CAAV;AACD,GAHD;AAID;AAED;AACA;AACA;;;AACA,IAAIyB,UAAU,GAAG,QAAjB;AACA,IAAIC,QAAQ,GAAGN,MAAM,CAAC,UAAUpB,GAAV,EAAe;AACnC,SAAOA,GAAG,CAAC2B,OAAJ,CAAYF,UAAZ,EAAwB,UAAUG,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAOA,CAAC,GAAGA,CAAC,CAACC,WAAF,EAAH,GAAqB,EAA7B;AAAkC,GAA5E,CAAP;AACD,CAFoB,CAArB;AAIA;AACA;AACA;;AACA,IAAIC,UAAU,GAAGX,MAAM,CAAC,UAAUpB,GAAV,EAAe;AACrC,SAAOA,GAAG,CAACgC,MAAJ,CAAW,CAAX,EAAcF,WAAd,KAA8B9B,GAAG,CAACrB,KAAJ,CAAU,CAAV,CAArC;AACD,CAFsB,CAAvB;AAIA;AACA;AACA;;AACA,IAAIsD,WAAW,GAAG,YAAlB;AACA,IAAIC,SAAS,GAAGd,MAAM,CAAC,UAAUpB,GAAV,EAAe;AACpC,SAAOA,GAAG,CAAC2B,OAAJ,CAAYM,WAAZ,EAAyB,KAAzB,EAAgCzB,WAAhC,EAAP;AACD,CAFqB,CAAtB;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AACA,SAAS2B,YAAT,CAAuBd,EAAvB,EAA2Be,GAA3B,EAAgC;AAC9B,WAASC,OAAT,CAAkBC,CAAlB,EAAqB;AACnB,QAAIC,CAAC,GAAGC,SAAS,CAACjC,MAAlB;AACA,WAAOgC,CAAC,GACJA,CAAC,GAAG,CAAJ,GACElB,EAAE,CAACoB,KAAH,CAASL,GAAT,EAAcI,SAAd,CADF,GAEEnB,EAAE,CAAC3C,IAAH,CAAQ0D,GAAR,EAAaE,CAAb,CAHE,GAIJjB,EAAE,CAAC3C,IAAH,CAAQ0D,GAAR,CAJJ;AAKD;;AAEDC,EAAAA,OAAO,CAACK,OAAR,GAAkBrB,EAAE,CAACd,MAArB;AACA,SAAO8B,OAAP;AACD;;AAED,SAASM,UAAT,CAAqBtB,EAArB,EAAyBe,GAAzB,EAA8B;AAC5B,SAAOf,EAAE,CAACuB,IAAH,CAAQR,GAAR,CAAP;AACD;;AAED,IAAIQ,IAAI,GAAGC,QAAQ,CAACtE,SAAT,CAAmBqE,IAAnB,GACPD,UADO,GAEPR,YAFJ;AAIA;AACA;AACA;;AACA,SAASW,OAAT,CAAkB1C,IAAlB,EAAwB2C,KAAxB,EAA+B;AAC7BA,EAAAA,KAAK,GAAGA,KAAK,IAAI,CAAjB;AACA,MAAIzC,CAAC,GAAGF,IAAI,CAACG,MAAL,GAAcwC,KAAtB;AACA,MAAIC,GAAG,GAAG,IAAIvD,KAAJ,CAAUa,CAAV,CAAV;;AACA,SAAOA,CAAC,EAAR,EAAY;AACV0C,IAAAA,GAAG,CAAC1C,CAAD,CAAH,GAASF,IAAI,CAACE,CAAC,GAAGyC,KAAL,CAAb;AACD;;AACD,SAAOC,GAAP;AACD;AAED;AACA;AACA;;;AACA,SAASC,MAAT,CAAiBC,EAAjB,EAAqBC,KAArB,EAA4B;AAC1B,OAAK,IAAIhC,GAAT,IAAgBgC,KAAhB,EAAuB;AACrBD,IAAAA,EAAE,CAAC/B,GAAD,CAAF,GAAUgC,KAAK,CAAChC,GAAD,CAAf;AACD;;AACD,SAAO+B,EAAP;AACD;AAED;AACA;AACA;;;AACA,SAASE,QAAT,CAAmBxC,GAAnB,EAAwB;AACtB,MAAIyC,GAAG,GAAG,EAAV;;AACA,OAAK,IAAI/C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,GAAG,CAACL,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,QAAIM,GAAG,CAACN,CAAD,CAAP,EAAY;AACV2C,MAAAA,MAAM,CAACI,GAAD,EAAMzC,GAAG,CAACN,CAAD,CAAT,CAAN;AACD;AACF;;AACD,SAAO+C,GAAP;AACD;AAED;;AAEA;AACA;AACA;AACA;AACA;;;AACA,SAASC,IAAT,CAAehB,CAAf,EAAkBiB,CAAlB,EAAqB1B,CAArB,EAAwB,CAAE;AAE1B;AACA;AACA;;;AACA,IAAI2B,EAAE,GAAG,UAAUlB,CAAV,EAAaiB,CAAb,EAAgB1B,CAAhB,EAAmB;AAAE,SAAO,KAAP;AAAe,CAA7C;AAEA;;AAEA;AACA;AACA;;;AACA,IAAI4B,QAAQ,GAAG,UAAU7B,CAAV,EAAa;AAAE,SAAOA,CAAP;AAAW,CAAzC;AAEA;AACA;AACA;AACA;;;AACA,SAAS8B,UAAT,CAAqBpB,CAArB,EAAwBiB,CAAxB,EAA2B;AACzB,MAAIjB,CAAC,KAAKiB,CAAV,EAAa;AAAE,WAAO,IAAP;AAAa;;AAC5B,MAAII,SAAS,GAAGvF,QAAQ,CAACkE,CAAD,CAAxB;AACA,MAAIsB,SAAS,GAAGxF,QAAQ,CAACmF,CAAD,CAAxB;;AACA,MAAII,SAAS,IAAIC,SAAjB,EAA4B;AAC1B,QAAI;AACF,UAAIC,QAAQ,GAAGpE,KAAK,CAACC,OAAN,CAAc4C,CAAd,CAAf;AACA,UAAIwB,QAAQ,GAAGrE,KAAK,CAACC,OAAN,CAAc6D,CAAd,CAAf;;AACA,UAAIM,QAAQ,IAAIC,QAAhB,EAA0B;AACxB,eAAOxB,CAAC,CAAC/B,MAAF,KAAagD,CAAC,CAAChD,MAAf,IAAyB+B,CAAC,CAACyB,KAAF,CAAQ,UAAUC,CAAV,EAAa1D,CAAb,EAAgB;AACtD,iBAAOoD,UAAU,CAACM,CAAD,EAAIT,CAAC,CAACjD,CAAD,CAAL,CAAjB;AACD,SAF+B,CAAhC;AAGD,OAJD,MAIO,IAAIgC,CAAC,YAAY2B,IAAb,IAAqBV,CAAC,YAAYU,IAAtC,EAA4C;AACjD,eAAO3B,CAAC,CAAC4B,OAAF,OAAgBX,CAAC,CAACW,OAAF,EAAvB;AACD,OAFM,MAEA,IAAI,CAACL,QAAD,IAAa,CAACC,QAAlB,EAA4B;AACjC,YAAIK,KAAK,GAAGzG,MAAM,CAAC0G,IAAP,CAAY9B,CAAZ,CAAZ;AACA,YAAI+B,KAAK,GAAG3G,MAAM,CAAC0G,IAAP,CAAYb,CAAZ,CAAZ;AACA,eAAOY,KAAK,CAAC5D,MAAN,KAAiB8D,KAAK,CAAC9D,MAAvB,IAAiC4D,KAAK,CAACJ,KAAN,CAAY,UAAU5C,GAAV,EAAe;AACjE,iBAAOuC,UAAU,CAACpB,CAAC,CAACnB,GAAD,CAAF,EAASoC,CAAC,CAACpC,GAAD,CAAV,CAAjB;AACD,SAFuC,CAAxC;AAGD,OANM,MAMA;AACL;AACA,eAAO,KAAP;AACD;AACF,KAnBD,CAmBE,OAAO6C,CAAP,EAAU;AACV;AACA,aAAO,KAAP;AACD;AACF,GAxBD,MAwBO,IAAI,CAACL,SAAD,IAAc,CAACC,SAAnB,EAA8B;AACnC,WAAO1E,MAAM,CAACoD,CAAD,CAAN,KAAcpD,MAAM,CAACqE,CAAD,CAA3B;AACD,GAFM,MAEA;AACL,WAAO,KAAP;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASe,YAAT,CAAuB1D,GAAvB,EAA4B7B,GAA5B,EAAiC;AAC/B,OAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,GAAG,CAACL,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,QAAIoD,UAAU,CAAC9C,GAAG,CAACN,CAAD,CAAJ,EAASvB,GAAT,CAAd,EAA6B;AAAE,aAAOuB,CAAP;AAAU;AAC1C;;AACD,SAAO,CAAC,CAAR;AACD;AAED;AACA;AACA;;;AACA,SAASiE,IAAT,CAAelD,EAAf,EAAmB;AACjB,MAAImD,MAAM,GAAG,KAAb;AACA,SAAO,YAAY;AACjB,QAAI,CAACA,MAAL,EAAa;AACXA,MAAAA,MAAM,GAAG,IAAT;AACAnD,MAAAA,EAAE,CAACoB,KAAH,CAAS,IAAT,EAAeD,SAAf;AACD;AACF,GALD;AAMD;;AAED,IAAIiC,QAAQ,GAAG,sBAAf;AAEA,IAAIC,WAAW,GAAG,CAChB,WADgB,EAEhB,WAFgB,EAGhB,QAHgB,CAAlB;AAMA,IAAIC,eAAe,GAAG,CACpB,cADoB,EAEpB,SAFoB,EAGpB,aAHoB,EAIpB,SAJoB,EAKpB,cALoB,EAMpB,SANoB,EAOpB,eAPoB,EAQpB,WARoB,EASpB,WAToB,EAUpB,aAVoB,EAWpB,eAXoB,EAYpB,gBAZoB,CAAtB;AAeA;;AAIA,IAAIC,MAAM,GAAI;AACZ;AACF;AACA;AACE;AACAC,EAAAA,qBAAqB,EAAEnH,MAAM,CAACyC,MAAP,CAAc,IAAd,CALX;;AAOZ;AACF;AACA;AACE2E,EAAAA,MAAM,EAAE,KAVI;;AAYZ;AACF;AACA;AACEC,EAAAA,aAAa,EAAE,kBAAyB,YAf5B;;AAiBZ;AACF;AACA;AACEC,EAAAA,QAAQ,EAAE,kBAAyB,YApBvB;;AAsBZ;AACF;AACA;AACEC,EAAAA,WAAW,EAAE,KAzBD;;AA2BZ;AACF;AACA;AACEC,EAAAA,YAAY,EAAE,IA9BF;;AAgCZ;AACF;AACA;AACEC,EAAAA,WAAW,EAAE,IAnCD;;AAqCZ;AACF;AACA;AACEC,EAAAA,eAAe,EAAE,EAxCL;;AA0CZ;AACF;AACA;AACE;AACAC,EAAAA,QAAQ,EAAE3H,MAAM,CAACyC,MAAP,CAAc,IAAd,CA9CE;;AAgDZ;AACF;AACA;AACA;AACEmF,EAAAA,aAAa,EAAE9B,EApDH;;AAsDZ;AACF;AACA;AACA;AACE+B,EAAAA,cAAc,EAAE/B,EA1DJ;;AA4DZ;AACF;AACA;AACA;AACEgC,EAAAA,gBAAgB,EAAEhC,EAhEN;;AAkEZ;AACF;AACA;AACEiC,EAAAA,eAAe,EAAEnC,IArEL;;AAuEZ;AACF;AACA;AACEoC,EAAAA,oBAAoB,EAAEjC,QA1EV;;AA4EZ;AACF;AACA;AACA;AACEkC,EAAAA,WAAW,EAAEnC,EAhFD;;AAkFZ;AACF;AACA;AACA;AACEoC,EAAAA,KAAK,EAAE,IAtFK;;AAwFZ;AACF;AACA;AACEC,EAAAA,eAAe,EAAElB;AA3FL,CAAd;AA8FA;;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAImB,aAAa,GAAG,6JAApB;AAEA;AACA;AACA;;AACA,SAASC,UAAT,CAAqB/F,GAArB,EAA0B;AACxB,MAAI6B,CAAC,GAAG,CAAC7B,GAAG,GAAG,EAAP,EAAWgG,UAAX,CAAsB,CAAtB,CAAR;AACA,SAAOnE,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAK,IAA3B;AACD;AAED;AACA;AACA;;;AACA,SAASoE,GAAT,CAAc5H,GAAd,EAAmB8C,GAAnB,EAAwBpC,GAAxB,EAA6BmH,UAA7B,EAAyC;AACvCxI,EAAAA,MAAM,CAACyI,cAAP,CAAsB9H,GAAtB,EAA2B8C,GAA3B,EAAgC;AAC9BhD,IAAAA,KAAK,EAAEY,GADuB;AAE9BmH,IAAAA,UAAU,EAAE,CAAC,CAACA,UAFgB;AAG9BE,IAAAA,QAAQ,EAAE,IAHoB;AAI9BC,IAAAA,YAAY,EAAE;AAJgB,GAAhC;AAMD;AAED;AACA;AACA;;;AACA,IAAIC,MAAM,GAAG,IAAIC,MAAJ,CAAY,OAAQT,aAAa,CAACU,MAAtB,GAAgC,SAA5C,CAAb;;AACA,SAASC,SAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIJ,MAAM,CAACK,IAAP,CAAYD,IAAZ,CAAJ,EAAuB;AACrB;AACD;;AACD,MAAIE,QAAQ,GAAGF,IAAI,CAACrG,KAAL,CAAW,GAAX,CAAf;AACA,SAAO,UAAUhC,GAAV,EAAe;AACpB,SAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsG,QAAQ,CAACrG,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAI,CAACjC,GAAL,EAAU;AAAE;AAAQ;;AACpBA,MAAAA,GAAG,GAAGA,GAAG,CAACuI,QAAQ,CAACtG,CAAD,CAAT,CAAT;AACD;;AACD,WAAOjC,GAAP;AACD,GAND;AAOD;AAED;AAEA;;;AACA,IAAIwI,QAAQ,IAAG,eAAe,EAAlB,CAAZ,EAEA;;AACA,IAAIC,SAAS,GAAG,OAAOC,MAAP,KAAkB,WAAlC;AACA,IAAIC,MAAM,GAAG,OAAOC,aAAP,KAAyB,WAAzB,IAAwC,CAAC,CAACA,aAAa,CAACC,QAArE;AACA,IAAIC,YAAY,GAAGH,MAAM,IAAIC,aAAa,CAACC,QAAd,CAAuB1G,WAAvB,EAA7B;AACA,IAAI4G,EAAE,GAAGN,SAAS,IAAIC,MAAM,CAACM,SAAP,CAAiBC,SAAjB,CAA2B9G,WAA3B,EAAtB;AACA,IAAI+G,IAAI,GAAGH,EAAE,IAAI,eAAeT,IAAf,CAAoBS,EAApB,CAAjB;AACA,IAAII,KAAK,GAAGJ,EAAE,IAAIA,EAAE,CAACrG,OAAH,CAAW,UAAX,IAAyB,CAA3C;AACA,IAAI0G,MAAM,GAAGL,EAAE,IAAIA,EAAE,CAACrG,OAAH,CAAW,OAAX,IAAsB,CAAzC;AACA,IAAI2G,SAAS,GAAIN,EAAE,IAAIA,EAAE,CAACrG,OAAH,CAAW,SAAX,IAAwB,CAA/B,IAAsCoG,YAAY,KAAK,SAAvE;AACA,IAAIQ,KAAK,GAAIP,EAAE,IAAI,uBAAuBT,IAAvB,CAA4BS,EAA5B,CAAP,IAA4CD,YAAY,KAAK,KAAzE;AACA,IAAIS,QAAQ,GAAGR,EAAE,IAAI,cAAcT,IAAd,CAAmBS,EAAnB,CAAN,IAAgC,CAACK,MAAhD;AACA,IAAII,WAAW,GAAGT,EAAE,IAAI,YAAYT,IAAZ,CAAiBS,EAAjB,CAAxB;AACA,IAAIU,IAAI,GAAGV,EAAE,IAAIA,EAAE,CAACW,KAAH,CAAS,gBAAT,CAAjB,EAEA;;AACA,IAAIC,WAAW,GAAI,EAAD,CAAKC,KAAvB;AAEA,IAAIC,eAAe,GAAG,KAAtB;;AACA,IAAIpB,SAAJ,EAAe;AACb,MAAI;AACF,QAAIqB,IAAI,GAAG,EAAX;AACAzK,IAAAA,MAAM,CAACyI,cAAP,CAAsBgC,IAAtB,EAA4B,SAA5B,EAAwC;AACtCC,MAAAA,GAAG,EAAE,SAASA,GAAT,GAAgB;AACnB;AACAF,QAAAA,eAAe,GAAG,IAAlB;AACD;AAJqC,KAAxC,EAFE,CAOG;;AACLnB,IAAAA,MAAM,CAACsB,gBAAP,CAAwB,cAAxB,EAAwC,IAAxC,EAA8CF,IAA9C;AACD,GATD,CASE,OAAOnE,CAAP,EAAU,CAAE;AACf,EAED;AACA;;;AACA,IAAIsE,SAAJ;;AACA,IAAIC,iBAAiB,GAAG,YAAY;AAClC,MAAID,SAAS,KAAKxK,SAAlB,EAA6B;AAC3B;AACA,QAAI,CAACgJ,SAAD,IAAc,CAACE,MAAf,IAAyB,OAAOwB,MAAP,KAAkB,WAA/C,EAA4D;AAC1D;AACA;AACAF,MAAAA,SAAS,GAAGE,MAAM,CAAC,SAAD,CAAN,IAAqBA,MAAM,CAAC,SAAD,CAAN,CAAkBC,GAAlB,CAAsBC,OAAtB,KAAkC,QAAnE;AACD,KAJD,MAIO;AACLJ,MAAAA,SAAS,GAAG,KAAZ;AACD;AACF;;AACD,SAAOA,SAAP;AACD,CAZD,EAcA;;;AACA,IAAItD,QAAQ,GAAG8B,SAAS,IAAIC,MAAM,CAAC4B,4BAAnC;AAEA;;AACA,SAASC,QAAT,CAAmBC,IAAnB,EAAyB;AACvB,SAAO,OAAOA,IAAP,KAAgB,UAAhB,IAA8B,cAAclC,IAAd,CAAmBkC,IAAI,CAACrK,QAAL,EAAnB,CAArC;AACD;;AAED,IAAIsK,SAAS,GACX,OAAOC,MAAP,KAAkB,WAAlB,IAAiCH,QAAQ,CAACG,MAAD,CAAzC,IACA,OAAOC,OAAP,KAAmB,WADnB,IACkCJ,QAAQ,CAACI,OAAO,CAACC,OAAT,CAF5C;;AAIA,IAAIC,IAAJ;AACA;AAAyB;;;AACzB,IAAI,OAAOC,GAAP,KAAe,WAAf,IAA8BP,QAAQ,CAACO,GAAD,CAA1C,EAAiD;AAC/C;AACAD,EAAAA,IAAI,GAAGC,GAAP;AACD,CAHD,MAGO;AACL;AACAD,EAAAA,IAAI,GAAG,aAAc,YAAY;AAC/B,aAASC,GAAT,GAAgB;AACd,WAAKC,GAAL,GAAW1L,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAX;AACD;;AACDgJ,IAAAA,GAAG,CAAC5K,SAAJ,CAAc8K,GAAd,GAAoB,SAASA,GAAT,CAAclI,GAAd,EAAmB;AACrC,aAAO,KAAKiI,GAAL,CAASjI,GAAT,MAAkB,IAAzB;AACD,KAFD;;AAGAgI,IAAAA,GAAG,CAAC5K,SAAJ,CAAc+K,GAAd,GAAoB,SAASA,GAAT,CAAcnI,GAAd,EAAmB;AACrC,WAAKiI,GAAL,CAASjI,GAAT,IAAgB,IAAhB;AACD,KAFD;;AAGAgI,IAAAA,GAAG,CAAC5K,SAAJ,CAAcgL,KAAd,GAAsB,SAASA,KAAT,GAAkB;AACtC,WAAKH,GAAL,GAAW1L,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAX;AACD,KAFD;;AAIA,WAAOgJ,GAAP;AACD,GAfoB,EAArB;AAgBD;AAED;;;AAEA,IAAIK,IAAI,GAAGlG,IAAX;AACA,IAAImG,GAAG,GAAGnG,IAAV;AACA,IAAIoG,sBAAsB,GAAIpG,IAA9B,EAAqC;;AACrC,IAAIqG,mBAAmB,GAAIrG,IAA3B;;AAEA,IAAI,kBAAyB,YAA7B,EAA2C;AACzC,MAAIsG,UAAU,GAAG,OAAOC,OAAP,KAAmB,WAApC;AACA,MAAIC,UAAU,GAAG,iBAAjB;;AACA,MAAIC,QAAQ,GAAG,UAAU/J,GAAV,EAAe;AAAE,WAAOA,GAAG,CACvC2B,OADoC,CAC5BmI,UAD4B,EAChB,UAAUjI,CAAV,EAAa;AAAE,aAAOA,CAAC,CAACC,WAAF,EAAP;AAAyB,KADxB,EAEpCH,OAFoC,CAE5B,OAF4B,EAEnB,EAFmB,CAAP;AAEN,GAF1B;;AAIA6H,EAAAA,IAAI,GAAG,UAAUQ,GAAV,EAAeC,EAAf,EAAmB;AACxB,QAAIC,KAAK,GAAGD,EAAE,GAAGP,sBAAsB,CAACO,EAAD,CAAzB,GAAgC,EAA9C;;AAEA,QAAIrF,MAAM,CAACO,WAAX,EAAwB;AACtBP,MAAAA,MAAM,CAACO,WAAP,CAAmBzG,IAAnB,CAAwB,IAAxB,EAA8BsL,GAA9B,EAAmCC,EAAnC,EAAuCC,KAAvC;AACD,KAFD,MAEO,IAAIN,UAAU,IAAK,CAAChF,MAAM,CAACE,MAA3B,EAAoC;AACzC+E,MAAAA,OAAO,CAACM,KAAR,CAAe,iBAAiBH,GAAjB,GAAuBE,KAAtC;AACD;AACF,GARD;;AAUAT,EAAAA,GAAG,GAAG,UAAUO,GAAV,EAAeC,EAAf,EAAmB;AACvB,QAAIL,UAAU,IAAK,CAAChF,MAAM,CAACE,MAA3B,EAAoC;AAClC+E,MAAAA,OAAO,CAACL,IAAR,CAAa,gBAAgBQ,GAAhB,IACXC,EAAE,GAAGP,sBAAsB,CAACO,EAAD,CAAzB,GAAgC,EADvB,CAAb;AAGD;AACF,GAND;;AAQAN,EAAAA,mBAAmB,GAAG,UAAUM,EAAV,EAAcG,WAAd,EAA2B;AAC/C,QAAIH,EAAE,CAACI,KAAH,KAAaJ,EAAjB,EAAqB;AACnB,aAAO,QAAP;AACD;;AACD,QAAIK,OAAO,GAAG,OAAOL,EAAP,KAAc,UAAd,IAA4BA,EAAE,CAACM,GAAH,IAAU,IAAtC,GACVN,EAAE,CAACK,OADO,GAEVL,EAAE,CAACO,MAAH,GACEP,EAAE,CAACQ,QAAH,IAAeR,EAAE,CAACS,WAAH,CAAeJ,OADhC,GAEEL,EAJN;AAKA,QAAIU,IAAI,GAAGL,OAAO,CAACK,IAAR,IAAgBL,OAAO,CAACM,aAAnC;AACA,QAAIC,IAAI,GAAGP,OAAO,CAACQ,MAAnB;;AACA,QAAI,CAACH,IAAD,IAASE,IAAb,EAAmB;AACjB,UAAI9C,KAAK,GAAG8C,IAAI,CAAC9C,KAAL,CAAW,iBAAX,CAAZ;AACA4C,MAAAA,IAAI,GAAG5C,KAAK,IAAIA,KAAK,CAAC,CAAD,CAArB;AACD;;AAED,WACE,CAAC4C,IAAI,GAAI,MAAOZ,QAAQ,CAACY,IAAD,CAAf,GAAyB,GAA7B,GAAoC,aAAzC,KACCE,IAAI,IAAIT,WAAW,KAAK,KAAxB,GAAiC,SAASS,IAA1C,GAAkD,EADnD,CADF;AAID,GApBD;;AAsBA,MAAIE,MAAM,GAAG,UAAU/K,GAAV,EAAehB,CAAf,EAAkB;AAC7B,QAAIqE,GAAG,GAAG,EAAV;;AACA,WAAOrE,CAAP,EAAU;AACR,UAAIA,CAAC,GAAG,CAAJ,KAAU,CAAd,EAAiB;AAAEqE,QAAAA,GAAG,IAAIrD,GAAP;AAAa;;AAChC,UAAIhB,CAAC,GAAG,CAAR,EAAW;AAAEgB,QAAAA,GAAG,IAAIA,GAAP;AAAa;;AAC1BhB,MAAAA,CAAC,KAAK,CAAN;AACD;;AACD,WAAOqE,GAAP;AACD,GARD;;AAUAqG,EAAAA,sBAAsB,GAAG,UAAUO,EAAV,EAAc;AACrC,QAAIA,EAAE,CAACO,MAAH,IAAaP,EAAE,CAACe,OAApB,EAA6B;AAC3B,UAAIC,IAAI,GAAG,EAAX;AACA,UAAIC,wBAAwB,GAAG,CAA/B;;AACA,aAAOjB,EAAP,EAAW;AACT,YAAIgB,IAAI,CAAC1K,MAAL,GAAc,CAAlB,EAAqB;AACnB,cAAI4K,IAAI,GAAGF,IAAI,CAACA,IAAI,CAAC1K,MAAL,GAAc,CAAf,CAAf;;AACA,cAAI4K,IAAI,CAACT,WAAL,KAAqBT,EAAE,CAACS,WAA5B,EAAyC;AACvCQ,YAAAA,wBAAwB;AACxBjB,YAAAA,EAAE,GAAGA,EAAE,CAACe,OAAR;AACA;AACD,WAJD,MAIO,IAAIE,wBAAwB,GAAG,CAA/B,EAAkC;AACvCD,YAAAA,IAAI,CAACA,IAAI,CAAC1K,MAAL,GAAc,CAAf,CAAJ,GAAwB,CAAC4K,IAAD,EAAOD,wBAAP,CAAxB;AACAA,YAAAA,wBAAwB,GAAG,CAA3B;AACD;AACF;;AACDD,QAAAA,IAAI,CAACG,IAAL,CAAUnB,EAAV;AACAA,QAAAA,EAAE,GAAGA,EAAE,CAACe,OAAR;AACD;;AACD,aAAO,qBAAqBC,IAAI,CAC7B/K,GADyB,CACrB,UAAU+J,EAAV,EAAc3J,CAAd,EAAiB;AAAE,eAAQ,MAAMA,CAAC,KAAK,CAAN,GAAU,OAAV,GAAoByK,MAAM,CAAC,GAAD,EAAM,IAAIzK,CAAC,GAAG,CAAd,CAAhC,KAAqDb,KAAK,CAACC,OAAN,CAAcuK,EAAd,IAC7EN,mBAAmB,CAACM,EAAE,CAAC,CAAD,CAAH,CAApB,GAA+B,OAA/B,GAA0CA,EAAE,CAAC,CAAD,CAA5C,GAAmD,mBAD2B,GAE/EN,mBAAmB,CAACM,EAAD,CAFO,CAAR;AAEU,OAHR,EAIzBoB,IAJyB,CAIpB,IAJoB,CAA5B;AAKD,KAvBD,MAuBO;AACL,aAAQ,mBAAoB1B,mBAAmB,CAACM,EAAD,CAAvC,GAA+C,GAAvD;AACD;AACF,GA3BD;AA4BD;AAED;;;AAEA,IAAIqB,GAAG,GAAG,CAAV;AAEA;AACA;AACA;AACA;;AACA,IAAIC,GAAG,GAAG,SAASA,GAAT,GAAgB;AACxB,OAAKC,EAAL,GAAUF,GAAG,EAAb;AACA,OAAKG,IAAL,GAAY,EAAZ;AACD,CAHD;;AAKAF,GAAG,CAAChN,SAAJ,CAAcmN,MAAd,GAAuB,SAASA,MAAT,CAAiBC,GAAjB,EAAsB;AAC3C,OAAKF,IAAL,CAAUL,IAAV,CAAeO,GAAf;AACD,CAFD;;AAIAJ,GAAG,CAAChN,SAAJ,CAAcqN,SAAd,GAA0B,SAASA,SAAT,CAAoBD,GAApB,EAAyB;AACjDhL,EAAAA,MAAM,CAAC,KAAK8K,IAAN,EAAYE,GAAZ,CAAN;AACD,CAFD;;AAIAJ,GAAG,CAAChN,SAAJ,CAAcsN,MAAd,GAAuB,SAASA,MAAT,GAAmB;AACxC,MAAIN,GAAG,CAACO,MAAR,EAAgB;AACdP,IAAAA,GAAG,CAACO,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;AACD;AACF,CAJD;;AAMAR,GAAG,CAAChN,SAAJ,CAAcyN,MAAd,GAAuB,SAASA,MAAT,GAAmB;AACxC;AACA,MAAIP,IAAI,GAAG,KAAKA,IAAL,CAAU9M,KAAV,EAAX;;AACA,MAAI,kBAAyB,YAAzB,IAAyC,CAACiG,MAAM,CAACgB,KAArD,EAA4D;AAC1D;AACA;AACA;AACA6F,IAAAA,IAAI,CAACQ,IAAL,CAAU,UAAU3J,CAAV,EAAaiB,CAAb,EAAgB;AAAE,aAAOjB,CAAC,CAACkJ,EAAF,GAAOjI,CAAC,CAACiI,EAAhB;AAAqB,KAAjD;AACD;;AACD,OAAK,IAAIlL,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAGkJ,IAAI,CAAClL,MAAzB,EAAiCD,CAAC,GAAGiC,CAArC,EAAwCjC,CAAC,EAAzC,EAA6C;AAC3CmL,IAAAA,IAAI,CAACnL,CAAD,CAAJ,CAAQ4L,MAAR;AACD;AACF,CAZD,EAcA;AACA;AACA;;;AACAX,GAAG,CAACO,MAAJ,GAAa,IAAb;AACA,IAAIK,WAAW,GAAG,EAAlB;;AAEA,SAASC,UAAT,CAAqBN,MAArB,EAA6B;AAC3BK,EAAAA,WAAW,CAACf,IAAZ,CAAiBU,MAAjB;AACAP,EAAAA,GAAG,CAACO,MAAJ,GAAaA,MAAb;AACD;;AAED,SAASO,SAAT,GAAsB;AACpBF,EAAAA,WAAW,CAACG,GAAZ;AACAf,EAAAA,GAAG,CAACO,MAAJ,GAAaK,WAAW,CAACA,WAAW,CAAC5L,MAAZ,GAAqB,CAAtB,CAAxB;AACD;AAED;;;AAEA,IAAIgM,KAAK,GAAG,SAASA,KAAT,CACVC,GADU,EAEVC,IAFU,EAGVC,QAHU,EAIVC,IAJU,EAKVC,GALU,EAMVC,OANU,EAOVC,gBAPU,EAQVC,YARU,EASV;AACA,OAAKP,GAAL,GAAWA,GAAX;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACA,OAAKC,GAAL,GAAWA,GAAX;AACA,OAAKI,EAAL,GAAUlP,SAAV;AACA,OAAK+O,OAAL,GAAeA,OAAf;AACA,OAAKI,SAAL,GAAiBnP,SAAjB;AACA,OAAKoP,SAAL,GAAiBpP,SAAjB;AACA,OAAKqP,SAAL,GAAiBrP,SAAjB;AACA,OAAKqD,GAAL,GAAWsL,IAAI,IAAIA,IAAI,CAACtL,GAAxB;AACA,OAAK2L,gBAAL,GAAwBA,gBAAxB;AACA,OAAKM,iBAAL,GAAyBtP,SAAzB;AACA,OAAKuP,MAAL,GAAcvP,SAAd;AACA,OAAKwP,GAAL,GAAW,KAAX;AACA,OAAKC,QAAL,GAAgB,KAAhB;AACA,OAAKC,YAAL,GAAoB,IAApB;AACA,OAAKC,SAAL,GAAiB,KAAjB;AACA,OAAKC,QAAL,GAAgB,KAAhB;AACA,OAAKC,MAAL,GAAc,KAAd;AACA,OAAKZ,YAAL,GAAoBA,YAApB;AACA,OAAKa,SAAL,GAAiB9P,SAAjB;AACA,OAAK+P,kBAAL,GAA0B,KAA1B;AACD,CAjCD;;AAmCA,IAAIC,kBAAkB,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAE1H,IAAAA,YAAY,EAAE;AAAhB;AAAT,CAAzB,EAEA;;AACA;;AACAyH,kBAAkB,CAACC,KAAnB,CAAyB3F,GAAzB,GAA+B,YAAY;AACzC,SAAO,KAAKgF,iBAAZ;AACD,CAFD;;AAIA1P,MAAM,CAACsQ,gBAAP,CAAyBzB,KAAK,CAAChO,SAA/B,EAA0CuP,kBAA1C;;AAEA,IAAIG,gBAAgB,GAAG,UAAUtB,IAAV,EAAgB;AACrC,MAAKA,IAAI,KAAK,KAAK,CAAnB,EAAuBA,IAAI,GAAG,EAAP;AAEvB,MAAIuB,IAAI,GAAG,IAAI3B,KAAJ,EAAX;AACA2B,EAAAA,IAAI,CAACvB,IAAL,GAAYA,IAAZ;AACAuB,EAAAA,IAAI,CAACT,SAAL,GAAiB,IAAjB;AACA,SAAOS,IAAP;AACD,CAPD;;AASA,SAASC,eAAT,CAA0BpP,GAA1B,EAA+B;AAC7B,SAAO,IAAIwN,KAAJ,CAAUzO,SAAV,EAAqBA,SAArB,EAAgCA,SAAhC,EAA2CoB,MAAM,CAACH,GAAD,CAAjD,CAAP;AACD,EAED;AACA;AACA;AACA;;;AACA,SAASqP,UAAT,CAAqBC,KAArB,EAA4B;AAC1B,MAAIC,MAAM,GAAG,IAAI/B,KAAJ,CACX8B,KAAK,CAAC7B,GADK,EAEX6B,KAAK,CAAC5B,IAFK,EAGX;AACA;AACA;AACA4B,EAAAA,KAAK,CAAC3B,QAAN,IAAkB2B,KAAK,CAAC3B,QAAN,CAAe/N,KAAf,EANP,EAOX0P,KAAK,CAAC1B,IAPK,EAQX0B,KAAK,CAACzB,GARK,EASXyB,KAAK,CAACxB,OATK,EAUXwB,KAAK,CAACvB,gBAVK,EAWXuB,KAAK,CAACtB,YAXK,CAAb;AAaAuB,EAAAA,MAAM,CAACtB,EAAP,GAAYqB,KAAK,CAACrB,EAAlB;AACAsB,EAAAA,MAAM,CAACf,QAAP,GAAkBc,KAAK,CAACd,QAAxB;AACAe,EAAAA,MAAM,CAACnN,GAAP,GAAakN,KAAK,CAAClN,GAAnB;AACAmN,EAAAA,MAAM,CAACb,SAAP,GAAmBY,KAAK,CAACZ,SAAzB;AACAa,EAAAA,MAAM,CAACrB,SAAP,GAAmBoB,KAAK,CAACpB,SAAzB;AACAqB,EAAAA,MAAM,CAACpB,SAAP,GAAmBmB,KAAK,CAACnB,SAAzB;AACAoB,EAAAA,MAAM,CAACnB,SAAP,GAAmBkB,KAAK,CAAClB,SAAzB;AACAmB,EAAAA,MAAM,CAACV,SAAP,GAAmBS,KAAK,CAACT,SAAzB;AACAU,EAAAA,MAAM,CAACZ,QAAP,GAAkB,IAAlB;AACA,SAAOY,MAAP;AACD;AAED;AACA;AACA;AACA;;;AAEA,IAAIC,UAAU,GAAG9O,KAAK,CAAClB,SAAvB;AACA,IAAIiQ,YAAY,GAAG9Q,MAAM,CAACyC,MAAP,CAAcoO,UAAd,CAAnB;AAEA,IAAIE,cAAc,GAAG,CACnB,MADmB,EAEnB,KAFmB,EAGnB,OAHmB,EAInB,SAJmB,EAKnB,QALmB,EAMnB,MANmB,EAOnB,SAPmB,CAArB;AAUA;AACA;AACA;;AACAA,cAAc,CAACC,OAAf,CAAuB,UAAUC,MAAV,EAAkB;AACvC;AACA,MAAIC,QAAQ,GAAGL,UAAU,CAACI,MAAD,CAAzB;AACA1I,EAAAA,GAAG,CAACuI,YAAD,EAAeG,MAAf,EAAuB,SAASE,OAAT,GAAoB;AAC5C,QAAIC,IAAI,GAAG,EAAX;AAAA,QAAeC,GAAG,GAAGvM,SAAS,CAACjC,MAA/B;;AACA,WAAQwO,GAAG,EAAX,EAAgBD,IAAI,CAAEC,GAAF,CAAJ,GAAcvM,SAAS,CAAEuM,GAAF,CAAvB;;AAEhB,QAAIC,MAAM,GAAGJ,QAAQ,CAACnM,KAAT,CAAe,IAAf,EAAqBqM,IAArB,CAAb;AACA,QAAIG,EAAE,GAAG,KAAKC,MAAd;AACA,QAAIC,QAAJ;;AACA,YAAQR,MAAR;AACE,WAAK,MAAL;AACA,WAAK,SAAL;AACEQ,QAAAA,QAAQ,GAAGL,IAAX;AACA;;AACF,WAAK,QAAL;AACEK,QAAAA,QAAQ,GAAGL,IAAI,CAACnQ,KAAL,CAAW,CAAX,CAAX;AACA;AAPJ;;AASA,QAAIwQ,QAAJ,EAAc;AAAEF,MAAAA,EAAE,CAACG,YAAH,CAAgBD,QAAhB;AAA4B,KAhBA,CAiB5C;;;AACAF,IAAAA,EAAE,CAACI,GAAH,CAAOrD,MAAP;AACA,WAAOgD,MAAP;AACD,GApBE,CAAH;AAqBD,CAxBD;AA0BA;;AAEA,IAAIM,SAAS,GAAG5R,MAAM,CAAC6R,mBAAP,CAA2Bf,YAA3B,CAAhB;AAEA;AACA;AACA;AACA;;AACA,IAAIgB,aAAa,GAAG,IAApB;;AAEA,SAASC,eAAT,CAA0BtR,KAA1B,EAAiC;AAC/BqR,EAAAA,aAAa,GAAGrR,KAAhB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIuR,QAAQ,GAAG,SAASA,QAAT,CAAmBvR,KAAnB,EAA0B;AACvC,OAAKA,KAAL,GAAaA,KAAb;AACA,OAAKkR,GAAL,GAAW,IAAI9D,GAAJ,EAAX;AACA,OAAKoE,OAAL,GAAe,CAAf;AACA1J,EAAAA,GAAG,CAAC9H,KAAD,EAAQ,QAAR,EAAkB,IAAlB,CAAH;;AACA,MAAIsB,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAJ,EAA0B;AACxB,QAAI0I,QAAJ,EAAc;AACZ+I,MAAAA,YAAY,CAACzR,KAAD,EAAQqQ,YAAR,CAAZ;AACD,KAFD,MAEO;AACLqB,MAAAA,WAAW,CAAC1R,KAAD,EAAQqQ,YAAR,EAAsBc,SAAtB,CAAX;AACD;;AACD,SAAKF,YAAL,CAAkBjR,KAAlB;AACD,GAPD,MAOO;AACL,SAAK2R,IAAL,CAAU3R,KAAV;AACD;AACF,CAfD;AAiBA;AACA;AACA;AACA;AACA;;;AACAuR,QAAQ,CAACnR,SAAT,CAAmBuR,IAAnB,GAA0B,SAASA,IAAT,CAAezR,GAAf,EAAoB;AAC5C,MAAI+F,IAAI,GAAG1G,MAAM,CAAC0G,IAAP,CAAY/F,GAAZ,CAAX;;AACA,OAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8D,IAAI,CAAC7D,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCyP,IAAAA,iBAAiB,CAAC1R,GAAD,EAAM+F,IAAI,CAAC9D,CAAD,CAAV,CAAjB;AACD;AACF,CALD;AAOA;AACA;AACA;;;AACAoP,QAAQ,CAACnR,SAAT,CAAmB6Q,YAAnB,GAAkC,SAASA,YAAT,CAAuBY,KAAvB,EAA8B;AAC9D,OAAK,IAAI1P,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAGyN,KAAK,CAACzP,MAA1B,EAAkCD,CAAC,GAAGiC,CAAtC,EAAyCjC,CAAC,EAA1C,EAA8C;AAC5C2P,IAAAA,OAAO,CAACD,KAAK,CAAC1P,CAAD,CAAN,CAAP;AACD;AACF,CAJD,EAMA;;AAEA;AACA;AACA;AACA;;;AACA,SAASsP,YAAT,CAAuB9D,MAAvB,EAA+BoE,GAA/B,EAAoC;AAClC;AACApE,EAAAA,MAAM,CAACqE,SAAP,GAAmBD,GAAnB;AACA;AACD;AAED;AACA;AACA;AACA;;AACA;;;AACA,SAASL,WAAT,CAAsB/D,MAAtB,EAA8BoE,GAA9B,EAAmC9L,IAAnC,EAAyC;AACvC,OAAK,IAAI9D,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG6B,IAAI,CAAC7D,MAAzB,EAAiCD,CAAC,GAAGiC,CAArC,EAAwCjC,CAAC,EAAzC,EAA6C;AAC3C,QAAIa,GAAG,GAAGiD,IAAI,CAAC9D,CAAD,CAAd;AACA2F,IAAAA,GAAG,CAAC6F,MAAD,EAAS3K,GAAT,EAAc+O,GAAG,CAAC/O,GAAD,CAAjB,CAAH;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,SAAS8O,OAAT,CAAkB9R,KAAlB,EAAyBiS,UAAzB,EAAqC;AACnC,MAAI,CAAChS,QAAQ,CAACD,KAAD,CAAT,IAAoBA,KAAK,YAAYoO,KAAzC,EAAgD;AAC9C;AACD;;AACD,MAAI0C,EAAJ;;AACA,MAAI/N,MAAM,CAAC/C,KAAD,EAAQ,QAAR,CAAN,IAA2BA,KAAK,CAAC+Q,MAAN,YAAwBQ,QAAvD,EAAiE;AAC/DT,IAAAA,EAAE,GAAG9Q,KAAK,CAAC+Q,MAAX;AACD,GAFD,MAEO,IACLM,aAAa,IACb,CAACjH,iBAAiB,EADlB,KAEC9I,KAAK,CAACC,OAAN,CAAcvB,KAAd,KAAwBS,aAAa,CAACT,KAAD,CAFtC,KAGAT,MAAM,CAAC2S,YAAP,CAAoBlS,KAApB,CAHA,IAIA,CAACA,KAAK,CAACqM,MALF,EAML;AACAyE,IAAAA,EAAE,GAAG,IAAIS,QAAJ,CAAavR,KAAb,CAAL;AACD;;AACD,MAAIiS,UAAU,IAAInB,EAAlB,EAAsB;AACpBA,IAAAA,EAAE,CAACU,OAAH;AACD;;AACD,SAAOV,EAAP;AACD;AAED;AACA;AACA;;;AACA,SAASc,iBAAT,CACE1R,GADF,EAEE8C,GAFF,EAGEpC,GAHF,EAIEuR,YAJF,EAKEC,OALF,EAME;AACA,MAAIlB,GAAG,GAAG,IAAI9D,GAAJ,EAAV;AAEA,MAAIiF,QAAQ,GAAG9S,MAAM,CAAC+S,wBAAP,CAAgCpS,GAAhC,EAAqC8C,GAArC,CAAf;;AACA,MAAIqP,QAAQ,IAAIA,QAAQ,CAACnK,YAAT,KAA0B,KAA1C,EAAiD;AAC/C;AACD,GAND,CAQA;;;AACA,MAAIqK,MAAM,GAAGF,QAAQ,IAAIA,QAAQ,CAACpI,GAAlC;AACA,MAAIuI,MAAM,GAAGH,QAAQ,IAAIA,QAAQ,CAACpH,GAAlC;;AACA,MAAI,CAAC,CAACsH,MAAD,IAAWC,MAAZ,KAAuBnO,SAAS,CAACjC,MAAV,KAAqB,CAAhD,EAAmD;AACjDxB,IAAAA,GAAG,GAAGV,GAAG,CAAC8C,GAAD,CAAT;AACD;;AAED,MAAIyP,OAAO,GAAG,CAACL,OAAD,IAAYN,OAAO,CAAClR,GAAD,CAAjC;AACArB,EAAAA,MAAM,CAACyI,cAAP,CAAsB9H,GAAtB,EAA2B8C,GAA3B,EAAgC;AAC9B+E,IAAAA,UAAU,EAAE,IADkB;AAE9BG,IAAAA,YAAY,EAAE,IAFgB;AAG9B+B,IAAAA,GAAG,EAAE,SAASyI,cAAT,GAA2B;AAC9B,UAAI1S,KAAK,GAAGuS,MAAM,GAAGA,MAAM,CAAChS,IAAP,CAAYL,GAAZ,CAAH,GAAsBU,GAAxC;;AACA,UAAIwM,GAAG,CAACO,MAAR,EAAgB;AACduD,QAAAA,GAAG,CAACxD,MAAJ;;AACA,YAAI+E,OAAJ,EAAa;AACXA,UAAAA,OAAO,CAACvB,GAAR,CAAYxD,MAAZ;;AACA,cAAIpM,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAJ,EAA0B;AACxB2S,YAAAA,WAAW,CAAC3S,KAAD,CAAX;AACD;AACF;AACF;;AACD,aAAOA,KAAP;AACD,KAf6B;AAgB9BiL,IAAAA,GAAG,EAAE,SAAS2H,cAAT,CAAyBC,MAAzB,EAAiC;AACpC,UAAI7S,KAAK,GAAGuS,MAAM,GAAGA,MAAM,CAAChS,IAAP,CAAYL,GAAZ,CAAH,GAAsBU,GAAxC;AACA;;AACA,UAAIiS,MAAM,KAAK7S,KAAX,IAAqB6S,MAAM,KAAKA,MAAX,IAAqB7S,KAAK,KAAKA,KAAxD,EAAgE;AAC9D;AACD;AACD;;;AACA,UAAI,kBAAyB,YAAzB,IAAyCmS,YAA7C,EAA2D;AACzDA,QAAAA,YAAY;AACb,OATmC,CAUpC;;;AACA,UAAII,MAAM,IAAI,CAACC,MAAf,EAAuB;AAAE;AAAQ;;AACjC,UAAIA,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACjS,IAAP,CAAYL,GAAZ,EAAiB2S,MAAjB;AACD,OAFD,MAEO;AACLjS,QAAAA,GAAG,GAAGiS,MAAN;AACD;;AACDJ,MAAAA,OAAO,GAAG,CAACL,OAAD,IAAYN,OAAO,CAACe,MAAD,CAA7B;AACA3B,MAAAA,GAAG,CAACrD,MAAJ;AACD;AAnC6B,GAAhC;AAqCD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAAS5C,GAAT,CAAc0C,MAAd,EAAsB3K,GAAtB,EAA2BpC,GAA3B,EAAgC;AAC9B,MAAI,kBAAyB,YAAzB,KACDnB,OAAO,CAACkO,MAAD,CAAP,IAAmB5N,WAAW,CAAC4N,MAAD,CAD7B,CAAJ,EAEE;AACAtC,IAAAA,IAAI,CAAE,0EAA4EsC,MAA9E,CAAJ;AACD;;AACD,MAAIrM,KAAK,CAACC,OAAN,CAAcoM,MAAd,KAAyBhN,iBAAiB,CAACqC,GAAD,CAA9C,EAAqD;AACnD2K,IAAAA,MAAM,CAACvL,MAAP,GAAgBpB,IAAI,CAAC8R,GAAL,CAASnF,MAAM,CAACvL,MAAhB,EAAwBY,GAAxB,CAAhB;AACA2K,IAAAA,MAAM,CAAC9K,MAAP,CAAcG,GAAd,EAAmB,CAAnB,EAAsBpC,GAAtB;AACA,WAAOA,GAAP;AACD;;AACD,MAAIoC,GAAG,IAAI2K,MAAP,IAAiB,EAAE3K,GAAG,IAAIzD,MAAM,CAACa,SAAhB,CAArB,EAAiD;AAC/CuN,IAAAA,MAAM,CAAC3K,GAAD,CAAN,GAAcpC,GAAd;AACA,WAAOA,GAAP;AACD;;AACD,MAAIkQ,EAAE,GAAInD,MAAD,CAASoD,MAAlB;;AACA,MAAIpD,MAAM,CAACtB,MAAP,IAAkByE,EAAE,IAAIA,EAAE,CAACU,OAA/B,EAAyC;AACvC,sBAAyB,YAAzB,IAAyCnG,IAAI,CAC3C,0EACA,qDAF2C,CAA7C;AAIA,WAAOzK,GAAP;AACD;;AACD,MAAI,CAACkQ,EAAL,EAAS;AACPnD,IAAAA,MAAM,CAAC3K,GAAD,CAAN,GAAcpC,GAAd;AACA,WAAOA,GAAP;AACD;;AACDgR,EAAAA,iBAAiB,CAACd,EAAE,CAAC9Q,KAAJ,EAAWgD,GAAX,EAAgBpC,GAAhB,CAAjB;AACAkQ,EAAAA,EAAE,CAACI,GAAH,CAAOrD,MAAP;AACA,SAAOjN,GAAP;AACD;AAED;AACA;AACA;;;AACA,SAASmS,GAAT,CAAcpF,MAAd,EAAsB3K,GAAtB,EAA2B;AACzB,MAAI,kBAAyB,YAAzB,KACDvD,OAAO,CAACkO,MAAD,CAAP,IAAmB5N,WAAW,CAAC4N,MAAD,CAD7B,CAAJ,EAEE;AACAtC,IAAAA,IAAI,CAAE,6EAA+EsC,MAAjF,CAAJ;AACD;;AACD,MAAIrM,KAAK,CAACC,OAAN,CAAcoM,MAAd,KAAyBhN,iBAAiB,CAACqC,GAAD,CAA9C,EAAqD;AACnD2K,IAAAA,MAAM,CAAC9K,MAAP,CAAcG,GAAd,EAAmB,CAAnB;AACA;AACD;;AACD,MAAI8N,EAAE,GAAInD,MAAD,CAASoD,MAAlB;;AACA,MAAIpD,MAAM,CAACtB,MAAP,IAAkByE,EAAE,IAAIA,EAAE,CAACU,OAA/B,EAAyC;AACvC,sBAAyB,YAAzB,IAAyCnG,IAAI,CAC3C,mEACA,wBAF2C,CAA7C;AAIA;AACD;;AACD,MAAI,CAACtI,MAAM,CAAC4K,MAAD,EAAS3K,GAAT,CAAX,EAA0B;AACxB;AACD;;AACD,SAAO2K,MAAM,CAAC3K,GAAD,CAAb;;AACA,MAAI,CAAC8N,EAAL,EAAS;AACP;AACD;;AACDA,EAAAA,EAAE,CAACI,GAAH,CAAOrD,MAAP;AACD;AAED;AACA;AACA;AACA;;;AACA,SAAS8E,WAAT,CAAsB3S,KAAtB,EAA6B;AAC3B,OAAK,IAAI6F,CAAC,GAAI,KAAK,CAAd,EAAkB1D,CAAC,GAAG,CAAtB,EAAyBiC,CAAC,GAAGpE,KAAK,CAACoC,MAAxC,EAAgDD,CAAC,GAAGiC,CAApD,EAAuDjC,CAAC,EAAxD,EAA4D;AAC1D0D,IAAAA,CAAC,GAAG7F,KAAK,CAACmC,CAAD,CAAT;AACA0D,IAAAA,CAAC,IAAIA,CAAC,CAACkL,MAAP,IAAiBlL,CAAC,CAACkL,MAAF,CAASG,GAAT,CAAaxD,MAAb,EAAjB;;AACA,QAAIpM,KAAK,CAACC,OAAN,CAAcsE,CAAd,CAAJ,EAAsB;AACpB8M,MAAAA,WAAW,CAAC9M,CAAD,CAAX;AACD;AACF;AACF;AAED;;AAEA;AACA;AACA;AACA;AACA;;;AACA,IAAImN,MAAM,GAAGvM,MAAM,CAACC,qBAApB;AAEA;AACA;AACA;;AACA,IAAI,kBAAyB,YAA7B,EAA2C;AACzCsM,EAAAA,MAAM,CAACC,EAAP,GAAYD,MAAM,CAACE,SAAP,GAAmB,UAAUhE,MAAV,EAAkBU,KAAlB,EAAyB9D,EAAzB,EAA6B9I,GAA7B,EAAkC;AAC/D,QAAI,CAAC8I,EAAL,EAAS;AACPT,MAAAA,IAAI,CACF,cAAcrI,GAAd,GAAoB,sCAApB,GACA,kCAFE,CAAJ;AAID;;AACD,WAAOmQ,YAAY,CAACjE,MAAD,EAASU,KAAT,CAAnB;AACD,GARD;AASD;AAED;AACA;AACA;;;AACA,SAASwD,SAAT,CAAoBrO,EAApB,EAAwBsO,IAAxB,EAA8B;AAC5B,MAAI,CAACA,IAAL,EAAW;AAAE,WAAOtO,EAAP;AAAW;;AACxB,MAAI/B,GAAJ,EAASsQ,KAAT,EAAgBC,OAAhB;AAEA,MAAItN,IAAI,GAAG0E,SAAS,GAChBE,OAAO,CAACC,OAAR,CAAgBuI,IAAhB,CADgB,GAEhB9T,MAAM,CAAC0G,IAAP,CAAYoN,IAAZ,CAFJ;;AAIA,OAAK,IAAIlR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8D,IAAI,CAAC7D,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCa,IAAAA,GAAG,GAAGiD,IAAI,CAAC9D,CAAD,CAAV,CADoC,CAEpC;;AACA,QAAIa,GAAG,KAAK,QAAZ,EAAsB;AAAE;AAAU;;AAClCsQ,IAAAA,KAAK,GAAGvO,EAAE,CAAC/B,GAAD,CAAV;AACAuQ,IAAAA,OAAO,GAAGF,IAAI,CAACrQ,GAAD,CAAd;;AACA,QAAI,CAACD,MAAM,CAACgC,EAAD,EAAK/B,GAAL,CAAX,EAAsB;AACpBiI,MAAAA,GAAG,CAAClG,EAAD,EAAK/B,GAAL,EAAUuQ,OAAV,CAAH;AACD,KAFD,MAEO,IACLD,KAAK,KAAKC,OAAV,IACA9S,aAAa,CAAC6S,KAAD,CADb,IAEA7S,aAAa,CAAC8S,OAAD,CAHR,EAIL;AACAH,MAAAA,SAAS,CAACE,KAAD,EAAQC,OAAR,CAAT;AACD;AACF;;AACD,SAAOxO,EAAP;AACD;AAED;AACA;AACA;;;AACA,SAASyO,aAAT,CACEC,SADF,EAEEC,QAFF,EAGE5H,EAHF,EAIE;AACA,MAAI,CAACA,EAAL,EAAS;AACP;AACA,QAAI,CAAC4H,QAAL,EAAe;AACb,aAAOD,SAAP;AACD;;AACD,QAAI,CAACA,SAAL,EAAgB;AACd,aAAOC,QAAP;AACD,KAPM,CAQP;AACA;AACA;AACA;AACA;;;AACA,WAAO,SAASC,YAAT,GAAyB;AAC9B,aAAOP,SAAS,CACd,OAAOM,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACnT,IAAT,CAAc,IAAd,EAAoB,IAApB,CAAjC,GAA6DmT,QAD/C,EAEd,OAAOD,SAAP,KAAqB,UAArB,GAAkCA,SAAS,CAAClT,IAAV,CAAe,IAAf,EAAqB,IAArB,CAAlC,GAA+DkT,SAFjD,CAAhB;AAID,KALD;AAMD,GAnBD,MAmBO;AACL,WAAO,SAASG,oBAAT,GAAiC;AACtC;AACA,UAAIC,YAAY,GAAG,OAAOH,QAAP,KAAoB,UAApB,GACfA,QAAQ,CAACnT,IAAT,CAAcuL,EAAd,EAAkBA,EAAlB,CADe,GAEf4H,QAFJ;AAGA,UAAII,WAAW,GAAG,OAAOL,SAAP,KAAqB,UAArB,GACdA,SAAS,CAAClT,IAAV,CAAeuL,EAAf,EAAmBA,EAAnB,CADc,GAEd2H,SAFJ;;AAGA,UAAII,YAAJ,EAAkB;AAChB,eAAOT,SAAS,CAACS,YAAD,EAAeC,WAAf,CAAhB;AACD,OAFD,MAEO;AACL,eAAOA,WAAP;AACD;AACF,KAbD;AAcD;AACF;;AAEDd,MAAM,CAAC1E,IAAP,GAAc,UACZmF,SADY,EAEZC,QAFY,EAGZ5H,EAHY,EAIZ;AACA,MAAI,CAACA,EAAL,EAAS;AACP,QAAI4H,QAAQ,IAAI,OAAOA,QAAP,KAAoB,UAApC,EAAgD;AAC9C,wBAAyB,YAAzB,IAAyCrI,IAAI,CAC3C,4CACA,iDADA,GAEA,cAH2C,EAI3CS,EAJ2C,CAA7C;AAOA,aAAO2H,SAAP;AACD;;AACD,WAAOD,aAAa,CAACC,SAAD,EAAYC,QAAZ,CAApB;AACD;;AAED,SAAOF,aAAa,CAACC,SAAD,EAAYC,QAAZ,EAAsB5H,EAAtB,CAApB;AACD,CApBD;AAsBA;AACA;AACA;;;AACA,SAASiI,SAAT,CACEN,SADF,EAEEC,QAFF,EAGE;AACA,MAAIxO,GAAG,GAAGwO,QAAQ,GACdD,SAAS,GACPA,SAAS,CAACO,MAAV,CAAiBN,QAAjB,CADO,GAEPpS,KAAK,CAACC,OAAN,CAAcmS,QAAd,IACEA,QADF,GAEE,CAACA,QAAD,CALU,GAMdD,SANJ;AAOA,SAAOvO,GAAG,GACN+O,WAAW,CAAC/O,GAAD,CADL,GAENA,GAFJ;AAGD;;AAED,SAAS+O,WAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAIhP,GAAG,GAAG,EAAV;;AACA,OAAK,IAAI/C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+R,KAAK,CAAC9R,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,QAAI+C,GAAG,CAACtC,OAAJ,CAAYsR,KAAK,CAAC/R,CAAD,CAAjB,MAA0B,CAAC,CAA/B,EAAkC;AAChC+C,MAAAA,GAAG,CAAC+H,IAAJ,CAASiH,KAAK,CAAC/R,CAAD,CAAd;AACD;AACF;;AACD,SAAO+C,GAAP;AACD;;AAEDsB,eAAe,CAAC+J,OAAhB,CAAwB,UAAU4D,IAAV,EAAgB;AACtCnB,EAAAA,MAAM,CAACmB,IAAD,CAAN,GAAeJ,SAAf;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASK,WAAT,CACEX,SADF,EAEEC,QAFF,EAGE5H,EAHF,EAIE9I,GAJF,EAKE;AACA,MAAIkC,GAAG,GAAG3F,MAAM,CAACyC,MAAP,CAAcyR,SAAS,IAAI,IAA3B,CAAV;;AACA,MAAIC,QAAJ,EAAc;AACZ,sBAAyB,YAAzB,IAAyCW,gBAAgB,CAACrR,GAAD,EAAM0Q,QAAN,EAAgB5H,EAAhB,CAAzD;AACA,WAAOhH,MAAM,CAACI,GAAD,EAAMwO,QAAN,CAAb;AACD,GAHD,MAGO;AACL,WAAOxO,GAAP;AACD;AACF;;AAEDqB,WAAW,CAACgK,OAAZ,CAAoB,UAAU+D,IAAV,EAAgB;AAClCtB,EAAAA,MAAM,CAACsB,IAAI,GAAG,GAAR,CAAN,GAAqBF,WAArB;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;;AACApB,MAAM,CAAClJ,KAAP,GAAe,UACb2J,SADa,EAEbC,QAFa,EAGb5H,EAHa,EAIb9I,GAJa,EAKb;AACA;AACA,MAAIyQ,SAAS,KAAK5J,WAAlB,EAA+B;AAAE4J,IAAAA,SAAS,GAAG9T,SAAZ;AAAwB;;AACzD,MAAI+T,QAAQ,KAAK7J,WAAjB,EAA8B;AAAE6J,IAAAA,QAAQ,GAAG/T,SAAX;AAAuB;AACvD;;;AACA,MAAI,CAAC+T,QAAL,EAAe;AAAE,WAAOnU,MAAM,CAACyC,MAAP,CAAcyR,SAAS,IAAI,IAA3B,CAAP;AAAyC;;AAC1D,MAAI,kBAAyB,YAA7B,EAA2C;AACzCY,IAAAA,gBAAgB,CAACrR,GAAD,EAAM0Q,QAAN,EAAgB5H,EAAhB,CAAhB;AACD;;AACD,MAAI,CAAC2H,SAAL,EAAgB;AAAE,WAAOC,QAAP;AAAiB;;AACnC,MAAI7O,GAAG,GAAG,EAAV;AACAC,EAAAA,MAAM,CAACD,GAAD,EAAM4O,SAAN,CAAN;;AACA,OAAK,IAAIc,KAAT,IAAkBb,QAAlB,EAA4B;AAC1B,QAAIxE,MAAM,GAAGrK,GAAG,CAAC0P,KAAD,CAAhB;AACA,QAAI3E,KAAK,GAAG8D,QAAQ,CAACa,KAAD,CAApB;;AACA,QAAIrF,MAAM,IAAI,CAAC5N,KAAK,CAACC,OAAN,CAAc2N,MAAd,CAAf,EAAsC;AACpCA,MAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;AACD;;AACDrK,IAAAA,GAAG,CAAC0P,KAAD,CAAH,GAAarF,MAAM,GACfA,MAAM,CAAC8E,MAAP,CAAcpE,KAAd,CADe,GAEftO,KAAK,CAACC,OAAN,CAAcqO,KAAd,IAAuBA,KAAvB,GAA+B,CAACA,KAAD,CAFnC;AAGD;;AACD,SAAO/K,GAAP;AACD,CA5BD;AA8BA;AACA;AACA;;;AACAmO,MAAM,CAACwB,KAAP,GACAxB,MAAM,CAACyB,OAAP,GACAzB,MAAM,CAAC0B,MAAP,GACA1B,MAAM,CAAC2B,QAAP,GAAkB,UAChBlB,SADgB,EAEhBC,QAFgB,EAGhB5H,EAHgB,EAIhB9I,GAJgB,EAKhB;AACA,MAAI0Q,QAAQ,IAAI,kBAAyB,YAAzC,EAAuD;AACrDW,IAAAA,gBAAgB,CAACrR,GAAD,EAAM0Q,QAAN,EAAgB5H,EAAhB,CAAhB;AACD;;AACD,MAAI,CAAC2H,SAAL,EAAgB;AAAE,WAAOC,QAAP;AAAiB;;AACnC,MAAI7O,GAAG,GAAGtF,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAV;AACA8C,EAAAA,MAAM,CAACD,GAAD,EAAM4O,SAAN,CAAN;;AACA,MAAIC,QAAJ,EAAc;AAAE5O,IAAAA,MAAM,CAACD,GAAD,EAAM6O,QAAN,CAAN;AAAwB;;AACxC,SAAO7O,GAAP;AACD,CAjBD;;AAkBAmO,MAAM,CAAC4B,OAAP,GAAiBpB,aAAjB;AAEA;AACA;AACA;;AACA,IAAIL,YAAY,GAAG,UAAUM,SAAV,EAAqBC,QAArB,EAA+B;AAChD,SAAOA,QAAQ,KAAK/T,SAAb,GACH8T,SADG,GAEHC,QAFJ;AAGD,CAJD;AAMA;AACA;AACA;;;AACA,SAASmB,eAAT,CAA0B1I,OAA1B,EAAmC;AACjC,OAAK,IAAInJ,GAAT,IAAgBmJ,OAAO,CAAC2I,UAAxB,EAAoC;AAClCC,IAAAA,qBAAqB,CAAC/R,GAAD,CAArB;AACD;AACF;;AAED,SAAS+R,qBAAT,CAAgCvI,IAAhC,EAAsC;AACpC,MAAI,CAAC,IAAIpE,MAAJ,CAAY,yBAA0BT,aAAa,CAACU,MAAxC,GAAkD,KAA9D,EAAsEG,IAAtE,CAA2EgE,IAA3E,CAAL,EAAuF;AACrFnB,IAAAA,IAAI,CACF,8BAA8BmB,IAA9B,GAAqC,qBAArC,GACA,qEAFE,CAAJ;AAID;;AACD,MAAIlK,YAAY,CAACkK,IAAD,CAAZ,IAAsB/F,MAAM,CAACU,aAAP,CAAqBqF,IAArB,CAA1B,EAAsD;AACpDnB,IAAAA,IAAI,CACF,gEACA,MADA,GACSmB,IAFP,CAAJ;AAID;AACF;AAED;AACA;AACA;AACA;;;AACA,SAASwI,cAAT,CAAyB7I,OAAzB,EAAkCL,EAAlC,EAAsC;AACpC,MAAI0I,KAAK,GAAGrI,OAAO,CAACqI,KAApB;;AACA,MAAI,CAACA,KAAL,EAAY;AAAE;AAAQ;;AACtB,MAAItP,GAAG,GAAG,EAAV;AACA,MAAI/C,CAAJ,EAAOvB,GAAP,EAAY4L,IAAZ;;AACA,MAAIlL,KAAK,CAACC,OAAN,CAAciT,KAAd,CAAJ,EAA0B;AACxBrS,IAAAA,CAAC,GAAGqS,KAAK,CAACpS,MAAV;;AACA,WAAOD,CAAC,EAAR,EAAY;AACVvB,MAAAA,GAAG,GAAG4T,KAAK,CAACrS,CAAD,CAAX;;AACA,UAAI,OAAOvB,GAAP,KAAe,QAAnB,EAA6B;AAC3B4L,QAAAA,IAAI,GAAGjJ,QAAQ,CAAC3C,GAAD,CAAf;AACAsE,QAAAA,GAAG,CAACsH,IAAD,CAAH,GAAY;AAAE8H,UAAAA,IAAI,EAAE;AAAR,SAAZ;AACD,OAHD,MAGO,IAAI,kBAAyB,YAA7B,EAA2C;AAChDjJ,QAAAA,IAAI,CAAC,gDAAD,CAAJ;AACD;AACF;AACF,GAXD,MAWO,IAAI5K,aAAa,CAAC+T,KAAD,CAAjB,EAA0B;AAC/B,SAAK,IAAIxR,GAAT,IAAgBwR,KAAhB,EAAuB;AACrB5T,MAAAA,GAAG,GAAG4T,KAAK,CAACxR,GAAD,CAAX;AACAwJ,MAAAA,IAAI,GAAGjJ,QAAQ,CAACP,GAAD,CAAf;AACAkC,MAAAA,GAAG,CAACsH,IAAD,CAAH,GAAY/L,aAAa,CAACG,GAAD,CAAb,GACRA,GADQ,GAER;AAAE0T,QAAAA,IAAI,EAAE1T;AAAR,OAFJ;AAGD;AACF,GARM,MAQA,IAAI,kBAAyB,YAA7B,EAA2C;AAChDyK,IAAAA,IAAI,CACF,yEACA,UADA,GACc/K,SAAS,CAACkU,KAAD,CADvB,GACkC,GAFhC,EAGF1I,EAHE,CAAJ;AAKD;;AACDK,EAAAA,OAAO,CAACqI,KAAR,GAAgBtP,GAAhB;AACD;AAED;AACA;AACA;;;AACA,SAAS+P,eAAT,CAA0B9I,OAA1B,EAAmCL,EAAnC,EAAuC;AACrC,MAAI4I,MAAM,GAAGvI,OAAO,CAACuI,MAArB;;AACA,MAAI,CAACA,MAAL,EAAa;AAAE;AAAQ;;AACvB,MAAIQ,UAAU,GAAG/I,OAAO,CAACuI,MAAR,GAAiB,EAAlC;;AACA,MAAIpT,KAAK,CAACC,OAAN,CAAcmT,MAAd,CAAJ,EAA2B;AACzB,SAAK,IAAIvS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuS,MAAM,CAACtS,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC+S,MAAAA,UAAU,CAACR,MAAM,CAACvS,CAAD,CAAP,CAAV,GAAwB;AAAEkR,QAAAA,IAAI,EAAEqB,MAAM,CAACvS,CAAD;AAAd,OAAxB;AACD;AACF,GAJD,MAIO,IAAI1B,aAAa,CAACiU,MAAD,CAAjB,EAA2B;AAChC,SAAK,IAAI1R,GAAT,IAAgB0R,MAAhB,EAAwB;AACtB,UAAI9T,GAAG,GAAG8T,MAAM,CAAC1R,GAAD,CAAhB;AACAkS,MAAAA,UAAU,CAAClS,GAAD,CAAV,GAAkBvC,aAAa,CAACG,GAAD,CAAb,GACdkE,MAAM,CAAC;AAAEuO,QAAAA,IAAI,EAAErQ;AAAR,OAAD,EAAgBpC,GAAhB,CADQ,GAEd;AAAEyS,QAAAA,IAAI,EAAEzS;AAAR,OAFJ;AAGD;AACF,GAPM,MAOA,IAAI,kBAAyB,YAA7B,EAA2C;AAChDyK,IAAAA,IAAI,CACF,0EACA,UADA,GACc/K,SAAS,CAACoU,MAAD,CADvB,GACmC,GAFjC,EAGF5I,EAHE,CAAJ;AAKD;AACF;AAED;AACA;AACA;;;AACA,SAASqJ,mBAAT,CAA8BhJ,OAA9B,EAAuC;AACrC,MAAIiJ,IAAI,GAAGjJ,OAAO,CAACkJ,UAAnB;;AACA,MAAID,IAAJ,EAAU;AACR,SAAK,IAAIpS,GAAT,IAAgBoS,IAAhB,EAAsB;AACpB,UAAIE,MAAM,GAAGF,IAAI,CAACpS,GAAD,CAAjB;;AACA,UAAI,OAAOsS,MAAP,KAAkB,UAAtB,EAAkC;AAChCF,QAAAA,IAAI,CAACpS,GAAD,CAAJ,GAAY;AAAEyB,UAAAA,IAAI,EAAE6Q,MAAR;AAAgBvH,UAAAA,MAAM,EAAEuH;AAAxB,SAAZ;AACD;AACF;AACF;AACF;;AAED,SAASjB,gBAAT,CAA2B7H,IAA3B,EAAiCxM,KAAjC,EAAwC8L,EAAxC,EAA4C;AAC1C,MAAI,CAACrL,aAAa,CAACT,KAAD,CAAlB,EAA2B;AACzBqL,IAAAA,IAAI,CACF,gCAAgCmB,IAAhC,GAAuC,0BAAvC,GACA,UADA,GACclM,SAAS,CAACN,KAAD,CADvB,GACkC,GAFhC,EAGF8L,EAHE,CAAJ;AAKD;AACF;AAED;AACA;AACA;AACA;;;AACA,SAASyJ,YAAT,CACErG,MADF,EAEEU,KAFF,EAGE9D,EAHF,EAIE;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzC+I,IAAAA,eAAe,CAACjF,KAAD,CAAf;AACD;;AAED,MAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC/BA,IAAAA,KAAK,GAAGA,KAAK,CAACzD,OAAd;AACD;;AAED6I,EAAAA,cAAc,CAACpF,KAAD,EAAQ9D,EAAR,CAAd;AACAmJ,EAAAA,eAAe,CAACrF,KAAD,EAAQ9D,EAAR,CAAf;AACAqJ,EAAAA,mBAAmB,CAACvF,KAAD,CAAnB,CAXA,CAaA;AACA;AACA;AACA;;AACA,MAAI,CAACA,KAAK,CAAC4F,KAAX,EAAkB;AAChB,QAAI5F,KAAK,CAAC6F,OAAV,EAAmB;AACjBvG,MAAAA,MAAM,GAAGqG,YAAY,CAACrG,MAAD,EAASU,KAAK,CAAC6F,OAAf,EAAwB3J,EAAxB,CAArB;AACD;;AACD,QAAI8D,KAAK,CAAC8F,MAAV,EAAkB;AAChB,WAAK,IAAIvT,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAGwL,KAAK,CAAC8F,MAAN,CAAatT,MAAjC,EAAyCD,CAAC,GAAGiC,CAA7C,EAAgDjC,CAAC,EAAjD,EAAqD;AACnD+M,QAAAA,MAAM,GAAGqG,YAAY,CAACrG,MAAD,EAASU,KAAK,CAAC8F,MAAN,CAAavT,CAAb,CAAT,EAA0B2J,EAA1B,CAArB;AACD;AACF;AACF;;AAED,MAAIK,OAAO,GAAG,EAAd;AACA,MAAInJ,GAAJ;;AACA,OAAKA,GAAL,IAAYkM,MAAZ,EAAoB;AAClByG,IAAAA,UAAU,CAAC3S,GAAD,CAAV;AACD;;AACD,OAAKA,GAAL,IAAY4M,KAAZ,EAAmB;AACjB,QAAI,CAAC7M,MAAM,CAACmM,MAAD,EAASlM,GAAT,CAAX,EAA0B;AACxB2S,MAAAA,UAAU,CAAC3S,GAAD,CAAV;AACD;AACF;;AACD,WAAS2S,UAAT,CAAqB3S,GAArB,EAA0B;AACxB,QAAI4S,KAAK,GAAG5C,MAAM,CAAChQ,GAAD,CAAN,IAAemQ,YAA3B;AACAhH,IAAAA,OAAO,CAACnJ,GAAD,CAAP,GAAe4S,KAAK,CAAC1G,MAAM,CAAClM,GAAD,CAAP,EAAc4M,KAAK,CAAC5M,GAAD,CAAnB,EAA0B8I,EAA1B,EAA8B9I,GAA9B,CAApB;AACD;;AACD,SAAOmJ,OAAP;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAAS0J,YAAT,CACE1J,OADF,EAEEmI,IAFF,EAGEjH,EAHF,EAIEyI,WAJF,EAKE;AACA;AACA,MAAI,OAAOzI,EAAP,KAAc,QAAlB,EAA4B;AAC1B;AACD;;AACD,MAAI0I,MAAM,GAAG5J,OAAO,CAACmI,IAAD,CAApB,CALA,CAMA;;AACA,MAAIvR,MAAM,CAACgT,MAAD,EAAS1I,EAAT,CAAV,EAAwB;AAAE,WAAO0I,MAAM,CAAC1I,EAAD,CAAb;AAAmB;;AAC7C,MAAI2I,WAAW,GAAGzS,QAAQ,CAAC8J,EAAD,CAA1B;;AACA,MAAItK,MAAM,CAACgT,MAAD,EAASC,WAAT,CAAV,EAAiC;AAAE,WAAOD,MAAM,CAACC,WAAD,CAAb;AAA4B;;AAC/D,MAAIC,YAAY,GAAGrS,UAAU,CAACoS,WAAD,CAA7B;;AACA,MAAIjT,MAAM,CAACgT,MAAD,EAASE,YAAT,CAAV,EAAkC;AAAE,WAAOF,MAAM,CAACE,YAAD,CAAb;AAA6B,GAXjE,CAYA;;;AACA,MAAI/Q,GAAG,GAAG6Q,MAAM,CAAC1I,EAAD,CAAN,IAAc0I,MAAM,CAACC,WAAD,CAApB,IAAqCD,MAAM,CAACE,YAAD,CAArD;;AACA,MAAI,kBAAyB,YAAzB,IAAyCH,WAAzC,IAAwD,CAAC5Q,GAA7D,EAAkE;AAChEmG,IAAAA,IAAI,CACF,uBAAuBiJ,IAAI,CAAC9T,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAvB,GAA2C,IAA3C,GAAkD6M,EADhD,EAEFlB,OAFE,CAAJ;AAID;;AACD,SAAOjH,GAAP;AACD;AAED;;;AAIA,SAASgR,YAAT,CACElT,GADF,EAEEmT,WAFF,EAGEjD,SAHF,EAIEpH,EAJF,EAKE;AACA,MAAIsK,IAAI,GAAGD,WAAW,CAACnT,GAAD,CAAtB;AACA,MAAIqT,MAAM,GAAG,CAACtT,MAAM,CAACmQ,SAAD,EAAYlQ,GAAZ,CAApB;AACA,MAAIhD,KAAK,GAAGkT,SAAS,CAAClQ,GAAD,CAArB,CAHA,CAIA;;AACA,MAAIsT,YAAY,GAAGC,YAAY,CAACC,OAAD,EAAUJ,IAAI,CAAC9B,IAAf,CAA/B;;AACA,MAAIgC,YAAY,GAAG,CAAC,CAApB,EAAuB;AACrB,QAAID,MAAM,IAAI,CAACtT,MAAM,CAACqT,IAAD,EAAO,SAAP,CAArB,EAAwC;AACtCpW,MAAAA,KAAK,GAAG,KAAR;AACD,KAFD,MAEO,IAAIA,KAAK,KAAK,EAAV,IAAgBA,KAAK,KAAK+D,SAAS,CAACf,GAAD,CAAvC,EAA8C;AACnD;AACA;AACA,UAAIyT,WAAW,GAAGF,YAAY,CAACxV,MAAD,EAASqV,IAAI,CAAC9B,IAAd,CAA9B;;AACA,UAAImC,WAAW,GAAG,CAAd,IAAmBH,YAAY,GAAGG,WAAtC,EAAmD;AACjDzW,QAAAA,KAAK,GAAG,IAAR;AACD;AACF;AACF,GAjBD,CAkBA;;;AACA,MAAIA,KAAK,KAAKL,SAAd,EAAyB;AACvBK,IAAAA,KAAK,GAAG0W,mBAAmB,CAAC5K,EAAD,EAAKsK,IAAL,EAAWpT,GAAX,CAA3B,CADuB,CAEvB;AACA;;AACA,QAAI2T,iBAAiB,GAAGtF,aAAxB;AACAC,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAQ,IAAAA,OAAO,CAAC9R,KAAD,CAAP;AACAsR,IAAAA,eAAe,CAACqF,iBAAD,CAAf;AACD;;AACD,MACE,kBAAyB,YAAzB,IACA;AACA,GAAE,KAHJ,EAIE;AACAC,IAAAA,UAAU,CAACR,IAAD,EAAOpT,GAAP,EAAYhD,KAAZ,EAAmB8L,EAAnB,EAAuBuK,MAAvB,CAAV;AACD;;AACD,SAAOrW,KAAP;AACD;AAED;AACA;AACA;;;AACA,SAAS0W,mBAAT,CAA8B5K,EAA9B,EAAkCsK,IAAlC,EAAwCpT,GAAxC,EAA6C;AAC3C;AACA,MAAI,CAACD,MAAM,CAACqT,IAAD,EAAO,SAAP,CAAX,EAA8B;AAC5B,WAAOzW,SAAP;AACD;;AACD,MAAImI,GAAG,GAAGsO,IAAI,CAACS,OAAf,CAL2C,CAM3C;;AACA,MAAI,kBAAyB,YAAzB,IAAyC5W,QAAQ,CAAC6H,GAAD,CAArD,EAA4D;AAC1DuD,IAAAA,IAAI,CACF,qCAAqCrI,GAArC,GAA2C,KAA3C,GACA,2DADA,GAEA,8BAHE,EAIF8I,EAJE,CAAJ;AAMD,GAd0C,CAe3C;AACA;;;AACA,MAAIA,EAAE,IAAIA,EAAE,CAACQ,QAAH,CAAY4G,SAAlB,IACFpH,EAAE,CAACQ,QAAH,CAAY4G,SAAZ,CAAsBlQ,GAAtB,MAA+BrD,SAD7B,IAEFmM,EAAE,CAACgL,MAAH,CAAU9T,GAAV,MAAmBrD,SAFrB,EAGE;AACA,WAAOmM,EAAE,CAACgL,MAAH,CAAU9T,GAAV,CAAP;AACD,GAtB0C,CAuB3C;AACA;;;AACA,SAAO,OAAO8E,GAAP,KAAe,UAAf,IAA6BiP,OAAO,CAACX,IAAI,CAAC9B,IAAN,CAAP,KAAuB,UAApD,GACHxM,GAAG,CAACvH,IAAJ,CAASuL,EAAT,CADG,GAEHhE,GAFJ;AAGD;AAED;AACA;AACA;;;AACA,SAAS8O,UAAT,CACER,IADF,EAEE5J,IAFF,EAGExM,KAHF,EAIE8L,EAJF,EAKEuK,MALF,EAME;AACA,MAAID,IAAI,CAACY,QAAL,IAAiBX,MAArB,EAA6B;AAC3BhL,IAAAA,IAAI,CACF,6BAA6BmB,IAA7B,GAAoC,GADlC,EAEFV,EAFE,CAAJ;AAIA;AACD;;AACD,MAAI9L,KAAK,IAAI,IAAT,IAAiB,CAACoW,IAAI,CAACY,QAA3B,EAAqC;AACnC;AACD;;AACD,MAAI1C,IAAI,GAAG8B,IAAI,CAAC9B,IAAhB;AACA,MAAI2C,KAAK,GAAG,CAAC3C,IAAD,IAASA,IAAI,KAAK,IAA9B;AACA,MAAI4C,aAAa,GAAG,EAApB;;AACA,MAAI5C,IAAJ,EAAU;AACR,QAAI,CAAChT,KAAK,CAACC,OAAN,CAAc+S,IAAd,CAAL,EAA0B;AACxBA,MAAAA,IAAI,GAAG,CAACA,IAAD,CAAP;AACD;;AACD,SAAK,IAAInS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmS,IAAI,CAAClS,MAAT,IAAmB,CAAC6U,KAApC,EAA2C9U,CAAC,EAA5C,EAAgD;AAC9C,UAAIgV,YAAY,GAAGC,UAAU,CAACpX,KAAD,EAAQsU,IAAI,CAACnS,CAAD,CAAZ,CAA7B;AACA+U,MAAAA,aAAa,CAACjK,IAAd,CAAmBkK,YAAY,CAACE,YAAb,IAA6B,EAAhD;AACAJ,MAAAA,KAAK,GAAGE,YAAY,CAACF,KAArB;AACD;AACF;;AAED,MAAI,CAACA,KAAL,EAAY;AACV5L,IAAAA,IAAI,CACFiM,qBAAqB,CAAC9K,IAAD,EAAOxM,KAAP,EAAckX,aAAd,CADnB,EAEFpL,EAFE,CAAJ;AAIA;AACD;;AACD,MAAIyL,SAAS,GAAGnB,IAAI,CAACmB,SAArB;;AACA,MAAIA,SAAJ,EAAe;AACb,QAAI,CAACA,SAAS,CAACvX,KAAD,CAAd,EAAuB;AACrBqL,MAAAA,IAAI,CACF,2DAA2DmB,IAA3D,GAAkE,IADhE,EAEFV,EAFE,CAAJ;AAID;AACF;AACF;;AAED,IAAI0L,aAAa,GAAG,2CAApB;;AAEA,SAASJ,UAAT,CAAqBpX,KAArB,EAA4BsU,IAA5B,EAAkC;AAChC,MAAI2C,KAAJ;AACA,MAAII,YAAY,GAAGN,OAAO,CAACzC,IAAD,CAA1B;;AACA,MAAIkD,aAAa,CAAChP,IAAd,CAAmB6O,YAAnB,CAAJ,EAAsC;AACpC,QAAII,CAAC,GAAG,OAAOzX,KAAf;AACAiX,IAAAA,KAAK,GAAGQ,CAAC,KAAKJ,YAAY,CAAChV,WAAb,EAAd,CAFoC,CAGpC;;AACA,QAAI,CAAC4U,KAAD,IAAUQ,CAAC,KAAK,QAApB,EAA8B;AAC5BR,MAAAA,KAAK,GAAGjX,KAAK,YAAYsU,IAAzB;AACD;AACF,GAPD,MAOO,IAAI+C,YAAY,KAAK,QAArB,EAA+B;AACpCJ,IAAAA,KAAK,GAAGxW,aAAa,CAACT,KAAD,CAArB;AACD,GAFM,MAEA,IAAIqX,YAAY,KAAK,OAArB,EAA8B;AACnCJ,IAAAA,KAAK,GAAG3V,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAR;AACD,GAFM,MAEA;AACLiX,IAAAA,KAAK,GAAGjX,KAAK,YAAYsU,IAAzB;AACD;;AACD,SAAO;AACL2C,IAAAA,KAAK,EAAEA,KADF;AAELI,IAAAA,YAAY,EAAEA;AAFT,GAAP;AAID;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASN,OAAT,CAAkB7T,EAAlB,EAAsB;AACpB,MAAI0G,KAAK,GAAG1G,EAAE,IAAIA,EAAE,CAAC7C,QAAH,GAAcuJ,KAAd,CAAoB,oBAApB,CAAlB;AACA,SAAOA,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAc,EAA1B;AACD;;AAED,SAAS8N,UAAT,CAAqBvT,CAArB,EAAwBiB,CAAxB,EAA2B;AACzB,SAAO2R,OAAO,CAAC5S,CAAD,CAAP,KAAe4S,OAAO,CAAC3R,CAAD,CAA7B;AACD;;AAED,SAASmR,YAAT,CAAuBjC,IAAvB,EAA6B4C,aAA7B,EAA4C;AAC1C,MAAI,CAAC5V,KAAK,CAACC,OAAN,CAAc2V,aAAd,CAAL,EAAmC;AACjC,WAAOQ,UAAU,CAACR,aAAD,EAAgB5C,IAAhB,CAAV,GAAkC,CAAlC,GAAsC,CAAC,CAA9C;AACD;;AACD,OAAK,IAAInS,CAAC,GAAG,CAAR,EAAWyO,GAAG,GAAGsG,aAAa,CAAC9U,MAApC,EAA4CD,CAAC,GAAGyO,GAAhD,EAAqDzO,CAAC,EAAtD,EAA0D;AACxD,QAAIuV,UAAU,CAACR,aAAa,CAAC/U,CAAD,CAAd,EAAmBmS,IAAnB,CAAd,EAAwC;AACtC,aAAOnS,CAAP;AACD;AACF;;AACD,SAAO,CAAC,CAAR;AACD;;AAED,SAASmV,qBAAT,CAAgC9K,IAAhC,EAAsCxM,KAAtC,EAA6CkX,aAA7C,EAA4D;AAC1D,MAAIS,OAAO,GAAG,gDAAgDnL,IAAhD,GAAuD,KAAvD,GACZ,YADY,GACI0K,aAAa,CAACnV,GAAd,CAAkB6B,UAAlB,EAA8BsJ,IAA9B,CAAmC,IAAnC,CADlB;AAEA,MAAImK,YAAY,GAAGH,aAAa,CAAC,CAAD,CAAhC;AACA,MAAIU,YAAY,GAAGtX,SAAS,CAACN,KAAD,CAA5B;AACA,MAAI6X,aAAa,GAAGC,UAAU,CAAC9X,KAAD,EAAQqX,YAAR,CAA9B;AACA,MAAIU,aAAa,GAAGD,UAAU,CAAC9X,KAAD,EAAQ4X,YAAR,CAA9B,CAN0D,CAO1D;;AACA,MAAIV,aAAa,CAAC9U,MAAd,KAAyB,CAAzB,IACA4V,YAAY,CAACX,YAAD,CADZ,IAEA,CAACY,SAAS,CAACZ,YAAD,EAAeO,YAAf,CAFd,EAE4C;AAC1CD,IAAAA,OAAO,IAAI,iBAAiBE,aAA5B;AACD;;AACDF,EAAAA,OAAO,IAAI,WAAWC,YAAX,GAA0B,GAArC,CAb0D,CAc1D;;AACA,MAAII,YAAY,CAACJ,YAAD,CAAhB,EAAgC;AAC9BD,IAAAA,OAAO,IAAI,gBAAgBI,aAAhB,GAAgC,GAA3C;AACD;;AACD,SAAOJ,OAAP;AACD;;AAED,SAASG,UAAT,CAAqB9X,KAArB,EAA4BsU,IAA5B,EAAkC;AAChC,MAAIA,IAAI,KAAK,QAAb,EAAuB;AACrB,WAAQ,OAAOtU,KAAP,GAAe,IAAvB;AACD,GAFD,MAEO,IAAIsU,IAAI,KAAK,QAAb,EAAuB;AAC5B,WAAQ,KAAM4D,MAAM,CAAClY,KAAD,CAApB;AACD,GAFM,MAEA;AACL,WAAQ,KAAKA,KAAb;AACD;AACF;;AAED,SAASgY,YAAT,CAAuBhY,KAAvB,EAA8B;AAC5B,MAAImY,aAAa,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,CAApB;AACA,SAAOA,aAAa,CAACC,IAAd,CAAmB,UAAUC,IAAV,EAAgB;AAAE,WAAOrY,KAAK,CAACqC,WAAN,OAAwBgW,IAA/B;AAAsC,GAA3E,CAAP;AACD;;AAED,SAASJ,SAAT,GAAsB;AACpB,MAAItH,IAAI,GAAG,EAAX;AAAA,MAAeC,GAAG,GAAGvM,SAAS,CAACjC,MAA/B;;AACA,SAAQwO,GAAG,EAAX,EAAgBD,IAAI,CAAEC,GAAF,CAAJ,GAAcvM,SAAS,CAAEuM,GAAF,CAAvB;;AAEhB,SAAOD,IAAI,CAACyH,IAAL,CAAU,UAAUC,IAAV,EAAgB;AAAE,WAAOA,IAAI,CAAChW,WAAL,OAAuB,SAA9B;AAA0C,GAAtE,CAAP;AACD;AAED;;;AAEA,SAASiW,WAAT,CAAsBC,GAAtB,EAA2BzM,EAA3B,EAA+B0M,IAA/B,EAAqC;AACnC;AACA;AACAvK,EAAAA,UAAU;;AACV,MAAI;AACF,QAAInC,EAAJ,EAAQ;AACN,UAAI2M,GAAG,GAAG3M,EAAV;;AACA,aAAQ2M,GAAG,GAAGA,GAAG,CAAC5L,OAAlB,EAA4B;AAC1B,YAAIqH,KAAK,GAAGuE,GAAG,CAACnM,QAAJ,CAAaoM,aAAzB;;AACA,YAAIxE,KAAJ,EAAW;AACT,eAAK,IAAI/R,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+R,KAAK,CAAC9R,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,gBAAI;AACF,kBAAIwW,OAAO,GAAGzE,KAAK,CAAC/R,CAAD,CAAL,CAAS5B,IAAT,CAAckY,GAAd,EAAmBF,GAAnB,EAAwBzM,EAAxB,EAA4B0M,IAA5B,MAAsC,KAApD;;AACA,kBAAIG,OAAJ,EAAa;AAAE;AAAQ;AACxB,aAHD,CAGE,OAAO9S,CAAP,EAAU;AACV+S,cAAAA,iBAAiB,CAAC/S,CAAD,EAAI4S,GAAJ,EAAS,oBAAT,CAAjB;AACD;AACF;AACF;AACF;AACF;;AACDG,IAAAA,iBAAiB,CAACL,GAAD,EAAMzM,EAAN,EAAU0M,IAAV,CAAjB;AACD,GAlBD,SAkBU;AACRtK,IAAAA,SAAS;AACV;AACF;;AAED,SAAS2K,uBAAT,CACEC,OADF,EAEEpK,OAFF,EAGEiC,IAHF,EAIE7E,EAJF,EAKE0M,IALF,EAME;AACA,MAAItT,GAAJ;;AACA,MAAI;AACFA,IAAAA,GAAG,GAAGyL,IAAI,GAAGmI,OAAO,CAACxU,KAAR,CAAcoK,OAAd,EAAuBiC,IAAvB,CAAH,GAAkCmI,OAAO,CAACvY,IAAR,CAAamO,OAAb,CAA5C;;AACA,QAAIxJ,GAAG,IAAI,CAACA,GAAG,CAACmH,MAAZ,IAAsBlL,SAAS,CAAC+D,GAAD,CAA/B,IAAwC,CAACA,GAAG,CAAC6T,QAAjD,EAA2D;AACzD7T,MAAAA,GAAG,CAAC7D,KAAJ,CAAU,UAAUwE,CAAV,EAAa;AAAE,eAAOyS,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAQ0M,IAAI,GAAG,kBAAf,CAAlB;AAAuD,OAAhF,EADyD,CAEzD;AACA;;AACAtT,MAAAA,GAAG,CAAC6T,QAAJ,GAAe,IAAf;AACD;AACF,GARD,CAQE,OAAOlT,CAAP,EAAU;AACVyS,IAAAA,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAQ0M,IAAR,CAAX;AACD;;AACD,SAAOtT,GAAP;AACD;;AAED,SAAS0T,iBAAT,CAA4BL,GAA5B,EAAiCzM,EAAjC,EAAqC0M,IAArC,EAA2C;AACzC,MAAI/R,MAAM,CAACM,YAAX,EAAyB;AACvB,QAAI;AACF,aAAON,MAAM,CAACM,YAAP,CAAoBxG,IAApB,CAAyB,IAAzB,EAA+BgY,GAA/B,EAAoCzM,EAApC,EAAwC0M,IAAxC,CAAP;AACD,KAFD,CAEE,OAAO3S,CAAP,EAAU;AACV;AACA;AACA,UAAIA,CAAC,KAAK0S,GAAV,EAAe;AACbS,QAAAA,QAAQ,CAACnT,CAAD,EAAI,IAAJ,EAAU,qBAAV,CAAR;AACD;AACF;AACF;;AACDmT,EAAAA,QAAQ,CAACT,GAAD,EAAMzM,EAAN,EAAU0M,IAAV,CAAR;AACD;;AAED,SAASQ,QAAT,CAAmBT,GAAnB,EAAwBzM,EAAxB,EAA4B0M,IAA5B,EAAkC;AAChC,MAAI,kBAAyB,YAA7B,EAA2C;AACzCnN,IAAAA,IAAI,CAAE,cAAcmN,IAAd,GAAqB,MAArB,GAA+BD,GAAG,CAAClY,QAAJ,EAA/B,GAAiD,IAAnD,EAA0DyL,EAA1D,CAAJ;AACD;AACD;;;AACA,MAAI,CAACnD,SAAS,IAAIE,MAAd,KAAyB,OAAO6C,OAAP,KAAmB,WAAhD,EAA6D;AAC3DA,IAAAA,OAAO,CAACM,KAAR,CAAcuM,GAAd;AACD,GAFD,MAEO;AACL,UAAMA,GAAN;AACD;AACF;AAED;;;AAEA,IAAIU,gBAAgB,GAAG,KAAvB;AAEA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,OAAO,GAAG,KAAd;;AAEA,SAASC,cAAT,GAA2B;AACzBD,EAAAA,OAAO,GAAG,KAAV;AACA,MAAIE,MAAM,GAAGH,SAAS,CAAC1Y,KAAV,CAAgB,CAAhB,CAAb;AACA0Y,EAAAA,SAAS,CAAC9W,MAAV,GAAmB,CAAnB;;AACA,OAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkX,MAAM,CAACjX,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCkX,IAAAA,MAAM,CAAClX,CAAD,CAAN;AACD;AACF,EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAImX,SAAJ,EAEA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA,IAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkC9O,QAAQ,CAAC8O,OAAD,CAA9C,EAAyD;AACvD,MAAIC,CAAC,GAAGD,OAAO,CAACE,OAAR,EAAR;;AACAH,EAAAA,SAAS,GAAG,YAAY;AACtBE,IAAAA,CAAC,CAACpY,IAAF,CAAOgY,cAAP,EADsB,CAEtB;AACA;AACA;AACA;AACA;;AACA,QAAI5P,KAAJ,EAAW;AAAEkQ,MAAAA,UAAU,CAACvU,IAAD,CAAV;AAAmB;AACjC,GARD;;AASA8T,EAAAA,gBAAgB,GAAG,IAAnB;AACD,CAZD,MAYO,IAAI,CAAC7P,IAAD,IAAS,OAAOuQ,gBAAP,KAA4B,WAArC,KACTlP,QAAQ,CAACkP,gBAAD,CAAR,IACA;AACAA,gBAAgB,CAACtZ,QAAjB,OAAgC,sCAHvB,CAAJ,EAIJ;AACD;AACA;AACA;AACA,MAAIuZ,OAAO,GAAG,CAAd;AACA,MAAIC,QAAQ,GAAG,IAAIF,gBAAJ,CAAqBP,cAArB,CAAf;AACA,MAAIU,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwBjZ,MAAM,CAAC6Y,OAAD,CAA9B,CAAf;AACAC,EAAAA,QAAQ,CAAC/H,OAAT,CAAiBgI,QAAjB,EAA2B;AACzBG,IAAAA,aAAa,EAAE;AADU,GAA3B;;AAGAX,EAAAA,SAAS,GAAG,YAAY;AACtBM,IAAAA,OAAO,GAAG,CAACA,OAAO,GAAG,CAAX,IAAgB,CAA1B;AACAE,IAAAA,QAAQ,CAACxL,IAAT,GAAgBvN,MAAM,CAAC6Y,OAAD,CAAtB;AACD,GAHD;;AAIAX,EAAAA,gBAAgB,GAAG,IAAnB;AACD,CAnBM,MAmBA,IAAI,OAAOiB,YAAP,KAAwB,WAAxB,IAAuCzP,QAAQ,CAACyP,YAAD,CAAnD,EAAmE;AACxE;AACA;AACA;AACAZ,EAAAA,SAAS,GAAG,YAAY;AACtBY,IAAAA,YAAY,CAACd,cAAD,CAAZ;AACD,GAFD;AAGD,CAPM,MAOA;AACL;AACAE,EAAAA,SAAS,GAAG,YAAY;AACtBI,IAAAA,UAAU,CAACN,cAAD,EAAiB,CAAjB,CAAV;AACD,GAFD;AAGD;;AAED,SAASe,QAAT,CAAmBC,EAAnB,EAAuBnW,GAAvB,EAA4B;AAC1B,MAAIoW,QAAJ;;AACAnB,EAAAA,SAAS,CAACjM,IAAV,CAAe,YAAY;AACzB,QAAImN,EAAJ,EAAQ;AACN,UAAI;AACFA,QAAAA,EAAE,CAAC7Z,IAAH,CAAQ0D,GAAR;AACD,OAFD,CAEE,OAAO4B,CAAP,EAAU;AACVyS,QAAAA,WAAW,CAACzS,CAAD,EAAI5B,GAAJ,EAAS,UAAT,CAAX;AACD;AACF,KAND,MAMO,IAAIoW,QAAJ,EAAc;AACnBA,MAAAA,QAAQ,CAACpW,GAAD,CAAR;AACD;AACF,GAVD;;AAWA,MAAI,CAACkV,OAAL,EAAc;AACZA,IAAAA,OAAO,GAAG,IAAV;AACAG,IAAAA,SAAS;AACV,GAhByB,CAiB1B;;;AACA,MAAI,CAACc,EAAD,IAAO,OAAOb,OAAP,KAAmB,WAA9B,EAA2C;AACzC,WAAO,IAAIA,OAAJ,CAAY,UAAUE,OAAV,EAAmB;AACpCY,MAAAA,QAAQ,GAAGZ,OAAX;AACD,KAFM,CAAP;AAGD;AACF;AAED;;AAEA;;;AAEA,IAAIa,SAAJ;;AAEA,IAAI,kBAAyB,YAA7B,EAA2C;AACzC,MAAIC,cAAc,GAAG3Y,OAAO,CAC1B,2CACA,gFADA,GAEA,wEAFA,GAGA,SAJ0B,CAIhB;AAJgB,GAA5B;;AAOA,MAAI4Y,cAAc,GAAG,UAAU7M,MAAV,EAAkB3K,GAAlB,EAAuB;AAC1CqI,IAAAA,IAAI,CACF,0BAA0BrI,GAA1B,GAAgC,wCAAhC,GACA,sEADA,GAEA,+DAFA,GAGA,6BAHA,GAIA,gFALE,EAMF2K,MANE,CAAJ;AAQD,GATD;;AAWA,MAAI8M,kBAAkB,GAAG,UAAU9M,MAAV,EAAkB3K,GAAlB,EAAuB;AAC9CqI,IAAAA,IAAI,CACF,gBAAgBrI,GAAhB,GAAsB,mCAAtB,GAA4DA,GAA5D,GAAkE,aAAlE,GACA,6EADA,GAEA,wCAFA,GAGA,qCAJE,EAKF2K,MALE,CAAJ;AAOD,GARD;;AAUA,MAAI+M,QAAQ,GACV,OAAOC,KAAP,KAAiB,WAAjB,IAAgClQ,QAAQ,CAACkQ,KAAD,CAD1C;;AAGA,MAAID,QAAJ,EAAc;AACZ,QAAIE,iBAAiB,GAAGhZ,OAAO,CAAC,6CAAD,CAA/B;AACA6E,IAAAA,MAAM,CAACS,QAAP,GAAkB,IAAIyT,KAAJ,CAAUlU,MAAM,CAACS,QAAjB,EAA2B;AAC3C+D,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAc0C,MAAd,EAAsB3K,GAAtB,EAA2BhD,KAA3B,EAAkC;AACrC,YAAI4a,iBAAiB,CAAC5X,GAAD,CAArB,EAA4B;AAC1BqI,UAAAA,IAAI,CAAE,8DAA8DrI,GAAhE,CAAJ;AACA,iBAAO,KAAP;AACD,SAHD,MAGO;AACL2K,UAAAA,MAAM,CAAC3K,GAAD,CAAN,GAAchD,KAAd;AACA,iBAAO,IAAP;AACD;AACF;AAT0C,KAA3B,CAAlB;AAWD;;AAED,MAAI6a,UAAU,GAAG;AACf3P,IAAAA,GAAG,EAAE,SAASA,GAAT,CAAcyC,MAAd,EAAsB3K,GAAtB,EAA2B;AAC9B,UAAIkI,GAAG,IAAGlI,GAAG,IAAI2K,MAAV,CAAP;AACA,UAAImN,SAAS,GAAGP,cAAc,CAACvX,GAAD,CAAd,IACb,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,CAACa,MAAJ,CAAW,CAAX,MAAkB,GAA7C,IAAoD,EAAEb,GAAG,IAAI2K,MAAM,CAACoN,KAAhB,CADvD;;AAEA,UAAI,CAAC7P,GAAD,IAAQ,CAAC4P,SAAb,EAAwB;AACtB,YAAI9X,GAAG,IAAI2K,MAAM,CAACoN,KAAlB,EAAyB;AAAEN,UAAAA,kBAAkB,CAAC9M,MAAD,EAAS3K,GAAT,CAAlB;AAAkC,SAA7D,MACK;AAAEwX,UAAAA,cAAc,CAAC7M,MAAD,EAAS3K,GAAT,CAAd;AAA8B;AACtC;;AACD,aAAOkI,GAAG,IAAI,CAAC4P,SAAf;AACD;AAVc,GAAjB;AAaA,MAAIE,UAAU,GAAG;AACf/Q,IAAAA,GAAG,EAAE,SAASA,GAAT,CAAc0D,MAAd,EAAsB3K,GAAtB,EAA2B;AAC9B,UAAI,OAAOA,GAAP,KAAe,QAAf,IAA2B,EAAEA,GAAG,IAAI2K,MAAT,CAA/B,EAAiD;AAC/C,YAAI3K,GAAG,IAAI2K,MAAM,CAACoN,KAAlB,EAAyB;AAAEN,UAAAA,kBAAkB,CAAC9M,MAAD,EAAS3K,GAAT,CAAlB;AAAkC,SAA7D,MACK;AAAEwX,UAAAA,cAAc,CAAC7M,MAAD,EAAS3K,GAAT,CAAd;AAA8B;AACtC;;AACD,aAAO2K,MAAM,CAAC3K,GAAD,CAAb;AACD;AAPc,GAAjB;;AAUAsX,EAAAA,SAAS,GAAG,SAASA,SAAT,CAAoBxO,EAApB,EAAwB;AAClC,QAAI4O,QAAJ,EAAc;AACZ;AACA,UAAIvO,OAAO,GAAGL,EAAE,CAACQ,QAAjB;AACA,UAAI2O,QAAQ,GAAG9O,OAAO,CAAC+O,MAAR,IAAkB/O,OAAO,CAAC+O,MAAR,CAAeC,aAAjC,GACXH,UADW,GAEXH,UAFJ;AAGA/O,MAAAA,EAAE,CAACsP,YAAH,GAAkB,IAAIT,KAAJ,CAAU7O,EAAV,EAAcmP,QAAd,CAAlB;AACD,KAPD,MAOO;AACLnP,MAAAA,EAAE,CAACsP,YAAH,GAAkBtP,EAAlB;AACD;AACF,GAXD;AAYD;AAED;;;AAEA,IAAIuP,WAAW,GAAG,IAAItQ,IAAJ,EAAlB;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASuQ,QAAT,CAAmB1a,GAAnB,EAAwB;AACtB2a,EAAAA,SAAS,CAAC3a,GAAD,EAAMya,WAAN,CAAT;;AACAA,EAAAA,WAAW,CAACjQ,KAAZ;AACD;;AAED,SAASmQ,SAAT,CAAoB3a,GAApB,EAAyB4a,IAAzB,EAA+B;AAC7B,MAAIrZ,CAAJ,EAAO8D,IAAP;AACA,MAAIwV,GAAG,GAAGna,KAAK,CAACC,OAAN,CAAcX,GAAd,CAAV;;AACA,MAAK,CAAC6a,GAAD,IAAQ,CAACxb,QAAQ,CAACW,GAAD,CAAlB,IAA4BrB,MAAM,CAACmc,QAAP,CAAgB9a,GAAhB,CAA5B,IAAoDA,GAAG,YAAYwN,KAAvE,EAA8E;AAC5E;AACD;;AACD,MAAIxN,GAAG,CAACmQ,MAAR,EAAgB;AACd,QAAI4K,KAAK,GAAG/a,GAAG,CAACmQ,MAAJ,CAAWG,GAAX,CAAe7D,EAA3B;;AACA,QAAImO,IAAI,CAACtQ,GAAL,CAASyQ,KAAT,CAAJ,EAAqB;AACnB;AACD;;AACDH,IAAAA,IAAI,CAACrQ,GAAL,CAASwQ,KAAT;AACD;;AACD,MAAIF,GAAJ,EAAS;AACPtZ,IAAAA,CAAC,GAAGvB,GAAG,CAACwB,MAAR;;AACA,WAAOD,CAAC,EAAR,EAAY;AAAEoZ,MAAAA,SAAS,CAAC3a,GAAG,CAACuB,CAAD,CAAJ,EAASqZ,IAAT,CAAT;AAA0B;AACzC,GAHD,MAGO;AACLvV,IAAAA,IAAI,GAAG1G,MAAM,CAAC0G,IAAP,CAAYrF,GAAZ,CAAP;AACAuB,IAAAA,CAAC,GAAG8D,IAAI,CAAC7D,MAAT;;AACA,WAAOD,CAAC,EAAR,EAAY;AAAEoZ,MAAAA,SAAS,CAAC3a,GAAG,CAACqF,IAAI,CAAC9D,CAAD,CAAL,CAAJ,EAAeqZ,IAAf,CAAT;AAAgC;AAC/C;AACF;;AAED,IAAII,IAAJ;AACA,IAAIC,OAAJ;;AAEA,IAAI,kBAAyB,YAA7B,EAA2C;AACzC,MAAIC,IAAI,GAAGnT,SAAS,IAAIC,MAAM,CAAC9B,WAA/B;AACA;;AACA,MACEgV,IAAI,IACJA,IAAI,CAACF,IADL,IAEAE,IAAI,CAACD,OAFL,IAGAC,IAAI,CAACC,UAHL,IAIAD,IAAI,CAACE,aALP,EAME;AACAJ,IAAAA,IAAI,GAAG,UAAUvN,GAAV,EAAe;AAAE,aAAOyN,IAAI,CAACF,IAAL,CAAUvN,GAAV,CAAP;AAAwB,KAAhD;;AACAwN,IAAAA,OAAO,GAAG,UAAUrP,IAAV,EAAgByP,QAAhB,EAA0BC,MAA1B,EAAkC;AAC1CJ,MAAAA,IAAI,CAACD,OAAL,CAAarP,IAAb,EAAmByP,QAAnB,EAA6BC,MAA7B;AACAJ,MAAAA,IAAI,CAACC,UAAL,CAAgBE,QAAhB;AACAH,MAAAA,IAAI,CAACC,UAAL,CAAgBG,MAAhB,EAH0C,CAI1C;AACD,KALD;AAMD;AACF;AAED;;;AAEA,IAAIC,cAAc,GAAGlZ,MAAM,CAAC,UAAUuJ,IAAV,EAAgB;AAC1C,MAAI4P,OAAO,GAAG5P,IAAI,CAAC3I,MAAL,CAAY,CAAZ,MAAmB,GAAjC;AACA2I,EAAAA,IAAI,GAAG4P,OAAO,GAAG5P,IAAI,CAAChM,KAAL,CAAW,CAAX,CAAH,GAAmBgM,IAAjC;AACA,MAAI6P,OAAO,GAAG7P,IAAI,CAAC3I,MAAL,CAAY,CAAZ,MAAmB,GAAjC,CAH0C,CAGJ;;AACtC2I,EAAAA,IAAI,GAAG6P,OAAO,GAAG7P,IAAI,CAAChM,KAAL,CAAW,CAAX,CAAH,GAAmBgM,IAAjC;AACA,MAAImM,OAAO,GAAGnM,IAAI,CAAC3I,MAAL,CAAY,CAAZ,MAAmB,GAAjC;AACA2I,EAAAA,IAAI,GAAGmM,OAAO,GAAGnM,IAAI,CAAChM,KAAL,CAAW,CAAX,CAAH,GAAmBgM,IAAjC;AACA,SAAO;AACLA,IAAAA,IAAI,EAAEA,IADD;AAELpG,IAAAA,IAAI,EAAEiW,OAFD;AAGL1D,IAAAA,OAAO,EAAEA,OAHJ;AAILyD,IAAAA,OAAO,EAAEA;AAJJ,GAAP;AAMD,CAb0B,CAA3B;;AAeA,SAASE,eAAT,CAA0BC,GAA1B,EAA+BzQ,EAA/B,EAAmC;AACjC,WAAS0Q,OAAT,GAAoB;AAClB,QAAIC,WAAW,GAAGpY,SAAlB;AAEA,QAAIkY,GAAG,GAAGC,OAAO,CAACD,GAAlB;;AACA,QAAIjb,KAAK,CAACC,OAAN,CAAcgb,GAAd,CAAJ,EAAwB;AACtB,UAAIpM,MAAM,GAAGoM,GAAG,CAAC/b,KAAJ,EAAb;;AACA,WAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgO,MAAM,CAAC/N,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC0W,QAAAA,uBAAuB,CAAC1I,MAAM,CAAChO,CAAD,CAAP,EAAY,IAAZ,EAAkBsa,WAAlB,EAA+B3Q,EAA/B,EAAmC,cAAnC,CAAvB;AACD;AACF,KALD,MAKO;AACL;AACA,aAAO+M,uBAAuB,CAAC0D,GAAD,EAAM,IAAN,EAAYlY,SAAZ,EAAuByH,EAAvB,EAA2B,cAA3B,CAA9B;AACD;AACF;;AACD0Q,EAAAA,OAAO,CAACD,GAAR,GAAcA,GAAd;AACA,SAAOC,OAAP;AACD;;AAED,SAASE,eAAT,CACEC,EADF,EAEEC,KAFF,EAGEzR,GAHF,EAIE0R,SAJF,EAKEC,iBALF,EAMEhR,EANF,EAOE;AACA,MAAIU,IAAJ,EAAU8I,MAAV,EAAkBmD,GAAlB,EAAuBsE,GAAvB,EAA4BC,KAA5B;;AACA,OAAKxQ,IAAL,IAAamQ,EAAb,EAAiB;AACfrH,IAAAA,MAAM,GAAGmD,GAAG,GAAGkE,EAAE,CAACnQ,IAAD,CAAjB;AACAuQ,IAAAA,GAAG,GAAGH,KAAK,CAACpQ,IAAD,CAAX;AACAwQ,IAAAA,KAAK,GAAGb,cAAc,CAAC3P,IAAD,CAAtB;;AACA,QAAI/M,OAAO,CAACgZ,GAAD,CAAX,EAAkB;AAChB,wBAAyB,YAAzB,IAAyCpN,IAAI,CAC3C,iCAAkC2R,KAAK,CAACxQ,IAAxC,GAAgD,UAAhD,GAA6DzL,MAAM,CAAC0X,GAAD,CADxB,EAE3C3M,EAF2C,CAA7C;AAID,KALD,MAKO,IAAIrM,OAAO,CAACsd,GAAD,CAAX,EAAkB;AACvB,UAAItd,OAAO,CAACgZ,GAAG,CAAC8D,GAAL,CAAX,EAAsB;AACpB9D,QAAAA,GAAG,GAAGkE,EAAE,CAACnQ,IAAD,CAAF,GAAW8P,eAAe,CAAC7D,GAAD,EAAM3M,EAAN,CAAhC;AACD;;AACD,UAAIjM,MAAM,CAACmd,KAAK,CAAC5W,IAAP,CAAV,EAAwB;AACtBqS,QAAAA,GAAG,GAAGkE,EAAE,CAACnQ,IAAD,CAAF,GAAWsQ,iBAAiB,CAACE,KAAK,CAACxQ,IAAP,EAAaiM,GAAb,EAAkBuE,KAAK,CAACrE,OAAxB,CAAlC;AACD;;AACDxN,MAAAA,GAAG,CAAC6R,KAAK,CAACxQ,IAAP,EAAaiM,GAAb,EAAkBuE,KAAK,CAACrE,OAAxB,EAAiCqE,KAAK,CAACZ,OAAvC,EAAgDY,KAAK,CAACC,MAAtD,CAAH;AACD,KARM,MAQA,IAAIxE,GAAG,KAAKsE,GAAZ,EAAiB;AACtBA,MAAAA,GAAG,CAACR,GAAJ,GAAU9D,GAAV;AACAkE,MAAAA,EAAE,CAACnQ,IAAD,CAAF,GAAWuQ,GAAX;AACD;AACF;;AACD,OAAKvQ,IAAL,IAAaoQ,KAAb,EAAoB;AAClB,QAAInd,OAAO,CAACkd,EAAE,CAACnQ,IAAD,CAAH,CAAX,EAAuB;AACrBwQ,MAAAA,KAAK,GAAGb,cAAc,CAAC3P,IAAD,CAAtB;AACAqQ,MAAAA,SAAS,CAACG,KAAK,CAACxQ,IAAP,EAAaoQ,KAAK,CAACpQ,IAAD,CAAlB,EAA0BwQ,KAAK,CAACrE,OAAhC,CAAT;AACD;AACF;AACF;AAED;;;AAEA,SAASuE,cAAT,CAAyBpV,GAAzB,EAA8BqV,OAA9B,EAAuChJ,IAAvC,EAA6C;AAC3C,MAAIrM,GAAG,YAAYsG,KAAnB,EAA0B;AACxBtG,IAAAA,GAAG,GAAGA,GAAG,CAACwG,IAAJ,CAAS6F,IAAT,KAAkBrM,GAAG,CAACwG,IAAJ,CAAS6F,IAAT,GAAgB,EAAlC,CAAN;AACD;;AACD,MAAIqI,OAAJ;AACA,MAAIY,OAAO,GAAGtV,GAAG,CAACqV,OAAD,CAAjB;;AAEA,WAASE,WAAT,GAAwB;AACtBlJ,IAAAA,IAAI,CAAC7P,KAAL,CAAW,IAAX,EAAiBD,SAAjB,EADsB,CAEtB;AACA;;AACA7B,IAAAA,MAAM,CAACga,OAAO,CAACD,GAAT,EAAcc,WAAd,CAAN;AACD;;AAED,MAAI5d,OAAO,CAAC2d,OAAD,CAAX,EAAsB;AACpB;AACAZ,IAAAA,OAAO,GAAGF,eAAe,CAAC,CAACe,WAAD,CAAD,CAAzB;AACD,GAHD,MAGO;AACL;AACA,QAAIzd,KAAK,CAACwd,OAAO,CAACb,GAAT,CAAL,IAAsB1c,MAAM,CAACud,OAAO,CAACE,MAAT,CAAhC,EAAkD;AAChD;AACAd,MAAAA,OAAO,GAAGY,OAAV;AACAZ,MAAAA,OAAO,CAACD,GAAR,CAAYtP,IAAZ,CAAiBoQ,WAAjB;AACD,KAJD,MAIO;AACL;AACAb,MAAAA,OAAO,GAAGF,eAAe,CAAC,CAACc,OAAD,EAAUC,WAAV,CAAD,CAAzB;AACD;AACF;;AAEDb,EAAAA,OAAO,CAACc,MAAR,GAAiB,IAAjB;AACAxV,EAAAA,GAAG,CAACqV,OAAD,CAAH,GAAeX,OAAf;AACD;AAED;;;AAEA,SAASe,yBAAT,CACEjP,IADF,EAEE5D,IAFF,EAGE2D,GAHF,EAIE;AACA;AACA;AACA;AACA,MAAI8H,WAAW,GAAGzL,IAAI,CAACyB,OAAL,CAAaqI,KAA/B;;AACA,MAAI/U,OAAO,CAAC0W,WAAD,CAAX,EAA0B;AACxB;AACD;;AACD,MAAIjR,GAAG,GAAG,EAAV;AACA,MAAIsY,KAAK,GAAGlP,IAAI,CAACkP,KAAjB;AACA,MAAIhJ,KAAK,GAAGlG,IAAI,CAACkG,KAAjB;;AACA,MAAI5U,KAAK,CAAC4d,KAAD,CAAL,IAAgB5d,KAAK,CAAC4U,KAAD,CAAzB,EAAkC;AAChC,SAAK,IAAIxR,GAAT,IAAgBmT,WAAhB,EAA6B;AAC3B,UAAIsH,MAAM,GAAG1Z,SAAS,CAACf,GAAD,CAAtB;;AACA,UAAI,kBAAyB,YAA7B,EAA2C;AACzC,YAAI0a,cAAc,GAAG1a,GAAG,CAACX,WAAJ,EAArB;;AACA,YACEW,GAAG,KAAK0a,cAAR,IACAF,KADA,IACSza,MAAM,CAACya,KAAD,EAAQE,cAAR,CAFjB,EAGE;AACApS,UAAAA,GAAG,CACD,YAAYoS,cAAZ,GAA6B,4BAA7B,GACClS,mBAAmB,CAAC6C,GAAG,IAAI3D,IAAR,CADpB,GACqC,iCADrC,GAEA,KAFA,GAEQ1H,GAFR,GAEc,MAFd,GAGA,gEAHA,GAIA,mEAJA,GAKA,uCALA,GAK0Cya,MAL1C,GAKmD,kBALnD,GAKwEza,GALxE,GAK8E,KAN7E,CAAH;AAQD;AACF;;AACD2a,MAAAA,SAAS,CAACzY,GAAD,EAAMsP,KAAN,EAAaxR,GAAb,EAAkBya,MAAlB,EAA0B,IAA1B,CAAT,IACAE,SAAS,CAACzY,GAAD,EAAMsY,KAAN,EAAaxa,GAAb,EAAkBya,MAAlB,EAA0B,KAA1B,CADT;AAED;AACF;;AACD,SAAOvY,GAAP;AACD;;AAED,SAASyY,SAAT,CACEzY,GADF,EAEE0Y,IAFF,EAGE5a,GAHF,EAIEya,MAJF,EAKEI,QALF,EAME;AACA,MAAIje,KAAK,CAACge,IAAD,CAAT,EAAiB;AACf,QAAI7a,MAAM,CAAC6a,IAAD,EAAO5a,GAAP,CAAV,EAAuB;AACrBkC,MAAAA,GAAG,CAAClC,GAAD,CAAH,GAAW4a,IAAI,CAAC5a,GAAD,CAAf;;AACA,UAAI,CAAC6a,QAAL,EAAe;AACb,eAAOD,IAAI,CAAC5a,GAAD,CAAX;AACD;;AACD,aAAO,IAAP;AACD,KAND,MAMO,IAAID,MAAM,CAAC6a,IAAD,EAAOH,MAAP,CAAV,EAA0B;AAC/BvY,MAAAA,GAAG,CAAClC,GAAD,CAAH,GAAW4a,IAAI,CAACH,MAAD,CAAf;;AACA,UAAI,CAACI,QAAL,EAAe;AACb,eAAOD,IAAI,CAACH,MAAD,CAAX;AACD;;AACD,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD;AAED;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AACA,SAASK,uBAAT,CAAkCvP,QAAlC,EAA4C;AAC1C,OAAK,IAAIpM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoM,QAAQ,CAACnM,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,QAAIb,KAAK,CAACC,OAAN,CAAcgN,QAAQ,CAACpM,CAAD,CAAtB,CAAJ,EAAgC;AAC9B,aAAOb,KAAK,CAAClB,SAAN,CAAgB4T,MAAhB,CAAuB1P,KAAvB,CAA6B,EAA7B,EAAiCiK,QAAjC,CAAP;AACD;AACF;;AACD,SAAOA,QAAP;AACD,EAED;AACA;AACA;AACA;;;AACA,SAASwP,iBAAT,CAA4BxP,QAA5B,EAAsC;AACpC,SAAOxO,WAAW,CAACwO,QAAD,CAAX,GACH,CAACyB,eAAe,CAACzB,QAAD,CAAhB,CADG,GAEHjN,KAAK,CAACC,OAAN,CAAcgN,QAAd,IACEyP,sBAAsB,CAACzP,QAAD,CADxB,GAEE5O,SAJN;AAKD;;AAED,SAASse,UAAT,CAAqBlO,IAArB,EAA2B;AACzB,SAAOnQ,KAAK,CAACmQ,IAAD,CAAL,IAAenQ,KAAK,CAACmQ,IAAI,CAACvB,IAAN,CAApB,IAAmC1O,OAAO,CAACiQ,IAAI,CAACT,SAAN,CAAjD;AACD;;AAED,SAAS0O,sBAAT,CAAiCzP,QAAjC,EAA2C2P,WAA3C,EAAwD;AACtD,MAAIhZ,GAAG,GAAG,EAAV;AACA,MAAI/C,CAAJ,EAAOuB,CAAP,EAAUya,SAAV,EAAqBnR,IAArB;;AACA,OAAK7K,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGoM,QAAQ,CAACnM,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCuB,IAAAA,CAAC,GAAG6K,QAAQ,CAACpM,CAAD,CAAZ;;AACA,QAAI1C,OAAO,CAACiE,CAAD,CAAP,IAAc,OAAOA,CAAP,KAAa,SAA/B,EAA0C;AAAE;AAAU;;AACtDya,IAAAA,SAAS,GAAGjZ,GAAG,CAAC9C,MAAJ,GAAa,CAAzB;AACA4K,IAAAA,IAAI,GAAG9H,GAAG,CAACiZ,SAAD,CAAV,CAJoC,CAKpC;;AACA,QAAI7c,KAAK,CAACC,OAAN,CAAcmC,CAAd,CAAJ,EAAsB;AACpB,UAAIA,CAAC,CAACtB,MAAF,GAAW,CAAf,EAAkB;AAChBsB,QAAAA,CAAC,GAAGsa,sBAAsB,CAACta,CAAD,EAAK,CAACwa,WAAW,IAAI,EAAhB,IAAsB,GAAtB,GAA4B/b,CAAjC,CAA1B,CADgB,CAEhB;;AACA,YAAI8b,UAAU,CAACva,CAAC,CAAC,CAAD,CAAF,CAAV,IAAoBua,UAAU,CAACjR,IAAD,CAAlC,EAA0C;AACxC9H,UAAAA,GAAG,CAACiZ,SAAD,CAAH,GAAiBnO,eAAe,CAAChD,IAAI,CAACwB,IAAL,GAAa9K,CAAC,CAAC,CAAD,CAAF,CAAO8K,IAApB,CAAhC;AACA9K,UAAAA,CAAC,CAAC0a,KAAF;AACD;;AACDlZ,QAAAA,GAAG,CAAC+H,IAAJ,CAAS3I,KAAT,CAAeY,GAAf,EAAoBxB,CAApB;AACD;AACF,KAVD,MAUO,IAAI3D,WAAW,CAAC2D,CAAD,CAAf,EAAoB;AACzB,UAAIua,UAAU,CAACjR,IAAD,CAAd,EAAsB;AACpB;AACA;AACA;AACA9H,QAAAA,GAAG,CAACiZ,SAAD,CAAH,GAAiBnO,eAAe,CAAChD,IAAI,CAACwB,IAAL,GAAY9K,CAAb,CAAhC;AACD,OALD,MAKO,IAAIA,CAAC,KAAK,EAAV,EAAc;AACnB;AACAwB,QAAAA,GAAG,CAAC+H,IAAJ,CAAS+C,eAAe,CAACtM,CAAD,CAAxB;AACD;AACF,KAVM,MAUA;AACL,UAAIua,UAAU,CAACva,CAAD,CAAV,IAAiBua,UAAU,CAACjR,IAAD,CAA/B,EAAuC;AACrC;AACA9H,QAAAA,GAAG,CAACiZ,SAAD,CAAH,GAAiBnO,eAAe,CAAChD,IAAI,CAACwB,IAAL,GAAY9K,CAAC,CAAC8K,IAAf,CAAhC;AACD,OAHD,MAGO;AACL;AACA,YAAI3O,MAAM,CAAC0O,QAAQ,CAAC8P,QAAV,CAAN,IACFze,KAAK,CAAC8D,CAAC,CAAC2K,GAAH,CADH,IAEF5O,OAAO,CAACiE,CAAC,CAACV,GAAH,CAFL,IAGFpD,KAAK,CAACse,WAAD,CAHP,EAGsB;AACpBxa,UAAAA,CAAC,CAACV,GAAF,GAAQ,YAAYkb,WAAZ,GAA0B,GAA1B,GAAgC/b,CAAhC,GAAoC,IAA5C;AACD;;AACD+C,QAAAA,GAAG,CAAC+H,IAAJ,CAASvJ,CAAT;AACD;AACF;AACF;;AACD,SAAOwB,GAAP;AACD;AAED;;;AAEA,SAASoZ,WAAT,CAAsBxS,EAAtB,EAA0B;AACxB,MAAI8I,OAAO,GAAG9I,EAAE,CAACQ,QAAH,CAAYsI,OAA1B;;AACA,MAAIA,OAAJ,EAAa;AACX9I,IAAAA,EAAE,CAACyS,SAAH,GAAe,OAAO3J,OAAP,KAAmB,UAAnB,GACXA,OAAO,CAACrU,IAAR,CAAauL,EAAb,CADW,GAEX8I,OAFJ;AAGD;AACF;;AAED,SAAS4J,cAAT,CAAyB1S,EAAzB,EAA6B;AAC3B,MAAI+E,MAAM,GAAG4N,aAAa,CAAC3S,EAAE,CAACQ,QAAH,CAAYoI,MAAb,EAAqB5I,EAArB,CAA1B;;AACA,MAAI+E,MAAJ,EAAY;AACVS,IAAAA,eAAe,CAAC,KAAD,CAAf;AACA/R,IAAAA,MAAM,CAAC0G,IAAP,CAAY4K,MAAZ,EAAoBN,OAApB,CAA4B,UAAUvN,GAAV,EAAe;AACzC;AACA,UAAI,kBAAyB,YAA7B,EAA2C;AACzC4O,QAAAA,iBAAiB,CAAC9F,EAAD,EAAK9I,GAAL,EAAU6N,MAAM,CAAC7N,GAAD,CAAhB,EAAuB,YAAY;AAClDqI,UAAAA,IAAI,CACF,yEACA,0DADA,GAEA,6BAFA,GAEgCrI,GAFhC,GAEsC,IAHpC,EAIF8I,EAJE,CAAJ;AAMD,SAPgB,CAAjB;AAQD,OATD,MASO;AACL8F,QAAAA,iBAAiB,CAAC9F,EAAD,EAAK9I,GAAL,EAAU6N,MAAM,CAAC7N,GAAD,CAAhB,CAAjB;AACD;AACF,KAdD;AAeAsO,IAAAA,eAAe,CAAC,IAAD,CAAf;AACD;AACF;;AAED,SAASmN,aAAT,CAAwB/J,MAAxB,EAAgC5I,EAAhC,EAAoC;AAClC,MAAI4I,MAAJ,EAAY;AACV;AACA,QAAI7D,MAAM,GAAGtR,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAb;AACA,QAAIiE,IAAI,GAAG0E,SAAS,GAChBE,OAAO,CAACC,OAAR,CAAgB4J,MAAhB,CADgB,GAEhBnV,MAAM,CAAC0G,IAAP,CAAYyO,MAAZ,CAFJ;;AAIA,SAAK,IAAIvS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8D,IAAI,CAAC7D,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,UAAIa,GAAG,GAAGiD,IAAI,CAAC9D,CAAD,CAAd,CADoC,CAEpC;;AACA,UAAIa,GAAG,KAAK,QAAZ,EAAsB;AAAE;AAAU;;AAClC,UAAI0b,UAAU,GAAGhK,MAAM,CAAC1R,GAAD,CAAN,CAAYqQ,IAA7B;AACA,UAAIhL,MAAM,GAAGyD,EAAb;;AACA,aAAOzD,MAAP,EAAe;AACb,YAAIA,MAAM,CAACkW,SAAP,IAAoBxb,MAAM,CAACsF,MAAM,CAACkW,SAAR,EAAmBG,UAAnB,CAA9B,EAA8D;AAC5D7N,UAAAA,MAAM,CAAC7N,GAAD,CAAN,GAAcqF,MAAM,CAACkW,SAAP,CAAiBG,UAAjB,CAAd;AACA;AACD;;AACDrW,QAAAA,MAAM,GAAGA,MAAM,CAACwE,OAAhB;AACD;;AACD,UAAI,CAACxE,MAAL,EAAa;AACX,YAAI,aAAaqM,MAAM,CAAC1R,GAAD,CAAvB,EAA8B;AAC5B,cAAI2b,cAAc,GAAGjK,MAAM,CAAC1R,GAAD,CAAN,CAAY6T,OAAjC;AACAhG,UAAAA,MAAM,CAAC7N,GAAD,CAAN,GAAc,OAAO2b,cAAP,KAA0B,UAA1B,GACVA,cAAc,CAACpe,IAAf,CAAoBuL,EAApB,CADU,GAEV6S,cAFJ;AAGD,SALD,MAKO,IAAI,kBAAyB,YAA7B,EAA2C;AAChDtT,UAAAA,IAAI,CAAE,iBAAiBrI,GAAjB,GAAuB,cAAzB,EAA0C8I,EAA1C,CAAJ;AACD;AACF;AACF;;AACD,WAAO+E,MAAP;AACD;AACF;AAED;;AAIA;AACA;AACA;;;AACA,SAAS+N,YAAT,CACErQ,QADF,EAEEG,OAFF,EAGE;AACA,MAAI,CAACH,QAAD,IAAa,CAACA,QAAQ,CAACnM,MAA3B,EAAmC;AACjC,WAAO,EAAP;AACD;;AACD,MAAIyc,KAAK,GAAG,EAAZ;;AACA,OAAK,IAAI1c,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAGmK,QAAQ,CAACnM,MAA7B,EAAqCD,CAAC,GAAGiC,CAAzC,EAA4CjC,CAAC,EAA7C,EAAiD;AAC/C,QAAIyN,KAAK,GAAGrB,QAAQ,CAACpM,CAAD,CAApB;AACA,QAAImM,IAAI,GAAGsB,KAAK,CAACtB,IAAjB,CAF+C,CAG/C;;AACA,QAAIA,IAAI,IAAIA,IAAI,CAACkP,KAAb,IAAsBlP,IAAI,CAACkP,KAAL,CAAWsB,IAArC,EAA2C;AACzC,aAAOxQ,IAAI,CAACkP,KAAL,CAAWsB,IAAlB;AACD,KAN8C,CAO/C;AACA;;;AACA,QAAI,CAAClP,KAAK,CAAClB,OAAN,KAAkBA,OAAlB,IAA6BkB,KAAK,CAACd,SAAN,KAAoBJ,OAAlD,KACFJ,IADE,IACMA,IAAI,CAACwQ,IAAL,IAAa,IADvB,EAEE;AACA,UAAItS,IAAI,GAAG8B,IAAI,CAACwQ,IAAhB;AACA,UAAIA,IAAI,GAAID,KAAK,CAACrS,IAAD,CAAL,KAAgBqS,KAAK,CAACrS,IAAD,CAAL,GAAc,EAA9B,CAAZ;;AACA,UAAIoD,KAAK,CAACvB,GAAN,KAAc,UAAlB,EAA8B;AAC5ByQ,QAAAA,IAAI,CAAC7R,IAAL,CAAU3I,KAAV,CAAgBwa,IAAhB,EAAsBlP,KAAK,CAACrB,QAAN,IAAkB,EAAxC;AACD,OAFD,MAEO;AACLuQ,QAAAA,IAAI,CAAC7R,IAAL,CAAU2C,KAAV;AACD;AACF,KAVD,MAUO;AACL,OAACiP,KAAK,CAAChI,OAAN,KAAkBgI,KAAK,CAAChI,OAAN,GAAgB,EAAlC,CAAD,EAAwC5J,IAAxC,CAA6C2C,KAA7C;AACD;AACF,GA3BD,CA4BA;;;AACA,OAAK,IAAImP,MAAT,IAAmBF,KAAnB,EAA0B;AACxB,QAAIA,KAAK,CAACE,MAAD,CAAL,CAAcnZ,KAAd,CAAoBoZ,YAApB,CAAJ,EAAuC;AACrC,aAAOH,KAAK,CAACE,MAAD,CAAZ;AACD;AACF;;AACD,SAAOF,KAAP;AACD;;AAED,SAASG,YAAT,CAAuBjP,IAAvB,EAA6B;AAC3B,SAAQA,IAAI,CAACT,SAAL,IAAkB,CAACS,IAAI,CAACnB,YAAzB,IAA0CmB,IAAI,CAACvB,IAAL,KAAc,GAA/D;AACD;AAED;;;AAEA,SAASyQ,oBAAT,CACEJ,KADF,EAEEK,WAFF,EAGEC,SAHF,EAIE;AACA,MAAIja,GAAJ;AACA,MAAIka,cAAc,GAAG7f,MAAM,CAAC0G,IAAP,CAAYiZ,WAAZ,EAAyB9c,MAAzB,GAAkC,CAAvD;AACA,MAAIid,QAAQ,GAAGR,KAAK,GAAG,CAAC,CAACA,KAAK,CAACS,OAAX,GAAqB,CAACF,cAA1C;AACA,MAAIpc,GAAG,GAAG6b,KAAK,IAAIA,KAAK,CAACU,IAAzB;;AACA,MAAI,CAACV,KAAL,EAAY;AACV3Z,IAAAA,GAAG,GAAG,EAAN;AACD,GAFD,MAEO,IAAI2Z,KAAK,CAACW,WAAV,EAAuB;AAC5B;AACA,WAAOX,KAAK,CAACW,WAAb;AACD,GAHM,MAGA,IACLH,QAAQ,IACRF,SADA,IAEAA,SAAS,KAAK7f,WAFd,IAGA0D,GAAG,KAAKmc,SAAS,CAACI,IAHlB,IAIA,CAACH,cAJD,IAKA,CAACD,SAAS,CAACM,UANN,EAOL;AACA;AACA;AACA,WAAON,SAAP;AACD,GAXM,MAWA;AACLja,IAAAA,GAAG,GAAG,EAAN;;AACA,SAAK,IAAIqP,KAAT,IAAkBsK,KAAlB,EAAyB;AACvB,UAAIA,KAAK,CAACtK,KAAD,CAAL,IAAgBA,KAAK,CAAC,CAAD,CAAL,KAAa,GAAjC,EAAsC;AACpCrP,QAAAA,GAAG,CAACqP,KAAD,CAAH,GAAamL,mBAAmB,CAACR,WAAD,EAAc3K,KAAd,EAAqBsK,KAAK,CAACtK,KAAD,CAA1B,CAAhC;AACD;AACF;AACF,GA5BD,CA6BA;;;AACA,OAAK,IAAIoL,KAAT,IAAkBT,WAAlB,EAA+B;AAC7B,QAAI,EAAES,KAAK,IAAIza,GAAX,CAAJ,EAAqB;AACnBA,MAAAA,GAAG,CAACya,KAAD,CAAH,GAAaC,eAAe,CAACV,WAAD,EAAcS,KAAd,CAA5B;AACD;AACF,GAlCD,CAmCA;AACA;;;AACA,MAAId,KAAK,IAAItf,MAAM,CAAC2S,YAAP,CAAoB2M,KAApB,CAAb,EAAyC;AACtCA,IAAAA,KAAD,CAAQW,WAAR,GAAsBta,GAAtB;AACD;;AACD4C,EAAAA,GAAG,CAAC5C,GAAD,EAAM,SAAN,EAAiBma,QAAjB,CAAH;AACAvX,EAAAA,GAAG,CAAC5C,GAAD,EAAM,MAAN,EAAclC,GAAd,CAAH;AACA8E,EAAAA,GAAG,CAAC5C,GAAD,EAAM,YAAN,EAAoBka,cAApB,CAAH;AACA,SAAOla,GAAP;AACD;;AAED,SAASwa,mBAAT,CAA6BR,WAA7B,EAA0Clc,GAA1C,EAA+CE,EAA/C,EAAmD;AACjD,MAAIgS,UAAU,GAAG,YAAY;AAC3B,QAAIhQ,GAAG,GAAGb,SAAS,CAACjC,MAAV,GAAmBc,EAAE,CAACoB,KAAH,CAAS,IAAT,EAAeD,SAAf,CAAnB,GAA+CnB,EAAE,CAAC,EAAD,CAA3D;AACAgC,IAAAA,GAAG,GAAGA,GAAG,IAAI,OAAOA,GAAP,KAAe,QAAtB,IAAkC,CAAC5D,KAAK,CAACC,OAAN,CAAc2D,GAAd,CAAnC,GACF,CAACA,GAAD,CADE,CACI;AADJ,MAEF6Y,iBAAiB,CAAC7Y,GAAD,CAFrB;AAGA,WAAOA,GAAG,KACRA,GAAG,CAAC9C,MAAJ,KAAe,CAAf,IACC8C,GAAG,CAAC9C,MAAJ,KAAe,CAAf,IAAoB8C,GAAG,CAAC,CAAD,CAAH,CAAOoK,SAFpB,CAE+B;AAF/B,KAAH,GAGH3P,SAHG,GAIHuF,GAJJ;AAKD,GAVD,CADiD,CAYjD;AACA;AACA;;;AACA,MAAIhC,EAAE,CAAC2c,KAAP,EAAc;AACZtgB,IAAAA,MAAM,CAACyI,cAAP,CAAsBkX,WAAtB,EAAmClc,GAAnC,EAAwC;AACtCiH,MAAAA,GAAG,EAAEiL,UADiC;AAEtCnN,MAAAA,UAAU,EAAE,IAF0B;AAGtCG,MAAAA,YAAY,EAAE;AAHwB,KAAxC;AAKD;;AACD,SAAOgN,UAAP;AACD;;AAED,SAAS0K,eAAT,CAAyBf,KAAzB,EAAgC7b,GAAhC,EAAqC;AACnC,SAAO,YAAY;AAAE,WAAO6b,KAAK,CAAC7b,GAAD,CAAZ;AAAoB,GAAzC;AACD;AAED;;AAEA;AACA;AACA;;;AACA,SAAS8c,UAAT,CACElf,GADF,EAEEsa,MAFF,EAGE;AACA,MAAIrW,GAAJ,EAAS1C,CAAT,EAAYiC,CAAZ,EAAe6B,IAAf,EAAqBjD,GAArB;;AACA,MAAI1B,KAAK,CAACC,OAAN,CAAcX,GAAd,KAAsB,OAAOA,GAAP,KAAe,QAAzC,EAAmD;AACjDiE,IAAAA,GAAG,GAAG,IAAIvD,KAAJ,CAAUV,GAAG,CAACwB,MAAd,CAAN;;AACA,SAAKD,CAAC,GAAG,CAAJ,EAAOiC,CAAC,GAAGxD,GAAG,CAACwB,MAApB,EAA4BD,CAAC,GAAGiC,CAAhC,EAAmCjC,CAAC,EAApC,EAAwC;AACtC0C,MAAAA,GAAG,CAAC1C,CAAD,CAAH,GAAS+Y,MAAM,CAACta,GAAG,CAACuB,CAAD,CAAJ,EAASA,CAAT,CAAf;AACD;AACF,GALD,MAKO,IAAI,OAAOvB,GAAP,KAAe,QAAnB,EAA6B;AAClCiE,IAAAA,GAAG,GAAG,IAAIvD,KAAJ,CAAUV,GAAV,CAAN;;AACA,SAAKuB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGvB,GAAhB,EAAqBuB,CAAC,EAAtB,EAA0B;AACxB0C,MAAAA,GAAG,CAAC1C,CAAD,CAAH,GAAS+Y,MAAM,CAAC/Y,CAAC,GAAG,CAAL,EAAQA,CAAR,CAAf;AACD;AACF,GALM,MAKA,IAAIlC,QAAQ,CAACW,GAAD,CAAZ,EAAmB;AACxB,QAAI+J,SAAS,IAAI/J,GAAG,CAACgK,MAAM,CAACmV,QAAR,CAApB,EAAuC;AACrClb,MAAAA,GAAG,GAAG,EAAN;AACA,UAAIkb,QAAQ,GAAGnf,GAAG,CAACgK,MAAM,CAACmV,QAAR,CAAH,EAAf;AACA,UAAIlP,MAAM,GAAGkP,QAAQ,CAACC,IAAT,EAAb;;AACA,aAAO,CAACnP,MAAM,CAACoP,IAAf,EAAqB;AACnBpb,QAAAA,GAAG,CAACoI,IAAJ,CAASiO,MAAM,CAACrK,MAAM,CAAC7Q,KAAR,EAAe6E,GAAG,CAACzC,MAAnB,CAAf;AACAyO,QAAAA,MAAM,GAAGkP,QAAQ,CAACC,IAAT,EAAT;AACD;AACF,KARD,MAQO;AACL/Z,MAAAA,IAAI,GAAG1G,MAAM,CAAC0G,IAAP,CAAYrF,GAAZ,CAAP;AACAiE,MAAAA,GAAG,GAAG,IAAIvD,KAAJ,CAAU2E,IAAI,CAAC7D,MAAf,CAAN;;AACA,WAAKD,CAAC,GAAG,CAAJ,EAAOiC,CAAC,GAAG6B,IAAI,CAAC7D,MAArB,EAA6BD,CAAC,GAAGiC,CAAjC,EAAoCjC,CAAC,EAArC,EAAyC;AACvCa,QAAAA,GAAG,GAAGiD,IAAI,CAAC9D,CAAD,CAAV;AACA0C,QAAAA,GAAG,CAAC1C,CAAD,CAAH,GAAS+Y,MAAM,CAACta,GAAG,CAACoC,GAAD,CAAJ,EAAWA,GAAX,EAAgBb,CAAhB,CAAf;AACD;AACF;AACF;;AACD,MAAI,CAACvC,KAAK,CAACiF,GAAD,CAAV,EAAiB;AACfA,IAAAA,GAAG,GAAG,EAAN;AACD;;AACAA,EAAAA,GAAD,CAAMwZ,QAAN,GAAiB,IAAjB;AACA,SAAOxZ,GAAP;AACD;AAED;;AAEA;AACA;AACA;;;AACA,SAASqb,UAAT,CACE1T,IADF,EAEE2T,QAFF,EAGE3L,KAHF,EAIE4L,UAJF,EAKE;AACA,MAAIC,YAAY,GAAG,KAAKC,YAAL,CAAkB9T,IAAlB,CAAnB;AACA,MAAI+T,KAAJ;;AACA,MAAIF,YAAJ,EAAkB;AAAE;AAClB7L,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;;AACA,QAAI4L,UAAJ,EAAgB;AACd,UAAI,kBAAyB,YAAzB,IAAyC,CAACngB,QAAQ,CAACmgB,UAAD,CAAtD,EAAoE;AAClE/U,QAAAA,IAAI,CACF,gDADE,EAEF,IAFE,CAAJ;AAID;;AACDmJ,MAAAA,KAAK,GAAG1P,MAAM,CAACA,MAAM,CAAC,EAAD,EAAKsb,UAAL,CAAP,EAAyB5L,KAAzB,CAAd;AACD;;AACD+L,IAAAA,KAAK,GAAGF,YAAY,CAAC7L,KAAD,CAAZ,IAAuB2L,QAA/B;AACD,GAZD,MAYO;AACLI,IAAAA,KAAK,GAAG,KAAKC,MAAL,CAAYhU,IAAZ,KAAqB2T,QAA7B;AACD;;AAED,MAAIxS,MAAM,GAAG6G,KAAK,IAAIA,KAAK,CAACsK,IAA5B;;AACA,MAAInR,MAAJ,EAAY;AACV,WAAO,KAAK8S,cAAL,CAAoB,UAApB,EAAgC;AAAE3B,MAAAA,IAAI,EAAEnR;AAAR,KAAhC,EAAkD4S,KAAlD,CAAP;AACD,GAFD,MAEO;AACL,WAAOA,KAAP;AACD;AACF;AAED;;AAEA;AACA;AACA;;;AACA,SAASG,aAAT,CAAwBrT,EAAxB,EAA4B;AAC1B,SAAOwI,YAAY,CAAC,KAAKvJ,QAAN,EAAgB,SAAhB,EAA2Be,EAA3B,EAA+B,IAA/B,CAAZ,IAAoD/H,QAA3D;AACD;AAED;;;AAEA,SAASqb,aAAT,CAAwBC,MAAxB,EAAgCC,MAAhC,EAAwC;AACtC,MAAIvf,KAAK,CAACC,OAAN,CAAcqf,MAAd,CAAJ,EAA2B;AACzB,WAAOA,MAAM,CAAChe,OAAP,CAAeie,MAAf,MAA2B,CAAC,CAAnC;AACD,GAFD,MAEO;AACL,WAAOD,MAAM,KAAKC,MAAlB;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,aAAT,CACEC,YADF,EAEE/d,GAFF,EAGEge,cAHF,EAIEC,YAJF,EAKEC,cALF,EAME;AACA,MAAIC,aAAa,GAAG1a,MAAM,CAACS,QAAP,CAAgBlE,GAAhB,KAAwBge,cAA5C;;AACA,MAAIE,cAAc,IAAID,YAAlB,IAAkC,CAACxa,MAAM,CAACS,QAAP,CAAgBlE,GAAhB,CAAvC,EAA6D;AAC3D,WAAO2d,aAAa,CAACO,cAAD,EAAiBD,YAAjB,CAApB;AACD,GAFD,MAEO,IAAIE,aAAJ,EAAmB;AACxB,WAAOR,aAAa,CAACQ,aAAD,EAAgBJ,YAAhB,CAApB;AACD,GAFM,MAEA,IAAIE,YAAJ,EAAkB;AACvB,WAAOld,SAAS,CAACkd,YAAD,CAAT,KAA4Bje,GAAnC;AACD;AACF;AAED;;AAEA;AACA;AACA;;;AACA,SAASoe,eAAT,CACE9S,IADF,EAEED,GAFF,EAGErO,KAHF,EAIEqhB,MAJF,EAKEC,MALF,EAME;AACA,MAAIthB,KAAJ,EAAW;AACT,QAAI,CAACC,QAAQ,CAACD,KAAD,CAAb,EAAsB;AACpB,wBAAyB,YAAzB,IAAyCqL,IAAI,CAC3C,0DAD2C,EAE3C,IAF2C,CAA7C;AAID,KALD,MAKO;AACL,UAAI/J,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAJ,EAA0B;AACxBA,QAAAA,KAAK,GAAGiF,QAAQ,CAACjF,KAAD,CAAhB;AACD;;AACD,UAAI4d,IAAJ;;AACA,UAAI2D,IAAI,GAAG,UAAWve,GAAX,EAAiB;AAC1B,YACEA,GAAG,KAAK,OAAR,IACAA,GAAG,KAAK,OADR,IAEAT,mBAAmB,CAACS,GAAD,CAHrB,EAIE;AACA4a,UAAAA,IAAI,GAAGtP,IAAP;AACD,SAND,MAMO;AACL,cAAIgG,IAAI,GAAGhG,IAAI,CAACkP,KAAL,IAAclP,IAAI,CAACkP,KAAL,CAAWlJ,IAApC;AACAsJ,UAAAA,IAAI,GAAGyD,MAAM,IAAI5a,MAAM,CAACe,WAAP,CAAmB6G,GAAnB,EAAwBiG,IAAxB,EAA8BtR,GAA9B,CAAV,GACHsL,IAAI,CAACkT,QAAL,KAAkBlT,IAAI,CAACkT,QAAL,GAAgB,EAAlC,CADG,GAEHlT,IAAI,CAACkP,KAAL,KAAelP,IAAI,CAACkP,KAAL,GAAa,EAA5B,CAFJ;AAGD;;AACD,YAAIiE,YAAY,GAAGle,QAAQ,CAACP,GAAD,CAA3B;AACA,YAAI0e,aAAa,GAAG3d,SAAS,CAACf,GAAD,CAA7B;;AACA,YAAI,EAAEye,YAAY,IAAI7D,IAAlB,KAA2B,EAAE8D,aAAa,IAAI9D,IAAnB,CAA/B,EAAyD;AACvDA,UAAAA,IAAI,CAAC5a,GAAD,CAAJ,GAAYhD,KAAK,CAACgD,GAAD,CAAjB;;AAEA,cAAIse,MAAJ,EAAY;AACV,gBAAI3E,EAAE,GAAGrO,IAAI,CAACqO,EAAL,KAAYrO,IAAI,CAACqO,EAAL,GAAU,EAAtB,CAAT;;AACAA,YAAAA,EAAE,CAAE,YAAY3Z,GAAd,CAAF,GAAwB,UAAU2e,MAAV,EAAkB;AACxC3hB,cAAAA,KAAK,CAACgD,GAAD,CAAL,GAAa2e,MAAb;AACD,aAFD;AAGD;AACF;AACF,OAzBD;;AA2BA,WAAK,IAAI3e,GAAT,IAAgBhD,KAAhB,EAAuBuhB,IAAI,CAAEve,GAAF,CAAJ;AACxB;AACF;;AACD,SAAOsL,IAAP;AACD;AAED;;AAEA;AACA;AACA;;;AACA,SAASsT,YAAT,CACEjf,KADF,EAEEkf,OAFF,EAGE;AACA,MAAI5e,MAAM,GAAG,KAAK6e,YAAL,KAAsB,KAAKA,YAAL,GAAoB,EAA1C,CAAb;AACA,MAAIhV,IAAI,GAAG7J,MAAM,CAACN,KAAD,CAAjB,CAFA,CAGA;AACA;;AACA,MAAImK,IAAI,IAAI,CAAC+U,OAAb,EAAsB;AACpB,WAAO/U,IAAP;AACD,GAPD,CAQA;;;AACAA,EAAAA,IAAI,GAAG7J,MAAM,CAACN,KAAD,CAAN,GAAgB,KAAK2J,QAAL,CAAcyV,eAAd,CAA8Bpf,KAA9B,EAAqCpC,IAArC,CACrB,KAAK6a,YADgB,EAErB,IAFqB,EAGrB,IAHqB,CAGhB;AAHgB,GAAvB;AAKA4G,EAAAA,UAAU,CAAClV,IAAD,EAAQ,eAAenK,KAAvB,EAA+B,KAA/B,CAAV;AACA,SAAOmK,IAAP;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASmV,QAAT,CACEnV,IADF,EAEEnK,KAFF,EAGEK,GAHF,EAIE;AACAgf,EAAAA,UAAU,CAAClV,IAAD,EAAQ,aAAanK,KAAb,IAAsBK,GAAG,GAAI,MAAMA,GAAV,GAAiB,EAA1C,CAAR,EAAwD,IAAxD,CAAV;AACA,SAAO8J,IAAP;AACD;;AAED,SAASkV,UAAT,CACElV,IADF,EAEE9J,GAFF,EAGEwM,MAHF,EAIE;AACA,MAAIlO,KAAK,CAACC,OAAN,CAAcuL,IAAd,CAAJ,EAAyB;AACvB,SAAK,IAAI3K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2K,IAAI,CAAC1K,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,UAAI2K,IAAI,CAAC3K,CAAD,CAAJ,IAAW,OAAO2K,IAAI,CAAC3K,CAAD,CAAX,KAAmB,QAAlC,EAA4C;AAC1C+f,QAAAA,cAAc,CAACpV,IAAI,CAAC3K,CAAD,CAAL,EAAWa,GAAG,GAAG,GAAN,GAAYb,CAAvB,EAA2BqN,MAA3B,CAAd;AACD;AACF;AACF,GAND,MAMO;AACL0S,IAAAA,cAAc,CAACpV,IAAD,EAAO9J,GAAP,EAAYwM,MAAZ,CAAd;AACD;AACF;;AAED,SAAS0S,cAAT,CAAyBnS,IAAzB,EAA+B/M,GAA/B,EAAoCwM,MAApC,EAA4C;AAC1CO,EAAAA,IAAI,CAACX,QAAL,GAAgB,IAAhB;AACAW,EAAAA,IAAI,CAAC/M,GAAL,GAAWA,GAAX;AACA+M,EAAAA,IAAI,CAACP,MAAL,GAAcA,MAAd;AACD;AAED;;;AAEA,SAAS2S,mBAAT,CAA8B7T,IAA9B,EAAoCtO,KAApC,EAA2C;AACzC,MAAIA,KAAJ,EAAW;AACT,QAAI,CAACS,aAAa,CAACT,KAAD,CAAlB,EAA2B;AACzB,wBAAyB,YAAzB,IAAyCqL,IAAI,CAC3C,+CAD2C,EAE3C,IAF2C,CAA7C;AAID,KALD,MAKO;AACL,UAAIsR,EAAE,GAAGrO,IAAI,CAACqO,EAAL,GAAUrO,IAAI,CAACqO,EAAL,GAAU7X,MAAM,CAAC,EAAD,EAAKwJ,IAAI,CAACqO,EAAV,CAAhB,GAAgC,EAAnD;;AACA,WAAK,IAAI3Z,GAAT,IAAgBhD,KAAhB,EAAuB;AACrB,YAAIoiB,QAAQ,GAAGzF,EAAE,CAAC3Z,GAAD,CAAjB;AACA,YAAIqf,IAAI,GAAGriB,KAAK,CAACgD,GAAD,CAAhB;AACA2Z,QAAAA,EAAE,CAAC3Z,GAAD,CAAF,GAAUof,QAAQ,GAAG,GAAGpO,MAAH,CAAUoO,QAAV,EAAoBC,IAApB,CAAH,GAA+BA,IAAjD;AACD;AACF;AACF;;AACD,SAAO/T,IAAP;AACD;AAED;;;AAEA,SAASgU,kBAAT,CACE/F,GADF,EACO;AACLrX,GAFF,EAGE;AACAqd,cAJF,EAKEC,cALF,EAME;AACAtd,EAAAA,GAAG,GAAGA,GAAG,IAAI;AAAEoa,IAAAA,OAAO,EAAE,CAACiD;AAAZ,GAAb;;AACA,OAAK,IAAIpgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoa,GAAG,CAACna,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,QAAI2c,IAAI,GAAGvC,GAAG,CAACpa,CAAD,CAAd;;AACA,QAAIb,KAAK,CAACC,OAAN,CAAcud,IAAd,CAAJ,EAAyB;AACvBwD,MAAAA,kBAAkB,CAACxD,IAAD,EAAO5Z,GAAP,EAAYqd,cAAZ,CAAlB;AACD,KAFD,MAEO,IAAIzD,IAAJ,EAAU;AACf;AACA,UAAIA,IAAI,CAACe,KAAT,EAAgB;AACdf,QAAAA,IAAI,CAAC5b,EAAL,CAAQ2c,KAAR,GAAgB,IAAhB;AACD;;AACD3a,MAAAA,GAAG,CAAC4Z,IAAI,CAAC9b,GAAN,CAAH,GAAgB8b,IAAI,CAAC5b,EAArB;AACD;AACF;;AACD,MAAIsf,cAAJ,EAAoB;AACjBtd,IAAAA,GAAD,CAAMqa,IAAN,GAAaiD,cAAb;AACD;;AACD,SAAOtd,GAAP;AACD;AAED;;;AAEA,SAASud,eAAT,CAA0BC,OAA1B,EAAmCC,MAAnC,EAA2C;AACzC,OAAK,IAAIxgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwgB,MAAM,CAACvgB,MAA3B,EAAmCD,CAAC,IAAI,CAAxC,EAA2C;AACzC,QAAIa,GAAG,GAAG2f,MAAM,CAACxgB,CAAD,CAAhB;;AACA,QAAI,OAAOa,GAAP,KAAe,QAAf,IAA2BA,GAA/B,EAAoC;AAClC0f,MAAAA,OAAO,CAACC,MAAM,CAACxgB,CAAD,CAAP,CAAP,GAAqBwgB,MAAM,CAACxgB,CAAC,GAAG,CAAL,CAA3B;AACD,KAFD,MAEO,IAAI,kBAAyB,YAAzB,IAAyCa,GAAG,KAAK,EAAjD,IAAuDA,GAAG,KAAK,IAAnE,EAAyE;AAC9E;AACAqI,MAAAA,IAAI,CACD,6EAA6ErI,GAD5E,EAEF,IAFE,CAAJ;AAID;AACF;;AACD,SAAO0f,OAAP;AACD,EAED;AACA;AACA;;;AACA,SAASE,eAAT,CAA0B5iB,KAA1B,EAAiC6iB,MAAjC,EAAyC;AACvC,SAAO,OAAO7iB,KAAP,KAAiB,QAAjB,GAA4B6iB,MAAM,GAAG7iB,KAArC,GAA6CA,KAApD;AACD;AAED;;;AAEA,SAAS8iB,oBAAT,CAA+BnV,MAA/B,EAAuC;AACrCA,EAAAA,MAAM,CAACoV,EAAP,GAAYd,QAAZ;AACAtU,EAAAA,MAAM,CAACqV,EAAP,GAAYthB,QAAZ;AACAiM,EAAAA,MAAM,CAACsV,EAAP,GAAY5iB,QAAZ;AACAsN,EAAAA,MAAM,CAACuV,EAAP,GAAYpD,UAAZ;AACAnS,EAAAA,MAAM,CAACwV,EAAP,GAAYjD,UAAZ;AACAvS,EAAAA,MAAM,CAACyV,EAAP,GAAY7d,UAAZ;AACAoI,EAAAA,MAAM,CAAC0V,EAAP,GAAYld,YAAZ;AACAwH,EAAAA,MAAM,CAAC2V,EAAP,GAAY1B,YAAZ;AACAjU,EAAAA,MAAM,CAAC4V,EAAP,GAAY7C,aAAZ;AACA/S,EAAAA,MAAM,CAAC6V,EAAP,GAAY1C,aAAZ;AACAnT,EAAAA,MAAM,CAAC8V,EAAP,GAAYrC,eAAZ;AACAzT,EAAAA,MAAM,CAAC+V,EAAP,GAAY1T,eAAZ;AACArC,EAAAA,MAAM,CAACgW,EAAP,GAAY7T,gBAAZ;AACAnC,EAAAA,MAAM,CAACiW,EAAP,GAAYtB,kBAAZ;AACA3U,EAAAA,MAAM,CAACkW,EAAP,GAAY1B,mBAAZ;AACAxU,EAAAA,MAAM,CAACmW,EAAP,GAAYrB,eAAZ;AACA9U,EAAAA,MAAM,CAACoW,EAAP,GAAYnB,eAAZ;AACD;AAED;;;AAEA,SAASoB,uBAAT,CACE1V,IADF,EAEEkG,KAFF,EAGEjG,QAHF,EAIEW,MAJF,EAKExE,IALF,EAME;AACA,MAAIuZ,MAAM,GAAG,IAAb;AAEA,MAAI9X,OAAO,GAAGzB,IAAI,CAACyB,OAAnB,CAHA,CAIA;AACA;;AACA,MAAI+X,SAAJ;;AACA,MAAInhB,MAAM,CAACmM,MAAD,EAAS,MAAT,CAAV,EAA4B;AAC1BgV,IAAAA,SAAS,GAAG3kB,MAAM,CAACyC,MAAP,CAAckN,MAAd,CAAZ,CAD0B,CAE1B;;AACAgV,IAAAA,SAAS,CAACC,SAAV,GAAsBjV,MAAtB;AACD,GAJD,MAIO;AACL;AACA;AACA;AACAgV,IAAAA,SAAS,GAAGhV,MAAZ,CAJK,CAKL;;AACAA,IAAAA,MAAM,GAAGA,MAAM,CAACiV,SAAhB;AACD;;AACD,MAAIC,UAAU,GAAGvkB,MAAM,CAACsM,OAAO,CAACkY,SAAT,CAAvB;AACA,MAAIC,iBAAiB,GAAG,CAACF,UAAzB;AAEA,OAAK9V,IAAL,GAAYA,IAAZ;AACA,OAAKkG,KAAL,GAAaA,KAAb;AACA,OAAKjG,QAAL,GAAgBA,QAAhB;AACA,OAAKW,MAAL,GAAcA,MAAd;AACA,OAAKqV,SAAL,GAAiBjW,IAAI,CAACqO,EAAL,IAAWrd,WAA5B;AACA,OAAKklB,UAAL,GAAkB/F,aAAa,CAACtS,OAAO,CAACuI,MAAT,EAAiBxF,MAAjB,CAA/B;;AACA,OAAK2P,KAAL,GAAa,YAAY;AACvB,QAAI,CAACoF,MAAM,CAACzD,MAAZ,EAAoB;AAClBvB,MAAAA,oBAAoB,CAClB3Q,IAAI,CAACmW,WADa,EAElBR,MAAM,CAACzD,MAAP,GAAgB5B,YAAY,CAACrQ,QAAD,EAAWW,MAAX,CAFV,CAApB;AAID;;AACD,WAAO+U,MAAM,CAACzD,MAAd;AACD,GARD;;AAUAjhB,EAAAA,MAAM,CAACyI,cAAP,CAAsB,IAAtB,EAA4B,aAA5B,EAA4C;AAC1CD,IAAAA,UAAU,EAAE,IAD8B;AAE1CkC,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAgB;AACnB,aAAOgV,oBAAoB,CAAC3Q,IAAI,CAACmW,WAAN,EAAmB,KAAK5F,KAAL,EAAnB,CAA3B;AACD;AAJyC,GAA5C,EAtCA,CA6CA;;AACA,MAAIuF,UAAJ,EAAgB;AACd;AACA,SAAK9X,QAAL,GAAgBH,OAAhB,CAFc,CAGd;;AACA,SAAKqU,MAAL,GAAc,KAAK3B,KAAL,EAAd;AACA,SAAKyB,YAAL,GAAoBrB,oBAAoB,CAAC3Q,IAAI,CAACmW,WAAN,EAAmB,KAAKjE,MAAxB,CAAxC;AACD;;AAED,MAAIrU,OAAO,CAACuY,QAAZ,EAAsB;AACpB,SAAKC,EAAL,GAAU,UAAUxgB,CAAV,EAAaiB,CAAb,EAAgB1B,CAAhB,EAAmBkhB,CAAnB,EAAsB;AAC9B,UAAI1U,KAAK,GAAG2U,aAAa,CAACX,SAAD,EAAY/f,CAAZ,EAAeiB,CAAf,EAAkB1B,CAAlB,EAAqBkhB,CAArB,EAAwBN,iBAAxB,CAAzB;;AACA,UAAIpU,KAAK,IAAI,CAAC5O,KAAK,CAACC,OAAN,CAAc2O,KAAd,CAAd,EAAoC;AAClCA,QAAAA,KAAK,CAAClB,SAAN,GAAkB7C,OAAO,CAACuY,QAA1B;AACAxU,QAAAA,KAAK,CAACpB,SAAN,GAAkBI,MAAlB;AACD;;AACD,aAAOgB,KAAP;AACD,KAPD;AAQD,GATD,MASO;AACL,SAAKyU,EAAL,GAAU,UAAUxgB,CAAV,EAAaiB,CAAb,EAAgB1B,CAAhB,EAAmBkhB,CAAnB,EAAsB;AAAE,aAAOC,aAAa,CAACX,SAAD,EAAY/f,CAAZ,EAAeiB,CAAf,EAAkB1B,CAAlB,EAAqBkhB,CAArB,EAAwBN,iBAAxB,CAApB;AAAiE,KAAnG;AACD;AACF;;AAEDxB,oBAAoB,CAACkB,uBAAuB,CAAC5jB,SAAzB,CAApB;;AAEA,SAAS0kB,yBAAT,CACEpa,IADF,EAEEwI,SAFF,EAGE5E,IAHF,EAIE4V,SAJF,EAKE3V,QALF,EAME;AACA,MAAIpC,OAAO,GAAGzB,IAAI,CAACyB,OAAnB;AACA,MAAIqI,KAAK,GAAG,EAAZ;AACA,MAAI2B,WAAW,GAAGhK,OAAO,CAACqI,KAA1B;;AACA,MAAI5U,KAAK,CAACuW,WAAD,CAAT,EAAwB;AACtB,SAAK,IAAInT,GAAT,IAAgBmT,WAAhB,EAA6B;AAC3B3B,MAAAA,KAAK,CAACxR,GAAD,CAAL,GAAakT,YAAY,CAAClT,GAAD,EAAMmT,WAAN,EAAmBjD,SAAS,IAAI5T,WAAhC,CAAzB;AACD;AACF,GAJD,MAIO;AACL,QAAIM,KAAK,CAAC0O,IAAI,CAACkP,KAAN,CAAT,EAAuB;AAAEuH,MAAAA,UAAU,CAACvQ,KAAD,EAAQlG,IAAI,CAACkP,KAAb,CAAV;AAAgC;;AACzD,QAAI5d,KAAK,CAAC0O,IAAI,CAACkG,KAAN,CAAT,EAAuB;AAAEuQ,MAAAA,UAAU,CAACvQ,KAAD,EAAQlG,IAAI,CAACkG,KAAb,CAAV;AAAgC;AAC1D;;AAED,MAAIwQ,aAAa,GAAG,IAAIhB,uBAAJ,CAClB1V,IADkB,EAElBkG,KAFkB,EAGlBjG,QAHkB,EAIlB2V,SAJkB,EAKlBxZ,IALkB,CAApB;AAQA,MAAIwF,KAAK,GAAG/D,OAAO,CAAC+O,MAAR,CAAe3a,IAAf,CAAoB,IAApB,EAA0BykB,aAAa,CAACL,EAAxC,EAA4CK,aAA5C,CAAZ;;AAEA,MAAI9U,KAAK,YAAY9B,KAArB,EAA4B;AAC1B,WAAO6W,4BAA4B,CAAC/U,KAAD,EAAQ5B,IAAR,EAAc0W,aAAa,CAAC9V,MAA5B,EAAoC/C,OAApC,EAA6C6Y,aAA7C,CAAnC;AACD,GAFD,MAEO,IAAI1jB,KAAK,CAACC,OAAN,CAAc2O,KAAd,CAAJ,EAA0B;AAC/B,QAAIgV,MAAM,GAAGnH,iBAAiB,CAAC7N,KAAD,CAAjB,IAA4B,EAAzC;AACA,QAAIhL,GAAG,GAAG,IAAI5D,KAAJ,CAAU4jB,MAAM,CAAC9iB,MAAjB,CAAV;;AACA,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+iB,MAAM,CAAC9iB,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC+C,MAAAA,GAAG,CAAC/C,CAAD,CAAH,GAAS8iB,4BAA4B,CAACC,MAAM,CAAC/iB,CAAD,CAAP,EAAYmM,IAAZ,EAAkB0W,aAAa,CAAC9V,MAAhC,EAAwC/C,OAAxC,EAAiD6Y,aAAjD,CAArC;AACD;;AACD,WAAO9f,GAAP;AACD;AACF;;AAED,SAAS+f,4BAAT,CAAuC/U,KAAvC,EAA8C5B,IAA9C,EAAoD4V,SAApD,EAA+D/X,OAA/D,EAAwE6Y,aAAxE,EAAuF;AACrF;AACA;AACA;AACA,MAAIG,KAAK,GAAGlV,UAAU,CAACC,KAAD,CAAtB;AACAiV,EAAAA,KAAK,CAACrW,SAAN,GAAkBoV,SAAlB;AACAiB,EAAAA,KAAK,CAACpW,SAAN,GAAkB5C,OAAlB;;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzC,KAACgZ,KAAK,CAACC,YAAN,GAAqBD,KAAK,CAACC,YAAN,IAAsB,EAA5C,EAAgDJ,aAAhD,GAAgEA,aAAhE;AACD;;AACD,MAAI1W,IAAI,CAACwQ,IAAT,EAAe;AACb,KAACqG,KAAK,CAAC7W,IAAN,KAAe6W,KAAK,CAAC7W,IAAN,GAAa,EAA5B,CAAD,EAAkCwQ,IAAlC,GAAyCxQ,IAAI,CAACwQ,IAA9C;AACD;;AACD,SAAOqG,KAAP;AACD;;AAED,SAASJ,UAAT,CAAqBhgB,EAArB,EAAyBsO,IAAzB,EAA+B;AAC7B,OAAK,IAAIrQ,GAAT,IAAgBqQ,IAAhB,EAAsB;AACpBtO,IAAAA,EAAE,CAACxB,QAAQ,CAACP,GAAD,CAAT,CAAF,GAAoBqQ,IAAI,CAACrQ,GAAD,CAAxB;AACD;AACF;AAED;;AAEA;;AAEA;;AAEA;AAEA;;;AACA,IAAIqiB,mBAAmB,GAAG;AACxBC,EAAAA,IAAI,EAAE,SAASA,IAAT,CAAepV,KAAf,EAAsBqV,SAAtB,EAAiC;AACrC,QACErV,KAAK,CAACjB,iBAAN,IACA,CAACiB,KAAK,CAACjB,iBAAN,CAAwBuW,YADzB,IAEAtV,KAAK,CAAC5B,IAAN,CAAWmX,SAHb,EAIE;AACA;AACA,UAAIC,WAAW,GAAGxV,KAAlB,CAFA,CAEyB;;AACzBmV,MAAAA,mBAAmB,CAACM,QAApB,CAA6BD,WAA7B,EAA0CA,WAA1C;AACD,KARD,MAQO;AACL,UAAI9V,KAAK,GAAGM,KAAK,CAACjB,iBAAN,GAA0B2W,+BAA+B,CACnE1V,KADmE,EAEnE2V,cAFmE,CAArE;AAIAjW,MAAAA,KAAK,CAACkW,MAAN,CAAaP,SAAS,GAAGrV,KAAK,CAACzB,GAAT,GAAe9O,SAArC,EAAgD4lB,SAAhD;AACD;AACF,GAjBuB;AAmBxBI,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAmBI,QAAnB,EAA6B7V,KAA7B,EAAoC;AAC5C,QAAI/D,OAAO,GAAG+D,KAAK,CAACvB,gBAApB;AACA,QAAIiB,KAAK,GAAGM,KAAK,CAACjB,iBAAN,GAA0B8W,QAAQ,CAAC9W,iBAA/C;AACA+W,IAAAA,oBAAoB,CAClBpW,KADkB,EAElBzD,OAAO,CAAC+G,SAFU,EAEC;AACnB/G,IAAAA,OAAO,CAACoY,SAHU,EAGC;AACnBrU,IAAAA,KAJkB,EAIX;AACP/D,IAAAA,OAAO,CAACoC,QALU,CAKD;AALC,KAApB;AAOD,GA7BuB;AA+BxB0X,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiB/V,KAAjB,EAAwB;AAC9B,QAAIxB,OAAO,GAAGwB,KAAK,CAACxB,OAApB;AACA,QAAIO,iBAAiB,GAAGiB,KAAK,CAACjB,iBAA9B;;AACA,QAAI,CAACA,iBAAiB,CAACiX,UAAvB,EAAmC;AACjCjX,MAAAA,iBAAiB,CAACiX,UAAlB,GAA+B,IAA/B;AACAC,MAAAA,QAAQ,CAAClX,iBAAD,EAAoB,SAApB,CAAR;AACD;;AACD,QAAIiB,KAAK,CAAC5B,IAAN,CAAWmX,SAAf,EAA0B;AACxB,UAAI/W,OAAO,CAACwX,UAAZ,EAAwB;AACtB;AACA;AACA;AACA;AACA;AACAE,QAAAA,uBAAuB,CAACnX,iBAAD,CAAvB;AACD,OAPD,MAOO;AACLoX,QAAAA,sBAAsB,CAACpX,iBAAD,EAAoB;AAAK;AAAzB,SAAtB;AACD;AACF;AACF,GAlDuB;AAoDxBqX,EAAAA,OAAO,EAAE,SAASA,OAAT,CAAkBpW,KAAlB,EAAyB;AAChC,QAAIjB,iBAAiB,GAAGiB,KAAK,CAACjB,iBAA9B;;AACA,QAAI,CAACA,iBAAiB,CAACuW,YAAvB,EAAqC;AACnC,UAAI,CAACtV,KAAK,CAAC5B,IAAN,CAAWmX,SAAhB,EAA2B;AACzBxW,QAAAA,iBAAiB,CAACsX,QAAlB;AACD,OAFD,MAEO;AACLC,QAAAA,wBAAwB,CAACvX,iBAAD,EAAoB;AAAK;AAAzB,SAAxB;AACD;AACF;AACF;AA7DuB,CAA1B;AAgEA,IAAIwX,YAAY,GAAGlnB,MAAM,CAAC0G,IAAP,CAAYof,mBAAZ,CAAnB;;AAEA,SAASqB,eAAT,CACEhc,IADF,EAEE4D,IAFF,EAGEI,OAHF,EAIEH,QAJF,EAKEF,GALF,EAME;AACA,MAAI5O,OAAO,CAACiL,IAAD,CAAX,EAAmB;AACjB;AACD;;AAED,MAAIic,QAAQ,GAAGjY,OAAO,CAACpC,QAAR,CAAiBkJ,KAAhC,CALA,CAOA;;AACA,MAAIvV,QAAQ,CAACyK,IAAD,CAAZ,EAAoB;AAClBA,IAAAA,IAAI,GAAGic,QAAQ,CAAC7hB,MAAT,CAAgB4F,IAAhB,CAAP;AACD,GAVD,CAYA;AACA;;;AACA,MAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;AAC9B,QAAI,kBAAyB,YAA7B,EAA2C;AACzCW,MAAAA,IAAI,CAAE,mCAAoCtK,MAAM,CAAC2J,IAAD,CAA5C,EAAsDgE,OAAtD,CAAJ;AACD;;AACD;AACD,GAnBD,CAqBA;;;AACA,MAAIE,YAAJ;;AACA,MAAInP,OAAO,CAACiL,IAAI,CAAC0B,GAAN,CAAX,EAAuB;AACrBwC,IAAAA,YAAY,GAAGlE,IAAf;AACAA,IAAAA,IAAI,GAAGkc,qBAAqB,CAAChY,YAAD,EAAe+X,QAAf,CAA5B;;AACA,QAAIjc,IAAI,KAAK/K,SAAb,EAAwB;AACtB;AACA;AACA;AACA,aAAOknB,sBAAsB,CAC3BjY,YAD2B,EAE3BN,IAF2B,EAG3BI,OAH2B,EAI3BH,QAJ2B,EAK3BF,GAL2B,CAA7B;AAOD;AACF;;AAEDC,EAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf,CAxCA,CA0CA;AACA;;AACAwY,EAAAA,yBAAyB,CAACpc,IAAD,CAAzB,CA5CA,CA8CA;;AACA,MAAI9K,KAAK,CAAC0O,IAAI,CAACyY,KAAN,CAAT,EAAuB;AACrBC,IAAAA,cAAc,CAACtc,IAAI,CAACyB,OAAN,EAAemC,IAAf,CAAd;AACD,GAjDD,CAmDA;;;AACA,MAAI4E,SAAS,GAAGqK,yBAAyB,CAACjP,IAAD,EAAO5D,IAAP,EAAa2D,GAAb,CAAzC,CApDA,CAsDA;;AACA,MAAIxO,MAAM,CAAC6K,IAAI,CAACyB,OAAL,CAAa8a,UAAd,CAAV,EAAqC;AACnC,WAAOnC,yBAAyB,CAACpa,IAAD,EAAOwI,SAAP,EAAkB5E,IAAlB,EAAwBI,OAAxB,EAAiCH,QAAjC,CAAhC;AACD,GAzDD,CA2DA;AACA;;;AACA,MAAIgW,SAAS,GAAGjW,IAAI,CAACqO,EAArB,CA7DA,CA8DA;AACA;;AACArO,EAAAA,IAAI,CAACqO,EAAL,GAAUrO,IAAI,CAAC4Y,QAAf;;AAEA,MAAIrnB,MAAM,CAAC6K,IAAI,CAACyB,OAAL,CAAagb,QAAd,CAAV,EAAmC;AACjC;AACA;AAEA;AACA,QAAIrI,IAAI,GAAGxQ,IAAI,CAACwQ,IAAhB;AACAxQ,IAAAA,IAAI,GAAG,EAAP;;AACA,QAAIwQ,IAAJ,EAAU;AACRxQ,MAAAA,IAAI,CAACwQ,IAAL,GAAYA,IAAZ;AACD;AACF,GA5ED,CA8EA;;;AACAsI,EAAAA,qBAAqB,CAAC9Y,IAAD,CAArB,CA/EA,CAiFA;;AACA,MAAI9B,IAAI,GAAG9B,IAAI,CAACyB,OAAL,CAAaK,IAAb,IAAqB6B,GAAhC;AACA,MAAI6B,KAAK,GAAG,IAAI9B,KAAJ,CACT,mBAAoB1D,IAAI,CAAC0B,GAAzB,IAAiCI,IAAI,GAAI,MAAMA,IAAV,GAAkB,EAAvD,CADS,EAEV8B,IAFU,EAEJ3O,SAFI,EAEOA,SAFP,EAEkBA,SAFlB,EAE6B+O,OAF7B,EAGV;AAAEhE,IAAAA,IAAI,EAAEA,IAAR;AAAcwI,IAAAA,SAAS,EAAEA,SAAzB;AAAoCqR,IAAAA,SAAS,EAAEA,SAA/C;AAA0DlW,IAAAA,GAAG,EAAEA,GAA/D;AAAoEE,IAAAA,QAAQ,EAAEA;AAA9E,GAHU,EAIVK,YAJU,CAAZ;AAOA,SAAOsB,KAAP;AACD;;AAED,SAAS0V,+BAAT,CACE1V,KADF,EACS;AACPhB,MAFF,CAES;AAFT,EAGE;AACA,MAAI/C,OAAO,GAAG;AACZkb,IAAAA,YAAY,EAAE,IADF;AAEZC,IAAAA,YAAY,EAAEpX,KAFF;AAGZhB,IAAAA,MAAM,EAAEA;AAHI,GAAd,CADA,CAMA;;AACA,MAAIqY,cAAc,GAAGrX,KAAK,CAAC5B,IAAN,CAAWiZ,cAAhC;;AACA,MAAI3nB,KAAK,CAAC2nB,cAAD,CAAT,EAA2B;AACzBpb,IAAAA,OAAO,CAAC+O,MAAR,GAAiBqM,cAAc,CAACrM,MAAhC;AACA/O,IAAAA,OAAO,CAAC4V,eAAR,GAA0BwF,cAAc,CAACxF,eAAzC;AACD;;AACD,SAAO,IAAI7R,KAAK,CAACvB,gBAAN,CAAuBjE,IAA3B,CAAgCyB,OAAhC,CAAP;AACD;;AAED,SAASib,qBAAT,CAAgC9Y,IAAhC,EAAsC;AACpC,MAAI4F,KAAK,GAAG5F,IAAI,CAAC6F,IAAL,KAAc7F,IAAI,CAAC6F,IAAL,GAAY,EAA1B,CAAZ;;AACA,OAAK,IAAIhS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGskB,YAAY,CAACrkB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5C,QAAIa,GAAG,GAAGyjB,YAAY,CAACtkB,CAAD,CAAtB;AACA,QAAIigB,QAAQ,GAAGlO,KAAK,CAAClR,GAAD,CAApB;AACA,QAAIwkB,OAAO,GAAGnC,mBAAmB,CAACriB,GAAD,CAAjC;;AACA,QAAIof,QAAQ,KAAKoF,OAAb,IAAwB,EAAEpF,QAAQ,IAAIA,QAAQ,CAACqF,OAAvB,CAA5B,EAA6D;AAC3DvT,MAAAA,KAAK,CAAClR,GAAD,CAAL,GAAaof,QAAQ,GAAGsF,WAAW,CAACF,OAAD,EAAUpF,QAAV,CAAd,GAAoCoF,OAAzD;AACD;AACF;AACF;;AAED,SAASE,WAAT,CAAsBC,EAAtB,EAA0BC,EAA1B,EAA8B;AAC5B,MAAItK,MAAM,GAAG,UAAUnZ,CAAV,EAAaiB,CAAb,EAAgB;AAC3B;AACAuiB,IAAAA,EAAE,CAACxjB,CAAD,EAAIiB,CAAJ,CAAF;AACAwiB,IAAAA,EAAE,CAACzjB,CAAD,EAAIiB,CAAJ,CAAF;AACD,GAJD;;AAKAkY,EAAAA,MAAM,CAACmK,OAAP,GAAiB,IAAjB;AACA,SAAOnK,MAAP;AACD,EAED;AACA;;;AACA,SAAS0J,cAAT,CAAyB7a,OAAzB,EAAkCmC,IAAlC,EAAwC;AACtC,MAAI8H,IAAI,GAAIjK,OAAO,CAAC4a,KAAR,IAAiB5a,OAAO,CAAC4a,KAAR,CAAc3Q,IAAhC,IAAyC,OAApD;AACA,MAAI4G,KAAK,GAAI7Q,OAAO,CAAC4a,KAAR,IAAiB5a,OAAO,CAAC4a,KAAR,CAAc/J,KAAhC,IAA0C,OAAtD;AACC,GAAC1O,IAAI,CAACkP,KAAL,KAAelP,IAAI,CAACkP,KAAL,GAAa,EAA5B,CAAD,EAAkCpH,IAAlC,IAA0C9H,IAAI,CAACyY,KAAL,CAAW/mB,KAArD;AACD,MAAI2c,EAAE,GAAGrO,IAAI,CAACqO,EAAL,KAAYrO,IAAI,CAACqO,EAAL,GAAU,EAAtB,CAAT;AACA,MAAIyF,QAAQ,GAAGzF,EAAE,CAACK,KAAD,CAAjB;AACA,MAAI6K,QAAQ,GAAGvZ,IAAI,CAACyY,KAAL,CAAWc,QAA1B;;AACA,MAAIjoB,KAAK,CAACwiB,QAAD,CAAT,EAAqB;AACnB,QACE9gB,KAAK,CAACC,OAAN,CAAc6gB,QAAd,IACIA,QAAQ,CAACxf,OAAT,CAAiBilB,QAAjB,MAA+B,CAAC,CADpC,GAEIzF,QAAQ,KAAKyF,QAHnB,EAIE;AACAlL,MAAAA,EAAE,CAACK,KAAD,CAAF,GAAY,CAAC6K,QAAD,EAAW7T,MAAX,CAAkBoO,QAAlB,CAAZ;AACD;AACF,GARD,MAQO;AACLzF,IAAAA,EAAE,CAACK,KAAD,CAAF,GAAY6K,QAAZ;AACD;AACF;AAED;;;AAEA,IAAIC,gBAAgB,GAAG,CAAvB;AACA,IAAIC,gBAAgB,GAAG,CAAvB,EAEA;AACA;;AACA,SAASlD,aAAT,CACEnW,OADF,EAEEL,GAFF,EAGEC,IAHF,EAIEC,QAJF,EAKEyZ,iBALF,EAMEC,eANF,EAOE;AACA,MAAI3mB,KAAK,CAACC,OAAN,CAAc+M,IAAd,KAAuBvO,WAAW,CAACuO,IAAD,CAAtC,EAA8C;AAC5C0Z,IAAAA,iBAAiB,GAAGzZ,QAApB;AACAA,IAAAA,QAAQ,GAAGD,IAAX;AACAA,IAAAA,IAAI,GAAG3O,SAAP;AACD;;AACD,MAAIE,MAAM,CAACooB,eAAD,CAAV,EAA6B;AAC3BD,IAAAA,iBAAiB,GAAGD,gBAApB;AACD;;AACD,SAAOG,cAAc,CAACxZ,OAAD,EAAUL,GAAV,EAAeC,IAAf,EAAqBC,QAArB,EAA+ByZ,iBAA/B,CAArB;AACD;;AAED,SAASE,cAAT,CACExZ,OADF,EAEEL,GAFF,EAGEC,IAHF,EAIEC,QAJF,EAKEyZ,iBALF,EAME;AACA,MAAIpoB,KAAK,CAAC0O,IAAD,CAAL,IAAe1O,KAAK,CAAE0O,IAAD,CAAOyC,MAAR,CAAxB,EAAyC;AACvC,sBAAyB,YAAzB,IAAyC1F,IAAI,CAC3C,qDAAsD7J,IAAI,CAACC,SAAL,CAAe6M,IAAf,CAAtD,GAA8E,IAA9E,GACA,wDAF2C,EAG3CI,OAH2C,CAA7C;AAKA,WAAOoB,gBAAgB,EAAvB;AACD,GARD,CASA;;;AACA,MAAIlQ,KAAK,CAAC0O,IAAD,CAAL,IAAe1O,KAAK,CAAC0O,IAAI,CAAC6Z,EAAN,CAAxB,EAAmC;AACjC9Z,IAAAA,GAAG,GAAGC,IAAI,CAAC6Z,EAAX;AACD;;AACD,MAAI,CAAC9Z,GAAL,EAAU;AACR;AACA,WAAOyB,gBAAgB,EAAvB;AACD,GAhBD,CAiBA;;;AACA,MAAI,kBAAyB,YAAzB,IACFlQ,KAAK,CAAC0O,IAAD,CADH,IACa1O,KAAK,CAAC0O,IAAI,CAACtL,GAAN,CADlB,IACgC,CAACjD,WAAW,CAACuO,IAAI,CAACtL,GAAN,CADhD,EAEE;AACA;AACEqI,MAAAA,IAAI,CACF,6CACA,kCAFE,EAGFqD,OAHE,CAAJ;AAKD;AACF,GA5BD,CA6BA;;;AACA,MAAIpN,KAAK,CAACC,OAAN,CAAcgN,QAAd,KACF,OAAOA,QAAQ,CAAC,CAAD,CAAf,KAAuB,UADzB,EAEE;AACAD,IAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;AACAA,IAAAA,IAAI,CAACmW,WAAL,GAAmB;AAAE5N,MAAAA,OAAO,EAAEtI,QAAQ,CAAC,CAAD;AAAnB,KAAnB;AACAA,IAAAA,QAAQ,CAACnM,MAAT,GAAkB,CAAlB;AACD;;AACD,MAAI4lB,iBAAiB,KAAKD,gBAA1B,EAA4C;AAC1CxZ,IAAAA,QAAQ,GAAGwP,iBAAiB,CAACxP,QAAD,CAA5B;AACD,GAFD,MAEO,IAAIyZ,iBAAiB,KAAKF,gBAA1B,EAA4C;AACjDvZ,IAAAA,QAAQ,GAAGuP,uBAAuB,CAACvP,QAAD,CAAlC;AACD;;AACD,MAAI2B,KAAJ,EAAWrB,EAAX;;AACA,MAAI,OAAOR,GAAP,KAAe,QAAnB,EAA6B;AAC3B,QAAI3D,IAAJ;AACAmE,IAAAA,EAAE,GAAIH,OAAO,CAAC0Z,MAAR,IAAkB1Z,OAAO,CAAC0Z,MAAR,CAAevZ,EAAlC,IAAyCpI,MAAM,CAACa,eAAP,CAAuB+G,GAAvB,CAA9C;;AACA,QAAI5H,MAAM,CAACU,aAAP,CAAqBkH,GAArB,CAAJ,EAA+B;AAC7B;AACA,UAAI,kBAAyB,YAAzB,IAAyCzO,KAAK,CAAC0O,IAAD,CAA9C,IAAwD1O,KAAK,CAAC0O,IAAI,CAAC4Y,QAAN,CAAjE,EAAkF;AAChF7b,QAAAA,IAAI,CACD,mFAAmFgD,GAAnF,GAAyF,IADxF,EAEFK,OAFE,CAAJ;AAID;;AACDwB,MAAAA,KAAK,GAAG,IAAI9B,KAAJ,CACN3H,MAAM,CAACc,oBAAP,CAA4B8G,GAA5B,CADM,EAC4BC,IAD5B,EACkCC,QADlC,EAEN5O,SAFM,EAEKA,SAFL,EAEgB+O,OAFhB,CAAR;AAID,KAZD,MAYO,IAAI,CAAC,CAACJ,IAAD,IAAS,CAACA,IAAI,CAAC+Z,GAAhB,KAAwBzoB,KAAK,CAAC8K,IAAI,GAAGmL,YAAY,CAACnH,OAAO,CAACpC,QAAT,EAAmB,YAAnB,EAAiC+B,GAAjC,CAApB,CAAjC,EAA6F;AAClG;AACA6B,MAAAA,KAAK,GAAGwW,eAAe,CAAChc,IAAD,EAAO4D,IAAP,EAAaI,OAAb,EAAsBH,QAAtB,EAAgCF,GAAhC,CAAvB;AACD,KAHM,MAGA;AACL;AACA;AACA;AACA6B,MAAAA,KAAK,GAAG,IAAI9B,KAAJ,CACNC,GADM,EACDC,IADC,EACKC,QADL,EAEN5O,SAFM,EAEKA,SAFL,EAEgB+O,OAFhB,CAAR;AAID;AACF,GA3BD,MA2BO;AACL;AACAwB,IAAAA,KAAK,GAAGwW,eAAe,CAACrY,GAAD,EAAMC,IAAN,EAAYI,OAAZ,EAAqBH,QAArB,CAAvB;AACD;;AACD,MAAIjN,KAAK,CAACC,OAAN,CAAc2O,KAAd,CAAJ,EAA0B;AACxB,WAAOA,KAAP;AACD,GAFD,MAEO,IAAItQ,KAAK,CAACsQ,KAAD,CAAT,EAAkB;AACvB,QAAItQ,KAAK,CAACiP,EAAD,CAAT,EAAe;AAAEyZ,MAAAA,OAAO,CAACpY,KAAD,EAAQrB,EAAR,CAAP;AAAqB;;AACtC,QAAIjP,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AAAEia,MAAAA,oBAAoB,CAACja,IAAD,CAApB;AAA6B;;AAChD,WAAO4B,KAAP;AACD,GAJM,MAIA;AACL,WAAOJ,gBAAgB,EAAvB;AACD;AACF;;AAED,SAASwY,OAAT,CAAkBpY,KAAlB,EAAyBrB,EAAzB,EAA6B2Z,KAA7B,EAAoC;AAClCtY,EAAAA,KAAK,CAACrB,EAAN,GAAWA,EAAX;;AACA,MAAIqB,KAAK,CAAC7B,GAAN,KAAc,eAAlB,EAAmC;AACjC;AACAQ,IAAAA,EAAE,GAAGlP,SAAL;AACA6oB,IAAAA,KAAK,GAAG,IAAR;AACD;;AACD,MAAI5oB,KAAK,CAACsQ,KAAK,CAAC3B,QAAP,CAAT,EAA2B;AACzB,SAAK,IAAIpM,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG8L,KAAK,CAAC3B,QAAN,CAAenM,MAAnC,EAA2CD,CAAC,GAAGiC,CAA/C,EAAkDjC,CAAC,EAAnD,EAAuD;AACrD,UAAIyN,KAAK,GAAGM,KAAK,CAAC3B,QAAN,CAAepM,CAAf,CAAZ;;AACA,UAAIvC,KAAK,CAACgQ,KAAK,CAACvB,GAAP,CAAL,KACF5O,OAAO,CAACmQ,KAAK,CAACf,EAAP,CAAP,IAAsBhP,MAAM,CAAC2oB,KAAD,CAAN,IAAiB5Y,KAAK,CAACvB,GAAN,KAAc,KADnD,CAAJ,EACgE;AAC9Dia,QAAAA,OAAO,CAAC1Y,KAAD,EAAQf,EAAR,EAAY2Z,KAAZ,CAAP;AACD;AACF;AACF;AACF,EAED;AACA;AACA;;;AACA,SAASD,oBAAT,CAA+Bja,IAA/B,EAAqC;AACnC,MAAIrO,QAAQ,CAACqO,IAAI,CAACma,KAAN,CAAZ,EAA0B;AACxBnN,IAAAA,QAAQ,CAAChN,IAAI,CAACma,KAAN,CAAR;AACD;;AACD,MAAIxoB,QAAQ,CAACqO,IAAI,CAACoa,KAAN,CAAZ,EAA0B;AACxBpN,IAAAA,QAAQ,CAAChN,IAAI,CAACoa,KAAN,CAAR;AACD;AACF;AAED;;;AAEA,SAASC,UAAT,CAAqB7c,EAArB,EAAyB;AACvBA,EAAAA,EAAE,CAAC8c,MAAH,GAAY,IAAZ,CADuB,CACL;;AAClB9c,EAAAA,EAAE,CAACgW,YAAH,GAAkB,IAAlB,CAFuB,CAEC;;AACxB,MAAI3V,OAAO,GAAGL,EAAE,CAACQ,QAAjB;AACA,MAAIuc,WAAW,GAAG/c,EAAE,CAACsc,MAAH,GAAYjc,OAAO,CAACmb,YAAtC,CAJuB,CAI6B;;AACpD,MAAItC,aAAa,GAAG6D,WAAW,IAAIA,WAAW,CAACna,OAA/C;AACA5C,EAAAA,EAAE,CAAC0U,MAAH,GAAY5B,YAAY,CAACzS,OAAO,CAAC2c,eAAT,EAA0B9D,aAA1B,CAAxB;AACAlZ,EAAAA,EAAE,CAACwU,YAAH,GAAkBhhB,WAAlB,CAPuB,CAQvB;AACA;AACA;AACA;;AACAwM,EAAAA,EAAE,CAAC6Y,EAAH,GAAQ,UAAUxgB,CAAV,EAAaiB,CAAb,EAAgB1B,CAAhB,EAAmBkhB,CAAnB,EAAsB;AAAE,WAAOC,aAAa,CAAC/Y,EAAD,EAAK3H,CAAL,EAAQiB,CAAR,EAAW1B,CAAX,EAAckhB,CAAd,EAAiB,KAAjB,CAApB;AAA8C,GAA9E,CAZuB,CAavB;AACA;;;AACA9Y,EAAAA,EAAE,CAAC2U,cAAH,GAAoB,UAAUtc,CAAV,EAAaiB,CAAb,EAAgB1B,CAAhB,EAAmBkhB,CAAnB,EAAsB;AAAE,WAAOC,aAAa,CAAC/Y,EAAD,EAAK3H,CAAL,EAAQiB,CAAR,EAAW1B,CAAX,EAAckhB,CAAd,EAAiB,IAAjB,CAApB;AAA6C,GAAzF,CAfuB,CAiBvB;AACA;;;AACA,MAAImE,UAAU,GAAGF,WAAW,IAAIA,WAAW,CAACva,IAA5C;AAEA;;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzCsD,IAAAA,iBAAiB,CAAC9F,EAAD,EAAK,QAAL,EAAeid,UAAU,IAAIA,UAAU,CAACvL,KAAzB,IAAkCle,WAAjD,EAA8D,YAAY;AACzF,OAAC0pB,wBAAD,IAA6B3d,IAAI,CAAC,qBAAD,EAAwBS,EAAxB,CAAjC;AACD,KAFgB,EAEd,IAFc,CAAjB;AAGA8F,IAAAA,iBAAiB,CAAC9F,EAAD,EAAK,YAAL,EAAmBK,OAAO,CAAC8c,gBAAR,IAA4B3pB,WAA/C,EAA4D,YAAY;AACvF,OAAC0pB,wBAAD,IAA6B3d,IAAI,CAAC,yBAAD,EAA4BS,EAA5B,CAAjC;AACD,KAFgB,EAEd,IAFc,CAAjB;AAGD,GAPD,MAOO;AACL8F,IAAAA,iBAAiB,CAAC9F,EAAD,EAAK,QAAL,EAAeid,UAAU,IAAIA,UAAU,CAACvL,KAAzB,IAAkCle,WAAjD,EAA8D,IAA9D,EAAoE,IAApE,CAAjB;AACAsS,IAAAA,iBAAiB,CAAC9F,EAAD,EAAK,YAAL,EAAmBK,OAAO,CAAC8c,gBAAR,IAA4B3pB,WAA/C,EAA4D,IAA5D,EAAkE,IAAlE,CAAjB;AACD;AACF;;AAED,IAAI4pB,wBAAwB,GAAG,IAA/B;;AAEA,SAASC,WAAT,CAAsBC,GAAtB,EAA2B;AACzB;AACAtG,EAAAA,oBAAoB,CAACsG,GAAG,CAAChpB,SAAL,CAApB;;AAEAgpB,EAAAA,GAAG,CAAChpB,SAAJ,CAAcipB,SAAd,GAA0B,UAAUnmB,EAAV,EAAc;AACtC,WAAOiX,QAAQ,CAACjX,EAAD,EAAK,IAAL,CAAf;AACD,GAFD;;AAIAkmB,EAAAA,GAAG,CAAChpB,SAAJ,CAAckpB,OAAd,GAAwB,YAAY;AAClC,QAAIxd,EAAE,GAAG,IAAT;AACA,QAAIyd,GAAG,GAAGzd,EAAE,CAACQ,QAAb;AACA,QAAI4O,MAAM,GAAGqO,GAAG,CAACrO,MAAjB;AACA,QAAIoM,YAAY,GAAGiC,GAAG,CAACjC,YAAvB;;AAEA,QAAIA,YAAJ,EAAkB;AAChBxb,MAAAA,EAAE,CAACwU,YAAH,GAAkBrB,oBAAoB,CACpCqI,YAAY,CAAChZ,IAAb,CAAkBmW,WADkB,EAEpC3Y,EAAE,CAAC0U,MAFiC,EAGpC1U,EAAE,CAACwU,YAHiC,CAAtC;AAKD,KAZiC,CAclC;AACA;;;AACAxU,IAAAA,EAAE,CAACsc,MAAH,GAAYd,YAAZ,CAhBkC,CAiBlC;;AACA,QAAIpX,KAAJ;;AACA,QAAI;AACF;AACA;AACA;AACAgZ,MAAAA,wBAAwB,GAAGpd,EAA3B;AACAoE,MAAAA,KAAK,GAAGgL,MAAM,CAAC3a,IAAP,CAAYuL,EAAE,CAACsP,YAAf,EAA6BtP,EAAE,CAAC2U,cAAhC,CAAR;AACD,KAND,CAME,OAAO5a,CAAP,EAAU;AACVyS,MAAAA,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAQ,QAAR,CAAX,CADU,CAEV;AACA;;AACA;;AACA,UAAI,kBAAyB,YAAzB,IAAyCA,EAAE,CAACQ,QAAH,CAAYkd,WAAzD,EAAsE;AACpE,YAAI;AACFtZ,UAAAA,KAAK,GAAGpE,EAAE,CAACQ,QAAH,CAAYkd,WAAZ,CAAwBjpB,IAAxB,CAA6BuL,EAAE,CAACsP,YAAhC,EAA8CtP,EAAE,CAAC2U,cAAjD,EAAiE5a,CAAjE,CAAR;AACD,SAFD,CAEE,OAAOA,CAAP,EAAU;AACVyS,UAAAA,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAQ,aAAR,CAAX;AACAoE,UAAAA,KAAK,GAAGpE,EAAE,CAAC8c,MAAX;AACD;AACF,OAPD,MAOO;AACL1Y,QAAAA,KAAK,GAAGpE,EAAE,CAAC8c,MAAX;AACD;AACF,KArBD,SAqBU;AACRM,MAAAA,wBAAwB,GAAG,IAA3B;AACD,KA1CiC,CA2ClC;;;AACA,QAAI5nB,KAAK,CAACC,OAAN,CAAc2O,KAAd,KAAwBA,KAAK,CAAC9N,MAAN,KAAiB,CAA7C,EAAgD;AAC9C8N,MAAAA,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAb;AACD,KA9CiC,CA+ClC;;;AACA,QAAI,EAAEA,KAAK,YAAY9B,KAAnB,CAAJ,EAA+B;AAC7B,UAAI,kBAAyB,YAAzB,IAAyC9M,KAAK,CAACC,OAAN,CAAc2O,KAAd,CAA7C,EAAmE;AACjE7E,QAAAA,IAAI,CACF,wEACA,mCAFE,EAGFS,EAHE,CAAJ;AAKD;;AACDoE,MAAAA,KAAK,GAAGJ,gBAAgB,EAAxB;AACD,KAzDiC,CA0DlC;;;AACAI,IAAAA,KAAK,CAAChB,MAAN,GAAeoY,YAAf;AACA,WAAOpX,KAAP;AACD,GA7DD;AA8DD;AAED;;;AAEA,SAASuZ,UAAT,CAAqBC,IAArB,EAA2BC,IAA3B,EAAiC;AAC/B,MACED,IAAI,CAACE,UAAL,IACCjf,SAAS,IAAI+e,IAAI,CAAC9e,MAAM,CAACif,WAAR,CAAJ,KAA6B,QAF7C,EAGE;AACAH,IAAAA,IAAI,GAAGA,IAAI,CAAC7S,OAAZ;AACD;;AACD,SAAO5W,QAAQ,CAACypB,IAAD,CAAR,GACHC,IAAI,CAAC7kB,MAAL,CAAY4kB,IAAZ,CADG,GAEHA,IAFJ;AAGD;;AAED,SAAS7C,sBAAT,CACEiD,OADF,EAEExb,IAFF,EAGEI,OAHF,EAIEH,QAJF,EAKEF,GALF,EAME;AACA,MAAI0B,IAAI,GAAGD,gBAAgB,EAA3B;AACAC,EAAAA,IAAI,CAACnB,YAAL,GAAoBkb,OAApB;AACA/Z,EAAAA,IAAI,CAACN,SAAL,GAAiB;AAAEnB,IAAAA,IAAI,EAAEA,IAAR;AAAcI,IAAAA,OAAO,EAAEA,OAAvB;AAAgCH,IAAAA,QAAQ,EAAEA,QAA1C;AAAoDF,IAAAA,GAAG,EAAEA;AAAzD,GAAjB;AACA,SAAO0B,IAAP;AACD;;AAED,SAAS6W,qBAAT,CACEkD,OADF,EAEEnD,QAFF,EAGE;AACA,MAAI9mB,MAAM,CAACiqB,OAAO,CAAC9d,KAAT,CAAN,IAAyBpM,KAAK,CAACkqB,OAAO,CAACC,SAAT,CAAlC,EAAuD;AACrD,WAAOD,OAAO,CAACC,SAAf;AACD;;AAED,MAAInqB,KAAK,CAACkqB,OAAO,CAACE,QAAT,CAAT,EAA6B;AAC3B,WAAOF,OAAO,CAACE,QAAf;AACD;;AAED,MAAIC,KAAK,GAAGf,wBAAZ;;AACA,MAAIe,KAAK,IAAIrqB,KAAK,CAACkqB,OAAO,CAACI,MAAT,CAAd,IAAkCJ,OAAO,CAACI,MAAR,CAAetnB,OAAf,CAAuBqnB,KAAvB,MAAkC,CAAC,CAAzE,EAA4E;AAC1E;AACAH,IAAAA,OAAO,CAACI,MAAR,CAAejd,IAAf,CAAoBgd,KAApB;AACD;;AAED,MAAIpqB,MAAM,CAACiqB,OAAO,CAACK,OAAT,CAAN,IAA2BvqB,KAAK,CAACkqB,OAAO,CAACM,WAAT,CAApC,EAA2D;AACzD,WAAON,OAAO,CAACM,WAAf;AACD;;AAED,MAAIH,KAAK,IAAI,CAACrqB,KAAK,CAACkqB,OAAO,CAACI,MAAT,CAAnB,EAAqC;AACnC,QAAIA,MAAM,GAAGJ,OAAO,CAACI,MAAR,GAAiB,CAACD,KAAD,CAA9B;AACA,QAAII,IAAI,GAAG,IAAX;AACA,QAAIC,YAAY,GAAG,IAAnB;AACA,QAAIC,YAAY,GAAG,IAAnB;AAEEN,IAAAA,KAAD,CAAQO,GAAR,CAAY,gBAAZ,EAA8B,YAAY;AAAE,aAAOhoB,MAAM,CAAC0nB,MAAD,EAASD,KAAT,CAAb;AAA+B,KAA3E;;AAED,QAAIQ,WAAW,GAAG,UAAUC,eAAV,EAA2B;AAC3C,WAAK,IAAIvoB,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG8lB,MAAM,CAAC9nB,MAA3B,EAAmCD,CAAC,GAAGiC,CAAvC,EAA0CjC,CAAC,EAA3C,EAA+C;AAC5C+nB,QAAAA,MAAM,CAAC/nB,CAAD,CAAP,CAAYwoB,YAAZ;AACD;;AAED,UAAID,eAAJ,EAAqB;AACnBR,QAAAA,MAAM,CAAC9nB,MAAP,GAAgB,CAAhB;;AACA,YAAIkoB,YAAY,KAAK,IAArB,EAA2B;AACzBM,UAAAA,YAAY,CAACN,YAAD,CAAZ;AACAA,UAAAA,YAAY,GAAG,IAAf;AACD;;AACD,YAAIC,YAAY,KAAK,IAArB,EAA2B;AACzBK,UAAAA,YAAY,CAACL,YAAD,CAAZ;AACAA,UAAAA,YAAY,GAAG,IAAf;AACD;AACF;AACF,KAhBD;;AAkBA,QAAI9Q,OAAO,GAAGrT,IAAI,CAAC,UAAUlB,GAAV,EAAe;AAChC;AACA4kB,MAAAA,OAAO,CAACE,QAAR,GAAmBP,UAAU,CAACvkB,GAAD,EAAMyhB,QAAN,CAA7B,CAFgC,CAGhC;AACA;;AACA,UAAI,CAAC0D,IAAL,EAAW;AACTI,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD,OAFD,MAEO;AACLP,QAAAA,MAAM,CAAC9nB,MAAP,GAAgB,CAAhB;AACD;AACF,KAViB,CAAlB;AAYA,QAAIyoB,MAAM,GAAGzkB,IAAI,CAAC,UAAU0kB,MAAV,EAAkB;AAClC,wBAAyB,YAAzB,IAAyCzf,IAAI,CAC3C,wCAAyCtK,MAAM,CAAC+oB,OAAD,CAA/C,IACCgB,MAAM,GAAI,eAAeA,MAAnB,GAA6B,EADpC,CAD2C,CAA7C;;AAIA,UAAIlrB,KAAK,CAACkqB,OAAO,CAACC,SAAT,CAAT,EAA8B;AAC5BD,QAAAA,OAAO,CAAC9d,KAAR,GAAgB,IAAhB;AACAye,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD;AACF,KATgB,CAAjB;AAWA,QAAIvlB,GAAG,GAAG4kB,OAAO,CAACrQ,OAAD,EAAUoR,MAAV,CAAjB;;AAEA,QAAI5qB,QAAQ,CAACiF,GAAD,CAAZ,EAAmB;AACjB,UAAI/D,SAAS,CAAC+D,GAAD,CAAb,EAAoB;AAClB;AACA,YAAIzF,OAAO,CAACqqB,OAAO,CAACE,QAAT,CAAX,EAA+B;AAC7B9kB,UAAAA,GAAG,CAAC9D,IAAJ,CAASqY,OAAT,EAAkBoR,MAAlB;AACD;AACF,OALD,MAKO,IAAI1pB,SAAS,CAAC+D,GAAG,CAAC6lB,SAAL,CAAb,EAA8B;AACnC7lB,QAAAA,GAAG,CAAC6lB,SAAJ,CAAc3pB,IAAd,CAAmBqY,OAAnB,EAA4BoR,MAA5B;;AAEA,YAAIjrB,KAAK,CAACsF,GAAG,CAAC8G,KAAL,CAAT,EAAsB;AACpB8d,UAAAA,OAAO,CAACC,SAAR,GAAoBN,UAAU,CAACvkB,GAAG,CAAC8G,KAAL,EAAY2a,QAAZ,CAA9B;AACD;;AAED,YAAI/mB,KAAK,CAACsF,GAAG,CAACilB,OAAL,CAAT,EAAwB;AACtBL,UAAAA,OAAO,CAACM,WAAR,GAAsBX,UAAU,CAACvkB,GAAG,CAACilB,OAAL,EAAcxD,QAAd,CAAhC;;AACA,cAAIzhB,GAAG,CAAC8lB,KAAJ,KAAc,CAAlB,EAAqB;AACnBlB,YAAAA,OAAO,CAACK,OAAR,GAAkB,IAAlB;AACD,WAFD,MAEO;AACLG,YAAAA,YAAY,GAAG5Q,UAAU,CAAC,YAAY;AACpC4Q,cAAAA,YAAY,GAAG,IAAf;;AACA,kBAAI7qB,OAAO,CAACqqB,OAAO,CAACE,QAAT,CAAP,IAA6BvqB,OAAO,CAACqqB,OAAO,CAAC9d,KAAT,CAAxC,EAAyD;AACvD8d,gBAAAA,OAAO,CAACK,OAAR,GAAkB,IAAlB;AACAM,gBAAAA,WAAW,CAAC,KAAD,CAAX;AACD;AACF,aANwB,EAMtBvlB,GAAG,CAAC8lB,KAAJ,IAAa,GANS,CAAzB;AAOD;AACF;;AAED,YAAIprB,KAAK,CAACsF,GAAG,CAAC+lB,OAAL,CAAT,EAAwB;AACtBV,UAAAA,YAAY,GAAG7Q,UAAU,CAAC,YAAY;AACpC6Q,YAAAA,YAAY,GAAG,IAAf;;AACA,gBAAI9qB,OAAO,CAACqqB,OAAO,CAACE,QAAT,CAAX,EAA+B;AAC7Ba,cAAAA,MAAM,CACJ,kBAAyB,YAAzB,GACK,cAAe3lB,GAAG,CAAC+lB,OAAnB,GAA8B,KADnC,GAEI,IAHA,CAAN;AAKD;AACF,WATwB,EAStB/lB,GAAG,CAAC+lB,OATkB,CAAzB;AAUD;AACF;AACF;;AAEDZ,IAAAA,IAAI,GAAG,KAAP,CA9FmC,CA+FnC;;AACA,WAAOP,OAAO,CAACK,OAAR,GACHL,OAAO,CAACM,WADL,GAEHN,OAAO,CAACE,QAFZ;AAGD;AACF;AAED;;;AAEA,SAASta,kBAAT,CAA6BK,IAA7B,EAAmC;AACjC,SAAOA,IAAI,CAACT,SAAL,IAAkBS,IAAI,CAACnB,YAA9B;AACD;AAED;;;AAEA,SAASsc,sBAAT,CAAiC3c,QAAjC,EAA2C;AACzC,MAAIjN,KAAK,CAACC,OAAN,CAAcgN,QAAd,CAAJ,EAA6B;AAC3B,SAAK,IAAIpM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoM,QAAQ,CAACnM,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAIuB,CAAC,GAAG6K,QAAQ,CAACpM,CAAD,CAAhB;;AACA,UAAIvC,KAAK,CAAC8D,CAAD,CAAL,KAAa9D,KAAK,CAAC8D,CAAC,CAACiL,gBAAH,CAAL,IAA6Be,kBAAkB,CAAChM,CAAD,CAA5D,CAAJ,EAAsE;AACpE,eAAOA,CAAP;AACD;AACF;AACF;AACF;AAED;;AAEA;;;AAEA,SAASynB,UAAT,CAAqBrf,EAArB,EAAyB;AACvBA,EAAAA,EAAE,CAACsf,OAAH,GAAa7rB,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAb;AACA8J,EAAAA,EAAE,CAACuf,aAAH,GAAmB,KAAnB,CAFuB,CAGvB;;AACA,MAAI9G,SAAS,GAAGzY,EAAE,CAACQ,QAAH,CAAY2c,gBAA5B;;AACA,MAAI1E,SAAJ,EAAe;AACb+G,IAAAA,wBAAwB,CAACxf,EAAD,EAAKyY,SAAL,CAAxB;AACD;AACF;;AAED,IAAI5W,MAAJ;;AAEA,SAASxC,GAAT,CAAc6R,KAAd,EAAqB9Z,EAArB,EAAyB;AACvByK,EAAAA,MAAM,CAAC6c,GAAP,CAAWxN,KAAX,EAAkB9Z,EAAlB;AACD;;AAED,SAASqoB,QAAT,CAAmBvO,KAAnB,EAA0B9Z,EAA1B,EAA8B;AAC5ByK,EAAAA,MAAM,CAAC6d,IAAP,CAAYxO,KAAZ,EAAmB9Z,EAAnB;AACD;;AAED,SAAS4Z,iBAAT,CAA4BE,KAA5B,EAAmC9Z,EAAnC,EAAuC;AACrC,MAAIuoB,OAAO,GAAG9d,MAAd;AACA,SAAO,SAAS+d,WAAT,GAAwB;AAC7B,QAAIxmB,GAAG,GAAGhC,EAAE,CAACoB,KAAH,CAAS,IAAT,EAAeD,SAAf,CAAV;;AACA,QAAIa,GAAG,KAAK,IAAZ,EAAkB;AAChBumB,MAAAA,OAAO,CAACD,IAAR,CAAaxO,KAAb,EAAoB0O,WAApB;AACD;AACF,GALD;AAMD;;AAED,SAASJ,wBAAT,CACExf,EADF,EAEEyY,SAFF,EAGEoH,YAHF,EAIE;AACAhe,EAAAA,MAAM,GAAG7B,EAAT;AACA4Q,EAAAA,eAAe,CAAC6H,SAAD,EAAYoH,YAAY,IAAI,EAA5B,EAAgCxgB,GAAhC,EAAqCogB,QAArC,EAA+CzO,iBAA/C,EAAkEhR,EAAlE,CAAf;AACA6B,EAAAA,MAAM,GAAGhO,SAAT;AACD;;AAED,SAASisB,WAAT,CAAsBxC,GAAtB,EAA2B;AACzB,MAAIyC,MAAM,GAAG,QAAb;;AACAzC,EAAAA,GAAG,CAAChpB,SAAJ,CAAcoqB,GAAd,GAAoB,UAAUxN,KAAV,EAAiB9Z,EAAjB,EAAqB;AACvC,QAAI4I,EAAE,GAAG,IAAT;;AACA,QAAIxK,KAAK,CAACC,OAAN,CAAcyb,KAAd,CAAJ,EAA0B;AACxB,WAAK,IAAI7a,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG4Y,KAAK,CAAC5a,MAA1B,EAAkCD,CAAC,GAAGiC,CAAtC,EAAyCjC,CAAC,EAA1C,EAA8C;AAC5C2J,QAAAA,EAAE,CAAC0e,GAAH,CAAOxN,KAAK,CAAC7a,CAAD,CAAZ,EAAiBe,EAAjB;AACD;AACF,KAJD,MAIO;AACL,OAAC4I,EAAE,CAACsf,OAAH,CAAWpO,KAAX,MAAsBlR,EAAE,CAACsf,OAAH,CAAWpO,KAAX,IAAoB,EAA1C,CAAD,EAAgD/P,IAAhD,CAAqD/J,EAArD,EADK,CAEL;AACA;;AACA,UAAI2oB,MAAM,CAACrjB,IAAP,CAAYwU,KAAZ,CAAJ,EAAwB;AACtBlR,QAAAA,EAAE,CAACuf,aAAH,GAAmB,IAAnB;AACD;AACF;;AACD,WAAOvf,EAAP;AACD,GAfD;;AAiBAsd,EAAAA,GAAG,CAAChpB,SAAJ,CAAc0rB,KAAd,GAAsB,UAAU9O,KAAV,EAAiB9Z,EAAjB,EAAqB;AACzC,QAAI4I,EAAE,GAAG,IAAT;;AACA,aAAS6Q,EAAT,GAAe;AACb7Q,MAAAA,EAAE,CAAC0f,IAAH,CAAQxO,KAAR,EAAeL,EAAf;AACAzZ,MAAAA,EAAE,CAACoB,KAAH,CAASwH,EAAT,EAAazH,SAAb;AACD;;AACDsY,IAAAA,EAAE,CAACzZ,EAAH,GAAQA,EAAR;AACA4I,IAAAA,EAAE,CAAC0e,GAAH,CAAOxN,KAAP,EAAcL,EAAd;AACA,WAAO7Q,EAAP;AACD,GATD;;AAWAsd,EAAAA,GAAG,CAAChpB,SAAJ,CAAcorB,IAAd,GAAqB,UAAUxO,KAAV,EAAiB9Z,EAAjB,EAAqB;AACxC,QAAI4I,EAAE,GAAG,IAAT,CADwC,CAExC;;AACA,QAAI,CAACzH,SAAS,CAACjC,MAAf,EAAuB;AACrB0J,MAAAA,EAAE,CAACsf,OAAH,GAAa7rB,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAb;AACA,aAAO8J,EAAP;AACD,KANuC,CAOxC;;;AACA,QAAIxK,KAAK,CAACC,OAAN,CAAcyb,KAAd,CAAJ,EAA0B;AACxB,WAAK,IAAI+O,GAAG,GAAG,CAAV,EAAa3nB,CAAC,GAAG4Y,KAAK,CAAC5a,MAA5B,EAAoC2pB,GAAG,GAAG3nB,CAA1C,EAA6C2nB,GAAG,EAAhD,EAAoD;AAClDjgB,QAAAA,EAAE,CAAC0f,IAAH,CAAQxO,KAAK,CAAC+O,GAAD,CAAb,EAAoB7oB,EAApB;AACD;;AACD,aAAO4I,EAAP;AACD,KAbuC,CAcxC;;;AACA,QAAIkgB,GAAG,GAAGlgB,EAAE,CAACsf,OAAH,CAAWpO,KAAX,CAAV;;AACA,QAAI,CAACgP,GAAL,EAAU;AACR,aAAOlgB,EAAP;AACD;;AACD,QAAI,CAAC5I,EAAL,EAAS;AACP4I,MAAAA,EAAE,CAACsf,OAAH,CAAWpO,KAAX,IAAoB,IAApB;AACA,aAAOlR,EAAP;AACD,KAtBuC,CAuBxC;;;AACA,QAAIsO,EAAJ;AACA,QAAIjY,CAAC,GAAG6pB,GAAG,CAAC5pB,MAAZ;;AACA,WAAOD,CAAC,EAAR,EAAY;AACViY,MAAAA,EAAE,GAAG4R,GAAG,CAAC7pB,CAAD,CAAR;;AACA,UAAIiY,EAAE,KAAKlX,EAAP,IAAakX,EAAE,CAAClX,EAAH,KAAUA,EAA3B,EAA+B;AAC7B8oB,QAAAA,GAAG,CAACnpB,MAAJ,CAAWV,CAAX,EAAc,CAAd;AACA;AACD;AACF;;AACD,WAAO2J,EAAP;AACD,GAlCD;;AAoCAsd,EAAAA,GAAG,CAAChpB,SAAJ,CAAc6rB,KAAd,GAAsB,UAAUjP,KAAV,EAAiB;AACrC,QAAIlR,EAAE,GAAG,IAAT;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzC,UAAIogB,cAAc,GAAGlP,KAAK,CAAC3a,WAAN,EAArB;;AACA,UAAI6pB,cAAc,KAAKlP,KAAnB,IAA4BlR,EAAE,CAACsf,OAAH,CAAWc,cAAX,CAAhC,EAA4D;AAC1D5gB,QAAAA,GAAG,CACD,aAAa4gB,cAAb,GAA8B,6BAA9B,GACC1gB,mBAAmB,CAACM,EAAD,CADpB,GAC4B,uCAD5B,GACsEkR,KADtE,GAC8E,MAD9E,GAEA,oEAFA,GAGA,kEAHA,GAIA,4BAJA,GAIgCjZ,SAAS,CAACiZ,KAAD,CAJzC,GAIoD,kBAJpD,GAIyEA,KAJzE,GAIiF,KALhF,CAAH;AAOD;AACF;;AACD,QAAIgP,GAAG,GAAGlgB,EAAE,CAACsf,OAAH,CAAWpO,KAAX,CAAV;;AACA,QAAIgP,GAAJ,EAAS;AACPA,MAAAA,GAAG,GAAGA,GAAG,CAAC5pB,MAAJ,GAAa,CAAb,GAAiBuC,OAAO,CAACqnB,GAAD,CAAxB,GAAgCA,GAAtC;AACA,UAAIrb,IAAI,GAAGhM,OAAO,CAACN,SAAD,EAAY,CAAZ,CAAlB;AACA,UAAImU,IAAI,GAAG,yBAAyBwE,KAAzB,GAAiC,IAA5C;;AACA,WAAK,IAAI7a,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG4nB,GAAG,CAAC5pB,MAAxB,EAAgCD,CAAC,GAAGiC,CAApC,EAAuCjC,CAAC,EAAxC,EAA4C;AAC1C0W,QAAAA,uBAAuB,CAACmT,GAAG,CAAC7pB,CAAD,CAAJ,EAAS2J,EAAT,EAAa6E,IAAb,EAAmB7E,EAAnB,EAAuB0M,IAAvB,CAAvB;AACD;AACF;;AACD,WAAO1M,EAAP;AACD,GAxBD;AAyBD;AAED;;;AAEA,IAAI+Z,cAAc,GAAG,IAArB;AACA,IAAImD,wBAAwB,GAAG,KAA/B;;AAEA,SAASmD,iBAAT,CAA2BrgB,EAA3B,EAA+B;AAC7B,MAAIsgB,kBAAkB,GAAGvG,cAAzB;AACAA,EAAAA,cAAc,GAAG/Z,EAAjB;AACA,SAAO,YAAY;AACjB+Z,IAAAA,cAAc,GAAGuG,kBAAjB;AACD,GAFD;AAGD;;AAED,SAASC,aAAT,CAAwBvgB,EAAxB,EAA4B;AAC1B,MAAIK,OAAO,GAAGL,EAAE,CAACQ,QAAjB,CAD0B,CAG1B;;AACA,MAAI4C,MAAM,GAAG/C,OAAO,CAAC+C,MAArB;;AACA,MAAIA,MAAM,IAAI,CAAC/C,OAAO,CAACgb,QAAvB,EAAiC;AAC/B,WAAOjY,MAAM,CAAC5C,QAAP,CAAgB6a,QAAhB,IAA4BjY,MAAM,CAACrC,OAA1C,EAAmD;AACjDqC,MAAAA,MAAM,GAAGA,MAAM,CAACrC,OAAhB;AACD;;AACDqC,IAAAA,MAAM,CAACod,SAAP,CAAiBrf,IAAjB,CAAsBnB,EAAtB;AACD;;AAEDA,EAAAA,EAAE,CAACe,OAAH,GAAaqC,MAAb;AACApD,EAAAA,EAAE,CAACI,KAAH,GAAWgD,MAAM,GAAGA,MAAM,CAAChD,KAAV,GAAkBJ,EAAnC;AAEAA,EAAAA,EAAE,CAACwgB,SAAH,GAAe,EAAf;AACAxgB,EAAAA,EAAE,CAACygB,KAAH,GAAW,EAAX;AAEAzgB,EAAAA,EAAE,CAAC0gB,QAAH,GAAc,IAAd;AACA1gB,EAAAA,EAAE,CAAC2gB,SAAH,GAAe,IAAf;AACA3gB,EAAAA,EAAE,CAAC4gB,eAAH,GAAqB,KAArB;AACA5gB,EAAAA,EAAE,CAACoa,UAAH,GAAgB,KAAhB;AACApa,EAAAA,EAAE,CAAC0Z,YAAH,GAAkB,KAAlB;AACA1Z,EAAAA,EAAE,CAAC6gB,iBAAH,GAAuB,KAAvB;AACD;;AAED,SAASC,cAAT,CAAyBxD,GAAzB,EAA8B;AAC5BA,EAAAA,GAAG,CAAChpB,SAAJ,CAAcysB,OAAd,GAAwB,UAAU3c,KAAV,EAAiBqV,SAAjB,EAA4B;AAClD,QAAIzZ,EAAE,GAAG,IAAT;AACA,QAAIghB,MAAM,GAAGhhB,EAAE,CAACihB,GAAhB;AACA,QAAIC,SAAS,GAAGlhB,EAAE,CAAC8c,MAAnB;AACA,QAAIqE,qBAAqB,GAAGd,iBAAiB,CAACrgB,EAAD,CAA7C;AACAA,IAAAA,EAAE,CAAC8c,MAAH,GAAY1Y,KAAZ,CALkD,CAMlD;AACA;;AACA,QAAI,CAAC8c,SAAL,EAAgB;AACd;AACAlhB,MAAAA,EAAE,CAACihB,GAAH,GAASjhB,EAAE,CAACohB,SAAH,CAAaphB,EAAE,CAACihB,GAAhB,EAAqB7c,KAArB,EAA4BqV,SAA5B,EAAuC;AAAM;AAA7C,OAAT;AACD,KAHD,MAGO;AACL;AACAzZ,MAAAA,EAAE,CAACihB,GAAH,GAASjhB,EAAE,CAACohB,SAAH,CAAaF,SAAb,EAAwB9c,KAAxB,CAAT;AACD;;AACD+c,IAAAA,qBAAqB,GAf6B,CAgBlD;;AACA,QAAIH,MAAJ,EAAY;AACVA,MAAAA,MAAM,CAACK,OAAP,GAAiB,IAAjB;AACD;;AACD,QAAIrhB,EAAE,CAACihB,GAAP,EAAY;AACVjhB,MAAAA,EAAE,CAACihB,GAAH,CAAOI,OAAP,GAAiBrhB,EAAjB;AACD,KAtBiD,CAuBlD;;;AACA,QAAIA,EAAE,CAACsc,MAAH,IAAatc,EAAE,CAACe,OAAhB,IAA2Bf,EAAE,CAACsc,MAAH,KAActc,EAAE,CAACe,OAAH,CAAW+b,MAAxD,EAAgE;AAC9D9c,MAAAA,EAAE,CAACe,OAAH,CAAWkgB,GAAX,GAAiBjhB,EAAE,CAACihB,GAApB;AACD,KA1BiD,CA2BlD;AACA;;AACD,GA7BD;;AA+BA3D,EAAAA,GAAG,CAAChpB,SAAJ,CAAcuqB,YAAd,GAA6B,YAAY;AACvC,QAAI7e,EAAE,GAAG,IAAT;;AACA,QAAIA,EAAE,CAAC0gB,QAAP,EAAiB;AACf1gB,MAAAA,EAAE,CAAC0gB,QAAH,CAAYze,MAAZ;AACD;AACF,GALD;;AAOAqb,EAAAA,GAAG,CAAChpB,SAAJ,CAAcmmB,QAAd,GAAyB,YAAY;AACnC,QAAIza,EAAE,GAAG,IAAT;;AACA,QAAIA,EAAE,CAAC6gB,iBAAP,EAA0B;AACxB;AACD;;AACDxG,IAAAA,QAAQ,CAACra,EAAD,EAAK,eAAL,CAAR;AACAA,IAAAA,EAAE,CAAC6gB,iBAAH,GAAuB,IAAvB,CANmC,CAOnC;;AACA,QAAIzd,MAAM,GAAGpD,EAAE,CAACe,OAAhB;;AACA,QAAIqC,MAAM,IAAI,CAACA,MAAM,CAACyd,iBAAlB,IAAuC,CAAC7gB,EAAE,CAACQ,QAAH,CAAY6a,QAAxD,EAAkE;AAChE3kB,MAAAA,MAAM,CAAC0M,MAAM,CAACod,SAAR,EAAmBxgB,EAAnB,CAAN;AACD,KAXkC,CAYnC;;;AACA,QAAIA,EAAE,CAAC0gB,QAAP,EAAiB;AACf1gB,MAAAA,EAAE,CAAC0gB,QAAH,CAAYY,QAAZ;AACD;;AACD,QAAIjrB,CAAC,GAAG2J,EAAE,CAACuhB,SAAH,CAAajrB,MAArB;;AACA,WAAOD,CAAC,EAAR,EAAY;AACV2J,MAAAA,EAAE,CAACuhB,SAAH,CAAalrB,CAAb,EAAgBirB,QAAhB;AACD,KAnBkC,CAoBnC;AACA;;;AACA,QAAIthB,EAAE,CAACwhB,KAAH,CAASvc,MAAb,EAAqB;AACnBjF,MAAAA,EAAE,CAACwhB,KAAH,CAASvc,MAAT,CAAgBS,OAAhB;AACD,KAxBkC,CAyBnC;;;AACA1F,IAAAA,EAAE,CAAC0Z,YAAH,GAAkB,IAAlB,CA1BmC,CA2BnC;;AACA1Z,IAAAA,EAAE,CAACohB,SAAH,CAAaphB,EAAE,CAAC8c,MAAhB,EAAwB,IAAxB,EA5BmC,CA6BnC;;;AACAzC,IAAAA,QAAQ,CAACra,EAAD,EAAK,WAAL,CAAR,CA9BmC,CA+BnC;;AACAA,IAAAA,EAAE,CAAC0f,IAAH,GAhCmC,CAiCnC;;AACA,QAAI1f,EAAE,CAACihB,GAAP,EAAY;AACVjhB,MAAAA,EAAE,CAACihB,GAAH,CAAOI,OAAP,GAAiB,IAAjB;AACD,KApCkC,CAqCnC;;;AACA,QAAIrhB,EAAE,CAACsc,MAAP,EAAe;AACbtc,MAAAA,EAAE,CAACsc,MAAH,CAAUlZ,MAAV,GAAmB,IAAnB;AACD;AACF,GAzCD;AA0CD;;AAED,SAASqe,cAAT,CACEzhB,EADF,EAEEmH,EAFF,EAGEsS,SAHF,EAIE;AACAzZ,EAAAA,EAAE,CAACihB,GAAH,GAAS9Z,EAAT;;AACA,MAAI,CAACnH,EAAE,CAACQ,QAAH,CAAY4O,MAAjB,EAAyB;AACvBpP,IAAAA,EAAE,CAACQ,QAAH,CAAY4O,MAAZ,GAAqBpL,gBAArB;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzC;AACA,UAAKhE,EAAE,CAACQ,QAAH,CAAYkhB,QAAZ,IAAwB1hB,EAAE,CAACQ,QAAH,CAAYkhB,QAAZ,CAAqB3pB,MAArB,CAA4B,CAA5B,MAAmC,GAA5D,IACFiI,EAAE,CAACQ,QAAH,CAAY2G,EADV,IACgBA,EADpB,EACwB;AACtB5H,QAAAA,IAAI,CACF,oEACA,mEADA,GAEA,uDAHE,EAIFS,EAJE,CAAJ;AAMD,OARD,MAQO;AACLT,QAAAA,IAAI,CACF,qEADE,EAEFS,EAFE,CAAJ;AAID;AACF;AACF;;AACDqa,EAAAA,QAAQ,CAACra,EAAD,EAAK,aAAL,CAAR;AAEA,MAAI2hB,eAAJ;AACA;;AACA,MAAI,kBAAyB,YAAzB,IAAyChnB,MAAM,CAACK,WAAhD,IAA+D8U,IAAnE,EAAyE;AACvE6R,IAAAA,eAAe,GAAG,YAAY;AAC5B,UAAIjhB,IAAI,GAAGV,EAAE,CAAC4hB,KAAd;AACA,UAAIrgB,EAAE,GAAGvB,EAAE,CAAC6hB,IAAZ;AACA,UAAI1R,QAAQ,GAAG,oBAAoB5O,EAAnC;AACA,UAAI6O,MAAM,GAAG,kBAAkB7O,EAA/B;AAEAuO,MAAAA,IAAI,CAACK,QAAD,CAAJ;;AACA,UAAI/L,KAAK,GAAGpE,EAAE,CAACwd,OAAH,EAAZ;;AACA1N,MAAAA,IAAI,CAACM,MAAD,CAAJ;AACAL,MAAAA,OAAO,CAAE,SAASrP,IAAT,GAAgB,SAAlB,EAA8ByP,QAA9B,EAAwCC,MAAxC,CAAP;AAEAN,MAAAA,IAAI,CAACK,QAAD,CAAJ;;AACAnQ,MAAAA,EAAE,CAAC+gB,OAAH,CAAW3c,KAAX,EAAkBqV,SAAlB;;AACA3J,MAAAA,IAAI,CAACM,MAAD,CAAJ;AACAL,MAAAA,OAAO,CAAE,SAASrP,IAAT,GAAgB,QAAlB,EAA6ByP,QAA7B,EAAuCC,MAAvC,CAAP;AACD,KAfD;AAgBD,GAjBD,MAiBO;AACLuR,IAAAA,eAAe,GAAG,YAAY;AAC5B3hB,MAAAA,EAAE,CAAC+gB,OAAH,CAAW/gB,EAAE,CAACwd,OAAH,EAAX,EAAyB/D,SAAzB;AACD,KAFD;AAGD,GA/CD,CAiDA;AACA;AACA;;;AACA,MAAIqI,OAAJ,CAAY9hB,EAAZ,EAAgB2hB,eAAhB,EAAiCtoB,IAAjC,EAAuC;AACrC0oB,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAmB;AACzB,UAAI/hB,EAAE,CAACoa,UAAH,IAAiB,CAACpa,EAAE,CAAC0Z,YAAzB,EAAuC;AACrCW,QAAAA,QAAQ,CAACra,EAAD,EAAK,cAAL,CAAR;AACD;AACF;AALoC,GAAvC,EAMG;AAAK;AANR;AAOAyZ,EAAAA,SAAS,GAAG,KAAZ,CA3DA,CA6DA;AACA;;AACA,MAAIzZ,EAAE,CAACsc,MAAH,IAAa,IAAjB,EAAuB;AACrBtc,IAAAA,EAAE,CAACoa,UAAH,GAAgB,IAAhB;AACAC,IAAAA,QAAQ,CAACra,EAAD,EAAK,SAAL,CAAR;AACD;;AACD,SAAOA,EAAP;AACD;;AAED,SAASka,oBAAT,CACEla,EADF,EAEEoH,SAFF,EAGEqR,SAHF,EAIEsE,WAJF,EAKEiF,cALF,EAME;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzC9E,IAAAA,wBAAwB,GAAG,IAA3B;AACD,GAHD,CAKA;AACA;AAEA;AACA;AACA;;;AACA,MAAI+E,cAAc,GAAGlF,WAAW,CAACva,IAAZ,CAAiBmW,WAAtC;AACA,MAAIuJ,cAAc,GAAGliB,EAAE,CAACwU,YAAxB;AACA,MAAI2N,oBAAoB,GAAG,CAAC,EACzBF,cAAc,IAAI,CAACA,cAAc,CAACzO,OAAnC,IACC0O,cAAc,KAAK1uB,WAAnB,IAAkC,CAAC0uB,cAAc,CAAC1O,OADnD,IAECyO,cAAc,IAAIjiB,EAAE,CAACwU,YAAH,CAAgBf,IAAhB,KAAyBwO,cAAc,CAACxO,IAHjC,CAA5B,CAbA,CAmBA;AACA;AACA;;AACA,MAAI2O,gBAAgB,GAAG,CAAC,EACtBJ,cAAc,IAAkB;AAChChiB,EAAAA,EAAE,CAACQ,QAAH,CAAYwc,eADZ,IACgC;AAChCmF,EAAAA,oBAHsB,CAAxB;AAMAniB,EAAAA,EAAE,CAACQ,QAAH,CAAYgb,YAAZ,GAA2BuB,WAA3B;AACA/c,EAAAA,EAAE,CAACsc,MAAH,GAAYS,WAAZ,CA7BA,CA6ByB;;AAEzB,MAAI/c,EAAE,CAAC8c,MAAP,EAAe;AAAE;AACf9c,IAAAA,EAAE,CAAC8c,MAAH,CAAU1Z,MAAV,GAAmB2Z,WAAnB;AACD;;AACD/c,EAAAA,EAAE,CAACQ,QAAH,CAAYwc,eAAZ,GAA8BgF,cAA9B,CAlCA,CAoCA;AACA;AACA;;AACAhiB,EAAAA,EAAE,CAACqiB,MAAH,GAAYtF,WAAW,CAACva,IAAZ,CAAiBkP,KAAjB,IAA0Ble,WAAtC;AACAwM,EAAAA,EAAE,CAACsiB,UAAH,GAAgB7J,SAAS,IAAIjlB,WAA7B,CAxCA,CA0CA;;AACA,MAAI4T,SAAS,IAAIpH,EAAE,CAACQ,QAAH,CAAYkI,KAA7B,EAAoC;AAClClD,IAAAA,eAAe,CAAC,KAAD,CAAf;AACA,QAAIkD,KAAK,GAAG1I,EAAE,CAACgL,MAAf;AACA,QAAIuX,QAAQ,GAAGviB,EAAE,CAACQ,QAAH,CAAYgiB,SAAZ,IAAyB,EAAxC;;AACA,SAAK,IAAInsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGksB,QAAQ,CAACjsB,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAIa,GAAG,GAAGqrB,QAAQ,CAAClsB,CAAD,CAAlB;AACA,UAAIgU,WAAW,GAAGrK,EAAE,CAACQ,QAAH,CAAYkI,KAA9B,CAFwC,CAEH;;AACrCA,MAAAA,KAAK,CAACxR,GAAD,CAAL,GAAakT,YAAY,CAAClT,GAAD,EAAMmT,WAAN,EAAmBjD,SAAnB,EAA8BpH,EAA9B,CAAzB;AACD;;AACDwF,IAAAA,eAAe,CAAC,IAAD,CAAf,CATkC,CAUlC;;AACAxF,IAAAA,EAAE,CAACQ,QAAH,CAAY4G,SAAZ,GAAwBA,SAAxB;AACD,GAvDD,CAyDA;;;AACAqR,EAAAA,SAAS,GAAGA,SAAS,IAAIjlB,WAAzB;AACA,MAAIqsB,YAAY,GAAG7f,EAAE,CAACQ,QAAH,CAAY2c,gBAA/B;AACAnd,EAAAA,EAAE,CAACQ,QAAH,CAAY2c,gBAAZ,GAA+B1E,SAA/B;AACA+G,EAAAA,wBAAwB,CAACxf,EAAD,EAAKyY,SAAL,EAAgBoH,YAAhB,CAAxB,CA7DA,CA+DA;;AACA,MAAIuC,gBAAJ,EAAsB;AACpBpiB,IAAAA,EAAE,CAAC0U,MAAH,GAAY5B,YAAY,CAACkP,cAAD,EAAiBjF,WAAW,CAACna,OAA7B,CAAxB;AACA5C,IAAAA,EAAE,CAAC6e,YAAH;AACD;;AAED,MAAI,kBAAyB,YAA7B,EAA2C;AACzC3B,IAAAA,wBAAwB,GAAG,KAA3B;AACD;AACF;;AAED,SAASuF,gBAAT,CAA2BziB,EAA3B,EAA+B;AAC7B,SAAOA,EAAE,KAAKA,EAAE,GAAGA,EAAE,CAACe,OAAb,CAAT,EAAgC;AAC9B,QAAIf,EAAE,CAAC2gB,SAAP,EAAkB;AAAE,aAAO,IAAP;AAAa;AAClC;;AACD,SAAO,KAAP;AACD;;AAED,SAASpG,sBAAT,CAAiCva,EAAjC,EAAqC0iB,MAArC,EAA6C;AAC3C,MAAIA,MAAJ,EAAY;AACV1iB,IAAAA,EAAE,CAAC4gB,eAAH,GAAqB,KAArB;;AACA,QAAI6B,gBAAgB,CAACziB,EAAD,CAApB,EAA0B;AACxB;AACD;AACF,GALD,MAKO,IAAIA,EAAE,CAAC4gB,eAAP,EAAwB;AAC7B;AACD;;AACD,MAAI5gB,EAAE,CAAC2gB,SAAH,IAAgB3gB,EAAE,CAAC2gB,SAAH,KAAiB,IAArC,EAA2C;AACzC3gB,IAAAA,EAAE,CAAC2gB,SAAH,GAAe,KAAf;;AACA,SAAK,IAAItqB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2J,EAAE,CAACwgB,SAAH,CAAalqB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CkkB,MAAAA,sBAAsB,CAACva,EAAE,CAACwgB,SAAH,CAAanqB,CAAb,CAAD,CAAtB;AACD;;AACDgkB,IAAAA,QAAQ,CAACra,EAAD,EAAK,WAAL,CAAR;AACD;AACF;;AAED,SAAS0a,wBAAT,CAAmC1a,EAAnC,EAAuC0iB,MAAvC,EAA+C;AAC7C,MAAIA,MAAJ,EAAY;AACV1iB,IAAAA,EAAE,CAAC4gB,eAAH,GAAqB,IAArB;;AACA,QAAI6B,gBAAgB,CAACziB,EAAD,CAApB,EAA0B;AACxB;AACD;AACF;;AACD,MAAI,CAACA,EAAE,CAAC2gB,SAAR,EAAmB;AACjB3gB,IAAAA,EAAE,CAAC2gB,SAAH,GAAe,IAAf;;AACA,SAAK,IAAItqB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2J,EAAE,CAACwgB,SAAH,CAAalqB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CqkB,MAAAA,wBAAwB,CAAC1a,EAAE,CAACwgB,SAAH,CAAanqB,CAAb,CAAD,CAAxB;AACD;;AACDgkB,IAAAA,QAAQ,CAACra,EAAD,EAAK,aAAL,CAAR;AACD;AACF;;AAED,SAASqa,QAAT,CAAmBra,EAAnB,EAAuBqI,IAAvB,EAA6B;AAC3B;AACAlG,EAAAA,UAAU;AACV,MAAIgN,QAAQ,GAAGnP,EAAE,CAACQ,QAAH,CAAY6H,IAAZ,CAAf;AACA,MAAIqE,IAAI,GAAGrE,IAAI,GAAG,OAAlB;;AACA,MAAI8G,QAAJ,EAAc;AACZ,SAAK,IAAI9Y,CAAC,GAAG,CAAR,EAAWssB,CAAC,GAAGxT,QAAQ,CAAC7Y,MAA7B,EAAqCD,CAAC,GAAGssB,CAAzC,EAA4CtsB,CAAC,EAA7C,EAAiD;AAC/C0W,MAAAA,uBAAuB,CAACoC,QAAQ,CAAC9Y,CAAD,CAAT,EAAc2J,EAAd,EAAkB,IAAlB,EAAwBA,EAAxB,EAA4B0M,IAA5B,CAAvB;AACD;AACF;;AACD,MAAI1M,EAAE,CAACuf,aAAP,EAAsB;AACpBvf,IAAAA,EAAE,CAACmgB,KAAH,CAAS,UAAU9X,IAAnB;AACD;;AACDjG,EAAAA,SAAS;AACV;AAED;;;AAEA,IAAIwgB,gBAAgB,GAAG,GAAvB;AAEA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,IAAI1jB,GAAG,GAAG,EAAV;AACA,IAAI2jB,QAAQ,GAAG,EAAf;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIpsB,KAAK,GAAG,CAAZ;AAEA;AACA;AACA;;AACA,SAASqsB,mBAAT,GAAgC;AAC9BrsB,EAAAA,KAAK,GAAGgsB,KAAK,CAACvsB,MAAN,GAAewsB,iBAAiB,CAACxsB,MAAlB,GAA2B,CAAlD;AACA8I,EAAAA,GAAG,GAAG,EAAN;;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzC2jB,IAAAA,QAAQ,GAAG,EAAX;AACD;;AACDC,EAAAA,OAAO,GAAGC,QAAQ,GAAG,KAArB;AACD,EAED;AACA;AACA;AACA;AACA;;;AACA,IAAIE,qBAAqB,GAAG,CAA5B,EAEA;;AACA,IAAIC,MAAM,GAAGppB,IAAI,CAACqpB,GAAlB,EAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIxmB,SAAS,IAAI,CAACS,IAAlB,EAAwB;AACtB,MAAItC,WAAW,GAAG8B,MAAM,CAAC9B,WAAzB;;AACA,MACEA,WAAW,IACX,OAAOA,WAAW,CAACqoB,GAAnB,KAA2B,UAD3B,IAEAD,MAAM,KAAKnV,QAAQ,CAACqV,WAAT,CAAqB,OAArB,EAA8BC,SAH3C,EAIE;AACA;AACA;AACA;AACA;AACAH,IAAAA,MAAM,GAAG,YAAY;AAAE,aAAOpoB,WAAW,CAACqoB,GAAZ,EAAP;AAA2B,KAAlD;AACD;AACF;AAED;AACA;AACA;;;AACA,SAASG,mBAAT,GAAgC;AAC9BL,EAAAA,qBAAqB,GAAGC,MAAM,EAA9B;AACAH,EAAAA,QAAQ,GAAG,IAAX;AACA,MAAIQ,OAAJ,EAAaliB,EAAb,CAH8B,CAK9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAshB,EAAAA,KAAK,CAAC7gB,IAAN,CAAW,UAAU3J,CAAV,EAAaiB,CAAb,EAAgB;AAAE,WAAOjB,CAAC,CAACkJ,EAAF,GAAOjI,CAAC,CAACiI,EAAhB;AAAqB,GAAlD,EAb8B,CAe9B;AACA;;AACA,OAAK1K,KAAK,GAAG,CAAb,EAAgBA,KAAK,GAAGgsB,KAAK,CAACvsB,MAA9B,EAAsCO,KAAK,EAA3C,EAA+C;AAC7C4sB,IAAAA,OAAO,GAAGZ,KAAK,CAAChsB,KAAD,CAAf;;AACA,QAAI4sB,OAAO,CAAC1B,MAAZ,EAAoB;AAClB0B,MAAAA,OAAO,CAAC1B,MAAR;AACD;;AACDxgB,IAAAA,EAAE,GAAGkiB,OAAO,CAACliB,EAAb;AACAnC,IAAAA,GAAG,CAACmC,EAAD,CAAH,GAAU,IAAV;AACAkiB,IAAAA,OAAO,CAACC,GAAR,GAP6C,CAQ7C;;AACA,QAAI,kBAAyB,YAAzB,IAAyCtkB,GAAG,CAACmC,EAAD,CAAH,IAAW,IAAxD,EAA8D;AAC5DwhB,MAAAA,QAAQ,CAACxhB,EAAD,CAAR,GAAe,CAACwhB,QAAQ,CAACxhB,EAAD,CAAR,IAAgB,CAAjB,IAAsB,CAArC;;AACA,UAAIwhB,QAAQ,CAACxhB,EAAD,CAAR,GAAeqhB,gBAAnB,EAAqC;AACnCrjB,QAAAA,IAAI,CACF,2CACEkkB,OAAO,CAACE,IAAR,GACK,kCAAmCF,OAAO,CAACG,UAA3C,GAAyD,IAD9D,GAEI,iCAHN,CADE,EAMFH,OAAO,CAACzjB,EANN,CAAJ;AAQA;AACD;AACF;AACF,GAxC6B,CA0C9B;;;AACA,MAAI6jB,cAAc,GAAGf,iBAAiB,CAACpuB,KAAlB,EAArB;AACA,MAAIovB,YAAY,GAAGjB,KAAK,CAACnuB,KAAN,EAAnB;AAEAwuB,EAAAA,mBAAmB,GA9CW,CAgD9B;;AACAa,EAAAA,kBAAkB,CAACF,cAAD,CAAlB;AACAG,EAAAA,gBAAgB,CAACF,YAAD,CAAhB,CAlD8B,CAoD9B;;AACA;;AACA,MAAI/oB,QAAQ,IAAIJ,MAAM,CAACI,QAAvB,EAAiC;AAC/BA,IAAAA,QAAQ,CAACkpB,IAAT,CAAc,OAAd;AACD;AACF;;AAED,SAASD,gBAAT,CAA2BnB,KAA3B,EAAkC;AAChC,MAAIxsB,CAAC,GAAGwsB,KAAK,CAACvsB,MAAd;;AACA,SAAOD,CAAC,EAAR,EAAY;AACV,QAAIotB,OAAO,GAAGZ,KAAK,CAACxsB,CAAD,CAAnB;AACA,QAAI2J,EAAE,GAAGyjB,OAAO,CAACzjB,EAAjB;;AACA,QAAIA,EAAE,CAAC0gB,QAAH,KAAgB+C,OAAhB,IAA2BzjB,EAAE,CAACoa,UAA9B,IAA4C,CAACpa,EAAE,CAAC0Z,YAApD,EAAkE;AAChEW,MAAAA,QAAQ,CAACra,EAAD,EAAK,SAAL,CAAR;AACD;AACF;AACF;AAED;AACA;AACA;AACA;;;AACA,SAASsa,uBAAT,CAAkCta,EAAlC,EAAsC;AACpC;AACA;AACAA,EAAAA,EAAE,CAAC2gB,SAAH,GAAe,KAAf;AACAmC,EAAAA,iBAAiB,CAAC3hB,IAAlB,CAAuBnB,EAAvB;AACD;;AAED,SAAS+jB,kBAAT,CAA6BlB,KAA7B,EAAoC;AAClC,OAAK,IAAIxsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwsB,KAAK,CAACvsB,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCwsB,IAAAA,KAAK,CAACxsB,CAAD,CAAL,CAASsqB,SAAT,GAAqB,IAArB;AACApG,IAAAA,sBAAsB,CAACsI,KAAK,CAACxsB,CAAD,CAAN,EAAW;AAAK;AAAhB,KAAtB;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,SAAS6tB,YAAT,CAAuBT,OAAvB,EAAgC;AAC9B,MAAIliB,EAAE,GAAGkiB,OAAO,CAACliB,EAAjB;;AACA,MAAInC,GAAG,CAACmC,EAAD,CAAH,IAAW,IAAf,EAAqB;AACnBnC,IAAAA,GAAG,CAACmC,EAAD,CAAH,GAAU,IAAV;;AACA,QAAI,CAAC0hB,QAAL,EAAe;AACbJ,MAAAA,KAAK,CAAC1hB,IAAN,CAAWsiB,OAAX;AACD,KAFD,MAEO;AACL;AACA;AACA,UAAIptB,CAAC,GAAGwsB,KAAK,CAACvsB,MAAN,GAAe,CAAvB;;AACA,aAAOD,CAAC,GAAGQ,KAAJ,IAAagsB,KAAK,CAACxsB,CAAD,CAAL,CAASkL,EAAT,GAAckiB,OAAO,CAACliB,EAA1C,EAA8C;AAC5ClL,QAAAA,CAAC;AACF;;AACDwsB,MAAAA,KAAK,CAAC9rB,MAAN,CAAaV,CAAC,GAAG,CAAjB,EAAoB,CAApB,EAAuBotB,OAAvB;AACD,KAZkB,CAanB;;;AACA,QAAI,CAACT,OAAL,EAAc;AACZA,MAAAA,OAAO,GAAG,IAAV;;AAEA,UAAI,kBAAyB,YAAzB,IAAyC,CAACroB,MAAM,CAACgB,KAArD,EAA4D;AAC1D6nB,QAAAA,mBAAmB;AACnB;AACD;;AACDnV,MAAAA,QAAQ,CAACmV,mBAAD,CAAR;AACD;AACF;AACF;AAED;;;AAIA,IAAIW,KAAK,GAAG,CAAZ;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAIrC,OAAO,GAAG,SAASA,OAAT,CACZ9hB,EADY,EAEZokB,OAFY,EAGZ9V,EAHY,EAIZjO,OAJY,EAKZgkB,eALY,EAMZ;AACA,OAAKrkB,EAAL,GAAUA,EAAV;;AACA,MAAIqkB,eAAJ,EAAqB;AACnBrkB,IAAAA,EAAE,CAAC0gB,QAAH,GAAc,IAAd;AACD;;AACD1gB,EAAAA,EAAE,CAACuhB,SAAH,CAAapgB,IAAb,CAAkB,IAAlB,EALA,CAMA;;;AACA,MAAId,OAAJ,EAAa;AACX,SAAKikB,IAAL,GAAY,CAAC,CAACjkB,OAAO,CAACikB,IAAtB;AACA,SAAKX,IAAL,GAAY,CAAC,CAACtjB,OAAO,CAACsjB,IAAtB;AACA,SAAKY,IAAL,GAAY,CAAC,CAAClkB,OAAO,CAACkkB,IAAtB;AACA,SAAKhG,IAAL,GAAY,CAAC,CAACle,OAAO,CAACke,IAAtB;AACA,SAAKwD,MAAL,GAAc1hB,OAAO,CAAC0hB,MAAtB;AACD,GAND,MAMO;AACL,SAAKuC,IAAL,GAAY,KAAKX,IAAL,GAAY,KAAKY,IAAL,GAAY,KAAKhG,IAAL,GAAY,KAAhD;AACD;;AACD,OAAKjQ,EAAL,GAAUA,EAAV;AACA,OAAK/M,EAAL,GAAU,EAAE4iB,KAAZ,CAjBA,CAiBmB;;AACnB,OAAKK,MAAL,GAAc,IAAd;AACA,OAAKC,KAAL,GAAa,KAAKF,IAAlB,CAnBA,CAmBwB;;AACxB,OAAKG,IAAL,GAAY,EAAZ;AACA,OAAKC,OAAL,GAAe,EAAf;AACA,OAAKC,MAAL,GAAc,IAAI3lB,IAAJ,EAAd;AACA,OAAK4lB,SAAL,GAAiB,IAAI5lB,IAAJ,EAAjB;AACA,OAAK2kB,UAAL,GAAkB,kBAAyB,YAAzB,GACdQ,OAAO,CAAC7vB,QAAR,EADc,GAEd,EAFJ,CAxBA,CA2BA;;AACA,MAAI,OAAO6vB,OAAP,KAAmB,UAAvB,EAAmC;AACjC,SAAK3d,MAAL,GAAc2d,OAAd;AACD,GAFD,MAEO;AACL,SAAK3d,MAAL,GAAcjK,SAAS,CAAC4nB,OAAD,CAAvB;;AACA,QAAI,CAAC,KAAK3d,MAAV,EAAkB;AAChB,WAAKA,MAAL,GAAcpN,IAAd;AACA,wBAAyB,YAAzB,IAAyCkG,IAAI,CAC3C,6BAA6B6kB,OAA7B,GAAuC,KAAvC,GACA,mDADA,GAEA,2CAH2C,EAI3CpkB,EAJ2C,CAA7C;AAMD;AACF;;AACD,OAAK9L,KAAL,GAAa,KAAKqwB,IAAL,GACT1wB,SADS,GAET,KAAKsK,GAAL,EAFJ;AAGD,CAnDD;AAqDA;AACA;AACA;;;AACA2jB,OAAO,CAACxtB,SAAR,CAAkB6J,GAAlB,GAAwB,SAASA,GAAT,GAAgB;AACtCgE,EAAAA,UAAU,CAAC,IAAD,CAAV;AACA,MAAIjO,KAAJ;AACA,MAAI8L,EAAE,GAAG,KAAKA,EAAd;;AACA,MAAI;AACF9L,IAAAA,KAAK,GAAG,KAAKuS,MAAL,CAAYhS,IAAZ,CAAiBuL,EAAjB,EAAqBA,EAArB,CAAR;AACD,GAFD,CAEE,OAAOjG,CAAP,EAAU;AACV,QAAI,KAAK4pB,IAAT,EAAe;AACbnX,MAAAA,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAS,0BAA2B,KAAK4jB,UAAhC,GAA8C,IAAvD,CAAX;AACD,KAFD,MAEO;AACL,YAAM7pB,CAAN;AACD;AACF,GARD,SAQU;AACR;AACA;AACA,QAAI,KAAKuqB,IAAT,EAAe;AACb9U,MAAAA,QAAQ,CAACtb,KAAD,CAAR;AACD;;AACDkO,IAAAA,SAAS;AACT,SAAK0iB,WAAL;AACD;;AACD,SAAO5wB,KAAP;AACD,CAtBD;AAwBA;AACA;AACA;;;AACA4tB,OAAO,CAACxtB,SAAR,CAAkBwN,MAAlB,GAA2B,SAASA,MAAT,CAAiBsD,GAAjB,EAAsB;AAC/C,MAAI7D,EAAE,GAAG6D,GAAG,CAAC7D,EAAb;;AACA,MAAI,CAAC,KAAKsjB,SAAL,CAAezlB,GAAf,CAAmBmC,EAAnB,CAAL,EAA6B;AAC3B,SAAKsjB,SAAL,CAAexlB,GAAf,CAAmBkC,EAAnB;AACA,SAAKojB,OAAL,CAAaxjB,IAAb,CAAkBiE,GAAlB;;AACA,QAAI,CAAC,KAAKwf,MAAL,CAAYxlB,GAAZ,CAAgBmC,EAAhB,CAAL,EAA0B;AACxB6D,MAAAA,GAAG,CAAC3D,MAAJ,CAAW,IAAX;AACD;AACF;AACF,CATD;AAWA;AACA;AACA;;;AACAqgB,OAAO,CAACxtB,SAAR,CAAkBwwB,WAAlB,GAAgC,SAASA,WAAT,GAAwB;AACtD,MAAIzuB,CAAC,GAAG,KAAKquB,IAAL,CAAUpuB,MAAlB;;AACA,SAAOD,CAAC,EAAR,EAAY;AACV,QAAI+O,GAAG,GAAG,KAAKsf,IAAL,CAAUruB,CAAV,CAAV;;AACA,QAAI,CAAC,KAAKwuB,SAAL,CAAezlB,GAAf,CAAmBgG,GAAG,CAAC7D,EAAvB,CAAL,EAAiC;AAC/B6D,MAAAA,GAAG,CAACzD,SAAJ,CAAc,IAAd;AACD;AACF;;AACD,MAAIojB,GAAG,GAAG,KAAKH,MAAf;AACA,OAAKA,MAAL,GAAc,KAAKC,SAAnB;AACA,OAAKA,SAAL,GAAiBE,GAAjB;AACA,OAAKF,SAAL,CAAevlB,KAAf;AACAylB,EAAAA,GAAG,GAAG,KAAKL,IAAX;AACA,OAAKA,IAAL,GAAY,KAAKC,OAAjB;AACA,OAAKA,OAAL,GAAeI,GAAf;AACA,OAAKJ,OAAL,CAAaruB,MAAb,GAAsB,CAAtB;AACD,CAhBD;AAkBA;AACA;AACA;AACA;;;AACAwrB,OAAO,CAACxtB,SAAR,CAAkB2N,MAAlB,GAA2B,SAASA,MAAT,GAAmB;AAC5C;AACA,MAAI,KAAKsiB,IAAT,EAAe;AACb,SAAKE,KAAL,GAAa,IAAb;AACD,GAFD,MAEO,IAAI,KAAKlG,IAAT,EAAe;AACpB,SAAKmF,GAAL;AACD,GAFM,MAEA;AACLQ,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,CATD;AAWA;AACA;AACA;AACA;;;AACApC,OAAO,CAACxtB,SAAR,CAAkBovB,GAAlB,GAAwB,SAASA,GAAT,GAAgB;AACtC,MAAI,KAAKc,MAAT,EAAiB;AACf,QAAItwB,KAAK,GAAG,KAAKiK,GAAL,EAAZ;;AACA,QACEjK,KAAK,KAAK,KAAKA,KAAf,IACA;AACA;AACA;AACAC,IAAAA,QAAQ,CAACD,KAAD,CAJR,IAKA,KAAKowB,IANP,EAOE;AACA;AACA,UAAIU,QAAQ,GAAG,KAAK9wB,KAApB;AACA,WAAKA,KAAL,GAAaA,KAAb;;AACA,UAAI,KAAKyvB,IAAT,EAAe;AACb,YAAI;AACF,eAAKrV,EAAL,CAAQ7Z,IAAR,CAAa,KAAKuL,EAAlB,EAAsB9L,KAAtB,EAA6B8wB,QAA7B;AACD,SAFD,CAEE,OAAOjrB,CAAP,EAAU;AACVyS,UAAAA,WAAW,CAACzS,CAAD,EAAI,KAAKiG,EAAT,EAAc,4BAA6B,KAAK4jB,UAAlC,GAAgD,IAA9D,CAAX;AACD;AACF,OAND,MAMO;AACL,aAAKtV,EAAL,CAAQ7Z,IAAR,CAAa,KAAKuL,EAAlB,EAAsB9L,KAAtB,EAA6B8wB,QAA7B;AACD;AACF;AACF;AACF,CAzBD;AA2BA;AACA;AACA;AACA;;;AACAlD,OAAO,CAACxtB,SAAR,CAAkB2wB,QAAlB,GAA6B,SAASA,QAAT,GAAqB;AAChD,OAAK/wB,KAAL,GAAa,KAAKiK,GAAL,EAAb;AACA,OAAKsmB,KAAL,GAAa,KAAb;AACD,CAHD;AAKA;AACA;AACA;;;AACA3C,OAAO,CAACxtB,SAAR,CAAkBsN,MAAlB,GAA2B,SAASA,MAAT,GAAmB;AAC5C,MAAIvL,CAAC,GAAG,KAAKquB,IAAL,CAAUpuB,MAAlB;;AACA,SAAOD,CAAC,EAAR,EAAY;AACV,SAAKquB,IAAL,CAAUruB,CAAV,EAAauL,MAAb;AACD;AACF,CALD;AAOA;AACA;AACA;;;AACAkgB,OAAO,CAACxtB,SAAR,CAAkBgtB,QAAlB,GAA6B,SAASA,QAAT,GAAqB;AAChD,MAAI,KAAKkD,MAAT,EAAiB;AACf;AACA;AACA;AACA,QAAI,CAAC,KAAKxkB,EAAL,CAAQ6gB,iBAAb,EAAgC;AAC9BnqB,MAAAA,MAAM,CAAC,KAAKsJ,EAAL,CAAQuhB,SAAT,EAAoB,IAApB,CAAN;AACD;;AACD,QAAIlrB,CAAC,GAAG,KAAKquB,IAAL,CAAUpuB,MAAlB;;AACA,WAAOD,CAAC,EAAR,EAAY;AACV,WAAKquB,IAAL,CAAUruB,CAAV,EAAasL,SAAb,CAAuB,IAAvB;AACD;;AACD,SAAK6iB,MAAL,GAAc,KAAd;AACD;AACF,CAdD;AAgBA;;;AAEA,IAAIU,wBAAwB,GAAG;AAC7BjpB,EAAAA,UAAU,EAAE,IADiB;AAE7BG,EAAAA,YAAY,EAAE,IAFe;AAG7B+B,EAAAA,GAAG,EAAE9E,IAHwB;AAI7B8F,EAAAA,GAAG,EAAE9F;AAJwB,CAA/B;;AAOA,SAAS0a,KAAT,CAAgBlS,MAAhB,EAAwBsjB,SAAxB,EAAmCjuB,GAAnC,EAAwC;AACtCguB,EAAAA,wBAAwB,CAAC/mB,GAAzB,GAA+B,SAASinB,WAAT,GAAwB;AACrD,WAAO,KAAKD,SAAL,EAAgBjuB,GAAhB,CAAP;AACD,GAFD;;AAGAguB,EAAAA,wBAAwB,CAAC/lB,GAAzB,GAA+B,SAASkmB,WAAT,CAAsBvwB,GAAtB,EAA2B;AACxD,SAAKqwB,SAAL,EAAgBjuB,GAAhB,IAAuBpC,GAAvB;AACD,GAFD;;AAGArB,EAAAA,MAAM,CAACyI,cAAP,CAAsB2F,MAAtB,EAA8B3K,GAA9B,EAAmCguB,wBAAnC;AACD;;AAED,SAASI,SAAT,CAAoBtlB,EAApB,EAAwB;AACtBA,EAAAA,EAAE,CAACuhB,SAAH,GAAe,EAAf;AACA,MAAIrjB,IAAI,GAAG8B,EAAE,CAACQ,QAAd;;AACA,MAAItC,IAAI,CAACwK,KAAT,EAAgB;AAAE6c,IAAAA,SAAS,CAACvlB,EAAD,EAAK9B,IAAI,CAACwK,KAAV,CAAT;AAA4B;;AAC9C,MAAIxK,IAAI,CAACyK,OAAT,EAAkB;AAAE6c,IAAAA,WAAW,CAACxlB,EAAD,EAAK9B,IAAI,CAACyK,OAAV,CAAX;AAAgC;;AACpD,MAAIzK,IAAI,CAACsE,IAAT,EAAe;AACbijB,IAAAA,QAAQ,CAACzlB,EAAD,CAAR;AACD,GAFD,MAEO;AACLgG,IAAAA,OAAO,CAAChG,EAAE,CAACwhB,KAAH,GAAW,EAAZ,EAAgB;AAAK;AAArB,KAAP;AACD;;AACD,MAAItjB,IAAI,CAAC2K,QAAT,EAAmB;AAAE6c,IAAAA,YAAY,CAAC1lB,EAAD,EAAK9B,IAAI,CAAC2K,QAAV,CAAZ;AAAkC;;AACvD,MAAI3K,IAAI,CAACF,KAAL,IAAcE,IAAI,CAACF,KAAL,KAAeD,WAAjC,EAA8C;AAC5C4nB,IAAAA,SAAS,CAAC3lB,EAAD,EAAK9B,IAAI,CAACF,KAAV,CAAT;AACD;AACF;;AAED,SAASunB,SAAT,CAAoBvlB,EAApB,EAAwB4lB,YAAxB,EAAsC;AACpC,MAAIxe,SAAS,GAAGpH,EAAE,CAACQ,QAAH,CAAY4G,SAAZ,IAAyB,EAAzC;AACA,MAAIsB,KAAK,GAAG1I,EAAE,CAACgL,MAAH,GAAY,EAAxB,CAFoC,CAGpC;AACA;;AACA,MAAI7Q,IAAI,GAAG6F,EAAE,CAACQ,QAAH,CAAYgiB,SAAZ,GAAwB,EAAnC;AACA,MAAIqD,MAAM,GAAG,CAAC7lB,EAAE,CAACe,OAAjB,CANoC,CAOpC;;AACA,MAAI,CAAC8kB,MAAL,EAAa;AACXrgB,IAAAA,eAAe,CAAC,KAAD,CAAf;AACD;;AACD,MAAIiQ,IAAI,GAAG,UAAWve,GAAX,EAAiB;AAC1BiD,IAAAA,IAAI,CAACgH,IAAL,CAAUjK,GAAV;AACA,QAAIhD,KAAK,GAAGkW,YAAY,CAAClT,GAAD,EAAM0uB,YAAN,EAAoBxe,SAApB,EAA+BpH,EAA/B,CAAxB;AACA;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzC,UAAI4V,aAAa,GAAG3d,SAAS,CAACf,GAAD,CAA7B;;AACA,UAAIT,mBAAmB,CAACmf,aAAD,CAAnB,IACAjb,MAAM,CAACW,cAAP,CAAsBsa,aAAtB,CADJ,EAC0C;AACxCrW,QAAAA,IAAI,CACD,OAAOqW,aAAP,GAAuB,kEADtB,EAEF5V,EAFE,CAAJ;AAID;;AACD8F,MAAAA,iBAAiB,CAAC4C,KAAD,EAAQxR,GAAR,EAAahD,KAAb,EAAoB,YAAY;AAC/C,YAAI,CAAC2xB,MAAD,IAAW,CAAC3I,wBAAhB,EAA0C;AACxC3d,UAAAA,IAAI,CACF,4DACA,wDADA,GAEA,+DAFA,GAGA,+BAHA,GAGkCrI,GAHlC,GAGwC,IAJtC,EAKF8I,EALE,CAAJ;AAOD;AACF,OAVgB,CAAjB;AAWD,KApBD,MAoBO;AACL8F,MAAAA,iBAAiB,CAAC4C,KAAD,EAAQxR,GAAR,EAAahD,KAAb,CAAjB;AACD,KA1ByB,CA2B1B;AACA;AACA;;;AACA,QAAI,EAAEgD,GAAG,IAAI8I,EAAT,CAAJ,EAAkB;AAChB+T,MAAAA,KAAK,CAAC/T,EAAD,EAAK,QAAL,EAAe9I,GAAf,CAAL;AACD;AACF,GAjCD;;AAmCA,OAAK,IAAIA,GAAT,IAAgB0uB,YAAhB,EAA8BnQ,IAAI,CAAEve,GAAF,CAAJ;;AAC9BsO,EAAAA,eAAe,CAAC,IAAD,CAAf;AACD;;AAED,SAASigB,QAAT,CAAmBzlB,EAAnB,EAAuB;AACrB,MAAIwC,IAAI,GAAGxC,EAAE,CAACQ,QAAH,CAAYgC,IAAvB;AACAA,EAAAA,IAAI,GAAGxC,EAAE,CAACwhB,KAAH,GAAW,OAAOhf,IAAP,KAAgB,UAAhB,GACdsjB,OAAO,CAACtjB,IAAD,EAAOxC,EAAP,CADO,GAEdwC,IAAI,IAAI,EAFZ;;AAGA,MAAI,CAAC7N,aAAa,CAAC6N,IAAD,CAAlB,EAA0B;AACxBA,IAAAA,IAAI,GAAG,EAAP;AACA,sBAAyB,YAAzB,IAAyCjD,IAAI,CAC3C,8CACA,oEAF2C,EAG3CS,EAH2C,CAA7C;AAKD,GAZoB,CAarB;;;AACA,MAAI7F,IAAI,GAAG1G,MAAM,CAAC0G,IAAP,CAAYqI,IAAZ,CAAX;AACA,MAAIkG,KAAK,GAAG1I,EAAE,CAACQ,QAAH,CAAYkI,KAAxB;AACA,MAAIC,OAAO,GAAG3I,EAAE,CAACQ,QAAH,CAAYmI,OAA1B;AACA,MAAItS,CAAC,GAAG8D,IAAI,CAAC7D,MAAb;;AACA,SAAOD,CAAC,EAAR,EAAY;AACV,QAAIa,GAAG,GAAGiD,IAAI,CAAC9D,CAAD,CAAd;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzC,UAAIsS,OAAO,IAAI1R,MAAM,CAAC0R,OAAD,EAAUzR,GAAV,CAArB,EAAqC;AACnCqI,QAAAA,IAAI,CACD,cAAcrI,GAAd,GAAoB,iDADnB,EAEF8I,EAFE,CAAJ;AAID;AACF;;AACD,QAAI0I,KAAK,IAAIzR,MAAM,CAACyR,KAAD,EAAQxR,GAAR,CAAnB,EAAiC;AAC/B,wBAAyB,YAAzB,IAAyCqI,IAAI,CAC3C,yBAAyBrI,GAAzB,GAA+B,oCAA/B,GACA,iCAF2C,EAG3C8I,EAH2C,CAA7C;AAKD,KAND,MAMO,IAAI,CAAClE,UAAU,CAAC5E,GAAD,CAAf,EAAsB;AAC3B6c,MAAAA,KAAK,CAAC/T,EAAD,EAAK,OAAL,EAAc9I,GAAd,CAAL;AACD;AACF,GArCoB,CAsCrB;;;AACA8O,EAAAA,OAAO,CAACxD,IAAD,EAAO;AAAK;AAAZ,GAAP;AACD;;AAED,SAASsjB,OAAT,CAAkBtjB,IAAlB,EAAwBxC,EAAxB,EAA4B;AAC1B;AACAmC,EAAAA,UAAU;;AACV,MAAI;AACF,WAAOK,IAAI,CAAC/N,IAAL,CAAUuL,EAAV,EAAcA,EAAd,CAAP;AACD,GAFD,CAEE,OAAOjG,CAAP,EAAU;AACVyS,IAAAA,WAAW,CAACzS,CAAD,EAAIiG,EAAJ,EAAQ,QAAR,CAAX;AACA,WAAO,EAAP;AACD,GALD,SAKU;AACRoC,IAAAA,SAAS;AACV;AACF;;AAED,IAAI2jB,sBAAsB,GAAG;AAAExB,EAAAA,IAAI,EAAE;AAAR,CAA7B;;AAEA,SAASmB,YAAT,CAAuB1lB,EAAvB,EAA2B6I,QAA3B,EAAqC;AACnC;AACA,MAAImd,QAAQ,GAAGhmB,EAAE,CAACimB,iBAAH,GAAuBxyB,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAtC,CAFmC,CAGnC;;AACA,MAAIgwB,KAAK,GAAG5nB,iBAAiB,EAA7B;;AAEA,OAAK,IAAIpH,GAAT,IAAgB2R,QAAhB,EAA0B;AACxB,QAAIsd,OAAO,GAAGtd,QAAQ,CAAC3R,GAAD,CAAtB;AACA,QAAIuP,MAAM,GAAG,OAAO0f,OAAP,KAAmB,UAAnB,GAAgCA,OAAhC,GAA0CA,OAAO,CAAChoB,GAA/D;;AACA,QAAI,kBAAyB,YAAzB,IAAyCsI,MAAM,IAAI,IAAvD,EAA6D;AAC3DlH,MAAAA,IAAI,CACD,+CAA+CrI,GAA/C,GAAqD,KADpD,EAEF8I,EAFE,CAAJ;AAID;;AAED,QAAI,CAACkmB,KAAL,EAAY;AACV;AACAF,MAAAA,QAAQ,CAAC9uB,GAAD,CAAR,GAAgB,IAAI4qB,OAAJ,CACd9hB,EADc,EAEdyG,MAAM,IAAIpN,IAFI,EAGdA,IAHc,EAId0sB,sBAJc,CAAhB;AAMD,KAlBuB,CAoBxB;AACA;AACA;;;AACA,QAAI,EAAE7uB,GAAG,IAAI8I,EAAT,CAAJ,EAAkB;AAChBomB,MAAAA,cAAc,CAACpmB,EAAD,EAAK9I,GAAL,EAAUivB,OAAV,CAAd;AACD,KAFD,MAEO,IAAI,kBAAyB,YAA7B,EAA2C;AAChD,UAAIjvB,GAAG,IAAI8I,EAAE,CAACiP,KAAd,EAAqB;AACnB1P,QAAAA,IAAI,CAAE,6BAA6BrI,GAA7B,GAAmC,gCAArC,EAAwE8I,EAAxE,CAAJ;AACD,OAFD,MAEO,IAAIA,EAAE,CAACQ,QAAH,CAAYkI,KAAZ,IAAqBxR,GAAG,IAAI8I,EAAE,CAACQ,QAAH,CAAYkI,KAA5C,EAAmD;AACxDnJ,QAAAA,IAAI,CAAE,6BAA6BrI,GAA7B,GAAmC,kCAArC,EAA0E8I,EAA1E,CAAJ;AACD;AACF;AACF;AACF;;AAED,SAASomB,cAAT,CACEvkB,MADF,EAEE3K,GAFF,EAGEivB,OAHF,EAIE;AACA,MAAIE,WAAW,GAAG,CAAC/nB,iBAAiB,EAApC;;AACA,MAAI,OAAO6nB,OAAP,KAAmB,UAAvB,EAAmC;AACjCjB,IAAAA,wBAAwB,CAAC/mB,GAAzB,GAA+BkoB,WAAW,GACtCC,oBAAoB,CAACpvB,GAAD,CADkB,GAEtCqvB,mBAAmB,CAACJ,OAAD,CAFvB;AAGAjB,IAAAA,wBAAwB,CAAC/lB,GAAzB,GAA+B9F,IAA/B;AACD,GALD,MAKO;AACL6rB,IAAAA,wBAAwB,CAAC/mB,GAAzB,GAA+BgoB,OAAO,CAAChoB,GAAR,GAC3BkoB,WAAW,IAAIF,OAAO,CAAC9uB,KAAR,KAAkB,KAAjC,GACEivB,oBAAoB,CAACpvB,GAAD,CADtB,GAEEqvB,mBAAmB,CAACJ,OAAO,CAAChoB,GAAT,CAHM,GAI3B9E,IAJJ;AAKA6rB,IAAAA,wBAAwB,CAAC/lB,GAAzB,GAA+BgnB,OAAO,CAAChnB,GAAR,IAAe9F,IAA9C;AACD;;AACD,MAAI,kBAAyB,YAAzB,IACA6rB,wBAAwB,CAAC/lB,GAAzB,KAAiC9F,IADrC,EAC2C;AACzC6rB,IAAAA,wBAAwB,CAAC/lB,GAAzB,GAA+B,YAAY;AACzCI,MAAAA,IAAI,CACD,yBAAyBrI,GAAzB,GAA+B,0CAD9B,EAEF,IAFE,CAAJ;AAID,KALD;AAMD;;AACDzD,EAAAA,MAAM,CAACyI,cAAP,CAAsB2F,MAAtB,EAA8B3K,GAA9B,EAAmCguB,wBAAnC;AACD;;AAED,SAASoB,oBAAT,CAA+BpvB,GAA/B,EAAoC;AAClC,SAAO,SAASsvB,cAAT,GAA2B;AAChC,QAAI/C,OAAO,GAAG,KAAKwC,iBAAL,IAA0B,KAAKA,iBAAL,CAAuB/uB,GAAvB,CAAxC;;AACA,QAAIusB,OAAJ,EAAa;AACX,UAAIA,OAAO,CAACgB,KAAZ,EAAmB;AACjBhB,QAAAA,OAAO,CAACwB,QAAR;AACD;;AACD,UAAI3jB,GAAG,CAACO,MAAR,EAAgB;AACd4hB,QAAAA,OAAO,CAAC7hB,MAAR;AACD;;AACD,aAAO6hB,OAAO,CAACvvB,KAAf;AACD;AACF,GAXD;AAYD;;AAED,SAASqyB,mBAAT,CAA6BnvB,EAA7B,EAAiC;AAC/B,SAAO,SAASovB,cAAT,GAA2B;AAChC,WAAOpvB,EAAE,CAAC3C,IAAH,CAAQ,IAAR,EAAc,IAAd,CAAP;AACD,GAFD;AAGD;;AAED,SAAS+wB,WAAT,CAAsBxlB,EAAtB,EAA0B2I,OAA1B,EAAmC;AACjC,MAAID,KAAK,GAAG1I,EAAE,CAACQ,QAAH,CAAYkI,KAAxB;;AACA,OAAK,IAAIxR,GAAT,IAAgByR,OAAhB,EAAyB;AACvB,QAAI,kBAAyB,YAA7B,EAA2C;AACzC,UAAI,OAAOA,OAAO,CAACzR,GAAD,CAAd,KAAwB,UAA5B,EAAwC;AACtCqI,QAAAA,IAAI,CACF,cAAcrI,GAAd,GAAoB,gBAApB,GAAwC,OAAOyR,OAAO,CAACzR,GAAD,CAAtD,GAA+D,kCAA/D,GACA,2CAFE,EAGF8I,EAHE,CAAJ;AAKD;;AACD,UAAI0I,KAAK,IAAIzR,MAAM,CAACyR,KAAD,EAAQxR,GAAR,CAAnB,EAAiC;AAC/BqI,QAAAA,IAAI,CACD,cAAcrI,GAAd,GAAoB,wCADnB,EAEF8I,EAFE,CAAJ;AAID;;AACD,UAAK9I,GAAG,IAAI8I,EAAR,IAAelE,UAAU,CAAC5E,GAAD,CAA7B,EAAoC;AAClCqI,QAAAA,IAAI,CACF,cAAcrI,GAAd,GAAoB,qDAApB,GACA,0DAFE,CAAJ;AAID;AACF;;AACD8I,IAAAA,EAAE,CAAC9I,GAAD,CAAF,GAAU,OAAOyR,OAAO,CAACzR,GAAD,CAAd,KAAwB,UAAxB,GAAqCmC,IAArC,GAA4CV,IAAI,CAACgQ,OAAO,CAACzR,GAAD,CAAR,EAAe8I,EAAf,CAA1D;AACD;AACF;;AAED,SAAS2lB,SAAT,CAAoB3lB,EAApB,EAAwBhC,KAAxB,EAA+B;AAC7B,OAAK,IAAI9G,GAAT,IAAgB8G,KAAhB,EAAuB;AACrB,QAAIgP,OAAO,GAAGhP,KAAK,CAAC9G,GAAD,CAAnB;;AACA,QAAI1B,KAAK,CAACC,OAAN,CAAcuX,OAAd,CAAJ,EAA4B;AAC1B,WAAK,IAAI3W,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2W,OAAO,CAAC1W,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCowB,QAAAA,aAAa,CAACzmB,EAAD,EAAK9I,GAAL,EAAU8V,OAAO,CAAC3W,CAAD,CAAjB,CAAb;AACD;AACF,KAJD,MAIO;AACLowB,MAAAA,aAAa,CAACzmB,EAAD,EAAK9I,GAAL,EAAU8V,OAAV,CAAb;AACD;AACF;AACF;;AAED,SAASyZ,aAAT,CACEzmB,EADF,EAEEokB,OAFF,EAGEpX,OAHF,EAIE3M,OAJF,EAKE;AACA,MAAI1L,aAAa,CAACqY,OAAD,CAAjB,EAA4B;AAC1B3M,IAAAA,OAAO,GAAG2M,OAAV;AACAA,IAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB;AACD;;AACD,MAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BA,IAAAA,OAAO,GAAGhN,EAAE,CAACgN,OAAD,CAAZ;AACD;;AACD,SAAOhN,EAAE,CAAC0mB,MAAH,CAAUtC,OAAV,EAAmBpX,OAAnB,EAA4B3M,OAA5B,CAAP;AACD;;AAED,SAASsmB,UAAT,CAAqBrJ,GAArB,EAA0B;AACxB;AACA;AACA;AACA,MAAIsJ,OAAO,GAAG,EAAd;;AACAA,EAAAA,OAAO,CAACzoB,GAAR,GAAc,YAAY;AAAE,WAAO,KAAKqjB,KAAZ;AAAmB,GAA/C;;AACA,MAAIqF,QAAQ,GAAG,EAAf;;AACAA,EAAAA,QAAQ,CAAC1oB,GAAT,GAAe,YAAY;AAAE,WAAO,KAAK6M,MAAZ;AAAoB,GAAjD;;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzC4b,IAAAA,OAAO,CAACznB,GAAR,GAAc,YAAY;AACxBI,MAAAA,IAAI,CACF,0CACA,qCAFE,EAGF,IAHE,CAAJ;AAKD,KAND;;AAOAsnB,IAAAA,QAAQ,CAAC1nB,GAAT,GAAe,YAAY;AACzBI,MAAAA,IAAI,CAAC,qBAAD,EAAwB,IAAxB,CAAJ;AACD,KAFD;AAGD;;AACD9L,EAAAA,MAAM,CAACyI,cAAP,CAAsBohB,GAAG,CAAChpB,SAA1B,EAAqC,OAArC,EAA8CsyB,OAA9C;AACAnzB,EAAAA,MAAM,CAACyI,cAAP,CAAsBohB,GAAG,CAAChpB,SAA1B,EAAqC,QAArC,EAA+CuyB,QAA/C;AAEAvJ,EAAAA,GAAG,CAAChpB,SAAJ,CAAcwyB,IAAd,GAAqB3nB,GAArB;AACAme,EAAAA,GAAG,CAAChpB,SAAJ,CAAcyyB,OAAd,GAAwB9f,GAAxB;;AAEAqW,EAAAA,GAAG,CAAChpB,SAAJ,CAAcoyB,MAAd,GAAuB,UACrBtC,OADqB,EAErB9V,EAFqB,EAGrBjO,OAHqB,EAIrB;AACA,QAAIL,EAAE,GAAG,IAAT;;AACA,QAAIrL,aAAa,CAAC2Z,EAAD,CAAjB,EAAuB;AACrB,aAAOmY,aAAa,CAACzmB,EAAD,EAAKokB,OAAL,EAAc9V,EAAd,EAAkBjO,OAAlB,CAApB;AACD;;AACDA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAA,IAAAA,OAAO,CAACsjB,IAAR,GAAe,IAAf;AACA,QAAIF,OAAO,GAAG,IAAI3B,OAAJ,CAAY9hB,EAAZ,EAAgBokB,OAAhB,EAAyB9V,EAAzB,EAA6BjO,OAA7B,CAAd;;AACA,QAAIA,OAAO,CAAC2mB,SAAZ,EAAuB;AACrB,UAAI;AACF1Y,QAAAA,EAAE,CAAC7Z,IAAH,CAAQuL,EAAR,EAAYyjB,OAAO,CAACvvB,KAApB;AACD,OAFD,CAEE,OAAOgM,KAAP,EAAc;AACdsM,QAAAA,WAAW,CAACtM,KAAD,EAAQF,EAAR,EAAa,sCAAuCyjB,OAAO,CAACG,UAA/C,GAA6D,IAA1E,CAAX;AACD;AACF;;AACD,WAAO,SAASqD,SAAT,GAAsB;AAC3BxD,MAAAA,OAAO,CAACnC,QAAR;AACD,KAFD;AAGD,GAtBD;AAuBD;AAED;;;AAEA,IAAI4F,KAAK,GAAG,CAAZ;;AAEA,SAASC,SAAT,CAAoB7J,GAApB,EAAyB;AACvBA,EAAAA,GAAG,CAAChpB,SAAJ,CAAc8yB,KAAd,GAAsB,UAAU/mB,OAAV,EAAmB;AACvC,QAAIL,EAAE,GAAG,IAAT,CADuC,CAEvC;;AACAA,IAAAA,EAAE,CAAC6hB,IAAH,GAAUqF,KAAK,EAAf;AAEA,QAAI/W,QAAJ,EAAcC,MAAd;AACA;;AACA,QAAI,kBAAyB,YAAzB,IAAyCzV,MAAM,CAACK,WAAhD,IAA+D8U,IAAnE,EAAyE;AACvEK,MAAAA,QAAQ,GAAG,oBAAqBnQ,EAAE,CAAC6hB,IAAnC;AACAzR,MAAAA,MAAM,GAAG,kBAAmBpQ,EAAE,CAAC6hB,IAA/B;AACA/R,MAAAA,IAAI,CAACK,QAAD,CAAJ;AACD,KAXsC,CAavC;;;AACAnQ,IAAAA,EAAE,CAACO,MAAH,GAAY,IAAZ,CAduC,CAevC;;AACA,QAAIF,OAAO,IAAIA,OAAO,CAACkb,YAAvB,EAAqC;AACnC;AACA;AACA;AACA8L,MAAAA,qBAAqB,CAACrnB,EAAD,EAAKK,OAAL,CAArB;AACD,KALD,MAKO;AACLL,MAAAA,EAAE,CAACQ,QAAH,GAAciJ,YAAY,CACxBuR,yBAAyB,CAAChb,EAAE,CAACS,WAAJ,CADD,EAExBJ,OAAO,IAAI,EAFa,EAGxBL,EAHwB,CAA1B;AAKD;AACD;;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzCwO,MAAAA,SAAS,CAACxO,EAAD,CAAT;AACD,KAFD,MAEO;AACLA,MAAAA,EAAE,CAACsP,YAAH,GAAkBtP,EAAlB;AACD,KAjCsC,CAkCvC;;;AACAA,IAAAA,EAAE,CAACsnB,KAAH,GAAWtnB,EAAX;AACAugB,IAAAA,aAAa,CAACvgB,EAAD,CAAb;AACAqf,IAAAA,UAAU,CAACrf,EAAD,CAAV;AACA6c,IAAAA,UAAU,CAAC7c,EAAD,CAAV;AACAqa,IAAAA,QAAQ,CAACra,EAAD,EAAK,cAAL,CAAR;AACA0S,IAAAA,cAAc,CAAC1S,EAAD,CAAd,CAxCuC,CAwCnB;;AACpBslB,IAAAA,SAAS,CAACtlB,EAAD,CAAT;AACAwS,IAAAA,WAAW,CAACxS,EAAD,CAAX,CA1CuC,CA0CtB;;AACjBqa,IAAAA,QAAQ,CAACra,EAAD,EAAK,SAAL,CAAR;AAEA;;AACA,QAAI,kBAAyB,YAAzB,IAAyCrF,MAAM,CAACK,WAAhD,IAA+D8U,IAAnE,EAAyE;AACvE9P,MAAAA,EAAE,CAAC4hB,KAAH,GAAWliB,mBAAmB,CAACM,EAAD,EAAK,KAAL,CAA9B;AACA8P,MAAAA,IAAI,CAACM,MAAD,CAAJ;AACAL,MAAAA,OAAO,CAAE,SAAU/P,EAAE,CAAC4hB,KAAb,GAAsB,OAAxB,EAAkCzR,QAAlC,EAA4CC,MAA5C,CAAP;AACD;;AAED,QAAIpQ,EAAE,CAACQ,QAAH,CAAY2G,EAAhB,EAAoB;AAClBnH,MAAAA,EAAE,CAACga,MAAH,CAAUha,EAAE,CAACQ,QAAH,CAAY2G,EAAtB;AACD;AACF,GAvDD;AAwDD;;AAED,SAASkgB,qBAAT,CAAgCrnB,EAAhC,EAAoCK,OAApC,EAA6C;AAC3C,MAAInC,IAAI,GAAG8B,EAAE,CAACQ,QAAH,GAAc/M,MAAM,CAACyC,MAAP,CAAc8J,EAAE,CAACS,WAAH,CAAeJ,OAA7B,CAAzB,CAD2C,CAE3C;;AACA,MAAI0c,WAAW,GAAG1c,OAAO,CAACmb,YAA1B;AACAtd,EAAAA,IAAI,CAACkF,MAAL,GAAc/C,OAAO,CAAC+C,MAAtB;AACAlF,EAAAA,IAAI,CAACsd,YAAL,GAAoBuB,WAApB;AAEA,MAAIwK,qBAAqB,GAAGxK,WAAW,CAACla,gBAAxC;AACA3E,EAAAA,IAAI,CAACkJ,SAAL,GAAiBmgB,qBAAqB,CAACngB,SAAvC;AACAlJ,EAAAA,IAAI,CAACif,gBAAL,GAAwBoK,qBAAqB,CAAC9O,SAA9C;AACAva,EAAAA,IAAI,CAAC8e,eAAL,GAAuBuK,qBAAqB,CAAC9kB,QAA7C;AACAvE,EAAAA,IAAI,CAACyC,aAAL,GAAqB4mB,qBAAqB,CAAChlB,GAA3C;;AAEA,MAAIlC,OAAO,CAAC+O,MAAZ,EAAoB;AAClBlR,IAAAA,IAAI,CAACkR,MAAL,GAAc/O,OAAO,CAAC+O,MAAtB;AACAlR,IAAAA,IAAI,CAAC+X,eAAL,GAAuB5V,OAAO,CAAC4V,eAA/B;AACD;AACF;;AAED,SAAS+E,yBAAT,CAAoCpc,IAApC,EAA0C;AACxC,MAAIyB,OAAO,GAAGzB,IAAI,CAACyB,OAAnB;;AACA,MAAIzB,IAAI,CAAC4oB,KAAT,EAAgB;AACd,QAAIC,YAAY,GAAGzM,yBAAyB,CAACpc,IAAI,CAAC4oB,KAAN,CAA5C;AACA,QAAIE,kBAAkB,GAAG9oB,IAAI,CAAC6oB,YAA9B;;AACA,QAAIA,YAAY,KAAKC,kBAArB,EAAyC;AACvC;AACA;AACA9oB,MAAAA,IAAI,CAAC6oB,YAAL,GAAoBA,YAApB,CAHuC,CAIvC;;AACA,UAAIE,eAAe,GAAGC,sBAAsB,CAAChpB,IAAD,CAA5C,CALuC,CAMvC;;AACA,UAAI+oB,eAAJ,EAAqB;AACnB3uB,QAAAA,MAAM,CAAC4F,IAAI,CAACipB,aAAN,EAAqBF,eAArB,CAAN;AACD;;AACDtnB,MAAAA,OAAO,GAAGzB,IAAI,CAACyB,OAAL,GAAeoJ,YAAY,CAACge,YAAD,EAAe7oB,IAAI,CAACipB,aAApB,CAArC;;AACA,UAAIxnB,OAAO,CAACK,IAAZ,EAAkB;AAChBL,QAAAA,OAAO,CAAC2I,UAAR,CAAmB3I,OAAO,CAACK,IAA3B,IAAmC9B,IAAnC;AACD;AACF;AACF;;AACD,SAAOyB,OAAP;AACD;;AAED,SAASunB,sBAAT,CAAiChpB,IAAjC,EAAuC;AACrC,MAAIkpB,QAAJ;AACA,MAAIC,MAAM,GAAGnpB,IAAI,CAACyB,OAAlB;AACA,MAAI2nB,MAAM,GAAGppB,IAAI,CAACqpB,aAAlB;;AACA,OAAK,IAAI/wB,GAAT,IAAgB6wB,MAAhB,EAAwB;AACtB,QAAIA,MAAM,CAAC7wB,GAAD,CAAN,KAAgB8wB,MAAM,CAAC9wB,GAAD,CAA1B,EAAiC;AAC/B,UAAI,CAAC4wB,QAAL,EAAe;AAAEA,QAAAA,QAAQ,GAAG,EAAX;AAAgB;;AACjCA,MAAAA,QAAQ,CAAC5wB,GAAD,CAAR,GAAgB6wB,MAAM,CAAC7wB,GAAD,CAAtB;AACD;AACF;;AACD,SAAO4wB,QAAP;AACD;;AAED,SAASxK,GAAT,CAAcjd,OAAd,EAAuB;AACrB,MAAI,kBAAyB,YAAzB,IACF,EAAE,gBAAgBid,GAAlB,CADF,EAEE;AACA/d,IAAAA,IAAI,CAAC,kEAAD,CAAJ;AACD;;AACD,OAAK6nB,KAAL,CAAW/mB,OAAX;AACD;;AAED8mB,SAAS,CAAC7J,GAAD,CAAT;AACAqJ,UAAU,CAACrJ,GAAD,CAAV;AACAwC,WAAW,CAACxC,GAAD,CAAX;AACAwD,cAAc,CAACxD,GAAD,CAAd;AACAD,WAAW,CAACC,GAAD,CAAX;AAEA;;AAEA,SAAS4K,OAAT,CAAkB5K,GAAlB,EAAuB;AACrBA,EAAAA,GAAG,CAAC6K,GAAJ,GAAU,UAAUC,MAAV,EAAkB;AAC1B,QAAIC,gBAAgB,GAAI,KAAKC,iBAAL,KAA2B,KAAKA,iBAAL,GAAyB,EAApD,CAAxB;;AACA,QAAID,gBAAgB,CAACvxB,OAAjB,CAAyBsxB,MAAzB,IAAmC,CAAC,CAAxC,EAA2C;AACzC,aAAO,IAAP;AACD,KAJyB,CAM1B;;;AACA,QAAIvjB,IAAI,GAAGhM,OAAO,CAACN,SAAD,EAAY,CAAZ,CAAlB;AACAsM,IAAAA,IAAI,CAAC0jB,OAAL,CAAa,IAAb;;AACA,QAAI,OAAOH,MAAM,CAACI,OAAd,KAA0B,UAA9B,EAA0C;AACxCJ,MAAAA,MAAM,CAACI,OAAP,CAAehwB,KAAf,CAAqB4vB,MAArB,EAA6BvjB,IAA7B;AACD,KAFD,MAEO,IAAI,OAAOujB,MAAP,KAAkB,UAAtB,EAAkC;AACvCA,MAAAA,MAAM,CAAC5vB,KAAP,CAAa,IAAb,EAAmBqM,IAAnB;AACD;;AACDwjB,IAAAA,gBAAgB,CAAClnB,IAAjB,CAAsBinB,MAAtB;AACA,WAAO,IAAP;AACD,GAhBD;AAiBD;AAED;;;AAEA,SAASK,WAAT,CAAsBnL,GAAtB,EAA2B;AACzBA,EAAAA,GAAG,CAACoL,KAAJ,GAAY,UAAUA,KAAV,EAAiB;AAC3B,SAAKroB,OAAL,GAAeoJ,YAAY,CAAC,KAAKpJ,OAAN,EAAeqoB,KAAf,CAA3B;AACA,WAAO,IAAP;AACD,GAHD;AAID;AAED;;;AAEA,SAASC,UAAT,CAAqBrL,GAArB,EAA0B;AACxB;AACF;AACA;AACA;AACA;AACEA,EAAAA,GAAG,CAAChd,GAAJ,GAAU,CAAV;AACA,MAAIA,GAAG,GAAG,CAAV;AAEA;AACF;AACA;;AACEgd,EAAAA,GAAG,CAACtkB,MAAJ,GAAa,UAAU6uB,aAAV,EAAyB;AACpCA,IAAAA,aAAa,GAAGA,aAAa,IAAI,EAAjC;AACA,QAAIe,KAAK,GAAG,IAAZ;AACA,QAAIC,OAAO,GAAGD,KAAK,CAACtoB,GAApB;AACA,QAAIwoB,WAAW,GAAGjB,aAAa,CAACkB,KAAd,KAAwBlB,aAAa,CAACkB,KAAd,GAAsB,EAA9C,CAAlB;;AACA,QAAID,WAAW,CAACD,OAAD,CAAf,EAA0B;AACxB,aAAOC,WAAW,CAACD,OAAD,CAAlB;AACD;;AAED,QAAInoB,IAAI,GAAGmnB,aAAa,CAACnnB,IAAd,IAAsBkoB,KAAK,CAACvoB,OAAN,CAAcK,IAA/C;;AACA,QAAI,kBAAyB,YAAzB,IAAyCA,IAA7C,EAAmD;AACjDuI,MAAAA,qBAAqB,CAACvI,IAAD,CAArB;AACD;;AAED,QAAIsoB,GAAG,GAAG,SAASC,YAAT,CAAuB5oB,OAAvB,EAAgC;AACxC,WAAK+mB,KAAL,CAAW/mB,OAAX;AACD,KAFD;;AAGA2oB,IAAAA,GAAG,CAAC10B,SAAJ,GAAgBb,MAAM,CAACyC,MAAP,CAAc0yB,KAAK,CAACt0B,SAApB,CAAhB;AACA00B,IAAAA,GAAG,CAAC10B,SAAJ,CAAcmM,WAAd,GAA4BuoB,GAA5B;AACAA,IAAAA,GAAG,CAAC1oB,GAAJ,GAAUA,GAAG,EAAb;AACA0oB,IAAAA,GAAG,CAAC3oB,OAAJ,GAAcoJ,YAAY,CACxBmf,KAAK,CAACvoB,OADkB,EAExBwnB,aAFwB,CAA1B;AAIAmB,IAAAA,GAAG,CAAC,OAAD,CAAH,GAAeJ,KAAf,CAxBoC,CA0BpC;AACA;AACA;;AACA,QAAII,GAAG,CAAC3oB,OAAJ,CAAYqI,KAAhB,EAAuB;AACrBwgB,MAAAA,WAAW,CAACF,GAAD,CAAX;AACD;;AACD,QAAIA,GAAG,CAAC3oB,OAAJ,CAAYwI,QAAhB,EAA0B;AACxBsgB,MAAAA,cAAc,CAACH,GAAD,CAAd;AACD,KAlCmC,CAoCpC;;;AACAA,IAAAA,GAAG,CAAChwB,MAAJ,GAAa4vB,KAAK,CAAC5vB,MAAnB;AACAgwB,IAAAA,GAAG,CAACN,KAAJ,GAAYE,KAAK,CAACF,KAAlB;AACAM,IAAAA,GAAG,CAACb,GAAJ,GAAUS,KAAK,CAACT,GAAhB,CAvCoC,CAyCpC;AACA;;AACA1tB,IAAAA,WAAW,CAACgK,OAAZ,CAAoB,UAAU+D,IAAV,EAAgB;AAClCwgB,MAAAA,GAAG,CAACxgB,IAAD,CAAH,GAAYogB,KAAK,CAACpgB,IAAD,CAAjB;AACD,KAFD,EA3CoC,CA8CpC;;AACA,QAAI9H,IAAJ,EAAU;AACRsoB,MAAAA,GAAG,CAAC3oB,OAAJ,CAAY2I,UAAZ,CAAuBtI,IAAvB,IAA+BsoB,GAA/B;AACD,KAjDmC,CAmDpC;AACA;AACA;;;AACAA,IAAAA,GAAG,CAACvB,YAAJ,GAAmBmB,KAAK,CAACvoB,OAAzB;AACA2oB,IAAAA,GAAG,CAACnB,aAAJ,GAAoBA,aAApB;AACAmB,IAAAA,GAAG,CAACf,aAAJ,GAAoBjvB,MAAM,CAAC,EAAD,EAAKgwB,GAAG,CAAC3oB,OAAT,CAA1B,CAxDoC,CA0DpC;;AACAyoB,IAAAA,WAAW,CAACD,OAAD,CAAX,GAAuBG,GAAvB;AACA,WAAOA,GAAP;AACD,GA7DD;AA8DD;;AAED,SAASE,WAAT,CAAsBE,IAAtB,EAA4B;AAC1B,MAAI1gB,KAAK,GAAG0gB,IAAI,CAAC/oB,OAAL,CAAaqI,KAAzB;;AACA,OAAK,IAAIxR,GAAT,IAAgBwR,KAAhB,EAAuB;AACrBqL,IAAAA,KAAK,CAACqV,IAAI,CAAC90B,SAAN,EAAiB,QAAjB,EAA2B4C,GAA3B,CAAL;AACD;AACF;;AAED,SAASiyB,cAAT,CAAyBC,IAAzB,EAA+B;AAC7B,MAAIvgB,QAAQ,GAAGugB,IAAI,CAAC/oB,OAAL,CAAawI,QAA5B;;AACA,OAAK,IAAI3R,GAAT,IAAgB2R,QAAhB,EAA0B;AACxBud,IAAAA,cAAc,CAACgD,IAAI,CAAC90B,SAAN,EAAiB4C,GAAjB,EAAsB2R,QAAQ,CAAC3R,GAAD,CAA9B,CAAd;AACD;AACF;AAED;;;AAEA,SAASmyB,kBAAT,CAA6B/L,GAA7B,EAAkC;AAChC;AACF;AACA;AACE7iB,EAAAA,WAAW,CAACgK,OAAZ,CAAoB,UAAU+D,IAAV,EAAgB;AAClC8U,IAAAA,GAAG,CAAC9U,IAAD,CAAH,GAAY,UACVjH,EADU,EAEV+nB,UAFU,EAGV;AACA,UAAI,CAACA,UAAL,EAAiB;AACf,eAAO,KAAKjpB,OAAL,CAAamI,IAAI,GAAG,GAApB,EAAyBjH,EAAzB,CAAP;AACD,OAFD,MAEO;AACL;AACA,YAAI,kBAAyB,YAAzB,IAAyCiH,IAAI,KAAK,WAAtD,EAAmE;AACjES,UAAAA,qBAAqB,CAAC1H,EAAD,CAArB;AACD;;AACD,YAAIiH,IAAI,KAAK,WAAT,IAAwB7T,aAAa,CAAC20B,UAAD,CAAzC,EAAuD;AACrDA,UAAAA,UAAU,CAAC5oB,IAAX,GAAkB4oB,UAAU,CAAC5oB,IAAX,IAAmBa,EAArC;AACA+nB,UAAAA,UAAU,GAAG,KAAKjpB,OAAL,CAAaqJ,KAAb,CAAmB1Q,MAAnB,CAA0BswB,UAA1B,CAAb;AACD;;AACD,YAAI9gB,IAAI,KAAK,WAAT,IAAwB,OAAO8gB,UAAP,KAAsB,UAAlD,EAA8D;AAC5DA,UAAAA,UAAU,GAAG;AAAE3wB,YAAAA,IAAI,EAAE2wB,UAAR;AAAoBrnB,YAAAA,MAAM,EAAEqnB;AAA5B,WAAb;AACD;;AACD,aAAKjpB,OAAL,CAAamI,IAAI,GAAG,GAApB,EAAyBjH,EAAzB,IAA+B+nB,UAA/B;AACA,eAAOA,UAAP;AACD;AACF,KArBD;AAsBD,GAvBD;AAwBD;AAED;;;AAIA,SAASC,gBAAT,CAA2BrrB,IAA3B,EAAiC;AAC/B,SAAOA,IAAI,KAAKA,IAAI,CAACU,IAAL,CAAUyB,OAAV,CAAkBK,IAAlB,IAA0BxC,IAAI,CAACqE,GAApC,CAAX;AACD;;AAED,SAASinB,OAAT,CAAkBC,OAAlB,EAA2B/oB,IAA3B,EAAiC;AAC/B,MAAIlL,KAAK,CAACC,OAAN,CAAcg0B,OAAd,CAAJ,EAA4B;AAC1B,WAAOA,OAAO,CAAC3yB,OAAR,CAAgB4J,IAAhB,IAAwB,CAAC,CAAhC;AACD,GAFD,MAEO,IAAI,OAAO+oB,OAAP,KAAmB,QAAvB,EAAiC;AACtC,WAAOA,OAAO,CAACrzB,KAAR,CAAc,GAAd,EAAmBU,OAAnB,CAA2B4J,IAA3B,IAAmC,CAAC,CAA3C;AACD,GAFM,MAEA,IAAI9L,QAAQ,CAAC60B,OAAD,CAAZ,EAAuB;AAC5B,WAAOA,OAAO,CAAC/sB,IAAR,CAAagE,IAAb,CAAP;AACD;AACD;;;AACA,SAAO,KAAP;AACD;;AAED,SAASgpB,UAAT,CAAqBC,iBAArB,EAAwCC,MAAxC,EAAgD;AAC9C,MAAIvyB,KAAK,GAAGsyB,iBAAiB,CAACtyB,KAA9B;AACA,MAAI8C,IAAI,GAAGwvB,iBAAiB,CAACxvB,IAA7B;AACA,MAAI2iB,MAAM,GAAG6M,iBAAiB,CAAC7M,MAA/B;;AACA,OAAK,IAAI5lB,GAAT,IAAgBG,KAAhB,EAAuB;AACrB,QAAIwyB,UAAU,GAAGxyB,KAAK,CAACH,GAAD,CAAtB;;AACA,QAAI2yB,UAAJ,EAAgB;AACd,UAAInpB,IAAI,GAAG6oB,gBAAgB,CAACM,UAAU,CAAChnB,gBAAZ,CAA3B;;AACA,UAAInC,IAAI,IAAI,CAACkpB,MAAM,CAAClpB,IAAD,CAAnB,EAA2B;AACzBopB,QAAAA,eAAe,CAACzyB,KAAD,EAAQH,GAAR,EAAaiD,IAAb,EAAmB2iB,MAAnB,CAAf;AACD;AACF;AACF;AACF;;AAED,SAASgN,eAAT,CACEzyB,KADF,EAEEH,GAFF,EAGEiD,IAHF,EAIE4vB,OAJF,EAKE;AACA,MAAIC,SAAS,GAAG3yB,KAAK,CAACH,GAAD,CAArB;;AACA,MAAI8yB,SAAS,KAAK,CAACD,OAAD,IAAYC,SAAS,CAACznB,GAAV,KAAkBwnB,OAAO,CAACxnB,GAA3C,CAAb,EAA8D;AAC5DynB,IAAAA,SAAS,CAAC7mB,iBAAV,CAA4BsX,QAA5B;AACD;;AACDpjB,EAAAA,KAAK,CAACH,GAAD,CAAL,GAAa,IAAb;AACAR,EAAAA,MAAM,CAACyD,IAAD,EAAOjD,GAAP,CAAN;AACD;;AAED,IAAI+yB,YAAY,GAAG,CAACh1B,MAAD,EAASqH,MAAT,EAAiB9G,KAAjB,CAAnB;AAEA,IAAI00B,SAAS,GAAG;AACdxpB,EAAAA,IAAI,EAAE,YADQ;AAEd2a,EAAAA,QAAQ,EAAE,IAFI;AAId3S,EAAAA,KAAK,EAAE;AACLyhB,IAAAA,OAAO,EAAEF,YADJ;AAELG,IAAAA,OAAO,EAAEH,YAFJ;AAGLjjB,IAAAA,GAAG,EAAE,CAAC/R,MAAD,EAASmX,MAAT;AAHA,GAJO;AAUdie,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAoB;AAC3B,SAAKhzB,KAAL,GAAa5D,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAb;AACA,SAAKiE,IAAL,GAAY,EAAZ;AACD,GAba;AAedmwB,EAAAA,SAAS,EAAE,SAASA,SAAT,GAAsB;AAC/B,SAAK,IAAIpzB,GAAT,IAAgB,KAAKG,KAArB,EAA4B;AAC1ByyB,MAAAA,eAAe,CAAC,KAAKzyB,KAAN,EAAaH,GAAb,EAAkB,KAAKiD,IAAvB,CAAf;AACD;AACF,GAnBa;AAqBdowB,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAoB;AAC3B,QAAIpS,MAAM,GAAG,IAAb;AAEA,SAAKuO,MAAL,CAAY,SAAZ,EAAuB,UAAU5xB,GAAV,EAAe;AACpC40B,MAAAA,UAAU,CAACvR,MAAD,EAAS,UAAUzX,IAAV,EAAgB;AAAE,eAAO8oB,OAAO,CAAC10B,GAAD,EAAM4L,IAAN,CAAd;AAA4B,OAAvD,CAAV;AACD,KAFD;AAGA,SAAKgmB,MAAL,CAAY,SAAZ,EAAuB,UAAU5xB,GAAV,EAAe;AACpC40B,MAAAA,UAAU,CAACvR,MAAD,EAAS,UAAUzX,IAAV,EAAgB;AAAE,eAAO,CAAC8oB,OAAO,CAAC10B,GAAD,EAAM4L,IAAN,CAAf;AAA6B,OAAxD,CAAV;AACD,KAFD;AAGD,GA9Ba;AAgCd0O,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAmB;AACzB,QAAI4D,IAAI,GAAG,KAAK0B,MAAL,CAAY3J,OAAvB;AACA,QAAI3G,KAAK,GAAGgb,sBAAsB,CAACpM,IAAD,CAAlC;AACA,QAAInQ,gBAAgB,GAAGuB,KAAK,IAAIA,KAAK,CAACvB,gBAAtC;;AACA,QAAIA,gBAAJ,EAAsB;AACpB;AACA,UAAInC,IAAI,GAAG6oB,gBAAgB,CAAC1mB,gBAAD,CAA3B;AACA,UAAI4a,GAAG,GAAG,IAAV;AACA,UAAI0M,OAAO,GAAG1M,GAAG,CAAC0M,OAAlB;AACA,UAAIC,OAAO,GAAG3M,GAAG,CAAC2M,OAAlB;;AACA,WACE;AACCD,MAAAA,OAAO,KAAK,CAACzpB,IAAD,IAAS,CAAC8oB,OAAO,CAACW,OAAD,EAAUzpB,IAAV,CAAtB,CAAR,IACA;AACC0pB,MAAAA,OAAO,IAAI1pB,IAAX,IAAmB8oB,OAAO,CAACY,OAAD,EAAU1pB,IAAV,CAJ7B,EAKE;AACA,eAAO0D,KAAP;AACD;;AAED,UAAIomB,KAAK,GAAG,IAAZ;AACA,UAAInzB,KAAK,GAAGmzB,KAAK,CAACnzB,KAAlB;AACA,UAAI8C,IAAI,GAAGqwB,KAAK,CAACrwB,IAAjB;AACA,UAAIjD,GAAG,GAAGkN,KAAK,CAAClN,GAAN,IAAa,IAAb,CACR;AACA;AAFQ,QAGN2L,gBAAgB,CAACjE,IAAjB,CAAsB0B,GAAtB,IAA6BuC,gBAAgB,CAACN,GAAjB,GAAwB,OAAQM,gBAAgB,CAACN,GAAjD,GAAyD,EAAtF,CAHM,GAIN6B,KAAK,CAAClN,GAJV;;AAKA,UAAIG,KAAK,CAACH,GAAD,CAAT,EAAgB;AACdkN,QAAAA,KAAK,CAACjB,iBAAN,GAA0B9L,KAAK,CAACH,GAAD,CAAL,CAAWiM,iBAArC,CADc,CAEd;;AACAzM,QAAAA,MAAM,CAACyD,IAAD,EAAOjD,GAAP,CAAN;AACAiD,QAAAA,IAAI,CAACgH,IAAL,CAAUjK,GAAV;AACD,OALD,MAKO;AACLG,QAAAA,KAAK,CAACH,GAAD,CAAL,GAAakN,KAAb;AACAjK,QAAAA,IAAI,CAACgH,IAAL,CAAUjK,GAAV,EAFK,CAGL;;AACA,YAAI,KAAK8P,GAAL,IAAY7M,IAAI,CAAC7D,MAAL,GAAcm0B,QAAQ,CAAC,KAAKzjB,GAAN,CAAtC,EAAkD;AAChD8iB,UAAAA,eAAe,CAACzyB,KAAD,EAAQ8C,IAAI,CAAC,CAAD,CAAZ,EAAiBA,IAAjB,EAAuB,KAAK2iB,MAA5B,CAAf;AACD;AACF;;AAED1Y,MAAAA,KAAK,CAAC5B,IAAN,CAAWmX,SAAX,GAAuB,IAAvB;AACD;;AACD,WAAOvV,KAAK,IAAK4O,IAAI,IAAIA,IAAI,CAAC,CAAD,CAA7B;AACD;AA5Ea,CAAhB;AA+EA,IAAI0X,iBAAiB,GAAG;AACtBR,EAAAA,SAAS,EAAEA;AADW,CAAxB;AAIA;;AAEA,SAASS,aAAT,CAAwBrN,GAAxB,EAA6B;AAC3B;AACA,MAAIsN,SAAS,GAAG,EAAhB;;AACAA,EAAAA,SAAS,CAACzsB,GAAV,GAAgB,YAAY;AAAE,WAAOxD,MAAP;AAAgB,GAA9C;;AACA,MAAI,kBAAyB,YAA7B,EAA2C;AACzCiwB,IAAAA,SAAS,CAACzrB,GAAV,GAAgB,YAAY;AAC1BI,MAAAA,IAAI,CACF,sEADE,CAAJ;AAGD,KAJD;AAKD;;AACD9L,EAAAA,MAAM,CAACyI,cAAP,CAAsBohB,GAAtB,EAA2B,QAA3B,EAAqCsN,SAArC,EAX2B,CAa3B;AACA;AACA;;AACAtN,EAAAA,GAAG,CAACuN,IAAJ,GAAW;AACTtrB,IAAAA,IAAI,EAAEA,IADG;AAETvG,IAAAA,MAAM,EAAEA,MAFC;AAGTyQ,IAAAA,YAAY,EAAEA,YAHL;AAITqhB,IAAAA,cAAc,EAAEhlB;AAJP,GAAX;AAOAwX,EAAAA,GAAG,CAACne,GAAJ,GAAUA,GAAV;AACAme,EAAAA,GAAG,CAACyN,MAAJ,GAAa9jB,GAAb;AACAqW,EAAAA,GAAG,CAACjP,QAAJ,GAAeA,QAAf,CAzB2B,CA2B3B;;AACAiP,EAAAA,GAAG,CAAC0N,UAAJ,GAAiB,UAAU52B,GAAV,EAAe;AAC9B4R,IAAAA,OAAO,CAAC5R,GAAD,CAAP;AACA,WAAOA,GAAP;AACD,GAHD;;AAKAkpB,EAAAA,GAAG,CAACjd,OAAJ,GAAc5M,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAd;AACAuE,EAAAA,WAAW,CAACgK,OAAZ,CAAoB,UAAU+D,IAAV,EAAgB;AAClC8U,IAAAA,GAAG,CAACjd,OAAJ,CAAYmI,IAAI,GAAG,GAAnB,IAA0B/U,MAAM,CAACyC,MAAP,CAAc,IAAd,CAA1B;AACD,GAFD,EAlC2B,CAsC3B;AACA;;AACAonB,EAAAA,GAAG,CAACjd,OAAJ,CAAYqJ,KAAZ,GAAoB4T,GAApB;AAEAtkB,EAAAA,MAAM,CAACskB,GAAG,CAACjd,OAAJ,CAAY2I,UAAb,EAAyB0hB,iBAAzB,CAAN;AAEAxC,EAAAA,OAAO,CAAC5K,GAAD,CAAP;AACAmL,EAAAA,WAAW,CAACnL,GAAD,CAAX;AACAqL,EAAAA,UAAU,CAACrL,GAAD,CAAV;AACA+L,EAAAA,kBAAkB,CAAC/L,GAAD,CAAlB;AACD;;AAEDqN,aAAa,CAACrN,GAAD,CAAb;AAEA7pB,MAAM,CAACyI,cAAP,CAAsBohB,GAAG,CAAChpB,SAA1B,EAAqC,WAArC,EAAkD;AAChD6J,EAAAA,GAAG,EAAEG;AAD2C,CAAlD;AAIA7K,MAAM,CAACyI,cAAP,CAAsBohB,GAAG,CAAChpB,SAA1B,EAAqC,aAArC,EAAoD;AAClD6J,EAAAA,GAAG,EAAE,SAASA,GAAT,GAAgB;AACnB;AACA,WAAO,KAAKme,MAAL,IAAe,KAAKA,MAAL,CAAY2O,UAAlC;AACD;AAJiD,CAApD,GAOA;;AACAx3B,MAAM,CAACyI,cAAP,CAAsBohB,GAAtB,EAA2B,yBAA3B,EAAsD;AACpDppB,EAAAA,KAAK,EAAEgkB;AAD6C,CAAtD;AAIAoF,GAAG,CAAC4N,OAAJ,GAAc,QAAd;AAEA;AAEA;AACA;;AACA,IAAI5vB,cAAc,GAAGxF,OAAO,CAAC,aAAD,CAA5B,EAEA;;AACA,IAAIq1B,WAAW,GAAGr1B,OAAO,CAAC,uCAAD,CAAzB;;AACA,IAAI4F,WAAW,GAAG,UAAU6G,GAAV,EAAeiG,IAAf,EAAqB4iB,IAArB,EAA2B;AAC3C,SACGA,IAAI,KAAK,OAAT,IAAoBD,WAAW,CAAC5oB,GAAD,CAAhC,IAA0CiG,IAAI,KAAK,QAAnD,IACC4iB,IAAI,KAAK,UAAT,IAAuB7oB,GAAG,KAAK,QADhC,IAEC6oB,IAAI,KAAK,SAAT,IAAsB7oB,GAAG,KAAK,OAF/B,IAGC6oB,IAAI,KAAK,OAAT,IAAoB7oB,GAAG,KAAK,OAJ/B;AAMD,CAPD;;AASA,IAAI8oB,gBAAgB,GAAGv1B,OAAO,CAAC,sCAAD,CAA9B;AAEA,IAAIw1B,2BAA2B,GAAGx1B,OAAO,CAAC,oCAAD,CAAzC;;AAEA,IAAIy1B,sBAAsB,GAAG,UAAUr0B,GAAV,EAAehD,KAAf,EAAsB;AACjD,SAAOs3B,gBAAgB,CAACt3B,KAAD,CAAhB,IAA2BA,KAAK,KAAK,OAArC,GACH,OADG,CAEL;AAFK,IAGHgD,GAAG,KAAK,iBAAR,IAA6Bo0B,2BAA2B,CAACp3B,KAAD,CAAxD,GACEA,KADF,GAEE,MALN;AAMD,CAPD;;AASA,IAAIu3B,aAAa,GAAG31B,OAAO,CACzB,+EACA,qEADA,GAEA,kFAFA,GAGA,4EAHA,GAIA,gEAJA,GAKA,iCANyB,CAA3B;AASA,IAAI41B,OAAO,GAAG,8BAAd;;AAEA,IAAIC,OAAO,GAAG,UAAUjrB,IAAV,EAAgB;AAC5B,SAAOA,IAAI,CAAC3I,MAAL,CAAY,CAAZ,MAAmB,GAAnB,IAA0B2I,IAAI,CAAChM,KAAL,CAAW,CAAX,EAAc,CAAd,MAAqB,OAAtD;AACD,CAFD;;AAIA,IAAIk3B,YAAY,GAAG,UAAUlrB,IAAV,EAAgB;AACjC,SAAOirB,OAAO,CAACjrB,IAAD,CAAP,GAAgBA,IAAI,CAAChM,KAAL,CAAW,CAAX,EAAcgM,IAAI,CAACpK,MAAnB,CAAhB,GAA6C,EAApD;AACD,CAFD;;AAIA,IAAIk1B,gBAAgB,GAAG,UAAU12B,GAAV,EAAe;AACpC,SAAOA,GAAG,IAAI,IAAP,IAAeA,GAAG,KAAK,KAA9B;AACD,CAFD;AAIA;;;AAEA,SAAS+2B,gBAAT,CAA2BznB,KAA3B,EAAkC;AAChC,MAAI5B,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;AACA,MAAIspB,UAAU,GAAG1nB,KAAjB;AACA,MAAI2nB,SAAS,GAAG3nB,KAAhB;;AACA,SAAOtQ,KAAK,CAACi4B,SAAS,CAAC5oB,iBAAX,CAAZ,EAA2C;AACzC4oB,IAAAA,SAAS,GAAGA,SAAS,CAAC5oB,iBAAV,CAA4B2Z,MAAxC;;AACA,QAAIiP,SAAS,IAAIA,SAAS,CAACvpB,IAA3B,EAAiC;AAC/BA,MAAAA,IAAI,GAAGwpB,cAAc,CAACD,SAAS,CAACvpB,IAAX,EAAiBA,IAAjB,CAArB;AACD;AACF;;AACD,SAAO1O,KAAK,CAACg4B,UAAU,GAAGA,UAAU,CAAC1oB,MAAzB,CAAZ,EAA8C;AAC5C,QAAI0oB,UAAU,IAAIA,UAAU,CAACtpB,IAA7B,EAAmC;AACjCA,MAAAA,IAAI,GAAGwpB,cAAc,CAACxpB,IAAD,EAAOspB,UAAU,CAACtpB,IAAlB,CAArB;AACD;AACF;;AACD,SAAOypB,WAAW,CAACzpB,IAAI,CAAC0pB,WAAN,EAAmB1pB,IAAI,CAACoa,KAAxB,CAAlB;AACD;;AAED,SAASoP,cAAT,CAAyBloB,KAAzB,EAAgCV,MAAhC,EAAwC;AACtC,SAAO;AACL8oB,IAAAA,WAAW,EAAEhkB,MAAM,CAACpE,KAAK,CAACooB,WAAP,EAAoB9oB,MAAM,CAAC8oB,WAA3B,CADd;AAELtP,IAAAA,KAAK,EAAE9oB,KAAK,CAACgQ,KAAK,CAAC8Y,KAAP,CAAL,GACH,CAAC9Y,KAAK,CAAC8Y,KAAP,EAAcxZ,MAAM,CAACwZ,KAArB,CADG,GAEHxZ,MAAM,CAACwZ;AAJN,GAAP;AAMD;;AAED,SAASqP,WAAT,CACEC,WADF,EAEEC,YAFF,EAGE;AACA,MAAIr4B,KAAK,CAACo4B,WAAD,CAAL,IAAsBp4B,KAAK,CAACq4B,YAAD,CAA/B,EAA+C;AAC7C,WAAOjkB,MAAM,CAACgkB,WAAD,EAAcE,cAAc,CAACD,YAAD,CAA5B,CAAb;AACD;AACD;;;AACA,SAAO,EAAP;AACD;;AAED,SAASjkB,MAAT,CAAiB7P,CAAjB,EAAoBiB,CAApB,EAAuB;AACrB,SAAOjB,CAAC,GAAGiB,CAAC,GAAIjB,CAAC,GAAG,GAAJ,GAAUiB,CAAd,GAAmBjB,CAAvB,GAA4BiB,CAAC,IAAI,EAAzC;AACD;;AAED,SAAS8yB,cAAT,CAAyBl4B,KAAzB,EAAgC;AAC9B,MAAIsB,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAJ,EAA0B;AACxB,WAAOm4B,cAAc,CAACn4B,KAAD,CAArB;AACD;;AACD,MAAIC,QAAQ,CAACD,KAAD,CAAZ,EAAqB;AACnB,WAAOo4B,eAAe,CAACp4B,KAAD,CAAtB;AACD;;AACD,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,WAAOA,KAAP;AACD;AACD;;;AACA,SAAO,EAAP;AACD;;AAED,SAASm4B,cAAT,CAAyBn4B,KAAzB,EAAgC;AAC9B,MAAIkF,GAAG,GAAG,EAAV;AACA,MAAImzB,WAAJ;;AACA,OAAK,IAAIl2B,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAGpE,KAAK,CAACoC,MAA1B,EAAkCD,CAAC,GAAGiC,CAAtC,EAAyCjC,CAAC,EAA1C,EAA8C;AAC5C,QAAIvC,KAAK,CAACy4B,WAAW,GAAGH,cAAc,CAACl4B,KAAK,CAACmC,CAAD,CAAN,CAA7B,CAAL,IAAiDk2B,WAAW,KAAK,EAArE,EAAyE;AACvE,UAAInzB,GAAJ,EAAS;AAAEA,QAAAA,GAAG,IAAI,GAAP;AAAa;;AACxBA,MAAAA,GAAG,IAAImzB,WAAP;AACD;AACF;;AACD,SAAOnzB,GAAP;AACD;;AAED,SAASkzB,eAAT,CAA0Bp4B,KAA1B,EAAiC;AAC/B,MAAIkF,GAAG,GAAG,EAAV;;AACA,OAAK,IAAIlC,GAAT,IAAgBhD,KAAhB,EAAuB;AACrB,QAAIA,KAAK,CAACgD,GAAD,CAAT,EAAgB;AACd,UAAIkC,GAAJ,EAAS;AAAEA,QAAAA,GAAG,IAAI,GAAP;AAAa;;AACxBA,MAAAA,GAAG,IAAIlC,GAAP;AACD;AACF;;AACD,SAAOkC,GAAP;AACD;AAED;;;AAEA,IAAIozB,YAAY,GAAG;AACjBC,EAAAA,GAAG,EAAE,4BADY;AAEjBC,EAAAA,IAAI,EAAE;AAFW,CAAnB;AAKA,IAAIC,SAAS,GAAG72B,OAAO,CACrB,+CACA,2EADA,GAEA,oEAFA,GAGA,wEAHA,GAIA,6EAJA,GAKA,2DALA,GAMA,kDANA,GAOA,yEAPA,GAQA,kCARA,GASA,uCATA,GAUA,yDAXqB,CAAvB,EAcA;AACA;;AACA,IAAI82B,KAAK,GAAG92B,OAAO,CACjB,2EACA,0EADA,GAEA,kEAHiB,EAIjB,IAJiB,CAAnB;;AAOA,IAAIuF,aAAa,GAAG,UAAUkH,GAAV,EAAe;AACjC,SAAOoqB,SAAS,CAACpqB,GAAD,CAAT,IAAkBqqB,KAAK,CAACrqB,GAAD,CAA9B;AACD,CAFD;;AAIA,SAAS/G,eAAT,CAA0B+G,GAA1B,EAA+B;AAC7B,MAAIqqB,KAAK,CAACrqB,GAAD,CAAT,EAAgB;AACd,WAAO,KAAP;AACD,GAH4B,CAI7B;AACA;;;AACA,MAAIA,GAAG,KAAK,MAAZ,EAAoB;AAClB,WAAO,MAAP;AACD;AACF;;AAED,IAAIsqB,mBAAmB,GAAGp5B,MAAM,CAACyC,MAAP,CAAc,IAAd,CAA1B;;AACA,SAASqF,gBAAT,CAA2BgH,GAA3B,EAAgC;AAC9B;AACA,MAAI,CAAC1F,SAAL,EAAgB;AACd,WAAO,IAAP;AACD;;AACD,MAAIxB,aAAa,CAACkH,GAAD,CAAjB,EAAwB;AACtB,WAAO,KAAP;AACD;;AACDA,EAAAA,GAAG,GAAGA,GAAG,CAAChM,WAAJ,EAAN;AACA;;AACA,MAAIs2B,mBAAmB,CAACtqB,GAAD,CAAnB,IAA4B,IAAhC,EAAsC;AACpC,WAAOsqB,mBAAmB,CAACtqB,GAAD,CAA1B;AACD;;AACD,MAAI4E,EAAE,GAAG8G,QAAQ,CAAC8K,aAAT,CAAuBxW,GAAvB,CAAT;;AACA,MAAIA,GAAG,CAACzL,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAxB,EAA2B;AACzB;AACA,WAAQ+1B,mBAAmB,CAACtqB,GAAD,CAAnB,GACN4E,EAAE,CAAC1G,WAAH,KAAmB3D,MAAM,CAACgwB,kBAA1B,IACA3lB,EAAE,CAAC1G,WAAH,KAAmB3D,MAAM,CAACiwB,WAF5B;AAID,GAND,MAMO;AACL,WAAQF,mBAAmB,CAACtqB,GAAD,CAAnB,GAA2B,qBAAqB7F,IAArB,CAA0ByK,EAAE,CAAC5S,QAAH,EAA1B,CAAnC;AACD;AACF;;AAED,IAAIy4B,eAAe,GAAGl3B,OAAO,CAAC,2CAAD,CAA7B;AAEA;;AAEA;AACA;AACA;;AACA,SAASm3B,KAAT,CAAgB9lB,EAAhB,EAAoB;AAClB,MAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AAC1B,QAAI+lB,QAAQ,GAAGjf,QAAQ,CAACkf,aAAT,CAAuBhmB,EAAvB,CAAf;;AACA,QAAI,CAAC+lB,QAAL,EAAe;AACb,wBAAyB,YAAzB,IAAyC3tB,IAAI,CAC3C,0BAA0B4H,EADiB,CAA7C;AAGA,aAAO8G,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,CAAP;AACD;;AACD,WAAOmU,QAAP;AACD,GATD,MASO;AACL,WAAO/lB,EAAP;AACD;AACF;AAED;;;AAEA,SAASimB,eAAT,CAA0BC,OAA1B,EAAmCjpB,KAAnC,EAA0C;AACxC,MAAIzB,GAAG,GAAGsL,QAAQ,CAAC8K,aAAT,CAAuBsU,OAAvB,CAAV;;AACA,MAAIA,OAAO,KAAK,QAAhB,EAA0B;AACxB,WAAO1qB,GAAP;AACD,GAJuC,CAKxC;;;AACA,MAAIyB,KAAK,CAAC5B,IAAN,IAAc4B,KAAK,CAAC5B,IAAN,CAAWkP,KAAzB,IAAkCtN,KAAK,CAAC5B,IAAN,CAAWkP,KAAX,CAAiB4b,QAAjB,KAA8Bz5B,SAApE,EAA+E;AAC7E8O,IAAAA,GAAG,CAAC4qB,YAAJ,CAAiB,UAAjB,EAA6B,UAA7B;AACD;;AACD,SAAO5qB,GAAP;AACD;;AAED,SAAS6qB,eAAT,CAA0BC,SAA1B,EAAqCJ,OAArC,EAA8C;AAC5C,SAAOpf,QAAQ,CAACuf,eAAT,CAAyBhB,YAAY,CAACiB,SAAD,CAArC,EAAkDJ,OAAlD,CAAP;AACD;;AAED,SAASnf,cAAT,CAAyBxL,IAAzB,EAA+B;AAC7B,SAAOuL,QAAQ,CAACC,cAAT,CAAwBxL,IAAxB,CAAP;AACD;;AAED,SAASgrB,aAAT,CAAwBhrB,IAAxB,EAA8B;AAC5B,SAAOuL,QAAQ,CAACyf,aAAT,CAAuBhrB,IAAvB,CAAP;AACD;;AAED,SAASirB,YAAT,CAAuB7B,UAAvB,EAAmC8B,OAAnC,EAA4CC,aAA5C,EAA2D;AACzD/B,EAAAA,UAAU,CAAC6B,YAAX,CAAwBC,OAAxB,EAAiCC,aAAjC;AACD;;AAED,SAASC,WAAT,CAAsB7pB,IAAtB,EAA4BH,KAA5B,EAAmC;AACjCG,EAAAA,IAAI,CAAC6pB,WAAL,CAAiBhqB,KAAjB;AACD;;AAED,SAASiqB,WAAT,CAAsB9pB,IAAtB,EAA4BH,KAA5B,EAAmC;AACjCG,EAAAA,IAAI,CAAC8pB,WAAL,CAAiBjqB,KAAjB;AACD;;AAED,SAASgoB,UAAT,CAAqB7nB,IAArB,EAA2B;AACzB,SAAOA,IAAI,CAAC6nB,UAAZ;AACD;;AAED,SAASkC,WAAT,CAAsB/pB,IAAtB,EAA4B;AAC1B,SAAOA,IAAI,CAAC+pB,WAAZ;AACD;;AAED,SAASX,OAAT,CAAkBppB,IAAlB,EAAwB;AACtB,SAAOA,IAAI,CAACopB,OAAZ;AACD;;AAED,SAASY,cAAT,CAAyBhqB,IAAzB,EAA+BvB,IAA/B,EAAqC;AACnCuB,EAAAA,IAAI,CAACiqB,WAAL,GAAmBxrB,IAAnB;AACD;;AAED,SAASyrB,aAAT,CAAwBlqB,IAAxB,EAA8BmqB,OAA9B,EAAuC;AACrCnqB,EAAAA,IAAI,CAACspB,YAAL,CAAkBa,OAAlB,EAA2B,EAA3B;AACD;;AAED,IAAIC,OAAO,GAAG,aAAa56B,MAAM,CAACC,MAAP,CAAc;AACvCqlB,EAAAA,aAAa,EAAEqU,eADwB;AAEvCI,EAAAA,eAAe,EAAEA,eAFsB;AAGvCtf,EAAAA,cAAc,EAAEA,cAHuB;AAIvCwf,EAAAA,aAAa,EAAEA,aAJwB;AAKvCC,EAAAA,YAAY,EAAEA,YALyB;AAMvCG,EAAAA,WAAW,EAAEA,WAN0B;AAOvCC,EAAAA,WAAW,EAAEA,WAP0B;AAQvCjC,EAAAA,UAAU,EAAEA,UAR2B;AASvCkC,EAAAA,WAAW,EAAEA,WAT0B;AAUvCX,EAAAA,OAAO,EAAEA,OAV8B;AAWvCY,EAAAA,cAAc,EAAEA,cAXuB;AAYvCE,EAAAA,aAAa,EAAEA;AAZwB,CAAd,CAA3B;AAeA;;AAEA,IAAI1Q,GAAG,GAAG;AACRvnB,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiByB,CAAjB,EAAoByM,KAApB,EAA2B;AACjCkqB,IAAAA,WAAW,CAAClqB,KAAD,CAAX;AACD,GAHO;AAIRnC,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiBgY,QAAjB,EAA2B7V,KAA3B,EAAkC;AACxC,QAAI6V,QAAQ,CAACzX,IAAT,CAAcib,GAAd,KAAsBrZ,KAAK,CAAC5B,IAAN,CAAWib,GAArC,EAA0C;AACxC6Q,MAAAA,WAAW,CAACrU,QAAD,EAAW,IAAX,CAAX;AACAqU,MAAAA,WAAW,CAAClqB,KAAD,CAAX;AACD;AACF,GATO;AAURoW,EAAAA,OAAO,EAAE,SAASA,OAAT,CAAkBpW,KAAlB,EAAyB;AAChCkqB,IAAAA,WAAW,CAAClqB,KAAD,EAAQ,IAAR,CAAX;AACD;AAZO,CAAV;;AAeA,SAASkqB,WAAT,CAAsBlqB,KAAtB,EAA6BmqB,SAA7B,EAAwC;AACtC,MAAIr3B,GAAG,GAAGkN,KAAK,CAAC5B,IAAN,CAAWib,GAArB;;AACA,MAAI,CAAC3pB,KAAK,CAACoD,GAAD,CAAV,EAAiB;AAAE;AAAQ;;AAE3B,MAAI8I,EAAE,GAAGoE,KAAK,CAACxB,OAAf;AACA,MAAI6a,GAAG,GAAGrZ,KAAK,CAACjB,iBAAN,IAA2BiB,KAAK,CAACzB,GAA3C;AACA,MAAI6rB,IAAI,GAAGxuB,EAAE,CAACygB,KAAd;;AACA,MAAI8N,SAAJ,EAAe;AACb,QAAI/4B,KAAK,CAACC,OAAN,CAAc+4B,IAAI,CAACt3B,GAAD,CAAlB,CAAJ,EAA8B;AAC5BR,MAAAA,MAAM,CAAC83B,IAAI,CAACt3B,GAAD,CAAL,EAAYumB,GAAZ,CAAN;AACD,KAFD,MAEO,IAAI+Q,IAAI,CAACt3B,GAAD,CAAJ,KAAcumB,GAAlB,EAAuB;AAC5B+Q,MAAAA,IAAI,CAACt3B,GAAD,CAAJ,GAAYrD,SAAZ;AACD;AACF,GAND,MAMO;AACL,QAAIuQ,KAAK,CAAC5B,IAAN,CAAWisB,QAAf,EAAyB;AACvB,UAAI,CAACj5B,KAAK,CAACC,OAAN,CAAc+4B,IAAI,CAACt3B,GAAD,CAAlB,CAAL,EAA+B;AAC7Bs3B,QAAAA,IAAI,CAACt3B,GAAD,CAAJ,GAAY,CAACumB,GAAD,CAAZ;AACD,OAFD,MAEO,IAAI+Q,IAAI,CAACt3B,GAAD,CAAJ,CAAUJ,OAAV,CAAkB2mB,GAAlB,IAAyB,CAA7B,EAAgC;AACrC;AACA+Q,QAAAA,IAAI,CAACt3B,GAAD,CAAJ,CAAUiK,IAAV,CAAesc,GAAf;AACD;AACF,KAPD,MAOO;AACL+Q,MAAAA,IAAI,CAACt3B,GAAD,CAAJ,GAAYumB,GAAZ;AACD;AACF;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIiR,SAAS,GAAG,IAAIpsB,KAAJ,CAAU,EAAV,EAAc,EAAd,EAAkB,EAAlB,CAAhB;AAEA,IAAI8F,KAAK,GAAG,CAAC,QAAD,EAAW,UAAX,EAAuB,QAAvB,EAAiC,QAAjC,EAA2C,SAA3C,CAAZ;;AAEA,SAASumB,SAAT,CAAoBt2B,CAApB,EAAuBiB,CAAvB,EAA0B;AACxB,SACEjB,CAAC,CAACnB,GAAF,KAAUoC,CAAC,CAACpC,GAAZ,KAEImB,CAAC,CAACkK,GAAF,KAAUjJ,CAAC,CAACiJ,GAAZ,IACAlK,CAAC,CAACmL,SAAF,KAAgBlK,CAAC,CAACkK,SADlB,IAEA1P,KAAK,CAACuE,CAAC,CAACmK,IAAH,CAAL,KAAkB1O,KAAK,CAACwF,CAAC,CAACkJ,IAAH,CAFvB,IAGAosB,aAAa,CAACv2B,CAAD,EAAIiB,CAAJ,CAJf,IAMEvF,MAAM,CAACsE,CAAC,CAACuL,kBAAH,CAAN,IACAvL,CAAC,CAACyK,YAAF,KAAmBxJ,CAAC,CAACwJ,YADrB,IAEAnP,OAAO,CAAC2F,CAAC,CAACwJ,YAAF,CAAe5C,KAAhB,CATX,CADF;AAcD;;AAED,SAAS0uB,aAAT,CAAwBv2B,CAAxB,EAA2BiB,CAA3B,EAA8B;AAC5B,MAAIjB,CAAC,CAACkK,GAAF,KAAU,OAAd,EAAuB;AAAE,WAAO,IAAP;AAAa;;AACtC,MAAIlM,CAAJ;AACA,MAAIw4B,KAAK,GAAG/6B,KAAK,CAACuC,CAAC,GAAGgC,CAAC,CAACmK,IAAP,CAAL,IAAqB1O,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACqb,KAAP,CAA1B,IAA2Crb,CAAC,CAACmS,IAAzD;AACA,MAAIsmB,KAAK,GAAGh7B,KAAK,CAACuC,CAAC,GAAGiD,CAAC,CAACkJ,IAAP,CAAL,IAAqB1O,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACqb,KAAP,CAA1B,IAA2Crb,CAAC,CAACmS,IAAzD;AACA,SAAOqmB,KAAK,KAAKC,KAAV,IAAmB9B,eAAe,CAAC6B,KAAD,CAAf,IAA0B7B,eAAe,CAAC8B,KAAD,CAAnE;AACD;;AAED,SAASC,iBAAT,CAA4BtsB,QAA5B,EAAsCusB,QAAtC,EAAgDC,MAAhD,EAAwD;AACtD,MAAI54B,CAAJ,EAAOa,GAAP;AACA,MAAIjB,GAAG,GAAG,EAAV;;AACA,OAAKI,CAAC,GAAG24B,QAAT,EAAmB34B,CAAC,IAAI44B,MAAxB,EAAgC,EAAE54B,CAAlC,EAAqC;AACnCa,IAAAA,GAAG,GAAGuL,QAAQ,CAACpM,CAAD,CAAR,CAAYa,GAAlB;;AACA,QAAIpD,KAAK,CAACoD,GAAD,CAAT,EAAgB;AAAEjB,MAAAA,GAAG,CAACiB,GAAD,CAAH,GAAWb,CAAX;AAAe;AAClC;;AACD,SAAOJ,GAAP;AACD;;AAED,SAASi5B,mBAAT,CAA8BC,OAA9B,EAAuC;AACrC,MAAI94B,CAAJ,EAAOssB,CAAP;AACA,MAAIzC,GAAG,GAAG,EAAV;AAEA,MAAIkP,OAAO,GAAGD,OAAO,CAACC,OAAtB;AACA,MAAIf,OAAO,GAAGc,OAAO,CAACd,OAAtB;;AAEA,OAAKh4B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG+R,KAAK,CAAC9R,MAAtB,EAA8B,EAAED,CAAhC,EAAmC;AACjC6pB,IAAAA,GAAG,CAAC9X,KAAK,CAAC/R,CAAD,CAAN,CAAH,GAAgB,EAAhB;;AACA,SAAKssB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyM,OAAO,CAAC94B,MAAxB,EAAgC,EAAEqsB,CAAlC,EAAqC;AACnC,UAAI7uB,KAAK,CAACs7B,OAAO,CAACzM,CAAD,CAAP,CAAWva,KAAK,CAAC/R,CAAD,CAAhB,CAAD,CAAT,EAAiC;AAC/B6pB,QAAAA,GAAG,CAAC9X,KAAK,CAAC/R,CAAD,CAAN,CAAH,CAAc8K,IAAd,CAAmBiuB,OAAO,CAACzM,CAAD,CAAP,CAAWva,KAAK,CAAC/R,CAAD,CAAhB,CAAnB;AACD;AACF;AACF;;AAED,WAASg5B,WAAT,CAAsB1sB,GAAtB,EAA2B;AACzB,WAAO,IAAIL,KAAJ,CAAU+rB,OAAO,CAAChB,OAAR,CAAgB1qB,GAAhB,EAAqBpM,WAArB,EAAV,EAA8C,EAA9C,EAAkD,EAAlD,EAAsD1C,SAAtD,EAAiE8O,GAAjE,CAAP;AACD;;AAED,WAAS2sB,UAAT,CAAqBC,QAArB,EAA+B9W,SAA/B,EAA0C;AACxC,aAAS1H,SAAT,GAAsB;AACpB,UAAI,EAAEA,SAAS,CAAC0H,SAAZ,KAA0B,CAA9B,EAAiC;AAC/B+W,QAAAA,UAAU,CAACD,QAAD,CAAV;AACD;AACF;;AACDxe,IAAAA,SAAS,CAAC0H,SAAV,GAAsBA,SAAtB;AACA,WAAO1H,SAAP;AACD;;AAED,WAASye,UAAT,CAAqBroB,EAArB,EAAyB;AACvB,QAAI/D,MAAM,GAAGirB,OAAO,CAACvC,UAAR,CAAmB3kB,EAAnB,CAAb,CADuB,CAEvB;;AACA,QAAIrT,KAAK,CAACsP,MAAD,CAAT,EAAmB;AACjBirB,MAAAA,OAAO,CAACP,WAAR,CAAoB1qB,MAApB,EAA4B+D,EAA5B;AACD;AACF;;AAED,WAASsoB,mBAAT,CAA8BrrB,KAA9B,EAAqCsrB,MAArC,EAA6C;AAC3C,WACE,CAACA,MAAD,IACA,CAACtrB,KAAK,CAACrB,EADP,IAEA,EACEpI,MAAM,CAACQ,eAAP,CAAuB7E,MAAvB,IACAqE,MAAM,CAACQ,eAAP,CAAuBmR,IAAvB,CAA4B,UAAUqjB,MAAV,EAAkB;AAC5C,aAAO/6B,QAAQ,CAAC+6B,MAAD,CAAR,GACHA,MAAM,CAACjzB,IAAP,CAAY0H,KAAK,CAAC7B,GAAlB,CADG,GAEHotB,MAAM,KAAKvrB,KAAK,CAAC7B,GAFrB;AAGD,KAJD,CAFF,CAFA,IAUA5H,MAAM,CAACY,gBAAP,CAAwB6I,KAAK,CAAC7B,GAA9B,CAXF;AAaD;;AAED,MAAIqtB,iBAAiB,GAAG,CAAxB;;AAEA,WAASC,SAAT,CACEzrB,KADF,EAEE0rB,kBAFF,EAGEC,SAHF,EAIEC,MAJF,EAKEC,MALF,EAMEC,UANF,EAOEr5B,KAPF,EAQE;AACA,QAAI/C,KAAK,CAACsQ,KAAK,CAACzB,GAAP,CAAL,IAAoB7O,KAAK,CAACo8B,UAAD,CAA7B,EAA2C;AACzC;AACA;AACA;AACA;AACA;AACA9rB,MAAAA,KAAK,GAAG8rB,UAAU,CAACr5B,KAAD,CAAV,GAAoBsN,UAAU,CAACC,KAAD,CAAtC;AACD;;AAEDA,IAAAA,KAAK,CAACb,YAAN,GAAqB,CAAC0sB,MAAtB,CAVA,CAU8B;;AAC9B,QAAIrV,eAAe,CAACxW,KAAD,EAAQ0rB,kBAAR,EAA4BC,SAA5B,EAAuCC,MAAvC,CAAnB,EAAmE;AACjE;AACD;;AAED,QAAIxtB,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;AACA,QAAIC,QAAQ,GAAG2B,KAAK,CAAC3B,QAArB;AACA,QAAIF,GAAG,GAAG6B,KAAK,CAAC7B,GAAhB;;AACA,QAAIzO,KAAK,CAACyO,GAAD,CAAT,EAAgB;AACd,UAAI,kBAAyB,YAA7B,EAA2C;AACzC,YAAIC,IAAI,IAAIA,IAAI,CAAC+Z,GAAjB,EAAsB;AACpBqT,UAAAA,iBAAiB;AAClB;;AACD,YAAIH,mBAAmB,CAACrrB,KAAD,EAAQwrB,iBAAR,CAAvB,EAAmD;AACjDrwB,UAAAA,IAAI,CACF,8BAA8BgD,GAA9B,GAAoC,cAApC,GACA,8DADA,GAEA,yCAHE,EAIF6B,KAAK,CAACxB,OAJJ,CAAJ;AAMD;AACF;;AAEDwB,MAAAA,KAAK,CAACzB,GAAN,GAAYyB,KAAK,CAACrB,EAAN,GACRsrB,OAAO,CAACb,eAAR,CAAwBppB,KAAK,CAACrB,EAA9B,EAAkCR,GAAlC,CADQ,GAER8rB,OAAO,CAACtV,aAAR,CAAsBxW,GAAtB,EAA2B6B,KAA3B,CAFJ;AAGA+rB,MAAAA,QAAQ,CAAC/rB,KAAD,CAAR;AAEA;;AACA;AACEgsB,QAAAA,cAAc,CAAChsB,KAAD,EAAQ3B,QAAR,EAAkBqtB,kBAAlB,CAAd;;AACA,YAAIh8B,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AACf6tB,UAAAA,iBAAiB,CAACjsB,KAAD,EAAQ0rB,kBAAR,CAAjB;AACD;;AACD3V,QAAAA,MAAM,CAAC4V,SAAD,EAAY3rB,KAAK,CAACzB,GAAlB,EAAuBqtB,MAAvB,CAAN;AACD;;AAED,UAAI,kBAAyB,YAAzB,IAAyCxtB,IAAzC,IAAiDA,IAAI,CAAC+Z,GAA1D,EAA+D;AAC7DqT,QAAAA,iBAAiB;AAClB;AACF,KAhCD,MAgCO,IAAI77B,MAAM,CAACqQ,KAAK,CAACZ,SAAP,CAAV,EAA6B;AAClCY,MAAAA,KAAK,CAACzB,GAAN,GAAY0rB,OAAO,CAACX,aAAR,CAAsBtpB,KAAK,CAAC1B,IAA5B,CAAZ;AACAyX,MAAAA,MAAM,CAAC4V,SAAD,EAAY3rB,KAAK,CAACzB,GAAlB,EAAuBqtB,MAAvB,CAAN;AACD,KAHM,MAGA;AACL5rB,MAAAA,KAAK,CAACzB,GAAN,GAAY0rB,OAAO,CAACngB,cAAR,CAAuB9J,KAAK,CAAC1B,IAA7B,CAAZ;AACAyX,MAAAA,MAAM,CAAC4V,SAAD,EAAY3rB,KAAK,CAACzB,GAAlB,EAAuBqtB,MAAvB,CAAN;AACD;AACF;;AAED,WAASpV,eAAT,CAA0BxW,KAA1B,EAAiC0rB,kBAAjC,EAAqDC,SAArD,EAAgEC,MAAhE,EAAwE;AACtE,QAAI35B,CAAC,GAAG+N,KAAK,CAAC5B,IAAd;;AACA,QAAI1O,KAAK,CAACuC,CAAD,CAAT,EAAc;AACZ,UAAIi6B,aAAa,GAAGx8B,KAAK,CAACsQ,KAAK,CAACjB,iBAAP,CAAL,IAAkC9M,CAAC,CAACsjB,SAAxD;;AACA,UAAI7lB,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACgS,IAAP,CAAL,IAAqBvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACmjB,IAAP,CAA9B,EAA4C;AAC1CnjB,QAAAA,CAAC,CAAC+N,KAAD,EAAQ;AAAM;AAAd,SAAD;AACD,OAJW,CAKZ;AACA;AACA;AACA;;;AACA,UAAItQ,KAAK,CAACsQ,KAAK,CAACjB,iBAAP,CAAT,EAAoC;AAClCotB,QAAAA,aAAa,CAACnsB,KAAD,EAAQ0rB,kBAAR,CAAb;AACA3V,QAAAA,MAAM,CAAC4V,SAAD,EAAY3rB,KAAK,CAACzB,GAAlB,EAAuBqtB,MAAvB,CAAN;;AACA,YAAIj8B,MAAM,CAACu8B,aAAD,CAAV,EAA2B;AACzBE,UAAAA,mBAAmB,CAACpsB,KAAD,EAAQ0rB,kBAAR,EAA4BC,SAA5B,EAAuCC,MAAvC,CAAnB;AACD;;AACD,eAAO,IAAP;AACD;AACF;AACF;;AAED,WAASO,aAAT,CAAwBnsB,KAAxB,EAA+B0rB,kBAA/B,EAAmD;AACjD,QAAIh8B,KAAK,CAACsQ,KAAK,CAAC5B,IAAN,CAAWiuB,aAAZ,CAAT,EAAqC;AACnCX,MAAAA,kBAAkB,CAAC3uB,IAAnB,CAAwB3I,KAAxB,CAA8Bs3B,kBAA9B,EAAkD1rB,KAAK,CAAC5B,IAAN,CAAWiuB,aAA7D;AACArsB,MAAAA,KAAK,CAAC5B,IAAN,CAAWiuB,aAAX,GAA2B,IAA3B;AACD;;AACDrsB,IAAAA,KAAK,CAACzB,GAAN,GAAYyB,KAAK,CAACjB,iBAAN,CAAwB8d,GAApC;;AACA,QAAIyP,WAAW,CAACtsB,KAAD,CAAf,EAAwB;AACtBisB,MAAAA,iBAAiB,CAACjsB,KAAD,EAAQ0rB,kBAAR,CAAjB;AACAK,MAAAA,QAAQ,CAAC/rB,KAAD,CAAR;AACD,KAHD,MAGO;AACL;AACA;AACAkqB,MAAAA,WAAW,CAAClqB,KAAD,CAAX,CAHK,CAIL;;AACA0rB,MAAAA,kBAAkB,CAAC3uB,IAAnB,CAAwBiD,KAAxB;AACD;AACF;;AAED,WAASosB,mBAAT,CAA8BpsB,KAA9B,EAAqC0rB,kBAArC,EAAyDC,SAAzD,EAAoEC,MAApE,EAA4E;AAC1E,QAAI35B,CAAJ,CAD0E,CAE1E;AACA;AACA;AACA;;AACA,QAAIs6B,SAAS,GAAGvsB,KAAhB;;AACA,WAAOusB,SAAS,CAACxtB,iBAAjB,EAAoC;AAClCwtB,MAAAA,SAAS,GAAGA,SAAS,CAACxtB,iBAAV,CAA4B2Z,MAAxC;;AACA,UAAIhpB,KAAK,CAACuC,CAAC,GAAGs6B,SAAS,CAACnuB,IAAf,CAAL,IAA6B1O,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACu6B,UAAP,CAAtC,EAA0D;AACxD,aAAKv6B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6pB,GAAG,CAAC2Q,QAAJ,CAAav6B,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AACxC6pB,UAAAA,GAAG,CAAC2Q,QAAJ,CAAax6B,CAAb,EAAgBq4B,SAAhB,EAA2BiC,SAA3B;AACD;;AACDb,QAAAA,kBAAkB,CAAC3uB,IAAnB,CAAwBwvB,SAAxB;AACA;AACD;AACF,KAhByE,CAiB1E;AACA;;;AACAxW,IAAAA,MAAM,CAAC4V,SAAD,EAAY3rB,KAAK,CAACzB,GAAlB,EAAuBqtB,MAAvB,CAAN;AACD;;AAED,WAAS7V,MAAT,CAAiB/W,MAAjB,EAAyBT,GAAzB,EAA8BmuB,MAA9B,EAAsC;AACpC,QAAIh9B,KAAK,CAACsP,MAAD,CAAT,EAAmB;AACjB,UAAItP,KAAK,CAACg9B,MAAD,CAAT,EAAmB;AACjB,YAAIzC,OAAO,CAACvC,UAAR,CAAmBgF,MAAnB,MAA+B1tB,MAAnC,EAA2C;AACzCirB,UAAAA,OAAO,CAACV,YAAR,CAAqBvqB,MAArB,EAA6BT,GAA7B,EAAkCmuB,MAAlC;AACD;AACF,OAJD,MAIO;AACLzC,QAAAA,OAAO,CAACN,WAAR,CAAoB3qB,MAApB,EAA4BT,GAA5B;AACD;AACF;AACF;;AAED,WAASytB,cAAT,CAAyBhsB,KAAzB,EAAgC3B,QAAhC,EAA0CqtB,kBAA1C,EAA8D;AAC5D,QAAIt6B,KAAK,CAACC,OAAN,CAAcgN,QAAd,CAAJ,EAA6B;AAC3B,UAAI,kBAAyB,YAA7B,EAA2C;AACzCsuB,QAAAA,kBAAkB,CAACtuB,QAAD,CAAlB;AACD;;AACD,WAAK,IAAIpM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoM,QAAQ,CAACnM,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AACxCw5B,QAAAA,SAAS,CAACptB,QAAQ,CAACpM,CAAD,CAAT,EAAcy5B,kBAAd,EAAkC1rB,KAAK,CAACzB,GAAxC,EAA6C,IAA7C,EAAmD,IAAnD,EAAyDF,QAAzD,EAAmEpM,CAAnE,CAAT;AACD;AACF,KAPD,MAOO,IAAIpC,WAAW,CAACmQ,KAAK,CAAC1B,IAAP,CAAf,EAA6B;AAClC2rB,MAAAA,OAAO,CAACN,WAAR,CAAoB3pB,KAAK,CAACzB,GAA1B,EAA+B0rB,OAAO,CAACngB,cAAR,CAAuBjZ,MAAM,CAACmP,KAAK,CAAC1B,IAAP,CAA7B,CAA/B;AACD;AACF;;AAED,WAASguB,WAAT,CAAsBtsB,KAAtB,EAA6B;AAC3B,WAAOA,KAAK,CAACjB,iBAAb,EAAgC;AAC9BiB,MAAAA,KAAK,GAAGA,KAAK,CAACjB,iBAAN,CAAwB2Z,MAAhC;AACD;;AACD,WAAOhpB,KAAK,CAACsQ,KAAK,CAAC7B,GAAP,CAAZ;AACD;;AAED,WAAS8tB,iBAAT,CAA4BjsB,KAA5B,EAAmC0rB,kBAAnC,EAAuD;AACrD,SAAK,IAAI7P,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGC,GAAG,CAAChqB,MAAJ,CAAWI,MAAnC,EAA2C,EAAE2pB,GAA7C,EAAkD;AAChDC,MAAAA,GAAG,CAAChqB,MAAJ,CAAW+pB,GAAX,EAAgByO,SAAhB,EAA2BtqB,KAA3B;AACD;;AACD/N,IAAAA,CAAC,GAAG+N,KAAK,CAAC5B,IAAN,CAAW6F,IAAf,CAJqD,CAIhC;;AACrB,QAAIvU,KAAK,CAACuC,CAAD,CAAT,EAAc;AACZ,UAAIvC,KAAK,CAACuC,CAAC,CAACH,MAAH,CAAT,EAAqB;AAAEG,QAAAA,CAAC,CAACH,MAAF,CAASw4B,SAAT,EAAoBtqB,KAApB;AAA6B;;AACpD,UAAItQ,KAAK,CAACuC,CAAC,CAAC8jB,MAAH,CAAT,EAAqB;AAAE2V,QAAAA,kBAAkB,CAAC3uB,IAAnB,CAAwBiD,KAAxB;AAAiC;AACzD;AACF,GAlOoC,CAoOrC;AACA;AACA;;;AACA,WAAS+rB,QAAT,CAAmB/rB,KAAnB,EAA0B;AACxB,QAAI/N,CAAJ;;AACA,QAAIvC,KAAK,CAACuC,CAAC,GAAG+N,KAAK,CAAClB,SAAX,CAAT,EAAgC;AAC9BmrB,MAAAA,OAAO,CAACF,aAAR,CAAsB/pB,KAAK,CAACzB,GAA5B,EAAiCtM,CAAjC;AACD,KAFD,MAEO;AACL,UAAI26B,QAAQ,GAAG5sB,KAAf;;AACA,aAAO4sB,QAAP,EAAiB;AACf,YAAIl9B,KAAK,CAACuC,CAAC,GAAG26B,QAAQ,CAACpuB,OAAd,CAAL,IAA+B9O,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACmK,QAAF,CAAWoY,QAAhB,CAAxC,EAAmE;AACjEyV,UAAAA,OAAO,CAACF,aAAR,CAAsB/pB,KAAK,CAACzB,GAA5B,EAAiCtM,CAAjC;AACD;;AACD26B,QAAAA,QAAQ,GAAGA,QAAQ,CAAC5tB,MAApB;AACD;AACF,KAZuB,CAaxB;;;AACA,QAAItP,KAAK,CAACuC,CAAC,GAAG0jB,cAAL,CAAL,IACF1jB,CAAC,KAAK+N,KAAK,CAACxB,OADV,IAEFvM,CAAC,KAAK+N,KAAK,CAACpB,SAFV,IAGFlP,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACmK,QAAF,CAAWoY,QAAhB,CAHP,EAIE;AACAyV,MAAAA,OAAO,CAACF,aAAR,CAAsB/pB,KAAK,CAACzB,GAA5B,EAAiCtM,CAAjC;AACD;AACF;;AAED,WAAS46B,SAAT,CAAoBlB,SAApB,EAA+BC,MAA/B,EAAuC5W,MAAvC,EAA+C8X,QAA/C,EAAyDjC,MAAzD,EAAiEa,kBAAjE,EAAqF;AACnF,WAAOoB,QAAQ,IAAIjC,MAAnB,EAA2B,EAAEiC,QAA7B,EAAuC;AACrCrB,MAAAA,SAAS,CAACzW,MAAM,CAAC8X,QAAD,CAAP,EAAmBpB,kBAAnB,EAAuCC,SAAvC,EAAkDC,MAAlD,EAA0D,KAA1D,EAAiE5W,MAAjE,EAAyE8X,QAAzE,CAAT;AACD;AACF;;AAED,WAASC,iBAAT,CAA4B/sB,KAA5B,EAAmC;AACjC,QAAI/N,CAAJ,EAAOssB,CAAP;AACA,QAAIngB,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;;AACA,QAAI1O,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AACf,UAAI1O,KAAK,CAACuC,CAAC,GAAGmM,IAAI,CAAC6F,IAAV,CAAL,IAAwBvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACmkB,OAAP,CAAjC,EAAkD;AAAEnkB,QAAAA,CAAC,CAAC+N,KAAD,CAAD;AAAW;;AAC/D,WAAK/N,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6pB,GAAG,CAAC1F,OAAJ,CAAYlkB,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AAAE6pB,QAAAA,GAAG,CAAC1F,OAAJ,CAAYnkB,CAAZ,EAAe+N,KAAf;AAAwB;AACpE;;AACD,QAAItQ,KAAK,CAACuC,CAAC,GAAG+N,KAAK,CAAC3B,QAAX,CAAT,EAA+B;AAC7B,WAAKkgB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGve,KAAK,CAAC3B,QAAN,CAAenM,MAA/B,EAAuC,EAAEqsB,CAAzC,EAA4C;AAC1CwO,QAAAA,iBAAiB,CAAC/sB,KAAK,CAAC3B,QAAN,CAAekgB,CAAf,CAAD,CAAjB;AACD;AACF;AACF;;AAED,WAASyO,YAAT,CAAuBhY,MAAvB,EAA+B8X,QAA/B,EAAyCjC,MAAzC,EAAiD;AAC/C,WAAOiC,QAAQ,IAAIjC,MAAnB,EAA2B,EAAEiC,QAA7B,EAAuC;AACrC,UAAIG,EAAE,GAAGjY,MAAM,CAAC8X,QAAD,CAAf;;AACA,UAAIp9B,KAAK,CAACu9B,EAAD,CAAT,EAAe;AACb,YAAIv9B,KAAK,CAACu9B,EAAE,CAAC9uB,GAAJ,CAAT,EAAmB;AACjB+uB,UAAAA,yBAAyB,CAACD,EAAD,CAAzB;AACAF,UAAAA,iBAAiB,CAACE,EAAD,CAAjB;AACD,SAHD,MAGO;AAAE;AACP7B,UAAAA,UAAU,CAAC6B,EAAE,CAAC1uB,GAAJ,CAAV;AACD;AACF;AACF;AACF;;AAED,WAAS2uB,yBAAT,CAAoCltB,KAApC,EAA2CmtB,EAA3C,EAA+C;AAC7C,QAAIz9B,KAAK,CAACy9B,EAAD,CAAL,IAAaz9B,KAAK,CAACsQ,KAAK,CAAC5B,IAAP,CAAtB,EAAoC;AAClC,UAAInM,CAAJ;AACA,UAAIoiB,SAAS,GAAGyH,GAAG,CAACxpB,MAAJ,CAAWJ,MAAX,GAAoB,CAApC;;AACA,UAAIxC,KAAK,CAACy9B,EAAD,CAAT,EAAe;AACb;AACA;AACAA,QAAAA,EAAE,CAAC9Y,SAAH,IAAgBA,SAAhB;AACD,OAJD,MAIO;AACL;AACA8Y,QAAAA,EAAE,GAAGjC,UAAU,CAAClrB,KAAK,CAACzB,GAAP,EAAY8V,SAAZ,CAAf;AACD,OAViC,CAWlC;;;AACA,UAAI3kB,KAAK,CAACuC,CAAC,GAAG+N,KAAK,CAACjB,iBAAX,CAAL,IAAsCrP,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACymB,MAAP,CAA3C,IAA6DhpB,KAAK,CAACuC,CAAC,CAACmM,IAAH,CAAtE,EAAgF;AAC9E8uB,QAAAA,yBAAyB,CAACj7B,CAAD,EAAIk7B,EAAJ,CAAzB;AACD;;AACD,WAAKl7B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6pB,GAAG,CAACxpB,MAAJ,CAAWJ,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AACtC6pB,QAAAA,GAAG,CAACxpB,MAAJ,CAAWL,CAAX,EAAc+N,KAAd,EAAqBmtB,EAArB;AACD;;AACD,UAAIz9B,KAAK,CAACuC,CAAC,GAAG+N,KAAK,CAAC5B,IAAN,CAAW6F,IAAhB,CAAL,IAA8BvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACK,MAAP,CAAvC,EAAuD;AACrDL,QAAAA,CAAC,CAAC+N,KAAD,EAAQmtB,EAAR,CAAD;AACD,OAFD,MAEO;AACLA,QAAAA,EAAE;AACH;AACF,KAvBD,MAuBO;AACL/B,MAAAA,UAAU,CAACprB,KAAK,CAACzB,GAAP,CAAV;AACD;AACF;;AAED,WAAS6uB,cAAT,CAAyBzB,SAAzB,EAAoC0B,KAApC,EAA2CC,KAA3C,EAAkD5B,kBAAlD,EAAsE6B,UAAtE,EAAkF;AAChF,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,SAAS,GAAGL,KAAK,CAACn7B,MAAN,GAAe,CAA/B;AACA,QAAIy7B,aAAa,GAAGN,KAAK,CAAC,CAAD,CAAzB;AACA,QAAIO,WAAW,GAAGP,KAAK,CAACK,SAAD,CAAvB;AACA,QAAIG,SAAS,GAAGP,KAAK,CAACp7B,MAAN,GAAe,CAA/B;AACA,QAAI47B,aAAa,GAAGR,KAAK,CAAC,CAAD,CAAzB;AACA,QAAIS,WAAW,GAAGT,KAAK,CAACO,SAAD,CAAvB;AACA,QAAIG,WAAJ,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCtC,MAAxC,CATgF,CAWhF;AACA;AACA;;AACA,QAAIuC,OAAO,GAAG,CAACZ,UAAf;;AAEA,QAAI,kBAAyB,YAA7B,EAA2C;AACzCZ,MAAAA,kBAAkB,CAACW,KAAD,CAAlB;AACD;;AAED,WAAOE,WAAW,IAAIE,SAAf,IAA4BD,WAAW,IAAII,SAAlD,EAA6D;AAC3D,UAAIt+B,OAAO,CAACo+B,aAAD,CAAX,EAA4B;AAC1BA,QAAAA,aAAa,GAAGN,KAAK,CAAC,EAAEG,WAAH,CAArB,CAD0B,CACY;AACvC,OAFD,MAEO,IAAIj+B,OAAO,CAACq+B,WAAD,CAAX,EAA0B;AAC/BA,QAAAA,WAAW,GAAGP,KAAK,CAAC,EAAEK,SAAH,CAAnB;AACD,OAFM,MAEA,IAAInD,SAAS,CAACoD,aAAD,EAAgBG,aAAhB,CAAb,EAA6C;AAClDM,QAAAA,UAAU,CAACT,aAAD,EAAgBG,aAAhB,EAA+BpC,kBAA/B,EAAmD4B,KAAnD,EAA0DG,WAA1D,CAAV;AACAE,QAAAA,aAAa,GAAGN,KAAK,CAAC,EAAEG,WAAH,CAArB;AACAM,QAAAA,aAAa,GAAGR,KAAK,CAAC,EAAEG,WAAH,CAArB;AACD,OAJM,MAIA,IAAIlD,SAAS,CAACqD,WAAD,EAAcG,WAAd,CAAb,EAAyC;AAC9CK,QAAAA,UAAU,CAACR,WAAD,EAAcG,WAAd,EAA2BrC,kBAA3B,EAA+C4B,KAA/C,EAAsDO,SAAtD,CAAV;AACAD,QAAAA,WAAW,GAAGP,KAAK,CAAC,EAAEK,SAAH,CAAnB;AACAK,QAAAA,WAAW,GAAGT,KAAK,CAAC,EAAEO,SAAH,CAAnB;AACD,OAJM,MAIA,IAAItD,SAAS,CAACoD,aAAD,EAAgBI,WAAhB,CAAb,EAA2C;AAAE;AAClDK,QAAAA,UAAU,CAACT,aAAD,EAAgBI,WAAhB,EAA6BrC,kBAA7B,EAAiD4B,KAAjD,EAAwDO,SAAxD,CAAV;AACAM,QAAAA,OAAO,IAAIlE,OAAO,CAACV,YAAR,CAAqBoC,SAArB,EAAgCgC,aAAa,CAACpvB,GAA9C,EAAmD0rB,OAAO,CAACL,WAAR,CAAoBgE,WAAW,CAACrvB,GAAhC,CAAnD,CAAX;AACAovB,QAAAA,aAAa,GAAGN,KAAK,CAAC,EAAEG,WAAH,CAArB;AACAO,QAAAA,WAAW,GAAGT,KAAK,CAAC,EAAEO,SAAH,CAAnB;AACD,OALM,MAKA,IAAItD,SAAS,CAACqD,WAAD,EAAcE,aAAd,CAAb,EAA2C;AAAE;AAClDM,QAAAA,UAAU,CAACR,WAAD,EAAcE,aAAd,EAA6BpC,kBAA7B,EAAiD4B,KAAjD,EAAwDG,WAAxD,CAAV;AACAU,QAAAA,OAAO,IAAIlE,OAAO,CAACV,YAAR,CAAqBoC,SAArB,EAAgCiC,WAAW,CAACrvB,GAA5C,EAAiDovB,aAAa,CAACpvB,GAA/D,CAAX;AACAqvB,QAAAA,WAAW,GAAGP,KAAK,CAAC,EAAEK,SAAH,CAAnB;AACAI,QAAAA,aAAa,GAAGR,KAAK,CAAC,EAAEG,WAAH,CAArB;AACD,OALM,MAKA;AACL,YAAIl+B,OAAO,CAACy+B,WAAD,CAAX,EAA0B;AAAEA,UAAAA,WAAW,GAAGrD,iBAAiB,CAAC0C,KAAD,EAAQG,WAAR,EAAqBE,SAArB,CAA/B;AAAiE;;AAC7FO,QAAAA,QAAQ,GAAGv+B,KAAK,CAACo+B,aAAa,CAACh7B,GAAf,CAAL,GACPk7B,WAAW,CAACF,aAAa,CAACh7B,GAAf,CADJ,GAEPu7B,YAAY,CAACP,aAAD,EAAgBT,KAAhB,EAAuBG,WAAvB,EAAoCE,SAApC,CAFhB;;AAGA,YAAIn+B,OAAO,CAAC0+B,QAAD,CAAX,EAAuB;AAAE;AACvBxC,UAAAA,SAAS,CAACqC,aAAD,EAAgBpC,kBAAhB,EAAoCC,SAApC,EAA+CgC,aAAa,CAACpvB,GAA7D,EAAkE,KAAlE,EAAyE+uB,KAAzE,EAAgFG,WAAhF,CAAT;AACD,SAFD,MAEO;AACLS,UAAAA,WAAW,GAAGb,KAAK,CAACY,QAAD,CAAnB;;AACA,cAAI1D,SAAS,CAAC2D,WAAD,EAAcJ,aAAd,CAAb,EAA2C;AACzCM,YAAAA,UAAU,CAACF,WAAD,EAAcJ,aAAd,EAA6BpC,kBAA7B,EAAiD4B,KAAjD,EAAwDG,WAAxD,CAAV;AACAJ,YAAAA,KAAK,CAACY,QAAD,CAAL,GAAkBx+B,SAAlB;AACA0+B,YAAAA,OAAO,IAAIlE,OAAO,CAACV,YAAR,CAAqBoC,SAArB,EAAgCuC,WAAW,CAAC3vB,GAA5C,EAAiDovB,aAAa,CAACpvB,GAA/D,CAAX;AACD,WAJD,MAIO;AACL;AACAktB,YAAAA,SAAS,CAACqC,aAAD,EAAgBpC,kBAAhB,EAAoCC,SAApC,EAA+CgC,aAAa,CAACpvB,GAA7D,EAAkE,KAAlE,EAAyE+uB,KAAzE,EAAgFG,WAAhF,CAAT;AACD;AACF;;AACDK,QAAAA,aAAa,GAAGR,KAAK,CAAC,EAAEG,WAAH,CAArB;AACD;AACF;;AACD,QAAID,WAAW,GAAGE,SAAlB,EAA6B;AAC3B9B,MAAAA,MAAM,GAAGr8B,OAAO,CAAC+9B,KAAK,CAACO,SAAS,GAAG,CAAb,CAAN,CAAP,GAAgC,IAAhC,GAAuCP,KAAK,CAACO,SAAS,GAAG,CAAb,CAAL,CAAqBtvB,GAArE;AACAsuB,MAAAA,SAAS,CAAClB,SAAD,EAAYC,MAAZ,EAAoB0B,KAApB,EAA2BG,WAA3B,EAAwCI,SAAxC,EAAmDnC,kBAAnD,CAAT;AACD,KAHD,MAGO,IAAI+B,WAAW,GAAGI,SAAlB,EAA6B;AAClCb,MAAAA,YAAY,CAACK,KAAD,EAAQG,WAAR,EAAqBE,SAArB,CAAZ;AACD;AACF;;AAED,WAASf,kBAAT,CAA6BtuB,QAA7B,EAAuC;AACrC,QAAIiwB,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIr8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoM,QAAQ,CAACnM,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAI+N,KAAK,GAAG3B,QAAQ,CAACpM,CAAD,CAApB;AACA,UAAIa,GAAG,GAAGkN,KAAK,CAAClN,GAAhB;;AACA,UAAIpD,KAAK,CAACoD,GAAD,CAAT,EAAgB;AACd,YAAIw7B,QAAQ,CAACx7B,GAAD,CAAZ,EAAmB;AACjBqI,UAAAA,IAAI,CACD,+BAA+BrI,GAA/B,GAAqC,oCADpC,EAEFkN,KAAK,CAACxB,OAFJ,CAAJ;AAID,SALD,MAKO;AACL8vB,UAAAA,QAAQ,CAACx7B,GAAD,CAAR,GAAgB,IAAhB;AACD;AACF;AACF;AACF;;AAED,WAASu7B,YAAT,CAAuBxuB,IAAvB,EAA6BwtB,KAA7B,EAAoC34B,KAApC,EAA2C65B,GAA3C,EAAgD;AAC9C,SAAK,IAAIt8B,CAAC,GAAGyC,KAAb,EAAoBzC,CAAC,GAAGs8B,GAAxB,EAA6Bt8B,CAAC,EAA9B,EAAkC;AAChC,UAAIuB,CAAC,GAAG65B,KAAK,CAACp7B,CAAD,CAAb;;AACA,UAAIvC,KAAK,CAAC8D,CAAD,CAAL,IAAY+2B,SAAS,CAAC1qB,IAAD,EAAOrM,CAAP,CAAzB,EAAoC;AAAE,eAAOvB,CAAP;AAAU;AACjD;AACF;;AAED,WAASm8B,UAAT,CACEvY,QADF,EAEE7V,KAFF,EAGE0rB,kBAHF,EAIEI,UAJF,EAKEr5B,KALF,EAME86B,UANF,EAOE;AACA,QAAI1X,QAAQ,KAAK7V,KAAjB,EAAwB;AACtB;AACD;;AAED,QAAItQ,KAAK,CAACsQ,KAAK,CAACzB,GAAP,CAAL,IAAoB7O,KAAK,CAACo8B,UAAD,CAA7B,EAA2C;AACzC;AACA9rB,MAAAA,KAAK,GAAG8rB,UAAU,CAACr5B,KAAD,CAAV,GAAoBsN,UAAU,CAACC,KAAD,CAAtC;AACD;;AAED,QAAIzB,GAAG,GAAGyB,KAAK,CAACzB,GAAN,GAAYsX,QAAQ,CAACtX,GAA/B;;AAEA,QAAI5O,MAAM,CAACkmB,QAAQ,CAACrW,kBAAV,CAAV,EAAyC;AACvC,UAAI9P,KAAK,CAACsQ,KAAK,CAACtB,YAAN,CAAmBob,QAApB,CAAT,EAAwC;AACtC0U,QAAAA,OAAO,CAAC3Y,QAAQ,CAACtX,GAAV,EAAeyB,KAAf,EAAsB0rB,kBAAtB,CAAP;AACD,OAFD,MAEO;AACL1rB,QAAAA,KAAK,CAACR,kBAAN,GAA2B,IAA3B;AACD;;AACD;AACD,KAnBD,CAqBA;AACA;AACA;AACA;;;AACA,QAAI7P,MAAM,CAACqQ,KAAK,CAACd,QAAP,CAAN,IACFvP,MAAM,CAACkmB,QAAQ,CAAC3W,QAAV,CADJ,IAEFc,KAAK,CAAClN,GAAN,KAAc+iB,QAAQ,CAAC/iB,GAFrB,KAGDnD,MAAM,CAACqQ,KAAK,CAACX,QAAP,CAAN,IAA0B1P,MAAM,CAACqQ,KAAK,CAACV,MAAP,CAH/B,CAAJ,EAIE;AACAU,MAAAA,KAAK,CAACjB,iBAAN,GAA0B8W,QAAQ,CAAC9W,iBAAnC;AACA;AACD;;AAED,QAAI9M,CAAJ;AACA,QAAImM,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;;AACA,QAAI1O,KAAK,CAAC0O,IAAD,CAAL,IAAe1O,KAAK,CAACuC,CAAC,GAAGmM,IAAI,CAAC6F,IAAV,CAApB,IAAuCvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACwjB,QAAP,CAAhD,EAAkE;AAChExjB,MAAAA,CAAC,CAAC4jB,QAAD,EAAW7V,KAAX,CAAD;AACD;;AAED,QAAIqtB,KAAK,GAAGxX,QAAQ,CAACxX,QAArB;AACA,QAAI4uB,EAAE,GAAGjtB,KAAK,CAAC3B,QAAf;;AACA,QAAI3O,KAAK,CAAC0O,IAAD,CAAL,IAAekuB,WAAW,CAACtsB,KAAD,CAA9B,EAAuC;AACrC,WAAK/N,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6pB,GAAG,CAACje,MAAJ,CAAW3L,MAA3B,EAAmC,EAAED,CAArC,EAAwC;AAAE6pB,QAAAA,GAAG,CAACje,MAAJ,CAAW5L,CAAX,EAAc4jB,QAAd,EAAwB7V,KAAxB;AAAiC;;AAC3E,UAAItQ,KAAK,CAACuC,CAAC,GAAGmM,IAAI,CAAC6F,IAAV,CAAL,IAAwBvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAAC4L,MAAP,CAAjC,EAAiD;AAAE5L,QAAAA,CAAC,CAAC4jB,QAAD,EAAW7V,KAAX,CAAD;AAAqB;AACzE;;AACD,QAAIzQ,OAAO,CAACyQ,KAAK,CAAC1B,IAAP,CAAX,EAAyB;AACvB,UAAI5O,KAAK,CAAC29B,KAAD,CAAL,IAAgB39B,KAAK,CAACu9B,EAAD,CAAzB,EAA+B;AAC7B,YAAII,KAAK,KAAKJ,EAAd,EAAkB;AAAEG,UAAAA,cAAc,CAAC7uB,GAAD,EAAM8uB,KAAN,EAAaJ,EAAb,EAAiBvB,kBAAjB,EAAqC6B,UAArC,CAAd;AAAiE;AACtF,OAFD,MAEO,IAAI79B,KAAK,CAACu9B,EAAD,CAAT,EAAe;AACpB,YAAI,kBAAyB,YAA7B,EAA2C;AACzCN,UAAAA,kBAAkB,CAACM,EAAD,CAAlB;AACD;;AACD,YAAIv9B,KAAK,CAACmmB,QAAQ,CAACvX,IAAV,CAAT,EAA0B;AAAE2rB,UAAAA,OAAO,CAACJ,cAAR,CAAuBtrB,GAAvB,EAA4B,EAA5B;AAAkC;;AAC9DsuB,QAAAA,SAAS,CAACtuB,GAAD,EAAM,IAAN,EAAY0uB,EAAZ,EAAgB,CAAhB,EAAmBA,EAAE,CAAC/6B,MAAH,GAAY,CAA/B,EAAkCw5B,kBAAlC,CAAT;AACD,OANM,MAMA,IAAIh8B,KAAK,CAAC29B,KAAD,CAAT,EAAkB;AACvBL,QAAAA,YAAY,CAACK,KAAD,EAAQ,CAAR,EAAWA,KAAK,CAACn7B,MAAN,GAAe,CAA1B,CAAZ;AACD,OAFM,MAEA,IAAIxC,KAAK,CAACmmB,QAAQ,CAACvX,IAAV,CAAT,EAA0B;AAC/B2rB,QAAAA,OAAO,CAACJ,cAAR,CAAuBtrB,GAAvB,EAA4B,EAA5B;AACD;AACF,KAdD,MAcO,IAAIsX,QAAQ,CAACvX,IAAT,KAAkB0B,KAAK,CAAC1B,IAA5B,EAAkC;AACvC2rB,MAAAA,OAAO,CAACJ,cAAR,CAAuBtrB,GAAvB,EAA4ByB,KAAK,CAAC1B,IAAlC;AACD;;AACD,QAAI5O,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AACf,UAAI1O,KAAK,CAACuC,CAAC,GAAGmM,IAAI,CAAC6F,IAAV,CAAL,IAAwBvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACw8B,SAAP,CAAjC,EAAoD;AAAEx8B,QAAAA,CAAC,CAAC4jB,QAAD,EAAW7V,KAAX,CAAD;AAAqB;AAC5E;AACF;;AAED,WAAS0uB,gBAAT,CAA2B1uB,KAA3B,EAAkCye,KAAlC,EAAyCkQ,OAAzC,EAAkD;AAChD;AACA;AACA,QAAIh/B,MAAM,CAACg/B,OAAD,CAAN,IAAmBj/B,KAAK,CAACsQ,KAAK,CAAChB,MAAP,CAA5B,EAA4C;AAC1CgB,MAAAA,KAAK,CAAChB,MAAN,CAAaZ,IAAb,CAAkBiuB,aAAlB,GAAkC5N,KAAlC;AACD,KAFD,MAEO;AACL,WAAK,IAAIxsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwsB,KAAK,CAACvsB,MAA1B,EAAkC,EAAED,CAApC,EAAuC;AACrCwsB,QAAAA,KAAK,CAACxsB,CAAD,CAAL,CAASmM,IAAT,CAAc6F,IAAd,CAAmB8R,MAAnB,CAA0B0I,KAAK,CAACxsB,CAAD,CAA/B;AACD;AACF;AACF;;AAED,MAAI28B,eAAe,GAAG,KAAtB,CArfqC,CAsfrC;AACA;AACA;AACA;;AACA,MAAIC,gBAAgB,GAAGn9B,OAAO,CAAC,yCAAD,CAA9B,CA1fqC,CA4frC;;AACA,WAAS88B,OAAT,CAAkBjwB,GAAlB,EAAuByB,KAAvB,EAA8B0rB,kBAA9B,EAAkDJ,MAAlD,EAA0D;AACxD,QAAIr5B,CAAJ;AACA,QAAIkM,GAAG,GAAG6B,KAAK,CAAC7B,GAAhB;AACA,QAAIC,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;AACA,QAAIC,QAAQ,GAAG2B,KAAK,CAAC3B,QAArB;AACAitB,IAAAA,MAAM,GAAGA,MAAM,IAAKltB,IAAI,IAAIA,IAAI,CAAC+Z,GAAjC;AACAnY,IAAAA,KAAK,CAACzB,GAAN,GAAYA,GAAZ;;AAEA,QAAI5O,MAAM,CAACqQ,KAAK,CAACZ,SAAP,CAAN,IAA2B1P,KAAK,CAACsQ,KAAK,CAACtB,YAAP,CAApC,EAA0D;AACxDsB,MAAAA,KAAK,CAACR,kBAAN,GAA2B,IAA3B;AACA,aAAO,IAAP;AACD,KAXuD,CAYxD;;;AACA,QAAI,kBAAyB,YAA7B,EAA2C;AACzC,UAAI,CAACsvB,eAAe,CAACvwB,GAAD,EAAMyB,KAAN,EAAasrB,MAAb,CAApB,EAA0C;AACxC,eAAO,KAAP;AACD;AACF;;AACD,QAAI57B,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AACf,UAAI1O,KAAK,CAACuC,CAAC,GAAGmM,IAAI,CAAC6F,IAAV,CAAL,IAAwBvU,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACmjB,IAAP,CAAjC,EAA+C;AAAEnjB,QAAAA,CAAC,CAAC+N,KAAD,EAAQ;AAAK;AAAb,SAAD;AAAiC;;AAClF,UAAItQ,KAAK,CAACuC,CAAC,GAAG+N,KAAK,CAACjB,iBAAX,CAAT,EAAwC;AACtC;AACAotB,QAAAA,aAAa,CAACnsB,KAAD,EAAQ0rB,kBAAR,CAAb;AACA,eAAO,IAAP;AACD;AACF;;AACD,QAAIh8B,KAAK,CAACyO,GAAD,CAAT,EAAgB;AACd,UAAIzO,KAAK,CAAC2O,QAAD,CAAT,EAAqB;AACnB;AACA,YAAI,CAACE,GAAG,CAACwwB,aAAJ,EAAL,EAA0B;AACxB/C,UAAAA,cAAc,CAAChsB,KAAD,EAAQ3B,QAAR,EAAkBqtB,kBAAlB,CAAd;AACD,SAFD,MAEO;AACL;AACA,cAAIh8B,KAAK,CAACuC,CAAC,GAAGmM,IAAL,CAAL,IAAmB1O,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAACqf,QAAP,CAAxB,IAA4C5hB,KAAK,CAACuC,CAAC,GAAGA,CAAC,CAAC+8B,SAAP,CAArD,EAAwE;AACtE,gBAAI/8B,CAAC,KAAKsM,GAAG,CAACywB,SAAd,EAAyB;AACvB;AACA,kBAAI,kBAAyB,YAAzB,IACF,OAAOxzB,OAAP,KAAmB,WADjB,IAEF,CAACozB,eAFH,EAGE;AACAA,gBAAAA,eAAe,GAAG,IAAlB;AACApzB,gBAAAA,OAAO,CAACL,IAAR,CAAa,UAAb,EAAyBoD,GAAzB;AACA/C,gBAAAA,OAAO,CAACL,IAAR,CAAa,oBAAb,EAAmClJ,CAAnC;AACAuJ,gBAAAA,OAAO,CAACL,IAAR,CAAa,oBAAb,EAAmCoD,GAAG,CAACywB,SAAvC;AACD;;AACD,qBAAO,KAAP;AACD;AACF,WAdD,MAcO;AACL;AACA,gBAAIC,aAAa,GAAG,IAApB;AACA,gBAAItH,SAAS,GAAGppB,GAAG,CAAC2wB,UAApB;;AACA,iBAAK,IAAIrT,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGxd,QAAQ,CAACnM,MAAjC,EAAyC2pB,GAAG,EAA5C,EAAgD;AAC9C,kBAAI,CAAC8L,SAAD,IAAc,CAAC6G,OAAO,CAAC7G,SAAD,EAAYtpB,QAAQ,CAACwd,GAAD,CAApB,EAA2B6P,kBAA3B,EAA+CJ,MAA/C,CAA1B,EAAkF;AAChF2D,gBAAAA,aAAa,GAAG,KAAhB;AACA;AACD;;AACDtH,cAAAA,SAAS,GAAGA,SAAS,CAACiC,WAAtB;AACD,aAVI,CAWL;AACA;;;AACA,gBAAI,CAACqF,aAAD,IAAkBtH,SAAtB,EAAiC;AAC/B;AACA,kBAAI,kBAAyB,YAAzB,IACF,OAAOnsB,OAAP,KAAmB,WADjB,IAEF,CAACozB,eAFH,EAGE;AACAA,gBAAAA,eAAe,GAAG,IAAlB;AACApzB,gBAAAA,OAAO,CAACL,IAAR,CAAa,UAAb,EAAyBoD,GAAzB;AACA/C,gBAAAA,OAAO,CAACL,IAAR,CAAa,qCAAb,EAAoDoD,GAAG,CAAC4wB,UAAxD,EAAoE9wB,QAApE;AACD;;AACD,qBAAO,KAAP;AACD;AACF;AACF;AACF;;AACD,UAAI3O,KAAK,CAAC0O,IAAD,CAAT,EAAiB;AACf,YAAIgxB,UAAU,GAAG,KAAjB;;AACA,aAAK,IAAIt8B,GAAT,IAAgBsL,IAAhB,EAAsB;AACpB,cAAI,CAACywB,gBAAgB,CAAC/7B,GAAD,CAArB,EAA4B;AAC1Bs8B,YAAAA,UAAU,GAAG,IAAb;AACAnD,YAAAA,iBAAiB,CAACjsB,KAAD,EAAQ0rB,kBAAR,CAAjB;AACA;AACD;AACF;;AACD,YAAI,CAAC0D,UAAD,IAAehxB,IAAI,CAAC,OAAD,CAAvB,EAAkC;AAChC;AACAgN,UAAAA,QAAQ,CAAChN,IAAI,CAAC,OAAD,CAAL,CAAR;AACD;AACF;AACF,KA/DD,MA+DO,IAAIG,GAAG,CAACH,IAAJ,KAAa4B,KAAK,CAAC1B,IAAvB,EAA6B;AAClCC,MAAAA,GAAG,CAACH,IAAJ,GAAW4B,KAAK,CAAC1B,IAAjB;AACD;;AACD,WAAO,IAAP;AACD;;AAED,WAASwwB,eAAT,CAA0BjvB,IAA1B,EAAgCG,KAAhC,EAAuCsrB,MAAvC,EAA+C;AAC7C,QAAI57B,KAAK,CAACsQ,KAAK,CAAC7B,GAAP,CAAT,EAAsB;AACpB,aAAO6B,KAAK,CAAC7B,GAAN,CAAUzL,OAAV,CAAkB,eAAlB,MAAuC,CAAvC,IACL,CAAC24B,mBAAmB,CAACrrB,KAAD,EAAQsrB,MAAR,CAApB,IACAtrB,KAAK,CAAC7B,GAAN,CAAUhM,WAAV,QAA6B0N,IAAI,CAACopB,OAAL,IAAgBppB,IAAI,CAACopB,OAAL,CAAa92B,WAAb,EAA7C,CAFF;AAID,KALD,MAKO;AACL,aAAO0N,IAAI,CAACwvB,QAAL,MAAmBrvB,KAAK,CAACZ,SAAN,GAAkB,CAAlB,GAAsB,CAAzC,CAAP;AACD;AACF;;AAED,SAAO,SAASkwB,KAAT,CAAgBzZ,QAAhB,EAA0B7V,KAA1B,EAAiCqV,SAAjC,EAA4CkY,UAA5C,EAAwD;AAC7D,QAAIh+B,OAAO,CAACyQ,KAAD,CAAX,EAAoB;AAClB,UAAItQ,KAAK,CAACmmB,QAAD,CAAT,EAAqB;AAAEkX,QAAAA,iBAAiB,CAAClX,QAAD,CAAjB;AAA8B;;AACrD;AACD;;AAED,QAAI0Z,cAAc,GAAG,KAArB;AACA,QAAI7D,kBAAkB,GAAG,EAAzB;;AAEA,QAAIn8B,OAAO,CAACsmB,QAAD,CAAX,EAAuB;AACrB;AACA0Z,MAAAA,cAAc,GAAG,IAAjB;AACA9D,MAAAA,SAAS,CAACzrB,KAAD,EAAQ0rB,kBAAR,CAAT;AACD,KAJD,MAIO;AACL,UAAI8D,aAAa,GAAG9/B,KAAK,CAACmmB,QAAQ,CAACwZ,QAAV,CAAzB;;AACA,UAAI,CAACG,aAAD,IAAkBjF,SAAS,CAAC1U,QAAD,EAAW7V,KAAX,CAA/B,EAAkD;AAChD;AACAouB,QAAAA,UAAU,CAACvY,QAAD,EAAW7V,KAAX,EAAkB0rB,kBAAlB,EAAsC,IAAtC,EAA4C,IAA5C,EAAkD6B,UAAlD,CAAV;AACD,OAHD,MAGO;AACL,YAAIiC,aAAJ,EAAmB;AACjB;AACA;AACA;AACA,cAAI3Z,QAAQ,CAACwZ,QAAT,KAAsB,CAAtB,IAA2BxZ,QAAQ,CAAC4Z,YAAT,CAAsBr5B,QAAtB,CAA/B,EAAgE;AAC9Dyf,YAAAA,QAAQ,CAAC6Z,eAAT,CAAyBt5B,QAAzB;AACAif,YAAAA,SAAS,GAAG,IAAZ;AACD;;AACD,cAAI1lB,MAAM,CAAC0lB,SAAD,CAAV,EAAuB;AACrB,gBAAImZ,OAAO,CAAC3Y,QAAD,EAAW7V,KAAX,EAAkB0rB,kBAAlB,CAAX,EAAkD;AAChDgD,cAAAA,gBAAgB,CAAC1uB,KAAD,EAAQ0rB,kBAAR,EAA4B,IAA5B,CAAhB;AACA,qBAAO7V,QAAP;AACD,aAHD,MAGO,IAAI,kBAAyB,YAA7B,EAA2C;AAChD1a,cAAAA,IAAI,CACF,+DACA,8DADA,GAEA,+DAFA,GAGA,4DAHA,GAIA,0BALE,CAAJ;AAOD;AACF,WArBgB,CAsBjB;AACA;;;AACA0a,UAAAA,QAAQ,GAAGoV,WAAW,CAACpV,QAAD,CAAtB;AACD,SA1BI,CA4BL;;;AACA,YAAI8Z,MAAM,GAAG9Z,QAAQ,CAACtX,GAAtB;AACA,YAAIotB,SAAS,GAAG1B,OAAO,CAACvC,UAAR,CAAmBiI,MAAnB,CAAhB,CA9BK,CAgCL;;AACAlE,QAAAA,SAAS,CACPzrB,KADO,EAEP0rB,kBAFO,EAGP;AACA;AACA;AACAiE,QAAAA,MAAM,CAACC,QAAP,GAAkB,IAAlB,GAAyBjE,SANlB,EAOP1B,OAAO,CAACL,WAAR,CAAoB+F,MAApB,CAPO,CAAT,CAjCK,CA2CL;;AACA,YAAIjgC,KAAK,CAACsQ,KAAK,CAAChB,MAAP,CAAT,EAAyB;AACvB,cAAI4tB,QAAQ,GAAG5sB,KAAK,CAAChB,MAArB;AACA,cAAI6wB,SAAS,GAAGvD,WAAW,CAACtsB,KAAD,CAA3B;;AACA,iBAAO4sB,QAAP,EAAiB;AACf,iBAAK,IAAI36B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6pB,GAAG,CAAC1F,OAAJ,CAAYlkB,MAAhC,EAAwC,EAAED,CAA1C,EAA6C;AAC3C6pB,cAAAA,GAAG,CAAC1F,OAAJ,CAAYnkB,CAAZ,EAAe26B,QAAf;AACD;;AACDA,YAAAA,QAAQ,CAACruB,GAAT,GAAeyB,KAAK,CAACzB,GAArB;;AACA,gBAAIsxB,SAAJ,EAAe;AACb,mBAAK,IAAIhU,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGC,GAAG,CAAChqB,MAAJ,CAAWI,MAAnC,EAA2C,EAAE2pB,GAA7C,EAAkD;AAChDC,gBAAAA,GAAG,CAAChqB,MAAJ,CAAW+pB,GAAX,EAAgByO,SAAhB,EAA2BsC,QAA3B;AACD,eAHY,CAIb;AACA;AACA;;;AACA,kBAAI7W,MAAM,GAAG6W,QAAQ,CAACxuB,IAAT,CAAc6F,IAAd,CAAmB8R,MAAhC;;AACA,kBAAIA,MAAM,CAAC3I,MAAX,EAAmB;AACjB;AACA,qBAAK,IAAI0iB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG/Z,MAAM,CAAC1J,GAAP,CAAWna,MAAnC,EAA2C49B,GAAG,EAA9C,EAAkD;AAChD/Z,kBAAAA,MAAM,CAAC1J,GAAP,CAAWyjB,GAAX;AACD;AACF;AACF,aAdD,MAcO;AACL5F,cAAAA,WAAW,CAAC0C,QAAD,CAAX;AACD;;AACDA,YAAAA,QAAQ,GAAGA,QAAQ,CAAC5tB,MAApB;AACD;AACF,SAvEI,CAyEL;;;AACA,YAAItP,KAAK,CAACi8B,SAAD,CAAT,EAAsB;AACpBqB,UAAAA,YAAY,CAAC,CAACnX,QAAD,CAAD,EAAa,CAAb,EAAgB,CAAhB,CAAZ;AACD,SAFD,MAEO,IAAInmB,KAAK,CAACmmB,QAAQ,CAAC1X,GAAV,CAAT,EAAyB;AAC9B4uB,UAAAA,iBAAiB,CAAClX,QAAD,CAAjB;AACD;AACF;AACF;;AAED6Y,IAAAA,gBAAgB,CAAC1uB,KAAD,EAAQ0rB,kBAAR,EAA4B6D,cAA5B,CAAhB;AACA,WAAOvvB,KAAK,CAACzB,GAAb;AACD,GAtGD;AAuGD;AAED;;;AAEA,IAAI4G,UAAU,GAAG;AACfrT,EAAAA,MAAM,EAAEi+B,gBADO;AAEflyB,EAAAA,MAAM,EAAEkyB,gBAFO;AAGf3Z,EAAAA,OAAO,EAAE,SAAS4Z,gBAAT,CAA2BhwB,KAA3B,EAAkC;AACzC+vB,IAAAA,gBAAgB,CAAC/vB,KAAD,EAAQsqB,SAAR,CAAhB;AACD;AALc,CAAjB;;AAQA,SAASyF,gBAAT,CAA2Bla,QAA3B,EAAqC7V,KAArC,EAA4C;AAC1C,MAAI6V,QAAQ,CAACzX,IAAT,CAAc+G,UAAd,IAA4BnF,KAAK,CAAC5B,IAAN,CAAW+G,UAA3C,EAAuD;AACrDwX,IAAAA,OAAO,CAAC9G,QAAD,EAAW7V,KAAX,CAAP;AACD;AACF;;AAED,SAAS2c,OAAT,CAAkB9G,QAAlB,EAA4B7V,KAA5B,EAAmC;AACjC,MAAIiwB,QAAQ,GAAGpa,QAAQ,KAAKyU,SAA5B;AACA,MAAI4F,SAAS,GAAGlwB,KAAK,KAAKsqB,SAA1B;AACA,MAAI6F,OAAO,GAAGC,qBAAqB,CAACva,QAAQ,CAACzX,IAAT,CAAc+G,UAAf,EAA2B0Q,QAAQ,CAACrX,OAApC,CAAnC;AACA,MAAI6xB,OAAO,GAAGD,qBAAqB,CAACpwB,KAAK,CAAC5B,IAAN,CAAW+G,UAAZ,EAAwBnF,KAAK,CAACxB,OAA9B,CAAnC;AAEA,MAAI8xB,cAAc,GAAG,EAArB;AACA,MAAIC,iBAAiB,GAAG,EAAxB;AAEA,MAAIz9B,GAAJ,EAAS09B,MAAT,EAAiBC,GAAjB;;AACA,OAAK39B,GAAL,IAAYu9B,OAAZ,EAAqB;AACnBG,IAAAA,MAAM,GAAGL,OAAO,CAACr9B,GAAD,CAAhB;AACA29B,IAAAA,GAAG,GAAGJ,OAAO,CAACv9B,GAAD,CAAb;;AACA,QAAI,CAAC09B,MAAL,EAAa;AACX;AACAE,MAAAA,UAAU,CAACD,GAAD,EAAM,MAAN,EAAczwB,KAAd,EAAqB6V,QAArB,CAAV;;AACA,UAAI4a,GAAG,CAAC74B,GAAJ,IAAW64B,GAAG,CAAC74B,GAAJ,CAAQkJ,QAAvB,EAAiC;AAC/BwvB,QAAAA,cAAc,CAACvzB,IAAf,CAAoB0zB,GAApB;AACD;AACF,KAND,MAMO;AACL;AACAA,MAAAA,GAAG,CAAC7P,QAAJ,GAAe4P,MAAM,CAAC1gC,KAAtB;AACA2gC,MAAAA,GAAG,CAACE,MAAJ,GAAaH,MAAM,CAACI,GAApB;AACAF,MAAAA,UAAU,CAACD,GAAD,EAAM,QAAN,EAAgBzwB,KAAhB,EAAuB6V,QAAvB,CAAV;;AACA,UAAI4a,GAAG,CAAC74B,GAAJ,IAAW64B,GAAG,CAAC74B,GAAJ,CAAQi5B,gBAAvB,EAAyC;AACvCN,QAAAA,iBAAiB,CAACxzB,IAAlB,CAAuB0zB,GAAvB;AACD;AACF;AACF;;AAED,MAAIH,cAAc,CAACp+B,MAAnB,EAA2B;AACzB,QAAI4+B,UAAU,GAAG,YAAY;AAC3B,WAAK,IAAI7+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq+B,cAAc,CAACp+B,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC9Cy+B,QAAAA,UAAU,CAACJ,cAAc,CAACr+B,CAAD,CAAf,EAAoB,UAApB,EAAgC+N,KAAhC,EAAuC6V,QAAvC,CAAV;AACD;AACF,KAJD;;AAKA,QAAIoa,QAAJ,EAAc;AACZjjB,MAAAA,cAAc,CAAChN,KAAD,EAAQ,QAAR,EAAkB8wB,UAAlB,CAAd;AACD,KAFD,MAEO;AACLA,MAAAA,UAAU;AACX;AACF;;AAED,MAAIP,iBAAiB,CAACr+B,MAAtB,EAA8B;AAC5B8a,IAAAA,cAAc,CAAChN,KAAD,EAAQ,WAAR,EAAqB,YAAY;AAC7C,WAAK,IAAI/N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs+B,iBAAiB,CAACr+B,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjDy+B,QAAAA,UAAU,CAACH,iBAAiB,CAACt+B,CAAD,CAAlB,EAAuB,kBAAvB,EAA2C+N,KAA3C,EAAkD6V,QAAlD,CAAV;AACD;AACF,KAJa,CAAd;AAKD;;AAED,MAAI,CAACoa,QAAL,EAAe;AACb,SAAKn9B,GAAL,IAAYq9B,OAAZ,EAAqB;AACnB,UAAI,CAACE,OAAO,CAACv9B,GAAD,CAAZ,EAAmB;AACjB;AACA49B,QAAAA,UAAU,CAACP,OAAO,CAACr9B,GAAD,CAAR,EAAe,QAAf,EAAyB+iB,QAAzB,EAAmCA,QAAnC,EAA6Cqa,SAA7C,CAAV;AACD;AACF;AACF;AACF;;AAED,IAAIa,cAAc,GAAG1hC,MAAM,CAACyC,MAAP,CAAc,IAAd,CAArB;;AAEA,SAASs+B,qBAAT,CACElrB,IADF,EAEEtJ,EAFF,EAGE;AACA,MAAI5G,GAAG,GAAG3F,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAV;;AACA,MAAI,CAACoT,IAAL,EAAW;AACT;AACA,WAAOlQ,GAAP;AACD;;AACD,MAAI/C,CAAJ,EAAOw+B,GAAP;;AACA,OAAKx+B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiT,IAAI,CAAChT,MAArB,EAA6BD,CAAC,EAA9B,EAAkC;AAChCw+B,IAAAA,GAAG,GAAGvrB,IAAI,CAACjT,CAAD,CAAV;;AACA,QAAI,CAACw+B,GAAG,CAACO,SAAT,EAAoB;AAClB;AACAP,MAAAA,GAAG,CAACO,SAAJ,GAAgBD,cAAhB;AACD;;AACD/7B,IAAAA,GAAG,CAACi8B,aAAa,CAACR,GAAD,CAAd,CAAH,GAA0BA,GAA1B;AACAA,IAAAA,GAAG,CAAC74B,GAAJ,GAAU+N,YAAY,CAAC/J,EAAE,CAACQ,QAAJ,EAAc,YAAd,EAA4Bq0B,GAAG,CAACn0B,IAAhC,EAAsC,IAAtC,CAAtB;AACD,GAfD,CAgBA;;;AACA,SAAOtH,GAAP;AACD;;AAED,SAASi8B,aAAT,CAAwBR,GAAxB,EAA6B;AAC3B,SAAOA,GAAG,CAACS,OAAJ,IAAiBT,GAAG,CAACn0B,IAAL,GAAa,GAAb,GAAoBjN,MAAM,CAAC0G,IAAP,CAAY06B,GAAG,CAACO,SAAJ,IAAiB,EAA7B,EAAiCh0B,IAAjC,CAAsC,GAAtC,CAA3C;AACD;;AAED,SAAS0zB,UAAT,CAAqBD,GAArB,EAA0BxsB,IAA1B,EAAgCjE,KAAhC,EAAuC6V,QAAvC,EAAiDqa,SAAjD,EAA4D;AAC1D,MAAIl9B,EAAE,GAAGy9B,GAAG,CAAC74B,GAAJ,IAAW64B,GAAG,CAAC74B,GAAJ,CAAQqM,IAAR,CAApB;;AACA,MAAIjR,EAAJ,EAAQ;AACN,QAAI;AACFA,MAAAA,EAAE,CAACgN,KAAK,CAACzB,GAAP,EAAYkyB,GAAZ,EAAiBzwB,KAAjB,EAAwB6V,QAAxB,EAAkCqa,SAAlC,CAAF;AACD,KAFD,CAEE,OAAOv6B,CAAP,EAAU;AACVyS,MAAAA,WAAW,CAACzS,CAAD,EAAIqK,KAAK,CAACxB,OAAV,EAAoB,eAAgBiyB,GAAG,CAACn0B,IAApB,GAA4B,GAA5B,GAAkC2H,IAAlC,GAAyC,OAA7D,CAAX;AACD;AACF;AACF;;AAED,IAAIktB,WAAW,GAAG,CAChB9X,GADgB,EAEhBlU,UAFgB,CAAlB;AAKA;;AAEA,SAASisB,WAAT,CAAsBvb,QAAtB,EAAgC7V,KAAhC,EAAuC;AACrC,MAAIlG,IAAI,GAAGkG,KAAK,CAACvB,gBAAjB;;AACA,MAAI/O,KAAK,CAACoK,IAAD,CAAL,IAAeA,IAAI,CAACU,IAAL,CAAUyB,OAAV,CAAkBo1B,YAAlB,KAAmC,KAAtD,EAA6D;AAC3D;AACD;;AACD,MAAI9hC,OAAO,CAACsmB,QAAQ,CAACzX,IAAT,CAAckP,KAAf,CAAP,IAAgC/d,OAAO,CAACyQ,KAAK,CAAC5B,IAAN,CAAWkP,KAAZ,CAA3C,EAA+D;AAC7D;AACD;;AACD,MAAIxa,GAAJ,EAASyV,GAAT,EAAcsE,GAAd;AACA,MAAItO,GAAG,GAAGyB,KAAK,CAACzB,GAAhB;AACA,MAAI+yB,QAAQ,GAAGzb,QAAQ,CAACzX,IAAT,CAAckP,KAAd,IAAuB,EAAtC;AACA,MAAIA,KAAK,GAAGtN,KAAK,CAAC5B,IAAN,CAAWkP,KAAX,IAAoB,EAAhC,CAXqC,CAYrC;;AACA,MAAI5d,KAAK,CAAC4d,KAAK,CAACzM,MAAP,CAAT,EAAyB;AACvByM,IAAAA,KAAK,GAAGtN,KAAK,CAAC5B,IAAN,CAAWkP,KAAX,GAAmB1Y,MAAM,CAAC,EAAD,EAAK0Y,KAAL,CAAjC;AACD;;AAED,OAAKxa,GAAL,IAAYwa,KAAZ,EAAmB;AACjB/E,IAAAA,GAAG,GAAG+E,KAAK,CAACxa,GAAD,CAAX;AACA+Z,IAAAA,GAAG,GAAGykB,QAAQ,CAACx+B,GAAD,CAAd;;AACA,QAAI+Z,GAAG,KAAKtE,GAAZ,EAAiB;AACfgpB,MAAAA,OAAO,CAAChzB,GAAD,EAAMzL,GAAN,EAAWyV,GAAX,CAAP;AACD;AACF,GAvBoC,CAwBrC;AACA;;AACA;;;AACA,MAAI,CAACrP,IAAI,IAAIE,MAAT,KAAoBkU,KAAK,CAACxd,KAAN,KAAgBwhC,QAAQ,CAACxhC,KAAjD,EAAwD;AACtDyhC,IAAAA,OAAO,CAAChzB,GAAD,EAAM,OAAN,EAAe+O,KAAK,CAACxd,KAArB,CAAP;AACD;;AACD,OAAKgD,GAAL,IAAYw+B,QAAZ,EAAsB;AACpB,QAAI/hC,OAAO,CAAC+d,KAAK,CAACxa,GAAD,CAAN,CAAX,EAAyB;AACvB,UAAIy0B,OAAO,CAACz0B,GAAD,CAAX,EAAkB;AAChByL,QAAAA,GAAG,CAACizB,iBAAJ,CAAsBlK,OAAtB,EAA+BE,YAAY,CAAC10B,GAAD,CAA3C;AACD,OAFD,MAEO,IAAI,CAACm0B,gBAAgB,CAACn0B,GAAD,CAArB,EAA4B;AACjCyL,QAAAA,GAAG,CAACmxB,eAAJ,CAAoB58B,GAApB;AACD;AACF;AACF;AACF;;AAED,SAASy+B,OAAT,CAAkBxuB,EAAlB,EAAsBjQ,GAAtB,EAA2BhD,KAA3B,EAAkC;AAChC,MAAIiT,EAAE,CAACkmB,OAAH,CAAWv2B,OAAX,CAAmB,GAAnB,IAA0B,CAAC,CAA/B,EAAkC;AAChC++B,IAAAA,WAAW,CAAC1uB,EAAD,EAAKjQ,GAAL,EAAUhD,KAAV,CAAX;AACD,GAFD,MAEO,IAAIu3B,aAAa,CAACv0B,GAAD,CAAjB,EAAwB;AAC7B;AACA;AACA,QAAIs0B,gBAAgB,CAACt3B,KAAD,CAApB,EAA6B;AAC3BiT,MAAAA,EAAE,CAAC2sB,eAAH,CAAmB58B,GAAnB;AACD,KAFD,MAEO;AACL;AACA;AACAhD,MAAAA,KAAK,GAAGgD,GAAG,KAAK,iBAAR,IAA6BiQ,EAAE,CAACkmB,OAAH,KAAe,OAA5C,GACJ,MADI,GAEJn2B,GAFJ;AAGAiQ,MAAAA,EAAE,CAAComB,YAAH,CAAgBr2B,GAAhB,EAAqBhD,KAArB;AACD;AACF,GAbM,MAaA,IAAIm3B,gBAAgB,CAACn0B,GAAD,CAApB,EAA2B;AAChCiQ,IAAAA,EAAE,CAAComB,YAAH,CAAgBr2B,GAAhB,EAAqBq0B,sBAAsB,CAACr0B,GAAD,EAAMhD,KAAN,CAA3C;AACD,GAFM,MAEA,IAAIy3B,OAAO,CAACz0B,GAAD,CAAX,EAAkB;AACvB,QAAIs0B,gBAAgB,CAACt3B,KAAD,CAApB,EAA6B;AAC3BiT,MAAAA,EAAE,CAACyuB,iBAAH,CAAqBlK,OAArB,EAA8BE,YAAY,CAAC10B,GAAD,CAA1C;AACD,KAFD,MAEO;AACLiQ,MAAAA,EAAE,CAAC2uB,cAAH,CAAkBpK,OAAlB,EAA2Bx0B,GAA3B,EAAgChD,KAAhC;AACD;AACF,GANM,MAMA;AACL2hC,IAAAA,WAAW,CAAC1uB,EAAD,EAAKjQ,GAAL,EAAUhD,KAAV,CAAX;AACD;AACF;;AAED,SAAS2hC,WAAT,CAAsB1uB,EAAtB,EAA0BjQ,GAA1B,EAA+BhD,KAA/B,EAAsC;AACpC,MAAIs3B,gBAAgB,CAACt3B,KAAD,CAApB,EAA6B;AAC3BiT,IAAAA,EAAE,CAAC2sB,eAAH,CAAmB58B,GAAnB;AACD,GAFD,MAEO;AACL;AACA;AACA;;AACA;AACA,QACEoG,IAAI,IAAI,CAACC,KAAT,IACA4J,EAAE,CAACkmB,OAAH,KAAe,UADf,IAEAn2B,GAAG,KAAK,aAFR,IAEyBhD,KAAK,KAAK,EAFnC,IAEyC,CAACiT,EAAE,CAAC4uB,MAH/C,EAIE;AACA,UAAIC,OAAO,GAAG,UAAUj8B,CAAV,EAAa;AACzBA,QAAAA,CAAC,CAACk8B,wBAAF;AACA9uB,QAAAA,EAAE,CAAC+uB,mBAAH,CAAuB,OAAvB,EAAgCF,OAAhC;AACD,OAHD;;AAIA7uB,MAAAA,EAAE,CAAC/I,gBAAH,CAAoB,OAApB,EAA6B43B,OAA7B,EALA,CAMA;;AACA7uB,MAAAA,EAAE,CAAC4uB,MAAH,GAAY,IAAZ;AAAkB;AACnB;;AACD5uB,IAAAA,EAAE,CAAComB,YAAH,CAAgBr2B,GAAhB,EAAqBhD,KAArB;AACD;AACF;;AAED,IAAIwd,KAAK,GAAG;AACVxb,EAAAA,MAAM,EAAEs/B,WADE;AAEVvzB,EAAAA,MAAM,EAAEuzB;AAFE,CAAZ;AAKA;;AAEA,SAASW,WAAT,CAAsBlc,QAAtB,EAAgC7V,KAAhC,EAAuC;AACrC,MAAI+C,EAAE,GAAG/C,KAAK,CAACzB,GAAf;AACA,MAAIH,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;AACA,MAAI4zB,OAAO,GAAGnc,QAAQ,CAACzX,IAAvB;;AACA,MACE7O,OAAO,CAAC6O,IAAI,CAAC0pB,WAAN,CAAP,IACAv4B,OAAO,CAAC6O,IAAI,CAACoa,KAAN,CADP,KAEEjpB,OAAO,CAACyiC,OAAD,CAAP,IACEziC,OAAO,CAACyiC,OAAO,CAAClK,WAAT,CAAP,IACAv4B,OAAO,CAACyiC,OAAO,CAACxZ,KAAT,CAJX,CADF,EAQE;AACA;AACD;;AAED,MAAIyZ,GAAG,GAAGxK,gBAAgB,CAACznB,KAAD,CAA1B,CAhBqC,CAkBrC;;AACA,MAAIkyB,eAAe,GAAGnvB,EAAE,CAACovB,kBAAzB;;AACA,MAAIziC,KAAK,CAACwiC,eAAD,CAAT,EAA4B;AAC1BD,IAAAA,GAAG,GAAGnuB,MAAM,CAACmuB,GAAD,EAAMjK,cAAc,CAACkK,eAAD,CAApB,CAAZ;AACD,GAtBoC,CAwBrC;;;AACA,MAAID,GAAG,KAAKlvB,EAAE,CAACqvB,UAAf,EAA2B;AACzBrvB,IAAAA,EAAE,CAAComB,YAAH,CAAgB,OAAhB,EAAyB8I,GAAzB;AACAlvB,IAAAA,EAAE,CAACqvB,UAAH,GAAgBH,GAAhB;AACD;AACF;;AAED,IAAII,KAAK,GAAG;AACVvgC,EAAAA,MAAM,EAAEigC,WADE;AAEVl0B,EAAAA,MAAM,EAAEk0B;AAFE,CAAZ;AAKA;;AAEA;;AAEA;;AAEA;AAEA;AACA;;AACA,IAAIO,WAAW,GAAG,KAAlB;AACA,IAAIC,oBAAoB,GAAG,KAA3B;AAEA;AAEA;AACA;AACA;AACA;;AACA,SAASC,eAAT,CAA0B/lB,EAA1B,EAA8B;AAC5B;AACA,MAAI/c,KAAK,CAAC+c,EAAE,CAAC6lB,WAAD,CAAH,CAAT,EAA4B;AAC1B;AACA,QAAIxlB,KAAK,GAAG5T,IAAI,GAAG,QAAH,GAAc,OAA9B;AACAuT,IAAAA,EAAE,CAACK,KAAD,CAAF,GAAY,GAAGhJ,MAAH,CAAU2I,EAAE,CAAC6lB,WAAD,CAAZ,EAA2B7lB,EAAE,CAACK,KAAD,CAAF,IAAa,EAAxC,CAAZ;AACA,WAAOL,EAAE,CAAC6lB,WAAD,CAAT;AACD,GAP2B,CAQ5B;AACA;;AACA;;;AACA,MAAI5iC,KAAK,CAAC+c,EAAE,CAAC8lB,oBAAD,CAAH,CAAT,EAAqC;AACnC9lB,IAAAA,EAAE,CAACgmB,MAAH,GAAY,GAAG3uB,MAAH,CAAU2I,EAAE,CAAC8lB,oBAAD,CAAZ,EAAoC9lB,EAAE,CAACgmB,MAAH,IAAa,EAAjD,CAAZ;AACA,WAAOhmB,EAAE,CAAC8lB,oBAAD,CAAT;AACD;AACF;;AAED,IAAIG,QAAJ;;AAEA,SAASC,mBAAT,CAA8B7lB,KAA9B,EAAqClE,OAArC,EAA8CH,OAA9C,EAAuD;AACrD,MAAI8S,OAAO,GAAGmX,QAAd,CADqD,CAC7B;;AACxB,SAAO,SAASlX,WAAT,GAAwB;AAC7B,QAAIxmB,GAAG,GAAG4T,OAAO,CAACxU,KAAR,CAAc,IAAd,EAAoBD,SAApB,CAAV;;AACA,QAAIa,GAAG,KAAK,IAAZ,EAAkB;AAChB49B,MAAAA,QAAQ,CAAC9lB,KAAD,EAAQ0O,WAAR,EAAqB/S,OAArB,EAA8B8S,OAA9B,CAAR;AACD;AACF,GALD;AAMD,EAED;AACA;AACA;;;AACA,IAAIsX,eAAe,GAAG9pB,gBAAgB,IAAI,EAAEtP,IAAI,IAAIuO,MAAM,CAACvO,IAAI,CAAC,CAAD,CAAL,CAAN,IAAmB,EAA7B,CAA1C;;AAEA,SAASq5B,KAAT,CACEx2B,IADF,EAEEsM,OAFF,EAGEH,OAHF,EAIEyD,OAJF,EAKE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAI2mB,eAAJ,EAAqB;AACnB,QAAIE,iBAAiB,GAAGhU,qBAAxB;AACA,QAAIxe,QAAQ,GAAGqI,OAAf;;AACAA,IAAAA,OAAO,GAAGrI,QAAQ,CAACyyB,QAAT,GAAoB,UAAUr9B,CAAV,EAAa;AACzC,WACE;AACA;AACA;AACAA,MAAAA,CAAC,CAAC8H,MAAF,KAAa9H,CAAC,CAACs9B,aAAf,IACA;AACAt9B,MAAAA,CAAC,CAACwpB,SAAF,IAAe4T,iBAFf,IAGA;AACA;AACA;AACAp9B,MAAAA,CAAC,CAACwpB,SAAF,IAAe,CANf,IAOA;AACA;AACA;AACAxpB,MAAAA,CAAC,CAAC8H,MAAF,CAASy1B,aAAT,KAA2BrpB,QAd7B,EAeE;AACA,eAAOtJ,QAAQ,CAACnM,KAAT,CAAe,IAAf,EAAqBD,SAArB,CAAP;AACD;AACF,KAnBD;AAoBD;;AACDu+B,EAAAA,QAAQ,CAAC14B,gBAAT,CACEsC,IADF,EAEEsM,OAFF,EAGE/O,eAAe,GACX;AAAE4O,IAAAA,OAAO,EAAEA,OAAX;AAAoByD,IAAAA,OAAO,EAAEA;AAA7B,GADW,GAEXzD,OALN;AAOD;;AAED,SAASmqB,QAAT,CACEt2B,IADF,EAEEsM,OAFF,EAGEH,OAHF,EAIE8S,OAJF,EAKE;AACA,GAACA,OAAO,IAAImX,QAAZ,EAAsBZ,mBAAtB,CACEx1B,IADF,EAEEsM,OAAO,CAACoqB,QAAR,IAAoBpqB,OAFtB,EAGEH,OAHF;AAKD;;AAED,SAAS0qB,kBAAT,CAA6Btd,QAA7B,EAAuC7V,KAAvC,EAA8C;AAC5C,MAAIzQ,OAAO,CAACsmB,QAAQ,CAACzX,IAAT,CAAcqO,EAAf,CAAP,IAA6Bld,OAAO,CAACyQ,KAAK,CAAC5B,IAAN,CAAWqO,EAAZ,CAAxC,EAAyD;AACvD;AACD;;AACD,MAAIA,EAAE,GAAGzM,KAAK,CAAC5B,IAAN,CAAWqO,EAAX,IAAiB,EAA1B;AACA,MAAIC,KAAK,GAAGmJ,QAAQ,CAACzX,IAAT,CAAcqO,EAAd,IAAoB,EAAhC;AACAimB,EAAAA,QAAQ,GAAG1yB,KAAK,CAACzB,GAAjB;AACAi0B,EAAAA,eAAe,CAAC/lB,EAAD,CAAf;AACAD,EAAAA,eAAe,CAACC,EAAD,EAAKC,KAAL,EAAYomB,KAAZ,EAAmBF,QAAnB,EAA6BD,mBAA7B,EAAkD3yB,KAAK,CAACxB,OAAxD,CAAf;AACAk0B,EAAAA,QAAQ,GAAGjjC,SAAX;AACD;;AAED,IAAI2jC,MAAM,GAAG;AACXthC,EAAAA,MAAM,EAAEqhC,kBADG;AAEXt1B,EAAAA,MAAM,EAAEs1B;AAFG,CAAb;AAKA;;AAEA,IAAIE,YAAJ;;AAEA,SAASC,cAAT,CAAyBzd,QAAzB,EAAmC7V,KAAnC,EAA0C;AACxC,MAAIzQ,OAAO,CAACsmB,QAAQ,CAACzX,IAAT,CAAckT,QAAf,CAAP,IAAmC/hB,OAAO,CAACyQ,KAAK,CAAC5B,IAAN,CAAWkT,QAAZ,CAA9C,EAAqE;AACnE;AACD;;AACD,MAAIxe,GAAJ,EAASyV,GAAT;AACA,MAAIhK,GAAG,GAAGyB,KAAK,CAACzB,GAAhB;AACA,MAAIg1B,QAAQ,GAAG1d,QAAQ,CAACzX,IAAT,CAAckT,QAAd,IAA0B,EAAzC;AACA,MAAIhN,KAAK,GAAGtE,KAAK,CAAC5B,IAAN,CAAWkT,QAAX,IAAuB,EAAnC,CAPwC,CAQxC;;AACA,MAAI5hB,KAAK,CAAC4U,KAAK,CAACzD,MAAP,CAAT,EAAyB;AACvByD,IAAAA,KAAK,GAAGtE,KAAK,CAAC5B,IAAN,CAAWkT,QAAX,GAAsB1c,MAAM,CAAC,EAAD,EAAK0P,KAAL,CAApC;AACD;;AAED,OAAKxR,GAAL,IAAYygC,QAAZ,EAAsB;AACpB,QAAI,EAAEzgC,GAAG,IAAIwR,KAAT,CAAJ,EAAqB;AACnB/F,MAAAA,GAAG,CAACzL,GAAD,CAAH,GAAW,EAAX;AACD;AACF;;AAED,OAAKA,GAAL,IAAYwR,KAAZ,EAAmB;AACjBiE,IAAAA,GAAG,GAAGjE,KAAK,CAACxR,GAAD,CAAX,CADiB,CAEjB;AACA;AACA;;AACA,QAAIA,GAAG,KAAK,aAAR,IAAyBA,GAAG,KAAK,WAArC,EAAkD;AAChD,UAAIkN,KAAK,CAAC3B,QAAV,EAAoB;AAAE2B,QAAAA,KAAK,CAAC3B,QAAN,CAAenM,MAAf,GAAwB,CAAxB;AAA4B;;AAClD,UAAIqW,GAAG,KAAKgrB,QAAQ,CAACzgC,GAAD,CAApB,EAA2B;AAAE;AAAU,OAFS,CAGhD;AACA;;;AACA,UAAIyL,GAAG,CAAC4wB,UAAJ,CAAej9B,MAAf,KAA0B,CAA9B,EAAiC;AAC/BqM,QAAAA,GAAG,CAACmrB,WAAJ,CAAgBnrB,GAAG,CAAC4wB,UAAJ,CAAe,CAAf,CAAhB;AACD;AACF;;AAED,QAAIr8B,GAAG,KAAK,OAAR,IAAmByL,GAAG,CAAC0qB,OAAJ,KAAgB,UAAvC,EAAmD;AACjD;AACA;AACA1qB,MAAAA,GAAG,CAACi1B,MAAJ,GAAajrB,GAAb,CAHiD,CAIjD;;AACA,UAAIkrB,MAAM,GAAGlkC,OAAO,CAACgZ,GAAD,CAAP,GAAe,EAAf,GAAoB1X,MAAM,CAAC0X,GAAD,CAAvC;;AACA,UAAImrB,iBAAiB,CAACn1B,GAAD,EAAMk1B,MAAN,CAArB,EAAoC;AAClCl1B,QAAAA,GAAG,CAACzO,KAAJ,GAAY2jC,MAAZ;AACD;AACF,KATD,MASO,IAAI3gC,GAAG,KAAK,WAAR,IAAuB01B,KAAK,CAACjqB,GAAG,CAAC0qB,OAAL,CAA5B,IAA6C15B,OAAO,CAACgP,GAAG,CAACywB,SAAL,CAAxD,EAAyE;AAC9E;AACAqE,MAAAA,YAAY,GAAGA,YAAY,IAAIxpB,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,CAA/B;AACA0e,MAAAA,YAAY,CAACrE,SAAb,GAAyB,UAAUzmB,GAAV,GAAgB,QAAzC;AACA,UAAI8f,GAAG,GAAGgL,YAAY,CAACnE,UAAvB;;AACA,aAAO3wB,GAAG,CAAC2wB,UAAX,EAAuB;AACrB3wB,QAAAA,GAAG,CAACmrB,WAAJ,CAAgBnrB,GAAG,CAAC2wB,UAApB;AACD;;AACD,aAAO7G,GAAG,CAAC6G,UAAX,EAAuB;AACrB3wB,QAAAA,GAAG,CAACorB,WAAJ,CAAgBtB,GAAG,CAAC6G,UAApB;AACD;AACF,KAXM,MAWA,KACL;AACA;AACA;AACA;AACA3mB,IAAAA,GAAG,KAAKgrB,QAAQ,CAACzgC,GAAD,CALX,EAML;AACA;AACA;AACA,UAAI;AACFyL,QAAAA,GAAG,CAACzL,GAAD,CAAH,GAAWyV,GAAX;AACD,OAFD,CAEE,OAAO5S,CAAP,EAAU,CAAE;AACf;AACF;AACF,EAED;;;AAGA,SAAS+9B,iBAAT,CAA4Bn1B,GAA5B,EAAiCo1B,QAAjC,EAA2C;AACzC,SAAQ,CAACp1B,GAAG,CAACq1B,SAAL,KACNr1B,GAAG,CAAC0qB,OAAJ,KAAgB,QAAhB,IACA4K,oBAAoB,CAACt1B,GAAD,EAAMo1B,QAAN,CADpB,IAEAG,oBAAoB,CAACv1B,GAAD,EAAMo1B,QAAN,CAHd,CAAR;AAKD;;AAED,SAASE,oBAAT,CAA+Bt1B,GAA/B,EAAoCo1B,QAApC,EAA8C;AAC5C;AACA;AACA,MAAII,UAAU,GAAG,IAAjB,CAH4C,CAI5C;AACA;;AACA,MAAI;AAAEA,IAAAA,UAAU,GAAGlqB,QAAQ,CAACmqB,aAAT,KAA2Bz1B,GAAxC;AAA8C,GAApD,CAAqD,OAAO5I,CAAP,EAAU,CAAE;;AACjE,SAAOo+B,UAAU,IAAIx1B,GAAG,CAACzO,KAAJ,KAAc6jC,QAAnC;AACD;;AAED,SAASG,oBAAT,CAA+Bv1B,GAA/B,EAAoCoE,MAApC,EAA4C;AAC1C,MAAI7S,KAAK,GAAGyO,GAAG,CAACzO,KAAhB;AACA,MAAIkhC,SAAS,GAAGzyB,GAAG,CAAC01B,WAApB,CAF0C,CAET;;AACjC,MAAIvkC,KAAK,CAACshC,SAAD,CAAT,EAAsB;AACpB,QAAIA,SAAS,CAACkD,MAAd,EAAsB;AACpB,aAAO1iC,QAAQ,CAAC1B,KAAD,CAAR,KAAoB0B,QAAQ,CAACmR,MAAD,CAAnC;AACD;;AACD,QAAIquB,SAAS,CAACmD,IAAd,EAAoB;AAClB,aAAOrkC,KAAK,CAACqkC,IAAN,OAAiBxxB,MAAM,CAACwxB,IAAP,EAAxB;AACD;AACF;;AACD,SAAOrkC,KAAK,KAAK6S,MAAjB;AACD;;AAED,IAAI2O,QAAQ,GAAG;AACbxf,EAAAA,MAAM,EAAEwhC,cADK;AAEbz1B,EAAAA,MAAM,EAAEy1B;AAFK,CAAf;AAKA;;AAEA,IAAIc,cAAc,GAAGrhC,MAAM,CAAC,UAAUshC,OAAV,EAAmB;AAC7C,MAAIr/B,GAAG,GAAG,EAAV;AACA,MAAIs/B,aAAa,GAAG,eAApB;AACA,MAAIC,iBAAiB,GAAG,OAAxB;AACAF,EAAAA,OAAO,CAACriC,KAAR,CAAcsiC,aAAd,EAA6Bj0B,OAA7B,CAAqC,UAAU7N,IAAV,EAAgB;AACnD,QAAIA,IAAJ,EAAU;AACR,UAAImuB,GAAG,GAAGnuB,IAAI,CAACR,KAAL,CAAWuiC,iBAAX,CAAV;AACA5T,MAAAA,GAAG,CAACzuB,MAAJ,GAAa,CAAb,KAAmB8C,GAAG,CAAC2rB,GAAG,CAAC,CAAD,CAAH,CAAOwT,IAAP,EAAD,CAAH,GAAqBxT,GAAG,CAAC,CAAD,CAAH,CAAOwT,IAAP,EAAxC;AACD;AACF,GALD;AAMA,SAAOn/B,GAAP;AACD,CAX0B,CAA3B,EAaA;;AACA,SAASw/B,kBAAT,CAA6Bp2B,IAA7B,EAAmC;AACjC,MAAIma,KAAK,GAAGkc,qBAAqB,CAACr2B,IAAI,CAACma,KAAN,CAAjC,CADiC,CAEjC;AACA;;AACA,SAAOna,IAAI,CAACs2B,WAAL,GACH9/B,MAAM,CAACwJ,IAAI,CAACs2B,WAAN,EAAmBnc,KAAnB,CADH,GAEHA,KAFJ;AAGD,EAED;;;AACA,SAASkc,qBAAT,CAAgCE,YAAhC,EAA8C;AAC5C,MAAIvjC,KAAK,CAACC,OAAN,CAAcsjC,YAAd,CAAJ,EAAiC;AAC/B,WAAO5/B,QAAQ,CAAC4/B,YAAD,CAAf;AACD;;AACD,MAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AACpC,WAAOP,cAAc,CAACO,YAAD,CAArB;AACD;;AACD,SAAOA,YAAP;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASC,QAAT,CAAmB50B,KAAnB,EAA0B60B,UAA1B,EAAsC;AACpC,MAAI7/B,GAAG,GAAG,EAAV;AACA,MAAI8/B,SAAJ;;AAEA,MAAID,UAAJ,EAAgB;AACd,QAAIlN,SAAS,GAAG3nB,KAAhB;;AACA,WAAO2nB,SAAS,CAAC5oB,iBAAjB,EAAoC;AAClC4oB,MAAAA,SAAS,GAAGA,SAAS,CAAC5oB,iBAAV,CAA4B2Z,MAAxC;;AACA,UACEiP,SAAS,IAAIA,SAAS,CAACvpB,IAAvB,KACC02B,SAAS,GAAGN,kBAAkB,CAAC7M,SAAS,CAACvpB,IAAX,CAD/B,CADF,EAGE;AACAxJ,QAAAA,MAAM,CAACI,GAAD,EAAM8/B,SAAN,CAAN;AACD;AACF;AACF;;AAED,MAAKA,SAAS,GAAGN,kBAAkB,CAACx0B,KAAK,CAAC5B,IAAP,CAAnC,EAAkD;AAChDxJ,IAAAA,MAAM,CAACI,GAAD,EAAM8/B,SAAN,CAAN;AACD;;AAED,MAAIpN,UAAU,GAAG1nB,KAAjB;;AACA,SAAQ0nB,UAAU,GAAGA,UAAU,CAAC1oB,MAAhC,EAAyC;AACvC,QAAI0oB,UAAU,CAACtpB,IAAX,KAAoB02B,SAAS,GAAGN,kBAAkB,CAAC9M,UAAU,CAACtpB,IAAZ,CAAlD,CAAJ,EAA0E;AACxExJ,MAAAA,MAAM,CAACI,GAAD,EAAM8/B,SAAN,CAAN;AACD;AACF;;AACD,SAAO9/B,GAAP;AACD;AAED;;;AAEA,IAAI+/B,QAAQ,GAAG,KAAf;AACA,IAAIC,WAAW,GAAG,gBAAlB;;AACA,IAAIC,OAAO,GAAG,UAAUlyB,EAAV,EAAczG,IAAd,EAAoB5L,GAApB,EAAyB;AACrC;AACA,MAAIqkC,QAAQ,CAACz8B,IAAT,CAAcgE,IAAd,CAAJ,EAAyB;AACvByG,IAAAA,EAAE,CAACwV,KAAH,CAAS2c,WAAT,CAAqB54B,IAArB,EAA2B5L,GAA3B;AACD,GAFD,MAEO,IAAIskC,WAAW,CAAC18B,IAAZ,CAAiB5H,GAAjB,CAAJ,EAA2B;AAChCqS,IAAAA,EAAE,CAACwV,KAAH,CAAS2c,WAAT,CAAqBrhC,SAAS,CAACyI,IAAD,CAA9B,EAAsC5L,GAAG,CAAC4C,OAAJ,CAAY0hC,WAAZ,EAAyB,EAAzB,CAAtC,EAAoE,WAApE;AACD,GAFM,MAEA;AACL,QAAIG,cAAc,GAAGC,SAAS,CAAC94B,IAAD,CAA9B;;AACA,QAAIlL,KAAK,CAACC,OAAN,CAAcX,GAAd,CAAJ,EAAwB;AACtB;AACA;AACA;AACA,WAAK,IAAIuB,CAAC,GAAG,CAAR,EAAWyO,GAAG,GAAGhQ,GAAG,CAACwB,MAA1B,EAAkCD,CAAC,GAAGyO,GAAtC,EAA2CzO,CAAC,EAA5C,EAAgD;AAC9C8Q,QAAAA,EAAE,CAACwV,KAAH,CAAS4c,cAAT,IAA2BzkC,GAAG,CAACuB,CAAD,CAA9B;AACD;AACF,KAPD,MAOO;AACL8Q,MAAAA,EAAE,CAACwV,KAAH,CAAS4c,cAAT,IAA2BzkC,GAA3B;AACD;AACF;AACF,CAnBD;;AAqBA,IAAI2kC,WAAW,GAAG,CAAC,QAAD,EAAW,KAAX,EAAkB,IAAlB,CAAlB;AAEA,IAAIC,UAAJ;AACA,IAAIF,SAAS,GAAGriC,MAAM,CAAC,UAAUmT,IAAV,EAAgB;AACrCovB,EAAAA,UAAU,GAAGA,UAAU,IAAIzrB,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,EAA8B4D,KAAzD;AACArS,EAAAA,IAAI,GAAG7S,QAAQ,CAAC6S,IAAD,CAAf;;AACA,MAAIA,IAAI,KAAK,QAAT,IAAsBA,IAAI,IAAIovB,UAAlC,EAA+C;AAC7C,WAAOpvB,IAAP;AACD;;AACD,MAAIqvB,OAAO,GAAGrvB,IAAI,CAACvS,MAAL,CAAY,CAAZ,EAAeF,WAAf,KAA+ByS,IAAI,CAAC5V,KAAL,CAAW,CAAX,CAA7C;;AACA,OAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGojC,WAAW,CAACnjC,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,QAAIqK,IAAI,GAAG+4B,WAAW,CAACpjC,CAAD,CAAX,GAAiBsjC,OAA5B;;AACA,QAAIj5B,IAAI,IAAIg5B,UAAZ,EAAwB;AACtB,aAAOh5B,IAAP;AACD;AACF;AACF,CAbqB,CAAtB;;AAeA,SAASk5B,WAAT,CAAsB3f,QAAtB,EAAgC7V,KAAhC,EAAuC;AACrC,MAAI5B,IAAI,GAAG4B,KAAK,CAAC5B,IAAjB;AACA,MAAI4zB,OAAO,GAAGnc,QAAQ,CAACzX,IAAvB;;AAEA,MAAI7O,OAAO,CAAC6O,IAAI,CAACs2B,WAAN,CAAP,IAA6BnlC,OAAO,CAAC6O,IAAI,CAACma,KAAN,CAApC,IACFhpB,OAAO,CAACyiC,OAAO,CAAC0C,WAAT,CADL,IAC8BnlC,OAAO,CAACyiC,OAAO,CAACzZ,KAAT,CADzC,EAEE;AACA;AACD;;AAED,MAAIhQ,GAAJ,EAASjM,IAAT;AACA,MAAIyG,EAAE,GAAG/C,KAAK,CAACzB,GAAf;AACA,MAAIk3B,cAAc,GAAGzD,OAAO,CAAC0C,WAA7B;AACA,MAAIgB,eAAe,GAAG1D,OAAO,CAAC2D,eAAR,IAA2B3D,OAAO,CAACzZ,KAAnC,IAA4C,EAAlE,CAbqC,CAerC;;AACA,MAAIqd,QAAQ,GAAGH,cAAc,IAAIC,eAAjC;AAEA,MAAInd,KAAK,GAAGkc,qBAAqB,CAACz0B,KAAK,CAAC5B,IAAN,CAAWma,KAAZ,CAArB,IAA2C,EAAvD,CAlBqC,CAoBrC;AACA;AACA;;AACAvY,EAAAA,KAAK,CAAC5B,IAAN,CAAWu3B,eAAX,GAA6BjmC,KAAK,CAAC6oB,KAAK,CAAC1X,MAAP,CAAL,GACzBjM,MAAM,CAAC,EAAD,EAAK2jB,KAAL,CADmB,GAEzBA,KAFJ;AAIA,MAAIsd,QAAQ,GAAGjB,QAAQ,CAAC50B,KAAD,EAAQ,IAAR,CAAvB;;AAEA,OAAK1D,IAAL,IAAas5B,QAAb,EAAuB;AACrB,QAAIrmC,OAAO,CAACsmC,QAAQ,CAACv5B,IAAD,CAAT,CAAX,EAA6B;AAC3B24B,MAAAA,OAAO,CAAClyB,EAAD,EAAKzG,IAAL,EAAW,EAAX,CAAP;AACD;AACF;;AACD,OAAKA,IAAL,IAAau5B,QAAb,EAAuB;AACrBttB,IAAAA,GAAG,GAAGstB,QAAQ,CAACv5B,IAAD,CAAd;;AACA,QAAIiM,GAAG,KAAKqtB,QAAQ,CAACt5B,IAAD,CAApB,EAA4B;AAC1B;AACA24B,MAAAA,OAAO,CAAClyB,EAAD,EAAKzG,IAAL,EAAWiM,GAAG,IAAI,IAAP,GAAc,EAAd,GAAmBA,GAA9B,CAAP;AACD;AACF;AACF;;AAED,IAAIgQ,KAAK,GAAG;AACVzmB,EAAAA,MAAM,EAAE0jC,WADE;AAEV33B,EAAAA,MAAM,EAAE23B;AAFE,CAAZ;AAKA;;AAEA,IAAIM,YAAY,GAAG,KAAnB;AAEA;AACA;AACA;AACA;;AACA,SAASC,QAAT,CAAmBhzB,EAAnB,EAAuBkvB,GAAvB,EAA4B;AAC1B;AACA,MAAI,CAACA,GAAD,IAAQ,EAAEA,GAAG,GAAGA,GAAG,CAACkC,IAAJ,EAAR,CAAZ,EAAiC;AAC/B;AACD;AAED;;;AACA,MAAIpxB,EAAE,CAACizB,SAAP,EAAkB;AAChB,QAAI/D,GAAG,CAACv/B,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAxB,EAA2B;AACzBu/B,MAAAA,GAAG,CAACjgC,KAAJ,CAAU8jC,YAAV,EAAwBz1B,OAAxB,CAAgC,UAAU7M,CAAV,EAAa;AAAE,eAAOuP,EAAE,CAACizB,SAAH,CAAa/6B,GAAb,CAAiBzH,CAAjB,CAAP;AAA6B,OAA5E;AACD,KAFD,MAEO;AACLuP,MAAAA,EAAE,CAACizB,SAAH,CAAa/6B,GAAb,CAAiBg3B,GAAjB;AACD;AACF,GAND,MAMO;AACL,QAAI1pB,GAAG,GAAG,OAAOxF,EAAE,CAACkzB,YAAH,CAAgB,OAAhB,KAA4B,EAAnC,IAAyC,GAAnD;;AACA,QAAI1tB,GAAG,CAAC7V,OAAJ,CAAY,MAAMu/B,GAAN,GAAY,GAAxB,IAA+B,CAAnC,EAAsC;AACpClvB,MAAAA,EAAE,CAAComB,YAAH,CAAgB,OAAhB,EAAyB,CAAC5gB,GAAG,GAAG0pB,GAAP,EAAYkC,IAAZ,EAAzB;AACD;AACF;AACF;AAED;AACA;AACA;AACA;;;AACA,SAAS+B,WAAT,CAAsBnzB,EAAtB,EAA0BkvB,GAA1B,EAA+B;AAC7B;AACA,MAAI,CAACA,GAAD,IAAQ,EAAEA,GAAG,GAAGA,GAAG,CAACkC,IAAJ,EAAR,CAAZ,EAAiC;AAC/B;AACD;AAED;;;AACA,MAAIpxB,EAAE,CAACizB,SAAP,EAAkB;AAChB,QAAI/D,GAAG,CAACv/B,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAxB,EAA2B;AACzBu/B,MAAAA,GAAG,CAACjgC,KAAJ,CAAU8jC,YAAV,EAAwBz1B,OAAxB,CAAgC,UAAU7M,CAAV,EAAa;AAAE,eAAOuP,EAAE,CAACizB,SAAH,CAAa1jC,MAAb,CAAoBkB,CAApB,CAAP;AAAgC,OAA/E;AACD,KAFD,MAEO;AACLuP,MAAAA,EAAE,CAACizB,SAAH,CAAa1jC,MAAb,CAAoB2/B,GAApB;AACD;;AACD,QAAI,CAAClvB,EAAE,CAACizB,SAAH,CAAa9jC,MAAlB,EAA0B;AACxB6Q,MAAAA,EAAE,CAAC2sB,eAAH,CAAmB,OAAnB;AACD;AACF,GATD,MASO;AACL,QAAInnB,GAAG,GAAG,OAAOxF,EAAE,CAACkzB,YAAH,CAAgB,OAAhB,KAA4B,EAAnC,IAAyC,GAAnD;AACA,QAAIE,GAAG,GAAG,MAAMlE,GAAN,GAAY,GAAtB;;AACA,WAAO1pB,GAAG,CAAC7V,OAAJ,CAAYyjC,GAAZ,KAAoB,CAA3B,EAA8B;AAC5B5tB,MAAAA,GAAG,GAAGA,GAAG,CAACjV,OAAJ,CAAY6iC,GAAZ,EAAiB,GAAjB,CAAN;AACD;;AACD5tB,IAAAA,GAAG,GAAGA,GAAG,CAAC4rB,IAAJ,EAAN;;AACA,QAAI5rB,GAAJ,EAAS;AACPxF,MAAAA,EAAE,CAAComB,YAAH,CAAgB,OAAhB,EAAyB5gB,GAAzB;AACD,KAFD,MAEO;AACLxF,MAAAA,EAAE,CAAC2sB,eAAH,CAAmB,OAAnB;AACD;AACF;AACF;AAED;;;AAEA,SAAS0G,iBAAT,CAA4BhxB,MAA5B,EAAoC;AAClC,MAAI,CAACA,MAAL,EAAa;AACX;AACD;AACD;;;AACA,MAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,QAAIpQ,GAAG,GAAG,EAAV;;AACA,QAAIoQ,MAAM,CAACixB,GAAP,KAAe,KAAnB,EAA0B;AACxBzhC,MAAAA,MAAM,CAACI,GAAD,EAAMshC,iBAAiB,CAAClxB,MAAM,CAAC9I,IAAP,IAAe,GAAhB,CAAvB,CAAN;AACD;;AACD1H,IAAAA,MAAM,CAACI,GAAD,EAAMoQ,MAAN,CAAN;AACA,WAAOpQ,GAAP;AACD,GAPD,MAOO,IAAI,OAAOoQ,MAAP,KAAkB,QAAtB,EAAgC;AACrC,WAAOkxB,iBAAiB,CAAClxB,MAAD,CAAxB;AACD;AACF;;AAED,IAAIkxB,iBAAiB,GAAGvjC,MAAM,CAAC,UAAUuJ,IAAV,EAAgB;AAC7C,SAAO;AACLi6B,IAAAA,UAAU,EAAGj6B,IAAI,GAAG,QADf;AAELk6B,IAAAA,YAAY,EAAGl6B,IAAI,GAAG,WAFjB;AAGLm6B,IAAAA,gBAAgB,EAAGn6B,IAAI,GAAG,eAHrB;AAILo6B,IAAAA,UAAU,EAAGp6B,IAAI,GAAG,QAJf;AAKLq6B,IAAAA,YAAY,EAAGr6B,IAAI,GAAG,WALjB;AAMLs6B,IAAAA,gBAAgB,EAAGt6B,IAAI,GAAG;AANrB,GAAP;AAQD,CAT6B,CAA9B;AAWA,IAAIu6B,aAAa,GAAGp+B,SAAS,IAAI,CAACU,KAAlC;AACA,IAAI29B,UAAU,GAAG,YAAjB;AACA,IAAIC,SAAS,GAAG,WAAhB,EAEA;;AACA,IAAIC,cAAc,GAAG,YAArB;AACA,IAAIC,kBAAkB,GAAG,eAAzB;AACA,IAAIC,aAAa,GAAG,WAApB;AACA,IAAIC,iBAAiB,GAAG,cAAxB;;AACA,IAAIN,aAAJ,EAAmB;AACjB;AACA,MAAIn+B,MAAM,CAAC0+B,eAAP,KAA2B3nC,SAA3B,IACFiJ,MAAM,CAAC2+B,qBAAP,KAAiC5nC,SADnC,EAEE;AACAunC,IAAAA,cAAc,GAAG,kBAAjB;AACAC,IAAAA,kBAAkB,GAAG,qBAArB;AACD;;AACD,MAAIv+B,MAAM,CAAC4+B,cAAP,KAA0B7nC,SAA1B,IACFiJ,MAAM,CAAC6+B,oBAAP,KAAgC9nC,SADlC,EAEE;AACAynC,IAAAA,aAAa,GAAG,iBAAhB;AACAC,IAAAA,iBAAiB,GAAG,oBAApB;AACD;AACF,EAED;;;AACA,IAAIK,GAAG,GAAG/+B,SAAS,GACfC,MAAM,CAAC++B,qBAAP,GACE/+B,MAAM,CAAC++B,qBAAP,CAA6BljC,IAA7B,CAAkCmE,MAAlC,CADF,GAEE8Q,UAHa;AAIf;AAA2B,UAAUxW,EAAV,EAAc;AAAE,SAAOA,EAAE,EAAT;AAAc,CAJ7D;;AAMA,SAAS0kC,SAAT,CAAoB1kC,EAApB,EAAwB;AACtBwkC,EAAAA,GAAG,CAAC,YAAY;AACdA,IAAAA,GAAG,CAACxkC,EAAD,CAAH;AACD,GAFE,CAAH;AAGD;;AAED,SAAS2kC,kBAAT,CAA6B50B,EAA7B,EAAiCkvB,GAAjC,EAAsC;AACpC,MAAI2F,iBAAiB,GAAG70B,EAAE,CAACovB,kBAAH,KAA0BpvB,EAAE,CAACovB,kBAAH,GAAwB,EAAlD,CAAxB;;AACA,MAAIyF,iBAAiB,CAACllC,OAAlB,CAA0Bu/B,GAA1B,IAAiC,CAArC,EAAwC;AACtC2F,IAAAA,iBAAiB,CAAC76B,IAAlB,CAAuBk1B,GAAvB;AACA8D,IAAAA,QAAQ,CAAChzB,EAAD,EAAKkvB,GAAL,CAAR;AACD;AACF;;AAED,SAAS4F,qBAAT,CAAgC90B,EAAhC,EAAoCkvB,GAApC,EAAyC;AACvC,MAAIlvB,EAAE,CAACovB,kBAAP,EAA2B;AACzB7/B,IAAAA,MAAM,CAACyQ,EAAE,CAACovB,kBAAJ,EAAwBF,GAAxB,CAAN;AACD;;AACDiE,EAAAA,WAAW,CAACnzB,EAAD,EAAKkvB,GAAL,CAAX;AACD;;AAED,SAAS6F,kBAAT,CACE/0B,EADF,EAEEoE,YAFF,EAGE+C,EAHF,EAIE;AACA,MAAImP,GAAG,GAAG0e,iBAAiB,CAACh1B,EAAD,EAAKoE,YAAL,CAA3B;AACA,MAAI/C,IAAI,GAAGiV,GAAG,CAACjV,IAAf;AACA,MAAI2W,OAAO,GAAG1B,GAAG,CAAC0B,OAAlB;AACA,MAAIid,SAAS,GAAG3e,GAAG,CAAC2e,SAApB;;AACA,MAAI,CAAC5zB,IAAL,EAAW;AAAE,WAAO8F,EAAE,EAAT;AAAa;;AAC1B,MAAI4C,KAAK,GAAG1I,IAAI,KAAK0yB,UAAT,GAAsBG,kBAAtB,GAA2CE,iBAAvD;AACA,MAAIc,KAAK,GAAG,CAAZ;;AACA,MAAI1J,GAAG,GAAG,YAAY;AACpBxrB,IAAAA,EAAE,CAAC+uB,mBAAH,CAAuBhlB,KAAvB,EAA8BorB,KAA9B;AACAhuB,IAAAA,EAAE;AACH,GAHD;;AAIA,MAAIguB,KAAK,GAAG,UAAUviC,CAAV,EAAa;AACvB,QAAIA,CAAC,CAAC8H,MAAF,KAAasF,EAAjB,EAAqB;AACnB,UAAI,EAAEk1B,KAAF,IAAWD,SAAf,EAA0B;AACxBzJ,QAAAA,GAAG;AACJ;AACF;AACF,GAND;;AAOA/kB,EAAAA,UAAU,CAAC,YAAY;AACrB,QAAIyuB,KAAK,GAAGD,SAAZ,EAAuB;AACrBzJ,MAAAA,GAAG;AACJ;AACF,GAJS,EAIPxT,OAAO,GAAG,CAJH,CAAV;AAKAhY,EAAAA,EAAE,CAAC/I,gBAAH,CAAoB8S,KAApB,EAA2BorB,KAA3B;AACD;;AAED,IAAIC,WAAW,GAAG,wBAAlB;;AAEA,SAASJ,iBAAT,CAA4Bh1B,EAA5B,EAAgCoE,YAAhC,EAA8C;AAC5C,MAAIixB,MAAM,GAAG1/B,MAAM,CAAC2/B,gBAAP,CAAwBt1B,EAAxB,CAAb,CAD4C,CAE5C;;AACA,MAAIu1B,gBAAgB,GAAG,CAACF,MAAM,CAACpB,cAAc,GAAG,OAAlB,CAAN,IAAoC,EAArC,EAAyChlC,KAAzC,CAA+C,IAA/C,CAAvB;AACA,MAAIumC,mBAAmB,GAAG,CAACH,MAAM,CAACpB,cAAc,GAAG,UAAlB,CAAN,IAAuC,EAAxC,EAA4ChlC,KAA5C,CAAkD,IAAlD,CAA1B;AACA,MAAIwmC,iBAAiB,GAAGC,UAAU,CAACH,gBAAD,EAAmBC,mBAAnB,CAAlC;AACA,MAAIG,eAAe,GAAG,CAACN,MAAM,CAAClB,aAAa,GAAG,OAAjB,CAAN,IAAmC,EAApC,EAAwCllC,KAAxC,CAA8C,IAA9C,CAAtB;AACA,MAAI2mC,kBAAkB,GAAG,CAACP,MAAM,CAAClB,aAAa,GAAG,UAAjB,CAAN,IAAsC,EAAvC,EAA2CllC,KAA3C,CAAiD,IAAjD,CAAzB;AACA,MAAI4mC,gBAAgB,GAAGH,UAAU,CAACC,eAAD,EAAkBC,kBAAlB,CAAjC;AAEA,MAAIv0B,IAAJ;AACA,MAAI2W,OAAO,GAAG,CAAd;AACA,MAAIid,SAAS,GAAG,CAAhB;AACA;;AACA,MAAI7wB,YAAY,KAAK2vB,UAArB,EAAiC;AAC/B,QAAI0B,iBAAiB,GAAG,CAAxB,EAA2B;AACzBp0B,MAAAA,IAAI,GAAG0yB,UAAP;AACA/b,MAAAA,OAAO,GAAGyd,iBAAV;AACAR,MAAAA,SAAS,GAAGO,mBAAmB,CAACrmC,MAAhC;AACD;AACF,GAND,MAMO,IAAIiV,YAAY,KAAK4vB,SAArB,EAAgC;AACrC,QAAI6B,gBAAgB,GAAG,CAAvB,EAA0B;AACxBx0B,MAAAA,IAAI,GAAG2yB,SAAP;AACAhc,MAAAA,OAAO,GAAG6d,gBAAV;AACAZ,MAAAA,SAAS,GAAGW,kBAAkB,CAACzmC,MAA/B;AACD;AACF,GANM,MAMA;AACL6oB,IAAAA,OAAO,GAAGjqB,IAAI,CAAC8R,GAAL,CAAS41B,iBAAT,EAA4BI,gBAA5B,CAAV;AACAx0B,IAAAA,IAAI,GAAG2W,OAAO,GAAG,CAAV,GACHyd,iBAAiB,GAAGI,gBAApB,GACE9B,UADF,GAEEC,SAHC,GAIH,IAJJ;AAKAiB,IAAAA,SAAS,GAAG5zB,IAAI,GACZA,IAAI,KAAK0yB,UAAT,GACEyB,mBAAmB,CAACrmC,MADtB,GAEEymC,kBAAkB,CAACzmC,MAHT,GAIZ,CAJJ;AAKD;;AACD,MAAI2mC,YAAY,GACdz0B,IAAI,KAAK0yB,UAAT,IACAqB,WAAW,CAAC7/B,IAAZ,CAAiB8/B,MAAM,CAACpB,cAAc,GAAG,UAAlB,CAAvB,CAFF;AAGA,SAAO;AACL5yB,IAAAA,IAAI,EAAEA,IADD;AAEL2W,IAAAA,OAAO,EAAEA,OAFJ;AAGLid,IAAAA,SAAS,EAAEA,SAHN;AAILa,IAAAA,YAAY,EAAEA;AAJT,GAAP;AAMD;;AAED,SAASJ,UAAT,CAAqBK,MAArB,EAA6BC,SAA7B,EAAwC;AACtC;AACA,SAAOD,MAAM,CAAC5mC,MAAP,GAAgB6mC,SAAS,CAAC7mC,MAAjC,EAAyC;AACvC4mC,IAAAA,MAAM,GAAGA,MAAM,CAACh1B,MAAP,CAAcg1B,MAAd,CAAT;AACD;;AAED,SAAOhoC,IAAI,CAAC8R,GAAL,CAASxO,KAAT,CAAe,IAAf,EAAqB2kC,SAAS,CAAClnC,GAAV,CAAc,UAAU6iB,CAAV,EAAaziB,CAAb,EAAgB;AACxD,WAAO+mC,IAAI,CAACtkB,CAAD,CAAJ,GAAUskB,IAAI,CAACF,MAAM,CAAC7mC,CAAD,CAAP,CAArB;AACD,GAF2B,CAArB,CAAP;AAGD,EAED;AACA;AACA;AACA;;;AACA,SAAS+mC,IAAT,CAAeC,CAAf,EAAkB;AAChB,SAAOjxB,MAAM,CAACixB,CAAC,CAAC3oC,KAAF,CAAQ,CAAR,EAAW,CAAC,CAAZ,EAAegD,OAAf,CAAuB,GAAvB,EAA4B,GAA5B,CAAD,CAAN,GAA2C,IAAlD;AACD;AAED;;;AAEA,SAAS4lC,KAAT,CAAgBl5B,KAAhB,EAAuBm5B,aAAvB,EAAsC;AACpC,MAAIp2B,EAAE,GAAG/C,KAAK,CAACzB,GAAf,CADoC,CAGpC;;AACA,MAAI7O,KAAK,CAACqT,EAAE,CAAC6sB,QAAJ,CAAT,EAAwB;AACtB7sB,IAAAA,EAAE,CAAC6sB,QAAH,CAAYwJ,SAAZ,GAAwB,IAAxB;;AACAr2B,IAAAA,EAAE,CAAC6sB,QAAH;AACD;;AAED,MAAIxxB,IAAI,GAAGg4B,iBAAiB,CAACp2B,KAAK,CAAC5B,IAAN,CAAWouB,UAAZ,CAA5B;;AACA,MAAIj9B,OAAO,CAAC6O,IAAD,CAAX,EAAmB;AACjB;AACD;AAED;;;AACA,MAAI1O,KAAK,CAACqT,EAAE,CAACs2B,QAAJ,CAAL,IAAsBt2B,EAAE,CAACssB,QAAH,KAAgB,CAA1C,EAA6C;AAC3C;AACD;;AAED,MAAIgH,GAAG,GAAGj4B,IAAI,CAACi4B,GAAf;AACA,MAAIjyB,IAAI,GAAGhG,IAAI,CAACgG,IAAhB;AACA,MAAImyB,UAAU,GAAGn4B,IAAI,CAACm4B,UAAtB;AACA,MAAIC,YAAY,GAAGp4B,IAAI,CAACo4B,YAAxB;AACA,MAAIC,gBAAgB,GAAGr4B,IAAI,CAACq4B,gBAA5B;AACA,MAAI6C,WAAW,GAAGl7B,IAAI,CAACk7B,WAAvB;AACA,MAAIC,aAAa,GAAGn7B,IAAI,CAACm7B,aAAzB;AACA,MAAIC,iBAAiB,GAAGp7B,IAAI,CAACo7B,iBAA7B;AACA,MAAIC,WAAW,GAAGr7B,IAAI,CAACq7B,WAAvB;AACA,MAAIP,KAAK,GAAG96B,IAAI,CAAC86B,KAAjB;AACA,MAAIQ,UAAU,GAAGt7B,IAAI,CAACs7B,UAAtB;AACA,MAAIC,cAAc,GAAGv7B,IAAI,CAACu7B,cAA1B;AACA,MAAIC,YAAY,GAAGx7B,IAAI,CAACw7B,YAAxB;AACA,MAAIC,MAAM,GAAGz7B,IAAI,CAACy7B,MAAlB;AACA,MAAIC,WAAW,GAAG17B,IAAI,CAAC07B,WAAvB;AACA,MAAIC,eAAe,GAAG37B,IAAI,CAAC27B,eAA3B;AACA,MAAIC,QAAQ,GAAG57B,IAAI,CAAC47B,QAApB,CAnCoC,CAqCpC;AACA;AACA;AACA;;AACA,MAAIx7B,OAAO,GAAGmX,cAAd;AACA,MAAIskB,cAAc,GAAGtkB,cAAc,CAACuC,MAApC;;AACA,SAAO+hB,cAAc,IAAIA,cAAc,CAACj7B,MAAxC,EAAgD;AAC9CR,IAAAA,OAAO,GAAGy7B,cAAc,CAACz7B,OAAzB;AACAy7B,IAAAA,cAAc,GAAGA,cAAc,CAACj7B,MAAhC;AACD;;AAED,MAAIk7B,QAAQ,GAAG,CAAC17B,OAAO,CAACwX,UAAT,IAAuB,CAAChW,KAAK,CAACb,YAA7C;;AAEA,MAAI+6B,QAAQ,IAAI,CAACL,MAAb,IAAuBA,MAAM,KAAK,EAAtC,EAA0C;AACxC;AACD;;AAED,MAAIM,UAAU,GAAGD,QAAQ,IAAIZ,WAAZ,GACbA,WADa,GAEb/C,UAFJ;AAGA,MAAI6D,WAAW,GAAGF,QAAQ,IAAIV,iBAAZ,GACdA,iBADc,GAEd/C,gBAFJ;AAGA,MAAI4D,OAAO,GAAGH,QAAQ,IAAIX,aAAZ,GACVA,aADU,GAEV/C,YAFJ;AAIA,MAAI8D,eAAe,GAAGJ,QAAQ,GACzBN,YAAY,IAAIH,WADS,GAE1BA,WAFJ;AAGA,MAAIc,SAAS,GAAGL,QAAQ,GACnB,OAAOL,MAAP,KAAkB,UAAlB,GAA+BA,MAA/B,GAAwCX,KADrB,GAEpBA,KAFJ;AAGA,MAAIsB,cAAc,GAAGN,QAAQ,GACxBJ,WAAW,IAAIJ,UADS,GAEzBA,UAFJ;AAGA,MAAIe,kBAAkB,GAAGP,QAAQ,GAC5BH,eAAe,IAAIJ,cADS,GAE7BA,cAFJ;AAIA,MAAIe,qBAAqB,GAAGlpC,QAAQ,CAClCzB,QAAQ,CAACiqC,QAAD,CAAR,GACIA,QAAQ,CAACd,KADb,GAEIc,QAH8B,CAApC;;AAMA,MAAI,kBAAyB,YAAzB,IAAyCU,qBAAqB,IAAI,IAAtE,EAA4E;AAC1EC,IAAAA,aAAa,CAACD,qBAAD,EAAwB,OAAxB,EAAiC16B,KAAjC,CAAb;AACD;;AAED,MAAI46B,UAAU,GAAGvE,GAAG,KAAK,KAAR,IAAiB,CAACl9B,KAAnC;AACA,MAAI0hC,gBAAgB,GAAGC,sBAAsB,CAACP,SAAD,CAA7C;AAEA,MAAIrwB,EAAE,GAAGnH,EAAE,CAACs2B,QAAH,GAAcnjC,IAAI,CAAC,YAAY;AACtC,QAAI0kC,UAAJ,EAAgB;AACd/C,MAAAA,qBAAqB,CAAC90B,EAAD,EAAKs3B,OAAL,CAArB;AACAxC,MAAAA,qBAAqB,CAAC90B,EAAD,EAAKq3B,WAAL,CAArB;AACD;;AACD,QAAIlwB,EAAE,CAACkvB,SAAP,EAAkB;AAChB,UAAIwB,UAAJ,EAAgB;AACd/C,QAAAA,qBAAqB,CAAC90B,EAAD,EAAKo3B,UAAL,CAArB;AACD;;AACDM,MAAAA,kBAAkB,IAAIA,kBAAkB,CAAC13B,EAAD,CAAxC;AACD,KALD,MAKO;AACLy3B,MAAAA,cAAc,IAAIA,cAAc,CAACz3B,EAAD,CAAhC;AACD;;AACDA,IAAAA,EAAE,CAACs2B,QAAH,GAAc,IAAd;AACD,GAd0B,CAA3B;;AAgBA,MAAI,CAACr5B,KAAK,CAAC5B,IAAN,CAAW28B,IAAhB,EAAsB;AACpB;AACA/tB,IAAAA,cAAc,CAAChN,KAAD,EAAQ,QAAR,EAAkB,YAAY;AAC1C,UAAIhB,MAAM,GAAG+D,EAAE,CAAC2kB,UAAhB;AACA,UAAIsT,WAAW,GAAGh8B,MAAM,IAAIA,MAAM,CAACi8B,QAAjB,IAA6Bj8B,MAAM,CAACi8B,QAAP,CAAgBj7B,KAAK,CAAClN,GAAtB,CAA/C;;AACA,UAAIkoC,WAAW,IACbA,WAAW,CAAC78B,GAAZ,KAAoB6B,KAAK,CAAC7B,GADxB,IAEF68B,WAAW,CAACz8B,GAAZ,CAAgBqxB,QAFlB,EAGE;AACAoL,QAAAA,WAAW,CAACz8B,GAAZ,CAAgBqxB,QAAhB;AACD;;AACD2K,MAAAA,SAAS,IAAIA,SAAS,CAACx3B,EAAD,EAAKmH,EAAL,CAAtB;AACD,KAVa,CAAd;AAWD,GAvHmC,CAyHpC;;;AACAowB,EAAAA,eAAe,IAAIA,eAAe,CAACv3B,EAAD,CAAlC;;AACA,MAAI63B,UAAJ,EAAgB;AACdjD,IAAAA,kBAAkB,CAAC50B,EAAD,EAAKo3B,UAAL,CAAlB;AACAxC,IAAAA,kBAAkB,CAAC50B,EAAD,EAAKq3B,WAAL,CAAlB;AACA1C,IAAAA,SAAS,CAAC,YAAY;AACpBG,MAAAA,qBAAqB,CAAC90B,EAAD,EAAKo3B,UAAL,CAArB;;AACA,UAAI,CAACjwB,EAAE,CAACkvB,SAAR,EAAmB;AACjBzB,QAAAA,kBAAkB,CAAC50B,EAAD,EAAKs3B,OAAL,CAAlB;;AACA,YAAI,CAACQ,gBAAL,EAAuB;AACrB,cAAIK,eAAe,CAACR,qBAAD,CAAnB,EAA4C;AAC1ClxB,YAAAA,UAAU,CAACU,EAAD,EAAKwwB,qBAAL,CAAV;AACD,WAFD,MAEO;AACL5C,YAAAA,kBAAkB,CAAC/0B,EAAD,EAAKqB,IAAL,EAAW8F,EAAX,CAAlB;AACD;AACF;AACF;AACF,KAZQ,CAAT;AAaD;;AAED,MAAIlK,KAAK,CAAC5B,IAAN,CAAW28B,IAAf,EAAqB;AACnB5B,IAAAA,aAAa,IAAIA,aAAa,EAA9B;AACAoB,IAAAA,SAAS,IAAIA,SAAS,CAACx3B,EAAD,EAAKmH,EAAL,CAAtB;AACD;;AAED,MAAI,CAAC0wB,UAAD,IAAe,CAACC,gBAApB,EAAsC;AACpC3wB,IAAAA,EAAE;AACH;AACF;;AAED,SAASixB,KAAT,CAAgBn7B,KAAhB,EAAuBmtB,EAAvB,EAA2B;AACzB,MAAIpqB,EAAE,GAAG/C,KAAK,CAACzB,GAAf,CADyB,CAGzB;;AACA,MAAI7O,KAAK,CAACqT,EAAE,CAACs2B,QAAJ,CAAT,EAAwB;AACtBt2B,IAAAA,EAAE,CAACs2B,QAAH,CAAYD,SAAZ,GAAwB,IAAxB;;AACAr2B,IAAAA,EAAE,CAACs2B,QAAH;AACD;;AAED,MAAIj7B,IAAI,GAAGg4B,iBAAiB,CAACp2B,KAAK,CAAC5B,IAAN,CAAWouB,UAAZ,CAA5B;;AACA,MAAIj9B,OAAO,CAAC6O,IAAD,CAAP,IAAiB2E,EAAE,CAACssB,QAAH,KAAgB,CAArC,EAAwC;AACtC,WAAOlC,EAAE,EAAT;AACD;AAED;;;AACA,MAAIz9B,KAAK,CAACqT,EAAE,CAAC6sB,QAAJ,CAAT,EAAwB;AACtB;AACD;;AAED,MAAIyG,GAAG,GAAGj4B,IAAI,CAACi4B,GAAf;AACA,MAAIjyB,IAAI,GAAGhG,IAAI,CAACgG,IAAhB;AACA,MAAIsyB,UAAU,GAAGt4B,IAAI,CAACs4B,UAAtB;AACA,MAAIC,YAAY,GAAGv4B,IAAI,CAACu4B,YAAxB;AACA,MAAIC,gBAAgB,GAAGx4B,IAAI,CAACw4B,gBAA5B;AACA,MAAIwE,WAAW,GAAGh9B,IAAI,CAACg9B,WAAvB;AACA,MAAID,KAAK,GAAG/8B,IAAI,CAAC+8B,KAAjB;AACA,MAAIE,UAAU,GAAGj9B,IAAI,CAACi9B,UAAtB;AACA,MAAIC,cAAc,GAAGl9B,IAAI,CAACk9B,cAA1B;AACA,MAAIC,UAAU,GAAGn9B,IAAI,CAACm9B,UAAtB;AACA,MAAIvB,QAAQ,GAAG57B,IAAI,CAAC47B,QAApB;AAEA,MAAIY,UAAU,GAAGvE,GAAG,KAAK,KAAR,IAAiB,CAACl9B,KAAnC;AACA,MAAI0hC,gBAAgB,GAAGC,sBAAsB,CAACK,KAAD,CAA7C;AAEA,MAAIK,qBAAqB,GAAGhqC,QAAQ,CAClCzB,QAAQ,CAACiqC,QAAD,CAAR,GACIA,QAAQ,CAACmB,KADb,GAEInB,QAH8B,CAApC;;AAMA,MAAI,kBAAyB,YAAzB,IAAyCtqC,KAAK,CAAC8rC,qBAAD,CAAlD,EAA2E;AACzEb,IAAAA,aAAa,CAACa,qBAAD,EAAwB,OAAxB,EAAiCx7B,KAAjC,CAAb;AACD;;AAED,MAAIkK,EAAE,GAAGnH,EAAE,CAAC6sB,QAAH,GAAc15B,IAAI,CAAC,YAAY;AACtC,QAAI6M,EAAE,CAAC2kB,UAAH,IAAiB3kB,EAAE,CAAC2kB,UAAH,CAAcuT,QAAnC,EAA6C;AAC3Cl4B,MAAAA,EAAE,CAAC2kB,UAAH,CAAcuT,QAAd,CAAuBj7B,KAAK,CAAClN,GAA7B,IAAoC,IAApC;AACD;;AACD,QAAI8nC,UAAJ,EAAgB;AACd/C,MAAAA,qBAAqB,CAAC90B,EAAD,EAAK4zB,YAAL,CAArB;AACAkB,MAAAA,qBAAqB,CAAC90B,EAAD,EAAK6zB,gBAAL,CAArB;AACD;;AACD,QAAI1sB,EAAE,CAACkvB,SAAP,EAAkB;AAChB,UAAIwB,UAAJ,EAAgB;AACd/C,QAAAA,qBAAqB,CAAC90B,EAAD,EAAK2zB,UAAL,CAArB;AACD;;AACD4E,MAAAA,cAAc,IAAIA,cAAc,CAACv4B,EAAD,CAAhC;AACD,KALD,MAKO;AACLoqB,MAAAA,EAAE;AACFkO,MAAAA,UAAU,IAAIA,UAAU,CAACt4B,EAAD,CAAxB;AACD;;AACDA,IAAAA,EAAE,CAAC6sB,QAAH,GAAc,IAAd;AACD,GAlB0B,CAA3B;;AAoBA,MAAI2L,UAAJ,EAAgB;AACdA,IAAAA,UAAU,CAACE,YAAD,CAAV;AACD,GAFD,MAEO;AACLA,IAAAA,YAAY;AACb;;AAED,WAASA,YAAT,GAAyB;AACvB;AACA,QAAIvxB,EAAE,CAACkvB,SAAP,EAAkB;AAChB;AACD,KAJsB,CAKvB;;;AACA,QAAI,CAACp5B,KAAK,CAAC5B,IAAN,CAAW28B,IAAZ,IAAoBh4B,EAAE,CAAC2kB,UAA3B,EAAuC;AACrC,OAAC3kB,EAAE,CAAC2kB,UAAH,CAAcuT,QAAd,KAA2Bl4B,EAAE,CAAC2kB,UAAH,CAAcuT,QAAd,GAAyB,EAApD,CAAD,EAA2Dj7B,KAAK,CAAClN,GAAjE,IAAyEkN,KAAzE;AACD;;AACDo7B,IAAAA,WAAW,IAAIA,WAAW,CAACr4B,EAAD,CAA1B;;AACA,QAAI63B,UAAJ,EAAgB;AACdjD,MAAAA,kBAAkB,CAAC50B,EAAD,EAAK2zB,UAAL,CAAlB;AACAiB,MAAAA,kBAAkB,CAAC50B,EAAD,EAAK6zB,gBAAL,CAAlB;AACAc,MAAAA,SAAS,CAAC,YAAY;AACpBG,QAAAA,qBAAqB,CAAC90B,EAAD,EAAK2zB,UAAL,CAArB;;AACA,YAAI,CAACxsB,EAAE,CAACkvB,SAAR,EAAmB;AACjBzB,UAAAA,kBAAkB,CAAC50B,EAAD,EAAK4zB,YAAL,CAAlB;;AACA,cAAI,CAACkE,gBAAL,EAAuB;AACrB,gBAAIK,eAAe,CAACM,qBAAD,CAAnB,EAA4C;AAC1ChyB,cAAAA,UAAU,CAACU,EAAD,EAAKsxB,qBAAL,CAAV;AACD,aAFD,MAEO;AACL1D,cAAAA,kBAAkB,CAAC/0B,EAAD,EAAKqB,IAAL,EAAW8F,EAAX,CAAlB;AACD;AACF;AACF;AACF,OAZQ,CAAT;AAaD;;AACDixB,IAAAA,KAAK,IAAIA,KAAK,CAACp4B,EAAD,EAAKmH,EAAL,CAAd;;AACA,QAAI,CAAC0wB,UAAD,IAAe,CAACC,gBAApB,EAAsC;AACpC3wB,MAAAA,EAAE;AACH;AACF;AACF,EAED;;;AACA,SAASywB,aAAT,CAAwBjqC,GAAxB,EAA6B4L,IAA7B,EAAmC0D,KAAnC,EAA0C;AACxC,MAAI,OAAOtP,GAAP,KAAe,QAAnB,EAA6B;AAC3ByK,IAAAA,IAAI,CACF,2BAA2BmB,IAA3B,GAAkC,oCAAlC,GACA,MADA,GACUhL,IAAI,CAACC,SAAL,CAAeb,GAAf,CADV,GACiC,GAF/B,EAGFsP,KAAK,CAACxB,OAHJ,CAAJ;AAKD,GAND,MAMO,IAAI/M,KAAK,CAACf,GAAD,CAAT,EAAgB;AACrByK,IAAAA,IAAI,CACF,2BAA2BmB,IAA3B,GAAkC,qBAAlC,GACA,6CAFE,EAGF0D,KAAK,CAACxB,OAHJ,CAAJ;AAKD;AACF;;AAED,SAAS08B,eAAT,CAA0BxqC,GAA1B,EAA+B;AAC7B,SAAO,OAAOA,GAAP,KAAe,QAAf,IAA2B,CAACe,KAAK,CAACf,GAAD,CAAxC;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASoqC,sBAAT,CAAiC9nC,EAAjC,EAAqC;AACnC,MAAIzD,OAAO,CAACyD,EAAD,CAAX,EAAiB;AACf,WAAO,KAAP;AACD;;AACD,MAAI0oC,UAAU,GAAG1oC,EAAE,CAACqZ,GAApB;;AACA,MAAI3c,KAAK,CAACgsC,UAAD,CAAT,EAAuB;AACrB;AACA,WAAOZ,sBAAsB,CAC3B1pC,KAAK,CAACC,OAAN,CAAcqqC,UAAd,IACIA,UAAU,CAAC,CAAD,CADd,GAEIA,UAHuB,CAA7B;AAKD,GAPD,MAOO;AACL,WAAO,CAAC1oC,EAAE,CAACqB,OAAH,IAAcrB,EAAE,CAACd,MAAlB,IAA4B,CAAnC;AACD;AACF;;AAED,SAASypC,MAAT,CAAiBpoC,CAAjB,EAAoByM,KAApB,EAA2B;AACzB,MAAIA,KAAK,CAAC5B,IAAN,CAAW28B,IAAX,KAAoB,IAAxB,EAA8B;AAC5B7B,IAAAA,KAAK,CAACl5B,KAAD,CAAL;AACD;AACF;;AAED,IAAIwsB,UAAU,GAAG/zB,SAAS,GAAG;AAC3B3G,EAAAA,MAAM,EAAE6pC,MADmB;AAE3BlP,EAAAA,QAAQ,EAAEkP,MAFiB;AAG3BrpC,EAAAA,MAAM,EAAE,SAASqa,SAAT,CAAoB3M,KAApB,EAA2BmtB,EAA3B,EAA+B;AACrC;AACA,QAAIntB,KAAK,CAAC5B,IAAN,CAAW28B,IAAX,KAAoB,IAAxB,EAA8B;AAC5BI,MAAAA,KAAK,CAACn7B,KAAD,EAAQmtB,EAAR,CAAL;AACD,KAFD,MAEO;AACLA,MAAAA,EAAE;AACH;AACF;AAV0B,CAAH,GAWtB,EAXJ;AAaA,IAAIyO,eAAe,GAAG,CACpBtuB,KADoB,EAEpB+kB,KAFoB,EAGpBe,MAHoB,EAIpB9hB,QAJoB,EAKpBiH,KALoB,EAMpBiU,UANoB,CAAtB;AASA;AAEA;AACA;;AACA,IAAIxB,OAAO,GAAG4Q,eAAe,CAAC93B,MAAhB,CAAuBqtB,WAAvB,CAAd;AAEA,IAAI7B,KAAK,GAAGxE,mBAAmB,CAAC;AAAEb,EAAAA,OAAO,EAAEA,OAAX;AAAoBe,EAAAA,OAAO,EAAEA;AAA7B,CAAD,CAA/B;AAEA;AACA;AACA;AACA;;AAEA;;AACA,IAAI7xB,KAAJ,EAAW;AACT;AACA0Q,EAAAA,QAAQ,CAAC7P,gBAAT,CAA0B,iBAA1B,EAA6C,YAAY;AACvD,QAAI+I,EAAE,GAAG8G,QAAQ,CAACmqB,aAAlB;;AACA,QAAIjxB,EAAE,IAAIA,EAAE,CAAC84B,MAAb,EAAqB;AACnBC,MAAAA,OAAO,CAAC/4B,EAAD,EAAK,OAAL,CAAP;AACD;AACF,GALD;AAMD;;AAED,IAAIg5B,SAAS,GAAG;AACdj7B,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAmBiC,EAAnB,EAAuBi5B,OAAvB,EAAgCh8B,KAAhC,EAAuC6V,QAAvC,EAAiD;AACzD,QAAI7V,KAAK,CAAC7B,GAAN,KAAc,QAAlB,EAA4B;AAC1B;AACA,UAAI0X,QAAQ,CAACtX,GAAT,IAAgB,CAACsX,QAAQ,CAACtX,GAAT,CAAa09B,SAAlC,EAA6C;AAC3CjvB,QAAAA,cAAc,CAAChN,KAAD,EAAQ,WAAR,EAAqB,YAAY;AAC7C+7B,UAAAA,SAAS,CAAClL,gBAAV,CAA2B9tB,EAA3B,EAA+Bi5B,OAA/B,EAAwCh8B,KAAxC;AACD,SAFa,CAAd;AAGD,OAJD,MAIO;AACLk8B,QAAAA,WAAW,CAACn5B,EAAD,EAAKi5B,OAAL,EAAch8B,KAAK,CAACxB,OAApB,CAAX;AACD;;AACDuE,MAAAA,EAAE,CAACk5B,SAAH,GAAe,GAAGpqC,GAAH,CAAOxB,IAAP,CAAY0S,EAAE,CAAC9G,OAAf,EAAwBkgC,QAAxB,CAAf;AACD,KAVD,MAUO,IAAIn8B,KAAK,CAAC7B,GAAN,KAAc,UAAd,IAA4ByqB,eAAe,CAAC7lB,EAAE,CAACqB,IAAJ,CAA/C,EAA0D;AAC/DrB,MAAAA,EAAE,CAACkxB,WAAH,GAAiB+H,OAAO,CAAChL,SAAzB;;AACA,UAAI,CAACgL,OAAO,CAAChL,SAAR,CAAkB7Q,IAAvB,EAA6B;AAC3Bpd,QAAAA,EAAE,CAAC/I,gBAAH,CAAoB,kBAApB,EAAwCoiC,kBAAxC;AACAr5B,QAAAA,EAAE,CAAC/I,gBAAH,CAAoB,gBAApB,EAAsCqiC,gBAAtC,EAF2B,CAG3B;AACA;AACA;AACA;;AACAt5B,QAAAA,EAAE,CAAC/I,gBAAH,CAAoB,QAApB,EAA8BqiC,gBAA9B;AACA;;AACA,YAAIljC,KAAJ,EAAW;AACT4J,UAAAA,EAAE,CAAC84B,MAAH,GAAY,IAAZ;AACD;AACF;AACF;AACF,GA5Ba;AA8BdhL,EAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA2B9tB,EAA3B,EAA+Bi5B,OAA/B,EAAwCh8B,KAAxC,EAA+C;AAC/D,QAAIA,KAAK,CAAC7B,GAAN,KAAc,QAAlB,EAA4B;AAC1B+9B,MAAAA,WAAW,CAACn5B,EAAD,EAAKi5B,OAAL,EAAch8B,KAAK,CAACxB,OAApB,CAAX,CAD0B,CAE1B;AACA;AACA;AACA;;AACA,UAAI89B,WAAW,GAAGv5B,EAAE,CAACk5B,SAArB;AACA,UAAIM,UAAU,GAAGx5B,EAAE,CAACk5B,SAAH,GAAe,GAAGpqC,GAAH,CAAOxB,IAAP,CAAY0S,EAAE,CAAC9G,OAAf,EAAwBkgC,QAAxB,CAAhC;;AACA,UAAII,UAAU,CAACr0B,IAAX,CAAgB,UAAUs0B,CAAV,EAAavqC,CAAb,EAAgB;AAAE,eAAO,CAACoD,UAAU,CAACmnC,CAAD,EAAIF,WAAW,CAACrqC,CAAD,CAAf,CAAlB;AAAwC,OAA1E,CAAJ,EAAiF;AAC/E;AACA;AACA,YAAIwqC,SAAS,GAAG15B,EAAE,CAACmmB,QAAH,GACZ8S,OAAO,CAAClsC,KAAR,CAAcoY,IAAd,CAAmB,UAAU1Y,CAAV,EAAa;AAAE,iBAAOktC,mBAAmB,CAACltC,CAAD,EAAI+sC,UAAJ,CAA1B;AAA4C,SAA9E,CADY,GAEZP,OAAO,CAAClsC,KAAR,KAAkBksC,OAAO,CAACpb,QAA1B,IAAsC8b,mBAAmB,CAACV,OAAO,CAAClsC,KAAT,EAAgBysC,UAAhB,CAF7D;;AAGA,YAAIE,SAAJ,EAAe;AACbX,UAAAA,OAAO,CAAC/4B,EAAD,EAAK,QAAL,CAAP;AACD;AACF;AACF;AACF;AAlDa,CAAhB;;AAqDA,SAASm5B,WAAT,CAAsBn5B,EAAtB,EAA0Bi5B,OAA1B,EAAmCpgC,EAAnC,EAAuC;AACrC+gC,EAAAA,mBAAmB,CAAC55B,EAAD,EAAKi5B,OAAL,EAAcpgC,EAAd,CAAnB;AACA;;AACA,MAAI1C,IAAI,IAAIE,MAAZ,EAAoB;AAClBoQ,IAAAA,UAAU,CAAC,YAAY;AACrBmzB,MAAAA,mBAAmB,CAAC55B,EAAD,EAAKi5B,OAAL,EAAcpgC,EAAd,CAAnB;AACD,KAFS,EAEP,CAFO,CAAV;AAGD;AACF;;AAED,SAAS+gC,mBAAT,CAA8B55B,EAA9B,EAAkCi5B,OAAlC,EAA2CpgC,EAA3C,EAA+C;AAC7C,MAAI9L,KAAK,GAAGksC,OAAO,CAAClsC,KAApB;AACA,MAAI8sC,UAAU,GAAG75B,EAAE,CAACmmB,QAApB;;AACA,MAAI0T,UAAU,IAAI,CAACxrC,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAnB,EAAyC;AACvC,sBAAyB,YAAzB,IAAyCqL,IAAI,CAC3C,gCAAiC6gC,OAAO,CAACxc,UAAzC,GAAuD,MAAvD,GACA,kDADA,GACsDnwB,MAAM,CAACa,SAAP,CAAiBC,QAAjB,CAA0BE,IAA1B,CAA+BP,KAA/B,EAAsCQ,KAAtC,CAA4C,CAA5C,EAA+C,CAAC,CAAhD,CAFX,EAG3CsL,EAH2C,CAA7C;AAKA;AACD;;AACD,MAAIktB,QAAJ,EAAc+T,MAAd;;AACA,OAAK,IAAI5qC,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG6O,EAAE,CAAC9G,OAAH,CAAW/J,MAA/B,EAAuCD,CAAC,GAAGiC,CAA3C,EAA8CjC,CAAC,EAA/C,EAAmD;AACjD4qC,IAAAA,MAAM,GAAG95B,EAAE,CAAC9G,OAAH,CAAWhK,CAAX,CAAT;;AACA,QAAI2qC,UAAJ,EAAgB;AACd9T,MAAAA,QAAQ,GAAG7yB,YAAY,CAACnG,KAAD,EAAQqsC,QAAQ,CAACU,MAAD,CAAhB,CAAZ,GAAwC,CAAC,CAApD;;AACA,UAAIA,MAAM,CAAC/T,QAAP,KAAoBA,QAAxB,EAAkC;AAChC+T,QAAAA,MAAM,CAAC/T,QAAP,GAAkBA,QAAlB;AACD;AACF,KALD,MAKO;AACL,UAAIzzB,UAAU,CAAC8mC,QAAQ,CAACU,MAAD,CAAT,EAAmB/sC,KAAnB,CAAd,EAAyC;AACvC,YAAIiT,EAAE,CAAC+5B,aAAH,KAAqB7qC,CAAzB,EAA4B;AAC1B8Q,UAAAA,EAAE,CAAC+5B,aAAH,GAAmB7qC,CAAnB;AACD;;AACD;AACD;AACF;AACF;;AACD,MAAI,CAAC2qC,UAAL,EAAiB;AACf75B,IAAAA,EAAE,CAAC+5B,aAAH,GAAmB,CAAC,CAApB;AACD;AACF;;AAED,SAASJ,mBAAT,CAA8B5sC,KAA9B,EAAqCmM,OAArC,EAA8C;AAC5C,SAAOA,OAAO,CAACvG,KAAR,CAAc,UAAU8mC,CAAV,EAAa;AAAE,WAAO,CAACnnC,UAAU,CAACmnC,CAAD,EAAI1sC,KAAJ,CAAlB;AAA+B,GAA5D,CAAP;AACD;;AAED,SAASqsC,QAAT,CAAmBU,MAAnB,EAA2B;AACzB,SAAO,YAAYA,MAAZ,GACHA,MAAM,CAACrJ,MADJ,GAEHqJ,MAAM,CAAC/sC,KAFX;AAGD;;AAED,SAASssC,kBAAT,CAA6BzmC,CAA7B,EAAgC;AAC9BA,EAAAA,CAAC,CAAC8H,MAAF,CAASm2B,SAAT,GAAqB,IAArB;AACD;;AAED,SAASyI,gBAAT,CAA2B1mC,CAA3B,EAA8B;AAC5B;AACA,MAAI,CAACA,CAAC,CAAC8H,MAAF,CAASm2B,SAAd,EAAyB;AAAE;AAAQ;;AACnCj+B,EAAAA,CAAC,CAAC8H,MAAF,CAASm2B,SAAT,GAAqB,KAArB;AACAkI,EAAAA,OAAO,CAACnmC,CAAC,CAAC8H,MAAH,EAAW,OAAX,CAAP;AACD;;AAED,SAASq+B,OAAT,CAAkB/4B,EAAlB,EAAsBqB,IAAtB,EAA4B;AAC1B,MAAIzO,CAAC,GAAGkU,QAAQ,CAACqV,WAAT,CAAqB,YAArB,CAAR;AACAvpB,EAAAA,CAAC,CAAConC,SAAF,CAAY34B,IAAZ,EAAkB,IAAlB,EAAwB,IAAxB;AACArB,EAAAA,EAAE,CAACi6B,aAAH,CAAiBrnC,CAAjB;AACD;AAED;AAEA;;;AACA,SAASsnC,UAAT,CAAqBj9B,KAArB,EAA4B;AAC1B,SAAOA,KAAK,CAACjB,iBAAN,KAA4B,CAACiB,KAAK,CAAC5B,IAAP,IAAe,CAAC4B,KAAK,CAAC5B,IAAN,CAAWouB,UAAvD,IACHyQ,UAAU,CAACj9B,KAAK,CAACjB,iBAAN,CAAwB2Z,MAAzB,CADP,GAEH1Y,KAFJ;AAGD;;AAED,IAAI+6B,IAAI,GAAG;AACTxmC,EAAAA,IAAI,EAAE,SAASA,IAAT,CAAewO,EAAf,EAAmBsW,GAAnB,EAAwBrZ,KAAxB,EAA+B;AACnC,QAAIlQ,KAAK,GAAGupB,GAAG,CAACvpB,KAAhB;AAEAkQ,IAAAA,KAAK,GAAGi9B,UAAU,CAACj9B,KAAD,CAAlB;AACA,QAAIk9B,aAAa,GAAGl9B,KAAK,CAAC5B,IAAN,IAAc4B,KAAK,CAAC5B,IAAN,CAAWouB,UAA7C;AACA,QAAI2Q,eAAe,GAAGp6B,EAAE,CAACq6B,kBAAH,GACpBr6B,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,KAAqB,MAArB,GAA8B,EAA9B,GAAmCt6B,EAAE,CAACwV,KAAH,CAAS8kB,OAD9C;;AAEA,QAAIvtC,KAAK,IAAIotC,aAAb,EAA4B;AAC1Bl9B,MAAAA,KAAK,CAAC5B,IAAN,CAAW28B,IAAX,GAAkB,IAAlB;AACA7B,MAAAA,KAAK,CAACl5B,KAAD,EAAQ,YAAY;AACvB+C,QAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmBF,eAAnB;AACD,OAFI,CAAL;AAGD,KALD,MAKO;AACLp6B,MAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmBvtC,KAAK,GAAGqtC,eAAH,GAAqB,MAA7C;AACD;AACF,GAhBQ;AAkBTt/B,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiBkF,EAAjB,EAAqBsW,GAArB,EAA0BrZ,KAA1B,EAAiC;AACvC,QAAIlQ,KAAK,GAAGupB,GAAG,CAACvpB,KAAhB;AACA,QAAI8wB,QAAQ,GAAGvH,GAAG,CAACuH,QAAnB;AAEA;;AACA,QAAI,CAAC9wB,KAAD,KAAW,CAAC8wB,QAAhB,EAA0B;AAAE;AAAQ;;AACpC5gB,IAAAA,KAAK,GAAGi9B,UAAU,CAACj9B,KAAD,CAAlB;AACA,QAAIk9B,aAAa,GAAGl9B,KAAK,CAAC5B,IAAN,IAAc4B,KAAK,CAAC5B,IAAN,CAAWouB,UAA7C;;AACA,QAAI0Q,aAAJ,EAAmB;AACjBl9B,MAAAA,KAAK,CAAC5B,IAAN,CAAW28B,IAAX,GAAkB,IAAlB;;AACA,UAAIjrC,KAAJ,EAAW;AACTopC,QAAAA,KAAK,CAACl5B,KAAD,EAAQ,YAAY;AACvB+C,UAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmBt6B,EAAE,CAACq6B,kBAAtB;AACD,SAFI,CAAL;AAGD,OAJD,MAIO;AACLjC,QAAAA,KAAK,CAACn7B,KAAD,EAAQ,YAAY;AACvB+C,UAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmB,MAAnB;AACD,SAFI,CAAL;AAGD;AACF,KAXD,MAWO;AACLt6B,MAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmBvtC,KAAK,GAAGiT,EAAE,CAACq6B,kBAAN,GAA2B,MAAnD;AACD;AACF,GAxCQ;AA0CTE,EAAAA,MAAM,EAAE,SAASA,MAAT,CACNv6B,EADM,EAENi5B,OAFM,EAGNh8B,KAHM,EAIN6V,QAJM,EAKNqa,SALM,EAMN;AACA,QAAI,CAACA,SAAL,EAAgB;AACdntB,MAAAA,EAAE,CAACwV,KAAH,CAAS8kB,OAAT,GAAmBt6B,EAAE,CAACq6B,kBAAtB;AACD;AACF;AApDQ,CAAX;AAuDA,IAAIG,kBAAkB,GAAG;AACvB1mB,EAAAA,KAAK,EAAEklB,SADgB;AAEvBhB,EAAAA,IAAI,EAAEA;AAFiB,CAAzB;AAKA;;AAEA,IAAIyC,eAAe,GAAG;AACpBlhC,EAAAA,IAAI,EAAEzL,MADc;AAEpBgpC,EAAAA,MAAM,EAAEvzB,OAFY;AAGpB+vB,EAAAA,GAAG,EAAE/vB,OAHe;AAIpBm3B,EAAAA,IAAI,EAAE5sC,MAJc;AAKpBuT,EAAAA,IAAI,EAAEvT,MALc;AAMpB0lC,EAAAA,UAAU,EAAE1lC,MANQ;AAOpB6lC,EAAAA,UAAU,EAAE7lC,MAPQ;AAQpB2lC,EAAAA,YAAY,EAAE3lC,MARM;AASpB8lC,EAAAA,YAAY,EAAE9lC,MATM;AAUpB4lC,EAAAA,gBAAgB,EAAE5lC,MAVE;AAWpB+lC,EAAAA,gBAAgB,EAAE/lC,MAXE;AAYpByoC,EAAAA,WAAW,EAAEzoC,MAZO;AAapB2oC,EAAAA,iBAAiB,EAAE3oC,MAbC;AAcpB0oC,EAAAA,aAAa,EAAE1oC,MAdK;AAepBmpC,EAAAA,QAAQ,EAAE,CAAChyB,MAAD,EAASnX,MAAT,EAAiBxB,MAAjB;AAfU,CAAtB,EAkBA;AACA;;AACA,SAASquC,YAAT,CAAuB19B,KAAvB,EAA8B;AAC5B,MAAI29B,WAAW,GAAG39B,KAAK,IAAIA,KAAK,CAACvB,gBAAjC;;AACA,MAAIk/B,WAAW,IAAIA,WAAW,CAACnjC,IAAZ,CAAiByB,OAAjB,CAAyBgb,QAA5C,EAAsD;AACpD,WAAOymB,YAAY,CAAC1iB,sBAAsB,CAAC2iB,WAAW,CAACt/B,QAAb,CAAvB,CAAnB;AACD,GAFD,MAEO;AACL,WAAO2B,KAAP;AACD;AACF;;AAED,SAAS49B,qBAAT,CAAgCpkB,IAAhC,EAAsC;AACpC,MAAIpb,IAAI,GAAG,EAAX;AACA,MAAInC,OAAO,GAAGud,IAAI,CAACpd,QAAnB,CAFoC,CAGpC;;AACA,OAAK,IAAItJ,GAAT,IAAgBmJ,OAAO,CAAC+G,SAAxB,EAAmC;AACjC5E,IAAAA,IAAI,CAACtL,GAAD,CAAJ,GAAY0mB,IAAI,CAAC1mB,GAAD,CAAhB;AACD,GANmC,CAOpC;AACA;;;AACA,MAAIuhB,SAAS,GAAGpY,OAAO,CAAC8c,gBAAxB;;AACA,OAAK,IAAI1U,KAAT,IAAkBgQ,SAAlB,EAA6B;AAC3BjW,IAAAA,IAAI,CAAC/K,QAAQ,CAACgR,KAAD,CAAT,CAAJ,GAAwBgQ,SAAS,CAAChQ,KAAD,CAAjC;AACD;;AACD,SAAOjG,IAAP;AACD;;AAED,SAASy/B,WAAT,CAAsBC,CAAtB,EAAyBC,QAAzB,EAAmC;AACjC,MAAI,iBAAiBzlC,IAAjB,CAAsBylC,QAAQ,CAAC5/B,GAA/B,CAAJ,EAAyC;AACvC,WAAO2/B,CAAC,CAAC,YAAD,EAAe;AACrBx5B,MAAAA,KAAK,EAAEy5B,QAAQ,CAACt/B,gBAAT,CAA0BuE;AADZ,KAAf,CAAR;AAGD;AACF;;AAED,SAASg7B,mBAAT,CAA8Bh+B,KAA9B,EAAqC;AACnC,SAAQA,KAAK,GAAGA,KAAK,CAAChB,MAAtB,EAA+B;AAC7B,QAAIgB,KAAK,CAAC5B,IAAN,CAAWouB,UAAf,EAA2B;AACzB,aAAO,IAAP;AACD;AACF;AACF;;AAED,SAASyR,WAAT,CAAsBv+B,KAAtB,EAA6Bw+B,QAA7B,EAAuC;AACrC,SAAOA,QAAQ,CAACprC,GAAT,KAAiB4M,KAAK,CAAC5M,GAAvB,IAA8BorC,QAAQ,CAAC//B,GAAT,KAAiBuB,KAAK,CAACvB,GAA5D;AACD;;AAED,IAAIggC,aAAa,GAAG,UAAU3qC,CAAV,EAAa;AAAE,SAAOA,CAAC,CAAC2K,GAAF,IAASqB,kBAAkB,CAAChM,CAAD,CAAlC;AAAwC,CAA3E;;AAEA,IAAI4qC,gBAAgB,GAAG,UAAU1pB,CAAV,EAAa;AAAE,SAAOA,CAAC,CAACpY,IAAF,KAAW,MAAlB;AAA2B,CAAjE;;AAEA,IAAI+hC,UAAU,GAAG;AACf/hC,EAAAA,IAAI,EAAE,YADS;AAEfgI,EAAAA,KAAK,EAAEk5B,eAFQ;AAGfvmB,EAAAA,QAAQ,EAAE,IAHK;AAKfjM,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiB8yB,CAAjB,EAAoB;AAC1B,QAAI/pB,MAAM,GAAG,IAAb;AAEA,QAAI1V,QAAQ,GAAG,KAAKiS,MAAL,CAAY3J,OAA3B;;AACA,QAAI,CAACtI,QAAL,EAAe;AACb;AACD,KANyB,CAQ1B;;;AACAA,IAAAA,QAAQ,GAAGA,QAAQ,CAACmnB,MAAT,CAAgB2Y,aAAhB,CAAX;AACA;;AACA,QAAI,CAAC9/B,QAAQ,CAACnM,MAAd,EAAsB;AACpB;AACD,KAbyB,CAe1B;;;AACA,QAAI,kBAAyB,YAAzB,IAAyCmM,QAAQ,CAACnM,MAAT,GAAkB,CAA/D,EAAkE;AAChEiJ,MAAAA,IAAI,CACF,4DACA,+BAFE,EAGF,KAAKwB,OAHH,CAAJ;AAKD;;AAED,QAAI8gC,IAAI,GAAG,KAAKA,IAAhB,CAxB0B,CA0B1B;;AACA,QAAI,kBAAyB,YAAzB,IACFA,IADE,IACMA,IAAI,KAAK,QADf,IAC2BA,IAAI,KAAK,QADxC,EAEE;AACAtiC,MAAAA,IAAI,CACF,gCAAgCsiC,IAD9B,EAEF,KAAK9gC,OAFH,CAAJ;AAID;;AAED,QAAIohC,QAAQ,GAAG1/B,QAAQ,CAAC,CAAD,CAAvB,CApC0B,CAsC1B;AACA;;AACA,QAAI2/B,mBAAmB,CAAC,KAAK9lB,MAAN,CAAvB,EAAsC;AACpC,aAAO6lB,QAAP;AACD,KA1CyB,CA4C1B;AACA;;;AACA,QAAIr+B,KAAK,GAAGg+B,YAAY,CAACK,QAAD,CAAxB;AACA;;AACA,QAAI,CAACr+B,KAAL,EAAY;AACV,aAAOq+B,QAAP;AACD;;AAED,QAAI,KAAKO,QAAT,EAAmB;AACjB,aAAOT,WAAW,CAACC,CAAD,EAAIC,QAAJ,CAAlB;AACD,KAtDyB,CAwD1B;AACA;AACA;;;AACA,QAAI5gC,EAAE,GAAG,kBAAmB,KAAKsgB,IAAxB,GAAgC,GAAzC;AACA/d,IAAAA,KAAK,CAAC5M,GAAN,GAAY4M,KAAK,CAAC5M,GAAN,IAAa,IAAb,GACR4M,KAAK,CAACN,SAAN,GACEjC,EAAE,GAAG,SADP,GAEEA,EAAE,GAAGuC,KAAK,CAACvB,GAHL,GAIRtO,WAAW,CAAC6P,KAAK,CAAC5M,GAAP,CAAX,GACGjC,MAAM,CAAC6O,KAAK,CAAC5M,GAAP,CAAN,CAAkBJ,OAAlB,CAA0ByK,EAA1B,MAAkC,CAAlC,GAAsCuC,KAAK,CAAC5M,GAA5C,GAAkDqK,EAAE,GAAGuC,KAAK,CAAC5M,GADhE,GAEE4M,KAAK,CAAC5M,GANZ;AAQA,QAAIsL,IAAI,GAAG,CAACsB,KAAK,CAACtB,IAAN,KAAesB,KAAK,CAACtB,IAAN,GAAa,EAA5B,CAAD,EAAkCouB,UAAlC,GAA+CoR,qBAAqB,CAAC,IAAD,CAA/E;AACA,QAAIW,WAAW,GAAG,KAAK7lB,MAAvB;AACA,QAAIwlB,QAAQ,GAAGR,YAAY,CAACa,WAAD,CAA3B,CAtE0B,CAwE1B;AACA;;AACA,QAAI7+B,KAAK,CAACtB,IAAN,CAAW+G,UAAX,IAAyBzF,KAAK,CAACtB,IAAN,CAAW+G,UAAX,CAAsB+C,IAAtB,CAA2Bk2B,gBAA3B,CAA7B,EAA2E;AACzE1+B,MAAAA,KAAK,CAACtB,IAAN,CAAW28B,IAAX,GAAkB,IAAlB;AACD;;AAED,QACEmD,QAAQ,IACRA,QAAQ,CAAC9/B,IADT,IAEA,CAAC6/B,WAAW,CAACv+B,KAAD,EAAQw+B,QAAR,CAFZ,IAGA,CAAC1+B,kBAAkB,CAAC0+B,QAAD,CAHnB,IAIA;AACA,MAAEA,QAAQ,CAACn/B,iBAAT,IAA8Bm/B,QAAQ,CAACn/B,iBAAT,CAA2B2Z,MAA3B,CAAkCtZ,SAAlE,CANF,EAOE;AACA;AACA;AACA,UAAI4yB,OAAO,GAAGkM,QAAQ,CAAC9/B,IAAT,CAAcouB,UAAd,GAA2B53B,MAAM,CAAC,EAAD,EAAKwJ,IAAL,CAA/C,CAHA,CAIA;;AACA,UAAIq/B,IAAI,KAAK,QAAb,EAAuB;AACrB;AACA,aAAKa,QAAL,GAAgB,IAAhB;AACAtxB,QAAAA,cAAc,CAACglB,OAAD,EAAU,YAAV,EAAwB,YAAY;AAChDje,UAAAA,MAAM,CAACuqB,QAAP,GAAkB,KAAlB;AACAvqB,UAAAA,MAAM,CAAC0G,YAAP;AACD,SAHa,CAAd;AAIA,eAAOojB,WAAW,CAACC,CAAD,EAAIC,QAAJ,CAAlB;AACD,OARD,MAQO,IAAIN,IAAI,KAAK,QAAb,EAAuB;AAC5B,YAAIj+B,kBAAkB,CAACE,KAAD,CAAtB,EAA+B;AAC7B,iBAAO6+B,WAAP;AACD;;AACD,YAAIC,YAAJ;;AACA,YAAI/C,YAAY,GAAG,YAAY;AAAE+C,UAAAA,YAAY;AAAK,SAAlD;;AACAxxB,QAAAA,cAAc,CAAC5O,IAAD,EAAO,YAAP,EAAqBq9B,YAArB,CAAd;AACAzuB,QAAAA,cAAc,CAAC5O,IAAD,EAAO,gBAAP,EAAyBq9B,YAAzB,CAAd;AACAzuB,QAAAA,cAAc,CAACglB,OAAD,EAAU,YAAV,EAAwB,UAAUmJ,KAAV,EAAiB;AAAEqD,UAAAA,YAAY,GAAGrD,KAAf;AAAuB,SAAlE,CAAd;AACD;AACF;;AAED,WAAO4C,QAAP;AACD;AApHc,CAAjB;AAuHA;;AAEA,IAAIz5B,KAAK,GAAG1P,MAAM,CAAC;AACjBuJ,EAAAA,GAAG,EAAEtN,MADY;AAEjB4tC,EAAAA,SAAS,EAAE5tC;AAFM,CAAD,EAGf2sC,eAHe,CAAlB;AAKA,OAAOl5B,KAAK,CAACm5B,IAAb;AAEA,IAAIiB,eAAe,GAAG;AACpBp6B,EAAAA,KAAK,EAAEA,KADa;AAGpBq6B,EAAAA,WAAW,EAAE,SAASA,WAAT,GAAwB;AACnC,QAAI5qB,MAAM,GAAG,IAAb;AAEA,QAAIlW,MAAM,GAAG,KAAK8e,OAAlB;;AACA,SAAKA,OAAL,GAAe,UAAU3c,KAAV,EAAiBqV,SAAjB,EAA4B;AACzC,UAAI0H,qBAAqB,GAAGd,iBAAiB,CAAClI,MAAD,CAA7C,CADyC,CAEzC;;AACAA,MAAAA,MAAM,CAACiJ,SAAP,CACEjJ,MAAM,CAAC2E,MADT,EAEE3E,MAAM,CAAC6qB,IAFT,EAGE,KAHF,EAGS;AACP,UAJF,CAIO;AAJP;;AAMA7qB,MAAAA,MAAM,CAAC2E,MAAP,GAAgB3E,MAAM,CAAC6qB,IAAvB;AACA7hB,MAAAA,qBAAqB;AACrBlf,MAAAA,MAAM,CAACxN,IAAP,CAAY0jB,MAAZ,EAAoB/T,KAApB,EAA2BqV,SAA3B;AACD,KAZD;AAaD,GApBmB;AAsBpBrK,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAiB8yB,CAAjB,EAAoB;AAC1B,QAAI3/B,GAAG,GAAG,KAAKA,GAAL,IAAY,KAAK+Z,MAAL,CAAY9Z,IAAZ,CAAiBD,GAA7B,IAAoC,MAA9C;AACA,QAAItM,GAAG,GAAGxC,MAAM,CAACyC,MAAP,CAAc,IAAd,CAAV;AACA,QAAI+sC,YAAY,GAAG,KAAKA,YAAL,GAAoB,KAAKxgC,QAA5C;AACA,QAAIygC,WAAW,GAAG,KAAKxuB,MAAL,CAAY3J,OAAZ,IAAuB,EAAzC;AACA,QAAItI,QAAQ,GAAG,KAAKA,QAAL,GAAgB,EAA/B;AACA,QAAI0gC,cAAc,GAAGnB,qBAAqB,CAAC,IAAD,CAA1C;;AAEA,SAAK,IAAI3rC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6sC,WAAW,CAAC5sC,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,UAAIuB,CAAC,GAAGsrC,WAAW,CAAC7sC,CAAD,CAAnB;;AACA,UAAIuB,CAAC,CAAC2K,GAAN,EAAW;AACT,YAAI3K,CAAC,CAACV,GAAF,IAAS,IAAT,IAAiBjC,MAAM,CAAC2C,CAAC,CAACV,GAAH,CAAN,CAAcJ,OAAd,CAAsB,SAAtB,MAAqC,CAA1D,EAA6D;AAC3D2L,UAAAA,QAAQ,CAACtB,IAAT,CAAcvJ,CAAd;AACA3B,UAAAA,GAAG,CAAC2B,CAAC,CAACV,GAAH,CAAH,GAAaU,CAAb;AACC,WAACA,CAAC,CAAC4K,IAAF,KAAW5K,CAAC,CAAC4K,IAAF,GAAS,EAApB,CAAD,EAA0BouB,UAA1B,GAAuCuS,cAAvC;AACF,SAJD,MAIO,IAAI,kBAAyB,YAA7B,EAA2C;AAChD,cAAIjlC,IAAI,GAAGtG,CAAC,CAACiL,gBAAb;AACA,cAAInC,IAAI,GAAGxC,IAAI,GAAIA,IAAI,CAACU,IAAL,CAAUyB,OAAV,CAAkBK,IAAlB,IAA0BxC,IAAI,CAACqE,GAA/B,IAAsC,EAA1C,GAAgD3K,CAAC,CAAC2K,GAAjE;AACAhD,UAAAA,IAAI,CAAE,iDAAiDmB,IAAjD,GAAwD,GAA1D,CAAJ;AACD;AACF;AACF;;AAED,QAAIuiC,YAAJ,EAAkB;AAChB,UAAID,IAAI,GAAG,EAAX;AACA,UAAII,OAAO,GAAG,EAAd;;AACA,WAAK,IAAInjB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGgjB,YAAY,CAAC3sC,MAArC,EAA6C2pB,GAAG,EAAhD,EAAoD;AAClD,YAAIojB,GAAG,GAAGJ,YAAY,CAAChjB,GAAD,CAAtB;AACAojB,QAAAA,GAAG,CAAC7gC,IAAJ,CAASouB,UAAT,GAAsBuS,cAAtB;AACAE,QAAAA,GAAG,CAAC7gC,IAAJ,CAAS8gC,GAAT,GAAeD,GAAG,CAAC1gC,GAAJ,CAAQ4gC,qBAAR,EAAf;;AACA,YAAIttC,GAAG,CAACotC,GAAG,CAACnsC,GAAL,CAAP,EAAkB;AAChB8rC,UAAAA,IAAI,CAAC7hC,IAAL,CAAUkiC,GAAV;AACD,SAFD,MAEO;AACLD,UAAAA,OAAO,CAACjiC,IAAR,CAAakiC,GAAb;AACD;AACF;;AACD,WAAKL,IAAL,GAAYd,CAAC,CAAC3/B,GAAD,EAAM,IAAN,EAAYygC,IAAZ,CAAb;AACA,WAAKI,OAAL,GAAeA,OAAf;AACD;;AAED,WAAOlB,CAAC,CAAC3/B,GAAD,EAAM,IAAN,EAAYE,QAAZ,CAAR;AACD,GA/DmB;AAiEpB+gC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAoB;AAC3B,QAAI/gC,QAAQ,GAAG,KAAKwgC,YAApB;AACA,QAAIJ,SAAS,GAAG,KAAKA,SAAL,IAAmB,CAAC,KAAKniC,IAAL,IAAa,GAAd,IAAqB,OAAxD;;AACA,QAAI,CAAC+B,QAAQ,CAACnM,MAAV,IAAoB,CAAC,KAAKmtC,OAAL,CAAahhC,QAAQ,CAAC,CAAD,CAAR,CAAYE,GAAzB,EAA8BkgC,SAA9B,CAAzB,EAAmE;AACjE;AACD,KAL0B,CAO3B;AACA;;;AACApgC,IAAAA,QAAQ,CAACgC,OAAT,CAAiBi/B,cAAjB;AACAjhC,IAAAA,QAAQ,CAACgC,OAAT,CAAiBk/B,cAAjB;AACAlhC,IAAAA,QAAQ,CAACgC,OAAT,CAAiBm/B,gBAAjB,EAX2B,CAa3B;AACA;AACA;;AACA,SAAKC,OAAL,GAAe51B,QAAQ,CAAC61B,IAAT,CAAcC,YAA7B;AAEAthC,IAAAA,QAAQ,CAACgC,OAAT,CAAiB,UAAU7M,CAAV,EAAa;AAC5B,UAAIA,CAAC,CAAC4K,IAAF,CAAOwhC,KAAX,EAAkB;AAChB,YAAI78B,EAAE,GAAGvP,CAAC,CAAC+K,GAAX;AACA,YAAI06B,CAAC,GAAGl2B,EAAE,CAACwV,KAAX;AACAof,QAAAA,kBAAkB,CAAC50B,EAAD,EAAK07B,SAAL,CAAlB;AACAxF,QAAAA,CAAC,CAAC4G,SAAF,GAAc5G,CAAC,CAAC6G,eAAF,GAAoB7G,CAAC,CAAC8G,kBAAF,GAAuB,EAAzD;AACAh9B,QAAAA,EAAE,CAAC/I,gBAAH,CAAoBi9B,kBAApB,EAAwCl0B,EAAE,CAACi9B,OAAH,GAAa,SAAS91B,EAAT,CAAavU,CAAb,EAAgB;AACnE,cAAIA,CAAC,IAAIA,CAAC,CAAC8H,MAAF,KAAasF,EAAtB,EAA0B;AACxB;AACD;;AACD,cAAI,CAACpN,CAAD,IAAM,aAAa2C,IAAb,CAAkB3C,CAAC,CAACsqC,YAApB,CAAV,EAA6C;AAC3Cl9B,YAAAA,EAAE,CAAC+uB,mBAAH,CAAuBmF,kBAAvB,EAA2C/sB,EAA3C;AACAnH,YAAAA,EAAE,CAACi9B,OAAH,GAAa,IAAb;AACAnI,YAAAA,qBAAqB,CAAC90B,EAAD,EAAK07B,SAAL,CAArB;AACD;AACF,SATD;AAUD;AACF,KAjBD;AAkBD,GArGmB;AAuGpBl6B,EAAAA,OAAO,EAAE;AACP86B,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAkBt8B,EAAlB,EAAsB07B,SAAtB,EAAiC;AACxC;AACA,UAAI,CAAC5H,aAAL,EAAoB;AAClB,eAAO,KAAP;AACD;AACD;;;AACA,UAAI,KAAKqJ,QAAT,EAAmB;AACjB,eAAO,KAAKA,QAAZ;AACD,OARuC,CASxC;AACA;AACA;AACA;AACA;;;AACA,UAAIjrB,KAAK,GAAGlS,EAAE,CAACo9B,SAAH,EAAZ;;AACA,UAAIp9B,EAAE,CAACovB,kBAAP,EAA2B;AACzBpvB,QAAAA,EAAE,CAACovB,kBAAH,CAAsB9xB,OAAtB,CAA8B,UAAU4xB,GAAV,EAAe;AAAEiE,UAAAA,WAAW,CAACjhB,KAAD,EAAQgd,GAAR,CAAX;AAA0B,SAAzE;AACD;;AACD8D,MAAAA,QAAQ,CAAC9gB,KAAD,EAAQwpB,SAAR,CAAR;AACAxpB,MAAAA,KAAK,CAACsD,KAAN,CAAY8kB,OAAZ,GAAsB,MAAtB;AACA,WAAKxgB,GAAL,CAAS8M,WAAT,CAAqB1U,KAArB;AACA,UAAI3M,IAAI,GAAGyvB,iBAAiB,CAAC9iB,KAAD,CAA5B;AACA,WAAK4H,GAAL,CAAS6M,WAAT,CAAqBzU,KAArB;AACA,aAAQ,KAAKirB,QAAL,GAAgB53B,IAAI,CAACuwB,YAA7B;AACD;AAzBM;AAvGW,CAAtB;;AAoIA,SAASyG,cAAT,CAAyB9rC,CAAzB,EAA4B;AAC1B;AACA,MAAIA,CAAC,CAAC+K,GAAF,CAAMyhC,OAAV,EAAmB;AACjBxsC,IAAAA,CAAC,CAAC+K,GAAF,CAAMyhC,OAAN;AACD;AACD;;;AACA,MAAIxsC,CAAC,CAAC+K,GAAF,CAAM86B,QAAV,EAAoB;AAClB7lC,IAAAA,CAAC,CAAC+K,GAAF,CAAM86B,QAAN;AACD;AACF;;AAED,SAASkG,cAAT,CAAyB/rC,CAAzB,EAA4B;AAC1BA,EAAAA,CAAC,CAAC4K,IAAF,CAAOgiC,MAAP,GAAgB5sC,CAAC,CAAC+K,GAAF,CAAM4gC,qBAAN,EAAhB;AACD;;AAED,SAASK,gBAAT,CAA2BhsC,CAA3B,EAA8B;AAC5B,MAAI6sC,MAAM,GAAG7sC,CAAC,CAAC4K,IAAF,CAAO8gC,GAApB;AACA,MAAIkB,MAAM,GAAG5sC,CAAC,CAAC4K,IAAF,CAAOgiC,MAApB;AACA,MAAIE,EAAE,GAAGD,MAAM,CAACE,IAAP,GAAcH,MAAM,CAACG,IAA9B;AACA,MAAIC,EAAE,GAAGH,MAAM,CAACI,GAAP,GAAaL,MAAM,CAACK,GAA7B;;AACA,MAAIH,EAAE,IAAIE,EAAV,EAAc;AACZhtC,IAAAA,CAAC,CAAC4K,IAAF,CAAOwhC,KAAP,GAAe,IAAf;AACA,QAAI3G,CAAC,GAAGzlC,CAAC,CAAC+K,GAAF,CAAMga,KAAd;AACA0gB,IAAAA,CAAC,CAAC4G,SAAF,GAAc5G,CAAC,CAAC6G,eAAF,GAAoB,eAAeQ,EAAf,GAAoB,KAApB,GAA4BE,EAA5B,GAAiC,KAAnE;AACAvH,IAAAA,CAAC,CAAC8G,kBAAF,GAAuB,IAAvB;AACD;AACF;;AAED,IAAIW,kBAAkB,GAAG;AACvBrC,EAAAA,UAAU,EAAEA,UADW;AAEvBK,EAAAA,eAAe,EAAEA;AAFM,CAAzB;AAKA;AAEA;;AACAxlB,GAAG,CAAC3iB,MAAJ,CAAWe,WAAX,GAAyBA,WAAzB;AACA4hB,GAAG,CAAC3iB,MAAJ,CAAWU,aAAX,GAA2BA,aAA3B;AACAiiB,GAAG,CAAC3iB,MAAJ,CAAWW,cAAX,GAA4BA,cAA5B;AACAgiB,GAAG,CAAC3iB,MAAJ,CAAWa,eAAX,GAA6BA,eAA7B;AACA8hB,GAAG,CAAC3iB,MAAJ,CAAWY,gBAAX,GAA8BA,gBAA9B,EAEA;;AACAvC,MAAM,CAACskB,GAAG,CAACjd,OAAJ,CAAYkJ,UAAb,EAAyBo4B,kBAAzB,CAAN;AACA3oC,MAAM,CAACskB,GAAG,CAACjd,OAAJ,CAAY2I,UAAb,EAAyB87B,kBAAzB,CAAN,EAEA;;AACAxnB,GAAG,CAAChpB,SAAJ,CAAc8sB,SAAd,GAA0BvkB,SAAS,GAAG62B,KAAH,GAAWr6B,IAA9C,EAEA;;AACAikB,GAAG,CAAChpB,SAAJ,CAAc0lB,MAAd,GAAuB,UACrB7S,EADqB,EAErBsS,SAFqB,EAGrB;AACAtS,EAAAA,EAAE,GAAGA,EAAE,IAAItK,SAAN,GAAkBowB,KAAK,CAAC9lB,EAAD,CAAvB,GAA8BtT,SAAnC;AACA,SAAO4tB,cAAc,CAAC,IAAD,EAAOta,EAAP,EAAWsS,SAAX,CAArB;AACD,CAND,EAQA;;AACA;;;AACA,IAAI5c,SAAJ,EAAe;AACb+Q,EAAAA,UAAU,CAAC,YAAY;AACrB,QAAIjT,MAAM,CAACI,QAAX,EAAqB;AACnB,UAAIA,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACkpB,IAAT,CAAc,MAAd,EAAsB3G,GAAtB;AACD,OAFD,MAEO,IACL,kBAAyB,YAAzB,IACA,kBAAyB,MAFpB,EAGL;AACA1d,QAAAA,OAAO,CAACA,OAAO,CAAC8M,IAAR,GAAe,MAAf,GAAwB,KAAzB,CAAP,CACE,+EACA,uCAFF;AAID;AACF;;AACD,QAAI,kBAAyB,YAAzB,IACF,kBAAyB,MADvB,IAEF/R,MAAM,CAACG,aAAP,KAAyB,KAFvB,IAGF,OAAO8E,OAAP,KAAmB,WAHrB,EAIE;AACAA,MAAAA,OAAO,CAACA,OAAO,CAAC8M,IAAR,GAAe,MAAf,GAAwB,KAAzB,CAAP,CACE,+CACA,uEADA,GAEA,0DAHF;AAKD;AACF,GAzBS,EAyBP,CAzBO,CAAV;AA0BD;AAED;;;eAEe4Q;;;AgGlwQf,IAAI4lF,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAI38D,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOh6B,GAAP,EAAY;AACZ,QAAI+c,OAAO,GAAG,CAAC,KAAK/c,GAAG,CAAC42F,KAAV,EAAiBvlG,KAAjB,CAAuB,+DAAvB,CAAd;;AACA,QAAI0rB,OAAJ,EAAa;AACX,aAAO85E,UAAU,CAAC95E,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAAS85E,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAW7rG,OAAX,CAAmB,gFAAnB,EAAqG,IAArG,IAA6G,GAApH;AACD;;AAEDstC,OAAO,CAACo+D,YAAR,GAAuBD,kBAAvB;AACAn+D,OAAO,CAACs+D,UAAR,GAAqBA,UAArB;;AC5BA,IAAIE,MAAM,GAAGC,OAAO,CAAC,cAAD,CAApB;;AAEA,SAASC,UAAT,CAAoBrrD,IAApB,EAA0B;AACxB,MAAIsrD,OAAO,GAAGtrD,IAAI,CAAC9T,SAAL,EAAd;;AACAo/D,EAAAA,OAAO,CAACC,MAAR,GAAiB,YAAY;AAC3BvrD,IAAAA,IAAI,CAAC3hD,MAAL;AACD,GAFD;;AAGAitG,EAAAA,OAAO,CAACrtD,IAAR,GAAe+B,IAAI,CAAC/B,IAAL,CAAUlgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgC4D,IAAI,CAACqpB,GAAL,EAA/C;AACAg1B,EAAAA,IAAI,CAACvsB,UAAL,CAAgB6B,YAAhB,CAA6Bg2E,OAA7B,EAAsCtrD,IAAI,CAACrqB,WAA3C;AACD;;AAED,IAAI61E,UAAU,GAAG,IAAjB;;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,EAAAA,UAAU,GAAGj2F,UAAU,CAAC,YAAY;AAClC,QAAIkrC,KAAK,GAAG7qC,QAAQ,CAAC81F,gBAAT,CAA0B,wBAA1B,CAAZ;;AACA,SAAK,IAAI1tG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyiD,KAAK,CAACxiD,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAImtG,MAAM,CAACF,UAAP,CAAkBxqD,KAAK,CAACziD,CAAD,CAAL,CAASigD,IAA3B,MAAqCktD,MAAM,CAACJ,YAAP,EAAzC,EAAgE;AAC9DM,QAAAA,UAAU,CAAC5qD,KAAK,CAACziD,CAAD,CAAN,CAAV;AACD;AACF;;AAEDwtG,IAAAA,UAAU,GAAG,IAAb;AACD,GATsB,EASpB,EAToB,CAAvB;AAUD;;AAED5+D,MAAM,CAACD,OAAP,GAAiB8+D,SAAjB;;;;;;;;;ChG7BA,SAA2C/+D,EAAM/mB,GAChD,GAAsB,iBAAZgnB,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUhnB,SACb,GAAqB,mBAAXknB,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIlnB,OACP,CACJ,IAAI3lB,EAAI2lB,IACR,IAAI,IAAI3nB,KAAKgC,GAAuB,iBAAZ2sC,QAAuBA,QAAUD,GAAM1uC,GAAKgC,EAAEhC,IAPxE,CASG+uC,MAAM,WACT,M,oeCLA,cAGA,UACA,UACA,UACA,SACA,UAEA,UASA,cA0BE,WACmBC,EACAC,GAFnB,MAIE,cAAO,KAHU,EAAAD,YACA,EAAAC,iBAvBX,EAAAC,qBAA+B,EAiB/B,EAAAC,gBAA4B,GAE5B,EAAAC,iBAA2B,GAOjC,EAAKC,uBAAyBz3B,SAAS8K,cAAc,OACrD,EAAK2sB,uBAAuBtL,UAAU/6B,IAAI,uBAE1C,EAAKsmC,cAAgB13B,SAAS8K,cAAc,OAC5C,EAAK4sB,cAAcpY,aAAa,OAAQ,QACxC,EAAKoY,cAAcvL,UAAU/6B,IAAI,4BACjC,EAAKumC,aAAe,GACpB,IAAK,IAAIvvC,EAAI,EAAGA,EAAI,EAAKgvC,UAAUQ,KAAMxvC,IACvC,EAAKuvC,aAAavvC,GAAK,EAAKyvC,+BAC5B,EAAKH,cAAc5X,YAAY,EAAK6X,aAAavvC,IAmBnD,GAhBA,EAAK0vC,0BAA4B,SAAAhsC,GAAK,SAAKisC,iBAAiBjsC,EAAG,IAC/D,EAAKksC,6BAA+B,SAAAlsC,GAAK,SAAKisC,iBAAiBjsC,EAAG,IAClE,EAAK6rC,aAAa,GAAGxnC,iBAAiB,QAAS,EAAK2nC,2BACpD,EAAKH,aAAa,EAAKA,aAAatvC,OAAS,GAAG8H,iBAAiB,QAAS,EAAK6nC,8BAE/E,EAAKC,yBACL,EAAKR,uBAAuB3X,YAAY,EAAK4X,eAE7C,EAAKQ,qBAAuB,IAAI,EAAAC,gBAAgB,EAAKC,YAAY1tC,KAAK,IACtE,EAAK2tC,eAEL,EAAKC,YAAct4B,SAAS8K,cAAc,OAC1C,EAAKwtB,YAAYnM,UAAU/6B,IAAI,eAC/B,EAAKknC,YAAYhZ,aAAa,YAAa,aAC3C,EAAKmY,uBAAuB3X,YAAY,EAAKwY,cAExC,EAAKlB,UAAUmB,QAClB,MAAM,IAAIC,MAAM,oD,OAElB,EAAKpB,UAAUmB,QAAQE,sBAAsB,aAAc,EAAKhB,wBAEhE,EAAKiB,SAAS,EAAKR,sBACnB,EAAKQ,SAAS,EAAKtB,UAAUuB,UAAS,SAAA7sC,GAAK,SAAK8sC,UAAU9sC,EAAE8rC,UAC5D,EAAKc,SAAS,EAAKtB,UAAUyB,UAAS,SAAA/sC,GAAK,SAAKusC,aAAavsC,EAAEjB,MAAOiB,EAAE44B,SACxE,EAAKgU,SAAS,EAAKtB,UAAU0B,UAAS,WAAM,SAAKT,mBAEjD,EAAKK,SAAS,EAAKtB,UAAU2B,YAAW,SAAAC,GAAQ,SAAKC,QAAQD,OAC7D,EAAKN,SAAS,EAAKtB,UAAU8B,YAAW,WAAM,SAAKD,QAAQ,UAC3D,EAAKP,SAAS,EAAKtB,UAAU+B,WAAU,SAAAC,GAAc,SAAKC,OAAOD,OACjE,EAAKV,SAAS,EAAKtB,UAAUkC,OAAM,SAAAxtC,GAAK,SAAKytC,OAAOztC,EAAE7C,SACtD,EAAKyvC,SAAS,EAAKtB,UAAUoC,QAAO,WAAM,SAAKC,uBAC/C,EAAKf,SAAS,EAAKrB,eAAeqC,oBAAmB,WAAM,SAAKzB,6BAEhE,EAAK0B,kBAAoB,IAAI,EAAAC,iBAC7B,EAAKlB,SAAS,EAAKiB,mBACnB,EAAKA,kBAAkBE,aAAY,WAAM,SAAK5B,4BAG9C,EAAKS,SAAS,EAAAoB,yBAAyBjrC,OAAQ,UAAU,WAAM,SAAKopC,6B,EAmMxE,OApR0C,OAoFjC,YAAA8B,QAAP,WACE,YAAMA,QAAO,WACb,EAAAC,wBAAwBC,KAAKxC,wBAC7BwC,KAAKtC,aAAatvC,OAAS,GAGrB,YAAA0vC,iBAAR,SAAyBjsC,EAAeouC,GACtC,IAAMC,EAA+BruC,EAAE8H,OACjCwmC,EAAwBH,KAAKtC,aAA0B,IAAbuC,EAAoC,EAAID,KAAKtC,aAAatvC,OAAS,GAKnH,GAFiB8xC,EAAgB/N,aAAa,oBACd,IAAb8N,EAAoC,IAAM,GAAGD,KAAK7C,UAAUiD,OAAOC,MAAMjyC,SAOxFyD,EAAEyuC,gBAAkBH,EAAxB,CAKA,IAAII,EACAC,EAgBJ,GAfiB,IAAbP,GACFM,EAAqBL,EACrBM,EAAwBR,KAAKtC,aAAavjC,MAC1C6lC,KAAKvC,cAAc7X,YAAY4a,KAE/BD,EAAqBP,KAAKtC,aAAatzB,QACvCo2B,EAAwBN,EACxBF,KAAKvC,cAAc7X,YAAY2a,IAIjCA,EAAmBvS,oBAAoB,QAASgS,KAAKnC,2BACrD2C,EAAsBxS,oBAAoB,QAASgS,KAAKjC,8BAGvC,IAAbkC,EAAmC,CACrC,IAAMQ,EAAaT,KAAKpC,+BACxBoC,KAAKtC,aAAard,QAAQogB,GAC1BT,KAAKvC,cAAce,sBAAsB,aAAciC,QAEjDA,EAAaT,KAAKpC,+BACxBoC,KAAKtC,aAAazkC,KAAKwnC,GACvBT,KAAKvC,cAAc5X,YAAY4a,GAIjCT,KAAKtC,aAAa,GAAGxnC,iBAAiB,QAAS8pC,KAAKnC,2BACpDmC,KAAKtC,aAAasC,KAAKtC,aAAatvC,OAAS,GAAG8H,iBAAiB,QAAS8pC,KAAKjC,8BAG/EiC,KAAK7C,UAAUuD,YAAyB,IAAbT,GAAqC,EAAI,GAGpED,KAAKtC,aAA0B,IAAbuC,EAAoC,EAAID,KAAKtC,aAAatvC,OAAS,GAAGuyC,QAGxF9uC,EAAE+uC,iBACF/uC,EAAEk8B,6BAGI,YAAA4Q,UAAR,SAAkBhB,GAEhBqC,KAAKtC,aAAasC,KAAKtC,aAAatvC,OAAS,GAAG4/B,oBAAoB,QAASgS,KAAKjC,8BAGlF,IAAK,IAAI5vC,EAAI6xC,KAAKvC,cAAcljC,SAASnM,OAAQD,EAAI6xC,KAAK7C,UAAUQ,KAAMxvC,IACxE6xC,KAAKtC,aAAavvC,GAAK6xC,KAAKpC,+BAC5BoC,KAAKvC,cAAc5X,YAAYma,KAAKtC,aAAavvC,IAGnD,KAAO6xC,KAAKtC,aAAatvC,OAASuvC,GAChCqC,KAAKvC,cAAc7X,YAAYoa,KAAKtC,aAAavjC,OAInD6lC,KAAKtC,aAAasC,KAAKtC,aAAatvC,OAAS,GAAG8H,iBAAiB,QAAS8pC,KAAKjC,8BAE/EiC,KAAKhC,0BAGC,YAAAJ,6BAAR,WACE,IAAMU,EAAUv4B,SAAS8K,cAAc,OAIvC,OAHAytB,EAAQjZ,aAAa,OAAQ,YAC7BiZ,EAAQuC,UAAY,EACpBb,KAAKc,sBAAsBxC,GACpBA,GAGD,YAAAc,OAAR,SAAeD,GACb,IAAK,IAAIhxC,EAAI,EAAGA,EAAIgxC,EAAYhxC,IAC9B6xC,KAAKhB,QAAQ,MAIT,YAAAA,QAAR,SAAgBD,GAAhB,WACMiB,KAAK3C,qBAAuB0D,KAC1Bf,KAAK1C,gBAAgBlvC,OAAS,EAEZ4xC,KAAK1C,gBAAgBlzB,UACrB20B,IAClBiB,KAAKzC,kBAAoBwB,GAG3BiB,KAAKzC,kBAAoBwB,EAGd,OAATA,IACFiB,KAAK3C,uBAC6B0D,KAA9Bf,KAAK3C,uBACP2C,KAAK3B,YAAYrY,aAAegb,EAAQC,gBAKxC,EAAAC,OACElB,KAAK3B,YAAYrY,aAAega,KAAK3B,YAAYrY,YAAY53B,OAAS,IAAM4xC,KAAK3B,YAAYza,YAC/Fle,YAAW,WACT,EAAK83B,uBAAuB3X,YAAY,EAAKwY,eAC5C,KAMH,YAAAmB,iBAAR,WACEQ,KAAK3B,YAAYrY,YAAc,GAC/Bga,KAAK3C,qBAAuB,EAGxB,EAAA6D,OACF,EAAAnB,wBAAwBC,KAAK3B,cAIzB,YAAAiB,OAAR,SAAe6B,GACbnB,KAAKR,mBACLQ,KAAK1C,gBAAgBrkC,KAAKkoC,IAGpB,YAAA/C,aAAR,SAAqBxtC,EAAgB65B,GACnCuV,KAAK/B,qBAAqBmD,QAAQxwC,EAAO65B,EAAKuV,KAAK7C,UAAUQ,OAGvD,YAAAQ,YAAR,SAAoBvtC,EAAe65B,GAGjC,IAFA,IAAM2V,EAAkBJ,KAAK7C,UAAUiD,OACjCiB,EAAUjB,EAAOC,MAAMjyC,OAAO/B,WAC3B8B,EAAIyC,EAAOzC,GAAKs8B,EAAKt8B,IAAK,CACjC,IAAMmzC,EAAWlB,EAAOmB,4BAA4BnB,EAAOoB,MAAQrzC,GAAG,GAChEszC,GAAYrB,EAAOoB,MAAQrzC,EAAI,GAAG9B,WAClCiyC,EAAU0B,KAAKtC,aAAavvC,GAC9BmwC,IACsB,IAApBgD,EAASlzC,OACXkwC,EAAQoD,UAAY,IAEpBpD,EAAQtY,YAAcsb,EAExBhD,EAAQjZ,aAAa,gBAAiBoc,GACtCnD,EAAQjZ,aAAa,eAAgBgc,IAGzCrB,KAAK2B,uBAGC,YAAA3D,uBAAR,WACE,GAAKgC,KAAK5C,eAAewE,WAAWC,iBAApC,CAGI7B,KAAKtC,aAAatvC,SAAW4xC,KAAK7C,UAAUQ,MAC9CqC,KAAKrB,UAAUqB,KAAK7C,UAAUQ,MAEhC,IAAK,IAAIxvC,EAAI,EAAGA,EAAI6xC,KAAK7C,UAAUQ,KAAMxvC,IACvC6xC,KAAKc,sBAAsBd,KAAKtC,aAAavvC,MAIzC,YAAA2yC,sBAAR,SAA8BxC,GAC5BA,EAAQ7pB,MAAMqtB,OAAY9B,KAAK5C,eAAewE,WAAWC,iBAAgB,MAGnE,YAAAF,oBAAR,WACuC,IAAjC3B,KAAKzC,iBAAiBnvC,SAG1B4xC,KAAK3B,YAAYrY,aAAega,KAAKzC,iBACrCyC,KAAKzC,iBAAmB,KAE5B,EApRA,CAA0C,EAAAwE,YAA7B,EAAAC,wB,aCXb,SAAgBC,EAAuBznC,GACrC,OAAOA,EAAKhL,QAAQ,SAAU,MAOhC,SAAgB0yC,EAAoB1nC,EAAc2nC,GAChD,OAAIA,EACK,SAAc3nC,EAAO,SAEvBA,EA4BT,SAAgB4nC,EAAM5nC,EAAc6nC,EAA+BC,GAEjE9nC,EAAO0nC,EADP1nC,EAAOynC,EAAuBznC,GACG8nC,EAAYC,gBAAgBJ,oBAC7DG,EAAYE,iBAAiBhoC,GAAM,GACnC6nC,EAASr2C,MAAQ,GAQnB,SAAgBy2C,EAA6BC,EAAgBL,EAA+BM,GAG1F,IAAMvH,EAAMuH,EAActH,wBACpBoB,EAAOiG,EAAGE,QAAUxH,EAAIqB,KAAO,GAC/BE,EAAM+F,EAAGG,QAAUzH,EAAIuB,IAAM,GAGnC0F,EAAS5tB,MAAMquB,MAAQ,OACvBT,EAAS5tB,MAAMqtB,OAAS,OACxBO,EAAS5tB,MAAMgoB,KAAUA,EAAI,KAC7B4F,EAAS5tB,MAAMkoB,IAASA,EAAG,KAC3B0F,EAAS5tB,MAAMsuB,OAAS,OAExBV,EAAS1B,Q,mMAlEX,2BAQA,wBAWA,uBAA4B+B,EAAoBM,GAC1CN,EAAGO,eACLP,EAAGO,cAAcC,QAAQ,aAAcF,EAAiBG,eAG1DT,EAAG9B,kBAQL,4BAAiC8B,EAAoBL,EAA+BC,GAClFI,EAAGU,kBACCV,EAAGO,eAELb,EADaM,EAAGO,cAAcrlB,QAAQ,cAC1BykB,EAAUC,IAI1B,UAYA,iCAwBA,6BAAkCI,EAAgBL,EAA+BM,EAA4BK,EAAqCK,GAChJZ,EAA6BC,EAAIL,EAAUM,GAEvCU,GACFL,EAAiBM,iBAAiBZ,GAIpCL,EAASr2C,MAAQg3C,EAAiBG,cAClCd,EAASkB,W,aCvFX,IAAiBC,EAiBA,EAkFAC,EAoCAC,EAkEjB,SAAgBC,EAAYj0C,GAC1B,IAAMylC,EAAIzlC,EAAErD,SAAS,IACrB,OAAO8oC,EAAE/mC,OAAS,EAAI,IAAM+mC,EAAIA,EASlC,SAAgByO,EAAcC,EAAYC,GACxC,OAAID,EAAKC,GACCA,EAAK,MAASD,EAAK,MAErBA,EAAK,MAASC,EAAK,K,4HAxN7B,SAAiBN,GACC,EAAAO,MAAhB,SAAsBC,EAAWC,EAAW7yC,EAAWjB,GACrD,YAAUxE,IAANwE,EACK,IAAIwzC,EAAYK,GAAKL,EAAYM,GAAKN,EAAYvyC,GAAKuyC,EAAYxzC,GAErE,IAAIwzC,EAAYK,GAAKL,EAAYM,GAAKN,EAAYvyC,IAG3C,EAAA8yC,OAAhB,SAAuBF,EAAWC,EAAW7yC,EAAWjB,GAEtD,YAFsD,IAAAA,MAAA,MAE9C6zC,GAAK,GAAKC,GAAK,GAAK7yC,GAAK,EAAIjB,KAAO,GAVhD,CAAiBqzC,EAAA,EAAAA,WAAA,EAAAA,SAAQ,MAiBR,IAAAW,QAAA,EAAAA,MAAK,KACJC,MAAhB,SAAsBC,EAAYC,GAChC,IAAMn0C,GAAe,IAAVm0C,EAAGZ,MAAe,IAC7B,GAAU,IAANvzC,EACF,MAAO,CACLoiC,IAAK+R,EAAG/R,IACRmR,KAAMY,EAAGZ,MAGb,IAAMa,EAAOD,EAAGZ,MAAQ,GAAM,IACxBc,EAAOF,EAAGZ,MAAQ,GAAM,IACxBe,EAAOH,EAAGZ,MAAQ,EAAK,IACvBgB,EAAOL,EAAGX,MAAQ,GAAM,IACxBiB,EAAON,EAAGX,MAAQ,GAAM,IACxBkB,EAAOP,EAAGX,MAAQ,EAAK,IACvBM,EAAIU,EAAM13C,KAAK63C,OAAON,EAAMG,GAAOv0C,GACnC8zC,EAAIU,EAAM33C,KAAK63C,OAAOL,EAAMG,GAAOx0C,GACnCiB,EAAIwzC,EAAM53C,KAAK63C,OAAOJ,EAAMG,GAAOz0C,GAGzC,MAAO,CAAEoiC,IAFGiR,EAASO,MAAMC,EAAGC,EAAG7yC,GAEnBsyC,KADDF,EAASU,OAAOF,EAAGC,EAAG7yC,KAIrB,EAAA0zC,SAAhB,SAAyBX,GACvB,OAA+B,MAAV,IAAbA,EAAMT,OAGA,EAAAqB,oBAAhB,SAAoCV,EAAYC,EAAYU,GAC1D,IAAMnoC,EAAS6mC,EAAKqB,oBAAoBV,EAAGX,KAAMY,EAAGZ,KAAMsB,GAC1D,GAAKnoC,EAGL,OAAO6mC,EAAKuB,QACTpoC,GAAU,GAAK,IACfA,GAAU,GAAK,IACfA,GAAU,EAAK,MAIJ,EAAAqoC,OAAhB,SAAuBf,GACrB,IAAMgB,GAA0B,IAAbhB,EAAMT,QAAiB,EACpC,EAAYA,EAAK0B,WAAWD,GAA3BnB,EAAC,KAAEC,EAAC,KAAE7yC,EAAC,KACd,MAAO,CACLmhC,IAAKiR,EAASO,MAAMC,EAAGC,EAAG7yC,GAC1BsyC,KAAMyB,IAIM,EAAAE,QAAhB,SAAwBlB,EAAekB,GACrC,IAAMl1C,EAAInD,KAAK63C,MAAgB,IAAVQ,GACf,EAAY3B,EAAK0B,WAAWjB,EAAMT,MAAjCM,EAAC,KAAEC,EAAC,KAAE7yC,EAAC,KACd,MAAO,CACLmhC,IAAKiR,EAASO,MAAMC,EAAGC,EAAG7yC,EAAGjB,GAC7BuzC,KAAMF,EAASU,OAAOF,EAAGC,EAAG7yC,EAAGjB,MAQpB,EAAAoiC,MAAA,EAAAA,IAAG,KACF0S,QAAhB,SAAwB1S,GACtB,OAAQA,EAAInkC,QACV,KAAK,EACH,MAAO,CACLmkC,IAAG,EACHmR,MAAOnhB,SAASgQ,EAAI/lC,MAAM,GAAI,KAAO,EAAI,OAAU,GAEvD,KAAK,EACH,MAAO,CACL+lC,IAAG,EACHmR,KAAMnhB,SAASgQ,EAAI/lC,MAAM,GAAI,MAAQ,GAG3C,MAAM,IAAI+xC,MAAM,wCAOpB,SAAiB,GAsBf,SAAgB+G,EAAmBtB,EAAWC,EAAW7yC,GACvD,IAAMm0C,EAAKvB,EAAI,IACTwB,EAAKvB,EAAI,IACTwB,EAAKr0C,EAAI,IAIf,MAAY,OAHDm0C,GAAM,OAAUA,EAAK,MAAQv4C,KAAK04C,KAAKH,EAAK,MAAS,MAAO,MAG7C,OAFfC,GAAM,OAAUA,EAAK,MAAQx4C,KAAK04C,KAAKF,EAAK,MAAS,MAAO,MAE/B,OAD7BC,GAAM,OAAUA,EAAK,MAAQz4C,KAAK04C,KAAKD,EAAK,MAAS,MAAO,MArBzD,EAAAE,kBAAhB,SAAkClC,GAChC,OAAO6B,EACJ7B,GAAO,GAAM,IACbA,GAAO,EAAM,IACA,IAAd,IAWY,EAAA6B,mBAAkB,EAtBpC,CAAiB7B,EAAA,EAAAA,MAAA,EAAAA,IAAG,KAoCpB,SAAiBC,GAcf,SAAgBkC,EAAgBC,EAAgBC,EAAgBd,GAU9D,IAPA,IAAMN,EAAOmB,GAAU,GAAM,IACvBlB,EAAOkB,GAAU,GAAM,IACvBjB,EAAOiB,GAAW,EAAK,IACzBtB,EAAOuB,GAAU,GAAM,IACvBtB,EAAOsB,GAAU,GAAM,IACvBrB,EAAOqB,GAAW,EAAK,IACvBC,EAAKnC,EAAcH,EAAI6B,mBAAmBf,EAAKE,EAAKD,GAAMf,EAAI6B,mBAAmBZ,EAAKC,EAAKC,IACxFmB,EAAKf,IAAUT,EAAM,GAAKC,EAAM,GAAKC,EAAM,IAEhDF,GAAOv3C,KAAK8R,IAAI,EAAG9R,KAAKg5C,KAAW,GAANzB,IAC7BC,GAAOx3C,KAAK8R,IAAI,EAAG9R,KAAKg5C,KAAW,GAANxB,IAC7BC,GAAOz3C,KAAK8R,IAAI,EAAG9R,KAAKg5C,KAAW,GAANvB,IAC7BsB,EAAKnC,EAAcH,EAAI6B,mBAAmBf,EAAKE,EAAKD,GAAMf,EAAI6B,mBAAmBZ,EAAKC,EAAKC,IAE7F,OAAQL,GAAO,GAAKC,GAAO,GAAKC,GAAO,EAAI,OAAU,EAGvD,SAAgBwB,EAAkBJ,EAAgBC,EAAgBd,GAUhE,IAPA,IAAMN,EAAOmB,GAAU,GAAM,IACvBlB,EAAOkB,GAAU,GAAM,IACvBjB,EAAOiB,GAAW,EAAK,IACzBtB,EAAOuB,GAAU,GAAM,IACvBtB,EAAOsB,GAAU,GAAM,IACvBrB,EAAOqB,GAAW,EAAK,IACvBC,EAAKnC,EAAcH,EAAI6B,mBAAmBf,EAAKE,EAAKD,GAAMf,EAAI6B,mBAAmBZ,EAAKC,EAAKC,IACxFmB,EAAKf,IAAUT,EAAM,KAAQC,EAAM,KAAQC,EAAM,MAEtDF,EAAMv3C,KAAKk5C,IAAI,IAAM3B,EAAMv3C,KAAKg5C,KAAmB,IAAb,IAAMzB,KAC5CC,EAAMx3C,KAAKk5C,IAAI,IAAM1B,EAAMx3C,KAAKg5C,KAAmB,IAAb,IAAMxB,KAC5CC,EAAMz3C,KAAKk5C,IAAI,IAAMzB,EAAMz3C,KAAKg5C,KAAmB,IAAb,IAAMvB,KAC5CsB,EAAKnC,EAAcH,EAAI6B,mBAAmBf,EAAKE,EAAKD,GAAMf,EAAI6B,mBAAmBZ,EAAKC,EAAKC,IAE7F,OAAQL,GAAO,GAAKC,GAAO,GAAKC,GAAO,EAAI,OAAU,EAlDvC,EAAAM,oBAAhB,SAAoCc,EAAgBC,EAAgBd,GAClE,IAAMmB,EAAM1C,EAAIkC,kBAAkBE,GAAU,GACtCO,EAAM3C,EAAIkC,kBAAkBG,GAAU,GAE5C,GADWlC,EAAcuC,EAAKC,GACrBpB,EACP,OAAIoB,EAAMD,EACDP,EAAgBC,EAAQC,EAAQd,GAElCiB,EAAkBJ,EAAQC,EAAQd,IAK7B,EAAAY,gBAAe,EAoBf,EAAAK,kBAAiB,EAoBjB,EAAAb,WAAhB,SAA2Bp5C,GACzB,MAAO,CAAEA,GAAS,GAAM,IAAOA,GAAS,GAAM,IAAOA,GAAS,EAAK,IAAc,IAARA,IAG3D,EAAAi5C,QAAhB,SAAwBjB,EAAWC,EAAW7yC,GAC5C,MAAO,CACLmhC,IAAKiR,EAASO,MAAMC,EAAGC,EAAG7yC,GAC1BsyC,KAAMF,EAASU,OAAOF,EAAGC,EAAG7yC,KA7DlC,CAAiBsyC,EAAA,EAAAA,OAAA,EAAAA,KAAI,KAkErB,gBAWA,mB,0FCvNA,8BACU,KAAA2C,OAAoF,GACpF,KAAAC,MAAmF,GA4B7F,OA1BS,YAAAlvC,MAAP,WACE4oC,KAAKqG,OAAS,GACdrG,KAAKsG,MAAQ,IAGR,YAAAC,OAAP,SAAclC,EAAYC,EAAYt4C,GAC/Bg0C,KAAKsG,MAAMjC,KACdrE,KAAKsG,MAAMjC,GAAM,IAEnBrE,KAAKsG,MAAMjC,GAAKC,GAAMt4C,GAGjB,YAAAw6C,OAAP,SAAcnC,EAAYC,GACxB,OAAOtE,KAAKsG,MAAMjC,GAAMrE,KAAKsG,MAAMjC,GAAKC,QAAM34C,GAGzC,YAAA86C,SAAP,SAAgBpC,EAAYC,EAAYt4C,GACjCg0C,KAAKqG,OAAOhC,KACfrE,KAAKqG,OAAOhC,GAAM,IAEpBrE,KAAKqG,OAAOhC,GAAKC,GAAMt4C,GAGlB,YAAA06C,SAAP,SAAgBrC,EAAYC,GAC1B,OAAOtE,KAAKqG,OAAOhC,GAAMrE,KAAKqG,OAAOhC,GAAKC,QAAM34C,GAEpD,EA9BA,GAAa,EAAAg7C,sB,4GCAb,cACA,UAEMC,EAAqB,EAAArU,IAAI0S,QAAQ,WACjC4B,EAAqB,EAAAtU,IAAI0S,QAAQ,WACjC6B,EAAiB,EAAAvU,IAAI0S,QAAQ,WAC7B8B,EAAwB,EAAAxU,IAAI0S,QAAQ,WACpC+B,EAAoB,CACxBzU,IAAK,2BACLmR,KAAM,YAIK,EAAAuD,oBAAsB17C,OAAOC,OAAO,WAyB/C,IAxBA,IAAM07C,EAAS,CAEb,EAAA3U,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WAEZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,WACZ,EAAA1S,IAAI0S,QAAQ,YAKRv5C,EAAI,CAAC,EAAM,GAAM,IAAM,IAAM,IAAM,KAChCyC,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B,IAAM61C,EAAIt4C,EAAGyC,EAAI,GAAM,EAAI,GACrB81C,EAAIv4C,EAAGyC,EAAI,EAAK,EAAI,GACpBiD,EAAI1F,EAAEyC,EAAI,GAChB+4C,EAAOjuC,KAAK,CACVs5B,IAAK,EAAAiR,SAASO,MAAMC,EAAGC,EAAG7yC,GAC1BsyC,KAAM,EAAAF,SAASU,OAAOF,EAAGC,EAAG7yC,KAKhC,IAASjD,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,IAAMuB,EAAI,EAAQ,GAAJvB,EACd+4C,EAAOjuC,KAAK,CACVs5B,IAAK,EAAAiR,SAASO,MAAMr0C,EAAGA,EAAGA,GAC1Bg0C,KAAM,EAAAF,SAASU,OAAOx0C,EAAGA,EAAGA,KAIhC,OAAOw3C,EA5CwC,IAkDjD,iBAME,WAAYnhC,EAA2BohC,GAAA,KAAAA,oBACrC,IAAMC,EAASrhC,EAAS8K,cAAc,UACtCu2B,EAAOtE,MAAQ,EACfsE,EAAOtF,OAAS,EAChB,IAAM7xC,EAAMm3C,EAAOC,WAAW,MAC9B,IAAKp3C,EACH,MAAM,IAAIsuC,MAAM,mCAElByB,KAAKsH,KAAOr3C,EACZ+vC,KAAKsH,KAAKC,yBAA2B,OACrCvH,KAAKwH,aAAexH,KAAKsH,KAAKG,qBAAqB,EAAG,EAAG,EAAG,GAC5DzH,KAAK0H,eAAiB,IAAI,EAAAf,mBAC1B3G,KAAKkH,OAAS,CACZS,WAAYf,EACZgB,WAAYf,EACZgB,OAAQf,EACRgB,aAAcf,EACdgB,qBAAsBf,EACtBgB,gBAAiB,EAAA7D,MAAMC,MAAMyC,EAAoBG,GACjDiB,KAAM,EAAAhB,oBAAoBz6C,QAC1B07C,cAAelI,KAAK0H,gBAoH1B,OAhHS,YAAAS,gBAAP,SAAuBn5C,GACT,yBAARA,GACFgxC,KAAK0H,eAAetwC,SASjB,YAAAgxC,SAAP,SAAgBC,QAAA,IAAAA,MAAA,IACdrI,KAAKkH,OAAOS,WAAa3H,KAAKsI,YAAYD,EAAMV,WAAYf,GAC5D5G,KAAKkH,OAAOU,WAAa5H,KAAKsI,YAAYD,EAAMT,WAAYf,GAC5D7G,KAAKkH,OAAOW,OAAS7H,KAAKsI,YAAYD,EAAMR,OAAQf,GAAgB,GACpE9G,KAAKkH,OAAOY,aAAe9H,KAAKsI,YAAYD,EAAMP,aAAcf,GAAuB,GACvF/G,KAAKkH,OAAOa,qBAAuB/H,KAAKsI,YAAYD,EAAME,UAAWvB,GAAmB,GACxFhH,KAAKkH,OAAOc,gBAAkB,EAAA7D,MAAMC,MAAMpE,KAAKkH,OAAOU,WAAY5H,KAAKkH,OAAOa,sBAK1E,EAAA5D,MAAMW,SAAS9E,KAAKkH,OAAOa,wBAE7B/H,KAAKkH,OAAOa,qBAAuB,EAAA5D,MAAMkB,QAAQrF,KAAKkH,OAAOa,qBAD7C,KAGlB/H,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMG,MAAO,EAAAvB,oBAAoB,IACxEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMI,IAAK,EAAAxB,oBAAoB,IACtEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMK,MAAO,EAAAzB,oBAAoB,IACxEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMM,OAAQ,EAAA1B,oBAAoB,IACzEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMO,KAAM,EAAA3B,oBAAoB,IACvEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMQ,QAAS,EAAA5B,oBAAoB,IAC1EjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMS,KAAM,EAAA7B,oBAAoB,IACvEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMU,MAAO,EAAA9B,oBAAoB,IACxEjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMW,YAAa,EAAA/B,oBAAoB,IAC9EjH,KAAKkH,OAAOe,KAAK,GAAKjI,KAAKsI,YAAYD,EAAMY,UAAW,EAAAhC,oBAAoB,IAC5EjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMa,YAAa,EAAAjC,oBAAoB,KAC/EjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMc,aAAc,EAAAlC,oBAAoB,KAChFjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMe,WAAY,EAAAnC,oBAAoB,KAC9EjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMgB,cAAe,EAAApC,oBAAoB,KACjFjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMiB,WAAY,EAAArC,oBAAoB,KAC9EjH,KAAKkH,OAAOe,KAAK,IAAMjI,KAAKsI,YAAYD,EAAMkB,YAAa,EAAAtC,oBAAoB,KAE/EjH,KAAK0H,eAAetwC,SAGd,YAAAkxC,YAAR,SACE/V,EACApmB,EACAg7B,GAEA,QAFA,IAAAA,MAA6BnH,KAAKmH,wBAEtBx7C,IAAR4mC,EACF,OAAOpmB,EAQT,GAFA6zB,KAAKsH,KAAKkC,UAAYxJ,KAAKwH,aAC3BxH,KAAKsH,KAAKkC,UAAYjX,EACa,iBAAxByN,KAAKsH,KAAKkC,UAEnB,OADA9xC,QAAQL,KAAK,UAAUk7B,EAAG,8BAA8BpmB,EAASomB,KAC1DpmB,EAGT6zB,KAAKsH,KAAKmC,SAAS,EAAG,EAAG,EAAG,GAC5B,IAAMnvC,EAAO0lC,KAAKsH,KAAKoC,aAAa,EAAG,EAAG,EAAG,GAAGpvC,KAGhD,GAAgB,MAAZA,EAAK,GAAa,CACpB,IAAK6sC,EAqBH,OAJAzvC,QAAQL,KACN,UAAUk7B,EAAV,0EACkBpmB,EAASomB,IAAG,KAEzBpmB,EAKH,MAAe6zB,KAAKsH,KAAKkC,UAAUG,UAAU,EAAG3J,KAAKsH,KAAKkC,UAAUp7C,OAAS,GAAGF,MAAM,KAAKH,KAAI,SAAAgpB,GAAa,OAAA7S,OAAO6S,MAAlHitB,EAAC,KAAEC,EAAC,KAAE7yC,EAAC,KAAEjB,EAAC,KACXy5C,EAAQ58C,KAAK63C,MAAU,IAAJ10C,GAEzB,MAAO,CACLuzC,KAFmB,EAAAF,SAASU,OAAOF,EAAGC,EAAG7yC,EAAGw4C,GAG5CrX,IAAG,GAIP,MAAO,CAGLA,IAAKyN,KAAKsH,KAAKkC,UACf9F,KAAM,EAAAF,SAASU,OAAO5pC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,MAG5D,EA9IA,GAAa,EAAAuvC,gB,+FCjEb,qC,UAAwC,kDACtC,IAAgB,UAAAC,EAAA,eAAU,CAArB,IAAMj4C,EAAC,KACM,QAAhB,EAAAA,aAAC,EAADA,EAAGk4C,qBAAa,SAAEnkB,YAAY/zB,M,gGCKlC,oCACEkK,EACAuE,EACAwE,EACA3M,GAEA4D,EAAK7F,iBAAiBoK,EAAMwE,EAAS3M,GACrC,IAAI6xC,GAAW,EACf,MAAO,CACLlK,QAAS,WACHkK,IAGJA,GAAW,EACXjuC,EAAKiyB,oBAAoB1tB,EAAMwE,EAAS3M,Q,0gBCnB9C,cACA,UAYA,aAwBE,WACqC8xC,EACLC,EACIC,GAFC,KAAAF,iBACL,KAAAC,cACI,KAAAC,kBAnB1B,KAAAC,cAA0C,GAM5C,KAAAC,mBAAqB,EAGrB,KAAAC,qBAAuB,IAAI,EAAAC,aAE3B,KAAAC,qBAAuB,IAAI,EAAAD,aAE3B,KAAAE,eAAiB,IAAI,EAAAF,aAQ3BvK,KAAK0K,eAAiB,CACpB95C,WAAOjF,EACP8+B,SAAK9+B,GA+RX,OA5SE,sBAAW,kCAAmB,C,IAA9B,WAA4D,OAAOq0C,KAAKsK,qBAAqBthC,O,gCAE7F,sBAAW,kCAAmB,C,IAA9B,WAA4D,OAAOg3B,KAAKwK,qBAAqBxhC,O,gCAE7F,sBAAW,4BAAa,C,IAAxB,WAAsD,OAAOg3B,KAAKyK,eAAezhC,O,gCAiB1E,YAAA2hC,YAAP,SAAmBrM,EAAsBsM,GACvC5K,KAAK6K,SAAWvM,EAChB0B,KAAK8K,kBAAoBF,GAQpB,YAAAG,YAAP,SAAmBn6C,EAAe65B,GAAlC,WAEOuV,KAAK8K,yBAKwBn/C,IAA9Bq0C,KAAK0K,eAAe95C,YAAmDjF,IAA5Bq0C,KAAK0K,eAAejgB,KACjEuV,KAAK0K,eAAe95C,MAAQA,EAC5BovC,KAAK0K,eAAejgB,IAAMA,IAE1BuV,KAAK0K,eAAe95C,MAAQ5D,KAAKk5C,IAAIlG,KAAK0K,eAAe95C,MAAOA,GAChEovC,KAAK0K,eAAejgB,IAAMz9B,KAAK8R,IAAIkhC,KAAK0K,eAAejgB,IAAKA,IAI9DuV,KAAK8K,kBAAkBE,SAASp6C,EAAO65B,GAGnCuV,KAAKiL,gBACPr0B,aAAaopB,KAAKiL,gBAEpBjL,KAAKiL,eAA8BvlC,YAAW,WAAM,SAAKwlC,iBAAgBC,EAAUC,sBAM7E,YAAAF,aAAR,WACElL,KAAKiL,oBAAiBt/C,EACtB,IAAMy0C,EAASJ,KAAKiK,eAAe7J,OAEnC,QAAkCz0C,IAA9Bq0C,KAAK0K,eAAe95C,YAAmDjF,IAA5Bq0C,KAAK0K,eAAejgB,IAAnE,CAMA,IAAM4gB,EAAwBjL,EAAOoB,MAAQxB,KAAK0K,eAAe95C,MACjE,KAAIy6C,GAAyBjL,EAAOC,MAAMjyC,QAA1C,CAoBA,IAfA,IAAMk9C,EAAsBlL,EAAOoB,MAAQx0C,KAAKk5C,IAAIlG,KAAK0K,eAAejgB,IAAKuV,KAAKiK,eAAetM,MAAQ,EAYnG4N,EAAoBv+C,KAAKg5C,KA9GP,IA8GkChG,KAAKiK,eAAeuB,MACxEz/B,EAAWi0B,KAAKiK,eAAe7J,OAAOr0B,UAC1C,EAAOs/B,EAAuBC,EAAqBC,EAAmBA,GACjEx/B,EAAS0/B,WAEd,IADA,IAAMnK,EAAwCv1B,EAASC,OAC9C7d,EAAI,EAAGA,EAAI6xC,KAAKoK,cAAch8C,OAAQD,IAC7C6xC,KAAK0L,cAAcpK,EAASqK,MAAMC,MAAOtK,EAASuK,QAAS7L,KAAKoK,cAAcj8C,IAIlF6xC,KAAK0K,eAAe95C,WAAQjF,EAC5Bq0C,KAAK0K,eAAejgB,SAAM9+B,QAlCxBq0C,KAAKkK,YAAY4B,MAAM,2DA+CpB,YAAAC,oBAAP,SAA2BC,EAAelnC,EAA6B3M,GACrE,QADqE,IAAAA,MAAA,KAChE2M,EACH,MAAM,IAAIy5B,MAAM,2BAElB,IAAM0N,EAAkC,CACtC5yC,GAAI2mC,KAAKqK,qBACT2B,MAAK,EACLlnC,QAAO,EACPonC,WAAY/zC,EAAQ+zC,WACpBC,mBAAoBh0C,EAAQg0C,mBAC5BC,qBAAsBj0C,EAAQk0C,gBAC9BC,mBAAoBn0C,EAAQo0C,cAC5BC,iBAAkBr0C,EAAQq0C,iBAC1BC,SAAUt0C,EAAQs0C,UAAY,GAGhC,OADAzM,KAAK0M,sBAAsBT,GACpBA,EAAQ5yC,IAST,YAAAqzC,sBAAR,SAA8BT,GAC5B,GAAkC,IAA9BjM,KAAKoK,cAAch8C,OAAvB,CAKA,IAAK,IAAID,EAAI6xC,KAAKoK,cAAch8C,OAAS,EAAGD,GAAK,EAAGA,IAClD,GAAI89C,EAAQQ,UAAYzM,KAAKoK,cAAcj8C,GAAGs+C,SAE5C,YADAzM,KAAKoK,cAAcv7C,OAAOV,EAAI,EAAG,EAAG89C,GAKxCjM,KAAKoK,cAAcv7C,OAAO,EAAG,EAAGo9C,QAX9BjM,KAAKoK,cAAcnxC,KAAKgzC,IAmBrB,YAAAU,sBAAP,SAA6BC,GAC3B,IAAK,IAAIz+C,EAAI,EAAGA,EAAI6xC,KAAKoK,cAAch8C,OAAQD,IAC7C,GAAI6xC,KAAKoK,cAAcj8C,GAAGkL,KAAOuzC,EAE/B,OADA5M,KAAKoK,cAAcv7C,OAAOV,EAAG,IACtB,EAGX,OAAO,GASD,YAAAu9C,cAAR,SAAsBmB,EAAkBryC,EAAcyxC,GAKpD,IALF,IAGMr2C,EAHN,OAEQk3C,EAAM,IAAI14C,OAAO63C,EAAQD,MAAM33C,QAAS43C,EAAQD,MAAMe,OAAS,IAAM,KAEvEtqC,GAAe,E,aAEjB,IAAMuqC,EAAMp3C,EAAoC,iBAAvBq2C,EAAQC,WAA0B,EAAID,EAAQC,YACvE,IAAKc,E,OAGH,EAAK9C,YAAY4B,MAAM,+CAAgDl2C,EAAOq2C,G,QAUhF,GAFAxpC,EAAcjI,EAAK5L,QAAQo+C,EAAKvqC,EAAc,GAC9CqqC,EAAI3iC,UAAY1H,EAAcuqC,EAAI5+C,OAC9BqU,EAAc,E,cAMlB,IAAMwqC,EAAc,EAAKhD,eAAe7J,OAAO8M,yBAAyBL,EAAUpqC,GAClF,GAAIwqC,EAAY,GAAK,E,cAKrB,IAAME,EAAO,EAAKlD,eAAe7J,OAAOC,MAAMpqC,IAAIg3C,EAAY,IAC9D,IAAKE,E,cAIL,IAAMjqB,EAAOiqB,EAAKC,MAAMH,EAAY,IAC9B3I,EAAKphB,EAAQA,GAAQ,EAAK,SAAQv3B,EAEpCsgD,EAAQE,mBACVF,EAAQE,mBAAmBa,GAAK,SAAAK,GAE1B,EAAKpC,gBAGLoC,GACF,EAAKC,SAASL,EAAY,GAAIA,EAAY,GAAK,EAAKhD,eAAe7J,OAAOoB,MAAOwL,EAAKf,EAAS3H,MAInG,EAAKgJ,SAASL,EAAY,GAAIA,EAAY,GAAK,EAAKhD,eAAe7J,OAAOoB,MAAOwL,EAAKf,EAAS3H,I,OA9C/D,QAA5B1uC,EAAQk3C,EAAIS,KAAK/yC,K,kBA2DnB,YAAA8yC,SAAR,SAAiBE,EAAWC,EAAWT,EAAaf,EAAuB3H,GAA3E,WACE,GAAKtE,KAAK8K,mBAAsB9K,KAAK6K,SAArC,CAIA,IAAM/H,EAAQ9C,KAAKmK,gBAAgBuD,mBAAmBV,GAChDW,EAAKH,EAAIxN,KAAKiK,eAAeuB,KAC7BoC,EAAKH,EAAIzgD,KAAKC,MAAMugD,EAAIxN,KAAKiK,eAAeuB,MAC9CqC,GAAMF,EAAK7K,GAAS9C,KAAKiK,eAAeuB,KACxCsC,EAAKF,EAAK5gD,KAAKC,OAAO0gD,EAAK7K,GAAS9C,KAAKiK,eAAeuB,MACjD,IAAPqC,IACFA,EAAK7N,KAAKiK,eAAeuB,KACzBsC,KAGF9N,KAAK8K,kBAAkB3zC,IAAI,IAAI42C,EAC7BJ,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,GACL,SAAAj8C,GACE,GAAIo6C,EAAQnnC,QACV,OAAOmnC,EAAQnnC,QAAQjT,EAAGm7C,GAE5B,IAAMgB,EAAYp5C,OAAOq5C,OACrBD,GACFA,EAAUE,OAAS,KACnBF,EAAUG,SAASC,KAAOpB,GAE1Bt1C,QAAQL,KAAK,0DAGjB,WACE,EAAKizC,qBAAqB+D,KAAK,EAAKC,sBAAsBX,EAAIC,EAAIC,EAAIC,EAAIxJ,IAC1E,EAAKuG,SAAU3Y,UAAU/6B,IAAI,2BAE/B,SAAAtF,GACE,EAAK44C,eAAe4D,KAAK,EAAKC,sBAAsBX,EAAIC,EAAIC,EAAIC,EAAIxJ,IAChE2H,EAAQG,sBAGVH,EAAQG,qBAAqBv6C,EAAGm7C,EAAK,CAAEp8C,MAAO,CAAE48C,EAAGG,EAAIF,EAAGG,GAAMnjB,IAAK,CAAE+iB,EAAGK,EAAIJ,EAAGK,QAGrF,WACE,EAAKtD,qBAAqB6D,KAAK,EAAKC,sBAAsBX,EAAIC,EAAIC,EAAIC,EAAIxJ,IAC1E,EAAKuG,SAAU3Y,UAAU1jC,OAAO,wBAC5By9C,EAAQK,oBACVL,EAAQK,wBAGZ,SAAAz6C,GACE,OAAIo6C,EAAQO,kBACHP,EAAQO,iBAAiB36C,EAAGm7C,SAOnC,YAAAsB,sBAAR,SAA8BX,EAAYC,EAAYC,EAAYC,EAAYxJ,GAC5E,MAAO,CAAEqJ,GAAE,EAAEC,GAAE,EAAEC,GAAE,EAAEC,GAAE,EAAEtC,KAAMxL,KAAKiK,eAAeuB,KAAMlH,GAAE,IAtT5C,EAAA8G,mBAAqB,IAN3BD,EAAS,GAyBjB,MAAAoD,gBACA,MAAAC,aACA,MAAAC,kBA3BQtD,GAAb,GAAa,EAAAA,YAgUb,MACE,SACSwC,EACAC,EACAC,EACAC,EACAY,EACAC,EACAtC,EACAE,EACAC,GARA,KAAAmB,KACA,KAAAC,KACA,KAAAC,KACA,KAAAC,KACA,KAAAY,gBACA,KAAAC,gBACA,KAAAtC,kBACA,KAAAE,gBACA,KAAAC,oBAVE,EAAAuB,a,i2BC5Ub,cACA,UACA,SACA,UAEA,cAmBE,WACmC9D,GADnC,MAGE,cAAO,K,OAF0B,EAAAA,iBAhB3B,EAAA2E,eAAkC,GAIlC,EAAAC,sBAAuC,GAEvC,EAAAC,aAAuB,EAEvB,EAAAC,aAAuB,EAEvB,EAAAzE,qBAAuB,EAAK7L,SAAS,IAAI,EAAA8L,cAEzC,EAAAC,qBAAuB,EAAK/L,SAAS,IAAI,EAAA8L,cAO/C,EAAK9L,SAAS,EAAAuQ,0BAA0B,EAAKH,wB,EAmWjD,OA1XgC,OAK9B,sBAAW,0BAAW,C,IAAtB,WAAuD,OAAO7O,KAAKiP,c,gCAUnE,sBAAW,kCAAmB,C,IAA9B,WAA4D,OAAOjP,KAAKsK,qBAAqBthC,O,gCAE7F,sBAAW,kCAAmB,C,IAA9B,WAA4D,OAAOg3B,KAAKwK,qBAAqBxhC,O,gCAStF,YAAAkmC,qBAAP,SAA4BC,GAA5B,WAEE,OADAnP,KAAK4O,eAAe31C,KAAKk2C,GAClB,CACLrP,QAAS,WAEP,IAAMsP,EAAgB,EAAKR,eAAehgD,QAAQugD,IAE3B,IAAnBC,GACF,EAAKR,eAAe//C,OAAOugD,EAAe,MAM3C,YAAAzE,YAAP,SAAmBrM,EAAsB+Q,EAA6BC,GAAtE,WACEtP,KAAK6K,SAAWvM,EAChB0B,KAAKuP,cAAgBF,EACrBrP,KAAK5C,eAAiBkS,EAEtBtP,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK6K,SAAU,cAAc,WAClE,EAAKiE,aAAc,EACnB,EAAKU,wBAEPxP,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK6K,SAAU,YAAa7K,KAAKyP,aAAah/C,KAAKuvC,QAC1FA,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK6K,SAAU,QAAS7K,KAAK0P,SAASj/C,KAAKuvC,SAG5E,YAAAyP,aAAR,SAAqBzmC,GAGnB,GAFAg3B,KAAK2P,gBAAkB3mC,EAElBg3B,KAAK6K,UAAa7K,KAAKuP,cAA5B,CAIA,IAAMtP,EAAWD,KAAK4P,wBAAwB5mC,EAAOg3B,KAAK6K,SAAU7K,KAAKuP,eACzE,GAAKtP,EAAL,CAGAD,KAAK8O,aAAc,EAInB,IADA,IAAMe,EAAe7mC,EAAM6mC,eAClB1hD,EAAI,EAAGA,EAAI0hD,EAAazhD,OAAQD,IAAK,CAC5C,IAAMwL,EAASk2C,EAAa1hD,GAE5B,GAAIwL,EAAOu4B,UAAU4d,SAAS,SAC5B,MAGF,GAAIn2C,EAAOu4B,UAAU4d,SAAS,eAC5B,OAIC9P,KAAK+P,iBAAoB9P,EAASuN,IAAMxN,KAAK+P,gBAAgBvC,GAAKvN,EAASwN,IAAMzN,KAAK+P,gBAAgBtC,IACzGzN,KAAKgQ,SAAS/P,GACdD,KAAK+P,gBAAkB9P,MAInB,YAAA+P,SAAR,SAAiB/P,GAGf,GAAID,KAAK+O,cAAgB9O,EAASwN,EAGhC,OAFAzN,KAAKwP,yBACLxP,KAAKiQ,YAAYhQ,GAAU,GAKGD,KAAKiP,cAAgBjP,KAAKkQ,gBAAgBlQ,KAAKiP,aAAakB,KAAMlQ,KAEhGD,KAAKwP,oBACLxP,KAAKiQ,YAAYhQ,GAAU,KAIvB,YAAAgQ,YAAR,SAAoBhQ,EAA+BmQ,GAAnD,I,EAAA,OACOpQ,KAAKqQ,wBAA2BD,IACR,QAA3B,EAAApQ,KAAKqQ,8BAAsB,SAAE9zC,SAAQ,SAAA+zC,GACnCA,WAAO/zC,SAAQ,SAAAg0C,GACTA,EAAcJ,KAAKrQ,SACrByQ,EAAcJ,KAAKrQ,gBAIzBE,KAAKqQ,uBAAyB,IAAIG,IAClCxQ,KAAK+O,YAAc9O,EAASwN,GAE9B,IAAIgD,GAAe,EAGnBzQ,KAAK4O,eAAeryC,SAAQ,SAAC4yC,EAAchhD,G,MACrCiiD,GAC+C,QAA9B,EAAG,EAAKC,8BAAsB,eAAEp6C,IAAI9H,MAOrDsiD,EAAe,EAAKC,yBAAyBviD,EAAG8xC,EAAUwQ,IAG5DtB,EAAawB,aAAa1Q,EAASwN,GAAG,SAACmD,G,QACrC,IAAI,EAAK9B,YAAT,CAGA,IAAM+B,EAA+CD,aAAK,EAALA,EAAO7iD,KAAI,SAAAoiD,GAAS,OAAGA,KAAI,MACrD,QAA3B,IAAKE,8BAAsB,SAAEp5C,IAAI9I,EAAG0iD,GACpCJ,EAAe,EAAKC,yBAAyBviD,EAAG8xC,EAAUwQ,IAI3B,QAA3B,IAAKJ,8BAAsB,eAAES,QAAS,EAAKlC,eAAexgD,QAC5D,EAAK2iD,yBAAyB9Q,EAASwN,EAAG,EAAK4C,gCAOjD,YAAAU,yBAAR,SAAiCtD,EAAWuD,GAE1C,IADA,IAAMC,EAAgB,IAAIj6C,IACjB7I,EAAI,EAAGA,EAAI6iD,EAAQF,KAAM3iD,IAAK,CACrC,IAAM+iD,EAAgBF,EAAQ/6C,IAAI9H,GAClC,GAAK+iD,EAGL,IAAK,IAAI,EAAI,EAAG,EAAIA,EAAc9iD,OAAQ,IAIxC,IAHA,IAAMmiD,EAAgBW,EAAc,GAC9BC,EAASZ,EAAcJ,KAAKxE,MAAM/6C,MAAM68C,EAAIA,EAAI,EAAI8C,EAAcJ,KAAKxE,MAAM/6C,MAAM48C,EACnF4D,EAAOb,EAAcJ,KAAKxE,MAAMlhB,IAAIgjB,EAAIA,EAAIzN,KAAKiK,eAAeuB,KAAO+E,EAAcJ,KAAKxE,MAAMlhB,IAAI+iB,EACjGA,EAAI2D,EAAQ3D,GAAK4D,EAAM5D,IAAK,CACnC,GAAIyD,EAAc/5C,IAAIs2C,GAAI,CACxB0D,EAAcriD,OAAO,IAAK,GAC1B,MAEFoiD,EAAc95C,IAAIq2C,MAMlB,YAAAkD,yBAAR,SAAiC/hD,EAAesxC,EAA+BwQ,GAA/E,I,EAAA,OACE,IAAKzQ,KAAKqQ,uBACR,OAAOI,EAOT,IAJA,IAAMG,EAAQ5Q,KAAKqQ,uBAAuBp6C,IAAItH,GAG1C0iD,GAAgB,EACX52B,EAAI,EAAGA,EAAI9rB,EAAO8rB,IACpBulB,KAAKqQ,uBAAuBn5C,IAAIujB,KAAMulB,KAAKqQ,uBAAuBp6C,IAAIwkB,KACzE42B,GAAgB,GAMpB,IAAKA,GAAiBT,EAAO,CAC3B,IAAMU,EAAiBV,EAAMW,MAAK,SAAApB,GAAQ,SAAKD,gBAAgBC,EAAKA,KAAMlQ,MACtEqR,IACFb,GAAe,EACfzQ,KAAKwR,eAAeF,IAKxB,GAAItR,KAAKqQ,uBAAuBS,OAAS9Q,KAAK4O,eAAexgD,SAAWqiD,EAEtE,IAASh2B,EAAI,EAAGA,EAAIulB,KAAKqQ,uBAAuBS,KAAMr2B,IAAK,CACzD,IAAMg3B,EAAgD,QAArC,EAAGzR,KAAKqQ,uBAAuBp6C,IAAIwkB,UAAE,eAAE82B,MAAK,SAAApB,GAAQ,SAAKD,gBAAgBC,EAAKA,KAAMlQ,MACrG,GAAIwR,EAAa,CACfhB,GAAe,EACfzQ,KAAKwR,eAAeC,GACpB,OAKN,OAAOhB,GAGD,YAAAf,SAAR,SAAiB1mC,GACf,GAAKg3B,KAAK6K,UAAa7K,KAAKuP,eAAkBvP,KAAKiP,aAAnD,CAIA,IAAMhP,EAAWD,KAAK4P,wBAAwB5mC,EAAOg3B,KAAK6K,SAAU7K,KAAKuP,eAEpEtP,GAIDD,KAAKkQ,gBAAgBlQ,KAAKiP,aAAakB,KAAMlQ,IAC/CD,KAAKiP,aAAakB,KAAKxnB,SAAS3f,EAAOg3B,KAAKiP,aAAakB,KAAK31C,QAI1D,YAAAg1C,kBAAR,SAA0BkC,EAAmBC,GACtC3R,KAAK6K,UAAa7K,KAAKiP,cAAiBjP,KAAK2P,mBAK7C+B,IAAaC,GAAW3R,KAAKiP,aAAakB,KAAKxE,MAAM/6C,MAAM68C,GAAKiE,GAAY1R,KAAKiP,aAAakB,KAAKxE,MAAMlhB,IAAIgjB,GAAKkE,KACrH3R,KAAK4R,WAAW5R,KAAK6K,SAAU7K,KAAKiP,aAAakB,KAAMnQ,KAAK2P,iBAC5D3P,KAAKiP,kBAAetjD,EACpB,EAAAkmD,aAAa7R,KAAK6O,yBAId,YAAA2C,eAAR,SAAuBjB,GAAvB,WACE,GAAKvQ,KAAK6K,UAAa7K,KAAK2P,iBAAoB3P,KAAKuP,cAArD,CAIA,IAAMtP,EAAWD,KAAK4P,wBAAwB5P,KAAK2P,gBAAiB3P,KAAK6K,SAAU7K,KAAKuP,eAEnFtP,GAKDD,KAAKkQ,gBAAgBK,EAAcJ,KAAMlQ,KAC3CD,KAAKiP,aAAesB,EACpBvQ,KAAKiP,aAAa6C,MAAQ,CACxBC,YAAa,CACXC,eAA8CrmD,IAAnC4kD,EAAcJ,KAAK4B,aAAmCxB,EAAcJ,KAAK4B,YAAYC,UAChGC,mBAAkDtmD,IAAnC4kD,EAAcJ,KAAK4B,aAAmCxB,EAAcJ,KAAK4B,YAAYE,eAEtGC,WAAW,GAEblS,KAAKmS,WAAWnS,KAAK6K,SAAU0F,EAAcJ,KAAMnQ,KAAK2P,iBAGxDY,EAAcJ,KAAK4B,YAAc,GACjCxmD,OAAOsQ,iBAAiB00C,EAAcJ,KAAK4B,YAAa,CACtDE,cAAe,CACbh8C,IAAK,0BAA8B,QAA9B,EAAuB,QAAvB,EAAM,EAAKg5C,oBAAY,eAAE6C,aAAK,eAAEC,YAAYE,eACjDh7C,IAAK,SAAAvL,G,SACkB,QAAjB,IAAKujD,oBAAY,eAAE6C,QAAS,EAAK7C,aAAa6C,MAAMC,YAAYE,gBAAkBvmD,IACpF,EAAKujD,aAAa6C,MAAMC,YAAYE,cAAgBvmD,EAChD,EAAKujD,aAAa6C,MAAMI,YACb,QAAb,IAAKrH,gBAAQ,SAAE3Y,UAAUkgB,OAAO,uBAAwB1mD,OAKhEsmD,UAAW,CACT/7C,IAAK,0BAA8B,QAA9B,EAAuB,QAAvB,EAAM,EAAKg5C,oBAAY,eAAE6C,aAAK,eAAEC,YAAYC,WACjD/6C,IAAK,SAAAvL,G,WACkB,QAAjB,IAAKujD,oBAAY,eAAE6C,SAAiC,QAAxB,EAAiB,QAAjB,IAAK7C,oBAAY,eAAE6C,aAAK,eAAEC,YAAYC,aAActmD,IAClF,EAAKujD,aAAa6C,MAAMC,YAAYC,UAAYtmD,EAC5C,EAAKujD,aAAa6C,MAAMI,WAC1B,EAAKG,oBAAoB9B,EAAcJ,KAAMzkD,QAQnDs0C,KAAK5C,gBACP4C,KAAK6O,sBAAsB51C,KAAK+mC,KAAK5C,eAAekV,wBAAuB,SAAAzgD,GAGzE,IAAMjB,EAAoB,IAAZiB,EAAEjB,MAAc,EAAIiB,EAAEjB,MAAQ,EAAI,EAAKq5C,eAAe7J,OAAOoB,MAC3E,EAAKgO,kBAAkB5+C,EAAOiB,EAAE44B,IAAM,EAAI,EAAKwf,eAAe7J,OAAOoB,cAMnE,YAAA2Q,WAAV,SAAqB7T,EAAsB6R,EAAannC,G,OACjC,QAArB,EAAIg3B,KAAKiP,oBAAY,eAAE6C,SACrB9R,KAAKiP,aAAa6C,MAAMI,WAAY,EAChClS,KAAKiP,aAAa6C,MAAMC,YAAYC,WACtChS,KAAKqS,oBAAoBlC,GAAM,GAE7BnQ,KAAKiP,aAAa6C,MAAMC,YAAYE,eACtC3T,EAAQpM,UAAU/6B,IAAI,yBAItBg5C,EAAKoC,OACPpC,EAAKoC,MAAMvpC,EAAOmnC,EAAK31C,OAInB,YAAA63C,oBAAR,SAA4BlC,EAAaqC,GACvC,IAAM7G,EAAQwE,EAAKxE,MACb8G,EAAezS,KAAKiK,eAAe7J,OAAOoB,MAC1Cx4B,EAAQg3B,KAAK0S,0BAA0B/G,EAAM/6C,MAAM48C,EAAI,EAAG7B,EAAM/6C,MAAM68C,EAAIgF,EAAe,EAAG9G,EAAMlhB,IAAI+iB,EAAG7B,EAAMlhB,IAAIgjB,EAAIgF,EAAe,OAAG9mD,IAC/H6mD,EAAYxS,KAAKsK,qBAAuBtK,KAAKwK,sBACrD6D,KAAKrlC,IAGL,YAAA4oC,WAAV,SAAqBtT,EAAsB6R,EAAannC,G,OACjC,QAArB,EAAIg3B,KAAKiP,oBAAY,eAAE6C,SACrB9R,KAAKiP,aAAa6C,MAAMI,WAAY,EAChClS,KAAKiP,aAAa6C,MAAMC,YAAYC,WACtChS,KAAKqS,oBAAoBlC,GAAM,GAE7BnQ,KAAKiP,aAAa6C,MAAMC,YAAYE,eACtC3T,EAAQpM,UAAU1jC,OAAO,yBAIzB2hD,EAAK9Y,OACP8Y,EAAK9Y,MAAMruB,EAAOmnC,EAAK31C,OASnB,YAAA01C,gBAAR,SAAwBC,EAAalQ,GACnC,IAAM0S,EAAWxC,EAAKxE,MAAM/6C,MAAM68C,IAAM0C,EAAKxE,MAAMlhB,IAAIgjB,EACjDmF,EAAkBzC,EAAKxE,MAAM/6C,MAAM68C,EAAIxN,EAASwN,EAChDoF,EAAiB1C,EAAKxE,MAAMlhB,IAAIgjB,EAAIxN,EAASwN,EAInD,OAASkF,GAAYxC,EAAKxE,MAAM/6C,MAAM48C,GAAKvN,EAASuN,GAAK2C,EAAKxE,MAAMlhB,IAAI+iB,GAAKvN,EAASuN,GACnFoF,GAAmBzC,EAAKxE,MAAMlhB,IAAI+iB,GAAKvN,EAASuN,GAChDqF,GAAkB1C,EAAKxE,MAAM/6C,MAAM48C,GAAKvN,EAASuN,GACjDoF,GAAmBC,IACpB1C,EAAKxE,MAAM/6C,MAAM68C,GAAKxN,EAASwN,GAC/B0C,EAAKxE,MAAMlhB,IAAIgjB,GAAKxN,EAASwN,GAOzB,YAAAmC,wBAAR,SAAgC5mC,EAAmBs1B,EAAsB+Q,GACvE,IAAMyD,EAASzD,EAAa0D,UAAU/pC,EAAOs1B,EAAS0B,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,MACpG,GAAKmV,EAIL,MAAO,CAAEtF,EAAGsF,EAAO,GAAIrF,EAAGqF,EAAO,GAAK9S,KAAKiK,eAAe7J,OAAOoB,QAG3D,YAAAkR,0BAAR,SAAkC/E,EAAYC,EAAYC,EAAYC,EAAYxJ,GAChF,MAAO,CAAEqJ,GAAE,EAAEC,GAAE,EAAEC,GAAE,EAAEC,GAAE,EAAEtC,KAAMxL,KAAKiK,eAAeuB,KAAMlH,GAAE,IAxXxC,GAoBlB,MAAAiK,iBApBQyE,GAAb,CAAgC,EAAAjR,YAAnB,EAAAiR,c,mGCPF,EAAAC,YAAc,iBAGd,EAAAhS,cAAgB,kE,u2BCJ3B,aACA,UACA,UAEA,UAUA,cAaE,WACmB4J,EACAqI,EACgBjJ,EACDsF,EACI4D,EACFC,GANpC,MAQE,cAAO,K,OAPU,EAAAvI,WACA,EAAAqI,iBACgB,EAAAjJ,iBACD,EAAAsF,gBACI,EAAA4D,oBACF,EAAAC,kBAlB5B,EAAAC,OAAuB,GAEvB,EAAAC,iBAA2B,EAO3B,EAAAC,iBAA6D,MAAC5nD,OAAWA,GACzE,EAAA6nD,wBAAkC,EAYxC,EAAK/U,SAAS,EAAAoB,yBAAyB,EAAKgL,SAAU,aAAa,SAAAh5C,GAAK,SAAK4hD,aAAa5hD,OAG1F,EAAK6hD,mBAAqB,SAAA7hD,GAAK,SAAK49C,aAAa59C,IACjD,EAAK8hD,oBAAsB,SAAA9hD,GAAK,SAAK+hD,cAAc/hD,IACnD,EAAKgiD,eAAiB,SAAAhiD,GAAK,SAAK69C,SAAS79C,I,EA4L7C,OAxNsC,OA+B7B,YAAAiuC,QAAP,WACE,YAAMA,QAAO,WACbE,KAAK8T,eAGA,YAAA38C,IAAP,SAAW48C,GACT/T,KAAKqT,OAAOp6C,KAAK86C,GACU,IAAvB/T,KAAKqT,OAAOjlD,QACd4xC,KAAKgU,aAIF,YAAAhJ,SAAP,SAAgBp6C,EAAgB65B,GAE9B,GAA2B,IAAvBuV,KAAKqT,OAAOjlD,OAAhB,CAKKwC,GAAU65B,IACb75B,EAAQ,EACR65B,EAAMuV,KAAKiK,eAAetM,KAAO,GAInC,IAAK,IAAIxvC,EAAI,EAAGA,EAAI6xC,KAAKqT,OAAOjlD,OAAQD,IAAK,CAC3C,IAAM4lD,EAAO/T,KAAKqT,OAAOllD,IACpB4lD,EAAKnG,GAAKh9C,GAASmjD,EAAKnG,IAAMnjB,EAAM,GACpCspB,EAAKjG,GAAKl9C,GAASmjD,EAAKjG,IAAMrjB,EAAM,GACpCspB,EAAKnG,GAAKh9C,GAASmjD,EAAKjG,GAAKrjB,EAAM,KAClCuV,KAAKiU,cAAgBjU,KAAKiU,eAAiBF,IAC7C/T,KAAKiU,aAAa1H,gBAClBvM,KAAKiU,kBAAetoD,GAEtBq0C,KAAKqT,OAAOxkD,OAAOV,IAAK,IAKD,IAAvB6xC,KAAKqT,OAAOjlD,QACd4xC,KAAK8T,gBAID,YAAAE,UAAR,WACOhU,KAAKsT,kBACRtT,KAAKsT,iBAAkB,EACvBtT,KAAK6K,SAAS30C,iBAAiB,YAAa8pC,KAAK0T,oBACjD1T,KAAK6K,SAAS30C,iBAAiB,aAAc8pC,KAAK2T,qBAClD3T,KAAK6K,SAAS30C,iBAAiB,QAAS8pC,KAAK6T,kBAIzC,YAAAC,YAAR,WACM9T,KAAKsT,kBACPtT,KAAKsT,iBAAkB,EACvBtT,KAAK6K,SAAS7c,oBAAoB,YAAagS,KAAK0T,oBACpD1T,KAAK6K,SAAS7c,oBAAoB,aAAcgS,KAAK2T,qBACrD3T,KAAK6K,SAAS7c,oBAAoB,QAASgS,KAAK6T,kBAI5C,YAAApE,aAAR,SAAqB59C,GAGfmuC,KAAKuT,iBAAiB,KAAO1hD,EAAEqiD,OAASlU,KAAKuT,iBAAiB,KAAO1hD,EAAEsiD,QACzEnU,KAAKgQ,SAASn+C,GAEdmuC,KAAKuT,iBAAmB,CAAC1hD,EAAEqiD,MAAOriD,EAAEsiD,SAIhC,YAAAnE,SAAR,SAAiBn+C,GAAjB,WACQkiD,EAAO/T,KAAKoU,iBAAiBviD,GAG/BkiD,IAAS/T,KAAKiU,eAMdjU,KAAKiU,eACPjU,KAAKiU,aAAa1H,gBAClBvM,KAAKiU,kBAAetoD,EAChBq0C,KAAKqU,iBACPz9B,aAAaopB,KAAKqU,kBAKjBN,IAGL/T,KAAKiU,aAAeF,EAGhBA,EAAKpF,eACPoF,EAAKpF,cAAc98C,GAIrBmuC,KAAKqU,gBAAkBz/C,OAAO8Q,YAAW,WAAM,SAAK4uC,WAAWziD,KAAImuC,KAAKoT,gBAAgBj7C,QAAQo8C,6BAG1F,YAAAD,WAAR,SAAmBziD,GACjBmuC,KAAKqU,qBAAkB1oD,EACvB,IAAMooD,EAAO/T,KAAKoU,iBAAiBviD,GACnCkiD,WAAM1H,gBAAgBx6C,IAGhB,YAAA4hD,aAAR,SAAqB5hD,GAMnB,GAHAmuC,KAAKwT,wBAA0BxT,KAAKwU,sBAG/BxU,KAAKsT,gBAAV,CAMA,IAAMS,EAAO/T,KAAKoU,iBAAiBviD,IAC/BkiD,aAAI,EAAJA,EAAMvH,iBAAiB36C,MACzBA,EAAE+uC,iBACF/uC,EAAEk8B,8BAIE,YAAA6lB,cAAR,SAAsB/hD,GAGhBmuC,KAAKiU,eACPjU,KAAKiU,aAAa1H,gBAClBvM,KAAKiU,kBAAetoD,EAChBq0C,KAAKqU,iBACPz9B,aAAaopB,KAAKqU,mBAKhB,YAAA3E,SAAR,SAAiB79C,GAGf,IAAMkiD,EAAO/T,KAAKoU,iBAAiBviD,GAC7B4iD,EAAyBzU,KAAKwU,sBAEhCT,GAAQU,IAA2BzU,KAAKwT,0BAC1CO,EAAKrF,cAAc78C,GACnBA,EAAE+uC,iBACF/uC,EAAEk8B,6BAIE,YAAAymB,oBAAR,WACE,IAAMrR,EAAgBnD,KAAKmT,kBAAkBhQ,cAC7C,OAAOA,EAAgBA,EAAc/0C,OAAS,GAGxC,YAAAgmD,iBAAR,SAAyBviD,GACvB,IAAMihD,EAAS9S,KAAKuP,cAAcwD,UAAUlhD,EAAGmuC,KAAKkT,eAAgBlT,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,MAClH,GAAKmV,EAKL,IAFA,IAAMtF,EAAIsF,EAAO,GACXrF,EAAIqF,EAAO,GACR3kD,EAAI,EAAGA,EAAI6xC,KAAKqT,OAAOjlD,OAAQD,IAAK,CAC3C,IAAM4lD,EAAO/T,KAAKqT,OAAOllD,GACzB,GAAI4lD,EAAKnG,KAAOmG,EAAKjG,IAEnB,GAAIL,IAAMsG,EAAKnG,IAAMJ,GAAKuG,EAAKpG,IAAMH,EAAIuG,EAAKlG,GAC5C,OAAOkG,OAIT,GAAKtG,IAAMsG,EAAKnG,IAAMJ,GAAKuG,EAAKpG,IAC3BF,IAAMsG,EAAKjG,IAAMN,EAAIuG,EAAKlG,IAC1BJ,EAAIsG,EAAKnG,IAAMH,EAAIsG,EAAKjG,GAC3B,OAAOiG,IAlNY,GAgBxB,MAAAxF,gBACA,MAAAmG,eACA,MAAAC,mBACA,MAAAC,kBAnBQC,GAAb,CAAsC,EAAA9S,YAAzB,EAAA8S,oB,uFCTb,iBAME,WACUC,GAAA,KAAAA,kBA6CZ,OAzCS,YAAAhV,QAAP,WACME,KAAK+U,kBACPngD,OAAOogD,qBAAqBhV,KAAK+U,iBACjC/U,KAAK+U,qBAAkBppD,IAIpB,YAAAy1C,QAAP,SAAe6T,EAA8BC,EAA4BC,GAAzE,WACEnV,KAAKoV,UAAYD,EAEjBF,OAAwBtpD,IAAbspD,EAAyBA,EAAW,EAC/CC,OAAoBvpD,IAAXupD,EAAuBA,EAASlV,KAAKoV,UAAY,EAE1DpV,KAAKqV,eAA+B1pD,IAAnBq0C,KAAKqV,UAA0BroD,KAAKk5C,IAAIlG,KAAKqV,UAAWJ,GAAYA,EACrFjV,KAAKsV,aAA2B3pD,IAAjBq0C,KAAKsV,QAAwBtoD,KAAK8R,IAAIkhC,KAAKsV,QAASJ,GAAUA,EAEzElV,KAAK+U,kBAIT/U,KAAK+U,gBAAkBngD,OAAO++B,uBAAsB,WAAM,SAAK4hB,qBAGzD,YAAAA,cAAR,WAEE,QAAuB5pD,IAAnBq0C,KAAKqV,gBAA4C1pD,IAAjBq0C,KAAKsV,cAA4C3pD,IAAnBq0C,KAAKoV,UAAvE,CAKA,IAAMxkD,EAAQ5D,KAAK8R,IAAIkhC,KAAKqV,UAAW,GACjC5qB,EAAMz9B,KAAKk5C,IAAIlG,KAAKsV,QAAStV,KAAKoV,UAAY,GAGpDpV,KAAKqV,eAAY1pD,EACjBq0C,KAAKsV,aAAU3pD,EACfq0C,KAAK+U,qBAAkBppD,EAGvBq0C,KAAK8U,gBAAgBlkD,EAAO65B,KAEhC,EApDA,GAAa,EAAAyT,mB,scCLb,IAcA,yE,OACU,EAAAsX,yBAAmC5gD,OAAO6gD,iB,EAgDpD,OAjDsC,OAM7B,YAAA7V,YAAP,SAAmB8V,GAAnB,WACM1V,KAAK2V,WACP3V,KAAK4V,gBAEP5V,KAAK2V,UAAYD,EACjB1V,KAAK6V,eAAiB,WACf,EAAKF,YAGV,EAAKA,UAAU/gD,OAAO6gD,iBAAkB,EAAKD,0BAC7C,EAAKM,eAEP9V,KAAK8V,cAGA,YAAAhW,QAAP,WACE,YAAMA,QAAO,WACbE,KAAK4V,iBAGC,YAAAE,WAAR,W,MACO9V,KAAK6V,iBAKoB,QAA9B,EAAA7V,KAAK+V,iCAAyB,SAAEC,eAAehW,KAAK6V,gBAGpD7V,KAAKwV,yBAA2B5gD,OAAO6gD,iBACvCzV,KAAK+V,0BAA4BnhD,OAAOqhD,WAAW,2BAA2BrhD,OAAO6gD,iBAAgB,SACrGzV,KAAK+V,0BAA0BG,YAAYlW,KAAK6V,kBAG3C,YAAAD,cAAP,WACO5V,KAAK+V,2BAA8B/V,KAAK2V,WAAc3V,KAAK6V,iBAGhE7V,KAAK+V,0BAA0BC,eAAehW,KAAK6V,gBACnD7V,KAAK+V,+BAA4BpqD,EACjCq0C,KAAK2V,eAAYhqD,EACjBq0C,KAAK6V,oBAAiBlqD,IAE1B,EAjDA,CAdA,OAcsCo2C,YAAzB,EAAApC,oB,8bCMb,cACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACA,UACA,UAEA,UAEA,UACA,UACA,UACA,UACA,UACA,UACA,SAEA,UACA,UACA,UACA,UAEA,UACA,UAGM55B,EAAwC,oBAAXnR,OAA0BA,OAAOmR,SAAW,KAE/E,cA8EE,WACE5N,QAAA,IAAAA,MAAA,IADF,MAGE,YAAMA,IAAQ,K,OApET,EAAAg+C,QAAyBC,EAoBxB,EAAAC,iBAA2B,EAW3B,EAAAC,cAAgB,IAAI,EAAA/L,aAEpB,EAAAjL,OAAS,IAAI,EAAAiL,aAEb,EAAAgM,UAAY,IAAI,EAAAhM,aAEhB,EAAAiM,mBAAqB,IAAI,EAAAjM,aAEzB,EAAAkM,eAAiB,IAAI,EAAAlM,aAErB,EAAAmM,QAAW,IAAI,EAAAnM,aAGf,EAAAoM,SAAW,IAAI,EAAApM,aAEf,EAAAqM,QAAU,IAAI,EAAArM,aAEd,EAAAsM,mBAAqB,IAAI,EAAAtM,aAEzB,EAAAuM,kBAAoB,IAAI,EAAAvM,aAoB9B,EAAKwM,SAEL,EAAKC,UAAY,EAAKC,sBAAsBC,eAAe,EAAA/L,WAC3D,EAAKgM,WAAa,EAAK1Y,SAAS,EAAKwY,sBAAsBC,eAAe,EAAAlE,aAG1E,EAAKvU,SAAS,EAAK2Y,cAAcC,eAAc,WAAM,SAAKC,WAC1D,EAAK7Y,SAAS,EAAK2Y,cAAcG,sBAAqB,SAAC3mD,EAAO65B,GAAQ,SAAK2W,QAAQxwC,EAAO65B,OAC1F,EAAKgU,SAAS,EAAK2Y,cAAcI,gBAAe,WAAM,SAAKC,YAC3D,EAAKhZ,SAAS,EAAK2Y,cAAcM,+BAA8B,SAAAp3C,GAAQ,SAAKq3C,sBAAsBr3C,OAClG,EAAKm+B,SAAS,EAAK2Y,cAAcQ,mBAAkB,SAAC5uC,GAAU,SAAK6uC,iBAAiB7uC,OACpF,EAAKy1B,SAAS,EAAAqZ,aAAa,EAAKV,cAAcW,aAAc,EAAKzB,gBACjE,EAAK7X,SAAS,EAAAqZ,aAAa,EAAKV,cAAcY,cAAe,EAAKvB,iBAClE,EAAKhY,SAAS,EAAAqZ,aAAa,EAAKV,cAActY,WAAY,EAAK+X,qBAC/D,EAAKpY,SAAS,EAAAqZ,aAAa,EAAKV,cAAclY,UAAW,EAAK4X,oBAG9D,EAAKrY,SAAS,EAAKwL,eAAevL,UAAS,SAAA7sC,GAAK,SAAKomD,aAAapmD,EAAE25C,KAAM35C,EAAE8rC,U,EA+lChF,OAnsC8B,OAgB5B,sBAAW,sBAAO,C,IAAlB,WAAoD,OAAOqC,KAAKkY,eAAe//C,S,gCA6B/E,sBAAW,2BAAY,C,IAAvB,WAA0C,OAAO6nC,KAAKsW,cAActtC,O,gCAEpE,sBAAW,oBAAK,C,IAAhB,WAAuE,OAAOg3B,KAAKV,OAAOt2B,O,gCAE1F,sBAAW,uBAAQ,C,IAAnB,WAAgE,OAAOg3B,KAAKuW,UAAUvtC,O,gCAEtF,sBAAW,gCAAiB,C,IAA5B,WAA+C,OAAOg3B,KAAKwW,mBAAmBxtC,O,gCAE9E,sBAAW,4BAAa,C,IAAxB,WAA6C,OAAOg3B,KAAKyW,eAAeztC,O,gCAExE,sBAAW,qBAAM,C,IAAjB,WAAqC,OAAOg3B,KAAK0W,QAAQ1tC,O,gCAGzD,sBAAW,sBAAO,C,IAAlB,WAAqC,OAAOg3B,KAAK2W,SAAS3tC,O,gCAE1D,sBAAW,qBAAM,C,IAAjB,WAAoC,OAAOg3B,KAAK4W,QAAQ5tC,O,gCAExD,sBAAW,yBAAU,C,IAArB,WAA0C,OAAOg3B,KAAK6W,mBAAmB7tC,O,gCAEzE,sBAAW,wBAAS,C,IAApB,WAAyC,OAAOg3B,KAAK8W,kBAAkB9tC,O,gCAuC/D,YAAA6uC,iBAAR,SAAyB7uC,G,QACvB,GAAKg3B,KAAKmY,cAAV,CAEA,IAAwB,UAAAnvC,EAAMk+B,OAAN,eAAc,CAAjC,IAAMkR,EAAS,KACZjU,EAAQ,EAAAT,KAAKuB,QAAQmT,EAAU3P,IAAK2P,EAAU1P,MAAO0P,EAAUxP,MAErE5I,KAAKmY,cAAejR,OAAOe,KAAKmQ,EAAUC,YAAclU,EAGvC,QAAnB,EAAAnE,KAAK5C,sBAAc,SAAEkb,UAAUtY,KAAKmY,cAAejR,QACtC,QAAb,EAAAlH,KAAKuY,gBAAQ,SAAEC,cAAcxY,KAAKmY,cAAejR,UAG5C,YAAApH,QAAP,W,UACME,KAAKyY,cAGT,YAAM3Y,QAAO,WACM,QAAnB,EAAAE,KAAK5C,sBAAc,SAAE0C,UACrBE,KAAK0Y,4BAAyB/sD,EAC9Bq0C,KAAK2Y,MAAQ,aACW,QAAxB,EAAY,QAAZ,EAAA3Y,KAAK1B,eAAO,eAAE1a,kBAAU,SAAEgC,YAAYoa,KAAK1B,WAGnC,YAAAyY,OAAV,WACE,YAAMA,OAAM,WAEZ/W,KAAK0Y,4BAAyB/sD,GAMhC,sBAAW,qBAAM,C,IAAjB,WACE,OAAOq0C,KAAK4Y,QAAQt8B,Q,gCAMf,YAAAqkB,MAAP,WACMX,KAAKqC,UACPrC,KAAKqC,SAAS1B,MAAM,CAAEkY,eAAe,KAI/B,YAAAC,eAAV,SAAyB9pD,G,YAIvB,OAHA,YAAM8pD,eAAc,UAAC9pD,GAGbA,GACN,IAAK,aACL,IAAK,WAEgB,QAAnB,EAAAgxC,KAAK5C,sBAAc,SAAEhmC,QACA,QAArB,EAAA4oC,KAAK+Y,wBAAgB,SAAElxC,UACvB,MACF,IAAK,cACL,IAAK,cAEHm4B,KAAKoB,QAAQpB,KAAKI,OAAOqN,EAAGzN,KAAKI,OAAOqN,GACxC,MACF,IAAK,6BACL,IAAK,gBACL,IAAK,aACL,IAAK,aACL,IAAK,iBACL,IAAK,uBAECzN,KAAK5C,iBACP4C,KAAK5C,eAAehmC,QACpB4oC,KAAK5C,eAAesB,SAASsB,KAAKwL,KAAMxL,KAAKrC,MAC7CqC,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,IAE9B,MACF,IAAK,eACCqC,KAAK5C,iBACP4C,KAAK5C,eAAe4b,YAAYhZ,KAAKiZ,mBACrCjZ,KAAK5C,eAAesB,SAASsB,KAAKwL,KAAMxL,KAAKrC,OAE/C,MACF,IAAK,aACU,QAAb,EAAAqC,KAAKuY,gBAAQ,SAAEW,iBACf,MACF,IAAK,mBACClZ,KAAKkY,eAAe//C,QAAQghD,kBACzBnZ,KAAKoZ,uBAAyBpZ,KAAK5C,iBACtC4C,KAAKoZ,sBAAwB,IAAI,EAAApX,qBAAqBhC,KAAMA,KAAK5C,kBAGzC,QAA1B,EAAA4C,KAAKoZ,6BAAqB,SAAEtZ,UAC5BE,KAAKoZ,2BAAwBztD,GAE/B,MACF,IAAK,eAAgBq0C,KAAK4Y,QAAQS,gBAAiB,MACnD,IAAK,QACHrZ,KAAKsZ,UAAUtZ,KAAKkY,eAAe//C,QAAQkwC,SAQzC,YAAAkR,iBAAR,SAAyB7W,GACnB1C,KAAKwZ,aAAajX,gBAAgBkX,WACpCzZ,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,MAE9C3Z,KAAK4Z,kBAAkBlX,GACvB1C,KAAK1B,QAASpM,UAAU/6B,IAAI,SAC5B6oC,KAAK6Z,cACL7Z,KAAK2W,SAAStI,QAOT,YAAAyL,KAAP,W,MACE,OAAoB,QAApB,EAAO9Z,KAAKqC,gBAAQ,eAAEyX,QAMhB,YAAAC,gBAAR,WAGE/Z,KAAKqC,SAAUr2C,MAAQ,GACvBg0C,KAAKoB,QAAQpB,KAAKI,OAAOqN,EAAGzN,KAAKI,OAAOqN,GACpCzN,KAAKwZ,aAAajX,gBAAgBkX,WACpCzZ,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,MAE9C3Z,KAAK1B,QAASpM,UAAU1jC,OAAO,SAC/BwxC,KAAK4W,QAAQvI,QAGP,YAAA2L,cAAR,WACE,GAAKha,KAAKqC,UAAarC,KAAKI,OAAO6Z,qBAAsBja,KAAKka,mBAAoBC,aAAgBna,KAAK5C,eAAvG,CAGA,IAAMgd,EAAUpa,KAAKI,OAAOia,MAAQra,KAAKI,OAAOqN,EAC1C6M,EAAata,KAAKI,OAAOC,MAAMpqC,IAAImkD,GACzC,GAAKE,EAAL,CAGA,IAAMC,EAAUvtD,KAAKk5C,IAAIlG,KAAKI,OAAOoN,EAAGxN,KAAKwL,KAAO,GAC9CgP,EAAaxa,KAAK5C,eAAewE,WAAWC,iBAC5CiB,EAAQwX,EAAWG,SAASF,GAC5BG,EAAY1a,KAAK5C,eAAewE,WAAW+Y,gBAAkB7X,EAC7D8X,EAAY5a,KAAKI,OAAOqN,EAAIzN,KAAK5C,eAAewE,WAAWC,iBAC3DgZ,EAAaN,EAAUva,KAAK5C,eAAewE,WAAW+Y,gBAI5D3a,KAAKqC,SAAS5tB,MAAMgoB,KAAOoe,EAAa,KACxC7a,KAAKqC,SAAS5tB,MAAMkoB,IAAMie,EAAY,KACtC5a,KAAKqC,SAAS5tB,MAAMquB,MAAQ4X,EAAY,KACxC1a,KAAKqC,SAAS5tB,MAAMqtB,OAAS0Y,EAAa,KAC1Cxa,KAAKqC,SAAS5tB,MAAMqmC,WAAaN,EAAa,KAC9Cxa,KAAKqC,SAAS5tB,MAAMsuB,OAAS,QAMvB,YAAAgY,YAAR,sBACE/a,KAAKgb,YAGLhb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAU,QAAQ,SAACt1B,GAGxD,EAAKiyC,gBAGV,EAAAC,YAAYlyC,EAAO,EAAKmqC,uBAE1B,IAAMgI,EAAsB,SAACnyC,GAAgC,SAAAoyC,iBAAiBpyC,EAAO,EAAKq5B,SAAW,EAAKmX,eAC1GxZ,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,QAAS8Y,IAChEnb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAU,QAAS6c,IAG3D/E,EAAQiF,UAEVrb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAU,aAAa,SAACt1B,GAC7C,IAAjBA,EAAMsyC,QACR,EAAAC,kBAAkBvyC,EAAO,EAAKq5B,SAAW,EAAKM,cAAgB,EAAKwQ,kBAAoB,EAAKh7C,QAAQqjD,2BAIxGxb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAU,eAAe,SAACt1B,GACpE,EAAAuyC,kBAAkBvyC,EAAO,EAAKq5B,SAAW,EAAKM,cAAgB,EAAKwQ,kBAAoB,EAAKh7C,QAAQqjD,2BAOpGpF,EAAQqF,SAGVzb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAU,YAAY,SAACt1B,GAC5C,IAAjBA,EAAMsyC,QACR,EAAA7Y,6BAA6Bz5B,EAAO,EAAKq5B,SAAW,EAAKM,oBASzD,YAAAqY,UAAR,sBACEhb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,SAAS,SAACK,GAAsB,SAAKgZ,OAAOhZ,MAAK,IACxG1C,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,WAAW,SAACK,GAAsB,SAAKiZ,SAASjZ,MAAK,IAC5G1C,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,YAAY,SAACK,GAAsB,SAAKkZ,UAAUlZ,MAAK,IAC9G1C,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,oBAAoB,WAAM,SAAK6X,mBAAoB2B,uBAC1G7b,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,qBAAqB,SAACxwC,GAAwB,SAAKqoD,mBAAoB4B,kBAAkBjqD,OAChJmuC,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAW,kBAAkB,WAAM,SAAK6X,mBAAoB6B,qBACxG/b,KAAKvB,SAASuB,KAAKpB,UAAS,WAAM,SAAKsb,mBAAoB8B,gCAC3Dhc,KAAKvB,SAASuB,KAAKpB,UAAS,SAAA/sC,GAAK,SAAKoqD,oBAAoBpqD,EAAEjB,MAAOiB,EAAE44B,UAQhE,YAAAwjB,KAAP,SAAY/yC,GAAZ,WACE,IAAKA,EACH,MAAM,IAAIqjC,MAAM,uCAGbrjC,EAAOghD,aACVlc,KAAKkK,YAAY4B,MAAM,2EAGzB9L,KAAKmc,UAAYjhD,EAAOk0B,cAGxB4Q,KAAK1B,QAAU0B,KAAKmc,UAAUtrC,cAAc,OAC5CmvB,KAAK1B,QAAQ3R,IAAM,MACnBqT,KAAK1B,QAAQpM,UAAU/6B,IAAI,YAC3B6oC,KAAK1B,QAAQpM,UAAU/6B,IAAI,SAC3B6oC,KAAK1B,QAAQjZ,aAAa,WAAY,KACtC2a,KAAK1B,QAAQjZ,aAAa,OAAQ,YAClCnqB,EAAO2qB,YAAYma,KAAK1B,SAIxB,IAAM8d,EAAWr2C,EAASs2C,yBAC1Brc,KAAKsc,iBAAmBv2C,EAAS8K,cAAc,OAC/CmvB,KAAKsc,iBAAiBpqB,UAAU/6B,IAAI,kBACpCilD,EAASv2B,YAAYma,KAAKsc,kBAC1Btc,KAAKuc,oBAAsBx2C,EAAS8K,cAAc,OAClDmvB,KAAKuc,oBAAoBrqB,UAAU/6B,IAAI,qBACvC6oC,KAAKsc,iBAAiBz2B,YAAYma,KAAKuc,qBAEvCvc,KAAK2C,cAAgB58B,EAAS8K,cAAc,OAC5CmvB,KAAK2C,cAAczQ,UAAU/6B,IAAI,gBAGjC6oC,KAAKwc,iBAAmBz2C,EAAS8K,cAAc,OAC/CmvB,KAAKwc,iBAAiBtqB,UAAU/6B,IAAI,iBACpC6oC,KAAK2C,cAAc9c,YAAYma,KAAKwc,kBACpCJ,EAASv2B,YAAYma,KAAK2C,eAE1B3C,KAAKqC,SAAWt8B,EAAS8K,cAAc,YACvCmvB,KAAKqC,SAASnQ,UAAU/6B,IAAI,yBAC5B6oC,KAAKqC,SAAShd,aAAa,aAAc2b,EAAQiS,aACjDjT,KAAKqC,SAAShd,aAAa,iBAAkB,SAC7C2a,KAAKqC,SAAShd,aAAa,cAAe,OAC1C2a,KAAKqC,SAAShd,aAAa,iBAAkB,OAC7C2a,KAAKqC,SAAShd,aAAa,aAAc,SACzC2a,KAAKqC,SAASxB,SAAW,EACzBb,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAU,SAAS,SAACK,GAAsB,SAAK6W,iBAAiB7W,OAC5G1C,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKqC,SAAU,QAAQ,WAAM,SAAK0X,sBACzE/Z,KAAKwc,iBAAiB32B,YAAYma,KAAKqC,UAEvC,IAAMoa,EAAqBzc,KAAKiX,sBAAsBC,eAAe,EAAAwF,mBAAoB1c,KAAKqC,UAC9FrC,KAAKiX,sBAAsB0F,WAAW,EAAAC,oBAAqBH,GAE3Dzc,KAAK+Y,iBAAmB/Y,KAAKiX,sBAAsBC,eAAe,EAAA2F,gBAAiB7c,KAAKmc,UAAWnc,KAAKwc,kBACxGxc,KAAKiX,sBAAsB0F,WAAW,EAAAG,iBAAkB9c,KAAK+Y,kBAE7D/Y,KAAK+c,OAAS/c,KAAK7nC,QAAQkwC,OAASrI,KAAK+c,OACzC/c,KAAKmY,cAAgB,IAAI,EAAAtO,aAAa9jC,EAAUi6B,KAAK7nC,QAAQgvC,mBAC7DnH,KAAKvB,SAASuB,KAAKkY,eAAe8E,gBAAe,SAAAnrD,GAAK,SAAKsmD,cAAehQ,gBAAgBt2C,OAC1FmuC,KAAKmY,cAAc/P,SAASpI,KAAK+c,QAEjC/c,KAAKid,wBAA0Bjd,KAAKiX,sBAAsBC,eAAe,EAAAgG,wBACzEld,KAAKiX,sBAAsB0F,WAAW,EAAAQ,wBAAyBnd,KAAKid,yBAEpE,IAAMG,EAAWpd,KAAKiZ,kBACtBjZ,KAAK5C,eAAiB4C,KAAKvB,SAASuB,KAAKiX,sBAAsBC,eAAe,EAAAmG,cAAeD,EAAUpd,KAAKrC,KAAMqC,KAAK2C,gBACvH3C,KAAKiX,sBAAsB0F,WAAW,EAAAW,eAAgBtd,KAAK5C,gBAC3D4C,KAAKvB,SAASuB,KAAK5C,eAAekV,wBAAuB,SAAAzgD,GAAK,SAAK0kD,UAAUlI,KAAKx8C,OAClFmuC,KAAKtB,UAAS,SAAA7sC,GAAK,SAAKurC,eAAgBmgB,OAAO1rD,EAAE25C,KAAM35C,EAAE8rC,SAEzDqC,KAAKwd,iBAAmBz3C,EAAS8K,cAAc,OAC/CmvB,KAAKwd,iBAAiBtrB,UAAU/6B,IAAI,oBACpC6oC,KAAKka,mBAAqBla,KAAKiX,sBAAsBC,eAAe,EAAAuG,kBAAmBzd,KAAKqC,SAAUrC,KAAKwd,kBAC3Gxd,KAAKwc,iBAAiB32B,YAAYma,KAAKwd,kBAGvCxd,KAAK1B,QAAQzY,YAAYu2B,GAEzBpc,KAAK0d,cAAgB1d,KAAKiX,sBAAsBC,eAAe,EAAAyG,cAC/D3d,KAAKiX,sBAAsB0F,WAAW,EAAAiB,cAAe5d,KAAK0d,eAC1D1d,KAAKuP,cAAgBvP,KAAKiX,sBAAsBC,eAAe,EAAA2G,cAC/D7d,KAAKiX,sBAAsB0F,WAAW,EAAAjI,cAAe1U,KAAKuP,eAE1DvP,KAAKuY,SAAWvY,KAAKiX,sBAAsBC,eAAe,EAAA4G,UACxD,SAACC,GAAmB,SAAKrd,YAAYqd,GAAQ,EAAM,KACnD/d,KAAKsc,iBACLtc,KAAKuc,qBAEPvc,KAAKuY,SAASC,cAAcxY,KAAKmY,cAAcjR,QAC/ClH,KAAKvB,SAASuB,KAAKoX,cAAc4G,wBAAuB,WAAM,SAAKzF,SAAUW,qBAC7ElZ,KAAKvB,SAASuB,KAAKuY,UAEnBvY,KAAKvB,SAASuB,KAAK+X,cAAa,WAC9B,EAAK3a,eAAgB2a,eACrB,EAAKiC,oBAEPha,KAAKvB,SAASuB,KAAKtB,UAAS,WAAM,SAAKtB,eAAgBsB,SAAS,EAAK8M,KAAM,EAAK7N,UAChFqC,KAAKvB,SAASuB,KAAKT,QAAO,WAAM,SAAKnC,eAAgBmC,aACrDS,KAAKvB,SAASuB,KAAKie,SAAQ,WAAM,SAAK7gB,eAAgB6gB,cACtDje,KAAKvB,SAASuB,KAAK5C,eAAeqC,oBAAmB,WAAM,SAAK8Y,SAAUW,qBAE1ElZ,KAAKmT,kBAAoBnT,KAAKvB,SAASuB,KAAKiX,sBAAsBC,eAAe,EAAAgH,iBAC/Ele,KAAK1B,QACL0B,KAAK2C,cACL3C,KAAKmX,aAEPnX,KAAKiX,sBAAsB0F,WAAW,EAAAhI,kBAAmB3U,KAAKmT,mBAC9DnT,KAAKvB,SAASuB,KAAKmT,kBAAkBgL,sBAAqB,SAAAtsD,GAAK,SAAK6uC,YAAY7uC,EAAEksD,OAAQlsD,EAAEusD,yBAC5Fpe,KAAKvB,SAASuB,KAAKmT,kBAAkBkL,mBAAkB,WAAM,SAAK7H,mBAAmBnI,WACrFrO,KAAKvB,SAASuB,KAAKmT,kBAAkBmL,iBAAgB,SAAAzsD,GAAK,SAAKurC,eAAgBmhB,mBAAmB1sD,EAAEjB,MAAOiB,EAAE44B,IAAK54B,EAAE2sD,sBACpHxe,KAAKvB,SAASuB,KAAKmT,kBAAkBsL,uBAAsB,SAAAjkD,GAIzD,EAAK6nC,SAAUr2C,MAAQwO,EACvB,EAAK6nC,SAAU1B,QACf,EAAK0B,SAAUkB,aAEjBvD,KAAKvB,SAASuB,KAAK0e,UAAU11C,OAAM,SAAA05B,GACjC,EAAK6V,SAAUW,iBACf,EAAK/F,kBAAmB/R,cAE1BpB,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAKsc,iBAAkB,UAAU,WAAM,SAAKnJ,kBAAmB/R,cAEtGpB,KAAK8K,kBAAoB9K,KAAKiX,sBAAsBC,eAAe,EAAArC,iBAAkB7U,KAAK1B,QAAS0B,KAAK2C,eACxG3C,KAAKvB,SAASuB,KAAK8K,mBACnB9K,KAAKvB,SAASuB,KAAKnB,UAAS,WAAM,SAAKiM,kBAAmBE,eAC1DhL,KAAKgX,UAAUrM,YAAY3K,KAAK1B,QAAS0B,KAAK8K,mBAC9C9K,KAAKmX,WAAWxM,YAAY3K,KAAK1B,QAAS0B,KAAKuP,cAAevP,KAAK5C,gBAGnE4C,KAAKvB,SAAS,EAAAoB,yBAAyBG,KAAK1B,QAAS,aAAa,SAACzsC,GAAkB,SAAKshD,kBAAmBwL,YAAY9sD,OAGrHmuC,KAAK4e,kBAAkBC,sBACzB7e,KAAKmT,kBAAkB2L,UACvB9e,KAAK1B,QAAQpM,UAAU/6B,IAAI,wBAE3B6oC,KAAKmT,kBAAkB4L,SAGrB/e,KAAK7nC,QAAQghD,mBAGfnZ,KAAKoZ,sBAAwB,IAAI,EAAApX,qBAAqBhC,KAAMA,KAAK5C,iBAInE4C,KAAK+Y,iBAAiBlxC,UAGtBm4B,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,GAG5BqC,KAAK+a,cAIL/a,KAAKgf,aAGC,YAAA/F,gBAAR,WACE,OAAQjZ,KAAK7nC,QAAQ8mD,cACnB,IAAK,SAAU,OAAOjf,KAAKiX,sBAAsBC,eAAe,EAAAgI,SAAUlf,KAAKmY,cAAejR,OAAQlH,KAAK2C,cAAgB3C,KAAKgX,UAAWhX,KAAKmX,YAChJ,IAAK,MAAO,OAAOnX,KAAKiX,sBAAsBC,eAAe,EAAAiI,YAAanf,KAAKmY,cAAejR,OAAQlH,KAAK1B,QAAU0B,KAAK2C,cAAgB3C,KAAKsc,iBAAmBtc,KAAKgX,UAAWhX,KAAKmX,YACvL,QAAS,MAAM,IAAI5Y,MAAM,8BAA8ByB,KAAK7nC,QAAQ8mD,aAAY,OAQ5E,YAAA3F,UAAR,SAAkBjR,G,UAChBrI,KAAK+c,OAAS1U,EACI,QAAlB,EAAArI,KAAKmY,qBAAa,SAAE/P,SAASC,GACV,QAAnB,EAAArI,KAAK5C,sBAAc,SAAEkb,UAAUtY,KAAKmY,cAAejR,QACtC,QAAb,EAAAlH,KAAKuY,gBAAQ,SAAEC,cAAcxY,KAAKmY,cAAejR,SAkB5C,YAAA8X,UAAP,sBACQ9hB,EAAO8C,KACP/gC,EAAK+gC,KAAK1B,QAGhB,SAAS8gB,EAAU1c,GAEjB,IAKI2c,EACAC,EANElkB,EAAM8B,EAAKqS,cAAegQ,iBAAiB7c,EAAIxF,EAAKyF,cAAgBzF,EAAKsO,KAAMtO,EAAKS,MAC1F,IAAKvC,EACH,OAAO,EAKT,OAAcsH,EAAI8c,cAAgB9c,EAAGpiC,MACnC,IAAK,YACHg/C,EAAS,QACU3zD,IAAf+2C,EAAG+c,SAELJ,EAAM,OACY1zD,IAAd+2C,EAAG4Y,SACL+D,EAAM3c,EAAG4Y,OAAS,EAAI5Y,EAAG4Y,OAAS,IAIpC+D,EAAmB,EAAb3c,EAAG+c,QAAc,EACR,EAAb/c,EAAG+c,QAAc,EACF,EAAb/c,EAAG+c,QAAc,E,EAGvB,MACF,IAAK,UACHH,EAAS,EACTD,EAAM3c,EAAG4Y,OAAS,EAAI5Y,EAAG4Y,OAAS,EAClC,MACF,IAAK,YACHgE,EAAS,EACTD,EAAM3c,EAAG4Y,OAAS,EAAI5Y,EAAG4Y,OAAS,EAClC,MACF,IAAK,QAE+B,IAA7B5Y,EAAkBgd,SACrBJ,EAAU5c,EAAkBgd,OAAS,EAAI,EAAqB,GAEhEL,EAAM,EACN,MACF,QAEE,OAAO,EAKX,aAAe1zD,IAAX2zD,QAAgC3zD,IAAR0zD,GAAqBA,EAAM,IAIhDniB,EAAK0hB,kBAAkBe,kBAAkB,CAC9CC,IAAKxkB,EAAIoS,EAAI,GACbqS,IAAKzkB,EAAIqS,EAAI,GACb6N,OAAQ+D,EACRC,OAAM,EACNQ,KAAMpd,EAAGqd,QACTC,IAAKtd,EAAGj5B,OACRW,MAAOs4B,EAAGud,WAYd,IAAMC,EAAmE,CACvEC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,UAAW,MAEPC,EACK,SAAC7d,GASR,OARA0c,EAAU1c,GACLA,EAAG+c,UAEN,EAAKtD,UAAWnuB,oBAAoB,UAAWkyB,EAAgBC,SAC3DD,EAAgBG,WAClB,EAAKlE,UAAWnuB,oBAAoB,YAAakyB,EAAgBG,YAG9D,EAAKG,OAAO9d,IAVjB6d,EAYG,SAAC7d,GAGN,OAFA0c,EAAU1c,GACVA,EAAG9B,iBACI,EAAK4f,OAAO9d,IAfjB6d,EAiBO,SAAC7d,GAENA,EAAG+c,SACLL,EAAU1c,IApBV6d,EAuBO,SAAC7d,GAELA,EAAG+c,SACNL,EAAU1c,IAIhB1C,KAAKvB,SAASuB,KAAK4e,kBAAkB6B,kBAAiB,SAAAnxB,GAEhDA,GAC2C,UAAzC,EAAK4oB,eAAe//C,QAAQuoD,UAC9B,EAAKxW,YAAY4B,MAAM,2BAA4B,EAAK8S,kBAAkB+B,cAAcrxB,IAE1F,EAAKgP,QAASpM,UAAU/6B,IAAI,uBAC5B,EAAKg8C,kBAAmB2L,YAExB,EAAK5U,YAAY4B,MAAM,gCACvB,EAAKxN,QAASpM,UAAU1jC,OAAO,uBAC/B,EAAK2kD,kBAAmB4L,UAKX,EAATzvB,EAGM4wB,EAAgBI,YAC1BrhD,EAAG/I,iBAAiB,YAAaqqD,GACjCL,EAAgBI,UAAYC,IAJ5BthD,EAAG+uB,oBAAoB,YAAakyB,EAAgBI,WACpDJ,EAAgBI,UAAY,MAMf,GAAThxB,EAGM4wB,EAAgBE,QAC1BnhD,EAAG/I,iBAAiB,QAASqqD,EAAsB,CAAEn4C,SAAS,IAC9D83C,EAAgBE,MAAQG,IAJxBthD,EAAG+uB,oBAAoB,QAASkyB,EAAgBE,OAChDF,EAAgBE,MAAQ,MAMX,EAAT9wB,EAGM4wB,EAAgBC,UAC1BD,EAAgBC,QAAUI,IAH1B,EAAKpE,UAAWnuB,oBAAoB,UAAWkyB,EAAgBC,SAC/DD,EAAgBC,QAAU,MAKb,EAAT7wB,EAGM4wB,EAAgBG,YAC1BH,EAAgBG,UAAYE,IAH5B,EAAKpE,UAAWnuB,oBAAoB,YAAakyB,EAAgBG,WACjEH,EAAgBG,UAAY,UAMhCrgB,KAAK4e,kBAAkBgC,eAAiB5gB,KAAK4e,kBAAkBgC,eAK/D5gB,KAAKvB,SAAS,EAAAoB,yBAAyB5gC,EAAI,aAAa,SAACyjC,GAOvD,GANAA,EAAG9B,iBACH,EAAKD,QAKA,EAAKie,kBAAkBC,uBAAwB,EAAK1L,kBAAmB0N,qBAAqBne,GAiBjG,OAbA0c,EAAU1c,GAMNwd,EAAgBC,SAClB,EAAKhE,UAAWjmD,iBAAiB,UAAWgqD,EAAgBC,SAE1DD,EAAgBG,WAClB,EAAKlE,UAAWjmD,iBAAiB,YAAagqD,EAAgBG,WAGzD,EAAKG,OAAO9d,OAGrB1C,KAAKvB,SAAS,EAAAoB,yBAAyB5gC,EAAI,SAAS,SAACyjC,GACnD,GAAKwd,EAAgBE,YAGnB,IAAK,EAAKhgB,OAAO0gB,cAAe,CAC9B,IAAM/C,EAAS,EAAKxF,SAAUwI,iBAAiBre,GAG/C,GAAe,IAAXqb,EACF,OAMF,IAFA,IAAMiD,EAAW,EAAAtH,GAAGC,KAAO,EAAKH,aAAajX,gBAAgB0e,sBAAwB,IAAM,MAAQve,EAAGgd,OAAS,EAAI,IAAM,KACrHplD,EAAO,GACFnM,EAAI,EAAGA,EAAInB,KAAKk0D,IAAInD,GAAS5vD,IACpCmM,GAAQ0mD,EAEV,EAAKxH,aAAahX,iBAAiBloC,GAAM,MAI5C,CAAE8N,SAAS,KAId43B,KAAKvB,SAAS,EAAAoB,yBAAyB5gC,EAAI,SAAS,SAACyjC,GACnD,IAAIwd,EAAgBE,MACpB,OAAK,EAAK7H,SAAU4I,QAAQze,QAA5B,EACS,EAAK8d,OAAO9d,KAEpB,CAAEt6B,SAAS,KAEd43B,KAAKvB,SAAS,EAAAoB,yBAAyB5gC,EAAI,cAAc,SAACyjC,GACxD,IAAI,EAAKkc,kBAAkBC,qBAE3B,OADA,EAAKtG,SAAU6I,aAAa1e,GACrB,EAAK8d,OAAO9d,KAClB,CAAEt6B,SAAS,KAEd43B,KAAKvB,SAAS,EAAAoB,yBAAyB5gC,EAAI,aAAa,SAACyjC,GACvD,IAAI,EAAKkc,kBAAkBC,qBAC3B,OAAK,EAAKtG,SAAU8I,YAAY3e,QAAhC,EACS,EAAK8d,OAAO9d,KAEpB,CAAEt6B,SAAS,MAUT,YAAAg5B,QAAP,SAAexwC,EAAe65B,G,MACT,QAAnB,EAAAuV,KAAK5C,sBAAc,SAAEkkB,YAAY1wD,EAAO65B,IAQlC,YAAAwxB,oBAAR,SAA4BrrD,EAAe65B,G,MAC3B,QAAd,EAAAuV,KAAKgX,iBAAS,SAAEjM,YAAYn6C,EAAO65B,IAM9B,YAAAmvB,kBAAP,SAAyBlX,G,OACG,QAA1B,EAAI1C,KAAKmT,yBAAiB,eAAEoO,mBAAmB7e,IAC7C1C,KAAK1B,QAASpM,UAAU/6B,IAAI,iBAE5B6oC,KAAK1B,QAASpM,UAAU1jC,OAAO,kBAO3B,YAAAqrD,YAAR,WACO7Z,KAAKwZ,aAAagI,sBACrBxhB,KAAKwZ,aAAagI,qBAAsB,EACxCxhB,KAAKoB,QAAQpB,KAAKI,OAAOqN,EAAGzN,KAAKI,OAAOqN,KAIrC,YAAA/M,YAAP,SAAmB+gB,EAAcrD,EAA+B/pD,QAAA,IAAAA,MAAA,GAC9D,YAAMqsC,YAAW,UAAC+gB,EAAMrD,EAAqB/pD,GAC7C2rC,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,IAGvB,YAAAyE,MAAP,SAAa9nC,GACX,EAAA8nC,MAAM9nC,EAAM0lC,KAAKqC,SAAWrC,KAAKwZ,eAY5B,YAAAkI,4BAAP,SAAmCC,GACjC3hB,KAAK0Y,uBAAyBiJ,GAazB,YAAA5V,oBAAP,SAA2BC,EAAelnC,EAA6B3M,GACrE,IAAMy0C,EAAY5M,KAAKgX,UAAUjL,oBAAoBC,EAAOlnC,EAAS3M,GAErE,OADA6nC,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,GACrBiP,GAOF,YAAAD,sBAAP,SAA6BC,GACvB5M,KAAKgX,UAAUrK,sBAAsBC,IACvC5M,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,IAIzB,YAAAuR,qBAAP,SAA4BC,GAC1B,OAAOnP,KAAKmX,WAAWjI,qBAAqBC,IAGvC,YAAAyS,wBAAP,SAA+B98C,GAC7B,IAAKk7B,KAAKid,wBACR,MAAM,IAAI1e,MAAM,iCAElB,IAAMsjB,EAAW7hB,KAAKid,wBAAwBxe,SAAS35B,GAEvD,OADAk7B,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,GACrBkkB,GAGF,YAAAC,0BAAP,SAAiCD,GAC/B,IAAK7hB,KAAKid,wBACR,MAAM,IAAI1e,MAAM,iCAEdyB,KAAKid,wBAAwB8E,WAAWF,IAC1C7hB,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,IAIhC,sBAAW,sBAAO,C,IAAlB,WACE,OAAOqC,KAAKI,OAAO4hB,S,gCAGd,YAAAC,UAAP,SAAiBC,GAEf,GAAIliB,KAAKI,SAAWJ,KAAK4Y,QAAQuJ,OAIjC,OAAOniB,KAAKI,OAAO6hB,UAAUjiB,KAAKI,OAAOia,MAAQra,KAAKI,OAAOqN,EAAIyU,IAM5D,YAAAjH,aAAP,WACE,QAAOjb,KAAKmT,mBAAoBnT,KAAKmT,kBAAkB8H,cASlD,YAAA1X,OAAP,SAAc6e,EAAgBvC,EAAazxD,GACzC4xC,KAAKmT,kBAAmBkP,aAAaD,EAAQvC,EAAKzxD,IAO7C,YAAAk0D,aAAP,WACE,OAAOtiB,KAAKmT,kBAAoBnT,KAAKmT,kBAAkBhQ,cAAgB,IAGlE,YAAAof,qBAAP,WACE,GAAKviB,KAAKmT,mBAAsBnT,KAAKmT,kBAAkB8H,aAIvD,MAAO,CACLuH,YAAaxiB,KAAKmT,kBAAkBsP,eAAgB,GACpD/Q,SAAU1R,KAAKmT,kBAAkBsP,eAAgB,GACjDC,UAAW1iB,KAAKmT,kBAAkBwP,aAAc,GAChDhR,OAAQ3R,KAAKmT,kBAAkBwP,aAAc,KAO1C,YAAAC,eAAP,W,MACwB,QAAtB,EAAA5iB,KAAKmT,yBAAiB,SAAEyP,kBAMnB,YAAAC,UAAP,W,MACwB,QAAtB,EAAA7iB,KAAKmT,yBAAiB,SAAE0P,aAGnB,YAAAC,YAAP,SAAmBlyD,EAAe65B,G,MACV,QAAtB,EAAAuV,KAAKmT,yBAAiB,SAAE2P,YAAYlyD,EAAO65B,IASnC,YAAAkxB,SAAV,SAAmB3yC,GAGjB,GAFAg3B,KAAKqW,iBAAkB,EAEnBrW,KAAK0Y,yBAAiE,IAAvC1Y,KAAK0Y,uBAAuB1vC,GAC7D,OAAO,EAGT,IAAKg3B,KAAKka,mBAAoB6I,QAAQ/5C,GAIpC,OAHIg3B,KAAKI,OAAOia,QAAUra,KAAKI,OAAOoB,OACpCxB,KAAKiK,eAAe+Y,kBAEf,EAGT,IAAMnmD,EAAS,EAAAomD,sBAAsBj6C,EAAOg3B,KAAKwZ,aAAajX,gBAAgB0e,sBAAuBjhB,KAAKmW,QAAQjV,MAAOlB,KAAK7nC,QAAQ+qD,iBAItI,GAFAljB,KAAK4Z,kBAAkB5wC,GAEH,IAAhBnM,EAAOyD,MAAyD,IAAhBzD,EAAOyD,KAAqC,CAC9F,IAAM6iD,EAAcnjB,KAAKrC,KAAO,EAEhC,OADAqC,KAAKU,YAA4B,IAAhB7jC,EAAOyD,MAAuC6iD,EAAcA,GACtEnjB,KAAKwgB,OAAOx3C,GAAO,GAO5B,OAJoB,IAAhBnM,EAAOyD,MACT0/B,KAAK6iB,cAGH7iB,KAAKojB,mBAAmBpjB,KAAKmW,QAASntC,KAItCnM,EAAO2jD,QAETxgB,KAAKwgB,OAAOx3C,GAAO,IAGhBnM,EAAO7N,MAOR6N,EAAO7N,MAAQ,EAAA0qD,GAAG2J,KAAOxmD,EAAO7N,MAAQ,EAAA0qD,GAAG4J,KAC7CtjB,KAAKqC,SAAUr2C,MAAQ,IAGzBg0C,KAAKV,OAAO+O,KAAK,CAAEr/C,IAAK6N,EAAO7N,IAAKu0D,SAAUv6C,IAC9Cg3B,KAAK6Z,cACL7Z,KAAKwZ,aAAahX,iBAAiB3lC,EAAO7N,KAAK,GAM1CgxC,KAAKkY,eAAe//C,QAAQghD,sBAIjCnZ,KAAKqW,iBAAkB,GAHdrW,KAAKwgB,OAAOx3C,GAAO,MAMtB,YAAAo6C,mBAAR,SAA2BjN,EAAmBzT,GAC5C,IAAM8gB,EACHrN,EAAQjV,QAAUlB,KAAK7nC,QAAQ+qD,iBAAmBxgB,EAAGj5B,SAAWi5B,EAAGqd,UAAYrd,EAAG+gB,SAClFtN,EAAQuN,WAAahhB,EAAGj5B,QAAUi5B,EAAGqd,UAAYrd,EAAG+gB,QAEvD,MAAgB,aAAZ/gB,EAAGpiC,KACEkjD,EAIFA,KAAmB9gB,EAAGihB,SAAWjhB,EAAGihB,QAAU,KAG7C,YAAAjI,OAAV,SAAiBhZ,GACX1C,KAAK0Y,yBAA8D,IAApC1Y,KAAK0Y,uBAAuBhW,KAoMnE,SAAiCA,GAC/B,OAAsB,KAAfA,EAAGihB,SACO,KAAfjhB,EAAGihB,SACY,KAAfjhB,EAAGihB,QAnMEC,CAAwBlhB,IAC3B1C,KAAKW,QAGPX,KAAK4Z,kBAAkBlX,KASf,YAAAkZ,UAAV,SAAoBlZ,GAClB,IAAI1zC,EAEJ,GAAIgxC,KAAKqW,gBACP,OAAO,EAGT,GAAIrW,KAAK0Y,yBAA8D,IAApC1Y,KAAK0Y,uBAAuBhW,GAC7D,OAAO,EAKT,GAFA1C,KAAKwgB,OAAO9d,GAERA,EAAGmhB,SACL70D,EAAM0zC,EAAGmhB,cACJ,GAAiB,OAAbnhB,EAAGohB,YAA+Bn4D,IAAb+2C,EAAGohB,MACjC90D,EAAM0zC,EAAGihB,YACJ,IAAiB,IAAbjhB,EAAGohB,OAA+B,IAAhBphB,EAAGmhB,SAG9B,OAAO,EAFP70D,EAAM0zC,EAAGohB,MAKX,SAAK90D,IACF0zC,EAAGj5B,QAAUi5B,EAAGqd,SAAWrd,EAAG+gB,WAAazjB,KAAKojB,mBAAmBpjB,KAAKmW,QAASzT,KAKpF1zC,EAAMjC,OAAOg3D,aAAa/0D,GAE1BgxC,KAAKV,OAAO+O,KAAK,CAAEr/C,IAAG,EAAEu0D,SAAU7gB,IAClC1C,KAAK6Z,cACL7Z,KAAKwZ,aAAahX,iBAAiBxzC,GAAK,GAEjC,KAOF,YAAAsoD,KAAP,W,MACMtX,KAAKgkB,eACW,QAAlB,EAAAhkB,KAAK0d,qBAAa,SAAEuG,iBAGtBjkB,KAAK0W,QAAQrI,QAiBR,YAAAkP,OAAP,SAAc/P,EAAWC,GACnBD,IAAMxN,KAAKwL,MAAQiC,IAAMzN,KAAKrC,KAQlC,YAAM4f,OAAM,UAAC/P,EAAGC,GANVzN,KAAK+Y,mBAAqB/Y,KAAK+Y,iBAAiBmL,cAClDlkB,KAAK+Y,iBAAiBlxC,WAQpB,YAAAowC,aAAR,SAAqBzK,EAAWC,G,QACT,QAArB,EAAAzN,KAAK+Y,wBAAgB,SAAElxC,UAIV,QAAb,EAAAm4B,KAAKuY,gBAAQ,SAAEW,gBAAe,IAMzB,YAAA9hD,MAAP,WACE,GAA0B,IAAtB4oC,KAAKI,OAAOia,OAAiC,IAAlBra,KAAKI,OAAOqN,EAA3C,CAIAzN,KAAKI,OAAOC,MAAMppC,IAAI,EAAG+oC,KAAKI,OAAOC,MAAMpqC,IAAI+pC,KAAKI,OAAOia,MAAQra,KAAKI,OAAOqN,IAC/EzN,KAAKI,OAAOC,MAAMjyC,OAAS,EAC3B4xC,KAAKI,OAAOoB,MAAQ,EACpBxB,KAAKI,OAAOia,MAAQ,EACpBra,KAAKI,OAAOqN,EAAI,EAChB,IAAK,IAAIt/C,EAAI,EAAGA,EAAI6xC,KAAKrC,KAAMxvC,IAC7B6xC,KAAKI,OAAOC,MAAMpnC,KAAK+mC,KAAKI,OAAO+jB,aAAa,EAAAC,oBAElDpkB,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,GAC5BqC,KAAK0e,UAAUrQ,KAAK,CAAEpO,SAAUD,KAAKI,OAAOoB,MAAOntC,OAAQ,MAWtD,YAAAojD,MAAP,W,QAKEzX,KAAK7nC,QAAQwlC,KAAOqC,KAAKrC,KACzBqC,KAAK7nC,QAAQqzC,KAAOxL,KAAKwL,KACzB,IAAMmW,EAAwB3hB,KAAK0Y,uBAEnC1Y,KAAK+W,SACL,YAAMU,MAAK,WACW,QAAtB,EAAAzX,KAAKmT,yBAAiB,SAAEsE,QAGxBzX,KAAK0Y,uBAAyBiJ,EAG9B3hB,KAAKoB,QAAQ,EAAGpB,KAAKrC,KAAO,GACf,QAAb,EAAAqC,KAAKuY,gBAAQ,SAAEW,kBAGT,YAAAvB,sBAAR,SAA8Br3C,GAC5B,GAAK0/B,KAAK5C,eAIV,OAAQ98B,GACN,KAAK,EAAA+jD,yBAAyBC,oBAC5B,IAAMC,EAAcvkB,KAAK5C,eAAewE,WAAW4iB,kBAAkBC,QAAQ,GACvEC,EAAe1kB,KAAK5C,eAAewE,WAAW+iB,mBAAmBF,QAAQ,GAC/EzkB,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,MAAM+K,EAAY,IAAIH,EAAW,KAC7E,MACF,KAAK,EAAAF,yBAAyBO,qBAC5B,IAAMlK,EAAY1a,KAAK5C,eAAewE,WAAWijB,gBAAgBJ,QAAQ,GACnEjK,EAAaxa,KAAK5C,eAAewE,WAAWkjB,iBAAiBL,QAAQ,GAC3EzkB,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,MAAMa,EAAU,IAAIE,EAAS,OAMxE,YAAA8F,OAAP,SAAc9d,EAAWluB,GACvB,GAAKwrB,KAAK7nC,QAAQ4sD,cAAiBvwC,EAKnC,OAFAkuB,EAAG9B,iBACH8B,EAAGU,mBACI,GAGD,YAAA4hB,YAAR,WACE,OAAO,GAKD,YAAAhB,WAAR,WACE,MAAkC,UAA3BhkB,KAAK7nC,QAAQ8sD,WAIxB,EAnsCA,CAA8B,EAAAC,cAAjB,EAAAC,Y,+1BCxDb,aACA,UAEA,UACA,UAQA,cAiBE,WACmBC,EACA9I,EACA+I,EACgBpb,EACCmJ,EACC2F,EACF3b,GAPnC,MASE,cAAO,K,OARU,EAAAgoB,eACA,EAAA9I,mBACA,EAAA+I,cACgB,EAAApb,iBACC,EAAAmJ,kBACC,EAAA2F,mBACF,EAAA3b,iBAvB5B,EAAAkoB,eAAyB,EACxB,EAAAC,kBAA4B,EAC5B,EAAAC,0BAAoC,EACpC,EAAAC,4BAAsC,EACtC,EAAAC,0BAAoC,EACpC,EAAAC,YAAsB,EACtB,EAAAC,eAAyB,EAKzB,EAAAC,oBAA8B,EAE9B,EAAAC,uBAAwC,KACxC,EAAAC,wBAAkC,EAgBxC,EAAKT,eAAkB,EAAKhJ,iBAAiB0J,YAAc,EAAKX,YAAYW,aArC9C,GAsC9B,EAAKvnB,SAAS,EAAAoB,yBAAyB,EAAKyc,iBAAkB,SAAU,EAAKoC,UAAUjuD,KAAK,KAG5FiV,YAAW,WAAM,SAAKwzC,mBAAkB,G,EAwN5C,OA3P8B,OAsCrB,YAAAV,cAAP,SAAqBtR,GACnBlH,KAAKsc,iBAAiB7nC,MAAMwxC,gBAAkB/e,EAAOU,WAAWrV,KAO1D,YAAA2zB,SAAR,SAAiBpnC,GAAjB,WACE,GAAIA,EAKF,OAJAkhB,KAAKuV,qBAC+B,OAAhCvV,KAAK8lB,wBACP9Q,qBAAqBhV,KAAK8lB,yBAIM,OAAhC9lB,KAAK8lB,yBACP9lB,KAAK8lB,uBAAyBnyB,uBAAsB,WAAM,SAAK4hB,qBAI3D,YAAAA,cAAR,WACE,GAAIvV,KAAK+Y,iBAAiBjX,OAAS,EAAG,CACpC9B,KAAKulB,kBAAoBvlB,KAAK5C,eAAewE,WAAWkjB,iBAAmBlwD,OAAO6gD,iBAClFzV,KAAKylB,4BAA8BzlB,KAAKsc,iBAAiBzgB,aACzD,IAAMsqB,EAAkBn5D,KAAK63C,MAAM7E,KAAKulB,kBAAoBvlB,KAAKwlB,4BAA8BxlB,KAAKylB,4BAA8BzlB,KAAK5C,eAAewE,WAAW8iB,cAC7J1kB,KAAK0lB,4BAA8BS,IACrCnmB,KAAK0lB,0BAA4BS,EACjCnmB,KAAKqlB,YAAY5wC,MAAMqtB,OAAS9B,KAAK0lB,0BAA4B,MAKrE,IAAMU,EAAYpmB,KAAKiK,eAAe7J,OAAOoB,MAAQxB,KAAKulB,kBACtDvlB,KAAKsc,iBAAiB8J,YAAcA,IAGtCpmB,KAAK+lB,wBAAyB,EAC9B/lB,KAAKsc,iBAAiB8J,UAAYA,GAGpCpmB,KAAK8lB,uBAAyB,MAKzB,YAAA5M,eAAP,SAAsBp6B,GAEpB,QAFoB,IAAAA,OAAA,GAEhBkhB,KAAKwlB,4BAA8BxlB,KAAKiK,eAAe7J,OAAOC,MAAMjyC,OAGtE,OAFA4xC,KAAKwlB,0BAA4BxlB,KAAKiK,eAAe7J,OAAOC,MAAMjyC,YAClE4xC,KAAKkmB,SAASpnC,GAKhB,GAAIkhB,KAAKylB,8BAAgCzlB,KAAK5C,eAAewE,WAAW8iB,aAAxE,CAMA,IAAM2B,EAAermB,KAAKiK,eAAe7J,OAAOoB,MAAQxB,KAAKulB,kBACzDvlB,KAAK4lB,iBAAmBS,GAMxBrmB,KAAK4lB,iBAAmB5lB,KAAKsc,iBAAiB8J,WAM9CpmB,KAAK5C,eAAewE,WAAWkjB,iBAAmBlwD,OAAO6gD,mBAAqBzV,KAAKulB,mBAXrFvlB,KAAKkmB,SAASpnC,QAPdkhB,KAAKkmB,SAASpnC,IA6BV,YAAA4/B,UAAR,SAAkBhc,GAMhB,GAJA1C,KAAK4lB,eAAiB5lB,KAAKsc,iBAAiB8J,UAIvCpmB,KAAKsc,iBAAiBgK,aAA3B,CAKA,GAAItmB,KAAK+lB,uBAIP,OAHA/lB,KAAK+lB,wBAAyB,OAE9B/lB,KAAKolB,aAAa,GAIpB,IACMmB,EADSv5D,KAAK63C,MAAM7E,KAAK4lB,eAAiB5lB,KAAKulB,mBAC/BvlB,KAAKiK,eAAe7J,OAAOoB,MACjDxB,KAAKolB,aAAamB,KAQZ,YAAAC,cAAR,SAAsB9jB,EAAWqb,GAC/B,IAAM0I,EAAmBzmB,KAAKsc,iBAAiB8J,UAAYpmB,KAAKylB,4BAChE,QAAK1H,EAAS,GAAyC,IAApC/d,KAAKsc,iBAAiB8J,WACtCrI,EAAS,GAAK0I,EAAmBzmB,KAAK0lB,6BACnChjB,EAAGgkB,YACLhkB,EAAG9B,kBAEE,IAWJ,YAAAugB,QAAP,SAAeze,GACb,IAAMqb,EAAS/d,KAAK2mB,mBAAmBjkB,GACvC,OAAe,IAAXqb,IAGJ/d,KAAKsc,iBAAiB8J,WAAarI,EAC5B/d,KAAKwmB,cAAc9jB,EAAIqb,KAGxB,YAAA4I,mBAAR,SAA2BjkB,GAEzB,GAAkB,IAAdA,EAAGgd,OACL,OAAO,EAIT,IAAI3B,EAAS/d,KAAK4mB,qBAAqBlkB,EAAGgd,OAAQhd,GAMlD,OALIA,EAAGmkB,YAAcC,WAAWC,eAC9BhJ,GAAU/d,KAAKulB,kBACN7iB,EAAGmkB,YAAcC,WAAWE,iBACrCjJ,GAAU/d,KAAKulB,kBAAoBvlB,KAAKiK,eAAetM,MAElDogB,GAQF,YAAAgD,iBAAP,SAAwBre,GAEtB,GAAkB,IAAdA,EAAGgd,OACL,OAAO,EAIT,IAAI3B,EAAS/d,KAAK4mB,qBAAqBlkB,EAAGgd,OAAQhd,GASlD,OARIA,EAAGmkB,YAAcC,WAAWG,iBAC9BlJ,GAAU/d,KAAKulB,kBAAoB,EACnCvlB,KAAK6lB,qBAAuB9H,EAC5BA,EAAS/wD,KAAKC,MAAMD,KAAKk0D,IAAIlhB,KAAK6lB,uBAAyB7lB,KAAK6lB,oBAAsB,EAAI,GAAK,GAC/F7lB,KAAK6lB,qBAAuB,GACnBnjB,EAAGmkB,YAAcC,WAAWE,iBACrCjJ,GAAU/d,KAAKiK,eAAetM,MAEzBogB,GAGD,YAAA6I,qBAAR,SAA6B7I,EAAgBrb,GAC3C,IAAMwkB,EAAWlnB,KAAKoT,gBAAgBj7C,QAAQgvD,mBAE9C,MAAkB,QAAbD,GAAsBxkB,EAAGj5B,QACd,SAAby9C,GAAuBxkB,EAAGqd,SACb,UAAbmH,GAAwBxkB,EAAGud,SACrBlC,EAAS/d,KAAKoT,gBAAgBj7C,QAAQivD,sBAAwBpnB,KAAKoT,gBAAgBj7C,QAAQkvD,kBAG7FtJ,EAAS/d,KAAKoT,gBAAgBj7C,QAAQkvD,mBAOxC,YAAAjG,aAAP,SAAoB1e,GAClB1C,KAAK2lB,YAAcjjB,EAAG4kB,QAAQ,GAAGnT,OAO5B,YAAAkN,YAAP,SAAmB3e,GACjB,IAAMgd,EAAS1f,KAAK2lB,YAAcjjB,EAAG4kB,QAAQ,GAAGnT,MAEhD,OADAnU,KAAK2lB,YAAcjjB,EAAG4kB,QAAQ,GAAGnT,MAClB,IAAXuL,IAGJ1f,KAAKsc,iBAAiB8J,WAAa1G,EAC5B1f,KAAKwmB,cAAc9jB,EAAIgd,KAzPb,GAqBhB,MAAAnR,gBACA,MAAAqG,iBACA,MAAAkI,kBACA,MAAAQ,iBAxBQQ,GAAb,CAA8B,EAAA/b,YAAjB,EAAA+b,Y,sgBCZb,cACA,UAYA,aAwBE,WACmByJ,EACA/J,EACgBvT,EACCmJ,EACHoG,EACEpc,GALhB,KAAAmqB,YACA,KAAA/J,mBACgB,KAAAvT,iBACC,KAAAmJ,kBACH,KAAAoG,eACE,KAAApc,iBAEjC4C,KAAKwnB,cAAe,EACpBxnB,KAAKynB,uBAAwB,EAC7BznB,KAAK0nB,qBAAuB,CAAE92D,MAAO,EAAG65B,IAAK,GAC7CuV,KAAK2nB,iBAAmB,GAuL5B,OApNE,sBAAW,0BAAW,C,IAAtB,WAAoC,OAAO3nB,KAAKwnB,c,gCAmCzC,YAAA3L,iBAAP,WACE7b,KAAKwnB,cAAe,EACpBxnB,KAAK0nB,qBAAqB92D,MAAQovC,KAAKunB,UAAUv7D,MAAMoC,OACvD4xC,KAAKwd,iBAAiBx3B,YAAc,GACpCga,KAAK2nB,iBAAmB,GACxB3nB,KAAKwd,iBAAiBtrB,UAAU/6B,IAAI,WAO/B,YAAA2kD,kBAAP,SAAyBpZ,GAAzB,WACE1C,KAAKwd,iBAAiBx3B,YAAc0c,EAAGpoC,KACvC0lC,KAAKgc,4BACLt2C,YAAW,WACT,EAAKgiD,qBAAqBj9B,IAAM,EAAK88B,UAAUv7D,MAAMoC,SACpD,IAOE,YAAA2tD,eAAP,WACE/b,KAAK4nB,sBAAqB,IAQrB,YAAA7E,QAAP,SAAergB,GACb,GAAI1C,KAAKwnB,cAAgBxnB,KAAKynB,sBAAuB,CACnD,GAAmB,MAAf/kB,EAAGihB,QAEL,OAAO,EAET,GAAmB,KAAfjhB,EAAGihB,SAAiC,KAAfjhB,EAAGihB,SAAiC,KAAfjhB,EAAGihB,QAE/C,OAAO,EAIT3jB,KAAK4nB,sBAAqB,GAG5B,OAAmB,MAAfllB,EAAGihB,UAGL3jB,KAAK6nB,6BACE,IAcH,YAAAD,qBAAR,SAA6BE,GAA7B,WAIE,GAHA9nB,KAAKwd,iBAAiBtrB,UAAU1jC,OAAO,UACvCwxC,KAAKwnB,cAAe,EAEfM,EAKE,CAGL,IAAM,EAA6B,CACjCl3D,MAAOovC,KAAK0nB,qBAAqB92D,MACjC65B,IAAKuV,KAAK0nB,qBAAqBj9B,KAWjCuV,KAAKynB,uBAAwB,EAC7B/hD,YAAW,WAET,GAAI,EAAK+hD,sBAAuB,CAC9B,EAAKA,uBAAwB,EAC7B,IAAIM,EAGJ,EAA2Bn3D,OAAS,EAAK+2D,iBAAiBv5D,QAGxD25D,EAFE,EAAKP,aAEC,EAAKD,UAAUv7D,MAAM29C,UAAU,EAA2B/4C,MAAO,EAA2B65B,KAK5F,EAAK88B,UAAUv7D,MAAM29C,UAAU,EAA2B/4C,QAE1DxC,OAAS,GACjB,EAAKorD,aAAahX,iBAAiBulB,GAAO,MAG7C,OA3CoB,CAEvB/nB,KAAKynB,uBAAwB,EAC7B,IAAMM,EAAQ/nB,KAAKunB,UAAUv7D,MAAM29C,UAAU3J,KAAK0nB,qBAAqB92D,MAAOovC,KAAK0nB,qBAAqBj9B,KACxGuV,KAAKwZ,aAAahX,iBAAiBulB,GAAO,KAiDtC,YAAAF,0BAAR,sBACQ/qC,EAAWkjB,KAAKunB,UAAUv7D,MAChC0Z,YAAW,WAET,IAAK,EAAK8hD,aAAc,CACtB,IACMjB,EADW,EAAKgB,UAAUv7D,MACVwD,QAAQstB,EAAU,IACpCypC,EAAKn4D,OAAS,IAChB,EAAKu5D,iBAAmBpB,EACxB,EAAK/M,aAAahX,iBAAiB+jB,GAAM,OAG5C,IASE,YAAAvK,0BAAP,SAAiCgM,GAAjC,WACE,GAAKhoB,KAAKwnB,aAAV,CAIA,GAAIxnB,KAAKiK,eAAe7J,OAAO6Z,mBAAoB,CACjD,IAAMM,EAAUvtD,KAAKk5C,IAAIlG,KAAKiK,eAAe7J,OAAOoN,EAAGxN,KAAKiK,eAAeuB,KAAO,GAE5EgP,EAAaxa,KAAK5C,eAAewE,WAAWC,iBAC5C+Y,EAAY5a,KAAKiK,eAAe7J,OAAOqN,EAAIzN,KAAK5C,eAAewE,WAAWC,iBAC1EgZ,EAAaN,EAAUva,KAAK5C,eAAewE,WAAW+Y,gBAE5D3a,KAAKwd,iBAAiB/oC,MAAMgoB,KAAOoe,EAAa,KAChD7a,KAAKwd,iBAAiB/oC,MAAMkoB,IAAMie,EAAY,KAC9C5a,KAAKwd,iBAAiB/oC,MAAMqtB,OAAS0Y,EAAa,KAClDxa,KAAKwd,iBAAiB/oC,MAAMqmC,WAAaN,EAAa,KACtDxa,KAAKwd,iBAAiB/oC,MAAMwzC,WAAajoB,KAAKoT,gBAAgBj7C,QAAQ8vD,WACtEjoB,KAAKwd,iBAAiB/oC,MAAMyzC,SAAWloB,KAAKoT,gBAAgBj7C,QAAQ+vD,SAAW,KAG/E,IAAMC,EAAwBnoB,KAAKwd,iBAAiBniB,wBACpD2E,KAAKunB,UAAU9yC,MAAMgoB,KAAOoe,EAAa,KACzC7a,KAAKunB,UAAU9yC,MAAMkoB,IAAMie,EAAY,KAEvC5a,KAAKunB,UAAU9yC,MAAMquB,MAAQ91C,KAAK8R,IAAIqpD,EAAsBrlB,MAAO,GAAK,KACxE9C,KAAKunB,UAAU9yC,MAAMqtB,OAAS90C,KAAK8R,IAAIqpD,EAAsBrmB,OAAQ,GAAK,KAC1E9B,KAAKunB,UAAU9yC,MAAMqmC,WAAaqN,EAAsBrmB,OAAS,KAG9DkmB,GACHtiD,YAAW,WAAM,SAAKs2C,2BAA0B,KAAO,KAvN/B,GA2BzB,MAAAzN,gBACA,MAAAqG,iBACA,MAAAwT,cACA,MAAA9K,iBA9BQG,GAAb,GAAa,EAAAA,qB,aCbb,SAAgB4K,EAA2Br/C,EAA2Cs1B,GACpF,IAAMgqB,EAAOhqB,EAAQjD,wBACrB,MAAO,CAACryB,EAAM45B,QAAU0lB,EAAK7rB,KAAMzzB,EAAM65B,QAAUylB,EAAK3rB,K,oHAF1D,+BAiBA,qBAA0B3zB,EAA2Cs1B,EAAsBiqB,EAAkBpT,EAAkBqT,EAA2B7N,EAAyB9Y,EAA0B4mB,GAE3M,GAAKD,EAAL,CAIA,IAAM1V,EAASuV,EAA2Br/C,EAAOs1B,GACjD,GAAKwU,EAaL,OATAA,EAAO,GAAK9lD,KAAKg5C,MAAM8M,EAAO,IAAM2V,EAAc9N,EAAkB,EAAI,IAAMA,GAC9E7H,EAAO,GAAK9lD,KAAKg5C,KAAK8M,EAAO,GAAKjR,GAKlCiR,EAAO,GAAK9lD,KAAKk5C,IAAIl5C,KAAK8R,IAAIg0C,EAAO,GAAI,GAAIyV,GAAYE,EAAc,EAAI,IAC3E3V,EAAO,GAAK9lD,KAAKk5C,IAAIl5C,KAAK8R,IAAIg0C,EAAO,GAAI,GAAIqC,GAEtCrC,IAQT,4BAAiCA,GAC/B,GAAKA,EAKL,MAAO,CAAEtF,EAAGsF,EAAO,GAAK,GAAIrF,EAAGqF,EAAO,GAAK,M,4FCnD7C,cAyEA,SAAS4V,EAAmBC,EAAgBC,EAAiBC,EAA+BC,GAC1F,IAAMpX,EAAWiX,EAASI,EAAkBF,EAAeF,GACrDhX,EAASiX,EAAUG,EAAkBF,EAAeD,GAI1D,OAAOhwD,EAFY5L,KAAKk0D,IAAIxP,EAAWC,GAiCzC,SAA0BgX,EAAgBC,EAAiBC,GAKzD,IAJA,IAAIG,EAAc,EACZtX,EAAWiX,EAASI,EAAkBF,EAAeF,GACrDhX,EAASiX,EAAUG,EAAkBF,EAAeD,GAEjDz6D,EAAI,EAAGA,EAAInB,KAAKk0D,IAAIxP,EAAWC,GAASxjD,IAAK,CACpD,IAAM86D,EAAmD,MAAvCC,EAAkBP,EAAQC,IAA6B,EAAI,EACvEzb,EAAO0b,EAAczoB,OAAOC,MAAMpqC,IAAIy7C,EAAYuX,EAAY96D,GAChEg/C,GAAQA,EAAKgc,WACfH,IAIJ,OAAOA,EA9C0CI,CAAiBT,EAAQC,EAASC,GAEzD7H,EAASkI,EAAkBP,EAAQC,GAAUE,IAmDzE,SAASC,EAAkBF,EAA+BQ,GAKxD,IAJA,IAAIlU,EAAW,EACXhI,EAAO0b,EAAczoB,OAAOC,MAAMpqC,IAAIozD,GACtCC,EAAYnc,GAAQA,EAAKgc,UAEtBG,GAAaD,GAAc,GAAKA,EAAaR,EAAclrB,MAChEwX,IAEAmU,GADAnc,EAAO0b,EAAczoB,OAAOC,MAAMpqC,MAAMozD,KACpBlc,EAAKgc,UAG3B,OAAOhU,EA8BT,SAAS+T,EAAkBP,EAAgBC,GACzC,OAAOD,EAASC,EAAU,IAAe,IAY3C,SAAStO,EACPiP,EACA7X,EACA8X,EACA7X,EACA8X,EACAZ,GAMA,IAJA,IAAIa,EAAaH,EACbF,EAAa3X,EACbiY,EAAY,GAETD,IAAeF,GAAUH,IAAe1X,GAC7C+X,GAAcD,EAAU,GAAK,EAEzBA,GAAWC,EAAab,EAAcrd,KAAO,GAC/Cme,GAAad,EAAczoB,OAAOmB,4BAChC8nB,GAAY,EAAOE,EAAUG,GAE/BA,EAAa,EACbH,EAAW,EACXF,MACUI,GAAWC,EAAa,IAClCC,GAAad,EAAczoB,OAAOmB,4BAChC8nB,GAAY,EAAO,EAAGE,EAAW,GAGnCA,EADAG,EAAab,EAAcrd,KAAO,EAElC6d,KAIJ,OAAOM,EAAYd,EAAczoB,OAAOmB,4BACtC8nB,GAAY,EAAOE,EAAUG,GAQjC,SAAS1I,EAASiI,EAAsBH,GACtC,IAAMc,EAAOd,EAAoB,IAAM,IACvC,OAAO,EAAApP,GAAGC,IAAMiQ,EAAMX,EASxB,SAASrwD,EAAOixD,EAAeh8D,GAC7Bg8D,EAAQ78D,KAAKC,MAAM48D,GAEnB,IADA,IAAIC,EAAM,GACD37D,EAAI,EAAGA,EAAI07D,EAAO17D,IACzB27D,GAAOj8D,EAET,OAAOi8D,EAnOT,8BAAmCC,EAAiBnB,EAAiBC,EAA+BC,GAClG,IAWIG,EAXE9X,EAAS0X,EAAczoB,OAAOoN,EAC9Bmb,EAASE,EAAczoB,OAAOqN,EAGpC,IAAKob,EAAczoB,OAAO0gB,cACxB,OAsCJ,SAA0B3P,EAAgBwX,EAAgBoB,EAAiBnB,EAAiBC,EAA+BC,GACzH,OAAqF,IAAjFJ,EAAmBC,EAAQC,EAASC,EAAeC,GAAmB16D,OACjE,GAEFwK,EAAO0hD,EACZnJ,EAAQwX,EAAQxX,EAChBwX,EAASI,EAAkBF,EAAeF,IAAS,EAAOE,GAC1Dz6D,OAAQ4yD,EAAS,IAAgB8H,IA7C1BkB,CAAiB7Y,EAAQwX,EAAQoB,EAASnB,EAASC,EAAeC,GACvEJ,EAAmBC,EAAQC,EAASC,EAAeC,GA+DzD,SAA4B3X,EAAgBwX,EAAgBoB,EAAiBnB,EAAiBC,EAA+BC,GAC3H,IAAIpX,EAEFA,EADEgX,EAAmBC,EAAQC,EAASC,EAAeC,GAAmB16D,OAAS,EACtEw6D,EAAUG,EAAkBF,EAAeD,GAE3CD,EAGb,IAAMhX,EAASiX,EACTK,EAyDR,SAA6B9X,EAAgBwX,EAAgBoB,EAAiBnB,EAAiBC,EAA+BC,GAC5H,IAAIpX,EAOJ,OALEA,EADEgX,EAAmBqB,EAASnB,EAASC,EAAeC,GAAmB16D,OAAS,EACvEw6D,EAAUG,EAAkBF,EAAeD,GAE3CD,EAGRxX,EAAS4Y,GACZrY,GAAYkX,GACXzX,GAAU4Y,GACXrY,EAAWkX,EACJ,IAEF,IAvEWqB,CAAoB9Y,EAAQwX,EAAQoB,EAASnB,EAASC,EAAeC,GAEvF,OAAOlwD,EAAO0hD,EACZnJ,EAAQO,EAAUqY,EAASpY,EACb,MAAdsX,EAA+BJ,GAC/Bz6D,OAAQ4yD,EAASiI,EAAWH,IA5E1BoB,CAAmB/Y,EAAQwX,EAAQoB,EAASnB,EAASC,EAAeC,GAKxE,GAAIH,IAAWC,EAEb,OADAK,EAAY9X,EAAS4Y,EAAU,IAAiB,IACzCnxD,EAAO5L,KAAKk0D,IAAI/P,EAAS4Y,GAAU/I,EAASiI,EAAWH,IAEhEG,EAAYN,EAASC,EAAU,IAAiB,IAChD,IAAMuB,EAAgBn9D,KAAKk0D,IAAIyH,EAASC,GAIxC,OAAOhwD,EAaT,SAAwBwxD,EAAevB,GACrC,OAAOA,EAAcrd,KAAO4e,EAjBRC,CAAe1B,EAASC,EAAUmB,EAAU5Y,EAAQ0X,IACrEsB,EAAgB,GAAKtB,EAAcrd,KAAO,IACtBmd,EAASC,EAAUzX,EAAS4Y,GAQpC,GAPY/I,EAASiI,EAAWH,M,mFC7BjD,iBAGE,aAFU,KAAAwB,QAA0B,GAyCtC,OApCS,YAAAxqB,QAAP,WACE,IAAK,IAAI3xC,EAAI6xC,KAAKsqB,QAAQl8D,OAAS,EAAGD,GAAK,EAAGA,IAC5C6xC,KAAKsqB,QAAQn8D,GAAGo8D,SAASzqB,WAItB,YAAA0qB,UAAP,SAAiBC,EAAoBF,GAArC,WACQG,EAA4B,CAChCH,SAAQ,EACRzqB,QAASyqB,EAASzqB,QAClB6qB,YAAY,GAEd3qB,KAAKsqB,QAAQrxD,KAAKyxD,GAClBH,EAASzqB,QAAU,WAAM,SAAK8qB,qBAAqBF,IACnDH,EAAS5hC,SAAc8hC,IAGjB,YAAAG,qBAAR,SAA6BF,GAC3B,IAAIA,EAAYC,WAAhB,CAKA,IADA,IAAIh8D,GAAS,EACJR,EAAI,EAAGA,EAAI6xC,KAAKsqB,QAAQl8D,OAAQD,IACvC,GAAI6xC,KAAKsqB,QAAQn8D,KAAOu8D,EAAa,CACnC/7D,EAAQR,EACR,MAGJ,IAAe,IAAXQ,EACF,MAAM,IAAI4vC,MAAM,uDAElBmsB,EAAYC,YAAa,EACzBD,EAAY5qB,QAAQxvC,MAAMo6D,EAAYH,UACtCvqB,KAAKsqB,QAAQz7D,OAAOF,EAAO,KAE/B,EA1CA,GAAa,EAAAk8D,gB,kFCJb,aACA,UACA,UACA,UACA,SAIA,aAME,WAAY1yD,GACV6nC,KAAK8qB,MAAQ,IAAI,EAAA3F,SAAahtD,GAC9B6nC,KAAK+qB,cAAgB,IAAI,EAAAF,aAkM7B,OA/LU,YAAAG,kBAAR,WACE,IAAKhrB,KAAK8qB,MAAM5S,eAAe//C,QAAQ8yD,iBACrC,MAAM,IAAI1sB,MAAM,yEAIpB,sBAAW,2BAAY,C,IAAvB,WAA0C,OAAOyB,KAAK8qB,MAAM/S,c,gCAC5D,sBAAW,yBAAU,C,IAArB,WAAwC,OAAO/X,KAAK8qB,MAAM7rB,Y,gCAC1D,sBAAW,gCAAiB,C,IAA5B,WAA+C,OAAOe,KAAK8qB,MAAMzM,mB,gCACjE,sBAAW,qBAAM,C,IAAjB,WAAsC,OAAOre,KAAK8qB,MAAMI,Q,gCACxD,sBAAW,uBAAQ,C,IAAnB,WAAwC,OAAOlrB,KAAK8qB,MAAMK,U,gCAC1D,sBAAW,4BAAa,C,IAAxB,WAA6C,OAAOnrB,KAAK8qB,MAAM9S,e,gCAC/D,sBAAW,qBAAM,C,IAAjB,WAAoC,OAAOhY,KAAK8qB,MAAMM,Q,gCACtD,sBAAW,uBAAQ,C,IAAnB,WAAwC,OAAOprB,KAAK8qB,MAAMjsB,U,gCAC1D,sBAAW,oBAAK,C,IAAhB,WAAuE,OAAOmB,KAAK8qB,MAAMzrB,O,gCACzF,sBAAW,uBAAQ,C,IAAnB,WAAgE,OAAOW,KAAK8qB,MAAMlsB,U,gCAClF,sBAAW,uBAAQ,C,IAAnB,WAAgE,OAAOoB,KAAK8qB,MAAMpsB,U,gCAElF,sBAAW,sBAAO,C,IAAlB,WAAgD,OAAOsB,KAAK8qB,MAAMxsB,S,gCAClE,sBAAW,qBAAM,C,IAAjB,WAKE,OAJA0B,KAAKgrB,oBACAhrB,KAAKqrB,UACRrrB,KAAKqrB,QAAU,IAAIC,EAAUtrB,KAAK8qB,QAE7B9qB,KAAKqrB,S,gCAEd,sBAAW,sBAAO,C,IAAlB,WAEE,OADArrB,KAAKgrB,oBACE,IAAIO,EAAWvrB,KAAK8qB,Q,gCAE7B,sBAAW,uBAAQ,C,IAAnB,WAAyD,OAAO9qB,KAAK8qB,MAAMzoB,U,gCAC3E,sBAAW,mBAAI,C,IAAf,WAA4B,OAAOrC,KAAK8qB,MAAMntB,M,gCAC9C,sBAAW,mBAAI,C,IAAf,WAA4B,OAAOqC,KAAK8qB,MAAMtf,M,gCAC9C,sBAAW,qBAAM,C,IAAjB,WAKE,OAJAxL,KAAKgrB,oBACAhrB,KAAKwrB,UACRxrB,KAAKwrB,QAAU,IAAIC,EAAmBzrB,KAAK8qB,QAEtC9qB,KAAKwrB,S,gCAEd,sBAAW,sBAAO,C,IAAlB,WAEE,OADAxrB,KAAKgrB,oBACEhrB,KAAK8qB,MAAM9I,S,gCAEb,YAAAlI,KAAP,WACE9Z,KAAK8qB,MAAMhR,QAEN,YAAAnZ,MAAP,WACEX,KAAK8qB,MAAMnqB,SAEN,YAAA4c,OAAP,SAAcmO,EAAiB/tB,GAC7BqC,KAAK2rB,gBAAgBD,EAAS/tB,GAC9BqC,KAAK8qB,MAAMvN,OAAOmO,EAAS/tB,IAEtB,YAAAsQ,KAAP,SAAY/yC,GACV8kC,KAAK8qB,MAAM7c,KAAK/yC,IAEX,YAAAwmD,4BAAP,SAAmCC,GACjC3hB,KAAK8qB,MAAMpJ,4BAA4BC,IAElC,YAAA5V,oBAAP,SAA2BC,EAAelnC,EAAmD3M,GAE3F,OADA6nC,KAAKgrB,oBACEhrB,KAAK8qB,MAAM/e,oBAAoBC,EAAOlnC,EAAS3M,IAEjD,YAAAw0C,sBAAP,SAA6BC,GAC3B5M,KAAKgrB,oBACLhrB,KAAK8qB,MAAMne,sBAAsBC,IAE5B,YAAAsC,qBAAP,SAA4BC,GAE1B,OADAnP,KAAKgrB,oBACEhrB,KAAK8qB,MAAM5b,qBAAqBC,IAElC,YAAAyS,wBAAP,SAA+B98C,GAE7B,OADAk7B,KAAKgrB,oBACEhrB,KAAK8qB,MAAMlJ,wBAAwB98C,IAErC,YAAAg9C,0BAAP,SAAiCD,GAC/B7hB,KAAKgrB,oBACLhrB,KAAK8qB,MAAMhJ,0BAA0BD,IAEhC,YAAA+J,eAAP,SAAsB1J,GAGpB,OAFAliB,KAAKgrB,oBACLhrB,KAAK2rB,gBAAgBzJ,GACdliB,KAAK8qB,MAAM7I,UAAUC,IAEvB,YAAAD,UAAP,SAAiBC,GACf,OAAOliB,KAAK4rB,eAAe1J,IAEtB,YAAAjH,aAAP,WACE,OAAOjb,KAAK8qB,MAAM7P,gBAEb,YAAA1X,OAAP,SAAc6e,EAAgBvC,EAAazxD,GACzC4xC,KAAK2rB,gBAAgBvJ,EAAQvC,EAAKzxD,GAClC4xC,KAAK8qB,MAAMvnB,OAAO6e,EAAQvC,EAAKzxD,IAE1B,YAAAk0D,aAAP,WACE,OAAOtiB,KAAK8qB,MAAMxI,gBAEb,YAAAC,qBAAP,WACE,OAAOviB,KAAK8qB,MAAMvI,wBAEb,YAAAK,eAAP,WACE5iB,KAAK8qB,MAAMlI,kBAEN,YAAAC,UAAP,WACE7iB,KAAK8qB,MAAMjI,aAEN,YAAAC,YAAP,SAAmBlyD,EAAe65B,GAChCuV,KAAK2rB,gBAAgB/6D,EAAO65B,GAC5BuV,KAAK8qB,MAAMhI,YAAYlyD,EAAO65B,IAEzB,YAAAqV,QAAP,WACEE,KAAK+qB,cAAcjrB,UACnBE,KAAK8qB,MAAMhrB,WAEN,YAAAY,YAAP,SAAmBqd,GACjB/d,KAAK2rB,gBAAgB5N,GACrB/d,KAAK8qB,MAAMpqB,YAAYqd,IAElB,YAAA8N,YAAP,SAAmBC,GACjB9rB,KAAK2rB,gBAAgBG,GACrB9rB,KAAK8qB,MAAMe,YAAYC,IAElB,YAAAC,YAAP,WACE/rB,KAAK8qB,MAAMiB,eAEN,YAAA/I,eAAP,WACEhjB,KAAK8qB,MAAM9H,kBAEN,YAAAgJ,aAAP,SAAoB7e,GAClBnN,KAAK2rB,gBAAgBxe,GACrBnN,KAAK8qB,MAAMkB,aAAa7e,IAEnB,YAAA/1C,MAAP,WACE4oC,KAAK8qB,MAAM1zD,SAEN,YAAAuhD,MAAP,SAAar+C,EAA2BuZ,GACtCmsB,KAAK8qB,MAAMnS,MAAMr+C,EAAMuZ,IAElB,YAAAo4C,UAAP,SAAiB3xD,EAAkBuZ,GACjCmsB,KAAK8qB,MAAMnS,MAAMr+C,EAAMuZ,IAElB,YAAAq4C,QAAP,SAAe5xD,EAA2BuZ,GACxCmsB,KAAK8qB,MAAMnS,MAAMr+C,GACjB0lC,KAAK8qB,MAAMnS,MAAM,OAAQ9kC,IAEpB,YAAAuuB,MAAP,SAAa9nC,GACX0lC,KAAK8qB,MAAM1oB,MAAM9nC,IAOZ,YAAA6xD,UAAP,SAAiBn9D,GACf,OAAOgxC,KAAK8qB,MAAM5S,eAAeiU,UAAUn9D,IAYtC,YAAAo9D,UAAP,SAAiBp9D,EAAUhD,GACzBg0C,KAAK8qB,MAAM5S,eAAekU,UAAUp9D,EAAKhD,IAEpC,YAAAo1C,QAAP,SAAexwC,EAAe65B,GAC5BuV,KAAK2rB,gBAAgB/6D,EAAO65B,GAC5BuV,KAAK8qB,MAAM1pB,QAAQxwC,EAAO65B,IAErB,YAAAgtB,MAAP,WACEzX,KAAK8qB,MAAMrT,SAEN,YAAA+S,UAAP,SAAiB6B,GACf,OAAOrsB,KAAK+qB,cAAcP,UAAUxqB,KAAMqsB,IAE5C,sBAAkB,YAAO,C,IAAzB,WACE,OAAOrrB,G,gCAGD,YAAA2qB,gBAAR,W,IAAwB,sDACtB,IAAoB,UAAAh9C,EAAA,eAAQ,CAAvB,IAAM3iB,EAAK,KACd,GAAIA,IAAUsgE,KAAY3+D,MAAM3B,IAAUA,EAAQ,GAAM,EACtD,MAAM,IAAIuyC,MAAM,oCAIxB,EA1MA,GAAa,EAAA4mB,WA4Mb,iBACE,WACUqG,EACQlrD,GADR,KAAAkrD,UACQ,KAAAlrD,OAqBpB,OAlBS,YAAAgR,KAAP,SAAY8uB,GAEV,OADAJ,KAAKwrB,QAAUprB,EACRJ,MAGT,sBAAW,sBAAO,C,IAAlB,WAA+B,OAAOA,KAAKwrB,QAAQ/d,G,gCACnD,sBAAW,sBAAO,C,IAAlB,WAA+B,OAAOzN,KAAKwrB,QAAQhe,G,gCACnD,sBAAW,wBAAS,C,IAApB,WAAiC,OAAOxN,KAAKwrB,QAAQhqB,O,gCACrD,sBAAW,oBAAK,C,IAAhB,WAA6B,OAAOxB,KAAKwrB,QAAQnR,O,gCACjD,sBAAW,qBAAM,C,IAAjB,WAA8B,OAAOra,KAAKwrB,QAAQnrB,MAAMjyC,Q,gCACjD,YAAAm+D,QAAP,SAAe9e,GACb,IAAMN,EAAOnN,KAAKwrB,QAAQnrB,MAAMpqC,IAAIw3C,GACpC,GAAKN,EAGL,OAAO,IAAIqf,EAAkBrf,IAExB,YAAAsf,YAAP,WAAuC,OAAO,IAAI,EAAAC,UACpD,EAxBA,GA0BA,aAME,WAAoB5B,GAApB,WAAoB,KAAAA,QAHZ,KAAA6B,gBAAkB,IAAI,EAAApiB,aAI5BvK,KAAK4sB,QAAU,IAAIC,EAAc7sB,KAAK8qB,MAAMlS,QAAQuJ,OAAQ,UAC5DniB,KAAK8sB,WAAa,IAAID,EAAc7sB,KAAK8qB,MAAMlS,QAAQoH,IAAK,aAC5DhgB,KAAK8qB,MAAMlS,QAAQmU,kBAAiB,WAAM,SAAKJ,gBAAgBte,KAAK,EAAK/xB,WAa7E,OAlBE,sBAAW,6BAAc,C,IAAzB,WAAkD,OAAO0jB,KAAK2sB,gBAAgB3jD,O,gCAO9E,sBAAW,qBAAM,C,IAAjB,WACE,GAAIg3B,KAAK8qB,MAAMlS,QAAQt8B,SAAW0jB,KAAK8qB,MAAMlS,QAAQuJ,OAAU,OAAOniB,KAAKmiB,OAC3E,GAAIniB,KAAK8qB,MAAMlS,QAAQt8B,SAAW0jB,KAAK8qB,MAAMlS,QAAQoH,IAAO,OAAOhgB,KAAKgtB,UACxE,MAAM,IAAIzuB,MAAM,kD,gCAElB,sBAAW,qBAAM,C,IAAjB,WACE,OAAOyB,KAAK4sB,QAAQt7C,KAAK0uB,KAAK8qB,MAAMlS,QAAQuJ,S,gCAE9C,sBAAW,wBAAS,C,IAApB,WACE,OAAOniB,KAAK8sB,WAAWx7C,KAAK0uB,KAAK8qB,MAAMlS,QAAQoH,M,gCAEnD,EAtBA,GAwBA,aACE,WAAoBiN,GAAA,KAAAA,QAkBtB,OAhBE,sBAAW,wBAAS,C,IAApB,WAAkC,OAAOjtB,KAAKitB,MAAM9D,W,gCACpD,sBAAW,qBAAM,C,IAAjB,WAA8B,OAAOnpB,KAAKitB,MAAM7+D,Q,gCACzC,YAAA8+D,QAAP,SAAe1f,EAAW2f,GACxB,KAAI3f,EAAI,GAAKA,GAAKxN,KAAKitB,MAAM7+D,QAI7B,OAAI++D,GACFntB,KAAKitB,MAAMG,SAAS5f,EAAc2f,GAC3BA,GAEFntB,KAAKitB,MAAMG,SAAS5f,EAAG,IAAI,EAAAkf,WAE7B,YAAAW,kBAAP,SAAyBC,EAAqB9K,EAAsBE,GAClE,OAAO1iB,KAAKitB,MAAMI,kBAAkBC,EAAW9K,EAAaE,IAEhE,EAnBA,GAqBA,aACE,WAAoBoI,GAAA,KAAAA,QA0BtB,OAxBS,YAAAyC,mBAAP,SAA0Bl0D,EAAyBwa,GACjD,OAAOmsB,KAAK8qB,MAAMyC,mBAAmBl0D,GAAI,SAAC4P,GAAoB,OAAA4K,EAAS5K,EAAOtY,eAEzE,YAAA68D,cAAP,SAAqBn0D,EAAyBwa,GAC5C,OAAOmsB,KAAKutB,mBAAmBl0D,EAAIwa,IAE9B,YAAA45C,mBAAP,SAA0Bp0D,EAAyBwa,GACjD,OAAOmsB,KAAK8qB,MAAM2C,mBAAmBp0D,GAAI,SAACiB,EAAc2O,GAAoB,OAAA4K,EAASvZ,EAAM2O,EAAOtY,eAE7F,YAAA+8D,cAAP,SAAqBr0D,EAAyBwa,GAC5C,OAAOmsB,KAAKytB,mBAAmBp0D,EAAIwa,IAE9B,YAAA85C,mBAAP,SAA0Bt0D,EAAyByL,GACjD,OAAOk7B,KAAK8qB,MAAM6C,mBAAmBt0D,EAAIyL,IAEpC,YAAA8oD,cAAP,SAAqBv0D,EAAyByL,GAC5C,OAAOk7B,KAAK2tB,mBAAmBt0D,EAAIyL,IAE9B,YAAA+oD,mBAAP,SAA0BC,EAAej6C,GACvC,OAAOmsB,KAAK8qB,MAAM+C,mBAAmBC,EAAOj6C,IAEvC,YAAAk6C,cAAP,SAAqBD,EAAej6C,GAClC,OAAOmsB,KAAK6tB,mBAAmBC,EAAOj6C,IAE1C,EA3BA,GA6BA,aACE,WAAoBi3C,GAAA,KAAAA,QAiBtB,OAfS,YAAArsB,SAAP,SAAgBuvB,GACdhuB,KAAK8qB,MAAMmD,eAAexvB,SAASuvB,IAGrC,sBAAW,uBAAQ,C,IAAnB,WACE,OAAOhuB,KAAK8qB,MAAMmD,eAAeC,U,gCAGnC,sBAAW,4BAAa,C,IAAxB,WACE,OAAOluB,KAAK8qB,MAAMmD,eAAeE,e,IAGnC,SAAyBnrC,GACvBgd,KAAK8qB,MAAMmD,eAAeE,cAAgBnrC,G,gCAE9C,EAlBA,I,yFC1TA,aAEA,UAEA,UACA,UAIA,UACA,UACA,UAEA,aAyBE,WACUorC,EACR/0D,EACA0pC,EACQsrB,EACEC,EACFC,EACWtkB,EACAmJ,GAPX,KAAAgb,aAGA,KAAAC,SACE,KAAAC,UACF,KAAAC,cACW,KAAAtkB,iBACA,KAAAmJ,kBA9Bb,KAAAob,iBAA2B,EAC3B,KAAAC,kBAA4B,EAC5B,KAAAC,iBAA2B,EAC3B,KAAAC,kBAA4B,EAC5B,KAAAC,gBAA0B,EAC1B,KAAAC,eAAyB,EAOzB,KAAAC,wBAA4C,CAClDC,MAAO,GACPC,KAAM,EACN3qB,GAAI,EACJC,GAAI,EACJ2qB,MAAM,EACNC,KAAK,EACLC,QAAQ,GAaRnvB,KAAKovB,QAAUrpD,SAAS8K,cAAc,UACtCmvB,KAAKovB,QAAQl9B,UAAU/6B,IAAI,SAASkC,EAAE,UACtC2mC,KAAKovB,QAAQ36C,MAAMsuB,OAASA,EAAO12C,WACnC2zC,KAAKqvB,cACLrvB,KAAKouB,WAAWvoC,YAAYma,KAAKovB,SAgarC,OA7ZS,YAAAtvB,QAAP,W,MACE,EAAAC,wBAAwBC,KAAKovB,SACd,QAAf,EAAApvB,KAAKsvB,kBAAU,SAAExvB,WAGX,YAAAuvB,YAAR,WACErvB,KAAKsH,KAAO,EAAAioB,aAAavvB,KAAKovB,QAAQ/nB,WAAW,KAAM,CAAEuC,MAAO5J,KAAKquB,UAEhEruB,KAAKquB,QACRruB,KAAKwvB,aAIF,YAAAC,iBAAP,aACO,YAAAlwB,OAAP,aACO,YAAA0e,QAAP,aACO,YAAAlG,aAAP,aACO,YAAA2X,cAAP,SAAqBhe,EAAkBC,KAChC,YAAA4M,mBAAP,SAA0B3tD,EAAqC65B,EAAmC+zB,QAAA,IAAAA,OAAA,IAE3F,YAAAlG,UAAP,SAAiBqX,GACf3vB,KAAK4vB,kBAAkBD,IAGf,YAAAE,iBAAV,SAA2BjmB,GAEzB,GAAIA,IAAU5J,KAAKquB,OAAnB,CAKA,IAAMyB,EAAY9vB,KAAKovB,QACvBpvB,KAAKquB,OAASzkB,EAEd5J,KAAKovB,QAAUpvB,KAAKovB,QAAQ/yB,YAC5B2D,KAAKqvB,cACLrvB,KAAKouB,WAAW2B,aAAa/vB,KAAKovB,QAASU,GAG3C9vB,KAAK4vB,kBAAkB5vB,KAAKsuB,SAC5BtuB,KAAK0vB,cAAc,EAAG1vB,KAAKiK,eAAetM,KAAO,KAO3C,YAAAiyB,kBAAR,SAA0BD,GACpB3vB,KAAKwuB,kBAAoB,GAAKxuB,KAAKyuB,mBAAqB,IAG5DzuB,KAAKsvB,WAAa,EAAAU,iBAAiBhwB,KAAKoT,gBAAgBj7C,QAAS6nC,KAAKuuB,YAAaoB,EAAU3vB,KAAKwuB,iBAAkBxuB,KAAKyuB,mBACzHzuB,KAAKsvB,WAAWW,WAGX,YAAA1S,OAAP,SAAc2R,GACZlvB,KAAK0uB,iBAAmBQ,EAAIrK,gBAC5B7kB,KAAK2uB,kBAAoBO,EAAIpK,iBAC7B9kB,KAAKwuB,iBAAmBU,EAAIgB,gBAC5BlwB,KAAKyuB,kBAAoBS,EAAIiB,iBAC7BnwB,KAAK4uB,gBAAkBM,EAAIkB,eAC3BpwB,KAAK6uB,eAAiBK,EAAImB,cAC1BrwB,KAAKovB,QAAQtsB,MAAQosB,EAAI1K,kBACzBxkB,KAAKovB,QAAQttB,OAASotB,EAAIvK,mBAC1B3kB,KAAKovB,QAAQ36C,MAAMquB,MAAWosB,EAAI3K,YAAW,KAC7CvkB,KAAKovB,QAAQ36C,MAAMqtB,OAAYotB,EAAIxK,aAAY,KAG1C1kB,KAAKquB,QACRruB,KAAKwvB,YAGPxvB,KAAK4vB,kBAAkB5vB,KAAKsuB,UAYpB,YAAAgC,WAAV,SAAqB9iB,EAAWC,EAAW3K,EAAehB,GACxD9B,KAAKsH,KAAKmC,SACR+D,EAAIxN,KAAK0uB,iBACTjhB,EAAIzN,KAAK2uB,kBACT7rB,EAAQ9C,KAAK0uB,iBACb5sB,EAAS9B,KAAK2uB,oBASR,YAAA4B,uBAAV,SAAiC/iB,EAAWC,EAAW3K,QAAA,IAAAA,MAAA,GACrD9C,KAAKsH,KAAKmC,SACR+D,EAAIxN,KAAK0uB,kBACRjhB,EAAI,GAAKzN,KAAK2uB,kBAAoB/5D,OAAO6gD,iBAAmB,EAC7D3S,EAAQ9C,KAAK0uB,iBACb95D,OAAO6gD,mBASD,YAAA+a,oBAAV,SAA8BhjB,EAAWC,EAAW3K,GAClD9C,KAAKsH,KAAKmC,SACR+D,EAAIxN,KAAK0uB,iBACTjhB,EAAIzN,KAAK2uB,kBACT/5D,OAAO6gD,iBAAmB3S,EAC1B9C,KAAK2uB,oBASC,YAAA8B,kBAAV,SAA4BjjB,EAAWC,EAAW3K,EAAehB,GAC/D9B,KAAKsH,KAAKopB,UAAY97D,OAAO6gD,iBAC7BzV,KAAKsH,KAAKqpB,WACRnjB,EAAIxN,KAAK0uB,iBAAmB95D,OAAO6gD,iBAAmB,EACtDhI,EAAIzN,KAAK2uB,kBAAqB/5D,OAAO6gD,iBAAmB,EACxD3S,EAAQ9C,KAAK0uB,iBAAmB95D,OAAO6gD,iBACtC3T,EAAS9B,KAAK2uB,kBAAqB/5D,OAAO6gD,mBAMrC,YAAA+Z,UAAV,WACMxvB,KAAKquB,OACPruB,KAAKsH,KAAKspB,UAAU,EAAG,EAAG5wB,KAAKovB,QAAQtsB,MAAO9C,KAAKovB,QAAQttB,SAE3D9B,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQ1mB,WAAWrV,IAC9CyN,KAAKsH,KAAKmC,SAAS,EAAG,EAAGzJ,KAAKovB,QAAQtsB,MAAO9C,KAAKovB,QAAQttB,UAWpD,YAAA+uB,YAAV,SAAsBrjB,EAAWC,EAAW3K,EAAehB,GACrD9B,KAAKquB,OACPruB,KAAKsH,KAAKspB,UACRpjB,EAAIxN,KAAK0uB,iBACTjhB,EAAIzN,KAAK2uB,kBACT7rB,EAAQ9C,KAAK0uB,iBACb5sB,EAAS9B,KAAK2uB,oBAEhB3uB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQ1mB,WAAWrV,IAC9CyN,KAAKsH,KAAKmC,SACR+D,EAAIxN,KAAK0uB,iBACTjhB,EAAIzN,KAAK2uB,kBACT7rB,EAAQ9C,KAAK0uB,iBACb5sB,EAAS9B,KAAK2uB,qBAaV,YAAAmC,mBAAV,SAA6B3D,EAAgB3f,EAAWC,GACtDzN,KAAKsH,KAAKypB,KAAO/wB,KAAKgxB,UAAS,GAAO,GACtChxB,KAAKsH,KAAK2pB,aAAe,cACzBjxB,KAAKkxB,SAASzjB,GACdzN,KAAKsH,KAAK6pB,SACRhE,EAAKiE,WACL5jB,EAAIxN,KAAK0uB,iBAAmB1uB,KAAK4uB,gBACjCnhB,EAAIzN,KAAK2uB,kBAAoB3uB,KAAK6uB,eAAiB7uB,KAAKyuB,oBAgBlD,YAAA4C,WAAV,SAAqBlE,EAAiB3f,EAAWC,GAC/C,IAWInJ,EACAD,EAZEitB,EAAgBtxB,KAAKuxB,kBAAkBpE,GAMzCmE,GAAiBnE,EAAKqE,WAAarE,EAAKsE,UAC1CzxB,KAAK0xB,mBAAmBvE,EAAM3f,EAAGC,EAAG6jB,IAMlCnE,EAAKwE,aACPrtB,EAAM6oB,EAAKyE,cAAiB,EAAAC,uBAAyB1E,EAAK2E,aAC1DztB,EAAM8oB,EAAK4E,cAAiB,EAAAF,uBAAyB1E,EAAK6E,eAE1D3tB,EAAM8oB,EAAKyE,cAAiB,EAAAK,cAAgB9E,EAAK2E,aACjDxtB,EAAM6oB,EAAK4E,cAAiB,EAAAE,cAAgB9E,EAAK6E,cAKnD1tB,GAF0BtE,KAAKoT,gBAAgBj7C,QAAQ+5D,4BAA8B/E,EAAKgF,UAAY7tB,EAAK,EAEjF,EAAI,EAC9BtE,KAAK8uB,wBAAwBC,MAAQ5B,EAAKiE,YAAc,EAAAgB,qBACxDpyB,KAAK8uB,wBAAwBE,KAAO7B,EAAKkF,WAAa,EAAAC,qBACtDtyB,KAAK8uB,wBAAwBzqB,GAAKA,EAClCrE,KAAK8uB,wBAAwBxqB,GAAKA,EAClCtE,KAAK8uB,wBAAwBG,OAAS9B,EAAKgF,SAC3CnyB,KAAK8uB,wBAAwBI,MAAQ/B,EAAKoF,QAC1CvyB,KAAK8uB,wBAAwBK,SAAWhC,EAAKqF,WACxBxyB,KAAKsvB,YAActvB,KAAKsvB,WAAWmD,KACtDzyB,KAAKsH,KACLtH,KAAK8uB,wBACLthB,EAAIxN,KAAK0uB,iBAAmB1uB,KAAK4uB,gBACjCnhB,EAAIzN,KAAK2uB,kBAAoB3uB,KAAK6uB,iBAIlC7uB,KAAK0xB,mBAAmBvE,EAAM3f,EAAGC,KAc7B,YAAAikB,mBAAR,SAA2BvE,EAAiB3f,EAAWC,EAAWilB,GAKhE,GAJA1yB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKypB,KAAO/wB,KAAKgxB,WAAW7D,EAAKgF,WAAYhF,EAAKqF,YACvDxyB,KAAKsH,KAAK2pB,aAAe,cAErB9D,EAAKwE,YACP,GAAIe,EACF1yB,KAAKsH,KAAKkC,UAAYkpB,EAAWngC,SAC5B,GAAI46B,EAAKyE,cACd5xB,KAAKsH,KAAKkC,UAAY,EAAArF,MAAMe,OAAOlF,KAAKsuB,QAAQ1mB,YAAYrV,SACvD,GAAI46B,EAAKsE,UACdzxB,KAAKsH,KAAKkC,UAAY,OAAO,EAAAopB,cAAcC,WAAW1F,EAAK2E,cAAc54D,KAAK,KAAI,QAC7E,CACL,IAAImrC,EAAK8oB,EAAK2E,aACV9xB,KAAKoT,gBAAgBj7C,QAAQ+5D,4BAA8B/E,EAAKgF,UAAY9tB,EAAK,IACnFA,GAAM,GAERrE,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQrmB,KAAK5D,GAAI9R,SAG9C,GAAImgC,EACF1yB,KAAKsH,KAAKkC,UAAYkpB,EAAWngC,SAC5B,GAAI46B,EAAK4E,cACd/xB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQ3mB,WAAWpV,SACzC,GAAI46B,EAAKqE,UACdxxB,KAAKsH,KAAKkC,UAAY,OAAO,EAAAopB,cAAcC,WAAW1F,EAAK6E,cAAc94D,KAAK,KAAI,QAC7E,CACL,IAAIorC,EAAK6oB,EAAK6E,aACVhyB,KAAKoT,gBAAgBj7C,QAAQ+5D,4BAA8B/E,EAAKgF,UAAY7tB,EAAK,IACnFA,GAAM,GAERtE,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQrmB,KAAK3D,GAAI/R,IAIhDyN,KAAKkxB,SAASzjB,GAGV0f,EAAKoF,UACPvyB,KAAKsH,KAAKwrB,YAAc,EAAAC,aAG1B/yB,KAAKsH,KAAK6pB,SACRhE,EAAKiE,WACL5jB,EAAIxN,KAAK0uB,iBAAmB1uB,KAAK4uB,gBACjCnhB,EAAIzN,KAAK2uB,kBAAoB3uB,KAAK6uB,eAAiB7uB,KAAKyuB,mBAC1DzuB,KAAKsH,KAAK0rB,WAOJ,YAAA9B,SAAR,SAAiBzjB,GACfzN,KAAKsH,KAAK2rB,YACVjzB,KAAKsH,KAAKghB,KACR,EACA7a,EAAIzN,KAAK2uB,kBACT3uB,KAAKiK,eAAeuB,KAAOxL,KAAK0uB,iBAChC1uB,KAAK2uB,mBACP3uB,KAAKsH,KAAK4rB,QAOF,YAAAlC,SAAV,SAAmBmB,EAAiBK,GAIlC,OAFkBA,EAAW,SAAW,IAErB,KAHAL,EAASnyB,KAAKoT,gBAAgBj7C,QAAQg7D,eAAiBnzB,KAAKoT,gBAAgBj7C,QAAQi7D,YAGtE,IAAIpzB,KAAKoT,gBAAgBj7C,QAAQ+vD,SAAWtzD,OAAO6gD,iBAAgB,MAAMzV,KAAKoT,gBAAgBj7C,QAAQ8vD,YAGjI,YAAAsJ,kBAAR,SAA0BpE,GACxB,GAA0D,IAAtDntB,KAAKoT,gBAAgBj7C,QAAQk7D,qBAAjC,CAKA,IAAMC,EAAgBtzB,KAAKsuB,QAAQpmB,cAAcxB,SAASymB,EAAK9oB,GAAI8oB,EAAK7oB,IACxE,QAAsB34C,IAAlB2nE,EACF,OAAOA,QAAiB3nE,EAG1B,IAAI4nE,EAAUpG,EAAK6E,aACfwB,EAAcrG,EAAKsG,iBACnBC,EAAUvG,EAAK2E,aACf6B,EAAcxG,EAAKyG,iBACjBjC,IAAcxE,EAAKwE,YACnBQ,IAAWhF,EAAKwE,YACtB,GAAIA,EAAW,CACb,IAAMkC,EAAON,EACbA,EAAUG,EACVA,EAAUG,EACV,IAAMC,EAAQN,EACdA,EAAcG,EACdA,EAAcG,EAGhB,IAAMjuB,EAAS7F,KAAK+zB,uBAAuBJ,EAAaD,EAAS/B,GAC3D7rB,EAAS9F,KAAKg0B,uBAAuBR,EAAaD,EAAS5B,EAAWQ,GACtEt1D,EAAS,EAAA6mC,KAAKqB,oBAAoBc,EAAQC,EAAQ9F,KAAKoT,gBAAgBj7C,QAAQk7D,sBAErF,GAAKx2D,EAAL,CAKA,IAAMsnC,EAAgB,CACpB5R,IAAK,EAAAiR,SAASO,MACXlnC,GAAU,GAAM,IAChBA,GAAU,GAAM,IAChBA,GAAU,EAAK,KAElB6mC,KAAM7mC,GAIR,OAFAmjC,KAAKsuB,QAAQpmB,cAAczB,SAAS0mB,EAAK9oB,GAAI8oB,EAAK7oB,GAAIH,GAE/CA,EAdLnE,KAAKsuB,QAAQpmB,cAAczB,SAAS0mB,EAAK9oB,GAAI8oB,EAAK7oB,GAAI,QAiBlD,YAAAyvB,uBAAR,SAA+BJ,EAAqBD,EAAiBO,GACnE,OAAQN,GACN,KAAK,SACL,KAAK,SACH,OAAO3zB,KAAKsuB,QAAQrmB,KAAKyrB,GAAShwB,KACpC,KAAK,SACH,OAAOgwB,GAAW,EACpB,KAAK,EACL,QACE,OAAIO,EACKj0B,KAAKsuB,QAAQ3mB,WAAWjE,KAE1B1D,KAAKsuB,QAAQ1mB,WAAWlE,OAI7B,YAAAswB,uBAAR,SAA+BR,EAAqBD,EAAiBU,EAAkBhF,GACrF,OAAQuE,GACN,KAAK,SACL,KAAK,SAIH,OAHIxzB,KAAKoT,gBAAgBj7C,QAAQ+5D,4BAA8BjD,GAAQsE,EAAU,IAC/EA,GAAW,GAENvzB,KAAKsuB,QAAQrmB,KAAKsrB,GAAS7vB,KACpC,KAAK,SACH,OAAO6vB,GAAW,EACpB,KAAK,EACL,QACE,OAAIU,EACKj0B,KAAKsuB,QAAQ1mB,WAAWlE,KAE1B1D,KAAKsuB,QAAQ3mB,WAAWjE,OAGvC,EAvcA,GAAsB,EAAAwwB,mB,w2BCdtB,cAEA,SAEA,UAEA,UAaMC,EAAiB,IAEvB,cAME,WACEC,EACArxB,EACAmE,EACAmtB,EACQC,EACQzL,EACC3Q,EACcsB,EACO+a,GATxC,MAWE,YAAMH,EAAW,SAAUrxB,GAAQ,EAAMmE,EAAQmtB,EAAYxL,EAAe3Q,IAAe,K,OANnF,EAAAoc,mBAGuB,EAAA9a,eACO,EAAA+a,sBAXhC,EAAAC,MAAmB,IAAI,EAAA9H,SAc7B,EAAK+H,OAAS,CACZjnB,EAAG,EACHC,EAAG,EACHinB,WAAW,EACXjgD,MAAO,GACPquB,MAAO,GAET,EAAK6xB,iBAAmB,CACtB,IAAO,EAAKC,iBAAiBnkE,KAAK,GAClC,MAAS,EAAKokE,mBAAmBpkE,KAAK,GACtC,UAAa,EAAKqkE,uBAAuBrkE,KAAK,I,EAwLpD,OApNuC,OAiC9B,YAAA8sD,OAAP,SAAc2R,GACZ,YAAM3R,OAAM,UAAC2R,GAEblvB,KAAKy0B,OAAS,CACZjnB,EAAG,EACHC,EAAG,EACHinB,WAAW,EACXjgD,MAAO,GACPquB,MAAO,IAIJ,YAAA2U,MAAP,WACEzX,KAAK+0B,eACD/0B,KAAKg1B,2BACPh1B,KAAKg1B,yBAAyBl1B,UAC9BE,KAAKg1B,8BAA2BrpE,EAChCq0C,KAAKyvB,qBAIF,YAAAlwB,OAAP,WACMS,KAAKg1B,0BACPh1B,KAAKg1B,yBAAyBC,QAEhCj1B,KAAKs0B,iBAAiBjmB,KAAK,CAAEz9C,MAAOovC,KAAKiK,eAAe7J,OAAOqN,EAAGhjB,IAAKuV,KAAKiK,eAAe7J,OAAOqN,KAG7F,YAAAwQ,QAAP,WACMje,KAAKg1B,yBACPh1B,KAAKg1B,yBAAyBE,SAE9Bl1B,KAAKs0B,iBAAiBjmB,KAAK,CAAEz9C,MAAOovC,KAAKiK,eAAe7J,OAAOqN,EAAGhjB,IAAKuV,KAAKiK,eAAe7J,OAAOqN,KAI/F,YAAAgiB,iBAAP,e,EAAA,OACMzvB,KAAKoT,gBAAgBj7C,QAAQg9D,YAC1Bn1B,KAAKg1B,2BACRh1B,KAAKg1B,yBAA2B,IAAII,EAAwBp1B,KAAKu0B,oBAAoBG,WAAW,WAC9F,EAAKp/C,SAAQ,QAIY,QAA7B,EAAA0qB,KAAKg1B,gCAAwB,SAAEl1B,UAC/BE,KAAKg1B,8BAA2BrpE,GAIlCq0C,KAAKs0B,iBAAiBjmB,KAAK,CAAEz9C,MAAOovC,KAAKiK,eAAe7J,OAAOqN,EAAGhjB,IAAKuV,KAAKiK,eAAe7J,OAAOqN,KAG7F,YAAAsK,aAAP,WACM/X,KAAKg1B,0BACPh1B,KAAKg1B,yBAAyBK,yBAI3B,YAAA3F,cAAP,SAAqBhe,EAAkBC,IAChC3R,KAAKg1B,0BAA4Bh1B,KAAKg1B,yBAAyBM,SAClEt1B,KAAK1qB,SAAQ,GAEb0qB,KAAKg1B,yBAAyBK,yBAI1B,YAAA//C,QAAR,SAAgBigD,GAEd,GAAKv1B,KAAKwZ,aAAagI,sBAAuBxhB,KAAKwZ,aAAagc,eAAhE,CAKA,IAAMpb,EAAUpa,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,EACxEgoB,EAA0Brb,EAAUpa,KAAKiK,eAAe7J,OAAOoB,MAGrE,GAAIi0B,EAA0B,GAAKA,GAA2Bz1B,KAAKiK,eAAetM,KAChFqC,KAAK+0B,mBADP,CAMA,IAAMxa,EAAUvtD,KAAKk5C,IAAIlG,KAAKiK,eAAe7J,OAAOoN,EAAGxN,KAAKiK,eAAeuB,KAAO,GAElF,GADAxL,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAImkD,GAAUgT,SAAS7S,EAASva,KAAKw0B,YAC3C7oE,IAAvBq0C,KAAKw0B,MAAM3oB,QAAf,CAIA,IAAK7L,KAAKu0B,oBAAoBG,UAAW,CACvC10B,KAAK+0B,eACL/0B,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQzmB,OAAOtV,IAC1C,IAAMmjC,EAAc11B,KAAKoT,gBAAgBj7C,QAAQu9D,YAYjD,OAXIA,GAA+B,UAAhBA,EACjB11B,KAAK20B,iBAAiBe,GAAanb,EAASkb,EAAyBz1B,KAAKw0B,OAE1Ex0B,KAAK21B,kBAAkBpb,EAASkb,EAAyBz1B,KAAKw0B,OAEhEx0B,KAAKsH,KAAK0rB,UACVhzB,KAAKy0B,OAAOjnB,EAAI+M,EAChBva,KAAKy0B,OAAOhnB,EAAIgoB,EAChBz1B,KAAKy0B,OAAOC,WAAY,EACxB10B,KAAKy0B,OAAOhgD,MAAQihD,OACpB11B,KAAKy0B,OAAO3xB,MAAQ9C,KAAKw0B,MAAM/Z,YAKjC,IAAIza,KAAKg1B,0BAA6Bh1B,KAAKg1B,yBAAyBY,gBAApE,CAKA,GAAI51B,KAAKy0B,OAAQ,CAEf,GAAIz0B,KAAKy0B,OAAOjnB,IAAM+M,GAClBva,KAAKy0B,OAAOhnB,IAAMgoB,GAClBz1B,KAAKy0B,OAAOC,YAAc10B,KAAKu0B,oBAAoBG,WACnD10B,KAAKy0B,OAAOhgD,QAAUurB,KAAKoT,gBAAgBj7C,QAAQu9D,aACnD11B,KAAKy0B,OAAO3xB,QAAU9C,KAAKw0B,MAAM/Z,WACnC,OAEFza,KAAK+0B,eAGP/0B,KAAKsH,KAAKqrB,OACV3yB,KAAK20B,iBAAiB30B,KAAKoT,gBAAgBj7C,QAAQu9D,aAAe,SAASnb,EAASkb,EAAyBz1B,KAAKw0B,OAClHx0B,KAAKsH,KAAK0rB,UAEVhzB,KAAKy0B,OAAOjnB,EAAI+M,EAChBva,KAAKy0B,OAAOhnB,EAAIgoB,EAChBz1B,KAAKy0B,OAAOC,WAAY,EACxB10B,KAAKy0B,OAAOhgD,MAAQurB,KAAKoT,gBAAgBj7C,QAAQu9D,YACjD11B,KAAKy0B,OAAO3xB,MAAQ9C,KAAKw0B,MAAM/Z,gBAxB7Bza,KAAK+0B,sBAzCL/0B,KAAK+0B,gBAoED,YAAAA,aAAR,WACM/0B,KAAKy0B,SACPz0B,KAAK6wB,YAAY7wB,KAAKy0B,OAAOjnB,EAAGxN,KAAKy0B,OAAOhnB,EAAGzN,KAAKy0B,OAAO3xB,MAAO,GAClE9C,KAAKy0B,OAAS,CACZjnB,EAAG,EACHC,EAAG,EACHinB,WAAW,EACXjgD,MAAO,GACPquB,MAAO,KAKL,YAAA8xB,iBAAR,SAAyBpnB,EAAWC,EAAW0f,GAC7CntB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQzmB,OAAOtV,IAC1CyN,KAAKwwB,oBAAoBhjB,EAAGC,EAAGzN,KAAKoT,gBAAgBj7C,QAAQ09D,aAC5D71B,KAAKsH,KAAK0rB,WAGJ,YAAA6B,mBAAR,SAA2BrnB,EAAWC,EAAW0f,GAC/CntB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQzmB,OAAOtV,IAC1CyN,KAAKswB,WAAW9iB,EAAGC,EAAG0f,EAAK1S,WAAY,GACvCza,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQxmB,aAAavV,IAChDyN,KAAK8wB,mBAAmB3D,EAAM3f,EAAGC,GACjCzN,KAAKsH,KAAK0rB,WAGJ,YAAA8B,uBAAR,SAA+BtnB,EAAWC,EAAW0f,GACnDntB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQzmB,OAAOtV,IAC1CyN,KAAKuwB,uBAAuB/iB,EAAGC,GAC/BzN,KAAKsH,KAAK0rB,WAGJ,YAAA2C,kBAAR,SAA0BnoB,EAAWC,EAAW0f,GAC9CntB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKwuB,YAAc91B,KAAKsuB,QAAQzmB,OAAOtV,IAC5CyN,KAAKywB,kBAAkBjjB,EAAGC,EAAG0f,EAAK1S,WAAY,GAC9Cza,KAAKsH,KAAK0rB,WAlNgB,GAYzB,MAAAzkB,gBACA,MAAAqG,iBACA,MAAAwT,cACA,MAAAxL,sBAfQmZ,GAAb,CAAuC,EAAA7B,iBAA1B,EAAA6B,oBAsNb,iBAcE,WACErB,EACQ5f,GAAA,KAAAA,kBAER9U,KAAK41B,iBAAkB,EACnBlB,GACF10B,KAAKg2B,mBAgHX,OA5GE,sBAAW,uBAAQ,C,IAAnB,WAAiC,QAASh2B,KAAKi2B,oBAAsBj2B,KAAKk2B,iB,gCAEnE,YAAAp2B,QAAP,WACME,KAAKk2B,iBACPthE,OAAOuhE,cAAcn2B,KAAKk2B,gBAC1Bl2B,KAAKk2B,oBAAiBvqE,GAEpBq0C,KAAKi2B,qBACPrhE,OAAOgiB,aAAaopB,KAAKi2B,oBACzBj2B,KAAKi2B,wBAAqBtqE,GAExBq0C,KAAK+U,kBACPngD,OAAOogD,qBAAqBhV,KAAK+U,iBACjC/U,KAAK+U,qBAAkBppD,IAIpB,YAAA0pE,sBAAP,sBACMr1B,KAAKs1B,WAITt1B,KAAKo2B,wBAA0BtkE,KAAKqpB,MAEpC6kB,KAAK41B,iBAAkB,EAClB51B,KAAK+U,kBACR/U,KAAK+U,gBAAkBngD,OAAO++B,uBAAsB,WAClD,EAAKmhB,kBACL,EAAKC,qBAAkBppD,QAKrB,YAAAqqE,iBAAR,SAAyBK,GAAzB,gBAAyB,IAAAA,MAAA,GAEnBr2B,KAAKk2B,gBACPthE,OAAOuhE,cAAcn2B,KAAKk2B,gBAO5Bl2B,KAAKi2B,mBAAqBrhE,OAAO8Q,YAAW,WAG1C,GAAI,EAAK0wD,wBAAyB,CAChC,IAAME,EAAOnC,GAAkBriE,KAAKqpB,MAAQ,EAAKi7C,yBAEjD,GADA,EAAKA,6BAA0BzqE,EAC3B2qE,EAAO,EAET,YADA,EAAKN,iBAAiBM,GAM1B,EAAKV,iBAAkB,EACvB,EAAK7gB,gBAAkBngD,OAAO++B,uBAAsB,WAClD,EAAKmhB,kBACL,EAAKC,qBAAkBppD,KAIzB,EAAKuqE,eAAiBthE,OAAO2hE,aAAY,WAEvC,GAAI,EAAKH,wBAAyB,CAGhC,IAAME,EAAOnC,GAAkBriE,KAAKqpB,MAAQ,EAAKi7C,yBAGjD,OAFA,EAAKA,6BAA0BzqE,OAC/B,EAAKqqE,iBAAiBM,GAKxB,EAAKV,iBAAmB,EAAKA,gBAC7B,EAAK7gB,gBAAkBngD,OAAO++B,uBAAsB,WAClD,EAAKmhB,kBACL,EAAKC,qBAAkBppD,OAExBwoE,KACFkC,IAGE,YAAApB,MAAP,WACEj1B,KAAK41B,iBAAkB,EACnB51B,KAAKk2B,iBACPthE,OAAOuhE,cAAcn2B,KAAKk2B,gBAC1Bl2B,KAAKk2B,oBAAiBvqE,GAEpBq0C,KAAKi2B,qBACPrhE,OAAOgiB,aAAaopB,KAAKi2B,oBACzBj2B,KAAKi2B,wBAAqBtqE,GAExBq0C,KAAK+U,kBACPngD,OAAOogD,qBAAqBhV,KAAK+U,iBACjC/U,KAAK+U,qBAAkBppD,IAIpB,YAAAupE,OAAP,WAEEl1B,KAAKi1B,QAELj1B,KAAKo2B,6BAA0BzqE,EAC/Bq0C,KAAKg2B,mBACLh2B,KAAKq1B,yBAET,EApIA,I,iFC5OA,iBAGE,aACEr1B,KAAK7wC,MAAQ,GAuBjB,OApBS,YAAAouD,OAAP,SAAcza,EAAehB,GAC3B,IAAK,IAAI0L,EAAI,EAAGA,EAAI1K,EAAO0K,IAAK,CAC1BxN,KAAK7wC,MAAMf,QAAUo/C,GACvBxN,KAAK7wC,MAAM8J,KAAK,IAElB,IAAK,IAAIw0C,EAAIzN,KAAK7wC,MAAMq+C,GAAGp/C,OAAQq/C,EAAI3L,EAAQ2L,IAC7CzN,KAAK7wC,MAAMq+C,GAAGv0C,UAAKtN,GAErBq0C,KAAK7wC,MAAMq+C,GAAGp/C,OAAS0zC,EAEzB9B,KAAK7wC,MAAMf,OAAS00C,GAGf,YAAA1rC,MAAP,WACE,IAAK,IAAIo2C,EAAI,EAAGA,EAAIxN,KAAK7wC,MAAMf,OAAQo/C,IACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIzN,KAAK7wC,MAAMq+C,GAAGp/C,OAAQq/C,IACxCzN,KAAK7wC,MAAMq+C,GAAGC,QAAK9hD,GAI3B,EA3BA,GAAa,EAAA6qE,a,s2BCCb,cACA,UACA,UAEA,UAEA,cAGE,WACEpC,EACArxB,EACAmE,EACAmtB,EACArd,EACAG,EACgB0R,EACC3Q,GARnB,MAUE,YAAMkc,EAAW,OAAQrxB,GAAQ,EAAMmE,EAAQmtB,EAAYxL,EAAe3Q,IAAe,K,OACzFlB,EAAUyf,qBAAoB,SAAA5kE,GAAK,SAAKy4C,qBAAqBz4C,MAC7DmlD,EAAU0f,qBAAoB,SAAA7kE,GAAK,SAAK24C,qBAAqB34C,MAE7DslD,EAAWsf,qBAAoB,SAAA5kE,GAAK,SAAKy4C,qBAAqBz4C,MAC9DslD,EAAWuf,qBAAoB,SAAA7kE,GAAK,SAAK24C,qBAAqB34C,M,EAoDlE,OAtEqC,OAqB5B,YAAA0rD,OAAP,SAAc2R,GACZ,YAAM3R,OAAM,UAAC2R,GAEblvB,KAAKy0B,YAAS9oE,GAGT,YAAA8rD,MAAP,WACEzX,KAAKwP,qBAGC,YAAAA,kBAAR,WACE,GAAIxP,KAAKy0B,OAAQ,CACfz0B,KAAK6wB,YAAY7wB,KAAKy0B,OAAO9mB,GAAI3N,KAAKy0B,OAAO7mB,GAAI5N,KAAKy0B,OAAOjpB,KAAOxL,KAAKy0B,OAAO9mB,GAAI,GACpF,IAAMgpB,EAAiB32B,KAAKy0B,OAAO3mB,GAAK9N,KAAKy0B,OAAO7mB,GAAK,EACrD+oB,EAAiB,GACnB32B,KAAK6wB,YAAY,EAAG7wB,KAAKy0B,OAAO7mB,GAAK,EAAG5N,KAAKy0B,OAAOjpB,KAAMmrB,GAE5D32B,KAAK6wB,YAAY,EAAG7wB,KAAKy0B,OAAO3mB,GAAI9N,KAAKy0B,OAAO5mB,GAAI,GACpD7N,KAAKy0B,YAAS9oE,IAIV,YAAA2+C,qBAAR,SAA6Bz4C,GAU3B,GATIA,EAAEyyC,KAAO,EAAAutB,uBACX7xB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQ1mB,WAAWrV,IACrC1gC,EAAEyyC,IAAM,EAAAsyB,WAAW/kE,EAAEyyC,IAE9BtE,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQrmB,KAAKp2C,EAAEyyC,IAAI/R,IAE9CyN,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQ3mB,WAAWpV,IAG5C1gC,EAAE+7C,KAAO/7C,EAAEi8C,GAEb9N,KAAKuwB,uBAAuB1+D,EAAE87C,GAAI97C,EAAE+7C,GAAI/7C,EAAEg8C,GAAKh8C,EAAE87C,QAC5C,CAEL3N,KAAKuwB,uBAAuB1+D,EAAE87C,GAAI97C,EAAE+7C,GAAI/7C,EAAE25C,KAAO35C,EAAE87C,IACnD,IAAK,IAAIF,EAAI57C,EAAE+7C,GAAK,EAAGH,EAAI57C,EAAEi8C,GAAIL,IAC/BzN,KAAKuwB,uBAAuB,EAAG9iB,EAAG57C,EAAE25C,MAEtCxL,KAAKuwB,uBAAuB,EAAG1+D,EAAEi8C,GAAIj8C,EAAEg8C,IAEzC7N,KAAKy0B,OAAS5iE,GAGR,YAAA24C,qBAAR,SAA6B34C,GAC3BmuC,KAAKwP,qBApEmB,GAUvB,MAAAjB,gBACA,MAAAqG,kBAXQiiB,GAAb,CAAqC,EAAA3C,iBAAxB,EAAA2C,mB,+1BCPb,cACA,UACA,UAEA,UACA,SAEA,UACA,UACA,UACA,UAEIC,EAAiB,EAErB,cAWE,WACUxI,EACSpb,EACjB8D,EACAG,EACuB4f,EACU9sB,EACE8O,EACD3F,GARpC,MAUE,cAAO,KATC,EAAAkb,UACS,EAAApb,iBAIgB,EAAAjJ,iBACE,EAAA8O,mBACD,EAAA3F,kBAlB5B,EAAA4jB,IAAMF,IAON,EAAAxC,iBAAmB,IAAI,EAAA/pB,aAc7B,IAAMpD,EAAoB,EAAKiM,gBAAgBj7C,QAAQgvC,kB,OACvD,EAAK8vB,cAAgB,CACnBF,EAAqB7f,eAAe,EAAAggB,gBAAiB,EAAKhkB,eAAgB,EAAG,EAAKob,QAASnnB,EAAmB,EAAK6vB,KACnHD,EAAqB7f,eAAe,EAAAigB,qBAAsB,EAAKjkB,eAAgB,EAAG,EAAKob,QAAS,EAAK0I,KACrGD,EAAqB7f,eAAe,EAAA2f,gBAAiB,EAAK3jB,eAAgB,EAAG,EAAKob,QAAS,EAAK0I,IAAKhgB,EAAWG,GAChH4f,EAAqB7f,eAAe,EAAA6e,kBAAmB,EAAK7iB,eAAgB,EAAG,EAAKob,QAAS,EAAK0I,IAAK,EAAK1C,mBAE9G,EAAK1yB,WAAa,CAChBsuB,gBAAiB,EACjBC,iBAAkB,EAClBtL,gBAAiB,EACjBC,iBAAkB,EAClBsL,eAAgB,EAChBC,cAAe,EACf7L,kBAAmB,EACnBG,mBAAoB,EACpBJ,YAAa,EACbG,aAAc,EACd/J,gBAAiB,EACjB9Y,iBAAkB,GAEpB,EAAKu1B,kBAAoBxiE,OAAO6gD,iBAChC,EAAK4hB,oBACL,EAAK5H,mB,EAgJT,OA7L8B,OAS5B,sBAAW,8BAAe,C,IAA1B,WAA4D,OAAOzvB,KAAKs0B,iBAAiBtrD,O,gCAuClF,YAAA82B,QAAP,WACE,IAAgB,UAAAE,KAAKi3B,cAAL,eAAJ,KACRn3B,UAEJ,YAAMA,QAAO,WACb,EAAAw3B,wBAAwBt3B,KAAKg3B,MAGxB,YAAAO,yBAAP,WAGMv3B,KAAKo3B,oBAAsBxiE,OAAO6gD,mBACpCzV,KAAKo3B,kBAAoBxiE,OAAO6gD,iBAChCzV,KAAKtB,SAASsB,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,QAIzD,YAAA2a,UAAP,SAAiBpR,GACflH,KAAKsuB,QAAUpnB,EAEf,IAAgB,UAAAlH,KAAKi3B,cAAL,eAAoB,CAA/B,IAAM7mE,EAAC,KACVA,EAAEkoD,UAAUtY,KAAKsuB,SACjBl+D,EAAEqnD,UAIC,YAAA/Y,SAAP,SAAgB8M,EAAc7N,GAE5BqC,KAAKq3B,oBAGL,IAAgB,UAAAr3B,KAAKi3B,cAAL,eAAJ,KACR1Z,OAAOvd,KAAK4B,YAIhB5B,KAAKkT,eAAez+B,MAAMquB,MAAW9C,KAAK4B,WAAW2iB,YAAW,KAChEvkB,KAAKkT,eAAez+B,MAAMqtB,OAAY9B,KAAK4B,WAAW8iB,aAAY,MAG7D,YAAA8S,kBAAP,WACEx3B,KAAKtB,SAASsB,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,OAGvD,YAAA4B,OAAP,WACES,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAEmvC,aAGrB,YAAA0e,QAAP,WACEje,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAE6tD,cAGrB,YAAAM,mBAAP,SAA0B3tD,EAAqC65B,EAAmC+zB,QAAA,IAAAA,OAAA,GAChGxe,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAEmuD,mBAAmB3tD,EAAO65B,EAAK+zB,OAGpD,YAAAzG,aAAP,WACE/X,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAE2nD,mBAGrB,YAAA0X,iBAAP,WACEzvB,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAEq/D,uBAGrB,YAAAr4D,MAAP,WACE4oC,KAAKy3B,eAAc,SAAArnE,GAAK,OAAAA,EAAEqnD,YAGpB,YAAAggB,cAAR,SAAsBC,GACpB,IAAgB,UAAA13B,KAAKi3B,cAAL,eACdS,EADU,OASP,YAAAC,WAAP,SAAkB/mE,EAAe65B,GAC/B,IAAgB,UAAAuV,KAAKi3B,cAAL,eAAJ,KACRvH,cAAc9+D,EAAO65B,IAOnB,YAAA4sC,kBAAR,WACOr3B,KAAK+Y,iBAAiBmL,eAQ3BlkB,KAAK4B,WAAWsuB,gBAAkBljE,KAAKC,MAAM+yC,KAAK+Y,iBAAiBjW,MAAQluC,OAAO6gD,kBAKlFzV,KAAK4B,WAAWuuB,iBAAmBnjE,KAAKg5C,KAAKhG,KAAK+Y,iBAAiBjX,OAASltC,OAAO6gD,kBAMnFzV,KAAK4B,WAAWkjB,iBAAmB93D,KAAKC,MAAM+yC,KAAK4B,WAAWuuB,iBAAmBnwB,KAAKoT,gBAAgBj7C,QAAQ2iD,YAI9G9a,KAAK4B,WAAWyuB,cAA4D,IAA5CrwB,KAAKoT,gBAAgBj7C,QAAQ2iD,WAAmB,EAAI9tD,KAAK63C,OAAO7E,KAAK4B,WAAWkjB,iBAAmB9kB,KAAK4B,WAAWuuB,kBAAoB,GAGvKnwB,KAAK4B,WAAWijB,gBAAkB7kB,KAAK4B,WAAWsuB,gBAAkBljE,KAAK63C,MAAM7E,KAAKoT,gBAAgBj7C,QAAQy/D,eAI5G53B,KAAK4B,WAAWwuB,eAAiBpjE,KAAKC,MAAM+yC,KAAKoT,gBAAgBj7C,QAAQy/D,cAAgB,GAIzF53B,KAAK4B,WAAW+iB,mBAAqB3kB,KAAKiK,eAAetM,KAAOqC,KAAK4B,WAAWkjB,iBAChF9kB,KAAK4B,WAAW4iB,kBAAoBxkB,KAAKiK,eAAeuB,KAAOxL,KAAK4B,WAAWijB,gBAO/E7kB,KAAK4B,WAAW8iB,aAAe13D,KAAK63C,MAAM7E,KAAK4B,WAAW+iB,mBAAqB/vD,OAAO6gD,kBACtFzV,KAAK4B,WAAW2iB,YAAcv3D,KAAK63C,MAAM7E,KAAK4B,WAAW4iB,kBAAoB5vD,OAAO6gD,kBAOpFzV,KAAK4B,WAAWC,iBAAmB7B,KAAK4B,WAAW8iB,aAAe1kB,KAAKiK,eAAetM,KACtFqC,KAAK4B,WAAW+Y,gBAAkB3a,KAAK4B,WAAW2iB,YAAcvkB,KAAKiK,eAAeuB,OA3LnE,GAgBhB,MAAAqsB,uBACA,MAAAtpB,gBACA,MAAAuO,kBACA,MAAAlI,kBAnBQsK,GAAb,CAA8B,EAAAnd,YAAjB,EAAAmd,Y,oFCdb,wBAAgClzD,GAC9B,IAAKA,EACH,MAAM,IAAIuyC,MAAM,2BAElB,OAAOvyC,I,22BCHT,cAEA,UASA,cAGE,WACEooE,EACArxB,EACAmE,EACAmtB,EACgBxL,EACC3Q,GANnB,MAQE,YAAMkc,EAAW,YAAarxB,GAAQ,EAAMmE,EAAQmtB,EAAYxL,EAAe3Q,IAAe,K,OAC9F,EAAK4f,c,EAkGT,OA9G0C,OAehC,YAAAA,YAAR,WACE93B,KAAKy0B,OAAS,CACZ7jE,WAAOjF,EACP8+B,SAAK9+B,EACL6yD,sBAAkB7yD,EAClB61C,WAAO71C,IAIJ,YAAA4xD,OAAP,SAAc2R,GACZ,YAAM3R,OAAM,UAAC2R,GAEblvB,KAAK83B,eAGA,YAAArgB,MAAP,WACMzX,KAAKy0B,OAAO7jE,OAASovC,KAAKy0B,OAAOhqC,MACnCuV,KAAK83B,cACL93B,KAAKwvB,cAIF,YAAAjR,mBAAP,SAA0B3tD,EAAqC65B,EAAmC+zB,GAEhG,GAAKxe,KAAK+3B,gBAAgBnnE,EAAO65B,EAAK+zB,EAAkBxe,KAAKiK,eAAe7J,OAAOoB,OAQnF,GAHAxB,KAAKwvB,YAGA5+D,GAAU65B,EAAf,CAMA,IAAMutC,EAAmBpnE,EAAM,GAAKovC,KAAKiK,eAAe7J,OAAOoB,MACzDy2B,EAAiBxtC,EAAI,GAAKuV,KAAKiK,eAAe7J,OAAOoB,MACrD02B,EAAyBlrE,KAAK8R,IAAIk5D,EAAkB,GACpDG,EAAuBnrE,KAAKk5C,IAAI+xB,EAAgBj4B,KAAKiK,eAAetM,KAAO,GAGjF,GAAIu6B,GAA0Bl4B,KAAKiK,eAAetM,MAAQw6B,EAAuB,EAC/En4B,KAAKy0B,OAAOjzB,MAAQxB,KAAKiK,eAAe7J,OAAOoB,UADjD,CAOA,GAFAxB,KAAKsH,KAAKkC,UAAYxJ,KAAKsuB,QAAQvmB,qBAAqBxV,IAEpDisB,EAAkB,CACpB,IAAM+K,EAAW34D,EAAM,GACjBkyC,EAAQrY,EAAI,GAAK8+B,EACjBznB,EAASq2B,EAAuBD,EAAyB,EAC/Dl4B,KAAKswB,WAAW/G,EAAU2O,EAAwBp1B,EAAOhB,OACpD,CAECynB,EAAWyO,IAAqBE,EAAyBtnE,EAAM,GAAK,EAA1E,IACMwnE,EAAiBF,IAA2BD,EAAiBxtC,EAAI,GAAKuV,KAAKiK,eAAeuB,KAChGxL,KAAKswB,WAAW/G,EAAU2O,EAAwBE,EAAiB7O,EAAU,GAG7E,IAAM8O,EAAkBrrE,KAAK8R,IAAIq5D,EAAuBD,EAAyB,EAAG,GAIpF,GAHAl4B,KAAKswB,WAAW,EAAG4H,EAAyB,EAAGl4B,KAAKiK,eAAeuB,KAAM6sB,GAGrEH,IAA2BC,EAAsB,CAEnD,IAAM3O,EAASyO,IAAmBE,EAAuB1tC,EAAI,GAAKuV,KAAKiK,eAAeuB,KACtFxL,KAAKswB,WAAW,EAAG6H,EAAsB3O,EAAQ,IAKrDxpB,KAAKy0B,OAAO7jE,MAAQ,CAACA,EAAM,GAAIA,EAAM,IACrCovC,KAAKy0B,OAAOhqC,IAAM,CAACA,EAAI,GAAIA,EAAI,IAC/BuV,KAAKy0B,OAAOjW,iBAAmBA,EAC/Bxe,KAAKy0B,OAAOjzB,MAAQxB,KAAKiK,eAAe7J,OAAOoB,YA7C7CxB,KAAK83B,eAgDD,YAAAC,gBAAR,SAAwBnnE,EAAqC65B,EAAmC+zB,EAA2Bhd,GACzH,OAAQxB,KAAKs4B,qBAAqB1nE,EAAOovC,KAAKy0B,OAAO7jE,SAClDovC,KAAKs4B,qBAAqB7tC,EAAKuV,KAAKy0B,OAAOhqC,MAC5C+zB,IAAqBxe,KAAKy0B,OAAOjW,kBACjChd,IAAUxB,KAAKy0B,OAAOjzB,OAGlB,YAAA82B,qBAAR,SAA6BC,EAAsCC,GACjE,SAAKD,IAAWC,IAITD,EAAO,KAAOC,EAAO,IAAMD,EAAO,KAAOC,EAAO,IA5G1B,GAQ5B,MAAAjqB,gBACA,MAAAqG,kBATQuiB,GAAb,CAA0C,EAAAjD,iBAA7B,EAAAiD,wB,s2BCVb,cACA,UACA,UACA,SAEA,SACA,UACA,UACA,UASA,cAOE,WACE/C,EACArxB,EACAmE,EACA0C,EACAyqB,EACgBxL,EACC3Q,EACyB+E,GAR5C,MAUE,YAAMmX,EAAW,OAAQrxB,EAAQ6G,EAAO1C,EAAQmtB,EAAYxL,EAAe3Q,IAAe,K,OAFhD,EAAA+E,0BAbpC,EAAAwb,gBAA0B,EAC1B,EAAAC,eAAyB,GACzB,EAAAC,uBAAqD,GACrD,EAAAC,UAAY,IAAI,EAAAlM,SAatB,EAAK+H,OAAS,IAAI,EAAA+B,U,EA0RtB,OA5SqC,OAqB5B,YAAAjZ,OAAP,SAAc2R,GACZ,YAAM3R,OAAM,UAAC2R,GAGb,IAAM2J,EAAe74B,KAAKgxB,UAAS,GAAO,GACtChxB,KAAKy4B,kBAAoBvJ,EAAIgB,iBAAmBlwB,KAAK04B,iBAAmBG,IAC1E74B,KAAKy4B,gBAAkBvJ,EAAIgB,gBAC3BlwB,KAAK04B,eAAiBG,EACtB74B,KAAK24B,uBAAyB,IAGhC34B,KAAKy0B,OAAOr9D,QACZ4oC,KAAKy0B,OAAOlX,OAAOvd,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,OAG5D,YAAA8Z,MAAP,WACEzX,KAAKy0B,OAAOr9D,QACZ4oC,KAAKwvB,aAGC,YAAAsJ,aAAR,SACEC,EACAC,EACAnlD,GAMA,IAAK,IAAI45B,EAAIsrB,EAAUtrB,GAAKurB,EAASvrB,IAInC,IAHA,IAAMoS,EAAMpS,EAAIzN,KAAKiK,eAAe7J,OAAOoB,MACrC2L,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI4pD,GAC5CoZ,EAAej5B,KAAKid,wBAAwBic,oBAAoBrZ,GAC7DrS,EAAI,EAAGA,EAAIxN,KAAKiK,eAAeuB,KAAMgC,IAAK,CACjDL,EAAMigB,SAAS5f,EAAGxN,KAAK44B,WACvB,IAAIzL,EAAOntB,KAAK44B,UAGZO,GAAW,EACXC,EAAY5rB,EAIhB,GAAwB,IAApB2f,EAAK1S,WAAT,CAOA,GAAIwe,EAAa7qE,OAAS,GAAKo/C,IAAMyrB,EAAa,GAAG,GAAI,CACvDE,GAAW,EACX,IAAMxtB,EAAQstB,EAAa7uD,QAI3B+iD,EAAO,IAAI,EAAAkM,eACTr5B,KAAK44B,UACLzrB,EAAMkgB,mBAAkB,EAAM1hB,EAAM,GAAIA,EAAM,IAC9CA,EAAM,GAAKA,EAAM,IAInBytB,EAAYztB,EAAM,GAAK,GAOpBwtB,GAAYn5B,KAAKs5B,eAAenM,IAQ/BiM,EAAYjsB,EAAM/+C,OAAS,GAAK++C,EAAMosB,aAAaH,EAAY,KAAO,EAAAI,iBAExErM,EAAKthB,UAAW,SAChBshB,EAAKthB,SAAW,GAAK,IASzBh4B,EACEs5C,EACA3f,EACAC,GAGFD,EAAI4rB,KASF,YAAAK,gBAAR,SAAwBV,EAAkBC,GAA1C,WACQ/oE,EAAM+vC,KAAKsH,KACXkE,EAAOxL,KAAKiK,eAAeuB,KAC7B2F,EAAiB,EACjBwX,EAAiB,EACjB+Q,EAA+B,KAEnCzpE,EAAI0iE,OAEJ3yB,KAAK84B,aAAaC,EAAUC,GAAS,SAAC7L,EAAM3f,EAAGC,GAG7C,IAAIksB,EAAgB,KAEhBxM,EAAKwE,YAELgI,EADExM,EAAK4E,cACS,EAAKzD,QAAQ3mB,WAAWpV,IAC/B46B,EAAKqE,UACE,OAAO,EAAAoB,cAAcC,WAAW1F,EAAK6E,cAAc94D,KAAK,KAAI,IAE5D,EAAKo1D,QAAQrmB,KAAKklB,EAAK6E,cAAcz/B,IAE9C46B,EAAKsE,UACdkI,EAAgB,OAAO,EAAA/G,cAAcC,WAAW1F,EAAK2E,cAAc54D,KAAK,KAAI,IACnEi0D,EAAKyM,gBACdD,EAAgB,EAAKrL,QAAQrmB,KAAKklB,EAAK2E,cAAcv/B,KAGjC,OAAlBmnC,IAGFvoB,EAAS3D,EACTmb,EAASlb,GAGPA,IAAMkb,GAER14D,EAAIu5C,UAAYkwB,GAAiB,GACjC,EAAKpJ,WAAWnf,EAAQwX,EAAQnd,EAAO2F,EAAQ,GAC/CA,EAAS3D,EACTmb,EAASlb,GACAisB,IAAkBC,IAE3B1pE,EAAIu5C,UAAYkwB,GAAiB,GACjC,EAAKpJ,WAAWnf,EAAQwX,EAAQnb,EAAI2D,EAAQ,GAC5CA,EAAS3D,EACTmb,EAASlb,GAGXisB,EAAgBC,KAII,OAAlBD,IACFzpE,EAAIu5C,UAAYkwB,EAChB15B,KAAKswB,WAAWnf,EAAQwX,EAAQnd,EAAO2F,EAAQ,IAGjDlhD,EAAI+iE,WAGE,YAAA6G,gBAAR,SAAwBd,EAAkBC,GAA1C,WACEh5B,KAAK84B,aAAaC,EAAUC,GAAS,SAAC7L,EAAM3f,EAAGC,GAC7C,IAAI0f,EAAK2M,gBAGT,EAAKzI,WAAWlE,EAAM3f,EAAGC,GACrB0f,EAAK4M,eAAe,CAGtB,GAFA,EAAKzyB,KAAKqrB,OAENxF,EAAKwE,YACP,GAAIxE,EAAKyE,cACP,EAAKtqB,KAAKkC,UAAY,EAAK8kB,QAAQ1mB,WAAWrV,SACzC,GAAI46B,EAAKsE,UACd,EAAKnqB,KAAKkC,UAAY,OAAO,EAAAopB,cAAcC,WAAW1F,EAAK2E,cAAc54D,KAAK,KAAI,QAC7E,CACL,IAAImrC,EAAK8oB,EAAK2E,aACV,EAAK1e,gBAAgBj7C,QAAQ+5D,4BAA8B/E,EAAKgF,UAAY9tB,EAAK,IACnFA,GAAM,GAER,EAAKiD,KAAKkC,UAAY,EAAK8kB,QAAQrmB,KAAK5D,GAAI9R,SAG9C,GAAI46B,EAAK4E,cACP,EAAKzqB,KAAKkC,UAAY,EAAK8kB,QAAQ3mB,WAAWpV,SACzC,GAAI46B,EAAKqE,UACd,EAAKlqB,KAAKkC,UAAY,OAAO,EAAAopB,cAAcC,WAAW1F,EAAK6E,cAAc94D,KAAK,KAAI,QAC7E,CACL,IAAIorC,EAAK6oB,EAAK6E,aACV,EAAK5e,gBAAgBj7C,QAAQ+5D,4BAA8B/E,EAAKgF,UAAY7tB,EAAK,IACnFA,GAAM,GAER,EAAKgD,KAAKkC,UAAY,EAAK8kB,QAAQrmB,KAAK3D,GAAI/R,IAIhD,EAAKg+B,uBAAuB/iB,EAAGC,EAAG0f,EAAK1S,YACvC,EAAKnT,KAAK0rB,eAKT,YAAAtD,cAAP,SAAqBqJ,EAAkBC,GAEJ,IAA7Bh5B,KAAKy0B,OAAOtlE,MAAMf,SAIlB4xC,KAAKsvB,YACPtvB,KAAKsvB,WAAW0K,aAGlBh6B,KAAK6wB,YAAY,EAAGkI,EAAU/4B,KAAKiK,eAAeuB,KAAMwtB,EAAUD,EAAW,GAC7E/4B,KAAKy5B,gBAAgBV,EAAUC,GAC/Bh5B,KAAK65B,gBAAgBd,EAAUC,KAG1B,YAAAvJ,iBAAP,WACEzvB,KAAK6vB,iBAAiB7vB,KAAKoT,gBAAgBj7C,QAAQgvC,oBAM7C,YAAAmyB,eAAR,SAAuBnM,GAGrB,GAAwB,IAApBA,EAAK1S,WACP,OAAO,EAIT,GAAI0S,EAAKkF,UAAY,IACnB,OAAO,EAGT,IAAMtD,EAAQ5B,EAAKiE,WAGnB,GAAIpxB,KAAK24B,uBAAuB7pE,eAAeigE,GAC7C,OAAO/uB,KAAK24B,uBAAuB5J,GAIrC/uB,KAAKsH,KAAKqrB,OACV3yB,KAAKsH,KAAKypB,KAAO/wB,KAAK04B,eAKtB,IAAMuB,EAAWjtE,KAAKC,MAAM+yC,KAAKsH,KAAK4yB,YAAYnL,GAAOjsB,OAAS9C,KAAKy4B,gBAOvE,OAJAz4B,KAAKsH,KAAK0rB,UAGVhzB,KAAK24B,uBAAuB5J,GAASkL,EAC9BA,GA3RiB,GAavB,MAAA1rB,gBACA,MAAAqG,iBACA,MAAAuI,0BAfQ+Z,GAAb,CAAqC,EAAAhD,iBAAxB,EAAAgD,mB,qFChBb,8BACU,KAAAiD,YAAsB,EA8ChC,OA5CS,YAAAr6B,QAAP,aAMO,YAAAmwB,OAAP,WACOjwB,KAAKm6B,aACRn6B,KAAKo6B,YACLp6B,KAAKm6B,YAAa,IAQd,YAAAC,UAAR,aASO,YAAAJ,WAAP,aAkBF,EA/CA,GAAsB,EAAAK,iB,oHCHtB,cAEA,UAaMC,EAAyC,GAM/C,4BACEniE,EACAk8D,EACAntB,EACAgpB,EACAC,GAKA,IAHA,IAAMoK,EAAY,EAAAC,eAAetK,EAAiBC,EAAkBh4D,EAAS+uC,GAGpE/4C,EAAI,EAAGA,EAAImsE,EAAelsE,OAAQD,IAAK,CAC9C,IACMssE,GADAC,EAAQJ,EAAensE,IACFwsE,QAAQ/rE,QAAQylE,GAC3C,GAAIoG,GAAgB,EAAG,CACrB,GAAI,EAAAG,aAAaF,EAAMjoE,OAAQ8nE,GAC7B,OAAOG,EAAMG,MAGc,IAAzBH,EAAMC,QAAQvsE,QAChBssE,EAAMG,MAAM/6B,UACZw6B,EAAezrE,OAAOV,EAAG,IAEzBusE,EAAMC,QAAQ9rE,OAAO4rE,EAAc,GAErC,OAKJ,IAAStsE,EAAI,EAAGA,EAAImsE,EAAelsE,OAAQD,IAAK,CAC9C,IAAMusE,EAAQJ,EAAensE,GAC7B,GAAI,EAAAysE,aAAaF,EAAMjoE,OAAQ8nE,GAG7B,OADAG,EAAMC,QAAQ1hE,KAAKo7D,GACZqG,EAAMG,MAIjB,IAAMC,EAAiC,CACrCD,MAAO,IAAI,EAAAE,iBACTh1D,SACAw0D,GAEF9nE,OAAQ8nE,EACRI,QAAS,CAACtG,IAGZ,OADAiG,EAAerhE,KAAK6hE,GACbA,EAASD,OAMlB,mCAAwCxG,GACtC,IAAK,IAAIlmE,EAAI,EAAGA,EAAImsE,EAAelsE,OAAQD,IAAK,CAC9C,IAAMQ,EAAQ2rE,EAAensE,GAAGwsE,QAAQ/rE,QAAQylE,GAChD,IAAe,IAAX1lE,EAAc,CACyB,IAArC2rE,EAAensE,GAAGwsE,QAAQvsE,QAE5BksE,EAAensE,GAAG0sE,MAAM/6B,UACxBw6B,EAAezrE,OAAOV,EAAG,IAGzBmsE,EAAensE,GAAGwsE,QAAQ9rE,OAAOF,EAAO,GAE1C,U,oHCrFN,aAIA,0BAA+BuhE,EAAyBC,EAA0Bh4D,EAA2B+uC,GAE3G,IAAM8zB,EAAiC,CACrCrzB,WAAYT,EAAOS,WACnBC,WAAYV,EAAOU,WACnBC,YAAQl8C,EACRm8C,kBAAcn8C,EACd48C,eAAW58C,EACXs8C,KAAMf,EAAOe,MAEf,MAAO,CACLwN,iBAAkB7gD,OAAO6gD,iBACzBya,gBAAe,EACfC,iBAAgB,EAChBlI,WAAY9vD,EAAQ8vD,WACpBC,SAAU/vD,EAAQ+vD,SAClBkL,WAAYj7D,EAAQi7D,WACpBD,eAAgBh7D,EAAQg7D,eACxBhsB,kBAAmBhvC,EAAQgvC,kBAC3BD,OAAQ8zB,IAIZ,wBAA6B7qE,EAAqBiB,GAChD,IAAK,IAAIjD,EAAI,EAAGA,EAAIgC,EAAE+2C,OAAOe,KAAK75C,OAAQD,IACxC,GAAIgC,EAAE+2C,OAAOe,KAAK95C,GAAGu1C,OAAStyC,EAAE81C,OAAOe,KAAK95C,GAAGu1C,KAC7C,OAAO,EAGX,OAAOvzC,EAAEslD,mBAAqBrkD,EAAEqkD,kBAC5BtlD,EAAE83D,aAAe72D,EAAE62D,YACnB93D,EAAE+3D,WAAa92D,EAAE82D,UACjB/3D,EAAEijE,aAAehiE,EAAEgiE,YACnBjjE,EAAEgjE,iBAAmB/hE,EAAE+hE,gBACvBhjE,EAAEg3C,oBAAsB/1C,EAAE+1C,mBAC1Bh3C,EAAE+/D,kBAAoB9+D,EAAE8+D,iBACxB//D,EAAEggE,mBAAqB/+D,EAAE++D,kBACzBhgE,EAAE+2C,OAAOS,aAAev2C,EAAE81C,OAAOS,YACjCx3C,EAAE+2C,OAAOU,aAAex2C,EAAE81C,OAAOU,YAGvC,sBAA2BqzB,GACzB,OAAOA,EAAY,EAAAhJ,gB,sIC/CR,EAAAJ,uBAAyB,IACzB,EAAAkB,YAAc,GAEd,EAAAmI,wBAA0B,G,yeCHvC,cAEA,UACA,UACA,UACA,UAEA,UACA,UAOMC,EAAoB,CACxB5oC,IAAK,mBACLmR,KAAM,GAuBR,SAAgB03B,EAAiBC,GAU/B,OAAOA,EAAMrM,MAAQ,GAAKqM,EAAMh3B,IAAM,GAAKg3B,EAAM/2B,IAAM,GAAK+2B,EAAMpM,KAAO,EAAI,IAAMoM,EAAMnM,IAAM,EAAI,IAAMmM,EAAMlM,OAAS,EAAI,GAV9H,qBAaA,kBA2BE,WAAYppD,EAA4Bu1D,GAAxC,MACE,cAAO,KAD+B,EAAAA,UAXhC,EAAAC,kBAA4B,EAG5B,EAAAC,uBAA6C,GAG7C,EAAAC,qBAAsC,KAGtC,EAAAC,QAA8B,KAIpC,EAAKC,aAAe51D,EAAS8K,cAAc,UAC3C,EAAK8qD,aAAa74B,MAvEA,KAwElB,EAAK64B,aAAa75B,OAvEC,KA2EnB,EAAK85B,UAAY,EAAArM,aAAa,EAAKoM,aAAat0B,WAAW,KAAM,CAAEuC,OAAO,KAE1E,IAAMiyB,EAAY91D,EAAS8K,cAAc,UACzCgrD,EAAU/4B,MAAQ,EAAKw4B,QAAQpL,gBAC/B2L,EAAU/5B,OAAS,EAAKw5B,QAAQnL,iBAChC,EAAK2L,QAAU,EAAAvM,aAAasM,EAAUx0B,WAAW,KAAM,CAAEuC,MAAO,EAAK0xB,QAAQn0B,qBAE7E,EAAK40B,OAAS/uE,KAAKC,MAnFD,KAmFuB,EAAKquE,QAAQpL,iBACtD,EAAK8L,QAAUhvE,KAAKC,MAnFD,KAmFwB,EAAKquE,QAAQnL,kBACxD,IAAM8L,EAAW,EAAKF,OAAS,EAAKC,Q,OACpC,EAAKE,UAAY,IAAI,EAAAC,OAAOF,GAC5B,EAAKC,UAAUE,SAASH,G,EAuO5B,OArRsC,OAoD7B,YAAAn8B,QAAP,WACoC,OAA9BE,KAAKy7B,uBACP7mE,OAAOgiB,aAAaopB,KAAKy7B,sBACzBz7B,KAAKy7B,qBAAuB,OAIzB,YAAAzB,WAAP,WACEh6B,KAAKu7B,kBAAoB,GAGpB,YAAA9I,KAAP,SACExiE,EACAorE,EACA7tB,EACAC,GAGA,GAAmB,KAAf4tB,EAAMrM,KACR,OAAO,EAIT,IAAKhvB,KAAKq8B,UAAUhB,GAClB,OAAO,EAGT,IAAMiB,EAAWlB,EAAiBC,GAC5BkB,EAAav8B,KAAKk8B,UAAUjmE,IAAIqmE,GACtC,GAAIC,QAEF,OADAv8B,KAAKw8B,eAAevsE,EAAKssE,EAAY/uB,EAAGC,IACjC,EAET,GAAIzN,KAAKu7B,kBAhHkB,IAgH0B,CACnD,IAAI5sE,EAEFA,EADEqxC,KAAKk8B,UAAUprB,KAAO9Q,KAAKk8B,UAAUD,SAC/Bj8B,KAAKk8B,UAAUprB,KAGf9Q,KAAKk8B,UAAUO,OAAQ9tE,MAEjC,IAAM,EAAaqxC,KAAK08B,aAAarB,EAAO1sE,GAG5C,OAFAqxC,KAAKk8B,UAAUjlE,IAAIqlE,EAAU,GAC7Bt8B,KAAKw8B,eAAevsE,EAAK,EAAYu9C,EAAGC,IACjC,EAET,OAAO,GAGD,YAAA4uB,UAAR,SAAkBhB,GAQhB,OAAOA,EAAMrM,KAAO,KAGd,YAAA2N,eAAR,SAAuBhuE,GACrB,OAAQA,EAAQqxC,KAAK+7B,OAAU/7B,KAAKs7B,QAAQpL,iBAGtC,YAAA0M,eAAR,SAAuBjuE,GACrB,OAAO3B,KAAKC,MAAM0B,EAAQqxC,KAAK+7B,QAAU/7B,KAAKs7B,QAAQnL,kBAGhD,YAAAqM,eAAR,SACEvsE,EACAssE,EACA/uB,EACAC,GAGA,IAAI8uB,EAAWM,QAAf,CAGA,IAAMC,EAAS98B,KAAK28B,eAAeJ,EAAW5tE,OACxCouE,EAAS/8B,KAAK48B,eAAeL,EAAW5tE,OAC9CsB,EAAI+sE,UACFT,EAAWU,SAAWj9B,KAAK07B,QAAW17B,KAAK27B,aAC3CmB,EACAC,EACA/8B,KAAKs7B,QAAQpL,gBACblwB,KAAKs7B,QAAQnL,iBACb3iB,EACAC,EACAzN,KAAKs7B,QAAQpL,gBACblwB,KAAKs7B,QAAQnL,oBAIT,YAAA+M,uBAAR,SAA+BC,GAC7B,OAAIA,EAAMn9B,KAAKs7B,QAAQp0B,OAAOe,KAAK75C,OAC1B4xC,KAAKs7B,QAAQp0B,OAAOe,KAAKk1B,GAE3B,EAAAl2B,oBAAoBk2B,IAGrB,YAAAC,oBAAR,SAA4B/B,GAC1B,OAAIr7B,KAAKs7B,QAAQn0B,kBAIRg0B,EAELE,EAAMh3B,KAAO,EAAAwtB,uBACR7xB,KAAKs7B,QAAQp0B,OAAOS,WAEzB0zB,EAAMh3B,GAAK,IACNrE,KAAKk9B,uBAAuB7B,EAAMh3B,IAEpCrE,KAAKs7B,QAAQp0B,OAAOU,YAGrB,YAAAy1B,oBAAR,SAA4BhC,GAC1B,OAAIA,EAAM/2B,KAAO,EAAAutB,uBACR,EAAA1tB,MAAMe,OAAOlF,KAAKs7B,QAAQp0B,OAAOU,YAEtCyzB,EAAM/2B,GAAK,IAENtE,KAAKk9B,uBAAuB7B,EAAM/2B,IAEpCtE,KAAKs7B,QAAQp0B,OAAOS,YAKrB,YAAA+0B,aAAR,SAAqBrB,EAAyB1sE,GAC5CqxC,KAAKu7B,oBAELv7B,KAAK87B,QAAQnJ,OAGb,IAAM1M,EAAkBjmB,KAAKo9B,oBAAoB/B,GAGjDr7B,KAAK87B,QAAQv0B,yBAA2B,OACxCvH,KAAK87B,QAAQtyB,UAAYyc,EAAgB1zB,IACzCyN,KAAK87B,QAAQryB,SAAS,EAAG,EAAGzJ,KAAKs7B,QAAQpL,gBAAiBlwB,KAAKs7B,QAAQnL,kBACvEnwB,KAAK87B,QAAQv0B,yBAA2B,cAGxC,IAAM6rB,EAAaiI,EAAMpM,KAAOjvB,KAAKs7B,QAAQnI,eAAiBnzB,KAAKs7B,QAAQlI,WACrEkK,EAAYjC,EAAMlM,OAAS,SAAW,GAC5CnvB,KAAK87B,QAAQ/K,KACRuM,EAAS,IAAIlK,EAAU,IAAIpzB,KAAKs7B,QAAQpT,SAAWloB,KAAKs7B,QAAQ7lB,iBAAgB,MAAMzV,KAAKs7B,QAAQrT,WACxGjoB,KAAK87B,QAAQ7K,aAAe,cAE5BjxB,KAAK87B,QAAQtyB,UAAYxJ,KAAKq9B,oBAAoBhC,GAAO9oC,IAGrD8oC,EAAMnM,MACRlvB,KAAK87B,QAAQhJ,YAAc,EAAAC,aAG7B/yB,KAAK87B,QAAQ3K,SAASkK,EAAMtM,MAAO,EAAG/uB,KAAKs7B,QAAQnL,kBACnDnwB,KAAK87B,QAAQ9I,UAIb,IAAMuK,EAAYv9B,KAAK87B,QAAQpyB,aAC7B,EAAG,EAAG1J,KAAKs7B,QAAQpL,gBAAiBlwB,KAAKs7B,QAAQnL,kBAE/C0M,GAAU,EACT78B,KAAKs7B,QAAQn0B,oBAChB01B,EAiFN,SAAoBU,EAAsBp5B,GAKxC,IAJA,IAAI04B,GAAU,EACR74B,EAAIG,EAAMT,OAAS,GACnBO,EAAIE,EAAMT,OAAS,GAAK,IACxBtyC,EAAI+yC,EAAMT,OAAS,EAAI,IACpB85B,EAAS,EAAGA,EAASD,EAAUjjE,KAAKlM,OAAQovE,GAAU,EACzDD,EAAUjjE,KAAKkjE,KAAYx5B,GAC3Bu5B,EAAUjjE,KAAKkjE,EAAS,KAAOv5B,GAC/Bs5B,EAAUjjE,KAAKkjE,EAAS,KAAOpsE,EACjCmsE,EAAUjjE,KAAKkjE,EAAS,GAAK,EAE7BX,GAAU,EAGd,OAAOA,EA/FOY,CAAWF,EAAWtX,IAIlC,IAAMzY,EAAIxN,KAAK28B,eAAehuE,GACxB8+C,EAAIzN,KAAK48B,eAAejuE,GAE9BqxC,KAAK47B,UAAU8B,aAAaH,EAAW/vB,EAAGC,GAG1C,IAAM8uB,EAAa,CACjB5tE,MAAK,EACLkuE,QAAO,EACPI,UAAU,GAIZ,OAFAj9B,KAAK29B,kBAAkBpB,GAEhBA,GAGD,YAAAoB,kBAAR,SAA0BpB,GAA1B,aAKQ,sBAAuB3nE,SAAW,EAAAymD,WAAa,EAAAuiB,WAKrD59B,KAAKw7B,uBAAuBviE,KAAKsjE,GAGC,OAA9Bv8B,KAAKy7B,uBAITz7B,KAAKy7B,qBAAuB7mE,OAAO8Q,YAAW,WAAM,SAAKm4D,oBArR3B,QAwRxB,YAAAA,gBAAR,sBACQC,EAAuB99B,KAAKw7B,uBAClCx7B,KAAKw7B,uBAAyB,GAC9B5mE,OAAOmpE,kBAAkB/9B,KAAK27B,cAAcvuE,MAAK,SAAA4wE,GAE/C,EAAKtC,QAAUsC,EAIf,IAAK,IAAI7vE,EAAI,EAAGA,EAAI2vE,EAAqB1vE,OAAQD,IACjC2vE,EAAqB3vE,GAG7B8uE,UAAW,KAGrBj9B,KAAKy7B,qBAAuB,MAEhC,EArRA,CAAsC,EAAApB,eAAzB,EAAAU,mBAyRb,kBACE,WAAYh1D,EAAoBtT,G,OAC9B,cAAO,KAWX,OAbmC,OAK1B,YAAAggE,KAAP,SACExiE,EACAorE,EACA7tB,EACAC,GAEA,OAAO,GAEX,EAbA,CAAmC,EAAA4sB,eAAtB,EAAA4D,iB,8ECvUb,iBAOE,WAAmBhC,GAAA,KAAAA,WANX,KAAAiC,KAA8C,GAC9C,KAAAC,MAAmC,KACnC,KAAAC,MAAmC,KACnC,KAAAC,UAAkC,GACnC,KAAAvtB,KAAe,EAsHxB,OAlHU,YAAAwtB,YAAR,SAAoBviE,GAClB,IAAMwiE,EAAOxiE,EAAKwiE,KACZvyD,EAAOjQ,EAAKiQ,KACdjQ,IAASikC,KAAKm+B,QAChBn+B,KAAKm+B,MAAQnyD,GAEXjQ,IAASikC,KAAKo+B,QAChBp+B,KAAKo+B,MAAQG,GAEF,OAATA,IACFA,EAAKvyD,KAAOA,GAED,OAATA,IACFA,EAAKuyD,KAAOA,IAIR,YAAAC,YAAR,SAAoBziE,GAClB,IAAM0iE,EAAOz+B,KAAKo+B,MACL,OAATK,IACFA,EAAKzyD,KAAOjQ,GAEdA,EAAKwiE,KAAOE,EACZ1iE,EAAKiQ,KAAO,KACZg0B,KAAKo+B,MAAQriE,EACM,OAAfikC,KAAKm+B,QACPn+B,KAAKm+B,MAAQpiE,IAWV,YAAAqgE,SAAP,SAAgBvS,GAEd,IADA,IAAM6U,EAAW1+B,KAAKq+B,UACblwE,EAAI,EAAGA,EAAI07D,EAAO17D,IACzBuwE,EAASzlE,KAAK,CACZslE,KAAM,KACNvyD,KAAM,KACNhd,IAAK,KACLhD,MAAO,QAKN,YAAAiK,IAAP,SAAWjH,GAGT,IAAM+M,EAAOikC,KAAKk+B,KAAKlvE,GACvB,YAAarD,IAAToQ,GACFikC,KAAKs+B,YAAYviE,GACjBikC,KAAKw+B,YAAYziE,GACVA,EAAK/P,OAEP,MAMF,YAAA2yE,UAAP,SAAiB3vE,GACf,IAAM+M,EAAOikC,KAAKk+B,KAAKlvE,GACvB,YAAarD,IAAToQ,EACKA,EAAK/P,MAEP,MAGF,YAAAywE,KAAP,WACE,IAAMmC,EAAO5+B,KAAKm+B,MAClB,OAAgB,OAATS,EAAgB,KAAOA,EAAK5yE,OAG9B,YAAAiL,IAAP,SAAWjI,EAAahD,GAEtB,IAAI+P,EAAOikC,KAAKk+B,KAAKlvE,GACrB,QAAarD,IAAToQ,EAEFA,EAAOikC,KAAKk+B,KAAKlvE,GACjBgxC,KAAKs+B,YAAYviE,GACjBA,EAAK/P,MAAQA,OACR,GAAIg0C,KAAK8Q,MAAQ9Q,KAAKi8B,SAE3BlgE,EAAOikC,KAAKm+B,MACZn+B,KAAKs+B,YAAYviE,UACVikC,KAAKk+B,KAAKniE,EAAK/M,KACtB+M,EAAK/M,IAAMA,EACX+M,EAAK/P,MAAQA,EACbg0C,KAAKk+B,KAAKlvE,GAAO+M,MACZ,CAEL,IAAM2iE,EAAW1+B,KAAKq+B,UAClBK,EAAStwE,OAAS,IAEpB2N,EAAO2iE,EAASvkE,OACXnL,IAAMA,EACX+M,EAAK/P,MAAQA,GAEb+P,EAAO,CACLwiE,KAAM,KACNvyD,KAAM,KACNhd,IAAG,EACHhD,MAAK,GAGTg0C,KAAKk+B,KAAKlvE,GAAO+M,EACjBikC,KAAK8Q,OAEP9Q,KAAKw+B,YAAYziE,IAErB,EA3HA,GAAa,EAAAogE,U,k2BCNb,cACA,UACA,SAEA,UACA,UACA,UACA,UACA,UAEM0C,EAAwB,4BAExBC,EAAkB,YAClBC,EAAkB,YAClBC,EAAc,cAGhBC,EAAiB,EAOrB,cAcE,WACU3Q,EACSzjB,EACAqI,EACAoJ,EACA4iB,EACAC,EACMpI,EACYhe,EACD3F,EACDnJ,GAVnC,MAYE,cAAO,K,OAXC,EAAAqkB,UACS,EAAAzjB,WACA,EAAAqI,iBACA,EAAAoJ,mBACA,EAAA4iB,aACA,EAAAC,cAEkB,EAAApmB,mBACD,EAAA3F,kBACD,EAAAnJ,iBAtB3B,EAAAm1B,eAAyBH,IAKzB,EAAAvhC,aAA8B,GAoBpC,EAAKD,cAAgB13B,SAAS8K,cAAc,OAC5C,EAAK4sB,cAAcvL,UAAU/6B,IAzCL,cA0CxB,EAAKsmC,cAAchpB,MAAMqmC,WAAa,SACtC,EAAKrd,cAAcpY,aAAa,cAAe,QAC/C,EAAKg6C,oBAAoB,EAAKp1B,eAAeuB,KAAM,EAAKvB,eAAetM,MACvE,EAAK2hC,oBAAsBv5D,SAAS8K,cAAc,OAClD,EAAKyuD,oBAAoBptC,UAAU/6B,IA1Cf,mBA2CpB,EAAKmoE,oBAAoBj6C,aAAa,cAAe,QAErD,EAAKuc,WAAa,CAChBsuB,gBAAiB,EACjBC,iBAAkB,EAClBtL,gBAAiB,EACjBC,iBAAkB,EAClBsL,eAAgB,EAChBC,cAAe,EACf7L,kBAAmB,EACnBG,mBAAoB,EACpBJ,YAAa,EACbG,aAAc,EACd/J,gBAAiB,EACjB9Y,iBAAkB,GAEpB,EAAKw1B,oBACL,EAAKkI,aAEL,EAAKC,YAAczI,EAAqB7f,eAAe,EAAAuoB,sBAAuB15D,SAAU,EAAKuoD,SAE7F,EAAKzjB,SAAS3Y,UAAU/6B,IAAI0nE,EAAwB,EAAKO,gBACzD,EAAKlsB,eAAertB,YAAY,EAAK4X,eACrC,EAAKyV,eAAertB,YAAY,EAAKy5C,qBAErC,EAAKJ,WAAWzI,qBAAoB,SAAA5kE,GAAK,SAAK6tE,aAAa7tE,MAC3D,EAAKqtE,WAAWxI,qBAAoB,SAAA7kE,GAAK,SAAK8tE,aAAa9tE,MAE3D,EAAKstE,YAAY1I,qBAAoB,SAAA5kE,GAAK,SAAK6tE,aAAa7tE,MAC5D,EAAKstE,YAAYzI,qBAAoB,SAAA7kE,GAAK,SAAK8tE,aAAa9tE,M,EAkThE,OAjXiC,OAY/B,sBAAW,8BAAe,C,IAA1B,WAA4D,OAAO,IAAI,EAAA04C,cAAoCvhC,O,gCAsDpG,YAAA82B,QAAP,WACEE,KAAK6K,SAAS3Y,UAAU1jC,OAAOqwE,EAAwB7+B,KAAKo/B,gBAI5D,EAAAr/B,wBAAwBC,KAAKvC,cAAeuC,KAAKs/B,oBAAqBt/B,KAAK4/B,mBAAoB5/B,KAAK6/B,yBAEpG,YAAM//B,QAAO,YAGP,YAAAu3B,kBAAR,WACEr3B,KAAK4B,WAAWsuB,gBAAkBlwB,KAAK+Y,iBAAiBjW,MAAQluC,OAAO6gD,iBACvEzV,KAAK4B,WAAWuuB,iBAAmBnjE,KAAKg5C,KAAKhG,KAAK+Y,iBAAiBjX,OAASltC,OAAO6gD,kBACnFzV,KAAK4B,WAAWijB,gBAAkB7kB,KAAK4B,WAAWsuB,gBAAkBljE,KAAK63C,MAAM7E,KAAKoT,gBAAgBj7C,QAAQy/D,eAC5G53B,KAAK4B,WAAWkjB,iBAAmB93D,KAAKC,MAAM+yC,KAAK4B,WAAWuuB,iBAAmBnwB,KAAKoT,gBAAgBj7C,QAAQ2iD,YAC9G9a,KAAK4B,WAAWwuB,eAAiB,EACjCpwB,KAAK4B,WAAWyuB,cAAgB,EAChCrwB,KAAK4B,WAAW4iB,kBAAoBxkB,KAAK4B,WAAWijB,gBAAkB7kB,KAAKiK,eAAeuB,KAC1FxL,KAAK4B,WAAW+iB,mBAAqB3kB,KAAK4B,WAAWkjB,iBAAmB9kB,KAAKiK,eAAetM,KAC5FqC,KAAK4B,WAAW2iB,YAAcv3D,KAAK63C,MAAM7E,KAAK4B,WAAW4iB,kBAAoB5vD,OAAO6gD,kBACpFzV,KAAK4B,WAAW8iB,aAAe13D,KAAK63C,MAAM7E,KAAK4B,WAAW+iB,mBAAqB/vD,OAAO6gD,kBACtFzV,KAAK4B,WAAW+Y,gBAAkB3a,KAAK4B,WAAW2iB,YAAcvkB,KAAKiK,eAAeuB,KACpFxL,KAAK4B,WAAWC,iBAAmB7B,KAAK4B,WAAW8iB,aAAe1kB,KAAKiK,eAAetM,KAEtF,IAAsB,UAAAqC,KAAKtC,aAAL,eAAmB,CAApC,IAAMY,EAAO,KAChBA,EAAQ7pB,MAAMquB,MAAW9C,KAAK4B,WAAW2iB,YAAW,KACpDjmB,EAAQ7pB,MAAMqtB,OAAY9B,KAAK4B,WAAWC,iBAAgB,KAC1DvD,EAAQ7pB,MAAMqmC,WAAgB9a,KAAK4B,WAAWC,iBAAgB,KAE9DvD,EAAQ7pB,MAAMqrD,SAAW,SAGtB9/B,KAAK6/B,0BACR7/B,KAAK6/B,wBAA0B95D,SAAS8K,cAAc,SACtDmvB,KAAKkT,eAAertB,YAAYma,KAAK6/B,0BAGvC,IAAMvrC,EACD0L,KAAK+/B,kBAAL//B,wFAIQA,KAAK4B,WAAW+Y,gBAJxB3a,MAOLA,KAAK6/B,wBAAwB75C,YAAcsO,EAE3C0L,KAAKs/B,oBAAoB7qD,MAAMqtB,OAAS9B,KAAKsc,iBAAiB7nC,MAAMqtB,OACpE9B,KAAKkT,eAAez+B,MAAMquB,MAAW9C,KAAK4B,WAAW2iB,YAAW,KAChEvkB,KAAKkT,eAAez+B,MAAMqtB,OAAY9B,KAAK4B,WAAW8iB,aAAY,MAG7D,YAAApM,UAAP,SAAiBpR,GACflH,KAAKsuB,QAAUpnB,EACflH,KAAKu/B,cAGC,YAAAA,WAAR,sBACOv/B,KAAK4/B,qBACR5/B,KAAK4/B,mBAAqB75D,SAAS8K,cAAc,SACjDmvB,KAAKkT,eAAertB,YAAYma,KAAK4/B,qBAIvC,IAAItrC,EACC0L,KAAK+/B,kBAAL//B,yBACQA,KAAKsuB,QAAQ3mB,WAAWpV,IADhCyN,kBAEcA,KAAKoT,gBAAgBj7C,QAAQ8vD,WAF3CjoB,gBAGYA,KAAKoT,gBAAgBj7C,QAAQ+vD,SAHzCloB,OAML1L,GACK0L,KAAK+/B,kBAAiB,cAAc,EAAAC,WAApChgC,oBACcA,KAAKoT,gBAAgBj7C,QAAQi7D,WAD3CpzB,KAGAA,KAAK+/B,kBAAiB,SAAS,EAAAC,WAH/BhgC,mBAIcA,KAAKoT,gBAAgBj7C,QAAQg7D,eAJ3CnzB,KAMAA,KAAK+/B,kBAAiB,SAAS,EAAAE,aAN/BjgC,0BAUL1L,GACE,+BAAsC0L,KAAKo/B,eAA3C,iCAKF9qC,GACE,0BAAiC0L,KAAKo/B,eAAtC,8BAEuBp/B,KAAKsuB,QAAQzmB,OAAOtV,IAF3C,aAGYyN,KAAKsuB,QAAQxmB,aAAavV,IAHtC,gCAMuByN,KAAKsuB,QAAQxmB,aAAavV,IANjD,aAOYyN,KAAKsuB,QAAQzmB,OAAOtV,IAPhC,OAWF+B,GACK0L,KAAK+/B,kBAAL//B,mCAAwE,EAAAkgC,aAAY,IAAI,EAAAC,yBAAxFngC,yBACoBA,KAAKsuB,QAAQzmB,OAAOtV,IADxCyN,2BAIAA,KAAK+/B,kBAJL//B,6BAIkE,EAAAkgC,aAAY,IAAI,EAAAE,mBAAkB,SAAS,EAAAD,yBAJ7GngC,mCAKoCA,KAAKo/B,eALzCp/B,0BAOAA,KAAK+/B,kBAPL//B,6BAOkE,EAAAkgC,aAAY,IAAI,EAAAE,mBAAkB,IAAI,EAAAD,yBAPxGngC,6BAQ+BA,KAAKo/B,eARpCp/B,0BAUAA,KAAK+/B,kBAVL//B,6BAUkE,EAAAkgC,aAAY,IAAI,EAAAC,yBAVlFngC,wBAWmBA,KAAKsuB,QAAQzmB,OAAOtV,IAXvCyN,YAYQA,KAAKsuB,QAAQxmB,aAAavV,IAZlCyN,KAcAA,KAAK+/B,kBAdL//B,iBAcmD,EAAAkgC,aAAY,IAAI,EAAAG,uBAdnErgC,kBAeaA,KAAKoT,gBAAgBj7C,QAAQ09D,YAAW,UAAU71B,KAAKsuB,QAAQzmB,OAAOtV,IAfnFyN,WAiBAA,KAAK+/B,kBAjBL//B,iBAiBmD,EAAAkgC,aAAY,IAAI,EAAAI,6BAjBnEtgC,2BAkBsBA,KAAKsuB,QAAQzmB,OAAOtV,IAlB1CyN,WAqBL1L,GACK0L,KAAK+/B,kBAAL//B,8FAOAA,KAAK+/B,kBAPL//B,iEASmBA,KAAKsuB,QAAQvmB,qBAAqBxV,IATrDyN,KAYLA,KAAKsuB,QAAQrmB,KAAK1rC,SAAQ,SAAC7M,EAAGvB,GAC5BmmC,GACK,EAAKyrC,kBAAiB,KAAKjB,EAAkB3wE,EAAC,aAAauB,EAAE6iC,IAAG,MAChE,EAAKwtC,kBAAiB,KAAKhB,EAAkB5wE,EAAC,wBAAwBuB,EAAE6iC,IAAG,SAElF+B,GACK0L,KAAK+/B,kBAAiB,KAAKjB,EAAkB,EAAAjN,uBAAsB,aAAa,EAAA1tB,MAAMe,OAAOlF,KAAKsuB,QAAQ1mB,YAAYrV,IAAG,MACzHyN,KAAK+/B,kBAAiB,KAAKhB,EAAkB,EAAAlN,uBAAsB,wBAAwB7xB,KAAKsuB,QAAQ3mB,WAAWpV,IAAG,MAE3HyN,KAAK4/B,mBAAmB55C,YAAcsO,GAGjC,YAAAijC,yBAAP,WACEv3B,KAAKq3B,qBAGC,YAAAgI,oBAAR,SAA4B7zB,EAAc7N,GAExC,IAAK,IAAIxvC,EAAI6xC,KAAKtC,aAAatvC,OAAQD,GAAKwvC,EAAMxvC,IAAK,CACrD,IAAM0xD,EAAM95C,SAAS8K,cAAc,OACnCmvB,KAAKvC,cAAc5X,YAAYg6B,GAC/B7f,KAAKtC,aAAazkC,KAAK4mD,GAGzB,KAAO7f,KAAKtC,aAAatvC,OAASuvC,GAChCqC,KAAKvC,cAAc7X,YAAYoa,KAAKtC,aAAavjC,QAI9C,YAAAukC,SAAP,SAAgB8M,EAAc7N,GAC5BqC,KAAKq/B,oBAAoB7zB,EAAM7N,GAC/BqC,KAAKq3B,qBAGA,YAAAG,kBAAP,WACEx3B,KAAKq3B,qBAGA,YAAA93B,OAAP,WACES,KAAKvC,cAAcvL,UAAU1jC,OAAOwwE,IAG/B,YAAA/gB,QAAP,WACEje,KAAKvC,cAAcvL,UAAU/6B,IAAI6nE,IAG5B,YAAAzgB,mBAAP,SAA0B3tD,EAAqC65B,EAAmC+zB,GAEhG,KAAOxe,KAAKs/B,oBAAoB/kE,SAASnM,QACvC4xC,KAAKs/B,oBAAoB15C,YAAYoa,KAAKs/B,oBAAoB/kE,SAAS,IAIzE,GAAK3J,GAAU65B,EAAf,CAKA,IAAMutC,EAAmBpnE,EAAM,GAAKovC,KAAKiK,eAAe7J,OAAOoB,MACzDy2B,EAAiBxtC,EAAI,GAAKuV,KAAKiK,eAAe7J,OAAOoB,MACrD02B,EAAyBlrE,KAAK8R,IAAIk5D,EAAkB,GACpDG,EAAuBnrE,KAAKk5C,IAAI+xB,EAAgBj4B,KAAKiK,eAAetM,KAAO,GAGjF,KAAIu6B,GAA0Bl4B,KAAKiK,eAAetM,MAAQw6B,EAAuB,GAAjF,CAKA,IAAMoI,EAAmBx6D,SAASs2C,yBAElC,GAAImC,EACF+hB,EAAiB16C,YACfma,KAAKwgC,wBAAwBtI,EAAwBtnE,EAAM,GAAI65B,EAAI,GAAI0tC,EAAuBD,EAAyB,QAEpH,CAEL,IAAM3O,EAAWyO,IAAqBE,EAAyBtnE,EAAM,GAAK,EACpE44D,EAAS0O,IAA2BD,EAAiBxtC,EAAI,GAAKuV,KAAKiK,eAAeuB,KACxF+0B,EAAiB16C,YAAYma,KAAKwgC,wBAAwBtI,EAAwB3O,EAAUC,IAE5F,IAAM6O,EAAkBF,EAAuBD,EAAyB,EAGxE,GAFAqI,EAAiB16C,YAAYma,KAAKwgC,wBAAwBtI,EAAyB,EAAG,EAAGl4B,KAAKiK,eAAeuB,KAAM6sB,IAE/GH,IAA2BC,EAAsB,CAEnD,IAAM,EAASF,IAAmBE,EAAuB1tC,EAAI,GAAKuV,KAAKiK,eAAeuB,KACtF+0B,EAAiB16C,YAAYma,KAAKwgC,wBAAwBrI,EAAsB,EAAG,KAGvFn4B,KAAKs/B,oBAAoBz5C,YAAY06C,MAS/B,YAAAC,wBAAR,SAAgC3gB,EAAa4gB,EAAkBC,EAAgBvrB,QAAA,IAAAA,MAAA,GAC7E,IAAM7W,EAAUv4B,SAAS8K,cAAc,OAKvC,OAJAytB,EAAQ7pB,MAAMqtB,OAAYqT,EAAWnV,KAAK4B,WAAWC,iBAAgB,KACrEvD,EAAQ7pB,MAAMkoB,IAASkjB,EAAM7f,KAAK4B,WAAWC,iBAAgB,KAC7DvD,EAAQ7pB,MAAMgoB,KAAUgkC,EAAWzgC,KAAK4B,WAAW+Y,gBAAe,KAClErc,EAAQ7pB,MAAMquB,MAAW9C,KAAK4B,WAAW+Y,iBAAmB+lB,EAASD,GAAS,KACvEniC,GAGF,YAAAyZ,aAAP,aAIO,YAAA0X,iBAAP,WAEEzvB,KAAKq3B,oBACLr3B,KAAKu/B,cAGA,YAAAnoE,MAAP,WACE,IAAgB,UAAA4oC,KAAKtC,aAAL,eAAJ,KACRgE,UAAY,IAIX,YAAAi2B,WAAP,SAAkB/mE,EAAe65B,GAK/B,IAJA,IAAMk2C,EAAkB3gC,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,EAChF8M,EAAUvtD,KAAKk5C,IAAIlG,KAAKiK,eAAe7J,OAAOoN,EAAGxN,KAAKiK,eAAeuB,KAAO,GAC5E2pB,EAAcn1B,KAAKoT,gBAAgBj7C,QAAQg9D,YAExC1nB,EAAI78C,EAAO68C,GAAKhjB,EAAKgjB,IAAK,CACjC,IAAMmzB,EAAa5gC,KAAKtC,aAAa+P,GACrCmzB,EAAWl/B,UAAY,GAEvB,IAAMme,EAAMpS,EAAIzN,KAAKiK,eAAe7J,OAAOoB,MACrCF,EAAWtB,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI4pD,GAChD6V,EAAc11B,KAAKoT,gBAAgBj7C,QAAQu9D,YACjDkL,EAAW/6C,YAAYma,KAAKw/B,YAAYqB,UAAUv/B,EAAWue,EAAKA,IAAQ8gB,EAAiBjL,EAAanb,EAAS4a,EAAan1B,KAAK4B,WAAW+Y,gBAAiB3a,KAAKiK,eAAeuB,SAIvL,sBAAY,gCAAiB,C,IAA7B,WACE,MAAO,IAAIqzB,EAAwB7+B,KAAKo/B,gB,gCAGlC,YAAAM,aAAR,SAAqB7tE,GACnBmuC,KAAK8gC,kBAAkBjvE,EAAE87C,GAAI97C,EAAEg8C,GAAIh8C,EAAE+7C,GAAI/7C,EAAEi8C,GAAIj8C,EAAE25C,MAAM,IAGjD,YAAAm0B,aAAR,SAAqB9tE,GACnBmuC,KAAK8gC,kBAAkBjvE,EAAE87C,GAAI97C,EAAEg8C,GAAIh8C,EAAE+7C,GAAI/7C,EAAEi8C,GAAIj8C,EAAE25C,MAAM,IAGjD,YAAAs1B,kBAAR,SAA0BtzB,EAAWK,EAAYJ,EAAWK,EAAYtC,EAAcu1B,GACpF,KAAOvzB,IAAMK,GAAMJ,IAAMK,GAAI,CAC3B,IAAM+R,EAAM7f,KAAKtC,aAAa+P,GAC9B,IAAKoS,EACH,OAEF,IAAMmhB,EAAoBnhB,EAAItlD,SAASizC,GACnCwzB,IACFA,EAAKvsD,MAAMwsD,eAAiBF,EAAU,YAAc,UAEhDvzB,GAAKhC,IACTgC,EAAI,EACJC,OA7WgB,GAqBnB,MAAAoqB,uBACA,MAAA/a,kBACA,MAAAlI,iBACA,MAAArG,iBAxBQ4Q,GAAb,CAAiC,EAAApd,YAApB,EAAAod,e,2rBCxBb,cACA,SACA,SACA,UACA,UAEA,UACA,UAEa,EAAA6gB,WAAa,aACb,EAAAkB,UAAY,YACZ,EAAAjB,aAAe,eACf,EAAAkB,gBAAkB,kBAClB,EAAAjB,aAAe,eACf,EAAAE,mBAAqB,qBACrB,EAAAD,yBAA2B,qBAC3B,EAAAE,uBAAyB,mBACzB,EAAAC,6BAA+B,yBAE5C,iBAGE,WACmBnkB,EACTmS,EACkCrR,EACR7J,GAHjB,KAAA+I,YACT,KAAAmS,UACkC,KAAArR,0BACR,KAAA7J,kBAN5B,KAAAwlB,UAAsB,IAAI,EAAAlM,SA2NpC,OAjNS,YAAApU,UAAP,SAAiBpR,GACflH,KAAKsuB,QAAUpnB,GAGV,YAAA25B,UAAP,SAAiBv/B,EAAuBue,EAAauhB,EAAsB1L,EAAiCnb,EAAiB4a,EAAsBza,EAAmBlP,GAUpK,IATA,IAAM4Q,EAAWpc,KAAKmc,UAAUE,yBAE1B4c,EAAej5B,KAAKid,wBAAwBic,oBAAoBrZ,GAMlEwhB,EAAa,EACR7zB,EAAIxgD,KAAKk5C,IAAI5E,EAASlzC,OAAQo9C,GAAQ,EAAGgC,GAAK,EAAGA,IACxD,GAAIlM,EAAS8rB,SAAS5f,EAAGxN,KAAK44B,WAAWvG,YAAc,EAAAmH,gBAAmB4H,GAAe5zB,IAAM+M,EAAU,CACvG8mB,EAAa7zB,EAAI,EACjB,MAIJ,IAASA,EAAI,EAAGA,EAAI6zB,EAAY7zB,IAAK,CACnClM,EAAS8rB,SAAS5f,EAAGxN,KAAK44B,WAC1B,IAAI91B,EAAQ9C,KAAK44B,UAAUne,WAG3B,GAAc,IAAV3X,EAAJ,CAKA,IAAIq2B,GAAW,EACXC,EAAY5rB,EAKZ2f,EAAOntB,KAAK44B,UAChB,GAAIK,EAAa7qE,OAAS,GAAKo/C,IAAMyrB,EAAa,GAAG,GAAI,CACvDE,GAAW,EACX,IAAMxtB,EAAQstB,EAAa7uD,QAI3B+iD,EAAO,IAAI,EAAAkM,eACTr5B,KAAK44B,UACLt3B,EAAS+rB,mBAAkB,EAAM1hB,EAAM,GAAIA,EAAM,IACjDA,EAAM,GAAKA,EAAM,IAInBytB,EAAYztB,EAAM,GAAK,EAGvB7I,EAAQqqB,EAAK1S,WAGf,IAAM6mB,EAActhC,KAAKmc,UAAUtrC,cAAc,QAkBjD,GAjBIiyB,EAAQ,IACVw+B,EAAY7sD,MAAMquB,MAAW4X,EAAY5X,EAAK,MAG5Cq2B,IAGFmI,EAAY7sD,MAAM8kB,QAAU,SAKxBghB,GAAW/M,GAAK+M,GAAW6e,IAC7B7e,EAAU/M,IAIV4zB,GAAe5zB,IAAM+M,EAOvB,OANA+mB,EAAYpvC,UAAU/6B,IAAI,EAAA+oE,cAEtB/K,GACFmM,EAAYpvC,UAAU/6B,IAAI,EAAAipE,oBAGpB1K,GACN,IAAK,MACH4L,EAAYpvC,UAAU/6B,IAAI,EAAAkpE,wBAC1B,MACF,IAAK,YACHiB,EAAYpvC,UAAU/6B,IAAI,EAAAmpE,8BAC1B,MACF,QACEgB,EAAYpvC,UAAU/6B,IAAI,EAAAgpE,0BAK5BhT,EAAKgF,UACPmP,EAAYpvC,UAAU/6B,IAAI,EAAA6oE,YAGxB7S,EAAKqF,YACP8O,EAAYpvC,UAAU/6B,IAAI,EAAA8oE,cAGxB9S,EAAKoF,SACP+O,EAAYpvC,UAAU/6B,IAAI,EAAA+pE,WAGxB/T,EAAK4M,eACPuH,EAAYpvC,UAAU/6B,IAAI,EAAAgqE,iBAGxBhU,EAAK2M,cACPwH,EAAYt7C,YAAc,EAAAosC,qBAE1BkP,EAAYt7C,YAAcmnC,EAAKiE,YAAc,EAAAgB,qBAG/C,IAAI9tB,EAAK6oB,EAAK6E,aACVwB,EAAcrG,EAAKsG,iBACnBpvB,EAAK8oB,EAAK2E,aACV6B,EAAcxG,EAAKyG,iBACjBjC,IAAcxE,EAAKwE,YACzB,GAAIA,EAAW,CACb,IAAMkC,EAAOvvB,EACbA,EAAKD,EACLA,EAAKwvB,EACL,IAAMC,EAAQN,EACdA,EAAcG,EACdA,EAAcG,EAIhB,OAAQN,GACN,KAAK,SACL,KAAK,SACCrG,EAAKgF,UAAY7tB,EAAK,GAAKtE,KAAKoT,gBAAgBj7C,QAAQ+5D,6BAC1D5tB,GAAM,GAEHtE,KAAKuhC,sBAAsBD,EAAathC,KAAKsuB,QAAQ1mB,WAAY5H,KAAKsuB,QAAQrmB,KAAK3D,KACtFg9B,EAAYpvC,UAAU/6B,IAAI,YAAYmtC,GAExC,MACF,KAAK,SACH,IAAM,EAAQ,EAAAZ,KAAKuB,QAChBX,GAAM,GAAM,IACZA,GAAO,EAAK,IACA,IAAb,GAEGtE,KAAKuhC,sBAAsBD,EAAathC,KAAKsuB,QAAQ1mB,WAAY,IACpE5H,KAAKwhC,UAAUF,EAAa,UAAUG,EAASn9B,EAAGj4C,SAAS,IAAK,IAAK,IAEvE,MACF,KAAK,EACL,QACO2zC,KAAKuhC,sBAAsBD,EAAathC,KAAKsuB,QAAQ1mB,WAAY5H,KAAKsuB,QAAQ3mB,aAC7EgqB,GACF2P,EAAYpvC,UAAU/6B,IAAI,YAAY,EAAA06D,wBAM9C,OAAQ8B,GACN,KAAK,SACL,KAAK,SACH2N,EAAYpvC,UAAU/6B,IAAI,YAAYktC,GACtC,MACF,KAAK,SACHrE,KAAKwhC,UAAUF,EAAa,qBAAqBG,EAASp9B,EAAGh4C,SAAS,IAAK,IAAK,IAChF,MACF,KAAK,EACL,QACMslE,GACF2P,EAAYpvC,UAAU/6B,IAAI,YAAY,EAAA06D,wBAI5CzV,EAASv2B,YAAYy7C,GAErB9zB,EAAI4rB,GAEN,OAAOhd,GAGD,YAAAmlB,sBAAR,SAA8BjjC,EAAsB+F,EAAYC,GAC9D,GAA0D,IAAtDtE,KAAKoT,gBAAgBj7C,QAAQk7D,qBAC/B,OAAO,EAIT,IAAIC,EAAgBtzB,KAAKsuB,QAAQpmB,cAAcxB,SAAS1G,KAAK44B,UAAUv0B,GAAIrE,KAAK44B,UAAUt0B,IAQ1F,YALsB34C,IAAlB2nE,IACFA,EAAgB,EAAAnvB,MAAMY,oBAAoBV,EAAIC,EAAItE,KAAKoT,gBAAgBj7C,QAAQk7D,sBAC/ErzB,KAAKsuB,QAAQpmB,cAAczB,SAASzG,KAAK44B,UAAUv0B,GAAIrE,KAAK44B,UAAUt0B,GAAIgvB,UAAiB,SAGzFA,IACFtzB,KAAKwhC,UAAUljC,EAAS,SAASg1B,EAAc/gC,MACxC,IAMH,YAAAivC,UAAR,SAAkBljC,EAAsB7pB,GACtC6pB,EAAQjZ,aAAa,QAAS,IAAGiZ,EAAQnM,aAAa,UAAY,IAAK1d,EAAK,MA1N9C,GAM7B,MAAA0oC,yBACA,MAAAvI,kBAPQ6qB,GAAb,GA8NA,SAASgC,EAASjnE,EAAcknE,EAAiBtzE,GAC/C,KAAOoM,EAAKpM,OAASA,GACnBoM,EAAOknE,EAAUlnE,EAEnB,OAAOA,EAlOI,EAAAilE,yB,qFCdb,iBAuBE,WACUx1B,GAAA,KAAAA,iBApBH,KAAA03B,mBAA6B,EAO7B,KAAAC,qBAA+B,EAgHxC,OA5FS,YAAAhf,eAAP,WACE5iB,KAAKyiB,oBAAiB92D,EACtBq0C,KAAK2iB,kBAAeh3D,EACpBq0C,KAAK2hC,mBAAoB,EACzB3hC,KAAK4hC,qBAAuB,GAM9B,sBAAW,kCAAmB,C,IAA9B,WACE,OAAI5hC,KAAK2hC,kBACA,CAAC,EAAG,GAGR3hC,KAAK2iB,cAAiB3iB,KAAKyiB,gBAIzBziB,KAAK6hC,6BAA+B7hC,KAAK2iB,aAHvC3iB,KAAKyiB,gB,gCAUhB,sBAAW,gCAAiB,C,IAA5B,WACE,GAAIziB,KAAK2hC,kBACP,MAAO,CAAC3hC,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAetM,KAAO,GAGlG,GAAKqC,KAAKyiB,eAAV,CAKA,IAAKziB,KAAK2iB,cAAgB3iB,KAAK6hC,6BAA8B,CAC3D,IAAMC,EAAkB9hC,KAAKyiB,eAAe,GAAKziB,KAAK4hC,qBACtD,OAAIE,EAAkB9hC,KAAKiK,eAAeuB,KACjC,CAACs2B,EAAkB9hC,KAAKiK,eAAeuB,KAAMxL,KAAKyiB,eAAe,GAAKz1D,KAAKC,MAAM60E,EAAkB9hC,KAAKiK,eAAeuB,OAEzH,CAACs2B,EAAiB9hC,KAAKyiB,eAAe,IAI/C,OAAIziB,KAAK4hC,sBAEH5hC,KAAK2iB,aAAa,KAAO3iB,KAAKyiB,eAAe,GACxC,CAACz1D,KAAK8R,IAAIkhC,KAAKyiB,eAAe,GAAKziB,KAAK4hC,qBAAsB5hC,KAAK2iB,aAAa,IAAK3iB,KAAK2iB,aAAa,IAG3G3iB,KAAK2iB,e,gCAMP,YAAAkf,2BAAP,WACE,IAAMjxE,EAAQovC,KAAKyiB,eACbh4B,EAAMuV,KAAK2iB,aACjB,SAAK/xD,IAAU65B,KAGR75B,EAAM,GAAK65B,EAAI,IAAO75B,EAAM,KAAO65B,EAAI,IAAM75B,EAAM,GAAK65B,EAAI,KAQ9D,YAAAs3C,OAAP,SAAchkB,GAUZ,OARI/d,KAAKyiB,iBACPziB,KAAKyiB,eAAe,IAAM1E,GAExB/d,KAAK2iB,eACP3iB,KAAK2iB,aAAa,IAAM5E,GAItB/d,KAAK2iB,cAAgB3iB,KAAK2iB,aAAa,GAAK,GAC9C3iB,KAAK4iB,kBACE,IAIL5iB,KAAKyiB,gBAAkBziB,KAAKyiB,eAAe,GAAK,IAClDziB,KAAKyiB,eAAe,GAAK,IAEpB,IAEX,EA3HA,GAAa,EAAAuf,kB,mgBCNb,cACA,UAGA,aAYE,WACEj8D,EACAgkC,EACkCqJ,GAAA,KAAAA,kBAZ7B,KAAAtQ,MAAgB,EAChB,KAAAhB,OAAiB,EAKhB,KAAAmgC,kBAAoB,IAAI,EAAA13B,aAQ9BvK,KAAKkiC,iBAAmB,IAAIC,EAAmBp8D,EAAUgkC,EAAe/J,KAAKoT,iBAWjF,OArBE,sBAAW,2BAAY,C,IAAvB,WAAqC,OAAOpT,KAAK8C,MAAQ,GAAK9C,KAAK8B,OAAS,G,gCAG5E,sBAAW,+BAAgB,C,IAA3B,WAA8C,OAAO9B,KAAKiiC,kBAAkBj5D,O,gCAUrE,YAAAnB,QAAP,WACE,IAAMhL,EAASmjC,KAAKkiC,iBAAiBr6D,UACjChL,EAAOimC,QAAU9C,KAAK8C,OAASjmC,EAAOilC,SAAW9B,KAAK8B,SACxD9B,KAAK8C,MAAQjmC,EAAOimC,MACpB9C,KAAK8B,OAASjlC,EAAOilC,OACrB9B,KAAKiiC,kBAAkB5zB,SAzBD,GAevB,MAAAuG,kBAfQiI,GAAb,GAAa,EAAAA,kBA6Cb,iBAIE,WACUV,EACAimB,EACAhvB,GAFA,KAAA+I,YACA,KAAAimB,iBACA,KAAAhvB,kBANF,KAAAivB,QAA0B,CAAEv/B,MAAO,EAAGhB,OAAQ,GAQpD9B,KAAKsiC,gBAAkBtiC,KAAKmc,UAAUtrC,cAAc,QACpDmvB,KAAKsiC,gBAAgBpwC,UAAU/6B,IAAI,8BACnC6oC,KAAKsiC,gBAAgBt8C,YAAc,IACnCga,KAAKsiC,gBAAgBj9C,aAAa,cAAe,QACjD2a,KAAKoiC,eAAev8C,YAAYma,KAAKsiC,iBAmBzC,OAhBS,YAAAz6D,QAAP,WACEm4B,KAAKsiC,gBAAgB7tD,MAAMwzC,WAAajoB,KAAKoT,gBAAgBj7C,QAAQ8vD,WACrEjoB,KAAKsiC,gBAAgB7tD,MAAMyzC,SAAcloB,KAAKoT,gBAAgBj7C,QAAQ+vD,SAAQ,KAG9E,IAAMqa,EAAWviC,KAAKsiC,gBAAgBjnC,wBAStC,OALuB,IAAnBknC,EAASz/B,OAAmC,IAApBy/B,EAASzgC,SACnC9B,KAAKqiC,QAAQv/B,MAAQy/B,EAASz/B,MAC9B9C,KAAKqiC,QAAQvgC,OAAS90C,KAAKg5C,KAAKu8B,EAASzgC,SAGpC9B,KAAKqiC,SAEhB,EAhCA,I,83BC/CA,cACA,SACA,SACA,UAGA,cASE,WAAYG,EAAsBzT,EAAejsB,GAAjD,MACE,cAAO,K,OANF,EAAA+I,QAAkB,EAGlB,EAAA42B,aAAuB,GAI5B,EAAKn+B,GAAKk+B,EAAUl+B,GACpB,EAAKD,GAAKm+B,EAAUn+B,GACpB,EAAKo+B,aAAe1T,EACpB,EAAKgN,OAASj5B,E,EA6BlB,OA3CoC,OAiB3B,YAAA4/B,WAAP,WAEE,OAAO,SAGF,YAAAjoB,SAAP,WACE,OAAOza,KAAK+7B,QAGP,YAAA3K,SAAP,WACE,OAAOpxB,KAAKyiC,cAGP,YAAApQ,QAAP,WAGE,OAAO,SAGF,YAAAsQ,gBAAP,SAAuB32E,GACrB,MAAM,IAAIuyC,MAAM,oBAGX,YAAAqkC,cAAP,WACE,MAAO,CAAC5iC,KAAKsE,GAAItE,KAAKoxB,WAAYpxB,KAAKya,WAAYza,KAAKqyB,YAE5D,EA3CA,CAAoC,EAAAO,eAAvB,EAAAyG,iBA6Cb,iBAOE,WAC0BpvB,GAAA,KAAAA,iBALlB,KAAA44B,kBAAwC,GACxC,KAAAC,uBAAiC,EACjC,KAAAlK,UAAsB,IAAI,EAAAlM,SA0QpC,OApQS,YAAAjuB,SAAP,SAAgB35B,GACd,IAAMi+D,EAA2B,CAC/B1pE,GAAI2mC,KAAK8iC,yBACTh+D,QAAO,GAIT,OADAk7B,KAAK6iC,kBAAkB5pE,KAAK8pE,GACrBA,EAAO1pE,IAGT,YAAA0oD,WAAP,SAAkBF,GAChB,IAAK,IAAI1zD,EAAI,EAAGA,EAAI6xC,KAAK6iC,kBAAkBz0E,OAAQD,IACjD,GAAI6xC,KAAK6iC,kBAAkB10E,GAAGkL,KAAOwoD,EAEnC,OADA7hB,KAAK6iC,kBAAkBh0E,OAAOV,EAAG,IAC1B,EAIX,OAAO,GAGF,YAAA+qE,oBAAP,SAA2BrZ,GACzB,GAAsC,IAAlC7f,KAAK6iC,kBAAkBz0E,OACzB,MAAO,GAGT,IAAM++C,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI4pD,GAClD,IAAK1S,GAAwB,IAAhBA,EAAK/+C,OAChB,MAAO,GAgBT,IAbA,IAAM40E,EAA6B,GAC7BC,EAAU91B,EAAKkgB,mBAAkB,GAMnC6V,EAAmB,EACnBC,EAAqB,EACrBC,EAAwB,EACxBC,EAAcl2B,EAAKC,MAAM,GACzBk2B,EAAcn2B,EAAKo2B,MAAM,GAEpB/1B,EAAI,EAAGA,EAAIL,EAAKq2B,mBAAoBh2B,IAG3C,GAFAL,EAAKigB,SAAS5f,EAAGxN,KAAK44B,WAEY,IAA9B54B,KAAK44B,UAAUne,WAAnB,CAMA,GAAIza,KAAK44B,UAAUt0B,KAAO++B,GAAerjC,KAAK44B,UAAUv0B,KAAOi/B,EAAa,CAG1E,GAAI91B,EAAI01B,EAAmB,EAQzB,IAPA,IAAMjK,EAAej5B,KAAKyjC,iBACxBR,EACAG,EACAD,EACAh2B,EACA+1B,GAEO/0E,EAAI,EAAGA,EAAI8qE,EAAa7qE,OAAQD,IACvC60E,EAAO/pE,KAAKggE,EAAa9qE,IAK7B+0E,EAAmB11B,EACnB41B,EAAwBD,EACxBE,EAAcrjC,KAAK44B,UAAUt0B,GAC7Bg/B,EAActjC,KAAK44B,UAAUv0B,GAG/B8+B,GAAsBnjC,KAAK44B,UAAUxH,WAAWhjE,QAAU,EAAAgkE,qBAAqBhkE,OAIjF,GAAI4xC,KAAKiK,eAAeuB,KAAO03B,EAAmB,EAQhD,IAPMjK,EAAej5B,KAAKyjC,iBACxBR,EACAG,EACAD,EACAh2B,EACA+1B,GAEO/0E,EAAI,EAAGA,EAAI8qE,EAAa7qE,OAAQD,IACvC60E,EAAO/pE,KAAKggE,EAAa9qE,IAI7B,OAAO60E,GAWD,YAAAS,iBAAR,SAAyBt2B,EAAcu2B,EAAoBC,EAAkBriC,EAAuBioB,GAMlG,IALA,IAAM/uD,EAAO2yC,EAAKxD,UAAU+5B,EAAYC,GAIlC1K,EAAmCj5B,KAAK6iC,kBAAkB,GAAG/9D,QAAQtK,GAClErM,EAAI,EAAGA,EAAI6xC,KAAK6iC,kBAAkBz0E,OAAQD,IAGjD,IADA,IAAMy1E,EAAe5jC,KAAK6iC,kBAAkB10E,GAAG2W,QAAQtK,GAC9CigB,EAAI,EAAGA,EAAImpD,EAAax1E,OAAQqsB,IACvCyiC,EAAuB2mB,aAAa5K,EAAc2K,EAAanpD,IAInE,OADAulB,KAAK8jC,0BAA0B7K,EAAc33B,EAAUioB,GAChD0P,GAWD,YAAA6K,0BAAR,SAAkCd,EAA4B71B,EAAmBoc,GAC/E,IAAIwa,EAAoB,EACpBC,GAAsB,EACtBb,EAAqB,EACrBc,EAAejB,EAAOe,GAG1B,GAAKE,EAAL,CAIA,IAAK,IAAIz2B,EAAI+b,EAAU/b,EAAIxN,KAAKiK,eAAeuB,KAAMgC,IAAK,CACxD,IAAM1K,EAAQqK,EAAKsN,SAASjN,GACtB,EAASL,EAAK+2B,UAAU12B,GAAGp/C,QAAU,EAAAgkE,qBAAqBhkE,OAIhE,GAAc,IAAV00C,EAAJ,CAWA,IANKkhC,GAAuBC,EAAa,IAAMd,IAC7Cc,EAAa,GAAKz2B,EAClBw2B,GAAsB,GAIpBC,EAAa,IAAMd,EAAoB,CAOzC,GANAc,EAAa,GAAKz2B,IAGlBy2B,EAAejB,IAASe,IAItB,MAOEE,EAAa,IAAMd,GACrBc,EAAa,GAAKz2B,EAClBw2B,GAAsB,GAEtBA,GAAsB,EAM1Bb,GAAsB,GAKpBc,IACFA,EAAa,GAAKjkC,KAAKiK,eAAeuB,QAY3B,EAAAq4B,aAAf,SAA4Bb,EAA4BmB,GAEtD,IADA,IAAIC,GAAU,EACLj2E,EAAI,EAAGA,EAAI60E,EAAO50E,OAAQD,IAAK,CACtC,IAAMw9C,EAAQq3B,EAAO70E,GACrB,GAAKi2E,EAAL,CAwBE,GAAID,EAAS,IAAMx4B,EAAM,GAIvB,OADAq3B,EAAO70E,EAAI,GAAG,GAAKg2E,EAAS,GACrBnB,EAGT,GAAImB,EAAS,IAAMx4B,EAAM,GAKvB,OAFAq3B,EAAO70E,EAAI,GAAG,GAAKnB,KAAK8R,IAAIqlE,EAAS,GAAIx4B,EAAM,IAC/Cq3B,EAAOn0E,OAAOV,EAAG,GACV60E,EAKTA,EAAOn0E,OAAOV,EAAG,GACjBA,QA1CF,CACE,GAAIg2E,EAAS,IAAMx4B,EAAM,GAGvB,OADAq3B,EAAOn0E,OAAOV,EAAG,EAAGg2E,GACbnB,EAGT,GAAImB,EAAS,IAAMx4B,EAAM,GAIvB,OADAA,EAAM,GAAK3+C,KAAKk5C,IAAIi+B,EAAS,GAAIx4B,EAAM,IAChCq3B,EAGLmB,EAAS,GAAKx4B,EAAM,KAGtBA,EAAM,GAAK3+C,KAAKk5C,IAAIi+B,EAAS,GAAIx4B,EAAM,IACvCy4B,GAAU,IAoChB,OARIA,EAEFpB,EAAOA,EAAO50E,OAAS,GAAG,GAAK+1E,EAAS,GAGxCnB,EAAO/pE,KAAKkrE,GAGPnB,GA7QE9lB,EAAsB,GAQ9B,MAAA3O,iBARQ2O,GAAb,GAAa,EAAAA,0B,0FCnDb,iBAGE,WACUqK,GAAA,KAAAA,YAQZ,OAJE,sBAAW,wBAAS,C,IAApB,WAEE,OADwBvnB,KAAKunB,UAAU8c,YAAcrkC,KAAKunB,UAAU8c,cAAyCt+D,UACtFmqB,gBAAkB8P,KAAKunB,WAAaxhD,SAASu+D,Y,gCAExE,EAZA,GAAa,EAAA5nB,sB,igBCFb,cACA,UAEA,aAGE,WACmCtf,EACE2b,GADF,KAAA3b,iBACE,KAAA2b,mBAqBvC,OAjBS,YAAAhG,UAAP,SAAiB/pC,EAA2Cs1B,EAAsBiqB,EAAkBpT,EAAkBsT,GACpH,OAAO,EAAA1V,UACL/pC,EACAs1B,EACAiqB,EACApT,EACAnV,KAAK+Y,iBAAiBmL,aACtBlkB,KAAK5C,eAAewE,WAAW+Y,gBAC/B3a,KAAK5C,eAAewE,WAAWC,iBAC/B4mB,IAIG,YAAAlJ,iBAAP,SAAwBv2C,EAAmBs1B,EAAsBiqB,EAAkBpT,GACjF,IAAMrC,EAAS9S,KAAK+S,UAAU/pC,EAAOs1B,EAASiqB,EAAUpT,GACxD,OAAO,EAAAoK,iBAAiBzM,IAxBH,GAIpB,MAAAwK,gBACA,MAAAR,mBALQe,GAAb,GAAa,EAAAA,gB,o2BCFb,cACA,UACA,SACA,UACA,UAEA,UACA,UAQA,cA2BE,WACU0mB,EACAnvB,EACRzS,EACiBuV,EACkBa,EACnB8P,GANlB,MAQE,cAAO,KAwBP,GA/BQ,EAAA0b,YACA,EAAAnvB,YAG2B,EAAA2D,mBA1B7B,EAAAyrB,WAAqB,EACrB,EAAAC,mBAA6B,EAC7B,EAAAC,yBAAmC,EACnC,EAAAC,wBAAkC,EAClC,EAAAC,aAAuB,EACvB,EAAAC,cAAwB,EACxB,EAAAC,gBAAmC,CACzCl0E,WAAOjF,EACP8+B,SAAK9+B,EACL6yD,kBAAkB,GAGZ,EAAAumB,oBAAsB,IAAI,EAAAx6B,aAE1B,EAAAgM,UAAY,IAAI,EAAAhM,aAEhB,EAAAy6B,kBAAoB,IAAI,EAAAz6B,aAe9B,EAAK9L,SAAS,CAAEqB,QAAS,WAAM,SAAKykC,UAAUzkC,aAE9C,EAAKmlC,iBAAmB,IAAI,EAAA/mC,iBAAgB,SAACttC,EAAO65B,GAAQ,SAAK0T,YAAYvtC,EAAO65B,MACpF,EAAKgU,SAAS,EAAKwmC,kBAEnB,EAAKvlC,kBAAoB,IAAI,EAAAC,iBAC7B,EAAKD,kBAAkBE,aAAY,WAAM,SAAK23B,8BAC9C,EAAK94B,SAAS,EAAKiB,mBAEnB,EAAKjB,SAASoqB,EAAcnqB,UAAS,SAAA7sC,GAAK,SAAKqzE,mBAC/C,EAAKzmC,SAASyZ,EAAe8E,gBAAe,WAAM,SAAKunB,UAAU9U,uBACjE,EAAKhxB,SAAS,EAAKsa,iBAAiBosB,kBAAiB,WAAM,SAAK3N,wBAGhE,EAAK+M,UAAUjmB,iBAAgB,SAAAzsD,GAAK,SAAKyvD,YAAYzvD,EAAEjB,MAAOiB,EAAE44B,KAAK,MAIrE,EAAKgU,SAAS,EAAAoB,yBAAyBjrC,OAAQ,UAAU,WAAM,SAAK2iE,+BAIhE,yBAA0B3iE,OAAQ,CACpC,IAAM,EAAW,IAAIwwE,sBAAqB,SAAAvzE,GAAK,SAAKwzE,sBAAsBxzE,EAAEA,EAAEzD,OAAS,MAAK,CAAEk3E,UAAW,IACzG,EAASxnE,QAAQ6kC,GACjB,EAAKlE,SAAS,CAAEqB,QAAS,WAAM,SAASylC,gB,SAqI9C,OAnMmC,OAmBjC,sBAAW,iCAAkB,C,IAA7B,WAA6D,OAAOvlC,KAAK+kC,oBAAoB/7D,O,gCAE7F,sBAAW,qCAAsB,C,IAAjC,WAA8E,OAAOg3B,KAAKuW,UAAUvtC,O,gCAEpG,sBAAW,+BAAgB,C,IAA3B,WAAwE,OAAOg3B,KAAKglC,kBAAkBh8D,O,gCAEtG,sBAAW,yBAAU,C,IAArB,WAA6C,OAAOg3B,KAAKukC,UAAU3iC,Y,gCAyC3D,YAAAyjC,sBAAR,SAA8B3K,GAC5B16B,KAAKwkC,eAAqC74E,IAAzB+uE,EAAM8K,eAA4D,IAA5B9K,EAAM+K,mBAA4B/K,EAAM8K,eAG1FxlC,KAAKwkC,WAAcxkC,KAAK+Y,iBAAiBmL,cAC5ClkB,KAAK+Y,iBAAiBlxC,WAGnBm4B,KAAKwkC,WAAaxkC,KAAKykC,oBAC1BzkC,KAAKshB,YAAY,EAAGthB,KAAKoV,UAAY,GACrCpV,KAAKykC,mBAAoB,IAItB,YAAAnjB,YAAP,SAAmB1wD,EAAe65B,EAAai7C,QAAA,IAAAA,OAAA,GACzC1lC,KAAKwkC,UACPxkC,KAAKykC,mBAAoB,GAGtBiB,IACH1lC,KAAK0kC,yBAA0B,GAEjC1kC,KAAKilC,iBAAiB7jC,QAAQxwC,EAAO65B,EAAKuV,KAAKoV,aAGzC,YAAAjX,YAAR,SAAoBvtC,EAAe65B,GACjCuV,KAAKukC,UAAU5M,WAAW/mE,EAAO65B,GAG7BuV,KAAK2kC,yBACP3kC,KAAKukC,UAAUhmB,mBAAmBve,KAAK8kC,gBAAgBl0E,MAAOovC,KAAK8kC,gBAAgBr6C,IAAKuV,KAAK8kC,gBAAgBtmB,kBAC7Gxe,KAAK2kC,wBAAyB,GAI3B3kC,KAAK0kC,yBACR1kC,KAAKuW,UAAUlI,KAAK,CAAEz9C,MAAK,EAAE65B,IAAG,IAElCuV,KAAK0kC,yBAA0B,GAG1B,YAAAnnB,OAAP,SAAc/R,EAAc7N,GAC1BqC,KAAKoV,UAAYzX,EACjBqC,KAAK2lC,uBAGA,YAAAC,cAAP,WACE5lC,KAAKukC,UAAU9U,mBACfzvB,KAAKshB,YAAY,EAAGthB,KAAKoV,UAAY,GACrCpV,KAAK2lC,uBAGC,YAAAA,oBAAR,WAEM3lC,KAAKukC,UAAU3iC,WAAW2iB,cAAgBvkB,KAAK4kC,cAAgB5kC,KAAKukC,UAAU3iC,WAAW8iB,eAAiB1kB,KAAK6kC,eAGnH7kC,KAAK+kC,oBAAoB12B,KAAKrO,KAAKukC,UAAU3iC,aAGxC,YAAA9B,QAAP,WACE,YAAMA,QAAO,YAGR,YAAAkZ,YAAP,SAAmBoE,GAAnB,WAEEpd,KAAKukC,UAAUzkC,UACfE,KAAKukC,UAAYnnB,EACjBpd,KAAKukC,UAAUjmB,iBAAgB,SAAAzsD,GAAK,SAAKyvD,YAAYzvD,EAAEjB,MAAOiB,EAAE44B,KAAK,MAGrEuV,KAAK2kC,wBAAyB,EAC9B3kC,KAAKklC,gBAGC,YAAAA,aAAR,WACMllC,KAAKwkC,UACPxkC,KAAKykC,mBAAoB,EAEzBzkC,KAAKshB,YAAY,EAAGthB,KAAKoV,UAAY,IAIlC,YAAAkD,UAAP,SAAiBpR,GACflH,KAAKukC,UAAUjsB,UAAUpR,GACzBlH,KAAKklC,gBAGA,YAAA3N,yBAAP,WAGEv3B,KAAK+Y,iBAAiBlxC,UAEtBm4B,KAAKukC,UAAUhN,2BACfv3B,KAAKshB,YAAY,EAAGthB,KAAKoV,UAAY,IAGhC,YAAA1W,SAAP,SAAgB8M,EAAc7N,GAC5BqC,KAAKukC,UAAU7lC,SAAS8M,EAAM7N,GAC9BqC,KAAKklC,gBAIA,YAAA1N,kBAAP,WACEx3B,KAAKukC,UAAU/M,qBAGV,YAAAj4B,OAAP,WACES,KAAKukC,UAAUhlC,UAGV,YAAA0e,QAAP,WACEje,KAAKukC,UAAUtmB,WAGV,YAAAM,mBAAP,SAA0B3tD,EAAqC65B,EAAmC+zB,GAChGxe,KAAK8kC,gBAAgBl0E,MAAQA,EAC7BovC,KAAK8kC,gBAAgBr6C,IAAMA,EAC3BuV,KAAK8kC,gBAAgBtmB,iBAAmBA,EACxCxe,KAAKukC,UAAUhmB,mBAAmB3tD,EAAO65B,EAAK+zB,IAGzC,YAAAzG,aAAP,WACE/X,KAAKukC,UAAUxsB,gBAGV,YAAA3gD,MAAP,WACE4oC,KAAKukC,UAAUntE,SAjMO,GA+BrB,MAAAw9C,iBACA,MAAAkI,kBACA,MAAAvO,iBAjCQ8O,GAAb,CAAmC,EAAAtb,YAAtB,EAAAsb,iB,u2BCbb,cACA,SACA,SACA,UACA,UAEA,UACA,UACA,UACA,SACA,UAwBMwoB,EAA0B94E,OAAOg3D,aAAa,KAC9C+hB,EAA+B,IAAI1xE,OAAOyxE,EAAyB,KA4BzE,cAmDE,WACmBh7B,EACAqI,EACAgsB,EACgBj1B,EACFuP,EACCjK,EACE6D,EACDhW,GARnC,MAUE,cAAO,K,OATU,EAAAyN,WACA,EAAAqI,iBACA,EAAAgsB,aACgB,EAAAj1B,iBACF,EAAAuP,eACC,EAAAjK,gBACE,EAAA6D,kBACD,EAAAhW,iBAlD3B,EAAA2oC,kBAA4B,EAqB5B,EAAAC,UAAW,EAKX,EAAApN,UAAsB,IAAI,EAAAlM,SAE1B,EAAAuZ,oBAA8B,EAC9B,EAAAC,kBAA4B,EAC5B,EAAAC,wBAAmDx6E,EACnD,EAAAy6E,sBAAiDz6E,EAEjD,EAAA06E,uBAAyB,EAAK5nC,SAAS,IAAI,EAAA8L,cAE3C,EAAA+7B,iBAAmB,EAAK7nC,SAAS,IAAI,EAAA8L,cAErC,EAAAiM,mBAAqB,EAAK/X,SAAS,IAAI,EAAA8L,cAEvC,EAAAg8B,sBAAwB,EAAK9nC,SAAS,IAAI,EAAA8L,cAgBhD,EAAKmJ,mBAAqB,SAAA1qC,GAAS,SAAKymC,aAAyBzmC,IACjE,EAAKw9D,iBAAmB,SAAAx9D,GAAS,SAAKy9D,WAAuBz9D,IAC7D,EAAKwwC,aAAaktB,aAAY,WACxB,EAAKzrB,cACP,EAAK2H,oBAGT,EAAK+jB,cAAgB,EAAK18B,eAAe7J,OAAOC,MAAM0hC,QAAO,SAAAhkB,GAAU,SAAK6oB,QAAQ7oB,MACpF,EAAKtf,SAAS,EAAKwL,eAAe2O,QAAQmU,kBAAiB,SAAAl7D,GAAK,SAAKg1E,kBAAkBh1E,OAEvF,EAAKktD,SAEL,EAAK+nB,OAAS,IAAI,EAAA9E,eAAe,EAAK/3B,gBACtC,EAAK88B,qBAAuB,E,EA41BhC,OAz6BsC,OA2CpC,sBAAW,oCAAqB,C,IAAhC,WAAqD,OAAO/mC,KAAKqmC,uBAAuBr9D,O,gCAExF,sBAAW,8BAAe,C,IAA1B,WAAqE,OAAOg3B,KAAKsmC,iBAAiBt9D,O,gCAElG,sBAAW,gCAAiB,C,IAA5B,WAA+C,OAAOg3B,KAAKwW,mBAAmBxtC,O,gCAE9E,sBAAW,mCAAoB,C,IAA/B,WAA+E,OAAOg3B,KAAKumC,sBAAsBv9D,O,gCA+B1G,YAAA82B,QAAP,WACEE,KAAKgnC,6BAGA,YAAAvvB,MAAP,WACEzX,KAAK4iB,kBAOA,YAAA9D,QAAP,WACE9e,KAAK4iB,iBACL5iB,KAAKgmC,UAAW,GAMX,YAAAjnB,OAAP,WACE/e,KAAKgmC,UAAW,GAGlB,sBAAW,6BAAc,C,IAAzB,WAA4D,OAAOhmC,KAAK8mC,OAAOG,qB,gCAC/E,sBAAW,2BAAY,C,IAAvB,WAA0D,OAAOjnC,KAAK8mC,OAAOI,mB,gCAK7E,sBAAW,2BAAY,C,IAAvB,WACE,IAAMt2E,EAAQovC,KAAK8mC,OAAOG,oBACpBx8C,EAAMuV,KAAK8mC,OAAOI,kBACxB,SAAKt2E,IAAU65B,GAGR75B,EAAM,KAAO65B,EAAI,IAAM75B,EAAM,KAAO65B,EAAI,K,gCAMjD,sBAAW,4BAAa,C,IAAxB,WACE,IAAM75B,EAAQovC,KAAK8mC,OAAOG,oBACpBx8C,EAAMuV,KAAK8mC,OAAOI,kBACxB,IAAKt2E,IAAU65B,EACb,MAAO,GAGT,IAAM2V,EAASJ,KAAKiK,eAAe7J,OAC7BvjC,EAAmB,GAEzB,GAAkC,IAA9BmjC,KAAK+mC,qBAA+C,CAEtD,GAAIn2E,EAAM,KAAO65B,EAAI,GACnB,MAAO,GAGT,IAAK,IAAIt8B,EAAIyC,EAAM,GAAIzC,GAAKs8B,EAAI,GAAIt8B,IAAK,CACvC,IAAMg5E,EAAW/mC,EAAOmB,4BAA4BpzC,GAAG,EAAMyC,EAAM,GAAI65B,EAAI,IAC3E5tB,EAAO5D,KAAKkuE,QAET,CAEL,IAAM/O,EAAiBxnE,EAAM,KAAO65B,EAAI,GAAKA,EAAI,QAAK9+B,EAItD,IAHAkR,EAAO5D,KAAKmnC,EAAOmB,4BAA4B3wC,EAAM,IAAI,EAAMA,EAAM,GAAIwnE,IAGhEjqE,EAAIyC,EAAM,GAAK,EAAGzC,GAAKs8B,EAAI,GAAK,EAAGt8B,IAAK,CAC/C,IAAMmsD,EAAala,EAAOC,MAAMpqC,IAAI9H,GAC9Bg5E,EAAW/mC,EAAOmB,4BAA4BpzC,GAAG,GACnDmsD,GAAcA,EAAW6O,UAC3BtsD,EAAOA,EAAOzO,OAAS,IAAM+4E,EAE7BtqE,EAAO5D,KAAKkuE,GAKZv2E,EAAM,KAAO65B,EAAI,KACb6vB,EAAala,EAAOC,MAAMpqC,IAAIw0B,EAAI,IAClC08C,EAAW/mC,EAAOmB,4BAA4B9W,EAAI,IAAI,EAAM,EAAGA,EAAI,IACrE6vB,GAAcA,EAAY6O,UAC5BtsD,EAAOA,EAAOzO,OAAS,IAAM+4E,EAE7BtqE,EAAO5D,KAAKkuE,IAWlB,OAJwBtqE,EAAO9O,KAAI,SAAAo/C,GACjC,OAAOA,EAAK39C,QAAQs2E,EAA8B,QACjD5sE,KAAKk9C,EAAQsN,UAAY,OAAS,O,gCAQhC,YAAAd,eAAP,WACE5iB,KAAK8mC,OAAOlkB,iBACZ5iB,KAAKgnC,4BACLhnC,KAAKoB,UACLpB,KAAKwW,mBAAmBnI,QAQnB,YAAAjN,QAAP,SAAegmC,GAAf,WAEOpnC,KAAK8lB,yBACR9lB,KAAK8lB,uBAAyBlxD,OAAO++B,uBAAsB,WAAM,SAAKuyB,eAKpE9P,EAAQqF,SAAW2rB,GACCpnC,KAAKmD,cACT/0C,QAChB4xC,KAAKqmC,uBAAuBh4B,KAAKrO,KAAKmD,gBASpC,YAAA+iB,SAAR,WACElmB,KAAK8lB,4BAAyBn6D,EAC9Bq0C,KAAKsmC,iBAAiBj4B,KAAK,CACzBz9C,MAAOovC,KAAK8mC,OAAOG,oBACnBx8C,IAAKuV,KAAK8mC,OAAOI,kBACjB1oB,iBAAgD,IAA9Bxe,KAAK+mC,wBAQnB,YAAAM,oBAAR,SAA4Br+D,GAC1B,IAAM8pC,EAAS9S,KAAKsnC,sBAAsBt+D,GACpCpY,EAAQovC,KAAK8mC,OAAOG,oBACpBx8C,EAAMuV,KAAK8mC,OAAOI,kBAExB,SAAKt2E,GAAU65B,GAAQqoB,IAIhB9S,KAAKunC,sBAAsBz0B,EAAQliD,EAAO65B,IAGzC,YAAA88C,sBAAV,SAAgCz0B,EAA0BliD,EAAyB65B,GACjF,OAAQqoB,EAAO,GAAKliD,EAAM,IAAMkiD,EAAO,GAAKroB,EAAI,IAC3C75B,EAAM,KAAO65B,EAAI,IAAMqoB,EAAO,KAAOliD,EAAM,IAAMkiD,EAAO,IAAMliD,EAAM,IAAMkiD,EAAO,GAAKroB,EAAI,IAC1F75B,EAAM,GAAK65B,EAAI,IAAMqoB,EAAO,KAAOroB,EAAI,IAAMqoB,EAAO,GAAKroB,EAAI,IAC7D75B,EAAM,GAAK65B,EAAI,IAAMqoB,EAAO,KAAOliD,EAAM,IAAMkiD,EAAO,IAAMliD,EAAM,IAOjE,YAAA42E,oBAAR,SAA4Bx+D,EAAmBy+D,G,QAEvC97B,EAAyC,QAApC,EAA8B,QAA9B,EAAG3L,KAAKk/B,WAAWztB,mBAAW,eAAEtB,YAAI,eAAExE,MACjD,GAAIA,EAIF,OAHA3L,KAAK8mC,OAAOrkB,eAAiB,CAAC9W,EAAM/6C,MAAM48C,EAAI,EAAG7B,EAAM/6C,MAAM68C,EAAI,GACjEzN,KAAK8mC,OAAOlF,qBAAuB,EAAA8F,eAAe/7B,EAAO3L,KAAKiK,eAAeuB,MAC7ExL,KAAK8mC,OAAOnkB,kBAAeh3D,GACpB,EAGT,IAAMmnD,EAAS9S,KAAKsnC,sBAAsBt+D,GAC1C,QAAI8pC,IACF9S,KAAK2nC,cAAc70B,EAAQ20B,GAC3BznC,KAAK8mC,OAAOnkB,kBAAeh3D,GACpB,IAQJ,YAAAk3D,UAAP,WACE7iB,KAAK8mC,OAAOnF,mBAAoB,EAChC3hC,KAAKoB,UACLpB,KAAKwW,mBAAmBnI,QAGnB,YAAAyU,YAAP,SAAmBlyD,EAAe65B,GAChCuV,KAAK8mC,OAAOlkB,iBACZhyD,EAAQ5D,KAAK8R,IAAIlO,EAAO,GACxB65B,EAAMz9B,KAAKk5C,IAAIzb,EAAKuV,KAAKiK,eAAe7J,OAAOC,MAAMjyC,OAAS,GAC9D4xC,KAAK8mC,OAAOrkB,eAAiB,CAAC,EAAG7xD,GACjCovC,KAAK8mC,OAAOnkB,aAAe,CAAC3iB,KAAKiK,eAAeuB,KAAM/gB,GACtDuV,KAAKoB,UACLpB,KAAKwW,mBAAmBnI,QAOlB,YAAAu4B,QAAR,SAAgB7oB,GACO/d,KAAK8mC,OAAO/E,OAAOhkB,IAEtC/d,KAAKoB,WAQD,YAAAkmC,sBAAR,SAA8Bt+D,GAC5B,IAAM8pC,EAAS9S,KAAKuP,cAAcwD,UAAU/pC,EAAOg3B,KAAKkT,eAAgBlT,KAAKiK,eAAeuB,KAAMxL,KAAKiK,eAAetM,MAAM,GAC5H,GAAKmV,EAUL,OALAA,EAAO,KACPA,EAAO,KAGPA,EAAO,IAAM9S,KAAKiK,eAAe7J,OAAOoB,MACjCsR,GAQD,YAAA80B,2BAAR,SAAmC5+D,GACjC,IAAIw0D,EAAS,EAAAnV,2BAA2Br/C,EAAOg3B,KAAKkT,gBAAgB,GAC9D20B,EAAiB7nC,KAAK5C,eAAewE,WAAW8iB,aACtD,OAAI8Y,GAAU,GAAKA,GAAUqK,EACpB,GAELrK,EAASqK,IACXrK,GAAUqK,GAGZrK,EAASxwE,KAAKk5C,IAAIl5C,KAAK8R,IAAI0+D,GA5XG,SA6X9BA,GA7X8B,IA8XbxwE,KAAKk0D,IAAIsc,GAAWxwE,KAAK63C,MAAe,GAAT24B,KAQ3C,YAAA3c,qBAAP,SAA4B73C,GAC1B,OAAIotC,EAAQlV,MACHl4B,EAAMS,QAAUu2B,KAAKoT,gBAAgBj7C,QAAQ2vE,8BAG/C9+D,EAAMi3C,UAOR,YAAAtB,YAAP,SAAmB31C,GAIjB,GAHAg3B,KAAKimC,oBAAsBj9D,EAAMqS,WAGZ,IAAjBrS,EAAMsyC,SAAgBtb,KAAKib,eAKV,IAAjBjyC,EAAMsyC,OAAV,CAKA,IAAKtb,KAAKgmC,SAAU,CAClB,IAAKhmC,KAAK6gB,qBAAqB73C,GAC7B,OAIFA,EAAMo6B,kBAIRp6B,EAAM43B,iBAGNZ,KAAK+lC,kBAAoB,EAErB/lC,KAAKgmC,UAAYh9D,EAAMi3C,SACzBjgB,KAAK+nC,oBAAoB/+D,GAEJ,IAAjBA,EAAMg/D,OACRhoC,KAAKioC,eAAej/D,GACM,IAAjBA,EAAMg/D,OACfhoC,KAAKkoC,eAAel/D,GACM,IAAjBA,EAAMg/D,QACfhoC,KAAKmoC,eAAen/D,GAIxBg3B,KAAKooC,yBACLpoC,KAAKoB,SAAQ,KAMP,YAAAgnC,uBAAR,sBAEMpoC,KAAKkT,eAAe9jB,gBACtB4Q,KAAKkT,eAAe9jB,cAAcl5B,iBAAiB,YAAa8pC,KAAK0T,oBACrE1T,KAAKkT,eAAe9jB,cAAcl5B,iBAAiB,UAAW8pC,KAAKwmC,mBAErExmC,KAAKqoC,yBAA2BzzE,OAAO2hE,aAAY,WAAM,SAAK+R,gBA9brC,KAocnB,YAAAtB,0BAAR,WACMhnC,KAAKkT,eAAe9jB,gBACtB4Q,KAAKkT,eAAe9jB,cAAcpB,oBAAoB,YAAagS,KAAK0T,oBACxE1T,KAAKkT,eAAe9jB,cAAcpB,oBAAoB,UAAWgS,KAAKwmC,mBAExErQ,cAAcn2B,KAAKqoC,0BACnBroC,KAAKqoC,8BAA2B18E,GAQ1B,YAAAo8E,oBAAR,SAA4B/+D,GACtBg3B,KAAK8mC,OAAOrkB,iBACdziB,KAAK8mC,OAAOnkB,aAAe3iB,KAAKsnC,sBAAsBt+D,KASlD,YAAAi/D,eAAR,SAAuBj/D,GAOrB,GANAg3B,KAAK8mC,OAAOlF,qBAAuB,EACnC5hC,KAAK8mC,OAAOnF,mBAAoB,EAChC3hC,KAAK+mC,qBAAuB/mC,KAAKuhB,mBAAmBv4C,GAAS,EAAuB,EAGpFg3B,KAAK8mC,OAAOrkB,eAAiBziB,KAAKsnC,sBAAsBt+D,GACnDg3B,KAAK8mC,OAAOrkB,eAAjB,CAGAziB,KAAK8mC,OAAOnkB,kBAAeh3D,EAG3B,IAAMwhD,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAK8mC,OAAOrkB,eAAe,IACxEtV,GAKDA,EAAK/+C,SAAW4xC,KAAK8mC,OAAOrkB,eAAe,IAMM,IAAjDtV,EAAKo7B,SAASvoC,KAAK8mC,OAAOrkB,eAAe,KAC3CziB,KAAK8mC,OAAOrkB,eAAe,OAQvB,YAAAylB,eAAR,SAAuBl/D,GACjBg3B,KAAKwnC,oBAAoBx+D,GAAO,KAClCg3B,KAAK+mC,qBAAuB,IASxB,YAAAoB,eAAR,SAAuBn/D,GACrB,IAAM8pC,EAAS9S,KAAKsnC,sBAAsBt+D,GACtC8pC,IACF9S,KAAK+mC,qBAAuB,EAC5B/mC,KAAKwoC,cAAc11B,EAAO,MAQvB,YAAAyO,mBAAP,SAA0Bv4C,GACxB,OAAOA,EAAMS,UAAY2sC,EAAQlV,OAASlB,KAAKoT,gBAAgBj7C,QAAQ2vE,gCAQjE,YAAAr4B,aAAR,SAAqBzmC,GAQnB,GAJAA,EAAM+kB,2BAIDiS,KAAK8mC,OAAOrkB,eAAjB,CAMA,IAAMgmB,EAAuBzoC,KAAK8mC,OAAOnkB,aAAe,CAAC3iB,KAAK8mC,OAAOnkB,aAAa,GAAI3iB,KAAK8mC,OAAOnkB,aAAa,IAAM,KAIrH,GADA3iB,KAAK8mC,OAAOnkB,aAAe3iB,KAAKsnC,sBAAsBt+D,GACjDg3B,KAAK8mC,OAAOnkB,aAAjB,CAMkC,IAA9B3iB,KAAK+mC,qBACH/mC,KAAK8mC,OAAOnkB,aAAa,GAAK3iB,KAAK8mC,OAAOrkB,eAAe,GAC3DziB,KAAK8mC,OAAOnkB,aAAa,GAAK,EAE9B3iB,KAAK8mC,OAAOnkB,aAAa,GAAK3iB,KAAKiK,eAAeuB,KAEb,IAA9BxL,KAAK+mC,sBACd/mC,KAAK0oC,gBAAgB1oC,KAAK8mC,OAAOnkB,cAInC3iB,KAAK+lC,kBAAoB/lC,KAAK4nC,2BAA2B5+D,GAKvB,IAA9Bg3B,KAAK+mC,uBACH/mC,KAAK+lC,kBAAoB,EAC3B/lC,KAAK8mC,OAAOnkB,aAAa,GAAK3iB,KAAKiK,eAAeuB,KACzCxL,KAAK+lC,kBAAoB,IAClC/lC,KAAK8mC,OAAOnkB,aAAa,GAAK,IAOlC,IAAMviB,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIJ,KAAK8mC,OAAOnkB,aAAa,GAAKviB,EAAOC,MAAMjyC,OAAQ,CACrD,IAAM++C,EAAO/M,EAAOC,MAAMpqC,IAAI+pC,KAAK8mC,OAAOnkB,aAAa,IACnDxV,GAAuD,IAA/CA,EAAKo7B,SAASvoC,KAAK8mC,OAAOnkB,aAAa,KACjD3iB,KAAK8mC,OAAOnkB,aAAa,KAKxB8lB,GACHA,EAAqB,KAAOzoC,KAAK8mC,OAAOnkB,aAAa,IACrD8lB,EAAqB,KAAOzoC,KAAK8mC,OAAOnkB,aAAa,IACrD3iB,KAAKoB,SAAQ,QA5CbpB,KAAKoB,SAAQ,KAoDT,YAAAknC,YAAR,WACE,GAAKtoC,KAAK8mC,OAAOnkB,cAAiB3iB,KAAK8mC,OAAOrkB,gBAG1CziB,KAAK+lC,kBAAmB,CAC1B/lC,KAAKumC,sBAAsBl4B,KAAK,CAAE0P,OAAQ/d,KAAK+lC,kBAAmB3nB,qBAAqB,IAKvF,IAAMhe,EAASJ,KAAKiK,eAAe7J,OAC/BJ,KAAK+lC,kBAAoB,GACO,IAA9B/lC,KAAK+mC,uBACP/mC,KAAK8mC,OAAOnkB,aAAa,GAAK3iB,KAAKiK,eAAeuB,MAEpDxL,KAAK8mC,OAAOnkB,aAAa,GAAK31D,KAAKk5C,IAAI9F,EAAOoB,MAAQxB,KAAKiK,eAAetM,KAAMyC,EAAOC,MAAMjyC,OAAS,KAEpE,IAA9B4xC,KAAK+mC,uBACP/mC,KAAK8mC,OAAOnkB,aAAa,GAAK,GAEhC3iB,KAAK8mC,OAAOnkB,aAAa,GAAKviB,EAAOoB,OAEvCxB,KAAKoB,YAQD,YAAAqlC,WAAR,SAAmBz9D,GACjB,IAAM2/D,EAAc3/D,EAAMqS,UAAY2kB,KAAKimC,oBAI3C,GAFAjmC,KAAKgnC,4BAEDhnC,KAAKmD,cAAc/0C,QAAU,GAAKu6E,EAnoBP,KAmoBmD3/D,EAAMS,QAAUu2B,KAAKoT,gBAAgB+Y,UAAU,wBAC/H,GAAInsB,KAAKiK,eAAe7J,OAAOia,QAAUra,KAAKiK,eAAe7J,OAAOoB,MAAO,CACzE,IAAMonC,EAAc5oC,KAAKuP,cAAcwD,UACrC/pC,EACAg3B,KAAK6K,SACL7K,KAAKiK,eAAeuB,KACpBxL,KAAKiK,eAAetM,MACpB,GAEF,GAAIirC,QAAkCj9E,IAAnBi9E,EAAY,SAAuCj9E,IAAnBi9E,EAAY,GAAkB,CAC/E,IAAM5nB,EAAW,EAAA6nB,mBAAmBD,EAAY,GAAK,EAAGA,EAAY,GAAK,EAAG5oC,KAAKiK,eAAgBjK,KAAKwZ,aAAajX,gBAAgB0e,uBACnIjhB,KAAKwZ,aAAahX,iBAAiBwe,GAAU,UAIjDhhB,KAAK8oC,gCAID,YAAAA,6BAAR,WACE,IAAMl4E,EAAQovC,KAAK8mC,OAAOG,oBACpBx8C,EAAMuV,KAAK8mC,OAAOI,kBAClBjsB,KAAiBrqD,IAAW65B,GAAQ75B,EAAM,KAAO65B,EAAI,IAAM75B,EAAM,KAAO65B,EAAI,IAE7EwwB,EAQArqD,GAAU65B,IAIVuV,KAAKmmC,oBAAuBnmC,KAAKomC,kBACpCx1E,EAAM,KAAOovC,KAAKmmC,mBAAmB,IAAMv1E,EAAM,KAAOovC,KAAKmmC,mBAAmB,IAChF17C,EAAI,KAAOuV,KAAKomC,iBAAiB,IAAM37C,EAAI,KAAOuV,KAAKomC,iBAAiB,IAExEpmC,KAAK+oC,uBAAuBn4E,EAAO65B,EAAKwwB,IAfpCjb,KAAKkmC,kBACPlmC,KAAK+oC,uBAAuBn4E,EAAO65B,EAAKwwB,IAkBtC,YAAA8tB,uBAAR,SAA+Bn4E,EAAqC65B,EAAmCwwB,GACrGjb,KAAKmmC,mBAAqBv1E,EAC1BovC,KAAKomC,iBAAmB37C,EACxBuV,KAAKkmC,iBAAmBjrB,EACxBjb,KAAKwW,mBAAmBnI,QAGlB,YAAAw4B,kBAAR,SAA0Bh1E,GAA1B,WACEmuC,KAAK4iB,iBAKL5iB,KAAK2mC,cAAc7mC,UACnBE,KAAK2mC,cAAgB90E,EAAEm3E,aAAa3oC,MAAM0hC,QAAO,SAAAhkB,GAAU,SAAK6oB,QAAQ7oB,OAQlE,YAAAkrB,oCAAR,SAA4C3uB,EAAyBxH,GAEnE,IADA,IAAIo2B,EAAYp2B,EAAO,GACd3kD,EAAI,EAAG2kD,EAAO,IAAM3kD,EAAGA,IAAK,CACnC,IAAM,EAASmsD,EAAW8S,SAASj/D,EAAG6xC,KAAK44B,WAAWxH,WAAWhjE,OAC/B,IAA9B4xC,KAAK44B,UAAUne,WAGjByuB,IACS,EAAS,GAAKp2B,EAAO,KAAO3kD,IAIrC+6E,GAAa,EAAS,GAG1B,OAAOA,GAGF,YAAA7mB,aAAP,SAAoBzC,EAAaC,EAAazxD,GAC5C4xC,KAAK8mC,OAAOlkB,iBACZ5iB,KAAKgnC,4BACLhnC,KAAK8mC,OAAOrkB,eAAiB,CAAC7C,EAAKC,GACnC7f,KAAK8mC,OAAOlF,qBAAuBxzE,EACnC4xC,KAAKoB,WAGA,YAAAkC,iBAAP,SAAwBZ,GACjB1C,KAAKqnC,oBAAoB3kC,KACxB1C,KAAKwnC,oBAAoB9kC,GAAI,IAC/B1C,KAAKoB,SAAQ,GAEfpB,KAAK8oC,iCAQD,YAAAK,WAAR,SAAmBr2B,EAA0B20B,EAAuC2B,EAAyCC,GAE3H,QAFkF,IAAAD,OAAA,QAAyC,IAAAC,OAAA,KAEvHv2B,EAAO,IAAM9S,KAAKiK,eAAeuB,MAArC,CAIA,IAAMpL,EAASJ,KAAKiK,eAAe7J,OAC7Bka,EAAala,EAAOC,MAAMpqC,IAAI68C,EAAO,IAC3C,GAAKwH,EAAL,CAIA,IAAMnN,EAAO/M,EAAOmB,4BAA4BuR,EAAO,IAAI,GAGvD4wB,EAAa1jC,KAAKipC,oCAAoC3uB,EAAYxH,GAClE6wB,EAAWD,EAGT4F,EAAax2B,EAAO,GAAK4wB,EAC3B6F,EAAoB,EACpBC,EAAqB,EACrBC,EAAqB,EACrBC,EAAsB,EAE1B,GAAgC,MAA5Bv8B,EAAKt9C,OAAO6zE,GAAqB,CAEnC,KAAOA,EAAa,GAAqC,MAAhCv2B,EAAKt9C,OAAO6zE,EAAa,IAChDA,IAEF,KAAOC,EAAWx2B,EAAK/+C,QAAwC,MAA9B++C,EAAKt9C,OAAO8zE,EAAW,IACtDA,QAEG,CAKL,IAAIpa,EAAWzW,EAAO,GAClB0W,EAAS1W,EAAO,GAIkB,IAAlCwH,EAAWG,SAAS8O,KACtBggB,IACAhgB,KAEkC,IAAhCjP,EAAWG,SAAS+O,KACtBggB,IACAhgB,KAIF,IAAM,EAASlP,EAAW4pB,UAAU1a,GAAQp7D,OAO5C,IANI,EAAS,IACXs7E,GAAuB,EAAS,EAChC/F,GAAY,EAAS,GAIhBpa,EAAW,GAAKma,EAAa,IAAM1jC,KAAK2pC,qBAAqBrvB,EAAW8S,SAAS7D,EAAW,EAAGvpB,KAAK44B,aAAa,CACtHte,EAAW8S,SAAS7D,EAAW,EAAGvpB,KAAK44B,WACvC,IAAM,EAAS54B,KAAK44B,UAAUxH,WAAWhjE,OACP,IAA9B4xC,KAAK44B,UAAUne,YAEjB8uB,IACAhgB,KACS,EAAS,IAGlBkgB,GAAsB,EAAS,EAC/B/F,GAAc,EAAS,GAEzBA,IACAna,IAEF,KAAOC,EAASlP,EAAWlsD,QAAUu1E,EAAW,EAAIx2B,EAAK/+C,SAAW4xC,KAAK2pC,qBAAqBrvB,EAAW8S,SAAS5D,EAAS,EAAGxpB,KAAK44B,aAAa,CAC9Ite,EAAW8S,SAAS5D,EAAS,EAAGxpB,KAAK44B,WACrC,IAAM,EAAS54B,KAAK44B,UAAUxH,WAAWhjE,OACP,IAA9B4xC,KAAK44B,UAAUne,YAEjB+uB,IACAhgB,KACS,EAAS,IAGlBkgB,GAAuB,EAAS,EAChC/F,GAAY,EAAS,GAEvBA,IACAna,KAKJma,IAIA,IAAI/yE,EACA8yE,EACE4F,EACAC,EACAE,EAIFr7E,EAASpB,KAAKk5C,IAAIlG,KAAKiK,eAAeuB,KACxCm4B,EACED,EACA6F,EACAC,EACAC,EACAC,GAEJ,GAAKjC,GAA4E,KAA5Ct6B,EAAK3gD,MAAMk3E,EAAYC,GAAUtzC,OAAtE,CAKA,GAAI+4C,GACY,IAAVx4E,GAA8C,KAA/B0pD,EAAWif,aAAa,GAAqB,CAC9D,IAAMqQ,EAAqBxpC,EAAOC,MAAMpqC,IAAI68C,EAAO,GAAK,GACxD,GAAI82B,GAAsBtvB,EAAW6O,WAA+E,KAAlEygB,EAAmBrQ,aAAav5B,KAAKiK,eAAeuB,KAAO,GAAqB,CAChI,IAAMq+B,EAA2B7pC,KAAKmpC,WAAW,CAACnpC,KAAKiK,eAAeuB,KAAO,EAAGsH,EAAO,GAAK,IAAI,GAAO,GAAM,GAC7G,GAAI+2B,EAA0B,CAC5B,IAAMrM,EAASx9B,KAAKiK,eAAeuB,KAAOq+B,EAAyBj5E,MACnEA,GAAS4sE,EACTpvE,GAAUovE,IAOlB,GAAI6L,GACEz4E,EAAQxC,IAAW4xC,KAAKiK,eAAeuB,MAAkE,KAA1D8O,EAAWif,aAAav5B,KAAKiK,eAAeuB,KAAO,GAAqB,CACzH,IAAMs+B,EAAiB1pC,EAAOC,MAAMpqC,IAAI68C,EAAO,GAAK,GACpD,GAAIg3B,GAAkBA,EAAe3gB,WAAgD,KAAnC2gB,EAAevQ,aAAa,GAAqB,CACjG,IAAMwQ,EAAuB/pC,KAAKmpC,WAAW,CAAC,EAAGr2B,EAAO,GAAK,IAAI,GAAO,GAAO,GAC3Ei3B,IACF37E,GAAU27E,EAAqB37E,SAMvC,MAAO,CAAEwC,MAAK,EAAExC,OAAM,OAQd,YAAAu5E,cAAV,SAAwB70B,EAA0B20B,GAChD,IAAMuC,EAAehqC,KAAKmpC,WAAWr2B,EAAQ20B,GAC7C,GAAIuC,EAAc,CAEhB,KAAOA,EAAap5E,MAAQ,GAC1Bo5E,EAAap5E,OAASovC,KAAKiK,eAAeuB,KAC1CsH,EAAO,KAET9S,KAAK8mC,OAAOrkB,eAAiB,CAACunB,EAAap5E,MAAOkiD,EAAO,IACzD9S,KAAK8mC,OAAOlF,qBAAuBoI,EAAa57E,SAQ5C,YAAAs6E,gBAAR,SAAwB51B,GACtB,IAAMk3B,EAAehqC,KAAKmpC,WAAWr2B,GAAQ,GAC7C,GAAIk3B,EAAc,CAIhB,IAHA,IAAIr4B,EAASmB,EAAO,GAGbk3B,EAAap5E,MAAQ,GAC1Bo5E,EAAap5E,OAASovC,KAAKiK,eAAeuB,KAC1CmG,IAKF,IAAK3R,KAAK8mC,OAAOjF,6BACf,KAAOmI,EAAap5E,MAAQo5E,EAAa57E,OAAS4xC,KAAKiK,eAAeuB,MACpEw+B,EAAa57E,QAAU4xC,KAAKiK,eAAeuB,KAC3CmG,IAIJ3R,KAAK8mC,OAAOnkB,aAAe,CAAC3iB,KAAK8mC,OAAOjF,6BAA+BmI,EAAap5E,MAAQo5E,EAAap5E,MAAQo5E,EAAa57E,OAAQujD,KASlI,YAAAg4B,qBAAR,SAA6Bxc,GAG3B,OAAwB,IAApBA,EAAK1S,YAGFza,KAAKoT,gBAAgBj7C,QAAQ8xE,cAAcr7E,QAAQu+D,EAAKiE,aAAe,GAOtE,YAAAoX,cAAV,SAAwBr7B,GACtB,IAAM+8B,EAAelqC,KAAKiK,eAAe7J,OAAO+pC,uBAAuBh9B,GACvEnN,KAAK8mC,OAAOrkB,eAAiB,CAAC,EAAGynB,EAAat+B,OAC9C5L,KAAK8mC,OAAOnkB,aAAe,CAAC3iB,KAAKiK,eAAeuB,KAAM0+B,EAAalxE,MACnEgnC,KAAK8mC,OAAOlF,qBAAuB,GAv6BV,GAuDxB,MAAArzB,gBACA,MAAA6Z,cACA,MAAA1T,eACA,MAAAE,iBACA,MAAA0I,iBA3DQY,GAAb,CAAsC,EAAAnc,YAAzB,EAAAmc,oB,+MC9Db,cAGa,EAAApB,iBAAmB,EAAAstB,gBAAkC,mBAarD,EAAAxtB,oBAAsB,EAAAwtB,gBAAqC,sBAO3D,EAAA11B,cAAgB,EAAA01B,gBAA+B,gBAQ/C,EAAA9sB,eAAiB,EAAA8sB,gBAAgC,iBA8BjD,EAAAz1B,kBAAoB,EAAAy1B,gBAAmC,oBA4BvD,EAAAxsB,cAAgB,EAAAwsB,gBAA+B,gBAQ/C,EAAAjtB,wBAA0B,EAAAitB,gBAAyC,2B,ggBCrGhF,cAGA,aAiBE,WAC2Bh3B,GAAA,KAAAA,kBAoC7B,OAjDE,sBAAkB,iBAAY,C,IAA9B,WACE,IAAKuK,EAAa0sB,cAAe,CAC/B,IAAMC,EAA8C11E,OAAQ21E,cAAsB31E,OAAQ41E,mBAC1F,IAAKF,EAEH,OADA5yE,QAAQL,KAAK,4FACN,KAETsmD,EAAa0sB,cAAgB,IAAIC,EAEnC,OAAO3sB,EAAa0sB,e,gCAQf,YAAApmB,cAAP,WACE,IAAMh0D,EAAM0tD,EAAa8sB,aACzB,GAAKx6E,EAAL,CAGA,IAAMy6E,EAAkBz6E,EAAI06E,qBAC5B16E,EAAI26E,gBAAgB5qC,KAAK6qC,qBAAqB7qC,KAAK8qC,gBAAgB9qC,KAAKoT,gBAAgBj7C,QAAQ4yE,aAAa,SAAC3qC,GAC5GsqC,EAAgBtqC,OAASA,EACzBsqC,EAAgBM,QAAQ/6E,EAAIg7E,aAC5BP,EAAgB95E,MAAM,QAIlB,YAAAi6E,qBAAR,SAA6BK,GAK3B,IAJA,IAAMC,EAAev2E,OAAOw2E,KAAKF,GAC3BtuE,EAAMuuE,EAAa/8E,OACnBi9E,EAAQ,IAAIC,WAAW1uE,GAEpBzO,EAAI,EAAGA,EAAIyO,EAAKzO,IACvBk9E,EAAMl9E,GAAKg9E,EAAat3E,WAAW1F,GAGrC,OAAOk9E,EAAMjrC,QAGP,YAAA0qC,gBAAR,SAAwBS,GAKtB,OAHiBA,EAAQr9E,MAAM,KAGf,IApDPyvD,EAAY,GAkBpB,MAAA/I,kBAlBQ+I,GAAb,GAAa,EAAAA,gB,sFCFb,cAgBA,aAYE,WACU6tB,GAAA,KAAAA,aARH,KAAAC,gBAAkB,IAAI,EAAAlhC,aAEtB,KAAAmhC,gBAAkB,IAAI,EAAAnhC,aAEtB,KAAAohC,cAAgB,IAAI,EAAAphC,aAMzBvK,KAAK4rC,OAAS,IAAIt+E,MAAS0yC,KAAKwrC,YAChCxrC,KAAK6rC,YAAc,EACnB7rC,KAAKzvC,QAAU,EAuMnB,OAlNE,sBAAW,uBAAQ,C,IAAnB,WAA8C,OAAOyvC,KAAKyrC,gBAAgBziE,O,gCAE1E,sBAAW,uBAAQ,C,IAAnB,WAA8C,OAAOg3B,KAAK0rC,gBAAgB1iE,O,gCAE1E,sBAAW,qBAAM,C,IAAjB,WAAsC,OAAOg3B,KAAK2rC,cAAc3iE,O,gCAUhE,sBAAW,wBAAS,C,IAApB,WACE,OAAOg3B,KAAKwrC,Y,IAGd,SAAqBM,GAEnB,GAAI9rC,KAAKwrC,aAAeM,EAAxB,CAOA,IADA,IAAMC,EAAW,IAAIz+E,MAAqBw+E,GACjC39E,EAAI,EAAGA,EAAInB,KAAKk5C,IAAI4lC,EAAc9rC,KAAK5xC,QAASD,IACvD49E,EAAS59E,GAAK6xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgB79E,IAEjD6xC,KAAK4rC,OAASG,EACd/rC,KAAKwrC,WAAaM,EAClB9rC,KAAK6rC,YAAc,I,gCAGrB,sBAAW,qBAAM,C,IAAjB,WACE,OAAO7rC,KAAKzvC,S,IAGd,SAAkB07E,GAChB,GAAIA,EAAYjsC,KAAKzvC,QACnB,IAAK,IAAIpC,EAAI6xC,KAAKzvC,QAASpC,EAAI89E,EAAW99E,IACxC6xC,KAAK4rC,OAAOz9E,QAAKxC,EAGrBq0C,KAAKzvC,QAAU07E,G,gCAWV,YAAAh2E,IAAP,SAAWtH,GACT,OAAOqxC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBr9E,KAWnC,YAAAsI,IAAP,SAAWtI,EAAe3C,GACxBg0C,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBr9E,IAAU3C,GAQtC,YAAAiN,KAAP,SAAYjN,GACVg0C,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBhsC,KAAKzvC,UAAYvE,EAC9Cg0C,KAAKzvC,UAAYyvC,KAAKwrC,YACxBxrC,KAAK6rC,cAAgB7rC,KAAK6rC,YAAc7rC,KAAKwrC,WAC7CxrC,KAAK2rC,cAAct9B,KAAK,IAExBrO,KAAKzvC,WASF,YAAA27E,QAAP,WACE,GAAIlsC,KAAKzvC,UAAYyvC,KAAKwrC,WACxB,MAAM,IAAIjtC,MAAM,4CAIlB,OAFAyB,KAAK6rC,cAAgB7rC,KAAK6rC,YAAc7rC,KAAKwrC,WAC7CxrC,KAAK2rC,cAAct9B,KAAK,GACjBrO,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBhsC,KAAKzvC,QAAU,KAMzD,sBAAW,qBAAM,C,IAAjB,WACE,OAAOyvC,KAAKzvC,UAAYyvC,KAAKwrC,Y,gCAOxB,YAAArxE,IAAP,WACE,OAAO6lC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBhsC,KAAKzvC,UAAY,KAYpD,YAAA1B,OAAP,SAAc+B,EAAeu7E,G,IAAqB,wDAEhD,GAAIA,EAAa,CACf,IAAK,IAAIh+E,EAAIyC,EAAOzC,EAAI6xC,KAAKzvC,QAAU47E,EAAah+E,IAClD6xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgB79E,IAAM6xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgB79E,EAAIg+E,IAE9EnsC,KAAKzvC,SAAW47E,EAChBnsC,KAAKyrC,gBAAgBp9B,KAAK,CAAE1/C,MAAOiC,EAAOmtD,OAAQouB,IAIpD,IAASh+E,EAAI6xC,KAAKzvC,QAAU,EAAGpC,GAAKyC,EAAOzC,IACzC6xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgB79E,EAAI0P,EAAMzP,SAAW4xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgB79E,IAEzF,IAASA,EAAI,EAAGA,EAAI0P,EAAMzP,OAAQD,IAChC6xC,KAAK4rC,OAAO5rC,KAAKgsC,gBAAgBp7E,EAAQzC,IAAM0P,EAAM1P,GAOvD,GALI0P,EAAMzP,QACR4xC,KAAK0rC,gBAAgBr9B,KAAK,CAAE1/C,MAAOiC,EAAOmtD,OAAQlgD,EAAMzP,SAItD4xC,KAAKzvC,QAAUsN,EAAMzP,OAAS4xC,KAAKwrC,WAAY,CACjD,IAAMY,EAAepsC,KAAKzvC,QAAUsN,EAAMzP,OAAU4xC,KAAKwrC,WACzDxrC,KAAK6rC,aAAeO,EACpBpsC,KAAKzvC,QAAUyvC,KAAKwrC,WACpBxrC,KAAK2rC,cAAct9B,KAAK+9B,QAExBpsC,KAAKzvC,SAAWsN,EAAMzP,QAQnB,YAAAi+E,UAAP,SAAiBxiB,GACXA,EAAQ7pB,KAAKzvC,UACfs5D,EAAQ7pB,KAAKzvC,SAEfyvC,KAAK6rC,aAAehiB,EACpB7pB,KAAKzvC,SAAWs5D,EAChB7pB,KAAK2rC,cAAct9B,KAAKwb,IAGnB,YAAAyiB,cAAP,SAAqB17E,EAAei5D,EAAe2T,GACjD,KAAI3T,GAAS,GAAb,CAGA,GAAIj5D,EAAQ,GAAKA,GAASovC,KAAKzvC,QAC7B,MAAM,IAAIguC,MAAM,+BAElB,GAAI3tC,EAAQ4sE,EAAS,EACnB,MAAM,IAAIj/B,MAAM,gDAGlB,GAAIi/B,EAAS,EAAG,CACd,IAAK,IAAIrvE,EAAI07D,EAAQ,EAAG17D,GAAK,EAAGA,IAC9B6xC,KAAK/oC,IAAIrG,EAAQzC,EAAIqvE,EAAQx9B,KAAK/pC,IAAIrF,EAAQzC,IAEhD,IAAMo+E,EAAgB37E,EAAQi5D,EAAQ2T,EAAUx9B,KAAKzvC,QACrD,GAAIg8E,EAAe,EAEjB,IADAvsC,KAAKzvC,SAAWg8E,EACTvsC,KAAKzvC,QAAUyvC,KAAKwrC,YACzBxrC,KAAKzvC,UACLyvC,KAAK6rC,cACL7rC,KAAK2rC,cAAct9B,KAAK,QAI5B,IAASlgD,EAAI,EAAGA,EAAI07D,EAAO17D,IACzB6xC,KAAK/oC,IAAIrG,EAAQzC,EAAIqvE,EAAQx9B,KAAK/pC,IAAIrF,EAAQzC,MAW5C,YAAA69E,gBAAR,SAAwBr9E,GACtB,OAAQqxC,KAAK6rC,YAAcl9E,GAASqxC,KAAKwrC,YAE7C,EAxNA,GAAa,EAAAgB,gB,6ECdb,iBAAgBr7D,EAASvkB,EAAQ6/E,GAC/B,QAD+B,IAAAA,MAAA,GACZ,iBAAR7/E,EACT,OAAOA,EAIT,IAAM8/E,EAAoBp/E,MAAMC,QAAQX,GAAO,GAAK,GAEpD,IAAK,IAAMoC,KAAOpC,EAEhB8/E,EAAa19E,GAAOy9E,GAAS,EAAI7/E,EAAIoC,GAAQpC,EAAIoC,GAAOmiB,EAAMvkB,EAAIoC,GAAMy9E,EAAQ,GAAK7/E,EAAIoC,GAG3F,OAAO09E,I,kcCET,aACA,UACA,UACA,UACA,SACA,UAEA,UACA,UACA,UACA,UACA,UACA,UACA,UAGA,UACA,UAGIC,GAA2B,EAE/B,cA4CE,WACEx0E,GADF,MAGE,cAAO,K,OA/BD,EAAAy0E,UAAY,IAAI,EAAAriC,aAEhB,EAAAsiC,QAAU,IAAI,EAAAtiC,aAEZ,EAAAuiC,YAAc,IAAI,EAAAviC,aAEpB,EAAA5L,UAAY,IAAI,EAAA4L,aAEd,EAAAmU,UAAY,IAAI,EAAAnU,aA0BxB,EAAK0M,sBAAwB,IAAI,EAAA81B,qBACjC,EAAK70B,eAAiB,IAAI,EAAA80B,eAAe70E,GACzC,EAAK8+C,sBAAsB0F,WAAW,EAAA/H,gBAAiB,EAAKsD,gBAC5D,EAAKjO,eAAiB,EAAKxL,SAAS,EAAKwY,sBAAsBC,eAAe,EAAA+1B,gBAC9E,EAAKh2B,sBAAsB0F,WAAW,EAAApO,eAAgB,EAAKtE,gBAC3D,EAAKC,YAAc,EAAK+M,sBAAsBC,eAAe,EAAAg2B,YAC7D,EAAKj2B,sBAAsB0F,WAAW,EAAAnO,YAAa,EAAKtE,aACxD,EAAKsP,aAAe,EAAK/a,SAAS,EAAKwY,sBAAsBC,eAAe,EAAAi2B,aAAa,WAAM,SAAKnqB,qBACpG,EAAK/L,sBAAsB0F,WAAW,EAAAyL,aAAc,EAAK5O,cACzD,EAAKoF,kBAAoB,EAAK3H,sBAAsBC,eAAe,EAAAk2B,kBACnE,EAAKn2B,sBAAsB0F,WAAW,EAAA0wB,kBAAmB,EAAKzuB,mBAC9D,EAAK0uB,iBAAmB,EAAKr2B,sBAAsBC,eAAe,EAAAq2B,iBAClE,EAAKt2B,sBAAsB0F,WAAW,EAAA6wB,iBAAkB,EAAKF,kBAC7D,EAAKrf,eAAiB,EAAKhX,sBAAsBC,eAAe,EAAAu2B,gBAChE,EAAKx2B,sBAAsB0F,WAAW,EAAAlO,gBAAiB,EAAKwf,gBAC5D,EAAKyf,gBAAkB,EAAKz2B,sBAAsBC,eAAe,EAAAy2B,gBACjE,EAAK12B,sBAAsB0F,WAAW,EAAAixB,gBAAiB,EAAKF,iBAG5D,EAAKt2B,cAAgB,IAAI,EAAAy2B,aAAa,EAAK5jC,eAAgB,EAAKyjC,gBAAiB,EAAKl0B,aAAc,EAAK8zB,iBAAkB,EAAKpjC,YAAa,EAAKgO,eAAgB,EAAK0G,kBAAmB,EAAKqP,gBAC/L,EAAKxvB,SAAS,EAAAqZ,aAAa,EAAKV,cAAcnY,WAAY,EAAK6tC,cAC/D,EAAKruC,SAAS,EAAK2Y,eAGnB,EAAK3Y,SAAS,EAAAqZ,aAAa,EAAK7N,eAAevL,SAAU,EAAKC,YAC9D,EAAKF,SAAS,EAAAqZ,aAAa,EAAK0B,aAAa0R,OAAQ,EAAK2hB,UAC1D,EAAKpuC,SAAS,EAAAqZ,aAAa,EAAK0B,aAAa2R,SAAU,EAAKyhB,YAC5D,EAAKnuC,SAAS,EAAKyZ,eAAe8E,gBAAe,SAAAhuD,GAAO,SAAK8pD,eAAe9pD,OAC5E,EAAKyvC,SAAS,EAAKwL,eAAepL,UAAS,SAAA71B,GACzC,EAAK01C,UAAUrQ,KAAK,CAAEpO,SAAU,EAAKgK,eAAe7J,OAAOoB,MAAOntC,OAAQ,IAC1E,EAAKi5E,iBAAiBQ,eAAe,EAAK7jC,eAAe7J,OAAOgmB,UAAW,EAAKnc,eAAe7J,OAAO2tC,kBAIxG,EAAKC,aAAe,IAAI,EAAAC,aAAY,SAAC3zE,EAAM4zE,GAAkB,SAAK92B,cAAc+2B,MAAM7zE,EAAM4zE,M,EA6JhG,OAjP2C,OAiBzC,sBAAW,uBAAQ,C,IAAnB,WAAwC,OAAOluC,KAAK4sC,UAAU5jE,O,gCAE9D,sBAAW,qBAAM,C,IAAjB,WAAsC,OAAOg3B,KAAK6sC,QAAQ7jE,O,gCAE1D,sBAAW,yBAAU,C,IAArB,WAAwC,OAAOg3B,KAAK8sC,YAAY9jE,O,gCAEhE,sBAAW,uBAAQ,C,IAAnB,WAAgE,OAAOg3B,KAAKrB,UAAU31B,O,gCAOtF,sBAAW,uBAAQ,C,IAAnB,sBAOE,OANKg3B,KAAKouC,eACRpuC,KAAKouC,aAAe,IAAI,EAAA7jC,aACxBvK,KAAKvB,SAASuB,KAAK0e,UAAU11C,OAAM,SAAA05B,G,MAChB,QAAjB,IAAK0rC,oBAAY,SAAE//B,KAAK3L,EAAGzC,eAGxBD,KAAKouC,aAAaplE,O,gCAG3B,sBAAW,mBAAI,C,IAAf,WAA4B,OAAOg3B,KAAKiK,eAAeuB,M,gCACvD,sBAAW,mBAAI,C,IAAf,WAA4B,OAAOxL,KAAKiK,eAAetM,M,gCACvD,sBAAW,sBAAO,C,IAAlB,WAAmC,OAAOqC,KAAKiK,eAAe2O,S,gCA6CvD,YAAA9Y,QAAP,W,MACME,KAAKyY,cAGT,YAAM3Y,QAAO,WACI,QAAjB,EAAAE,KAAKquC,oBAAY,SAAEvuC,UACnBE,KAAKquC,kBAAe1iF,IAGf,YAAAgtD,MAAP,SAAar+C,EAA2BuZ,GACtCmsB,KAAKguC,aAAar1B,MAAMr+C,EAAMuZ,IAYzB,YAAAy6D,UAAP,SAAiBh0E,EAA2Bi0E,GACtCvuC,KAAKkK,YAAYwW,UAAY,EAAA8tB,aAAaC,OAAS9B,IACrD3sC,KAAKkK,YAAY7yC,KAAK,qDACtBs1E,GAA2B,GAE7B3sC,KAAKguC,aAAaM,UAAUh0E,EAAMi0E,IAG7B,YAAAhxB,OAAP,SAAc/P,EAAWC,GACnB9/C,MAAM6/C,IAAM7/C,MAAM8/C,KAItBD,EAAIxgD,KAAK8R,IAAI0uC,EAAG,EAAAkhC,cAChBjhC,EAAIzgD,KAAK8R,IAAI2uC,EAAG,EAAAkhC,cAEhB3uC,KAAKiK,eAAesT,OAAO/P,EAAGC,KAOzB,YAAAmhC,OAAP,SAAcC,EAA2B1lB,QAAA,IAAAA,OAAA,GACvCnpB,KAAKiK,eAAe2kC,OAAOC,EAAW1lB,IAUjC,YAAAzoB,YAAP,SAAmB+gB,EAAcrD,EAA+B/pD,GAC9D2rC,KAAKiK,eAAevJ,YAAY+gB,EAAMrD,EAAqB/pD,IAOtD,YAAAw3D,YAAP,SAAmBC,GACjB9rB,KAAKiK,eAAe4hB,YAAYC,IAM3B,YAAAC,YAAP,WACE/rB,KAAKiK,eAAe8hB,eAMf,YAAA/I,eAAP,WACEhjB,KAAKiK,eAAe+Y,kBAGf,YAAAgJ,aAAP,SAAoB7e,GAClBnN,KAAKiK,eAAe+hB,aAAa7e,IAI5B,YAAAwgB,mBAAP,SAA0Bt0D,EAAyBwa,GACjD,OAAOmsB,KAAKoX,cAAcuW,mBAAmBt0D,EAAIwa,IAI5C,YAAA45C,mBAAP,SAA0Bp0D,EAAyBwa,GACjD,OAAOmsB,KAAKoX,cAAcqW,mBAAmBp0D,EAAIwa,IAI5C,YAAA05C,mBAAP,SAA0Bl0D,EAAyBwa,GACjD,OAAOmsB,KAAKoX,cAAcmW,mBAAmBl0D,EAAIwa,IAI5C,YAAAg6C,mBAAP,SAA0BC,EAAej6C,GACvC,OAAOmsB,KAAKoX,cAAcyW,mBAAmBC,EAAOj6C,IAG5C,YAAAkjC,OAAV,WACM/W,KAAKkY,eAAe//C,QAAQ22E,aAC9B9uC,KAAK+uC,sBAIF,YAAAt3B,MAAP,WACEzX,KAAKoX,cAAcK,QACnBzX,KAAKiK,eAAewN,QACpBzX,KAAK0tC,gBAAgBj2B,QACrBzX,KAAKwZ,aAAa/B,QAClBzX,KAAK4e,kBAAkBnH,SAGf,YAAAqB,eAAV,SAAyB9pD,G,MAEvB,OAAQA,GACN,IAAK,aACHgxC,KAAK4Y,QAAQ2E,OAAOvd,KAAKwL,KAAMxL,KAAKrC,MACpC,MACF,IAAK,cACCqC,KAAKkY,eAAe//C,QAAQ22E,YAC9B9uC,KAAK+uC,sBAEY,QAAjB,EAAA/uC,KAAKquC,oBAAY,SAAEvuC,UACnBE,KAAKquC,kBAAe1iF,KAMlB,YAAAojF,mBAAV,sBACE,IAAK/uC,KAAKquC,aAAc,CACtB,IAAM,EAA6B,GACnC,EAAYp1E,KAAK+mC,KAAKf,WAAW,EAAA+vC,8BAA8Bv+E,KAAK,KAAMuvC,KAAKiK,kBAC/E,EAAYhxC,KAAK+mC,KAAKutB,mBAAmB,CAAE0hB,MAAO,MAAO,WAEvD,OADA,EAAAD,8BAA8B,EAAK/kC,iBAC5B,MAETjK,KAAKquC,aAAe,CAClBvuC,QAAS,WACP,IAAgB,2BAAJ,KACRA,cAMd,EAjPA,CAA2C,EAAAiC,YAArB,EAAAmjB,gB,mGCxBtB,8BACU,KAAAgqB,WAAgC,GAEhC,KAAAC,WAAqB,EAwC/B,OAtCE,sBAAW,oBAAK,C,IAAhB,sBAmBE,OAlBKnvC,KAAKovC,SACRpvC,KAAKovC,OAAS,SAAC15B,GAcb,OAbA,EAAKw5B,WAAWj2E,KAAKy8C,GACF,CACjB5V,QAAS,WACP,IAAK,EAAKqvC,UACR,IAAK,IAAIhhF,EAAI,EAAGA,EAAI,EAAK+gF,WAAW9gF,OAAQD,IAC1C,GAAI,EAAK+gF,WAAW/gF,KAAOunD,EAEzB,YADA,EAAKw5B,WAAWrgF,OAAOV,EAAG,OAUjC6xC,KAAKovC,Q,gCAGP,YAAA/gC,KAAP,SAAYghC,EAASC,GAEnB,IADA,IAAM30D,EAA2B,GACxBxsB,EAAI,EAAGA,EAAI6xC,KAAKkvC,WAAW9gF,OAAQD,IAC1CwsB,EAAM1hB,KAAK+mC,KAAKkvC,WAAW/gF,IAE7B,IAASA,EAAI,EAAGA,EAAIwsB,EAAMvsB,OAAQD,IAChCwsB,EAAMxsB,GAAG5B,UAAKZ,EAAW0jF,EAAMC,IAI5B,YAAAxvC,QAAP,WACME,KAAKkvC,aACPlvC,KAAKkvC,WAAW9gF,OAAS,GAE3B4xC,KAAKmvC,WAAY,GAErB,EA3CA,GAAa,EAAA5kC,eA6Cb,wBAAgClrC,EAAiBtO,GAC/C,OAAOsO,GAAK,SAAAxN,GAAK,OAAAd,EAAGs9C,KAAKx8C,Q,6dC5D3B,IAuFYwyD,EAvFZ,UACA,UACA,UACA,SACA,UACA,SACA,UACA,UAEA,SACA,SACA,UACA,UACA,UACA,UAKMkrB,EAAkC,CAAE,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,GA6BjFC,EAAyB,OAQ/B,SAASC,EAAoB5iF,EAAWmJ,GACtC,GAAInJ,EAAI,GACN,OAAOmJ,EAAK05E,cAAe,EAE7B,OAAQ7iF,GACN,KAAK,EAAG,QAASmJ,EAAK25E,WACtB,KAAK,EAAG,QAAS35E,EAAK45E,YACtB,KAAK,EAAG,QAAS55E,EAAK65E,eACtB,KAAK,EAAG,QAAS75E,EAAK85E,iBACtB,KAAK,EAAG,QAAS95E,EAAK+5E,SACtB,KAAK,EAAG,QAAS/5E,EAAKg6E,SACtB,KAAK,EAAG,QAASh6E,EAAKi6E,WACtB,KAAK,EAAG,QAASj6E,EAAKk6E,gBACtB,KAAK,EAAG,QAASl6E,EAAKm6E,YACtB,KAAK,GAAI,QAASn6E,EAAKo6E,cACvB,KAAK,GAAI,QAASp6E,EAAKq6E,YACvB,KAAK,GAAI,QAASr6E,EAAKs6E,eACvB,KAAK,GAAI,QAASt6E,EAAKu6E,iBACvB,KAAK,GAAI,QAASv6E,EAAKw6E,oBACvB,KAAK,GAAI,QAASx6E,EAAKy6E,kBACvB,KAAK,GAAI,QAASz6E,EAAK06E,gBACvB,KAAK,GAAI,QAAS16E,EAAK26E,mBACvB,KAAK,GAAI,QAAS36E,EAAK46E,aACvB,KAAK,GAAI,QAAS56E,EAAK66E,YACvB,KAAK,GAAI,QAAS76E,EAAK86E,UACvB,KAAK,GAAI,QAAS96E,EAAK+6E,SACvB,KAAK,GAAI,QAAS/6E,EAAK05E,YAEzB,OAAO,GAGT,SAAYrrB,GACV,iDACA,mDAFF,CAAYA,EAAA,EAAAA,2BAAA,EAAAA,yBAAwB,KAMpC,IAiCA,aAGE,WACUpa,EACAuP,EACAtP,EACAkJ,GAHA,KAAAnJ,iBACA,KAAAuP,eACA,KAAAtP,cACA,KAAAkJ,kBANF,KAAA95B,MAAqB,IAAI03D,YAAY,GAsD/C,OA7CS,YAAA7wE,KAAP,SAAY8I,GACV+2B,KAAK1mB,MAAQ,IAAI03D,YAAY,IAGxB,YAAAC,IAAP,SAAW32E,EAAmB1J,EAAe65B,GAC3CuV,KAAK1mB,MAAQ,EAAAtZ,OAAOggC,KAAK1mB,MAAOhf,EAAK42E,SAAStgF,EAAO65B,KAGhD,YAAA0mD,OAAP,SAAcC,GACZ,IAAKA,EAEH,OADApxC,KAAK1mB,MAAQ,IAAI03D,YAAY,IACtB,EAET,IAAM12E,EAAO,EAAA+2E,cAAcrxC,KAAK1mB,OAEhC,OADA0mB,KAAK1mB,MAAQ,IAAI03D,YAAY,GACrB12E,GAEN,IAAK,KACH0lC,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,UAAU,EAAAD,GAAGC,IAAG,MAC5D,MACF,IAAK,KACH3Z,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,aAAa,EAAAD,GAAGC,IAAG,MAC/D,MACF,IAAK,IACH,IAAM23B,EAAWtxC,KAAKiK,eAAe7J,OAAOgmB,UAAY,EAChD,KAAOpmB,KAAKiK,eAAe7J,OAAO2tC,aAAe,GAAK,IAC9D/tC,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,OAAO23B,EAAK,EAAA53B,GAAGC,IAAG,MAC9D,MACF,IAAK,IAEH3Z,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,SAAS,EAAAD,GAAGC,IAAG,MAC3D,MACF,IAAK,KACH,IACIllC,EADoC,CAAE,MAAS,EAAG,UAAa,EAAG,IAAO,GAC1DurB,KAAKoT,gBAAgBj7C,QAAQu9D,aAChDjhD,GAASurB,KAAKoT,gBAAgBj7C,QAAQg9D,YAAc,EAAI,EACxDn1B,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,OAAOllC,EAAK,KAAK,EAAAilC,GAAGC,IAAG,MACnE,MACF,QAEE3Z,KAAKkK,YAAY4B,MAAM,oBAAqBxxC,GAC5C0lC,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,OAAO,EAAAD,GAAGC,IAAG,MAE7D,OAAO,GAEX,EAvDA,GA0FA,cA+CE,WACmB1P,EACAyjC,EACAl0B,EACA8zB,EACApjC,EACAkJ,EACAwL,EACAzU,EACAkhB,QAAA,IAAAA,MAAA,IAAqC,EAAAkmB,sBATxD,MAWE,cAAO,KAVU,EAAAtnC,iBACA,EAAAyjC,kBACA,EAAAl0B,eACA,EAAA8zB,mBACA,EAAApjC,cACA,EAAAkJ,kBACA,EAAAwL,oBACA,EAAAzU,kBACA,EAAAkhB,UAvDX,EAAAmmB,aAA4B,IAAIR,YAAY,MAC5C,EAAAS,eAAgC,IAAI,EAAAC,cACpC,EAAAC,aAA4B,IAAI,EAAAC,YAChC,EAAAhZ,UAAsB,IAAI,EAAAlM,SAC1B,EAAAmlB,aAAe,GACf,EAAAC,UAAY,GACV,EAAAC,kBAA8B,GAC9B,EAAAC,eAA2B,GAE7B,EAAAC,aAA+B,EAAA7tB,kBAAkBjzC,QACjD,EAAA+gE,uBAAyC,EAAA9tB,kBAAkBjzC,QAE3D,EAAAghE,eAAiB,IAAI,EAAA5nC,aAErB,EAAA6nC,sBAAwB,IAAI,EAAA7nC,aAE5B,EAAA8nC,gBAAkB,IAAI,EAAA9nC,aAEtB,EAAA+nC,wBAA0B,IAAI,EAAA/nC,aAE9B,EAAAgoC,+BAAiC,IAAI,EAAAhoC,aAGrC,EAAAioC,YAAc,IAAI,EAAAjoC,aAElB,EAAAkoC,WAAa,IAAI,EAAAloC,aAEjB,EAAA+L,cAAgB,IAAI,EAAA/L,aAEpB,EAAAuiC,YAAc,IAAI,EAAAviC,aAElB,EAAAmU,UAAY,IAAI,EAAAnU,aAEhB,EAAAkM,eAAiB,IAAI,EAAAlM,aAErB,EAAAmoC,mBAAqB,IAAI,EAAAnoC,aAGzB,EAAAooC,YAA2B,CACjCC,QAAQ,EACRC,aAAc,EACdC,aAAc,EACdC,cAAe,EACf9yC,SAAU,GAeV,EAAKxB,SAAS,EAAK4sB,SAKnB,EAAKA,QAAQ2nB,uBAAsB,SAACllB,EAAO7kD,GACzC,EAAKihC,YAAY4B,MAAM,qBAAsB,CAAEmnC,WAAY,EAAK5nB,QAAQ6nB,cAAcplB,GAAQ7kD,OAAQA,EAAOtY,eAE/G,EAAK06D,QAAQ8nB,uBAAsB,SAAArlB,GACjC,EAAK5jB,YAAY4B,MAAM,qBAAsB,CAAEmnC,WAAY,EAAK5nB,QAAQ6nB,cAAcplB,QAExF,EAAKzC,QAAQ+nB,2BAA0B,SAAApkB,GACrC,EAAK9kB,YAAY4B,MAAM,yBAA0B,CAAEkjB,KAAI,OAEzD,EAAK3D,QAAQgoB,uBAAsB,SAACJ,EAAY3zB,EAAQhlD,GACtD,EAAK4vC,YAAY4B,MAAM,qBAAsB,CAAEmnC,WAAU,EAAE3zB,OAAM,EAAEhlD,KAAI,OAEzE,EAAK+wD,QAAQioB,uBAAsB,SAACxlB,EAAOxO,EAAQi0B,GAClC,SAAXj0B,IACFi0B,EAAUA,EAAQ5iF,WAEpB,EAAKu5C,YAAY4B,MAAM,qBAAsB,CAAEmnC,WAAY,EAAK5nB,QAAQ6nB,cAAcplB,GAAQxO,OAAM,EAAEi0B,QAAO,OAM/G,EAAKloB,QAAQmoB,iBAAgB,SAACl5E,EAAM1J,EAAO65B,GAAQ,SAAKgpD,MAAMn5E,EAAM1J,EAAO65B,MAK3E,EAAK4gC,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKyqE,YAAYzqE,MAC3E,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAK1E,MAAO,MAAO,SAAAhmE,GAAU,SAAK2qE,WAAW3qE,MAC9F,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK4qE,SAAS5qE,MACxE,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAK1E,MAAO,MAAO,SAAAhmE,GAAU,SAAK6qE,YAAY7qE,MAC/F,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK8qE,WAAW9qE,MAC1E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK+qE,cAAc/qE,MAC7E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKgrE,eAAehrE,MAC9E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKirE,eAAejrE,MAC9E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKkrE,oBAAoBlrE,MACnF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKmrE,mBAAmBnrE,MAClF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKorE,eAAeprE,MAC9E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKqrE,iBAAiBrrE,MAChF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKsrE,eAAetrE,MAC9E,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAKsrE,eAAetrE,MAC3F,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKwrE,YAAYxrE,MAC3E,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAKwrE,YAAYxrE,MACxF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKyrE,YAAYzrE,MAC3E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK0rE,YAAY1rE,MAC3E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK2rE,YAAY3rE,MAC3E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK4rE,SAAS5rE,MACxE,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK6rE,WAAW7rE,MAC1E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK8rE,WAAW9rE,MAC1E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK+rE,kBAAkB/rE,MACjF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKgsE,gBAAgBhsE,MAC/E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKisE,kBAAkBjsE,MACjF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKksE,yBAAyBlsE,MACxF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKmsE,4BAA4BnsE,MAC3F,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAKosE,8BAA8BpsE,MAC1G,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKqsE,gBAAgBrsE,MAC/E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKssE,kBAAkBtsE,MACjF,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKusE,WAAWvsE,MAC1E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKwsE,SAASxsE,MACxE,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKysE,QAAQzsE,MACvE,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAK0sE,eAAe1sE,MAC3F,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK2sE,UAAU3sE,MACzE,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAK4sE,iBAAiB5sE,MAC7F,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK6sE,eAAe7sE,MAC9E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAK8sE,aAAa9sE,MAC5E,EAAKoiD,QAAQkC,mBAAmB,CAAEinB,OAAQ,IAAKvF,MAAO,MAAO,SAAAhmE,GAAU,SAAK+sE,oBAAoB/sE,MAChG,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAK1E,MAAO,MAAO,SAAAhmE,GAAU,SAAKgtE,UAAUhtE,MAC7F,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAK1E,MAAO,MAAO,SAAAhmE,GAAU,SAAKitE,eAAejtE,MAClG,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKktE,gBAAgBltE,MAC/E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKmtE,WAAWntE,MAC1E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKotE,cAAcptE,MAC7E,EAAKoiD,QAAQkC,mBAAmB,CAAE0hB,MAAO,MAAO,SAAAhmE,GAAU,SAAKqtE,cAAcrtE,MAC7E,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAM1E,MAAO,MAAO,SAAAhmE,GAAU,SAAKstE,cAActtE,MAClG,EAAKoiD,QAAQkC,mBAAmB,CAAEomB,cAAe,IAAM1E,MAAO,MAAO,SAAAhmE,GAAU,SAAKutE,cAAcvtE,MAKlG,EAAKoiD,QAAQorB,kBAAkB,EAAA/8B,GAAGg9B,KAAK,WAAM,SAAKp/B,UAClD,EAAK+T,QAAQorB,kBAAkB,EAAA/8B,GAAGi9B,IAAI,WAAM,SAAKC,cACjD,EAAKvrB,QAAQorB,kBAAkB,EAAA/8B,GAAGm9B,IAAI,WAAM,SAAKD,cACjD,EAAKvrB,QAAQorB,kBAAkB,EAAA/8B,GAAGo9B,IAAI,WAAM,SAAKF,cACjD,EAAKvrB,QAAQorB,kBAAkB,EAAA/8B,GAAG4J,IAAI,WAAM,SAAKyzB,oBACjD,EAAK1rB,QAAQorB,kBAAkB,EAAA/8B,GAAGs9B,IAAI,WAAM,SAAKC,eACjD,EAAK5rB,QAAQorB,kBAAkB,EAAA/8B,GAAGw9B,IAAI,WAAM,SAAKC,SACjD,EAAK9rB,QAAQorB,kBAAkB,EAAA/8B,GAAG09B,IAAI,WAAM,SAAKC,cACjD,EAAKhsB,QAAQorB,kBAAkB,EAAA/8B,GAAG49B,IAAI,WAAM,SAAKC,aAGjD,EAAKlsB,QAAQorB,kBAAkB,EAAAe,GAAGC,KAAK,WAAM,SAAK9oF,WAClD,EAAK08D,QAAQorB,kBAAkB,EAAAe,GAAGE,KAAK,WAAM,SAAKC,cAClD,EAAKtsB,QAAQorB,kBAAkB,EAAAe,GAAGI,KAAK,WAAM,SAAKC,YAMlD,EAAKxsB,QAAQwC,mBAAmB,EAAG,IAAI,EAAAiqB,YAAW,SAAAx9E,GAAuD,OAA7C,EAAKy9E,SAASz9E,GAAO,EAAK09E,YAAY19E,IAAc,MAEhH,EAAK+wD,QAAQwC,mBAAmB,EAAG,IAAI,EAAAiqB,YAAW,SAAAx9E,GAAQ,SAAK09E,YAAY19E,OAE3E,EAAK+wD,QAAQwC,mBAAmB,EAAG,IAAI,EAAAiqB,YAAW,SAAAx9E,GAAQ,SAAKy9E,SAASz9E,OAGxE,EAAK+wD,QAAQwC,mBAAmB,EAAG,IAAI,EAAAiqB,YAAW,SAAAx9E,GAAQ,SAAK29E,aAAa39E,OAmC5E,EAAK+wD,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKmH,gBAC3D,EAAK/qB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqH,mBAC3D,EAAKjrB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKtgF,WAC3D,EAAK08D,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAK0I,cAC3D,EAAKtsB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAK4I,YAC3D,EAAKxsB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKiJ,kBAC3D,EAAK7sB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKkJ,2BAC3D,EAAK9sB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKmJ,uBAC3D,EAAK/sB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKoJ,eAC3D,EAAKhtB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqJ,UAAU,MACrE,EAAKjtB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqJ,UAAU,MACrE,EAAKjtB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqJ,UAAU,MACrE,EAAKjtB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqJ,UAAU,MACrE,EAAKjtB,QAAQsC,mBAAmB,CAAEshB,MAAO,MAAO,WAAM,SAAKqJ,UAAU,MACrE,EAAKjtB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAO,MAAO,WAAM,SAAKsJ,0BAC/E,EAAKltB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAO,MAAO,WAAM,SAAKsJ,0B,eACpEC,GACT,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,MACpG,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAOuJ,IAAQ,WAAM,SAAKC,cAAc,IAAMD,O,OAPtG,IAAK,IAAMA,KAAQ,EAAAE,S,EAARF,G,OASX,EAAKntB,QAAQsC,mBAAmB,CAAEgmB,cAAe,IAAK1E,MAAO,MAAO,WAAM,SAAK0J,4BAK/E,EAAKttB,QAAQutB,iBAAgB,SAAC9mC,GAE5B,OADA,EAAK5H,YAAYlyC,MAAM,kBAAmB85C,GACnCA,KAMT,EAAKuZ,QAAQoC,mBAAmB,CAAEkmB,cAAe,IAAK1E,MAAO,KAAO,IAAI4J,EAAQ,EAAK5uC,eAAgB,EAAKuP,aAAc,EAAKtP,YAAa,EAAKkJ,kB,EAmlFnJ,OAp0FkC,OAchC,sBAAW,4BAAa,C,IAAxB,WAA2C,OAAOpT,KAAKmyC,eAAenpE,O,gCAEtE,sBAAW,mCAAoB,C,IAA/B,WAA4D,OAAOg3B,KAAKoyC,sBAAsBppE,O,gCAE9F,sBAAW,6BAAc,C,IAAzB,WAA4C,OAAOg3B,KAAKqyC,gBAAgBrpE,O,gCAExE,sBAAW,qCAAsB,C,IAAjC,WAAoD,OAAOg3B,KAAKsyC,wBAAwBtpE,O,gCAExF,sBAAW,4CAA6B,C,IAAxC,WAA+E,OAAOg3B,KAAKuyC,+BAA+BvpE,O,gCAG1H,sBAAW,yBAAU,C,IAArB,WAA0C,OAAOg3B,KAAKwyC,YAAYxpE,O,gCAElE,sBAAW,wBAAS,C,IAApB,WAAyC,OAAOg3B,KAAKyyC,WAAWzpE,O,gCAEhE,sBAAW,2BAAY,C,IAAvB,WAA0C,OAAOg3B,KAAKsW,cAActtC,O,gCAEpE,sBAAW,yBAAU,C,IAArB,WAAwC,OAAOg3B,KAAK8sC,YAAY9jE,O,gCAEhE,sBAAW,uBAAQ,C,IAAnB,WAAwC,OAAOg3B,KAAK0e,UAAU11C,O,gCAE9D,sBAAW,4BAAa,C,IAAxB,WAA6C,OAAOg3B,KAAKyW,eAAeztC,O,gCAExE,sBAAW,gCAAiB,C,IAA5B,WAAgE,OAAOg3B,KAAK0yC,mBAAmB1pE,O,gCA+MxF,YAAA82B,QAAP,WACE,YAAMA,QAAO,YAMP,YAAAg5C,eAAR,SAAuBjG,EAAsBC,EAAsBC,EAAuB9yC,GACxFD,KAAK2yC,YAAYC,QAAS,EAC1B5yC,KAAK2yC,YAAYE,aAAeA,EAChC7yC,KAAK2yC,YAAYG,aAAeA,EAChC9yC,KAAK2yC,YAAYI,cAAgBA,EACjC/yC,KAAK2yC,YAAY1yC,SAAWA,GAGtB,YAAA84C,uBAAR,SAA+BvzE,GAEzBw6B,KAAKkK,YAAYwW,UAAY,EAAA8tB,aAAaC,MAC5ClpE,QAAQyzE,KAAK,CAACxzE,EAAG,IAAID,SAAQ,SAACrU,EAAK+nF,GAAQ,OAAAvzE,YAAW,WAAM,OAAAuzE,EAAI,mBAjY7C,UAkYhB5rF,OAAM,SAAAkX,GACL,GAAY,kBAARA,EACF,MAAMA,EAER7M,QAAQL,KAAK,uDAkBd,YAAA82E,MAAP,SAAa7zE,EAA2B4zE,GACtC,IAAIrxE,EACAujC,EAASJ,KAAKiK,eAAe7J,OAC7ByyC,EAAezyC,EAAOoN,EACtBslC,EAAe1yC,EAAOqN,EACtB78C,EAAQ,EACNsoF,EAAYl5C,KAAK2yC,YAAYC,OAEnC,GAAIsG,EAAW,CAEb,GAAIr8E,EAASmjC,KAAKqrB,QAAQ8iB,MAAMnuC,KAAKwxC,aAAcxxC,KAAK2yC,YAAYI,cAAe7E,GAEjF,OADAluC,KAAK+4C,uBAAuBl8E,GACrBA,EAETg2E,EAAe7yC,KAAK2yC,YAAYE,aAChCC,EAAe9yC,KAAK2yC,YAAYG,aAChC9yC,KAAK2yC,YAAYC,QAAS,EACtBt4E,EAAKlM,OAASohF,IAChB5+E,EAAQovC,KAAK2yC,YAAY1yC,SAAWuvC,GAoBxC,GAhBAxvC,KAAKkK,YAAY4B,MAAM,eAAgBxxC,GAGnC0lC,KAAKwxC,aAAapjF,OAASkM,EAAKlM,QAC9B4xC,KAAKwxC,aAAapjF,OAASohF,IAC7BxvC,KAAKwxC,aAAe,IAAIR,YAAYhkF,KAAKk5C,IAAI5rC,EAAKlM,OAAQohF,KAMzD0J,GACHl5C,KAAKstC,iBAAiB6L,aAIpB7+E,EAAKlM,OAASohF,EAChB,IAAK,IAAIrhF,EAAIyC,EAAOzC,EAAImM,EAAKlM,OAAQD,GAAKqhF,EAAwB,CAChE,IAAM/kD,EAAMt8B,EAAIqhF,EAAyBl1E,EAAKlM,OAASD,EAAIqhF,EAAyBl1E,EAAKlM,OACnFwO,EAAuB,iBAATtC,EAChB0lC,KAAKyxC,eAAe2H,OAAO9+E,EAAKqvC,UAAUx7C,EAAGs8B,GAAMuV,KAAKwxC,cACxDxxC,KAAK2xC,aAAayH,OAAO9+E,EAAK42E,SAAS/iF,EAAGs8B,GAAMuV,KAAKwxC,cACzD,GAAI30E,EAASmjC,KAAKqrB,QAAQ8iB,MAAMnuC,KAAKwxC,aAAc50E,GAGjD,OAFAojC,KAAK84C,eAAejG,EAAcC,EAAcl2E,EAAKzO,GACrD6xC,KAAK+4C,uBAAuBl8E,GACrBA,OAIX,IAAKq8E,IACGt8E,EAAuB,iBAATtC,EAChB0lC,KAAKyxC,eAAe2H,OAAO9+E,EAAM0lC,KAAKwxC,cACtCxxC,KAAK2xC,aAAayH,OAAO9+E,EAAM0lC,KAAKwxC,cACpC30E,EAASmjC,KAAKqrB,QAAQ8iB,MAAMnuC,KAAKwxC,aAAc50E,IAGjD,OAFAojC,KAAK84C,eAAejG,EAAcC,EAAcl2E,EAAK,GACrDojC,KAAK+4C,uBAAuBl8E,GACrBA,GAKbujC,EAASJ,KAAKiK,eAAe7J,QAClBoN,IAAMqlC,GAAgBzyC,EAAOqN,IAAMqlC,GAC5C9yC,KAAKsW,cAAcjI,OAIrBrO,KAAKoyC,sBAAsB/jC,KAAKrO,KAAKstC,iBAAiB18E,MAAOovC,KAAKstC,iBAAiB7iD,MAG9E,YAAAgpD,MAAP,SAAan5E,EAAmB1J,EAAe65B,GAC7C,IAAIukC,EACAqqB,EACEj5C,EAASJ,KAAKiK,eAAe7J,OAC7Bk5C,EAAUt5C,KAAK0tC,gBAAgB4L,QAC/BngC,EAAmBnZ,KAAKoT,gBAAgBj7C,QAAQghD,iBAChD3N,EAAOxL,KAAKiK,eAAeuB,KAC3B+tC,EAAiBv5C,KAAKwZ,aAAajX,gBAAgBi3C,WACnDC,EAAaz5C,KAAKwZ,aAAakgC,MAAMD,WACrCE,EAAU35C,KAAKiyC,aACjB2H,EAAYx5C,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,GAEvDzN,KAAKstC,iBAAiBuM,UAAUz5C,EAAOqN,GAGnCrN,EAAOoN,GAAK/iB,EAAM75B,EAAQ,GAA0C,IAArCgpF,EAAUn/B,SAASra,EAAOoN,EAAI,IAC/DosC,EAAUE,qBAAqB15C,EAAOoN,EAAI,EAAG,EAAG,EAAGmsC,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,UAGrF,IAAK,IAAI3+C,EAAMxqC,EAAOwqC,EAAM3Q,IAAO2Q,EAAK,CAUtC,GATA4zB,EAAO10D,EAAK8gC,GAIZi+C,EAAUr5C,KAAKmK,gBAAgB6vC,QAAQhrB,GAKnCA,EAAO,KAAOsqB,EAAS,CACzB,IAAMnwD,EAAKmwD,EAAQvsF,OAAOg3D,aAAaiL,IACnC7lC,IACF6lC,EAAO7lC,EAAGt1B,WAAW,IAYzB,GARIslD,GACFnZ,KAAKwyC,YAAYnkC,KAAK,EAAA4rC,oBAAoBjrB,IAOvCqqB,IAAWj5C,EAAOoN,EAAvB,CAeA,GAAIpN,EAAOoN,EAAI6rC,EAAU,GAAK7tC,EAG5B,GAAI+tC,EAAgB,CAElB,KAAOn5C,EAAOoN,EAAIhC,GAChBouC,EAAUE,qBAAqB15C,EAAOoN,IAAK,EAAG,EAAGmsC,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,UAEnF35C,EAAOoN,EAAI,EACXpN,EAAOqN,IACHrN,EAAOqN,IAAMrN,EAAO2tC,aAAe,GACrC3tC,EAAOqN,IACPzN,KAAKiK,eAAe2kC,OAAO5uC,KAAKk6C,kBAAkB,KAE9C95C,EAAOqN,GAAKzN,KAAKiK,eAAetM,OAClCyC,EAAOqN,EAAIzN,KAAKiK,eAAetM,KAAO,GAIxCyC,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,GAAI0b,WAAY,GAGzDywB,EAAYx5C,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,QAGnD,GADArN,EAAOoN,EAAIhC,EAAO,EACF,IAAZ6tC,EAGF,SAuBN,GAjBII,IAEFG,EAAUO,YAAY/5C,EAAOoN,EAAG6rC,EAASj5C,EAAOqsB,YAAYktB,GAAUA,GAIjC,IAAjCC,EAAUn/B,SAASjP,EAAO,IAC5BouC,EAAUE,qBAAqBtuC,EAAO,EAAG,EAAAguB,eAAgB,EAAA4gB,gBAAiBT,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,WAK9GH,EAAUE,qBAAqB15C,EAAOoN,IAAKwhB,EAAMqqB,EAASM,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,UAKtFV,EAAU,EACZ,OAASA,GAEPO,EAAUE,qBAAqB15C,EAAOoN,IAAK,EAAG,EAAGmsC,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,eApE9EH,EAAUn/B,SAASra,EAAOoN,EAAI,GAMjCosC,EAAUS,mBAAmBj6C,EAAOoN,EAAI,EAAGwhB,GAF3C4qB,EAAUS,mBAAmBj6C,EAAOoN,EAAI,EAAGwhB,GAwE7CvkC,EAAM75B,EAAQ,IAChBgpF,EAAUxsB,SAAShtB,EAAOoN,EAAI,EAAGxN,KAAK44B,WACJ,IAA9B54B,KAAK44B,UAAUne,YAAoBza,KAAK44B,UAAUvG,UAAY,MAChEryB,KAAKqrB,QAAQivB,mBAAqB,EACzBt6C,KAAK44B,UAAU8J,aACxB1iC,KAAKqrB,QAAQivB,mBAAqBt6C,KAAK44B,UAAUxH,WAAWv9D,WAAW,GAEvEmsC,KAAKqrB,QAAQivB,mBAAqBt6C,KAAK44B,UAAU/sB,SAKjDzL,EAAOoN,EAAIhC,GAAQ/gB,EAAM75B,EAAQ,GAAsC,IAAjCgpF,EAAUn/B,SAASra,EAAOoN,KAAaosC,EAAUW,WAAWn6C,EAAOoN,IAC3GosC,EAAUE,qBAAqB15C,EAAOoN,EAAG,EAAG,EAAGmsC,EAAQr1C,GAAIq1C,EAAQt1C,GAAIs1C,EAAQI,UAGjF/5C,KAAKstC,iBAAiBuM,UAAUz5C,EAAOqN,IAMlC,YAAA8f,mBAAP,SAA0Bl0D,EAAyBwa,GAAnD,WACE,MAAiB,MAAbxa,EAAG41E,OAAkB51E,EAAGm7E,QAAWn7E,EAAGs6E,cASnC3zC,KAAKqrB,QAAQkC,mBAAmBl0D,EAAIwa,GAPlCmsB,KAAKqrB,QAAQkC,mBAAmBl0D,GAAI,SAAA4P,GACzC,OAAKwmE,EAAoBxmE,EAAOA,OAAO,GAAI,EAAKmqC,gBAAgBj7C,QAAQk+E,gBAGjExiE,EAAS5K,OASf,YAAAwkD,mBAAP,SAA0Bp0D,EAAyBwa,GACjD,OAAOmsB,KAAKqrB,QAAQoC,mBAAmBp0D,EAAI,IAAI,EAAAmhF,WAAW3mE,KAMrD,YAAA85C,mBAAP,SAA0Bt0D,EAAyBwa,GACjD,OAAOmsB,KAAKqrB,QAAQsC,mBAAmBt0D,EAAIwa,IAMtC,YAAAg6C,mBAAP,SAA0BC,EAAej6C,GACvC,OAAOmsB,KAAKqrB,QAAQwC,mBAAmBC,EAAO,IAAI,EAAAgqB,WAAWjkE,KAWxD,YAAAyjC,KAAP,WAEE,OADAtX,KAAKmyC,eAAe9jC,QACb,GAaF,YAAAuoC,SAAP,WAEE,IAAMx2C,EAASJ,KAAKiK,eAAe7J,OAoBnC,OAlBAJ,KAAKstC,iBAAiBuM,UAAUz5C,EAAOqN,GACnCzN,KAAKoT,gBAAgBj7C,QAAQsiF,aAC/Br6C,EAAOoN,EAAI,GAEbpN,EAAOqN,IACHrN,EAAOqN,IAAMrN,EAAO2tC,aAAe,GACrC3tC,EAAOqN,IACPzN,KAAKiK,eAAe2kC,OAAO5uC,KAAKk6C,mBACvB95C,EAAOqN,GAAKzN,KAAKiK,eAAetM,OACzCyC,EAAOqN,EAAIzN,KAAKiK,eAAetM,KAAO,GAGpCyC,EAAOoN,GAAKxN,KAAKiK,eAAeuB,MAClCpL,EAAOoN,IAETxN,KAAKstC,iBAAiBuM,UAAUz5C,EAAOqN,GAEvCzN,KAAK8sC,YAAYz+B,QACV,GASF,YAAA0oC,eAAP,WAEE,OADA/2C,KAAKiK,eAAe7J,OAAOoN,EAAI,GACxB,GAcF,YAAAypC,UAAP,W,MACQ72C,EAASJ,KAAKiK,eAAe7J,OAGnC,IAAKJ,KAAKwZ,aAAajX,gBAAgBm4C,kBAKrC,OAJA16C,KAAK26C,kBACDv6C,EAAOoN,EAAI,GACbpN,EAAOoN,KAEF,EAQT,GAFAxN,KAAK26C,gBAAgB36C,KAAKiK,eAAeuB,MAErCpL,EAAOoN,EAAI,EACbpN,EAAOoN,SAUP,GAAiB,IAAbpN,EAAOoN,GACJpN,EAAOqN,EAAIrN,EAAOgmB,WAClBhmB,EAAOqN,GAAKrN,EAAO2tC,eACsB,Q,EAAzC3tC,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,UAAE,eAAE0b,WAClD,CACE/oB,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,GAAI0b,WAAY,EACvD/oB,EAAOqN,IACPrN,EAAOoN,EAAIxN,KAAKiK,eAAeuB,KAAO,EAKtC,IAAM2B,EAAO/M,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQja,EAAOqN,GAChDN,EAAKo7B,SAASnoC,EAAOoN,KAAOL,EAAKotC,WAAWn6C,EAAOoN,IACrDpN,EAAOoN,IAQb,OADAxN,KAAK26C,mBACE,GASF,YAAAxD,IAAP,WACE,GAAIn3C,KAAKiK,eAAe7J,OAAOoN,GAAKxN,KAAKiK,eAAeuB,KACtD,OAAO,EAET,IAAMovC,EAAY56C,KAAKiK,eAAe7J,OAAOoN,EAK7C,OAJAxN,KAAKiK,eAAe7J,OAAOoN,EAAIxN,KAAKiK,eAAe7J,OAAOy6C,WACtD76C,KAAKoT,gBAAgBj7C,QAAQghD,kBAC/BnZ,KAAKyyC,WAAWpkC,KAAKrO,KAAKiK,eAAe7J,OAAOoN,EAAIotC,IAE/C,GAUF,YAAAvD,SAAP,WAEE,OADAr3C,KAAK0tC,gBAAgB4K,UAAU,IACxB,GAUF,YAAAf,QAAP,WAEE,OADAv3C,KAAK0tC,gBAAgB4K,UAAU,IACxB,GAMD,YAAAqC,gBAAR,SAAwBG,QAAA,IAAAA,MAAiB96C,KAAKiK,eAAeuB,KAAO,GAClExL,KAAKiK,eAAe7J,OAAOoN,EAAIxgD,KAAKk5C,IAAI40C,EAAQ9tF,KAAK8R,IAAI,EAAGkhC,KAAKiK,eAAe7J,OAAOoN,IACvFxN,KAAKiK,eAAe7J,OAAOqN,EAAIzN,KAAKwZ,aAAajX,gBAAgBw4C,OAC7D/tF,KAAKk5C,IAAIlG,KAAKiK,eAAe7J,OAAO2tC,aAAc/gF,KAAK8R,IAAIkhC,KAAKiK,eAAe7J,OAAOgmB,UAAWpmB,KAAKiK,eAAe7J,OAAOqN,IAC5HzgD,KAAKk5C,IAAIlG,KAAKiK,eAAetM,KAAO,EAAG3wC,KAAK8R,IAAI,EAAGkhC,KAAKiK,eAAe7J,OAAOqN,IAClFzN,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,IAMrD,YAAAutC,WAAR,SAAmBxtC,EAAWC,GAC5BzN,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,GACvDzN,KAAKwZ,aAAajX,gBAAgBw4C,QACpC/6C,KAAKiK,eAAe7J,OAAOoN,EAAIA,EAC/BxN,KAAKiK,eAAe7J,OAAOqN,EAAIzN,KAAKiK,eAAe7J,OAAOgmB,UAAY3Y,IAEtEzN,KAAKiK,eAAe7J,OAAOoN,EAAIA,EAC/BxN,KAAKiK,eAAe7J,OAAOqN,EAAIA,GAEjCzN,KAAK26C,kBACL36C,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,IAMrD,YAAAwtC,YAAR,SAAoBztC,EAAWC,GAG7BzN,KAAK26C,kBACL36C,KAAKg7C,WAAWh7C,KAAKiK,eAAe7J,OAAOoN,EAAIA,EAAGxN,KAAKiK,eAAe7J,OAAOqN,EAAIA,IAU5E,YAAAomC,SAAP,SAAgB5qE,GAEd,IAAMiyE,EAAYl7C,KAAKiK,eAAe7J,OAAOqN,EAAIzN,KAAKiK,eAAe7J,OAAOgmB,UAM5E,OALI80B,GAAa,EACfl7C,KAAKi7C,YAAY,GAAIjuF,KAAKk5C,IAAIg1C,EAAWjyE,EAAOA,OAAO,IAAM,IAE7D+2B,KAAKi7C,YAAY,IAAKhyE,EAAOA,OAAO,IAAM,KAErC,GAUF,YAAA8qE,WAAP,SAAkB9qE,GAEhB,IAAMkyE,EAAen7C,KAAKiK,eAAe7J,OAAO2tC,aAAe/tC,KAAKiK,eAAe7J,OAAOqN,EAM1F,OALI0tC,GAAgB,EAClBn7C,KAAKi7C,YAAY,EAAGjuF,KAAKk5C,IAAIi1C,EAAclyE,EAAOA,OAAO,IAAM,IAE/D+2B,KAAKi7C,YAAY,EAAGhyE,EAAOA,OAAO,IAAM,IAEnC,GASF,YAAA+qE,cAAP,SAAqB/qE,GAEnB,OADA+2B,KAAKi7C,YAAYhyE,EAAOA,OAAO,IAAM,EAAG,IACjC,GASF,YAAAgrE,eAAP,SAAsBhrE,GAEpB,OADA+2B,KAAKi7C,cAAchyE,EAAOA,OAAO,IAAM,GAAI,IACpC,GAWF,YAAAirE,eAAP,SAAsBjrE,GAGpB,OAFA+2B,KAAK+zC,WAAW9qE,GAChB+2B,KAAKiK,eAAe7J,OAAOoN,EAAI,GACxB,GAWF,YAAA2mC,oBAAP,SAA2BlrE,GAGzB,OAFA+2B,KAAK6zC,SAAS5qE,GACd+2B,KAAKiK,eAAe7J,OAAOoN,EAAI,GACxB,GASF,YAAA4mC,mBAAP,SAA0BnrE,GAExB,OADA+2B,KAAKg7C,YAAY/xE,EAAOA,OAAO,IAAM,GAAK,EAAG+2B,KAAKiK,eAAe7J,OAAOqN,IACjE,GAYF,YAAA4mC,eAAP,SAAsBprE,GAOpB,OANA+2B,KAAKg7C,WAEF/xE,EAAO7a,QAAU,GAAM6a,EAAOA,OAAO,IAAM,GAAK,EAAI,GAEpDA,EAAOA,OAAO,IAAM,GAAK,IAErB,GAUF,YAAAgsE,gBAAP,SAAuBhsE,GAErB,OADA+2B,KAAKg7C,YAAY/xE,EAAOA,OAAO,IAAM,GAAK,EAAG+2B,KAAKiK,eAAe7J,OAAOqN,IACjE,GASF,YAAAynC,kBAAP,SAAyBjsE,GAEvB,OADA+2B,KAAKi7C,YAAYhyE,EAAOA,OAAO,IAAM,EAAG,IACjC,GASF,YAAAqsE,gBAAP,SAAuBrsE,GAErB,OADA+2B,KAAKg7C,WAAWh7C,KAAKiK,eAAe7J,OAAOoN,GAAIvkC,EAAOA,OAAO,IAAM,GAAK,IACjE,GAUF,YAAAssE,kBAAP,SAAyBtsE,GAEvB,OADA+2B,KAAKi7C,YAAY,EAAGhyE,EAAOA,OAAO,IAAM,IACjC,GAWF,YAAAusE,WAAP,SAAkBvsE,GAEhB,OADA+2B,KAAKq0C,eAAeprE,IACb,GAcF,YAAAwsE,SAAP,SAAgBxsE,GACd,IAAMmyE,EAAQnyE,EAAOA,OAAO,GAM5B,OALc,IAAVmyE,SACKp7C,KAAKiK,eAAe7J,OAAOi7C,KAAKr7C,KAAKiK,eAAe7J,OAAOoN,GAC/C,IAAV4tC,IACTp7C,KAAKiK,eAAe7J,OAAOi7C,KAAO,KAE7B,GASF,YAAA/G,iBAAP,SAAwBrrE,GACtB,GAAI+2B,KAAKiK,eAAe7J,OAAOoN,GAAKxN,KAAKiK,eAAeuB,KACtD,OAAO,EAGT,IADA,IAAI4vC,EAAQnyE,EAAOA,OAAO,IAAM,EACzBmyE,KACLp7C,KAAKiK,eAAe7J,OAAOoN,EAAIxN,KAAKiK,eAAe7J,OAAOy6C,WAE5D,OAAO,GAQF,YAAA7F,kBAAP,SAAyB/rE,GACvB,GAAI+2B,KAAKiK,eAAe7J,OAAOoN,GAAKxN,KAAKiK,eAAeuB,KACtD,OAAO,EAOT,IALA,IAAI4vC,EAAQnyE,EAAOA,OAAO,IAAM,EAG1Bm3B,EAASJ,KAAKiK,eAAe7J,OAE5Bg7C,KACLh7C,EAAOoN,EAAIpN,EAAOk7C,WAEpB,OAAO,GAWD,YAAAC,mBAAR,SAA2B9tC,EAAW78C,EAAe65B,EAAa+wD,QAAA,IAAAA,OAAA,GAChE,IAAMruC,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAKiK,eAAe7J,OAAOia,MAAQ5M,GACrFN,EAAKsuC,aACH7qF,EACA65B,EACAuV,KAAKiK,eAAe7J,OAAOqsB,YAAYzsB,KAAKk6C,kBAC5Cl6C,KAAKk6C,kBAEHsB,IACFruC,EAAKgc,WAAY,IASb,YAAAuyB,iBAAR,SAAyBjuC,GACvB,IAAMN,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAKiK,eAAe7J,OAAOia,MAAQ5M,GACrFN,EAAKwuC,KAAK37C,KAAKiK,eAAe7J,OAAOqsB,YAAYzsB,KAAKk6C,mBACtD/sC,EAAKgc,WAAY,GA2BZ,YAAAorB,eAAP,SAAsBtrE,GAEpB,IAAIwR,EACJ,OAFAulB,KAAK26C,kBAEG1xE,EAAOA,OAAO,IACpB,KAAK,EAIH,IAHAwR,EAAIulB,KAAKiK,eAAe7J,OAAOqN,EAC/BzN,KAAKstC,iBAAiBuM,UAAUp/D,GAChCulB,KAAKu7C,mBAAmB9gE,IAAKulB,KAAKiK,eAAe7J,OAAOoN,EAAGxN,KAAKiK,eAAeuB,KAAuC,IAAjCxL,KAAKiK,eAAe7J,OAAOoN,GACzG/yB,EAAIulB,KAAKiK,eAAetM,KAAMljB,IACnCulB,KAAK07C,iBAAiBjhE,GAExBulB,KAAKstC,iBAAiBuM,UAAUp/D,GAChC,MACF,KAAK,EASH,IARAA,EAAIulB,KAAKiK,eAAe7J,OAAOqN,EAC/BzN,KAAKstC,iBAAiBuM,UAAUp/D,GAEhCulB,KAAKu7C,mBAAmB9gE,EAAG,EAAGulB,KAAKiK,eAAe7J,OAAOoN,EAAI,GAAG,GAC5DxN,KAAKiK,eAAe7J,OAAOoN,EAAI,GAAKxN,KAAKiK,eAAeuB,OAE1DxL,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAIwkB,EAAI,GAAI0uC,WAAY,GAEpD1uC,KACLulB,KAAK07C,iBAAiBjhE,GAExBulB,KAAKstC,iBAAiBuM,UAAU,GAChC,MACF,KAAK,EAGH,IAFAp/D,EAAIulB,KAAKiK,eAAetM,KACxBqC,KAAKstC,iBAAiBuM,UAAUp/D,EAAI,GAC7BA,KACLulB,KAAK07C,iBAAiBjhE,GAExBulB,KAAKstC,iBAAiBuM,UAAU,GAChC,MACF,KAAK,EAEH,IAAM+B,EAAiB57C,KAAKiK,eAAe7J,OAAOC,MAAMjyC,OAAS4xC,KAAKiK,eAAetM,KACjFi+C,EAAiB,IACnB57C,KAAKiK,eAAe7J,OAAOC,MAAMgsC,UAAUuP,GAC3C57C,KAAKiK,eAAe7J,OAAOia,MAAQrtD,KAAK8R,IAAIkhC,KAAKiK,eAAe7J,OAAOia,MAAQuhC,EAAgB,GAC/F57C,KAAKiK,eAAe7J,OAAOoB,MAAQx0C,KAAK8R,IAAIkhC,KAAKiK,eAAe7J,OAAOoB,MAAQo6C,EAAgB,GAE/F57C,KAAK0e,UAAUrQ,KAAK,IAI1B,OAAO,GAyBF,YAAAomC,YAAP,SAAmBxrE,GAEjB,OADA+2B,KAAK26C,kBACG1xE,EAAOA,OAAO,IACpB,KAAK,EACH+2B,KAAKu7C,mBAAmBv7C,KAAKiK,eAAe7J,OAAOqN,EAAGzN,KAAKiK,eAAe7J,OAAOoN,EAAGxN,KAAKiK,eAAeuB,MACxG,MACF,KAAK,EACHxL,KAAKu7C,mBAAmBv7C,KAAKiK,eAAe7J,OAAOqN,EAAG,EAAGzN,KAAKiK,eAAe7J,OAAOoN,EAAI,GACxF,MACF,KAAK,EACHxN,KAAKu7C,mBAAmBv7C,KAAKiK,eAAe7J,OAAOqN,EAAG,EAAGzN,KAAKiK,eAAeuB,MAIjF,OADAxL,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,IACpD,GAYF,YAAAinC,YAAP,SAAmBzrE,GACjB+2B,KAAK26C,kBACL,IAAIS,EAAQnyE,EAAOA,OAAO,IAAM,EAG1Bm3B,EAASJ,KAAKiK,eAAe7J,OAEnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAOT,IAJA,IAAMvG,EAAczf,EAAOia,MAAQja,EAAOqN,EAEpCouC,EAAyB77C,KAAKiK,eAAetM,KAAO,EAAIyC,EAAO2tC,aAC/D+N,EAAuB97C,KAAKiK,eAAetM,KAAO,EAAIyC,EAAOia,MAAQwhC,EAAyB,EAC7FT,KAGLh7C,EAAOC,MAAMxxC,OAAOitF,EAAuB,EAAG,GAC9C17C,EAAOC,MAAMxxC,OAAOgxD,EAAK,EAAGzf,EAAO+jB,aAAankB,KAAKk6C,mBAKvD,OAFAl6C,KAAKstC,iBAAiBQ,eAAe1tC,EAAOqN,EAAGrN,EAAO2tC,cACtD3tC,EAAOoN,EAAI,GACJ,GAYF,YAAAmnC,YAAP,SAAmB1rE,GACjB+2B,KAAK26C,kBACL,IAAIS,EAAQnyE,EAAOA,OAAO,IAAM,EAG1Bm3B,EAASJ,KAAKiK,eAAe7J,OAEnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAGT,IAEI3rC,EAFEolC,EAAczf,EAAOia,MAAQja,EAAOqN,EAK1C,IAFAhzB,EAAIulB,KAAKiK,eAAetM,KAAO,EAAIyC,EAAO2tC,aAC1CtzD,EAAIulB,KAAKiK,eAAetM,KAAO,EAAIyC,EAAOia,MAAQ5/B,EAC3C2gE,KAGLh7C,EAAOC,MAAMxxC,OAAOgxD,EAAK,GACzBzf,EAAOC,MAAMxxC,OAAO4rB,EAAG,EAAG2lB,EAAO+jB,aAAankB,KAAKk6C,mBAKrD,OAFAl6C,KAAKstC,iBAAiBQ,eAAe1tC,EAAOqN,EAAGrN,EAAO2tC,cACtD3tC,EAAOoN,EAAI,GACJ,GAcF,YAAAkmC,YAAP,SAAmBzqE,GACjB+2B,KAAK26C,kBACL,IAAMxtC,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,GAUhH,OATIN,IACFA,EAAKgtC,YACHn6C,KAAKiK,eAAe7J,OAAOoN,EAC3BvkC,EAAOA,OAAO,IAAM,EACpB+2B,KAAKiK,eAAe7J,OAAOqsB,YAAYzsB,KAAKk6C,kBAC5Cl6C,KAAKk6C,kBAEPl6C,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,KAEtD,GAcF,YAAAmnC,YAAP,SAAmB3rE,GACjB+2B,KAAK26C,kBACL,IAAMxtC,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,GAUhH,OATIN,IACFA,EAAK4uC,YACH/7C,KAAKiK,eAAe7J,OAAOoN,EAC3BvkC,EAAOA,OAAO,IAAM,EACpB+2B,KAAKiK,eAAe7J,OAAOqsB,YAAYzsB,KAAKk6C,kBAC5Cl6C,KAAKk6C,kBAEPl6C,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,KAEtD,GAWF,YAAAonC,SAAP,SAAgB5rE,GAMd,IALA,IAAImyE,EAAQnyE,EAAOA,OAAO,IAAM,EAG1Bm3B,EAASJ,KAAKiK,eAAe7J,OAE5Bg7C,KACLh7C,EAAOC,MAAMxxC,OAAOuxC,EAAOia,MAAQja,EAAOgmB,UAAW,GACrDhmB,EAAOC,MAAMxxC,OAAOuxC,EAAOia,MAAQja,EAAO2tC,aAAc,EAAG3tC,EAAO+jB,aAAankB,KAAKk6C,mBAGtF,OADAl6C,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAQF,YAAA+G,WAAP,SAAkB7rE,GAMhB,IALA,IAAImyE,EAAQnyE,EAAOA,OAAO,IAAM,EAG1Bm3B,EAASJ,KAAKiK,eAAe7J,OAE5Bg7C,KACLh7C,EAAOC,MAAMxxC,OAAOuxC,EAAOia,MAAQja,EAAO2tC,aAAc,GACxD3tC,EAAOC,MAAMxxC,OAAOuxC,EAAOia,MAAQja,EAAOgmB,UAAW,EAAGhmB,EAAO+jB,aAAa,EAAAC,oBAG9E,OADApkB,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAqBF,YAAA6F,WAAP,SAAkB3qE,GAChB,IAAMm3B,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAGT,IADA,IAAMg1B,EAAQnyE,EAAOA,OAAO,IAAM,EACzBwkC,EAAIrN,EAAOgmB,UAAW3Y,GAAKrN,EAAO2tC,eAAgBtgC,EAAG,CAC5D,IAAMN,EAAO/M,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQ5M,GAC7CN,EAAK4uC,YAAY,EAAGX,EAAOh7C,EAAOqsB,YAAYzsB,KAAKk6C,kBAAmBl6C,KAAKk6C,kBAC3E/sC,EAAKgc,WAAY,EAGnB,OADAnpB,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAsBF,YAAA+F,YAAP,SAAmB7qE,GACjB,IAAMm3B,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAGT,IADA,IAAMg1B,EAAQnyE,EAAOA,OAAO,IAAM,EACzBwkC,EAAIrN,EAAOgmB,UAAW3Y,GAAKrN,EAAO2tC,eAAgBtgC,EAAG,CAC5D,IAAMN,EAAO/M,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQ5M,GAC7CN,EAAKgtC,YAAY,EAAGiB,EAAOh7C,EAAOqsB,YAAYzsB,KAAKk6C,kBAAmBl6C,KAAKk6C,kBAC3E/sC,EAAKgc,WAAY,EAGnB,OADAnpB,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAYF,YAAAwI,cAAP,SAAqBttE,GACnB,IAAMm3B,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAGT,IADA,IAAMg1B,EAAQnyE,EAAOA,OAAO,IAAM,EACzBwkC,EAAIrN,EAAOgmB,UAAW3Y,GAAKrN,EAAO2tC,eAAgBtgC,EAAG,CAC5D,IAAMN,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQ5M,GACjEN,EAAKgtC,YAAY/5C,EAAOoN,EAAG4tC,EAAOh7C,EAAOqsB,YAAYzsB,KAAKk6C,kBAAmBl6C,KAAKk6C,kBAClF/sC,EAAKgc,WAAY,EAGnB,OADAnpB,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAYF,YAAAyI,cAAP,SAAqBvtE,GACnB,IAAMm3B,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIA,EAAOqN,EAAIrN,EAAO2tC,cAAgB3tC,EAAOqN,EAAIrN,EAAOgmB,UACtD,OAAO,EAGT,IADA,IAAMg1B,EAAQnyE,EAAOA,OAAO,IAAM,EACzBwkC,EAAIrN,EAAOgmB,UAAW3Y,GAAKrN,EAAO2tC,eAAgBtgC,EAAG,CAC5D,IAAMN,EAAO/M,EAAOC,MAAMpqC,IAAImqC,EAAOia,MAAQ5M,GAC7CN,EAAK4uC,YAAY37C,EAAOoN,EAAG4tC,EAAOh7C,EAAOqsB,YAAYzsB,KAAKk6C,kBAAmBl6C,KAAKk6C,kBAClF/sC,EAAKgc,WAAY,EAGnB,OADAnpB,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,eACvD,GAWF,YAAAgH,WAAP,SAAkB9rE,GAChB+2B,KAAK26C,kBACL,IAAMxtC,EAAOnN,KAAKiK,eAAe7J,OAAOC,MAAMpqC,IAAI+pC,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,GAUhH,OATIN,IACFA,EAAKsuC,aACHz7C,KAAKiK,eAAe7J,OAAOoN,EAC3BxN,KAAKiK,eAAe7J,OAAOoN,GAAKvkC,EAAOA,OAAO,IAAM,GACpD+2B,KAAKiK,eAAe7J,OAAOqsB,YAAYzsB,KAAKk6C,kBAC5Cl6C,KAAKk6C,kBAEPl6C,KAAKstC,iBAAiBuM,UAAU75C,KAAKiK,eAAe7J,OAAOqN,KAEtD,GA8BF,YAAA0nC,yBAAP,SAAgClsE,GAC9B,IAAK+2B,KAAKqrB,QAAQivB,mBAChB,OAAO,EAKT,IAFA,IAAMlsF,EAAS6a,EAAOA,OAAO,IAAM,EAC7B3O,EAAO,IAAI02E,YAAY5iF,GACpBD,EAAI,EAAGA,EAAIC,IAAUD,EAC5BmM,EAAKnM,GAAK6xC,KAAKqrB,QAAQivB,mBAGzB,OADAt6C,KAAKyzC,MAAMn5E,EAAM,EAAGA,EAAKlM,SAClB,GA4BF,YAAAgnF,4BAAP,SAAmCnsE,GACjC,OAAIA,EAAOA,OAAO,GAAK,IAGnB+2B,KAAKg8C,IAAI,UAAYh8C,KAAKg8C,IAAI,iBAAmBh8C,KAAKg8C,IAAI,UAC5Dh8C,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,UACnC3Z,KAAKg8C,IAAI,UAClBh8C,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,UALrC,GAkCJ,YAAA07B,8BAAP,SAAqCpsE,GACnC,OAAIA,EAAOA,OAAO,GAAK,IAMnB+2B,KAAKg8C,IAAI,SACXh8C,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,cACnC3Z,KAAKg8C,IAAI,gBAClBh8C,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,cACnC3Z,KAAKg8C,IAAI,SAGlBh8C,KAAKwZ,aAAahX,iBAAiBv5B,EAAOA,OAAO,GAAK,KAC7C+2B,KAAKg8C,IAAI,WAClBh8C,KAAKwZ,aAAahX,iBAAiB,EAAAkX,GAAGC,IAAM,mBAdrC,GAuBH,YAAAqiC,IAAR,SAAYC,GACV,OAAsE,KAA9Dj8C,KAAKoT,gBAAgBj7C,QAAQ+jF,SAAW,IAAIttF,QAAQqtF,IAoBvD,YAAAvG,QAAP,SAAezsE,GACb,IAAK,IAAI9a,EAAI,EAAGA,EAAI8a,EAAO7a,OAAQD,IACjC,OAAQ8a,EAAOA,OAAO9a,IACpB,KAAK,EACH6xC,KAAKwZ,aAAakgC,MAAMD,YAAa,EAO3C,OAAO,GAoHF,YAAA9D,eAAP,SAAsB1sE,GACpB,IAAK,IAAI9a,EAAI,EAAGA,EAAI8a,EAAO7a,OAAQD,IACjC,OAAQ8a,EAAOA,OAAO9a,IACpB,KAAK,EACH6xC,KAAKwZ,aAAajX,gBAAgB0e,uBAAwB,EAC1D,MACF,KAAK,EACHjhB,KAAK0tC,gBAAgByO,YAAY,EAAG,EAAAC,iBACpCp8C,KAAK0tC,gBAAgByO,YAAY,EAAG,EAAAC,iBACpCp8C,KAAK0tC,gBAAgByO,YAAY,EAAG,EAAAC,iBACpCp8C,KAAK0tC,gBAAgByO,YAAY,EAAG,EAAAC,iBAEpC,MACF,KAAK,EAMCp8C,KAAKoT,gBAAgBj7C,QAAQk+E,cAAc3G,cAC7C1vC,KAAKiK,eAAesT,OAAO,IAAKvd,KAAKiK,eAAetM,MACpDqC,KAAKqyC,gBAAgBhkC,QAEvB,MACF,KAAK,EACHrO,KAAKwZ,aAAajX,gBAAgBw4C,QAAS,EAC3C/6C,KAAKg7C,WAAW,EAAG,GACnB,MACF,KAAK,EACHh7C,KAAKwZ,aAAajX,gBAAgBi3C,YAAa,EAC/C,MACF,KAAK,GAEH,MACF,KAAK,GACHx5C,KAAKwZ,aAAajX,gBAAgBm4C,mBAAoB,EACtD,MACF,KAAK,GACH16C,KAAKkK,YAAY4B,MAAM,6CACvB9L,KAAKwZ,aAAajX,gBAAgB85C,mBAAoB,EACtDr8C,KAAKsyC,wBAAwBjkC,OAC7B,MACF,KAAK,EAEHrO,KAAK4e,kBAAkBgC,eAAiB,MACxC,MACF,KAAK,IAEH5gB,KAAK4e,kBAAkBgC,eAAiB,QACxC,MACF,KAAK,KACH5gB,KAAK4e,kBAAkBgC,eAAiB,OACxC,MACF,KAAK,KAGH5gB,KAAK4e,kBAAkBgC,eAAiB,MACxC,MACF,KAAK,KAGH5gB,KAAKwZ,aAAajX,gBAAgBkX,WAAY,EAC9C,MACF,KAAK,KACHzZ,KAAKkK,YAAY4B,MAAM,yCACvB,MACF,KAAK,KACH9L,KAAK4e,kBAAkB09B,eAAiB,MACxC,MACF,KAAK,KACHt8C,KAAKkK,YAAY4B,MAAM,yCACvB,MACF,KAAK,GACH9L,KAAKwZ,aAAagc,gBAAiB,EACnC,MACF,KAAK,KACHx1B,KAAKo2C,aACL,MACF,KAAK,KACHp2C,KAAKo2C,aAEP,KAAK,GACL,KAAK,KACHp2C,KAAKiK,eAAe2O,QAAQ2jC,kBAAkBv8C,KAAKk6C,kBACnDl6C,KAAKwZ,aAAagI,qBAAsB,EACxCxhB,KAAKoyC,sBAAsB/jC,KAAK,EAAGrO,KAAKiK,eAAetM,KAAO,GAC9DqC,KAAKsyC,wBAAwBjkC,OAC7B,MACF,KAAK,KACHrO,KAAKwZ,aAAajX,gBAAgBJ,oBAAqB,EAI7D,OAAO,GAwBF,YAAAyzC,UAAP,SAAiB3sE,GACf,IAAK,IAAI9a,EAAI,EAAGA,EAAI8a,EAAO7a,OAAQD,IACjC,OAAQ8a,EAAOA,OAAO9a,IACpB,KAAK,EACH6xC,KAAKwZ,aAAakgC,MAAMD,YAAa,EAO3C,OAAO,GAgHF,YAAA5D,iBAAP,SAAwB5sE,GACtB,IAAK,IAAI9a,EAAI,EAAGA,EAAI8a,EAAO7a,OAAQD,IACjC,OAAQ8a,EAAOA,OAAO9a,IACpB,KAAK,EACH6xC,KAAKwZ,aAAajX,gBAAgB0e,uBAAwB,EAC1D,MACF,KAAK,EAMCjhB,KAAKoT,gBAAgBj7C,QAAQk+E,cAAc3G,cAC7C1vC,KAAKiK,eAAesT,OAAO,GAAIvd,KAAKiK,eAAetM,MACnDqC,KAAKqyC,gBAAgBhkC,QAEvB,MACF,KAAK,EACHrO,KAAKwZ,aAAajX,gBAAgBw4C,QAAS,EAC3C/6C,KAAKg7C,WAAW,EAAG,GACnB,MACF,KAAK,EACHh7C,KAAKwZ,aAAajX,gBAAgBi3C,YAAa,EAC/C,MACF,KAAK,GAEH,MACF,KAAK,GACHx5C,KAAKwZ,aAAajX,gBAAgBm4C,mBAAoB,EACtD,MACF,KAAK,GACH16C,KAAKkK,YAAY4B,MAAM,oCACvB9L,KAAKwZ,aAAajX,gBAAgB85C,mBAAoB,EACtDr8C,KAAKsyC,wBAAwBjkC,OAC7B,MACF,KAAK,EACL,KAAK,IACL,KAAK,KACL,KAAK,KACHrO,KAAK4e,kBAAkBgC,eAAiB,OACxC,MACF,KAAK,KACH5gB,KAAKwZ,aAAajX,gBAAgBkX,WAAY,EAC9C,MACF,KAAK,KACHzZ,KAAKkK,YAAY4B,MAAM,yCACvB,MACF,KAAK,KACH9L,KAAK4e,kBAAkB09B,eAAiB,UACxC,MACF,KAAK,KACHt8C,KAAKkK,YAAY4B,MAAM,yCACvB,MACF,KAAK,GACH9L,KAAKwZ,aAAagc,gBAAiB,EACnC,MACF,KAAK,KACHx1B,KAAKs2C,gBACL,MACF,KAAK,KAEL,KAAK,GACL,KAAK,KAEHt2C,KAAKiK,eAAe2O,QAAQ4jC,uBACH,OAArBvzE,EAAOA,OAAO9a,IAChB6xC,KAAKs2C,gBAEPt2C,KAAKwZ,aAAagI,qBAAsB,EACxCxhB,KAAKoyC,sBAAsB/jC,KAAK,EAAGrO,KAAKiK,eAAetM,KAAO,GAC9DqC,KAAKsyC,wBAAwBjkC,OAC7B,MACF,KAAK,KACHrO,KAAKwZ,aAAajX,gBAAgBJ,oBAAqB,EAI7D,OAAO,GAMD,YAAAs6C,iBAAR,SAAyBt4C,EAAexK,EAAc+iD,EAAYC,EAAYC,GAS5E,OARa,IAATjjD,GACFwK,GAAS,SACTA,IAAS,SACTA,GAAS,EAAAyuB,cAAciqB,aAAa,CAACH,EAAIC,EAAIC,KAC3B,IAATjjD,IACTwK,IAAS,SACTA,GAAS,SAA2B,IAALu4C,GAE1Bv4C,GAOD,YAAA24C,cAAR,SAAsB7zE,EAAiBmyB,EAAalY,GAKlD,IAAM65D,EAAO,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAG1BC,EAAS,EAGTC,EAAU,EAEd,EAAG,CAED,GADAF,EAAKE,EAAUD,GAAU/zE,EAAOA,OAAOmyB,EAAM6hD,GACzCh0E,EAAOi0E,aAAa9hD,EAAM6hD,GAAU,CACtC,IAAME,EAAYl0E,EAAOm0E,aAAahiD,EAAM6hD,GACxC9uF,EAAI,EACR,GACkB,IAAZ4uF,EAAK,KACPC,EAAS,GAEXD,EAAKE,EAAU9uF,EAAI,EAAI6uF,GAAUG,EAAUhvF,WAClCA,EAAIgvF,EAAU/uF,QAAUD,EAAI8uF,EAAU,EAAID,EAASD,EAAK3uF,QACnE,MAGF,GAAiB,IAAZ2uF,EAAK,IAAYE,EAAUD,GAAU,GACtB,IAAZD,EAAK,IAAYE,EAAUD,GAAU,EAC3C,MAGED,EAAK,KACPC,EAAS,WAEFC,EAAU7hD,EAAMnyB,EAAO7a,QAAU6uF,EAAUD,EAASD,EAAK3uF,QAGpE,IAASD,EAAI,EAAGA,EAAI4uF,EAAK3uF,SAAUD,GAChB,IAAb4uF,EAAK5uF,KACP4uF,EAAK5uF,GAAK,GAKd,OAAQ4uF,EAAK,IACX,KAAK,GACH75D,EAAKohB,GAAKtE,KAAKy8C,iBAAiBv5D,EAAKohB,GAAIy4C,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACzE,MACF,KAAK,GACH75D,EAAKmhB,GAAKrE,KAAKy8C,iBAAiBv5D,EAAKmhB,GAAI04C,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACzE,MACF,KAAK,GACH75D,EAAK62D,SAAW72D,EAAK62D,SAAS5oE,QAC9B+R,EAAK62D,SAASsD,eAAiBr9C,KAAKy8C,iBAAiBv5D,EAAK62D,SAASsD,eAAgBN,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAGvH,OAAOE,GAYD,YAAAK,kBAAR,SAA0B7oE,EAAeyO,GAGvCA,EAAK62D,SAAW72D,EAAK62D,SAAS5oE,WAGxBsD,GAASA,EAAQ,KACrBA,EAAQ,GAEVyO,EAAK62D,SAASwD,eAAiB9oE,EAC/ByO,EAAKohB,IAAM,UAGG,IAAV7vB,IACFyO,EAAKohB,KAAM,WAIbphB,EAAKs6D,kBAoFA,YAAA1H,eAAP,SAAsB7sE,GAEpB,GAAsB,IAAlBA,EAAO7a,QAAqC,IAArB6a,EAAOA,OAAO,GAGvC,OAFA+2B,KAAKiyC,aAAa3tC,GAAK,EAAA8f,kBAAkB9f,GACzCtE,KAAKiyC,aAAa5tC,GAAK,EAAA+f,kBAAkB/f,IAClC,EAOT,IAJA,IACI7+B,EADEpV,EAAI6Y,EAAO7a,OAEX80B,EAAO8c,KAAKiyC,aAET9jF,EAAI,EAAGA,EAAIiC,EAAGjC,KACrBqX,EAAIyD,EAAOA,OAAO9a,KACT,IAAMqX,GAAK,IAElB0d,EAAKohB,KAAM,SACXphB,EAAKohB,IAAM,SAAqB9+B,EAAI,IAC3BA,GAAK,IAAMA,GAAK,IAEzB0d,EAAKmhB,KAAM,SACXnhB,EAAKmhB,IAAM,SAAqB7+B,EAAI,IAC3BA,GAAK,IAAMA,GAAK,IAEzB0d,EAAKohB,KAAM,SACXphB,EAAKohB,IAAM,SAAqB9+B,EAAI,IAC3BA,GAAK,KAAOA,GAAK,KAE1B0d,EAAKmhB,KAAM,SACXnhB,EAAKmhB,IAAM,SAAqB7+B,EAAI,KACrB,IAANA,GAET0d,EAAKohB,GAAK,EAAA8f,kBAAkB9f,GAC5BphB,EAAKmhB,GAAK,EAAA+f,kBAAkB/f,IACb,IAAN7+B,EAET0d,EAAKohB,IAAM,UACI,IAAN9+B,EAET0d,EAAKmhB,IAAM,SACI,IAAN7+B,GAET0d,EAAKohB,IAAM,UACXtE,KAAKs9C,kBAAkBr0E,EAAOi0E,aAAa/uF,GAAK8a,EAAOm0E,aAAajvF,GAAI,GAAK,EAAuB+0B,IACrF,IAAN1d,EAET0d,EAAKohB,IAAM,UACI,IAAN9+B,EAGT0d,EAAKohB,IAAM,SACI,IAAN9+B,EAET0d,EAAKohB,IAAM,WACI,IAAN9+B,EAET0d,EAAKmhB,IAAM,UACI,KAAN7+B,EAETw6B,KAAKs9C,kBAAkB,EAAuBp6D,GAC/B,KAAN1d,GAET0d,EAAKohB,KAAM,UACXphB,EAAKmhB,KAAM,WACI,KAAN7+B,EAET0d,EAAKmhB,KAAM,SACI,KAAN7+B,EAET0d,EAAKohB,KAAM,UACI,KAAN9+B,EAET0d,EAAKohB,KAAM,UACI,KAAN9+B,EAET0d,EAAKohB,KAAM,SACI,KAAN9+B,EAET0d,EAAKohB,KAAM,WACI,KAAN9+B,GAET0d,EAAKohB,KAAM,SACXphB,EAAKohB,IAA6B,SAAvB,EAAA8f,kBAAkB9f,IACd,KAAN9+B,GAET0d,EAAKmhB,KAAM,SACXnhB,EAAKmhB,IAA6B,SAAvB,EAAA+f,kBAAkB/f,IACd,KAAN7+B,GAAkB,KAANA,GAAkB,KAANA,EAEjCrX,GAAK6xC,KAAK88C,cAAc7zE,EAAQ9a,EAAG+0B,GACpB,KAAN1d,GACT0d,EAAK62D,SAAW72D,EAAK62D,SAAS5oE,QAC9B+R,EAAK62D,SAASsD,gBAAkB,EAChCn6D,EAAKs6D,kBACU,MAANh4E,GAET0d,EAAKohB,KAAM,SACXphB,EAAKohB,IAA6B,SAAvB,EAAA8f,kBAAkB9f,GAC7BphB,EAAKmhB,KAAM,SACXnhB,EAAKmhB,IAA6B,SAAvB,EAAA+f,kBAAkB/f,IAE7BrE,KAAKkK,YAAY4B,MAAM,6BAA8BtmC,GAGzD,OAAO,GA4BF,YAAAuwE,aAAP,SAAoB9sE,GAClB,OAAQA,EAAOA,OAAO,IACpB,KAAK,EAEH+2B,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,OAC5C,MACF,KAAK,EAEH,IAAMlM,EAAIzN,KAAKiK,eAAe7J,OAAOqN,EAAI,EACnCD,EAAIxN,KAAKiK,eAAe7J,OAAOoN,EAAI,EACzCxN,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,IAAIlM,EAAC,IAAID,EAAC,KAG1D,OAAO,GAIF,YAAAwoC,oBAAP,SAA2B/sE,GAGzB,OAAQA,EAAOA,OAAO,IACpB,KAAK,EAEH,IAAMwkC,EAAIzN,KAAKiK,eAAe7J,OAAOqN,EAAI,EACnCD,EAAIxN,KAAKiK,eAAe7J,OAAOoN,EAAI,EACzCxN,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,KAAKlM,EAAC,IAAID,EAAC,KAmB3D,OAAO,GAsBF,YAAAyoC,UAAP,SAAiBhtE,GAkBf,OAjBA+2B,KAAKwZ,aAAagc,gBAAiB,EACnCx1B,KAAKsyC,wBAAwBjkC,OAC7BrO,KAAKiK,eAAe7J,OAAOgmB,UAAY,EACvCpmB,KAAKiK,eAAe7J,OAAO2tC,aAAe/tC,KAAKiK,eAAetM,KAAO,EACrEqC,KAAKiyC,aAAe,EAAA7tB,kBAAkBjzC,QACtC6uB,KAAKwZ,aAAa/B,QAClBzX,KAAK0tC,gBAAgBj2B,QAGrBzX,KAAKiK,eAAe7J,OAAOq9C,OAAS,EACpCz9C,KAAKiK,eAAe7J,OAAOs9C,OAAS19C,KAAKiK,eAAe7J,OAAOia,MAC/Dra,KAAKiK,eAAe7J,OAAOu9C,iBAAiBr5C,GAAKtE,KAAKiyC,aAAa3tC,GACnEtE,KAAKiK,eAAe7J,OAAOu9C,iBAAiBt5C,GAAKrE,KAAKiyC,aAAa5tC,GACnErE,KAAKiK,eAAe7J,OAAOw9C,aAAe59C,KAAK0tC,gBAAgB4L,QAG/Dt5C,KAAKwZ,aAAajX,gBAAgBw4C,QAAS,GACpC,GAsBF,YAAA7E,eAAP,SAAsBjtE,GACpB,IAAMmyE,EAAQnyE,EAAOA,OAAO,IAAM,EAClC,OAAQmyE,GACN,KAAK,EACL,KAAK,EACHp7C,KAAKoT,gBAAgBj7C,QAAQu9D,YAAc,QAC3C,MACF,KAAK,EACL,KAAK,EACH11B,KAAKoT,gBAAgBj7C,QAAQu9D,YAAc,YAC3C,MACF,KAAK,EACL,KAAK,EACH11B,KAAKoT,gBAAgBj7C,QAAQu9D,YAAc,MAG/C,IAAMmoB,EAAazC,EAAQ,GAAM,EAEjC,OADAp7C,KAAKoT,gBAAgBj7C,QAAQg9D,YAAc0oB,GACpC,GAUF,YAAA1H,gBAAP,SAAuBltE,GACrB,IACI60E,EADEnhD,EAAM1zB,EAAOA,OAAO,IAAM,EAYhC,OATIA,EAAO7a,OAAS,IAAM0vF,EAAS70E,EAAOA,OAAO,IAAO+2B,KAAKiK,eAAetM,MAAmB,IAAXmgD,KAClFA,EAAS99C,KAAKiK,eAAetM,MAG3BmgD,EAASnhD,IACXqD,KAAKiK,eAAe7J,OAAOgmB,UAAYzpB,EAAM,EAC7CqD,KAAKiK,eAAe7J,OAAO2tC,aAAe+P,EAAS,EACnD99C,KAAKg7C,WAAW,EAAG,KAEd,GAiCF,YAAA3E,cAAP,SAAqBptE,GACnB,IAAKwmE,EAAoBxmE,EAAOA,OAAO,GAAI+2B,KAAKoT,gBAAgBj7C,QAAQk+E,eACtE,OAAO,EAET,IAAM0H,EAAU90E,EAAO7a,OAAS,EAAK6a,EAAOA,OAAO,GAAK,EACxD,OAAQA,EAAOA,OAAO,IACpB,KAAK,GACY,IAAX80E,GACF/9C,KAAKuyC,+BAA+BlkC,KAAKgW,EAAyBC,qBAEpE,MACF,KAAK,GACHtkB,KAAKuyC,+BAA+BlkC,KAAKgW,EAAyBO,sBAClE,MACF,KAAK,GACC5kB,KAAKiK,gBACPjK,KAAKwZ,aAAahX,iBAAoB,EAAAkX,GAAGC,IAAG,MAAM3Z,KAAKiK,eAAetM,KAAI,IAAIqC,KAAKiK,eAAeuB,KAAI,KAExG,MACF,KAAK,GACY,IAAXuyC,GAA2B,IAAXA,IAClB/9C,KAAK+xC,kBAAkB94E,KAAK+mC,KAAK6xC,cAC7B7xC,KAAK+xC,kBAAkB3jF,OA5oFjB,IA6oFR4xC,KAAK+xC,kBAAkB3nE,SAGZ,IAAX2zE,GAA2B,IAAXA,IAClB/9C,KAAKgyC,eAAe/4E,KAAK+mC,KAAK8xC,WAC1B9xC,KAAKgyC,eAAe5jF,OAlpFd,IAmpFR4xC,KAAKgyC,eAAe5nE,SAGxB,MACF,KAAK,GACY,IAAX2zE,GAA2B,IAAXA,GACd/9C,KAAK+xC,kBAAkB3jF,QACzB4xC,KAAK+3C,SAAS/3C,KAAK+xC,kBAAkB53E,OAG1B,IAAX4jF,GAA2B,IAAXA,GACd/9C,KAAKgyC,eAAe5jF,QACtB4xC,KAAKg4C,YAAYh4C,KAAKgyC,eAAe73E,OAK7C,OAAO,GAYF,YAAAi8E,WAAP,SAAkBntE,GAMhB,OALA+2B,KAAKiK,eAAe7J,OAAOq9C,OAASz9C,KAAKiK,eAAe7J,OAAOoN,EAC/DxN,KAAKiK,eAAe7J,OAAOs9C,OAAS19C,KAAKiK,eAAe7J,OAAOia,MAAQra,KAAKiK,eAAe7J,OAAOqN,EAClGzN,KAAKiK,eAAe7J,OAAOu9C,iBAAiBr5C,GAAKtE,KAAKiyC,aAAa3tC,GACnEtE,KAAKiK,eAAe7J,OAAOu9C,iBAAiBt5C,GAAKrE,KAAKiyC,aAAa5tC,GACnErE,KAAKiK,eAAe7J,OAAOw9C,aAAe59C,KAAK0tC,gBAAgB4L,SACxD,GAYF,YAAAhD,cAAP,SAAqBrtE,GAUnB,OATA+2B,KAAKiK,eAAe7J,OAAOoN,EAAIxN,KAAKiK,eAAe7J,OAAOq9C,QAAU,EACpEz9C,KAAKiK,eAAe7J,OAAOqN,EAAIzgD,KAAK8R,IAAIkhC,KAAKiK,eAAe7J,OAAOs9C,OAAS19C,KAAKiK,eAAe7J,OAAOia,MAAO,GAC9Gra,KAAKiyC,aAAa3tC,GAAKtE,KAAKiK,eAAe7J,OAAOu9C,iBAAiBr5C,GACnEtE,KAAKiyC,aAAa5tC,GAAKrE,KAAKiK,eAAe7J,OAAOu9C,iBAAiBt5C,GACnErE,KAAK0tC,gBAAgB4L,QAAWt5C,KAAag+C,cACzCh+C,KAAKiK,eAAe7J,OAAOw9C,eAC7B59C,KAAK0tC,gBAAgB4L,QAAUt5C,KAAKiK,eAAe7J,OAAOw9C,cAE5D59C,KAAK26C,mBACE,GAcF,YAAA5C,SAAP,SAAgBz9E,GAGd,OAFA0lC,KAAK6xC,aAAev3E,EACpB0lC,KAAKyW,eAAepI,KAAK/zC,IAClB,GAOF,YAAA09E,YAAP,SAAmB19E,GAEjB,OADA0lC,KAAK8xC,UAAYx3E,GACV,GAGC,YAAA2jF,sBAAV,SAAgC3jF,GAM9B,IALA,IAGI1E,EAHEiH,EAAgC,CAAEqqC,OAAQ,IAE1C8E,EAAQ,uDAGwB,QAA9Bp2C,EAAQo2C,EAAMuB,KAAKjzC,KACzBuC,EAAOqqC,OAAOjuC,KAAK,CACjBo/C,WAAY91B,SAAS3sB,EAAM,IAC3B6yC,IAAKlmB,SAAS3sB,EAAM,GAAI,IACxB8yC,MAAOnmB,SAAS3sB,EAAM,GAAI,IAC1BgzC,KAAMrmB,SAAS3sB,EAAM,GAAI,MAI7B,OAA6B,IAAzBiH,EAAOqqC,OAAO94C,OACT,KAGFyO,GAUF,YAAAo7E,aAAP,SAAoB39E,GAClB,IAAM0O,EAAQg3B,KAAKi+C,sBAAsB3jF,GAOzC,OANI0O,EACFg3B,KAAK0yC,mBAAmBrkC,KAAKrlC,GAG7Bg3B,KAAKkK,YAAY7yC,KAAK,0DAA0DiD,IAE3E,GAYF,YAAAq9E,SAAP,WAGE,OAFA33C,KAAKiK,eAAe7J,OAAOoN,EAAI,EAC/BxN,KAAKrxC,SACE,GAQF,YAAAwpF,sBAAP,WAIE,OAHAn4C,KAAKkK,YAAY4B,MAAM,6CACvB9L,KAAKwZ,aAAajX,gBAAgB85C,mBAAoB,EACtDr8C,KAAKsyC,wBAAwBjkC,QACtB,GAQF,YAAA+pC,kBAAP,WAIE,OAHAp4C,KAAKkK,YAAY4B,MAAM,oCACvB9L,KAAKwZ,aAAajX,gBAAgB85C,mBAAoB,EACtDr8C,KAAKsyC,wBAAwBjkC,QACtB,GASF,YAAAkqC,qBAAP,WAGE,OAFAv4C,KAAK0tC,gBAAgB4K,UAAU,GAC/Bt4C,KAAK0tC,gBAAgByO,YAAY,EAAG,EAAAC,kBAC7B,GAmBF,YAAA3D,cAAP,SAAqByF,GACnB,OAA8B,IAA1BA,EAAe9vF,QACjB4xC,KAAKu4C,wBACE,IAEiB,MAAtB2F,EAAe,IAGnBl+C,KAAK0tC,gBAAgByO,YAAY5M,EAAO2O,EAAe,IAAK,EAAAxF,SAASwF,EAAe,KAAO,EAAA9B,kBAFlF,IAeJ,YAAAztF,MAAP,WACEqxC,KAAK26C,kBACL,IAAMv6C,EAASJ,KAAKiK,eAAe7J,OASnC,OARAJ,KAAKiK,eAAe7J,OAAOqN,IACvBrN,EAAOqN,IAAMrN,EAAO2tC,aAAe,GACrC3tC,EAAOqN,IACPzN,KAAKiK,eAAe2kC,OAAO5uC,KAAKk6C,mBACvB95C,EAAOqN,GAAKzN,KAAKiK,eAAetM,OACzCyC,EAAOqN,EAAIzN,KAAKiK,eAAetM,KAAO,GAExCqC,KAAK26C,mBACE,GAaF,YAAA9C,OAAP,WAEE,OADA73C,KAAKiK,eAAe7J,OAAOi7C,KAAKr7C,KAAKiK,eAAe7J,OAAOoN,IAAK,GACzD,GAYF,YAAA0qC,aAAP,WACEl4C,KAAK26C,kBACL,IAAMv6C,EAASJ,KAAKiK,eAAe7J,OACnC,GAAIA,EAAOqN,IAAMrN,EAAOgmB,UAAW,CAIjC,IAAM+3B,EAAqB/9C,EAAO2tC,aAAe3tC,EAAOgmB,UACxDhmB,EAAOC,MAAMisC,cAAclsC,EAAOia,MAAQja,EAAOqN,EAAG0wC,EAAoB,GACxE/9C,EAAOC,MAAMppC,IAAImpC,EAAOia,MAAQja,EAAOqN,EAAGrN,EAAO+jB,aAAankB,KAAKk6C,mBACnEl6C,KAAKstC,iBAAiBQ,eAAe1tC,EAAOgmB,UAAWhmB,EAAO2tC,mBAE9D3tC,EAAOqN,IACPzN,KAAK26C,kBAEP,OAAO,GAQF,YAAAtC,UAAP,WAGE,OAFAr4C,KAAKqrB,QAAQ5T,QACbzX,KAAKqyC,gBAAgBhkC,QACd,GAGF,YAAAoJ,MAAP,WACEzX,KAAKiyC,aAAe,EAAA7tB,kBAAkBjzC,QACtC6uB,KAAKkyC,uBAAyB,EAAA9tB,kBAAkBjzC,SAM1C,YAAA+oE,eAAR,WAGE,OAFAl6C,KAAKkyC,uBAAuB7tC,KAAM,SAClCrE,KAAKkyC,uBAAuB7tC,IAA6B,SAAvBrE,KAAKiyC,aAAa5tC,GAC7CrE,KAAKkyC,wBAaP,YAAAoG,UAAP,SAAiB8F,GAEf,OADAp+C,KAAK0tC,gBAAgB4K,UAAU8F,IACxB,GAWF,YAAAzF,uBAAP,WAEE,IAAMxrB,EAAO,IAAI,EAAAT,SACjBS,EAAKthB,QAAU,GAAK,GAAsB,IAAIh4C,WAAW,GACzDs5D,EAAK7oB,GAAKtE,KAAKiyC,aAAa3tC,GAC5B6oB,EAAK9oB,GAAKrE,KAAKiyC,aAAa5tC,GAE5B,IAAMjE,EAASJ,KAAKiK,eAAe7J,OAEnCJ,KAAKg7C,WAAW,EAAG,GACnB,IAAK,IAAIqD,EAAU,EAAGA,EAAUr+C,KAAKiK,eAAetM,OAAQ0gD,EAAS,CACnE,IAAMx+B,EAAMzf,EAAOia,MAAQja,EAAOqN,EAAI4wC,EAChClxC,EAAO/M,EAAOC,MAAMpqC,IAAI4pD,GAC1B1S,IACFA,EAAKwuC,KAAKxuB,GACVhgB,EAAKgc,WAAY,GAKrB,OAFAnpB,KAAKstC,iBAAiBgR,eACtBt+C,KAAKg7C,WAAW,EAAG,IACZ,GAEX,EAp0FA,CAAkC,EAAAj5C,YAArB,EAAA8rC,gB,4HCpNb,iBAIE,aAHU,KAAA0Q,aAA8B,GAC9B,KAAA9lC,aAAuB,EAqCnC,OA7BS,YAAA3Y,QAAP,WACEE,KAAKyY,aAAc,EACnB,IAAgB,UAAAzY,KAAKu+C,aAAL,eAAJ,KACRz+C,UAEJE,KAAKu+C,aAAanwF,OAAS,GAQtB,YAAAqwC,SAAP,SAAuC7tB,GAErC,OADAovB,KAAKu+C,aAAatlF,KAAK2X,GAChBA,GAQF,YAAA4tE,WAAP,SAAyC5tE,GACvC,IAAMjiB,EAAQqxC,KAAKu+C,aAAa3vF,QAAQgiB,IACzB,IAAXjiB,GACFqxC,KAAKu+C,aAAa1vF,OAAOF,EAAO,IAGtC,EAvCA,GA4CA,SAAgBkjD,EAAa4sC,GAC3B,IAAgB,UAAAA,EAAA,eAAJ,KACR3+C,UAEJ2+C,EAAYrwF,OAAS,EAhDD,EAAA2zC,aA4CtB,iBAUA,qCAA0C28C,GACxC,MAAO,CAAE5+C,QAAS,WAAM,OAAA+R,EAAa6sC,O,8ICnDvC,IAAMC,EAA+B,oBAAdzpF,UACjBC,EAAY,EAAW,OAASD,UAAUC,UAC1CJ,EAAW,EAAW,OAASG,UAAUH,SAElC,EAAAsmD,UAAYlmD,EAAUypF,SAAS,WAC/B,EAAAhhB,SAAW,iCAAiCppE,KAAKW,GAKjD,EAAA+rC,MAAQ,CAAC,YAAa,WAAY,SAAU,UAAU09C,SAAS7pF,GAC/D,EAAA8pF,OAAsB,SAAb9pF,EACT,EAAA+pF,SAAwB,WAAb/pF,EACX,EAAA2uD,UAAY,CAAC,UAAW,QAAS,QAAS,SAASk7B,SAAS7pF,GAC5D,EAAA0mD,QAAU1mD,EAASnG,QAAQ,UAAY,G,aCTpD,SAAgBmwF,EAAmCL,EAAU1yF,EAAe4E,EAAmB65B,GAK7F,QAL0E,IAAA75B,MAAA,QAAmB,IAAA65B,MAAci0D,EAAMtwF,QAK7GwC,GAAS8tF,EAAMtwF,OACjB,OAAOswF,EAET9tF,GAAS8tF,EAAMtwF,OAASwC,GAAS8tF,EAAMtwF,OAErCq8B,EADEA,GAAOi0D,EAAMtwF,OACTswF,EAAMtwF,QAELswF,EAAMtwF,OAASq8B,GAAOi0D,EAAMtwF,OAErC,IAAK,IAAID,EAAIyC,EAAOzC,EAAIs8B,IAAOt8B,EAC7BuwF,EAAMvwF,GAAKnC,EAEb,OAAO0yF,E,uFAzBT,gBAA2CA,EAAU1yF,EAAe4E,EAAgB65B,GAElF,OAAIi0D,EAAM/C,KACD+C,EAAM/C,KAAK3vF,EAAO4E,EAAO65B,GAE3Bs0D,EAAaL,EAAO1yF,EAAO4E,EAAO65B,IAG3C,iBAwBA,kBAA6Ct6B,EAAMiB,GACjD,IAAMyL,EAAS,IAAK1M,EAAEoI,YAAoBpI,EAAE/B,OAASgD,EAAEhD,QAGvD,OAFAyO,EAAO5F,IAAI9G,GACX0M,EAAO5F,IAAI7F,EAAGjB,EAAE/B,QACTyO,I,uGC3CT,aAGA,yCAA8CgsD,GAW5C,IAAM1b,EAAO0b,EAAczoB,OAAOC,MAAMpqC,IAAI4yD,EAAczoB,OAAOia,MAAQwO,EAAczoB,OAAOqN,EAAI,GAC5FuxC,EAAW7xC,aAAI,EAAJA,EAAMl3C,IAAI4yD,EAAcrd,KAAO,GAE1CmsC,EAAW9uB,EAAczoB,OAAOC,MAAMpqC,IAAI4yD,EAAczoB,OAAOia,MAAQwO,EAAczoB,OAAOqN,GAC9FkqC,GAAYqH,IACdrH,EAASxuB,UAAa61B,EAAS,EAAAC,wBAA0B,EAAAzlB,gBAAkBwlB,EAAS,EAAAC,wBAA0B,EAAA3sB,wB,qGChBlH,8BAsBS,KAAAhuB,GAAK,EACL,KAAAD,GAAK,EACL,KAAA01C,SAAW,IAAImF,EAwFxB,OA/GgB,EAAArsB,WAAd,SAAyB7mE,GACvB,MAAO,CACLA,IAAU,GAAuB,IACjCA,IAAU,EAAyB,IAC3B,IAARA,IAIU,EAAA6wF,aAAd,SAA2B7wF,GACzB,OAAmB,IAAXA,EAAM,KAAa,IAAmC,IAAXA,EAAM,KAAa,EAAoC,IAAXA,EAAM,IAGhG,YAAAmlB,MAAP,WACE,IAAMguE,EAAS,IAAIvsB,EAInB,OAHAusB,EAAO76C,GAAKtE,KAAKsE,GACjB66C,EAAO96C,GAAKrE,KAAKqE,GACjB86C,EAAOpF,SAAW/5C,KAAK+5C,SAAS5oE,QACzBguE,GASF,YAAAxtB,UAAP,WAA+B,OAAiB,SAAV3xB,KAAKsE,IACpC,YAAA6tB,OAAP,WAA+B,OAAiB,UAAVnyB,KAAKsE,IACpC,YAAAy1B,YAAP,WAA+B,OAAiB,UAAV/5B,KAAKsE,IACpC,YAAA86C,QAAP,WAA+B,OAAiB,UAAVp/C,KAAKsE,IACpC,YAAAw1B,YAAP,WAA+B,OAAiB,WAAV95B,KAAKsE,IACpC,YAAAkuB,SAAP,WAA+B,OAAiB,SAAVxyB,KAAKqE,IACpC,YAAAkuB,MAAP,WAA+B,OAAiB,UAAVvyB,KAAKqE,IAGpC,YAAAovB,eAAP,WAAkC,OAAiB,SAAVzzB,KAAKsE,IACvC,YAAAsvB,eAAP,WAAkC,OAAiB,SAAV5zB,KAAKqE,IACvC,YAAAmtB,QAAP,WAAkC,OAA0C,WAAxB,SAAVxxB,KAAKsE,KACxC,YAAAmtB,QAAP,WAAkC,OAA0C,WAAxB,SAAVzxB,KAAKqE,KACxC,YAAAg7C,YAAP,WAAkC,OAA0C,WAAxB,SAAVr/C,KAAKsE,KAAqF,WAAxB,SAAVtE,KAAKsE,KAChG,YAAAs1B,YAAP,WAAkC,OAA0C,WAAxB,SAAV55B,KAAKqE,KAAqF,WAAxB,SAAVrE,KAAKqE,KAChG,YAAA0tB,YAAP,WAAkC,OAA0C,IAAxB,SAAV/xB,KAAKsE,KACxC,YAAAstB,YAAP,WAAkC,OAA0C,IAAxB,SAAV5xB,KAAKqE,KACxC,YAAAi7C,mBAAP,WAAuC,OAAmB,IAAZt/C,KAAKsE,IAAwB,IAAZtE,KAAKqE,IAG7D,YAAA2tB,WAAP,WACE,OAAkB,SAAVhyB,KAAKsE,IACX,KAAK,SACL,KAAK,SAAqB,OAAiB,IAAVtE,KAAKsE,GACtC,KAAK,SAAqB,OAAiB,SAAVtE,KAAKsE,GACtC,QAA0B,OAAQ,IAG/B,YAAAwtB,WAAP,WACE,OAAkB,SAAV9xB,KAAKqE,IACX,KAAK,SACL,KAAK,SAAqB,OAAiB,IAAVrE,KAAKqE,GACtC,KAAK,SAAqB,OAAiB,SAAVrE,KAAKqE,GACtC,QAA0B,OAAQ,IAK/B,YAAAk7C,iBAAP,WACE,OAAiB,UAAVv/C,KAAKqE,IAEP,YAAAm5C,eAAP,WACMx9C,KAAK+5C,SAASld,UAChB78B,KAAKqE,KAAM,UAEXrE,KAAKqE,IAAM,WAGR,YAAAm7C,kBAAP,WACE,GAAe,UAAVx/C,KAAKqE,KAA+BrE,KAAK+5C,SAASsD,eACrD,OAAuC,SAA/Br9C,KAAK+5C,SAASsD,gBACpB,KAAK,SACL,KAAK,SAAqB,OAAsC,IAA/Br9C,KAAK+5C,SAASsD,eAC/C,KAAK,SAAqB,OAAsC,SAA/Br9C,KAAK+5C,SAASsD,eAC/C,QAA0B,OAAOr9C,KAAKgyB,aAG1C,OAAOhyB,KAAKgyB,cAEP,YAAAytB,sBAAP,WACE,OAAkB,UAAVz/C,KAAKqE,KAA+BrE,KAAK+5C,SAASsD,eACvB,SAA/Br9C,KAAK+5C,SAASsD,eACdr9C,KAAKyzB,kBAEJ,YAAAisB,oBAAP,WACE,OAAkB,UAAV1/C,KAAKqE,KAA+BrE,KAAK+5C,SAASsD,eACE,WAAxB,SAA/Br9C,KAAK+5C,SAASsD,gBACfr9C,KAAKwxB,WAEJ,YAAAmuB,wBAAP,WACE,OAAkB,UAAV3/C,KAAKqE,KAA+BrE,KAAK+5C,SAASsD,eACE,WAAxB,SAA/Br9C,KAAK+5C,SAASsD,iBAC8C,WAAxB,SAA/Br9C,KAAK+5C,SAASsD,gBACpBr9C,KAAKq/C,eAEJ,YAAAO,wBAAP,WACE,OAAkB,UAAV5/C,KAAKqE,KAA+BrE,KAAK+5C,SAASsD,eACE,IAAxB,SAA/Br9C,KAAK+5C,SAASsD,gBACfr9C,KAAK+xB,eAEJ,YAAA8tB,kBAAP,WACE,OAAiB,UAAV7/C,KAAKsE,GACG,UAAVtE,KAAKqE,GAA4BrE,KAAK+5C,SAASwD,eAAiB,EACjE,GAER,EAhHA,GAAa,EAAA3qB,gBAuHb,iBACE,WAES2qB,EAEAF,QAFA,IAAAE,MAAA,QAEA,IAAAF,OAA0B,GAF1B,KAAAE,iBAEA,KAAAF,iBAcX,OAXS,YAAAlsE,MAAP,WACE,OAAO,IAAI+tE,EAAcl/C,KAAKu9C,eAAgBv9C,KAAKq9C,iBAO9C,YAAAxgB,QAAP,WACE,OAA+B,IAAxB78B,KAAKu9C,gBAEhB,EAnBA,GAAa,EAAA2B,iB,yHC1Hb,cAGA,UACA,SACA,SACA,UACA,UAEA,UACA,UAEa,EAAAY,gBAAkB,WAS/B,iBAoBE,WACUC,EACA3sC,EACAnJ,GAFA,KAAA81C,iBACA,KAAA3sC,kBACA,KAAAnJ,iBArBH,KAAAzI,MAAgB,EAChB,KAAA6Y,MAAgB,EAChB,KAAA5M,EAAY,EACZ,KAAAD,EAAY,EAKZ,KAAAkwC,OAAiB,EACjB,KAAAD,OAAiB,EACjB,KAAAE,iBAAmB,EAAAv5B,kBAAkBjzC,QACrC,KAAAysE,aAAqC,EAAAxB,gBACrC,KAAAp6B,QAAoB,GACnB,KAAAg+B,UAAuB,EAAAtzB,SAASuzB,aAAa,CAAC,EAAG,EAAAC,eAAgB,EAAA9F,gBAAiB,EAAA5gB,iBAClF,KAAA2mB,gBAA6B,EAAAzzB,SAASuzB,aAAa,CAAC,EAAG,EAAA7tB,qBAAsB,EAAAguB,sBAAuB,EAAA9tB,uBAS1GtyB,KAAKqgD,MAAQrgD,KAAKiK,eAAeuB,KACjCxL,KAAKsgD,MAAQtgD,KAAKiK,eAAetM,KACjCqC,KAAKK,MAAQ,IAAI,EAAAmsC,aAA0BxsC,KAAKugD,wBAAwBvgD,KAAKsgD,QAC7EtgD,KAAKomB,UAAY,EACjBpmB,KAAK+tC,aAAe/tC,KAAKsgD,MAAQ,EACjCtgD,KAAKqZ,gBAkjBT,OA/iBS,YAAAoT,YAAP,SAAmBvpC,GAUjB,OATIA,GACF8c,KAAKggD,UAAU17C,GAAKphB,EAAKohB,GACzBtE,KAAKggD,UAAU37C,GAAKnhB,EAAKmhB,GACzBrE,KAAKggD,UAAUjG,SAAW72D,EAAK62D,WAE/B/5C,KAAKggD,UAAU17C,GAAK,EACpBtE,KAAKggD,UAAU37C,GAAK,EACpBrE,KAAKggD,UAAUjG,SAAW,IAAI,EAAAmF,eAEzBl/C,KAAKggD,WAGP,YAAAQ,kBAAP,SAAyBt9D,GAUvB,OATIA,GACF8c,KAAKmgD,gBAAgB77C,GAAKphB,EAAKohB,GAC/BtE,KAAKmgD,gBAAgB97C,GAAKnhB,EAAKmhB,GAC/BrE,KAAKmgD,gBAAgBpG,SAAW72D,EAAK62D,WAErC/5C,KAAKmgD,gBAAgB77C,GAAK,EAC1BtE,KAAKmgD,gBAAgB97C,GAAK,EAC1BrE,KAAKmgD,gBAAgBpG,SAAW,IAAI,EAAAmF,eAE/Bl/C,KAAKmgD,iBAGP,YAAAh8B,aAAP,SAAoBjhC,EAAsBimC,GACxC,OAAO,IAAI,EAAAs3B,WAAWzgD,KAAKiK,eAAeuB,KAAMxL,KAAKysB,YAAYvpC,GAAOimC,IAG1E,sBAAW,4BAAa,C,IAAxB,WACE,OAAOnpB,KAAK+/C,gBAAkB//C,KAAKK,MAAMqgD,UAAY1gD,KAAKsgD,O,gCAG5D,sBAAW,iCAAkB,C,IAA7B,WACE,IACMK,EADY3gD,KAAKqa,MAAQra,KAAKyN,EACNzN,KAAKwB,MACnC,OAAQm/C,GAAa,GAAKA,EAAY3gD,KAAKsgD,O,gCAQrC,YAAAC,wBAAR,SAAgC5iD,GAC9B,IAAKqC,KAAK+/C,eACR,OAAOpiD,EAGT,IAAMijD,EAAsBjjD,EAAOqC,KAAKoT,gBAAgBj7C,QAAQ0oF,WAEhE,OAAOD,EAAsB,EAAAd,gBAAkB,EAAAA,gBAAkBc,GAM5D,YAAAE,iBAAP,SAAwBC,GACtB,GAA0B,IAAtB/gD,KAAKK,MAAMjyC,OAAc,MACVzC,IAAbo1F,IACFA,EAAW,EAAA38B,mBAGb,IADA,IAAIj2D,EAAI6xC,KAAKsgD,MACNnyF,KACL6xC,KAAKK,MAAMpnC,KAAK+mC,KAAKmkB,aAAa48B,MAQjC,YAAA3pF,MAAP,WACE4oC,KAAKwB,MAAQ,EACbxB,KAAKqa,MAAQ,EACbra,KAAKyN,EAAI,EACTzN,KAAKwN,EAAI,EACTxN,KAAKK,MAAQ,IAAI,EAAAmsC,aAA0BxsC,KAAKugD,wBAAwBvgD,KAAKsgD,QAC7EtgD,KAAKomB,UAAY,EACjBpmB,KAAK+tC,aAAe/tC,KAAKsgD,MAAQ,EACjCtgD,KAAKqZ,iBAQA,YAAAkE,OAAP,SAAcyjC,EAAiBC,GAE7B,IAAMC,EAAWlhD,KAAKysB,YAAY,EAAArI,mBAI5B0nB,EAAe9rC,KAAKugD,wBAAwBU,GAOlD,GANInV,EAAe9rC,KAAKK,MAAMqgD,YAC5B1gD,KAAKK,MAAMqgD,UAAY5U,GAKrB9rC,KAAKK,MAAMjyC,OAAS,EAAG,CAEzB,GAAI4xC,KAAKqgD,MAAQW,EACf,IAAK,IAAI7yF,EAAI,EAAGA,EAAI6xC,KAAKK,MAAMjyC,OAAQD,IACrC6xC,KAAKK,MAAMpqC,IAAI9H,GAAIovD,OAAOyjC,EAASE,GAKvC,IAAIC,EAAS,EACb,GAAInhD,KAAKsgD,MAAQW,EACf,IAAK,IAAIxzC,EAAIzN,KAAKsgD,MAAO7yC,EAAIwzC,EAASxzC,IAChCzN,KAAKK,MAAMjyC,OAAS6yF,EAAUjhD,KAAKqa,QACjCra,KAAKoT,gBAAgBj7C,QAAQ22E,YAG/B9uC,KAAKK,MAAMpnC,KAAK,IAAI,EAAAwnF,WAAWO,EAASE,IAEpClhD,KAAKqa,MAAQ,GAAKra,KAAKK,MAAMjyC,QAAU4xC,KAAKqa,MAAQra,KAAKyN,EAAI0zC,EAAS,GAGxEnhD,KAAKqa,QACL8mC,IACInhD,KAAKwB,MAAQ,GAEfxB,KAAKwB,SAKPxB,KAAKK,MAAMpnC,KAAK,IAAI,EAAAwnF,WAAWO,EAASE,UAMhD,IAASzzC,EAAIzN,KAAKsgD,MAAO7yC,EAAIwzC,EAASxzC,IAChCzN,KAAKK,MAAMjyC,OAAS6yF,EAAUjhD,KAAKqa,QACjCra,KAAKK,MAAMjyC,OAAS4xC,KAAKqa,MAAQra,KAAKyN,EAAI,EAE5CzN,KAAKK,MAAMlmC,OAGX6lC,KAAKqa,QACLra,KAAKwB,UAQb,GAAIsqC,EAAe9rC,KAAKK,MAAMqgD,UAAW,CAEvC,IAAMU,EAAephD,KAAKK,MAAMjyC,OAAS09E,EACrCsV,EAAe,IACjBphD,KAAKK,MAAMgsC,UAAU+U,GACrBphD,KAAKqa,MAAQrtD,KAAK8R,IAAIkhC,KAAKqa,MAAQ+mC,EAAc,GACjDphD,KAAKwB,MAAQx0C,KAAK8R,IAAIkhC,KAAKwB,MAAQ4/C,EAAc,GACjDphD,KAAK09C,OAAS1wF,KAAK8R,IAAIkhC,KAAK09C,OAAS0D,EAAc,IAErDphD,KAAKK,MAAMqgD,UAAY5U,EAIzB9rC,KAAKwN,EAAIxgD,KAAKk5C,IAAIlG,KAAKwN,EAAGwzC,EAAU,GACpChhD,KAAKyN,EAAIzgD,KAAKk5C,IAAIlG,KAAKyN,EAAGwzC,EAAU,GAChCE,IACFnhD,KAAKyN,GAAK0zC,GAEZnhD,KAAKy9C,OAASzwF,KAAKk5C,IAAIlG,KAAKy9C,OAAQuD,EAAU,GAE9ChhD,KAAKomB,UAAY,EAKnB,GAFApmB,KAAK+tC,aAAekT,EAAU,EAE1BjhD,KAAKqhD,mBACPrhD,KAAKrE,QAAQqlD,EAASC,GAGlBjhD,KAAKqgD,MAAQW,GACf,IAAS7yF,EAAI,EAAGA,EAAI6xC,KAAKK,MAAMjyC,OAAQD,IACrC6xC,KAAKK,MAAMpqC,IAAI9H,GAAIovD,OAAOyjC,EAASE,GAKzClhD,KAAKqgD,MAAQW,EACbhhD,KAAKsgD,MAAQW,GAGf,sBAAY,+BAAgB,C,IAA5B,WACE,OAAOjhD,KAAK+/C,iBAAmB//C,KAAKoT,gBAAgBj7C,QAAQ22E,a,gCAGtD,YAAAnzC,QAAR,SAAgBqlD,EAAiBC,GAC3BjhD,KAAKqgD,QAAUW,IAKfA,EAAUhhD,KAAKqgD,MACjBrgD,KAAKshD,cAAcN,EAASC,GAE5BjhD,KAAKuhD,eAAeP,EAASC,KAIzB,YAAAK,cAAR,SAAsBN,EAAiBC,GACrC,IAAMO,EAAqB,EAAAC,6BAA6BzhD,KAAKK,MAAOL,KAAKqgD,MAAOW,EAAShhD,KAAKqa,MAAQra,KAAKyN,EAAGzN,KAAKysB,YAAY,EAAArI,oBAC/H,GAAIo9B,EAASpzF,OAAS,EAAG,CACvB,IAAMszF,EAAkB,EAAAC,4BAA4B3hD,KAAKK,MAAOmhD,GAChE,EAAAI,2BAA2B5hD,KAAKK,MAAOqhD,EAAgBG,QACvD7hD,KAAK8hD,4BAA4Bd,EAASC,EAASS,EAAgBK,gBAI/D,YAAAD,4BAAR,SAAoCd,EAAiBC,EAAiBc,GAIpE,IAHA,IAAMb,EAAWlhD,KAAKysB,YAAY,EAAArI,mBAE9B49B,EAAsBD,EACnBC,KAAwB,GACV,IAAfhiD,KAAKqa,OACHra,KAAKyN,EAAI,GACXzN,KAAKyN,IAEHzN,KAAKK,MAAMjyC,OAAS6yF,GAEtBjhD,KAAKK,MAAMpnC,KAAK,IAAI,EAAAwnF,WAAWO,EAASE,MAGtClhD,KAAKwB,QAAUxB,KAAKqa,OACtBra,KAAKwB,QAEPxB,KAAKqa,SAGTra,KAAK09C,OAAS1wF,KAAK8R,IAAIkhC,KAAK09C,OAASqE,EAAc,IAG7C,YAAAR,eAAR,SAAuBP,EAAiBC,GAOtC,IANA,IAAMC,EAAWlhD,KAAKysB,YAAY,EAAArI,mBAG5B69B,EAAW,GACbC,EAAgB,EAEXz0C,EAAIzN,KAAKK,MAAMjyC,OAAS,EAAGq/C,GAAK,EAAGA,IAAK,CAE/C,IAAIkqC,EAAW33C,KAAKK,MAAMpqC,IAAIw3C,GAC9B,MAAKkqC,IAAaA,EAASxuB,WAAawuB,EAASnU,oBAAsBwd,GAAvE,CAMA,IADA,IAAMmB,EAA6B,CAACxK,GAC7BA,EAASxuB,WAAa1b,EAAI,GAC/BkqC,EAAW33C,KAAKK,MAAMpqC,MAAMw3C,GAC5B00C,EAAa9hE,QAAQs3D,GAKvB,IAAMyK,EAAYpiD,KAAKqa,MAAQra,KAAKyN,EACpC,KAAI20C,GAAa30C,GAAK20C,EAAY30C,EAAI00C,EAAa/zF,QAAnD,CAIA,IAGIi0F,EAHEC,EAAiBH,EAAaA,EAAa/zF,OAAS,GAAGo1E,mBACvD+e,EAAkB,EAAAC,+BAA+BL,EAAcniD,KAAKqgD,MAAOW,GAC3EyB,EAAaF,EAAgBn0F,OAAS+zF,EAAa/zF,OAIvDi0F,EAFiB,IAAfriD,KAAKqa,OAAera,KAAKyN,IAAMzN,KAAKK,MAAMjyC,OAAS,EAEtCpB,KAAK8R,IAAI,EAAGkhC,KAAKyN,EAAIzN,KAAKK,MAAMqgD,UAAY+B,GAE5Cz1F,KAAK8R,IAAI,EAAGkhC,KAAKK,MAAMjyC,OAAS4xC,KAAKK,MAAMqgD,UAAY+B,GAKxE,IADA,IAAMC,EAAyB,GACtBv0F,EAAI,EAAGA,EAAIs0F,EAAYt0F,IAAK,CACnC,IAAMw0F,EAAU3iD,KAAKmkB,aAAa,EAAAC,mBAAmB,GACrDs+B,EAASzpF,KAAK0pF,GAEZD,EAASt0F,OAAS,IACpB6zF,EAAShpF,KAAK,CAGZrI,MAAO68C,EAAI00C,EAAa/zF,OAAS8zF,EACjCQ,SAAQ,IAEVR,GAAiBQ,EAASt0F,QAE5B+zF,EAAalpF,KAAI,MAAjBkpF,EAAqBO,GAGrB,IAAIE,EAAgBL,EAAgBn0F,OAAS,EACzCy0F,EAAUN,EAAgBK,GACd,IAAZC,IAEFA,EAAUN,IADVK,IAKF,IAFA,IAAIE,EAAeX,EAAa/zF,OAASq0F,EAAa,EAClDM,EAAST,EACNQ,GAAgB,GAAG,CACxB,IAAME,EAAch2F,KAAKk5C,IAAI68C,EAAQF,GAQrC,GAPAV,EAAaS,GAAeK,cAAcd,EAAaW,GAAeC,EAASC,EAAaH,EAAUG,EAAaA,GAAa,GAEhH,IADhBH,GAAWG,KAGTH,EAAUN,IADVK,IAIa,IADfG,GAAUC,GACQ,CAChBF,IACA,IAAMI,EAAoBl2F,KAAK8R,IAAIgkF,EAAc,GACjDC,EAAS,EAAAI,4BAA4BhB,EAAce,EAAmBljD,KAAKqgD,QAK/E,IAASlyF,EAAI,EAAGA,EAAIg0F,EAAa/zF,OAAQD,IACnCo0F,EAAgBp0F,GAAK6yF,GACvBmB,EAAah0F,GAAGi1F,QAAQb,EAAgBp0F,GAAI+yF,GAMhD,IADA,IAAIc,EAAsBS,EAAaJ,EAChCL,KAAwB,GACV,IAAfhiD,KAAKqa,MACHra,KAAKyN,EAAIwzC,EAAU,GACrBjhD,KAAKyN,IACLzN,KAAKK,MAAMlmC,QAEX6lC,KAAKqa,QACLra,KAAKwB,SAIHxB,KAAKqa,MAAQrtD,KAAKk5C,IAAIlG,KAAKK,MAAMqgD,UAAW1gD,KAAKK,MAAMjyC,OAAS8zF,GAAiBjB,IAC/EjhD,KAAKqa,QAAUra,KAAKwB,OACtBxB,KAAKwB,QAEPxB,KAAKqa,SAIXra,KAAK09C,OAAS1wF,KAAKk5C,IAAIlG,KAAK09C,OAAS+E,EAAYziD,KAAKqa,MAAQ4mC,EAAU,KAM1E,GAAIgB,EAAS7zF,OAAS,EAAG,CAGvB,IAAMi1F,EAA+B,GAG/BC,EAA8B,GACpC,IAASn1F,EAAI,EAAGA,EAAI6xC,KAAKK,MAAMjyC,OAAQD,IACrCm1F,EAAcrqF,KAAK+mC,KAAKK,MAAMpqC,IAAI9H,IAEpC,IAAMo1F,EAAsBvjD,KAAKK,MAAMjyC,OAEnCo1F,EAAoBD,EAAsB,EAC1CE,EAAoB,EACpBC,EAAezB,EAASwB,GAC5BzjD,KAAKK,MAAMjyC,OAASpB,KAAKk5C,IAAIlG,KAAKK,MAAMqgD,UAAW1gD,KAAKK,MAAMjyC,OAAS8zF,GACvE,IAAIyB,EAAqB,EACzB,IAASx1F,EAAInB,KAAKk5C,IAAIlG,KAAKK,MAAMqgD,UAAY,EAAG6C,EAAsBrB,EAAgB,GAAI/zF,GAAK,EAAGA,IAChG,GAAIu1F,GAAgBA,EAAa9yF,MAAQ4yF,EAAoBG,EAAoB,CAE/E,IAAK,IAAIC,EAAQF,EAAahB,SAASt0F,OAAS,EAAGw1F,GAAS,EAAGA,IAC7D5jD,KAAKK,MAAMppC,IAAI9I,IAAKu1F,EAAahB,SAASkB,IAE5Cz1F,IAGAk1F,EAAapqF,KAAK,CAChBtK,MAAO60F,EAAoB,EAC3BzlC,OAAQ2lC,EAAahB,SAASt0F,SAGhCu1F,GAAsBD,EAAahB,SAASt0F,OAC5Cs1F,EAAezB,IAAWwB,QAE1BzjD,KAAKK,MAAMppC,IAAI9I,EAAGm1F,EAAcE,MAKpC,IAAIK,EAAqB,EACzB,IAAS11F,EAAIk1F,EAAaj1F,OAAS,EAAGD,GAAK,EAAGA,IAC5Ck1F,EAAal1F,GAAGQ,OAASk1F,EACzB7jD,KAAKK,MAAMqrC,gBAAgBr9B,KAAKg1C,EAAal1F,IAC7C01F,GAAsBR,EAAal1F,GAAG4vD,OAExC,IAAMqjC,EAAep0F,KAAK8R,IAAI,EAAGykF,EAAsBrB,EAAgBliD,KAAKK,MAAMqgD,WAC9EU,EAAe,GACjBphD,KAAKK,MAAMsrC,cAAct9B,KAAK+yC,KAoB7B,YAAAl0C,yBAAP,SAAgC42C,EAAmBrhF,EAAqB6qD,GACtE,SADsE,IAAAA,OAAA,GAC/D7qD,GAAa,CAClB,IAAM0qC,EAAOnN,KAAKK,MAAMpqC,IAAI6tF,GAC5B,IAAK32C,EACH,MAAO,EAAE,GAAI,GAGf,IADA,IAAM,EAAS,EAAcA,EAAKq2B,mBAAqBr2B,EAAK/+C,OACnDD,EAAI,EAAGA,EAAI,IAAUA,EAM5B,GALIg/C,EAAKl3C,IAAI9H,GAAG,EAAA41F,yBAGdthF,GAAe0qC,EAAKl3C,IAAI9H,GAAG,EAAA61F,sBAAsB51F,QAAU,GAEzDqU,EAAc,EAChB,MAAO,CAACqhF,EAAW31F,GAGvB21F,IAEF,MAAO,CAACA,EAAW,IAad,YAAAviD,4BAAP,SAAmCuiD,EAAmBx2B,EAAoB/D,EAAsBC,QAAtB,IAAAD,MAAA,GACxE,IAAMpc,EAAOnN,KAAKK,MAAMpqC,IAAI6tF,GAC5B,OAAK32C,EAGEA,EAAKkgB,kBAAkBC,EAAW/D,EAAUC,GAF1C,IAKJ,YAAA2gB,uBAAP,SAA8B18B,GAI5B,IAHA,IAAI7B,EAAQ6B,EACRz0C,EAAOy0C,EAEJ7B,EAAQ,GAAK5L,KAAKK,MAAMpqC,IAAI21C,GAAQud,WACzCvd,IAGF,KAAO5yC,EAAO,EAAIgnC,KAAKK,MAAMjyC,QAAU4xC,KAAKK,MAAMpqC,IAAI+C,EAAO,GAAImwD,WAC/DnwD,IAEF,MAAO,CAAE4yC,MAAK,EAAE5yC,KAAI,IAOf,YAAAqgD,cAAP,SAAqBlrD,GAUnB,IATIA,QACG6xC,KAAKq7C,KAAKltF,KACbA,EAAI6xC,KAAKs7C,SAASntF,KAGpB6xC,KAAKq7C,KAAO,GACZltF,EAAI,GAGCA,EAAI6xC,KAAKqgD,MAAOlyF,GAAK6xC,KAAKoT,gBAAgBj7C,QAAQ8rF,aACvDjkD,KAAKq7C,KAAKltF,IAAK,GAQZ,YAAAmtF,SAAP,SAAgB9tC,GAId,IAHIA,UACFA,EAAIxN,KAAKwN,IAEHxN,KAAKq7C,OAAO7tC,IAAMA,EAAI,IAC9B,OAAOA,GAAKxN,KAAKqgD,MAAQrgD,KAAKqgD,MAAQ,EAAI7yC,EAAI,EAAI,EAAIA,GAOjD,YAAAqtC,SAAP,SAAgBrtC,GAId,IAHIA,UACFA,EAAIxN,KAAKwN,IAEHxN,KAAKq7C,OAAO7tC,IAAMA,EAAIxN,KAAKqgD,QACnC,OAAO7yC,GAAKxN,KAAKqgD,MAAQrgD,KAAKqgD,MAAQ,EAAI7yC,EAAI,EAAI,EAAIA,GAGjD,YAAAyU,UAAP,SAAiBxU,GAAjB,WACQy2C,EAAS,IAAI,EAAAC,OAAO12C,GA0B1B,OAzBAzN,KAAKgiB,QAAQ/oD,KAAKirF,GAClBA,EAAOzlD,SAASuB,KAAKK,MAAM0hC,QAAO,SAAAhkB,GAChCmmC,EAAO/2C,MAAQ4Q,EAEXmmC,EAAO/2C,KAAO,GAChB+2C,EAAOpkD,cAGXokD,EAAOzlD,SAASuB,KAAKK,MAAM+jD,UAAS,SAAAp7E,GAC9Bk7E,EAAO/2C,MAAQnkC,EAAMra,QACvBu1F,EAAO/2C,MAAQnkC,EAAM+0C,YAGzBmmC,EAAOzlD,SAASuB,KAAKK,MAAMgkD,UAAS,SAAAr7E,GAE9Bk7E,EAAO/2C,MAAQnkC,EAAMra,OAASu1F,EAAO/2C,KAAOnkC,EAAMra,MAAQqa,EAAM+0C,QAClEmmC,EAAOpkD,UAILokD,EAAO/2C,KAAOnkC,EAAMra,QACtBu1F,EAAO/2C,MAAQnkC,EAAM+0C,YAGzBmmC,EAAOzlD,SAASylD,EAAOI,WAAU,WAAM,SAAKC,cAAcL,OACnDA,GAGD,YAAAK,cAAR,SAAsBL,GACpBlkD,KAAKgiB,QAAQnzD,OAAOmxC,KAAKgiB,QAAQpzD,QAAQs1F,GAAS,IAG7C,YAAAn4E,SAAP,SAAgBuhD,EAAoBoW,EAAqBC,EAAmB6gB,EAAwBC,GAClG,OAAO,IAAIC,EAAqB1kD,KAAMstB,EAAWoW,EAAYC,EAAU6gB,EAAeC,IAE1F,EAhlBA,GAAa,EAAAE,SA8lBb,iBAGE,WACUn5B,EACAo5B,EACA/Y,EACAgZ,EACAC,EACAC,QAHA,IAAAlZ,MAAA,QACA,IAAAgZ,MAAoBr5B,EAAQnrB,MAAMjyC,aAClC,IAAA02F,MAAA,QACA,IAAAC,MAAA,GALA,KAAAv5B,UACA,KAAAo5B,aACA,KAAA/Y,cACA,KAAAgZ,YACA,KAAAC,iBACA,KAAAC,eAEJ/kD,KAAK6rC,YAAc,IACrB7rC,KAAK6rC,YAAc,GAEjB7rC,KAAK6kD,UAAY7kD,KAAKwrB,QAAQnrB,MAAMjyC,SACtC4xC,KAAK6kD,UAAY7kD,KAAKwrB,QAAQnrB,MAAMjyC,QAEtC4xC,KAAKglD,SAAWhlD,KAAK6rC,YA0BzB,OAvBS,YAAApgC,QAAP,WACE,OAAOzL,KAAKglD,SAAWhlD,KAAK6kD,WAGvB,YAAA74E,KAAP,WACE,IAAM2/B,EAAQ3L,KAAKwrB,QAAQ2e,uBAAuBnqC,KAAKglD,UAEnDr5C,EAAMC,MAAQ5L,KAAK6rC,YAAc7rC,KAAK8kD,iBACxCn5C,EAAMC,MAAQ5L,KAAK6rC,YAAc7rC,KAAK8kD,gBAEpCn5C,EAAM3yC,KAAOgnC,KAAK6kD,UAAY7kD,KAAK+kD,eACrCp5C,EAAM3yC,KAAOgnC,KAAK6kD,UAAY7kD,KAAK+kD,cAGrCp5C,EAAMC,MAAQ5+C,KAAK8R,IAAI6sC,EAAMC,MAAO,GACpCD,EAAM3yC,KAAOhM,KAAKk5C,IAAIyF,EAAM3yC,KAAMgnC,KAAKwrB,QAAQnrB,MAAMjyC,QAErD,IADA,IAAIy9C,EAAU,GACL19C,EAAIw9C,EAAMC,MAAOz9C,GAAKw9C,EAAM3yC,OAAQ7K,EAC3C09C,GAAW7L,KAAKwrB,QAAQjqB,4BAA4BpzC,EAAG6xC,KAAK4kD,YAG9D,OADA5kD,KAAKglD,SAAWr5C,EAAM3yC,KAAO,EACtB,CAAE2yC,MAAK,EAAEE,QAAO,IAE3B,EA3CA,GAAa,EAAA64C,wB,wGClnBb,aACA,SACA,SACA,UA4Ba,EAAAtgC,kBAAoB74D,OAAOC,OAAO,IAAI,EAAAonE,eAiBnD,iBAME,WAAYpnB,EAAcy5C,EAAiC97B,QAAA,IAAAA,OAAA,QAAAA,YAJjD,KAAA+7B,UAAuC,GACvC,KAAAC,eAAmD,GAI3DnlD,KAAK1mB,MAAQ,IAAI03D,YAxCH,EAwCexlC,GAE7B,IADA,IAAM2hB,EAAO83B,GAAgB,EAAAv4B,SAASuzB,aAAa,CAAC,EAAG,EAAAC,eAAgB,EAAA9F,gBAAiB,EAAA5gB,iBAC/ErrE,EAAI,EAAGA,EAAIq9C,IAAQr9C,EAC1B6xC,KAAKojD,QAAQj1F,EAAGg/D,GAElBntB,KAAK5xC,OAASo9C,EAsXlB,OA/WS,YAAAv1C,IAAP,SAAWtH,GACT,IAAMk9C,EAAU7L,KAAK1mB,MArDP,EAqDa3qB,EAAoB,GACzCy2F,EAAe,QAAVv5C,EACX,MAAO,CACL7L,KAAK1mB,MAxDO,EAwDD3qB,EAAoB,GACpB,QAAVk9C,EACG7L,KAAKklD,UAAUv2F,GACf,EAAO,EAAAsrF,oBAAoBmL,GAAM,GACrCv5C,GAAW,GACA,QAAVA,EACG7L,KAAKklD,UAAUv2F,GAAOkF,WAAWmsC,KAAKklD,UAAUv2F,GAAOP,OAAS,GAChEg3F,IAQD,YAAAnuF,IAAP,SAAWtI,EAAe3C,GACxBg0C,KAAK1mB,MAxES,EAwEH3qB,EAAoB,GAAW3C,EAAM,EAAAq5F,sBAC5Cr5F,EAAM,EAAAg4F,sBAAsB51F,OAAS,GACvC4xC,KAAKklD,UAAUv2F,GAAS3C,EAAM,GAC9Bg0C,KAAK1mB,MA3EO,EA2ED3qB,EAAoB,GAAwB,QAARA,EAAoC3C,EAAM,EAAA+3F,wBAA0B,IAEnH/jD,KAAK1mB,MA7EO,EA6ED3qB,EAAoB,GAAgB3C,EAAM,EAAAg4F,sBAAsBnwF,WAAW,GAAM7H,EAAM,EAAA+3F,wBAA0B,IAQzH,YAAAtpC,SAAP,SAAgB9rD,GACd,OAAOqxC,KAAK1mB,MAtFE,EAsFI3qB,EAAoB,IAAiB,IAIlD,YAAA45E,SAAP,SAAgB55E,GACd,OAAsD,SAA/CqxC,KAAK1mB,MA3FE,EA2FI3qB,EAAoB,IAIjC,YAAAy+C,MAAP,SAAaz+C,GACX,OAAOqxC,KAAK1mB,MAhGE,EAgGI3qB,EAAoB,IAIjC,YAAA40E,MAAP,SAAa50E,GACX,OAAOqxC,KAAK1mB,MArGE,EAqGI3qB,EAAoB,IAQjC,YAAA4rF,WAAP,SAAkB5rF,GAChB,OAAsD,QAA/CqxC,KAAK1mB,MA9GE,EA8GI3qB,EAAoB,IAQjC,YAAA4qE,aAAP,SAAoB5qE,GAClB,IAAMk9C,EAAU7L,KAAK1mB,MAvHP,EAuHa3qB,EAAoB,GAC/C,OAAc,QAAVk9C,EACK7L,KAAKklD,UAAUv2F,GAAOkF,WAAWmsC,KAAKklD,UAAUv2F,GAAOP,OAAS,GAExD,QAAVy9C,GAIF,YAAA62B,WAAP,SAAkB/zE,GAChB,OAAsD,QAA/CqxC,KAAK1mB,MAhIE,EAgII3qB,EAAoB,IAIjC,YAAAu1E,UAAP,SAAiBv1E,GACf,IAAMk9C,EAAU7L,KAAK1mB,MArIP,EAqIa3qB,EAAoB,GAC/C,OAAc,QAAVk9C,EACK7L,KAAKklD,UAAUv2F,GAEV,QAAVk9C,EACK,EAAAouC,oBAA8B,QAAVpuC,GAGtB,IAOF,YAAAuhB,SAAP,SAAgBz+D,EAAew+D,GAC7B,IAAMuW,EArJQ,EAqJK/0E,EAUnB,OATAw+D,EAAKthB,QAAU7L,KAAK1mB,MAAMoqD,EAAa,GACvCvW,EAAK7oB,GAAKtE,KAAK1mB,MAAMoqD,EAAa,GAClCvW,EAAK9oB,GAAKrE,KAAK1mB,MAAMoqD,EAAa,GACf,QAAfvW,EAAKthB,UACPshB,EAAKsV,aAAeziC,KAAKklD,UAAUv2F,IAEvB,UAAVw+D,EAAK9oB,KACP8oB,EAAK4sB,SAAW/5C,KAAKmlD,eAAex2F,IAE/Bw+D,GAMF,YAAAi2B,QAAP,SAAez0F,EAAew+D,GACT,QAAfA,EAAKthB,UACP7L,KAAKklD,UAAUv2F,GAASw+D,EAAKsV,cAEjB,UAAVtV,EAAK9oB,KACPrE,KAAKmlD,eAAex2F,GAASw+D,EAAK4sB,UAEpC/5C,KAAK1mB,MA5KS,EA4KH3qB,EAAoB,GAAgBw+D,EAAKthB,QACpD7L,KAAK1mB,MA7KS,EA6KH3qB,EAAoB,GAAWw+D,EAAK7oB,GAC/CtE,KAAK1mB,MA9KS,EA8KH3qB,EAAoB,GAAWw+D,EAAK9oB,IAQ1C,YAAAy1C,qBAAP,SAA4BnrF,EAAe22F,EAAmBxiD,EAAewB,EAAYD,EAAYkhD,GAC1F,UAALlhD,IACFrE,KAAKmlD,eAAex2F,GAAS42F,GAE/BvlD,KAAK1mB,MA1LS,EA0LH3qB,EAAoB,GAAgB22F,EAAaxiD,GAAS,GACrE9C,KAAK1mB,MA3LS,EA2LH3qB,EAAoB,GAAW21C,EAC1CtE,KAAK1mB,MA5LS,EA4LH3qB,EAAoB,GAAW01C,GASrC,YAAAg2C,mBAAP,SAA0B1rF,EAAe22F,GACvC,IAAIz5C,EAAU7L,KAAK1mB,MAtML,EAsMW3qB,EAAoB,GAC/B,QAAVk9C,EAEF7L,KAAKklD,UAAUv2F,IAAU,EAAAsrF,oBAAoBqL,IAE/B,QAAVz5C,GAIF7L,KAAKklD,UAAUv2F,GAAS,EAAAsrF,oBAA8B,QAAVpuC,GAAoC,EAAAouC,oBAAoBqL,GACpGz5C,IAAW,QACXA,GAAW,SAIXA,EAAUy5C,EAAa,GAAK,GAE9BtlD,KAAK1mB,MAvNO,EAuND3qB,EAAoB,GAAgBk9C,IAI5C,YAAAsuC,YAAP,SAAmB/+C,EAAavuC,EAAWo4F,EAAyBpW,GAQlE,IAPAzzC,GAAO4E,KAAK5xC,SAG0B,IAA3B4xC,KAAKya,SAASrf,EAAM,IAC7B4E,KAAK85C,qBAAqB1+C,EAAM,EAAG,EAAG,GAAGyzC,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,eAG1GryF,EAAImzC,KAAK5xC,OAASgtC,EAAK,CAEzB,IADA,IAAM+xB,EAAO,IAAI,EAAAT,SACRv+D,EAAI6xC,KAAK5xC,OAASgtC,EAAMvuC,EAAI,EAAGsB,GAAK,IAAKA,EAChD6xC,KAAKojD,QAAQhoD,EAAMvuC,EAAIsB,EAAG6xC,KAAKotB,SAAShyB,EAAMjtC,EAAGg/D,IAEnD,IAASh/D,EAAI,EAAGA,EAAItB,IAAKsB,EACvB6xC,KAAKojD,QAAQhoD,EAAMjtC,EAAG82F,QAGxB,IAAS92F,EAAIitC,EAAKjtC,EAAI6xC,KAAK5xC,SAAUD,EACnC6xC,KAAKojD,QAAQj1F,EAAG82F,GAKmB,IAAnCjlD,KAAKya,SAASza,KAAK5xC,OAAS,IAC9B4xC,KAAK85C,qBAAqB95C,KAAK5xC,OAAS,EAAG,EAAG,GAAGygF,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,gBAIjH,YAAAnD,YAAP,SAAmB3gD,EAAavuC,EAAWo4F,EAAyBpW,GAElE,GADAzzC,GAAO4E,KAAK5xC,OACRvB,EAAImzC,KAAK5xC,OAASgtC,EAAK,CAEzB,IADA,IAAM+xB,EAAO,IAAI,EAAAT,SACRv+D,EAAI,EAAGA,EAAI6xC,KAAK5xC,OAASgtC,EAAMvuC,IAAKsB,EAC3C6xC,KAAKojD,QAAQhoD,EAAMjtC,EAAG6xC,KAAKotB,SAAShyB,EAAMvuC,EAAIsB,EAAGg/D,IAEnD,IAASh/D,EAAI6xC,KAAK5xC,OAASvB,EAAGsB,EAAI6xC,KAAK5xC,SAAUD,EAC/C6xC,KAAKojD,QAAQj1F,EAAG82F,QAGlB,IAAS92F,EAAIitC,EAAKjtC,EAAI6xC,KAAK5xC,SAAUD,EACnC6xC,KAAKojD,QAAQj1F,EAAG82F,GAOhB7pD,GAAkC,IAA3B4E,KAAKya,SAASrf,EAAM,IAC7B4E,KAAK85C,qBAAqB1+C,EAAM,EAAG,EAAG,GAAGyzC,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,eAEnF,IAAvBl/C,KAAKya,SAASrf,IAAe4E,KAAKu6C,WAAWn/C,IAC/C4E,KAAK85C,qBAAqB1+C,EAAK,EAAG,GAAGyzC,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,gBAIrG,YAAAzD,aAAP,SAAoB7qF,EAAe65B,EAAaw6D,EAAyBpW,GAUvE,IARIj+E,GAAsC,IAA7BovC,KAAKya,SAAS7pD,EAAQ,IACjCovC,KAAK85C,qBAAqBlpF,EAAQ,EAAG,EAAG,GAAGi+E,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,eAG5Gz0D,EAAMuV,KAAK5xC,QAAqC,IAA3B4xC,KAAKya,SAAShwB,EAAM,IAC3CuV,KAAK85C,qBAAqBrvD,EAAK,EAAG,GAAGokD,aAAS,EAATA,EAAWvqC,KAAM,GAAGuqC,aAAS,EAATA,EAAWxqC,KAAM,GAAGwqC,aAAS,EAATA,EAAWkL,WAAY,IAAI,EAAAmF,eAGnGtuF,EAAQ65B,GAAQ75B,EAAQovC,KAAK5xC,QAClC4xC,KAAKojD,QAAQxyF,IAASq0F,IAInB,YAAA1nC,OAAP,SAAc/R,EAAcy5C,GAC1B,GAAIz5C,IAASxL,KAAK5xC,OAAlB,CAGA,GAAIo9C,EAAOxL,KAAK5xC,OAAQ,CACtB,IAAMkM,EAAO,IAAI02E,YAtSL,EAsSiBxlC,GACzBxL,KAAK5xC,SAvSG,EAwSNo9C,EAAmBxL,KAAK1mB,MAAMlrB,OAChCkM,EAAKrD,IAAI+oC,KAAK1mB,MAAM43D,SAAS,EAzSrB,EAySwB1lC,IAEhClxC,EAAKrD,IAAI+oC,KAAK1mB,QAGlB0mB,KAAK1mB,MAAQhf,EACb,IAAK,IAAInM,EAAI6xC,KAAK5xC,OAAQD,EAAIq9C,IAAQr9C,EACpC6xC,KAAKojD,QAAQj1F,EAAG82F,QAGlB,GAAIz5C,EAAM,EACFlxC,EAAO,IAAI02E,YApTP,EAoTmBxlC,IACxBv0C,IAAI+oC,KAAK1mB,MAAM43D,SAAS,EArTnB,EAqTsB1lC,IAChCxL,KAAK1mB,MAAQhf,EAEb,IAAMrI,EAAO1G,OAAO0G,KAAK+tC,KAAKklD,WAC9B,IAAS/2F,EAAI,EAAGA,EAAI8D,EAAK7D,OAAQD,IAAK,CACpC,IAAMa,EAAMuzB,SAAStwB,EAAK9D,GAAI,IAC1Ba,GAAOw8C,UACFxL,KAAKklD,UAAUl2F,SAI1BgxC,KAAK1mB,MAAQ,IAAI03D,YAAY,GAC7BhxC,KAAKklD,UAAY,GAGrBllD,KAAK5xC,OAASo9C,IAIT,YAAAmwC,KAAP,SAAYsJ,GACVjlD,KAAKklD,UAAY,GACjBllD,KAAKmlD,eAAiB,GACtB,IAAK,IAAIh3F,EAAI,EAAGA,EAAI6xC,KAAK5xC,SAAUD,EACjC6xC,KAAKojD,QAAQj1F,EAAG82F,IAKb,YAAAO,SAAP,SAAgBr4C,GASd,IAAK,IAAMluC,KARP+gC,KAAK5xC,SAAW++C,EAAK/+C,OACvB4xC,KAAK1mB,MAAQ,IAAI03D,YAAY7jC,EAAK7zB,OAGlC0mB,KAAK1mB,MAAMriB,IAAIk2C,EAAK7zB,OAEtB0mB,KAAK5xC,OAAS++C,EAAK/+C,OACnB4xC,KAAKklD,UAAY,GACA/3C,EAAK+3C,UACpBllD,KAAKklD,UAAUjmF,GAAMkuC,EAAK+3C,UAAUjmF,GAGtC,IAAK,IAAMA,KADX+gC,KAAKmlD,eAAiB,GACLh4C,EAAKg4C,eACpBnlD,KAAKmlD,eAAelmF,GAAMkuC,EAAKg4C,eAAelmF,GAEhD+gC,KAAKmpB,UAAYhc,EAAKgc,WAIjB,YAAAh4C,MAAP,WACE,IAAMwxE,EAAU,IAAIlC,EAAW,GAG/B,IAAK,IAAMxhF,KAFX0jF,EAAQrpE,MAAQ,IAAI03D,YAAYhxC,KAAK1mB,OACrCqpE,EAAQv0F,OAAS4xC,KAAK5xC,OACL4xC,KAAKklD,UACpBvC,EAAQuC,UAAUjmF,GAAM+gC,KAAKklD,UAAUjmF,GAEzC,IAAK,IAAMA,KAAM+gC,KAAKmlD,eACpBxC,EAAQwC,eAAelmF,GAAM+gC,KAAKmlD,eAAelmF,GAGnD,OADA0jF,EAAQx5B,UAAYnpB,KAAKmpB,UAClBw5B,GAGF,YAAAnf,iBAAP,WACE,IAAK,IAAIr1E,EAAI6xC,KAAK5xC,OAAS,EAAGD,GAAK,IAAKA,EACtC,GAAgD,QAA3C6xC,KAAK1mB,MArXE,EAqXInrB,EAAgB,GAC9B,OAAOA,GAAK6xC,KAAK1mB,MAtXP,EAsXanrB,EAAgB,IAAiB,IAG5D,OAAO,GAGF,YAAA80F,cAAP,SAAqBllF,EAAiBglF,EAAgBF,EAAiBz0F,EAAgBq3F,GACrF,IAAMC,EAAU3nF,EAAIub,MACpB,GAAImsE,EACF,IAAK,IAAIt4B,EAAO/+D,EAAS,EAAG++D,GAAQ,EAAGA,IACrC,IAAK,IAAIh/D,EAAI,EAAGA,EAhYN,EAgYqBA,IAC7B6xC,KAAK1mB,MAjYG,GAiYIupE,EAAU11B,GAAoBh/D,GAAKu3F,EAjYvC,GAiYgD3C,EAAS51B,GAAoBh/D,QAIzF,IAASg/D,EAAO,EAAGA,EAAO/+D,EAAQ++D,IAChC,IAASh/D,EAAI,EAAGA,EAtYN,EAsYqBA,IAC7B6xC,KAAK1mB,MAvYG,GAuYIupE,EAAU11B,GAAoBh/D,GAAKu3F,EAvYvC,GAuYgD3C,EAAS51B,GAAoBh/D,GAM3F,IAAMw3F,EAAkBp6F,OAAO0G,KAAK8L,EAAImnF,WACxC,IAAS/2F,EAAI,EAAGA,EAAIw3F,EAAgBv3F,OAAQD,IAAK,CAC/C,IAAMa,EAAMuzB,SAASojE,EAAgBx3F,GAAI,IACrCa,GAAO+zF,IACT/iD,KAAKklD,UAAUl2F,EAAM+zF,EAASF,GAAW9kF,EAAImnF,UAAUl2F,MAKtD,YAAAq+D,kBAAP,SAAyBC,EAA4B/D,EAAsBC,QAAlD,IAAA8D,OAAA,QAA4B,IAAA/D,MAAA,QAAsB,IAAAC,MAAiBxpB,KAAK5xC,QAC3Fk/D,IACF9D,EAASx8D,KAAKk5C,IAAIsjB,EAAQxpB,KAAKwjC,qBAGjC,IADA,IAAI3mE,EAAS,GACN0sD,EAAWC,GAAQ,CACxB,IAAM3d,EAAU7L,KAAK1mB,MA5ZT,EA4ZeiwC,EAAuB,GAC5C67B,EAAe,QAAVv5C,EACXhvC,GAAqB,QAAVgvC,EAAsC7L,KAAKklD,UAAU37B,GAAY,EAAO,EAAA0wB,oBAAoBmL,GAAM,EAAAhzB,qBAC7G7I,GAAa1d,GAAW,IAAwB,EAElD,OAAOhvC,GAEX,EAlYA,GAAa,EAAA4jF,c,sFC/Cb,0BAA+B90C,EAAqBH,GAClD,GAAIG,EAAM/6C,MAAM68C,IAAM9B,EAAMlhB,IAAIgjB,EAC9B,OAAO9B,EAAMlhB,IAAI+iB,EAAI7B,EAAM/6C,MAAM48C,EAAI,EAEvC,GAAI7B,EAAM/6C,MAAM68C,EAAI9B,EAAMlhB,IAAIgjB,EAC5B,MAAM,IAAIlP,MAAM,qBAAqBoN,EAAMlhB,IAAI+iB,EAAC,KAAK7B,EAAMlhB,IAAIgjB,EAAC,6BAA6B9B,EAAM/6C,MAAM48C,EAAC,KAAK7B,EAAM/6C,MAAM68C,EAAC,KAE9H,OAAOjC,GAAQG,EAAMlhB,IAAIgjB,EAAI9B,EAAM/6C,MAAM68C,EAAI,GAAKjC,EAAOG,EAAM/6C,MAAM48C,EAAI7B,EAAMlhB,IAAI+iB,I,aC+LrF,SAAgB21C,EAA4B9iD,EAAqBlyC,EAAWq9C,GAE1E,GAAIr9C,IAAMkyC,EAAMjyC,OAAS,EACvB,OAAOiyC,EAAMlyC,GAAGq1E,mBAKlB,IAAMoiB,GAAevlD,EAAMlyC,GAAGosF,WAAW/uC,EAAO,IAAuC,IAAhCnL,EAAMlyC,GAAGssD,SAASjP,EAAO,GAC1Eq6C,EAA2D,IAA7BxlD,EAAMlyC,EAAI,GAAGssD,SAAS,GAC1D,OAAImrC,GAAcC,EACTr6C,EAAO,EAETA,E,iNAtMT,wCAA6CnL,EAAkCylD,EAAiB9E,EAAiB+E,EAAyB7E,GAKxI,IAFA,IAAMM,EAAqB,GAElB/zC,EAAI,EAAGA,EAAIpN,EAAMjyC,OAAS,EAAGq/C,IAAK,CAEzC,IAAIt/C,EAAIs/C,EACJkqC,EAAWt3C,EAAMpqC,MAAM9H,GAC3B,GAAKwpF,EAASxuB,UAAd,CAMA,IADA,IAAMg5B,EAA6B,CAAC9hD,EAAMpqC,IAAIw3C,IACvCt/C,EAAIkyC,EAAMjyC,QAAUupF,EAASxuB,WAClCg5B,EAAalpF,KAAK0+E,GAClBA,EAAWt3C,EAAMpqC,MAAM9H,GAKzB,GAAI43F,GAAmBt4C,GAAKs4C,EAAkB53F,EAC5Cs/C,GAAK00C,EAAa/zF,OAAS,MAD7B,CAUA,IAJA,IAAIw0F,EAAgB,EAChBC,EAAUM,EAA4BhB,EAAcS,EAAekD,GACnEhD,EAAe,EACfC,EAAS,EACND,EAAeX,EAAa/zF,QAAQ,CACzC,IAAM43F,EAAuB7C,EAA4BhB,EAAcW,EAAcgD,GAC/EG,EAAoBD,EAAuBjD,EAC3CmD,EAAqBlF,EAAU6B,EAC/BG,EAAch2F,KAAKk5C,IAAI+/C,EAAmBC,GAEhD/D,EAAaS,GAAeK,cAAcd,EAAaW,GAAeC,EAAQF,EAASG,GAAa,IAEpGH,GAAWG,KACKhC,IACd4B,IACAC,EAAU,IAEZE,GAAUC,KACKgD,IACblD,IACAC,EAAS,GAIK,IAAZF,GAAmC,IAAlBD,GAC2C,IAA1DT,EAAaS,EAAgB,GAAGnoC,SAASumC,EAAU,KACrDmB,EAAaS,GAAeK,cAAcd,EAAaS,EAAgB,GAAI5B,EAAU,EAAG6B,IAAW,GAAG,GAEtGV,EAAaS,EAAgB,GAAGQ,QAAQpC,EAAU,EAAGE,IAM3DiB,EAAaS,GAAenH,aAAaoH,EAAS7B,EAASE,GAI3D,IADA,IAAIiF,EAAgB,EACX,EAAIhE,EAAa/zF,OAAS,EAAG,EAAI,IACpC,EAAIw0F,GAAwD,IAAvCT,EAAa,GAAG3e,oBADE,IAEzC2iB,IAMAA,EAAgB,IAClB3E,EAASvoF,KAAKw0C,EAAI00C,EAAa/zF,OAAS+3F,GACxC3E,EAASvoF,KAAKktF,IAGhB14C,GAAK00C,EAAa/zF,OAAS,IAE7B,OAAOozF,GAQT,uCAA4CnhD,EAAkCmhD,GAM5E,IALA,IAAMK,EAAmB,GAErBuE,EAAoB,EACpBC,EAAoB7E,EAAS4E,GAC7BE,EAAoB,EACfn4F,EAAI,EAAGA,EAAIkyC,EAAMjyC,OAAQD,IAChC,GAAIk4F,IAAsBl4F,EAAG,CAC3B,IAAMg4F,EAAgB3E,IAAW4E,GAGjC/lD,EAAMorC,gBAAgBp9B,KAAK,CACzB1/C,MAAOR,EAAIm4F,EACXvoC,OAAQooC,IAGVh4F,GAAKg4F,EAAgB,EACrBG,GAAqBH,EACrBE,EAAoB7E,IAAW4E,QAE/BvE,EAAO5oF,KAAK9K,GAGhB,MAAO,CACL0zF,OAAM,EACNE,aAAcuE,IAUlB,sCAA2CjmD,EAAkCkmD,GAG3E,IADA,IAAMC,EAA+B,GAC5Br4F,EAAI,EAAGA,EAAIo4F,EAAUn4F,OAAQD,IACpCq4F,EAAevtF,KAAKonC,EAAMpqC,IAAIswF,EAAUp4F,KAI1C,IAASA,EAAI,EAAGA,EAAIq4F,EAAep4F,OAAQD,IACzCkyC,EAAMppC,IAAI9I,EAAGq4F,EAAer4F,IAE9BkyC,EAAMjyC,OAASm4F,EAAUn4F,QAiB3B,0CAA+C+zF,EAA4B2D,EAAiB9E,GAS1F,IARA,IAAMyF,EAA2B,GAC3BC,EAAcvE,EAAap0F,KAAI,SAACqC,EAAGjC,GAAM,OAAAg1F,EAA4BhB,EAAch0F,EAAG23F,MAAUa,QAAO,SAACnhF,EAAG9V,GAAM,OAAA8V,EAAI9V,KAIvHqzF,EAAS,EACT6D,EAAU,EACVC,EAAiB,EACdA,EAAiBH,GAAa,CACnC,GAAIA,EAAcG,EAAiB7F,EAAS,CAE1CyF,EAAextF,KAAKytF,EAAcG,GAClC,MAEF9D,GAAU/B,EACV,IAAM8F,EAAmB3D,EAA4BhB,EAAcyE,EAASd,GACxE/C,EAAS+D,IACX/D,GAAU+D,EACVF,KAEF,IAAMG,EAA8D,IAA/C5E,EAAayE,GAASnsC,SAASsoC,EAAS,GACzDgE,GACFhE,IAEF,IAAM1hB,EAAa0lB,EAAe/F,EAAU,EAAIA,EAChDyF,EAAextF,KAAKooE,GACpBwlB,GAAkBxlB,EAGpB,OAAOolB,GAGT,iC,+bCtMA,cACA,UAQA,cAYE,WACmBrzC,EACAnJ,GAFnB,MAIE,cAAO,K,OAHU,EAAAmJ,kBACA,EAAAnJ,iBATX,EAAA48B,kBAAoB,EAAKpoC,SAAS,IAAI,EAAA8L,cAY5C,EAAKkN,Q,EA6FT,OA9G+B,OAM7B,sBAAW,+BAAgB,C,IAA3B,WAA0F,OAAOzX,KAAK6mC,kBAAkB79D,O,gCAcjH,YAAAyuC,MAAP,WACEzX,KAAK4sB,QAAU,IAAI,EAAA+3B,QAAO,EAAM3kD,KAAKoT,gBAAiBpT,KAAKiK,gBAC3DjK,KAAK4sB,QAAQk0B,mBAIb9gD,KAAKgnD,KAAO,IAAI,EAAArC,QAAO,EAAO3kD,KAAKoT,gBAAiBpT,KAAKiK,gBACzDjK,KAAKinD,cAAgBjnD,KAAK4sB,QAE1B5sB,KAAKqZ,iBAMP,sBAAW,kBAAG,C,IAAd,WACE,OAAOrZ,KAAKgnD,M,gCAMd,sBAAW,qBAAM,C,IAAjB,WACE,OAAOhnD,KAAKinD,e,gCAMd,sBAAW,qBAAM,C,IAAjB,WACE,OAAOjnD,KAAK4sB,S,gCAMP,YAAA4vB,qBAAP,WACMx8C,KAAKinD,gBAAkBjnD,KAAK4sB,UAGhC5sB,KAAK4sB,QAAQpf,EAAIxN,KAAKgnD,KAAKx5C,EAC3BxN,KAAK4sB,QAAQnf,EAAIzN,KAAKgnD,KAAKv5C,EAI3BzN,KAAKgnD,KAAK5vF,QACV4oC,KAAKinD,cAAgBjnD,KAAK4sB,QAC1B5sB,KAAK6mC,kBAAkBx4B,KAAK,CAC1B26B,aAAchpC,KAAK4sB,QACnBs6B,eAAgBlnD,KAAKgnD,SAOlB,YAAAzK,kBAAP,SAAyBwE,GACnB/gD,KAAKinD,gBAAkBjnD,KAAKgnD,OAKhChnD,KAAKgnD,KAAKlG,iBAAiBC,GAC3B/gD,KAAKgnD,KAAKx5C,EAAIxN,KAAK4sB,QAAQpf,EAC3BxN,KAAKgnD,KAAKv5C,EAAIzN,KAAK4sB,QAAQnf,EAC3BzN,KAAKinD,cAAgBjnD,KAAKgnD,KAC1BhnD,KAAK6mC,kBAAkBx4B,KAAK,CAC1B26B,aAAchpC,KAAKgnD,KACnBE,eAAgBlnD,KAAK4sB,YASlB,YAAArP,OAAP,SAAcyjC,EAAiBC,GAC7BjhD,KAAK4sB,QAAQrP,OAAOyjC,EAASC,GAC7BjhD,KAAKgnD,KAAKzpC,OAAOyjC,EAASC,IAOrB,YAAA5nC,cAAP,SAAqBlrD,GACnB6xC,KAAK4sB,QAAQvT,cAAclrD,GAC3B6xC,KAAKgnD,KAAK3tC,cAAclrD,IAE5B,EA9GA,CANA,OAM+B4zC,YAAlB,EAAAolD,a,6bCVb,aACA,SACA,UAKA,yE,OAQS,EAAAt7C,QAAU,EACV,EAAAvH,GAAK,EACL,EAAAD,GAAK,EACL,EAAA01C,SAA2B,IAAI,EAAAmF,cAC/B,EAAAzc,aAAe,G,EAoExB,OAhF8B,OAEd,EAAAwd,aAAd,SAA2Bj0F,GACzB,IAAME,EAAM,IAAIwgE,EAEhB,OADAxgE,EAAIy2E,gBAAgB32E,GACbE,GASF,YAAAw2E,WAAP,WACE,OAAsB,QAAf1iC,KAAK6L,SAGP,YAAA4O,SAAP,WACE,OAAOza,KAAK6L,SAAW,IAGlB,YAAAulB,SAAP,WACE,OAAmB,QAAfpxB,KAAK6L,QACA7L,KAAKyiC,aAEK,QAAfziC,KAAK6L,QACA,EAAAouC,oBAAmC,QAAfj6C,KAAK6L,SAE3B,IAQF,YAAAwmB,QAAP,WACE,OAAQryB,KAAK0iC,aACT1iC,KAAKyiC,aAAa5uE,WAAWmsC,KAAKyiC,aAAar0E,OAAS,GACzC,QAAf4xC,KAAK6L,SAGJ,YAAA82B,gBAAP,SAAuB32E,GACrBg0C,KAAKsE,GAAKt4C,EAAM,EAAAq5F,sBAChBrlD,KAAKqE,GAAK,EACV,IAAI+iD,GAAW,EAEf,GAAIp7F,EAAM,EAAAg4F,sBAAsB51F,OAAS,EACvCg5F,GAAW,OAER,GAA2C,IAAvCp7F,EAAM,EAAAg4F,sBAAsB51F,OAAc,CACjD,IAAM4gE,EAAOhjE,EAAM,EAAAg4F,sBAAsBnwF,WAAW,GAGpD,GAAI,OAAUm7D,GAAQA,GAAQ,MAAQ,CACpC,IAAM+uB,EAAS/xF,EAAM,EAAAg4F,sBAAsBnwF,WAAW,GAClD,OAAUkqF,GAAUA,GAAU,MAChC/9C,KAAK6L,QAA6B,MAAjBmjB,EAAO,OAAkB+uB,EAAS,MAAS,MAAY/xF,EAAM,EAAA+3F,wBAA0B,GAGxGqD,GAAW,OAIbA,GAAW,OAIbpnD,KAAK6L,QAAU7/C,EAAM,EAAAg4F,sBAAsBnwF,WAAW,GAAM7H,EAAM,EAAA+3F,wBAA0B,GAE1FqD,IACFpnD,KAAKyiC,aAAez2E,EAAM,EAAAg4F,sBAC1BhkD,KAAK6L,QAAU,QAA4B7/C,EAAM,EAAA+3F,wBAA0B,KAIxE,YAAAnhB,cAAP,WACE,MAAO,CAAC5iC,KAAKsE,GAAItE,KAAKoxB,WAAYpxB,KAAKya,WAAYza,KAAKqyB,YAE5D,EAhFA,CAA8B,EAAAO,eAAjB,EAAAlG,Y,0TCRA,EAAAuF,cAAgB,IAChB,EAAAo1B,aAAe,IAAa,EAAAp1B,eAAiB,EAE7C,EAAAozB,qBAAuB,EACvB,EAAArB,qBAAuB,EACvB,EAAAD,sBAAwB,EACxB,EAAA9E,qBAAuB,EAOvB,EAAAiB,eAAiB,GACjB,EAAA9F,gBAAkB,EAClB,EAAA5gB,eAAiB,EAOjB,EAAApH,qBAAuB,IACvB,EAAAguB,sBAAwB,EACxB,EAAA9tB,qBAAuB,I,4bCxBpC,cAIA,cAWE,WACSnlB,GADT,MAGE,cAAO,K,OAFA,EAAAA,OATD,EAAA6pB,IAAcmtB,EAAOmD,UACtB,EAAA38B,YAAsB,EAIrB,EAAA48B,WAAa,IAAI,EAAAh9C,a,EAmB3B,OA3B4B,OAM1B,sBAAW,iBAAE,C,IAAb,WAA0B,OAAOvK,KAAKg3B,K,gCAGtC,sBAAW,wBAAS,C,IAApB,WAAuC,OAAOh3B,KAAKunD,WAAWv+E,O,gCAQvD,YAAA82B,QAAP,WACME,KAAK2qB,aAGT3qB,KAAK2qB,YAAa,EAClB3qB,KAAKmN,MAAQ,EAEbnN,KAAKunD,WAAWl5C,OAChB,YAAMvO,QAAO,aAxBA,EAAAwnD,QAAU,EA0B3B,EA3BA,CAHA,OAG4BvlD,YAAf,EAAAoiD,U,kGCGA,EAAAzL,SAAoD,GAKpD,EAAA0D,gBAAwC,EAAA1D,SAAY,EAYjE,EAAAA,SAAA,GAAgB,CACd,IAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,KAOP,EAAAA,SAAA,OAAgB/sF,EAOhB,EAAA+sF,SAAA,GAAgB,CACd,IAAK,IACL,IAAK,IACL,IAAK,KACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA8O,EACA,EAAA9O,SAAA,GAAgB,CACd,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EACA,EAAAA,SAAA,GAAgB,CACd,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EAAgB,CACd,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,EACA,EAAAA,SAAA,GAAgB,CACd,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAQP,EAAAA,SAAA,KAAgB,CACd,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,IAEL,EAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,M,aC1KP,IAAiBlB,EA3EA99B,E,mEAAAA,EAAA,EAAAA,KAAA,EAAAA,GAAE,KAEJ+tC,IAAM,KAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAtkC,IAAM,IAEN,EAAAukC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAApR,IAAM,IAEN,EAAAM,GAAM,KAEN,EAAAE,GAAM,KAEN,EAAAP,GAAM,KAEN,EAAAE,GAAM,KAEN,EAAAC,GAAM,KAEN,EAAAxzB,GAAM,KAEN,EAAA8zB,GAAM,IAEN,EAAAE,GAAM,IAEN,EAAAyQ,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,GAAM,IAEN,EAAAC,IAAM,IAEN,EAAA9uC,IAAM,IAEN,EAAA+uC,GAAM,IAEN,EAAAC,GAAM,IAEN,EAAAC,GAAM,IAEN,EAAAC,GAAM,IAEN,EAAAC,GAAM,IAEN,EAAAC,IAAM,KAOJvR,EAAA,EAAAA,KAAA,EAAAA,GAAE,KAEJwR,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAA1R,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAA0R,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAzR,IAAM,IAEN,EAAA0R,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,GAAK,IAEL,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,GAAK,IAEL,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,KAAO,IAEP,EAAAC,IAAM,IAEN,EAAAC,IAAM,IAEN,EAAAC,GAAK,IAEL,EAAAC,IAAM,IAEN,EAAAC,GAAK,IAEL,EAAAC,IAAM,K,+FC7IrB,cAGMC,EAA2D,CAE/DC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KAGVC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,KAAM,KACZC,IAAK,CAAC,IAAK,KACXC,IAAK,CAAC,IAAM,MAGd,iCACExpD,EACAypD,EACAjrD,EACAgiB,GAEA,IAAMrmD,EAA0B,CAC9ByD,KAAM,EAGNkgD,QAAQ,EAERxxD,SAAKrD,GAEDuhC,GAAawV,EAAGud,SAAW,EAAI,IAAMvd,EAAGj5B,OAAS,EAAI,IAAMi5B,EAAGqd,QAAU,EAAI,IAAMrd,EAAG+gB,QAAU,EAAI,GACzG,OAAQ/gB,EAAGihB,SACT,KAAK,EACY,sBAAXjhB,EAAG1zC,IAEH6N,EAAO7N,IADLm9F,EACW,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAGN,wBAAXjX,EAAG1zC,IAER6N,EAAO7N,IADLm9F,EACW,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAGN,yBAAXjX,EAAG1zC,IAER6N,EAAO7N,IADLm9F,EACW,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAGN,wBAAXjX,EAAG1zC,MAER6N,EAAO7N,IADLm9F,EACW,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,MAG1B,MACF,KAAK,EAEH,GAAIjX,EAAGud,SAAU,CACfpjD,EAAO7N,IAAM,EAAA0qD,GAAGs9B,GAChB,MACK,GAAIt0C,EAAGj5B,OAAQ,CACpB5M,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,EAAAD,GAAGqvC,IACzB,MAEFlsF,EAAO7N,IAAM,EAAA0qD,GAAGqvC,IAChB,MACF,KAAK,EAEH,GAAIrmD,EAAGud,SAAU,CACfpjD,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,KACtB,MAEF98C,EAAO7N,IAAM,EAAA0qD,GAAGw9B,GAChBr6E,EAAO2jD,QAAS,EAChB,MACF,KAAK,GAEH3jD,EAAO7N,IAAM0zC,EAAGj5B,OAAS,EAAAiwC,GAAGC,IAAM,EAAAD,GAAG4J,GAAK,EAAA5J,GAAG4J,GAC7CzmD,EAAO2jD,QAAS,EAChB,MACF,KAAK,GAEH3jD,EAAO7N,IAAM,EAAA0qD,GAAGC,IACZjX,EAAGj5B,SACL5M,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,EAAAD,GAAGC,KAE3B98C,EAAO2jD,QAAS,EAChB,MACF,KAAK,GAEH,GAAI9d,EAAG+gB,QACL,MAEEv2B,GACFrwB,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAI5CrwB,EAAO7N,MAAQ,EAAA0qD,GAAGC,IAAM,UAC1B98C,EAAO7N,IAAM,EAAA0qD,GAAGC,KAAOzY,EAAQ,IAAM,WAGvCrkC,EAAO7N,IADEm9F,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAEH,GAAIjX,EAAG+gB,QACL,MAEEv2B,GACFrwB,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAI5CrwB,EAAO7N,MAAQ,EAAA0qD,GAAGC,IAAM,UAC1B98C,EAAO7N,IAAM,EAAA0qD,GAAGC,KAAOzY,EAAQ,IAAM,WAGvCrkC,EAAO7N,IADEm9F,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAEH,GAAIjX,EAAG+gB,QACL,MAEEv2B,GACFrwB,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAI3CgU,GAASrkC,EAAO7N,MAAQ,EAAA0qD,GAAGC,IAAM,UACpC98C,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,UAGxB98C,EAAO7N,IADEm9F,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAEH,GAAIjX,EAAG+gB,QACL,MAEEv2B,GACFrwB,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAI3CgU,GAASrkC,EAAO7N,MAAQ,EAAA0qD,GAAGC,IAAM,UACpC98C,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,UAGxB98C,EAAO7N,IADEm9F,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAEEjX,EAAGud,UAAavd,EAAGqd,UAGtBljD,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,OAExB,MACF,KAAK,GAGD98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAEnC,EAAAwsB,GAAGC,IAAM,MAExB,MACF,KAAK,GAGD98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IACvCi/D,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAGD98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IACvCi/D,EACI,EAAAzyC,GAAGC,IAAM,KAET,EAAAD,GAAGC,IAAM,KAExB,MACF,KAAK,GAECjX,EAAGud,SACLpjD,EAAOyD,KAAO,EAEdzD,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,MAExB,MACF,KAAK,GAECjX,EAAGud,SACLpjD,EAAOyD,KAAO,EAEdzD,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM,MAExB,MACF,KAAK,IAGD98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAEnC,EAAAwsB,GAAGC,IAAM,KAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAEnC,EAAAwsB,GAAGC,IAAM,KAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAEnC,EAAAwsB,GAAGC,IAAM,KAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,OAASzsB,EAAY,GAAK,IAEnC,EAAAwsB,GAAGC,IAAM,KAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,KAAK,IAED98C,EAAO7N,IADLk+B,EACW,EAAAwsB,GAAGC,IAAM,QAAUzsB,EAAY,GAAK,IAEpC,EAAAwsB,GAAGC,IAAM,OAExB,MACF,QAEE,IAAIjX,EAAGqd,SAAYrd,EAAGud,UAAavd,EAAGj5B,QAAWi5B,EAAG+gB,QAiB7C,GAAMviB,IAASgiB,IAAoBxgB,EAAGj5B,QAAWi5B,EAAG+gB,SAUhDviB,GAAUwB,EAAGj5B,QAAWi5B,EAAGqd,SAAYrd,EAAGud,WAAYvd,EAAG+gB,QAIzD/gB,EAAG1zC,MAAQ0zC,EAAGqd,UAAYrd,EAAGj5B,SAAWi5B,EAAG+gB,SAAW/gB,EAAGihB,SAAW,IAAwB,IAAlBjhB,EAAG1zC,IAAIZ,OAE1FyO,EAAO7N,IAAM0zC,EAAG1zC,IACP0zC,EAAG1zC,KAAO0zC,EAAGqd,SACP,MAAXrd,EAAG1zC,MACL6N,EAAO7N,IAAM,EAAA0qD,GAAGmvC,IARC,KAAfnmD,EAAGihB,UACL9mD,EAAOyD,KAAO,OAZkD,CAElE,IAAM8rF,EAAavB,EAAqBnoD,EAAGihB,SACrC30D,EAAMo9F,GAAcA,EAAY1pD,EAAGud,SAAe,EAAJ,GACpD,GAAIjxD,EACF6N,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM3qD,OACjB,GAAI0zC,EAAGihB,SAAW,IAAMjhB,EAAGihB,SAAW,GAAI,CAC/C,IAAMA,EAAUjhB,EAAGqd,QAAUrd,EAAGihB,QAAU,GAAKjhB,EAAGihB,QAAU,GAC5D9mD,EAAO7N,IAAM,EAAA0qD,GAAGC,IAAM5sD,OAAOg3D,aAAaJ,SAxBxCjhB,EAAGihB,SAAW,IAAMjhB,EAAGihB,SAAW,GACpC9mD,EAAO7N,IAAMjC,OAAOg3D,aAAarhB,EAAGihB,QAAU,IACtB,KAAfjhB,EAAGihB,QACZ9mD,EAAO7N,IAAM,EAAA0qD,GAAG+tC,IACP/kD,EAAGihB,SAAW,IAAMjhB,EAAGihB,SAAW,GAE3C9mD,EAAO7N,IAAMjC,OAAOg3D,aAAarhB,EAAGihB,QAAU,GAAK,IAC3B,KAAfjhB,EAAGihB,QACZ9mD,EAAO7N,IAAM,EAAA0qD,GAAGqvC,IACQ,MAAfrmD,EAAGihB,QACZ9mD,EAAO7N,IAAM,EAAA0qD,GAAGC,IACQ,MAAfjX,EAAGihB,QACZ9mD,EAAO7N,IAAM,EAAA0qD,GAAGgvC,GACQ,MAAfhmD,EAAGihB,UACZ9mD,EAAO7N,IAAM,EAAA0qD,GAAGivC,IA2BxB,OAAO9rF,I,wICzWT,+BAAoCyoF,GAClC,OAAIA,EAAY,OACdA,GAAa,MACNv4F,OAAOg3D,aAAiC,OAAnBuhC,GAAa,KAAgBv4F,OAAOg3D,aAAcuhC,EAAY,KAAS,QAE9Fv4F,OAAOg3D,aAAauhC,IAQ7B,yBAA8BhrF,EAAmB1J,EAAmB65B,QAAnB,IAAA75B,MAAA,QAAmB,IAAA65B,MAAcnwB,EAAKlM,QAErF,IADA,IAAIyO,EAAS,GACJ1O,EAAIyC,EAAOzC,EAAIs8B,IAAOt8B,EAAG,CAChC,IAAIk+F,EAAY/xF,EAAKnM,GACjBk+F,EAAY,OAMdA,GAAa,MACbxvF,GAAU9P,OAAOg3D,aAAiC,OAAnBsoC,GAAa,KAAgBt/F,OAAOg3D,aAAcsoC,EAAY,KAAS,QAEtGxvF,GAAU9P,OAAOg3D,aAAasoC,GAGlC,OAAOxvF,GAOT,8BACU,KAAAyvF,SAAmB,EAkE7B,OA7DS,YAAAl1F,MAAP,WACE4oC,KAAKssD,SAAW,GAWX,YAAAlT,OAAP,SAAcrxB,EAAepuD,GAC3B,IAAMvL,EAAS25D,EAAM35D,OAErB,IAAKA,EACH,OAAO,EAGT,IAAI0iD,EAAO,EACPy7C,EAAW,EAGXvsD,KAAKssD,WAEH,QADEvO,EAASh2B,EAAMl0D,WAAW04F,OACRxO,GAAU,MAChCpkF,EAAOm3C,KAAqC,MAA1B9Q,KAAKssD,SAAW,OAAkBvO,EAAS,MAAS,OAGtEpkF,EAAOm3C,KAAU9Q,KAAKssD,SACtB3yF,EAAOm3C,KAAUitC,GAEnB/9C,KAAKssD,SAAW,GAGlB,IAAK,IAAIn+F,EAAIo+F,EAAUp+F,EAAIC,IAAUD,EAAG,CACtC,IAAM6gE,EAAOjH,EAAMl0D,WAAW1F,GAE9B,GAAI,OAAU6gE,GAAQA,GAAQ,MAA9B,CACE,KAAM7gE,GAAKC,EAET,OADA4xC,KAAKssD,SAAWt9B,EACTle,EAET,IAAMitC,EACF,QADEA,EAASh2B,EAAMl0D,WAAW1F,KACR4vF,GAAU,MAChCpkF,EAAOm3C,KAA4B,MAAjBke,EAAO,OAAkB+uB,EAAS,MAAS,OAG7DpkF,EAAOm3C,KAAUke,EACjBr1D,EAAOm3C,KAAUitC,QAIR,QAAT/uB,IAIJr1D,EAAOm3C,KAAUke,GAEnB,OAAOle,GAEX,EAnEA,GAAa,EAAA4gC,gBAwEb,8BACS,KAAA8a,QAAsB,IAAIlhB,WAAW,GAgO9C,OA3NS,YAAAl0E,MAAP,WACE4oC,KAAKwsD,QAAQ7Q,KAAK,IAWb,YAAAvC,OAAP,SAAcrxB,EAAmBpuD,GAC/B,IAAMvL,EAAS25D,EAAM35D,OAErB,IAAKA,EACH,OAAO,EAGT,IACIq+F,EACAC,EACAC,EACAC,EAJA97C,EAAO,EAKPu7C,EAAY,EACZE,EAAW,EAGf,GAAIvsD,KAAKwsD,QAAQ,GAAI,CACnB,IAAIK,GAAiB,EACjBzH,EAAKplD,KAAKwsD,QAAQ,GACtBpH,GAAyB,MAAV,IAALA,GAAwB,GAAyB,MAAV,IAALA,GAAwB,GAAO,EAG3E,IAFA,IAAIhqD,EAAM,EACNve,OAAG,GACCA,EAA4B,GAAtBmjB,KAAKwsD,UAAUpxD,KAAgBA,EAAM,GACjDgqD,IAAO,EACPA,GAAMvoE,EAKR,IAFA,IAAMvc,EAAsC,MAAV,IAAlB0/B,KAAKwsD,QAAQ,IAAwB,EAAmC,MAAV,IAAlBxsD,KAAKwsD,QAAQ,IAAwB,EAAI,EAC/FM,EAAUxsF,EAAO86B,EAChBmxD,EAAWO,GAAS,CACzB,GAAIP,GAAYn+F,EACd,OAAO,EAGT,GAAqB,MAAV,KADXyuB,EAAMkrC,EAAMwkC,OACe,CAEzBA,IACAM,GAAiB,EACjB,MAGA7sD,KAAKwsD,QAAQpxD,KAASve,EACtBuoE,IAAO,EACPA,GAAY,GAANvoE,EAGLgwE,IAEU,IAATvsF,EACE8kF,EAAK,IAEPmH,IAEA5yF,EAAOm3C,KAAUs0C,EAED,IAAT9kF,EACL8kF,EAAK,MAAWA,GAAM,OAAUA,GAAM,OAAkB,QAAPA,IAGnDzrF,EAAOm3C,KAAUs0C,GAGfA,EAAK,OAAYA,EAAK,UAGxBzrF,EAAOm3C,KAAUs0C,IAIvBplD,KAAKwsD,QAAQ7Q,KAAK,GAMpB,IAFA,IAAMoR,EAAW3+F,EAAS,EACtBD,EAAIo+F,EACDp+F,EAAIC,GAAQ,CAejB,SAAOD,EAAI4+F,IACiB,KAApBN,EAAQ1kC,EAAM55D,KACU,KAAxBu+F,EAAQ3kC,EAAM55D,EAAI,KACM,KAAxBw+F,EAAQ5kC,EAAM55D,EAAI,KACM,KAAxBy+F,EAAQ7kC,EAAM55D,EAAI,MAExBwL,EAAOm3C,KAAU27C,EACjB9yF,EAAOm3C,KAAU47C,EACjB/yF,EAAOm3C,KAAU67C,EACjBhzF,EAAOm3C,KAAU87C,EACjBz+F,GAAK,EAOP,IAHAs+F,EAAQ1kC,EAAM55D,MAGF,IACVwL,EAAOm3C,KAAU27C,OAGZ,GAAuB,MAAV,IAARA,GAAwB,CAClC,GAAIt+F,GAAKC,EAEP,OADA4xC,KAAKwsD,QAAQ,GAAKC,EACX37C,EAGT,GAAuB,MAAV,KADb47C,EAAQ3kC,EAAM55D,OACe,CAE3BA,IACA,SAGF,IADAk+F,GAAqB,GAARI,IAAiB,EAAa,GAARC,GACnB,IAAM,CAEpBv+F,IACA,SAEFwL,EAAOm3C,KAAUu7C,OAGZ,GAAuB,MAAV,IAARI,GAAwB,CAClC,GAAIt+F,GAAKC,EAEP,OADA4xC,KAAKwsD,QAAQ,GAAKC,EACX37C,EAGT,GAAuB,MAAV,KADb47C,EAAQ3kC,EAAM55D,OACe,CAE3BA,IACA,SAEF,GAAIA,GAAKC,EAGP,OAFA4xC,KAAKwsD,QAAQ,GAAKC,EAClBzsD,KAAKwsD,QAAQ,GAAKE,EACX57C,EAGT,GAAuB,MAAV,KADb67C,EAAQ5kC,EAAM55D,OACe,CAE3BA,IACA,SAGF,IADAk+F,GAAqB,GAARI,IAAiB,IAAc,GAARC,IAAiB,EAAa,GAARC,GAC1C,MAAWN,GAAa,OAAUA,GAAa,OAAyB,QAAdA,EAExE,SAEF1yF,EAAOm3C,KAAUu7C,OAGZ,GAAuB,MAAV,IAARI,GAAwB,CAClC,GAAIt+F,GAAKC,EAEP,OADA4xC,KAAKwsD,QAAQ,GAAKC,EACX37C,EAGT,GAAuB,MAAV,KADb47C,EAAQ3kC,EAAM55D,OACe,CAE3BA,IACA,SAEF,GAAIA,GAAKC,EAGP,OAFA4xC,KAAKwsD,QAAQ,GAAKC,EAClBzsD,KAAKwsD,QAAQ,GAAKE,EACX57C,EAGT,GAAuB,MAAV,KADb67C,EAAQ5kC,EAAM55D,OACe,CAE3BA,IACA,SAEF,GAAIA,GAAKC,EAIP,OAHA4xC,KAAKwsD,QAAQ,GAAKC,EAClBzsD,KAAKwsD,QAAQ,GAAKE,EAClB1sD,KAAKwsD,QAAQ,GAAKG,EACX77C,EAGT,GAAuB,MAAV,KADb87C,EAAQ7kC,EAAM55D,OACe,CAE3BA,IACA,SAGF,IADAk+F,GAAqB,EAARI,IAAiB,IAAc,GAARC,IAAiB,IAAc,GAARC,IAAiB,EAAa,GAARC,GACjE,OAAYP,EAAY,QAEtC,SAEF1yF,EAAOm3C,KAAUu7C,GAKrB,OAAOv7C,GAEX,EAjOA,GAAa,EAAA8gC,e,kFCnHb,IA0DIob,EA1DJ,UAIMC,EAAgB,CACpB,CAAC,IAAQ,KAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC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SAAkBrgG,GAGgB,IAA5B0lC,KAAKs6D,QAAQO,YAGjB76D,KAAKs6D,QAAQQ,KAAKxgG,IAGZ,YAAAsgG,YAAR,SAAoBtgG,GAClB,GAAgC,IAA5B0lC,KAAKs6D,QAAQO,WAAjB,CAIA,IADA,IAAMz6D,EAAS,IAAIkrC,WAAWhxE,EAAKlM,QAC1BD,EAAI,EAAGA,EAAImM,EAAKlM,SAAUD,EACjCiyC,EAAOjyC,GAA0B,IAArBmM,EAAKzG,WAAW1F,GAE9B6xC,KAAKs6D,QAAQQ,KAAK16D,KAEtB,EApDA,GAsDA,SAASs6D,EAAqDL,EAAmB/5F,EAASwE,GAExF,OADAu1F,EAAOnkG,iBAAiBoK,EAAMwE,GACvB,CACLg7B,QAAS,WACFh7B,GAILu1F,EAAOrsE,oBAAoB1tB,EAAMwE,KA9D1B,EAAAi2F;;;AGbb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC5QA;;AACA;;AACA;;AACA;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,OARA,qBAQA;AACA,SAAA,UAAA;AACA,GAVA;AAWA,EAAA,aAXA,2BAWA;AACA,SAAA,MAAA,CAAA,KAAA;AACA,SAAA,IAAA,CAAA,OAAA;AACA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,IAAA,GAAA,IAAA,gBAAA,CAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,WAAA,EAAA;AAHA,OAAA,CAAA;AAKA,UAAA,WAAA,GAAA,IAAA,6BAAA,CAAA,KAAA,MAAA,CAAA;AACA,UAAA,QAAA,GAAA,IAAA,uBAAA,EAAA;AACA,MAAA,IAAA,CAAA,SAAA,CAAA,WAAA;AACA,MAAA,IAAA,CAAA,SAAA,CAAA,QAAA;AACA,MAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,OAAA,CAAA;AACA,MAAA,QAAA,CAAA,GAAA;AACA,MAAA,IAAA,CAAA,KAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KAfA;AAgBA,IAAA,UAhBA,wBAgBA;AACA,WAAA,MAAA,GAAA,IAAA,SAAA,CAAA,KAAA,SAAA,CAAA;AAEA,WAAA,YAAA;AACA,WAAA,aAAA;AACA,WAAA,aAAA;AACA,KAtBA;AAuBA,IAAA,YAvBA,0BAuBA;AAAA;;AACA,WAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA;AACA,QAAA,KAAA,CAAA,QAAA;AACA,OAHA;AAIA,KA5BA;AA6BA,IAAA,aA7BA,2BA6BA;AACA,WAAA,MAAA,CAAA,OAAA,GAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,OAFA;AAGA,KAjCA;AAkCA,IAAA,aAlCA,2BAkCA;AACA,WAAA,MAAA,CAAA,OAAA,GAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,aAAA;AACA,OAFA;AAGA;AAtCA;AAfA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;;AACA;;;;AAEA,IAAI3lF,YAAJ,CAAQ;AACNnW,EAAAA,EAAE,EAAE,MADE;AAENiI,EAAAA,MAAM,EAAE,gBAAA8yB,CAAC;AAAA,WAAIA,CAAC,CAAC8hE,YAAD,CAAL;AAAA;AAFH,CAAR;;;ACHA,IAAIC,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGj/D,MAAM,CAACu+D,MAAP,CAAcW,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BF,EAAAA,SAAS,CAACzvG,IAAV,CAAe,IAAf,EAAqB2vG,UAArB;AACA,OAAKC,GAAL,GAAW;AACT7hG,IAAAA,IAAI,EAAEyiC,MAAM,CAACu+D,MAAP,CAAcc,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUrtG,EAAV,EAAc;AACpB,WAAKmtG,gBAAL,CAAsBpjG,IAAtB,CAA2B/J,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOT4wC,IAAAA,OAAO,EAAE,UAAU5wC,EAAV,EAAc;AACrB,WAAKotG,iBAAL,CAAuBrjG,IAAvB,CAA4B/J,EAA5B;AACD;AATQ,GAAX;AAYA6tC,EAAAA,MAAM,CAACu+D,MAAP,CAAcc,OAAd,GAAwB,IAAxB;AACD;;AAEDr/D,MAAM,CAACu+D,MAAP,CAAcW,MAAd,GAAuBA,MAAvB;AACA,IAAIO,aAAJ,EAAmBC,cAAnB;AAEA,IAAIvhG,MAAM,GAAG6hC,MAAM,CAACu+D,MAAP,CAAcpgG,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACwhG,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BzuD,QAAQ,CAACyuD,QAApD;AACA,MAAIlH,QAAQ,GAAGvnD,QAAQ,CAACunD,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAImH,EAAE,GAAG,IAAIF,SAAJ,CAAcjH,QAAQ,GAAG,KAAX,GAAmBkH,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAC,EAAAA,EAAE,CAACC,SAAH,GAAe,UAAS9zF,KAAT,EAAgB;AAC7BwzF,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIniG,IAAI,GAAG9M,IAAI,CAAC2gF,KAAL,CAAWnlE,KAAK,CAAC1O,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACgG,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIy8F,OAAO,GAAG,KAAd;AACAziG,MAAAA,IAAI,CAACyH,MAAL,CAAYxF,OAAZ,CAAoB,UAASygG,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAAC9mG,MAAM,CAAC+mG,aAAR,EAAuBJ,KAAK,CAAC3jG,EAA7B,CAA9B;;AACA,cAAI6jG,SAAJ,EAAe;AACbH,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAIziG,IAAI,CAACyH,MAAL,CAAYnQ,KAAZ,CAAkB,UAASorG,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAAC18F,IAAN,KAAe,KAAf,IAAwB08F,KAAK,CAACK,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIP,OAAJ,EAAa;AACXrlG,QAAAA,OAAO,CAACN,KAAR;AAEAkD,QAAAA,IAAI,CAACyH,MAAL,CAAYxF,OAAZ,CAAoB,UAAUygG,KAAV,EAAiB;AACnCO,UAAAA,QAAQ,CAAClnG,MAAM,CAAC+mG,aAAR,EAAuBJ,KAAvB,CAAR;AACD,SAFD;AAIAP,QAAAA,cAAc,CAAClgG,OAAf,CAAuB,UAAU7Q,CAAV,EAAa;AAClC8xG,UAAAA,YAAY,CAAC9xG,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIyiD,QAAQ,CAACsvD,MAAb,EAAqB;AAAE;AAC5BtvD,QAAAA,QAAQ,CAACsvD,MAAT;AACD;AACF;;AAED,QAAInjG,IAAI,CAACgG,IAAL,KAAc,QAAlB,EAA4B;AAC1Bu8F,MAAAA,EAAE,CAACa,KAAH;;AACAb,MAAAA,EAAE,CAACc,OAAH,GAAa,YAAY;AACvBxvD,QAAAA,QAAQ,CAACsvD,MAAT;AACD,OAFD;AAGD;;AAED,QAAInjG,IAAI,CAACgG,IAAL,KAAc,gBAAlB,EAAoC;AAClC5I,MAAAA,OAAO,CAACwgG,GAAR,CAAY,2BAAZ;AAEA0F,MAAAA,kBAAkB;AACnB;;AAED,QAAItjG,IAAI,CAACgG,IAAL,KAAc,OAAlB,EAA2B;AACzB5I,MAAAA,OAAO,CAACM,KAAR,CAAc,kBAAkBsC,IAAI,CAACtC,KAAL,CAAW2L,OAA7B,GAAuC,IAAvC,GAA8CrJ,IAAI,CAACtC,KAAL,CAAWmjG,KAAvE;AAEAyC,MAAAA,kBAAkB;AAElB,UAAIC,OAAO,GAAGC,kBAAkB,CAACxjG,IAAD,CAAhC;AACAyL,MAAAA,QAAQ,CAAC61B,IAAT,CAAc/V,WAAd,CAA0Bg4E,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASD,kBAAT,GAA8B;AAC5B,MAAIC,OAAO,GAAG93F,QAAQ,CAACg4F,cAAT,CAAwBhC,UAAxB,CAAd;;AACA,MAAI8B,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACrvG,MAAR;AACD;AACF;;AAED,SAASsvG,kBAAT,CAA4BxjG,IAA5B,EAAkC;AAChC,MAAIujG,OAAO,GAAG93F,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,CAAd;AACAgtF,EAAAA,OAAO,CAACxkG,EAAR,GAAa0iG,UAAb,CAFgC,CAIhC;;AACA,MAAIp4F,OAAO,GAAGoC,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAImtF,UAAU,GAAGj4F,QAAQ,CAAC8K,aAAT,CAAuB,KAAvB,CAAjB;AACAlN,EAAAA,OAAO,CAAC+9B,SAAR,GAAoBpnC,IAAI,CAACtC,KAAL,CAAW2L,OAA/B;AACAq6F,EAAAA,UAAU,CAACt8D,SAAX,GAAuBpnC,IAAI,CAACtC,KAAL,CAAWmjG,KAAlC;AAEA0C,EAAAA,OAAO,CAAC3yE,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EvnB,OAAO,CAACunB,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIY8yE,UAAU,CAAC9yE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAO2yE,OAAP;AAED;;AAED,SAASI,UAAT,CAAoB3C,MAApB,EAA4BjiG,EAA5B,EAAgC;AAC9B,MAAI6tB,OAAO,GAAGo0E,MAAM,CAACp0E,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIg3E,OAAO,GAAG,EAAd;AACA,MAAI3K,CAAJ,EAAO3iF,CAAP,EAAU1T,GAAV;;AAEA,OAAKq2F,CAAL,IAAUrsE,OAAV,EAAmB;AACjB,SAAKtW,CAAL,IAAUsW,OAAO,CAACqsE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBr2F,MAAAA,GAAG,GAAGgqB,OAAO,CAACqsE,CAAD,CAAP,CAAW,CAAX,EAAc3iF,CAAd,CAAN;;AACA,UAAI1T,GAAG,KAAK7D,EAAR,IAAe/L,KAAK,CAACC,OAAN,CAAc2P,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAC9O,MAAJ,GAAa,CAAd,CAAH,KAAwBiL,EAAjE,EAAsE;AACpE6kG,QAAAA,OAAO,CAACjlG,IAAR,CAAas6F,CAAb;AACD;AACF;AACF;;AAED,MAAI+H,MAAM,CAACpgG,MAAX,EAAmB;AACjBgjG,IAAAA,OAAO,GAAGA,OAAO,CAACl+F,MAAR,CAAei+F,UAAU,CAAC3C,MAAM,CAACpgG,MAAR,EAAgB7B,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO6kG,OAAP;AACD;;AAED,SAASX,QAAT,CAAkBjC,MAAlB,EAA0B0B,KAA1B,EAAiC;AAC/B,MAAI91E,OAAO,GAAGo0E,MAAM,CAACp0E,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC81E,KAAK,CAAC3jG,EAAP,CAAP,IAAqB,CAACiiG,MAAM,CAACpgG,MAAjC,EAAyC;AACvC,QAAIhM,EAAE,GAAG,IAAIwB,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6CssG,KAAK,CAACK,SAAN,CAAgBC,EAA7D,CAAT;AACAN,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC/1E,OAAO,CAAC81E,KAAK,CAAC3jG,EAAP,CAAtB;AACA6tB,IAAAA,OAAO,CAAC81E,KAAK,CAAC3jG,EAAP,CAAP,GAAoB,CAACnK,EAAD,EAAK8tG,KAAK,CAACxgF,IAAX,CAApB;AACD,GAJD,MAIO,IAAI8+E,MAAM,CAACpgG,MAAX,EAAmB;AACxBqiG,IAAAA,QAAQ,CAACjC,MAAM,CAACpgG,MAAR,EAAgB8hG,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB7B,MAAxB,EAAgCjiG,EAAhC,EAAoC;AAClC,MAAI6tB,OAAO,GAAGo0E,MAAM,CAACp0E,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAAC7tB,EAAD,CAAR,IAAgBiiG,MAAM,CAACpgG,MAA3B,EAAmC;AACjC,WAAOiiG,cAAc,CAAC7B,MAAM,CAACpgG,MAAR,EAAgB7B,EAAhB,CAArB;AACD;;AAED,MAAImjG,aAAa,CAACnjG,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDmjG,EAAAA,aAAa,CAACnjG,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAIpK,MAAM,GAAGqsG,MAAM,CAACnsG,KAAP,CAAakK,EAAb,CAAb;AAEAojG,EAAAA,cAAc,CAACxjG,IAAf,CAAoB,CAACqiG,MAAD,EAASjiG,EAAT,CAApB;;AAEA,MAAIpK,MAAM,IAAIA,MAAM,CAACktG,GAAjB,IAAwBltG,MAAM,CAACktG,GAAP,CAAWE,gBAAX,CAA4BjuG,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAO6vG,UAAU,CAAC5nG,MAAM,CAAC+mG,aAAR,EAAuB/jG,EAAvB,CAAV,CAAqC+K,IAArC,CAA0C,UAAU/K,EAAV,EAAc;AAC7D,WAAO8jG,cAAc,CAAC9mG,MAAM,CAAC+mG,aAAR,EAAuB/jG,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASmkG,YAAT,CAAsBlC,MAAtB,EAA8BjiG,EAA9B,EAAkC;AAChC,MAAIpK,MAAM,GAAGqsG,MAAM,CAACnsG,KAAP,CAAakK,EAAb,CAAb;AACAiiG,EAAAA,MAAM,CAACc,OAAP,GAAiB,EAAjB;;AACA,MAAIntG,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACktG,GAAP,CAAW7hG,IAAX,GAAkBghG,MAAM,CAACc,OAAzB;AACD;;AAED,MAAIntG,MAAM,IAAIA,MAAM,CAACktG,GAAjB,IAAwBltG,MAAM,CAACktG,GAAP,CAAWG,iBAAX,CAA6BluG,MAAzD,EAAiE;AAC/Da,IAAAA,MAAM,CAACktG,GAAP,CAAWG,iBAAX,CAA6B//F,OAA7B,CAAqC,UAAU6J,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACk1F,MAAM,CAACc,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOd,MAAM,CAACnsG,KAAP,CAAakK,EAAb,CAAP;AACAiiG,EAAAA,MAAM,CAACjiG,EAAD,CAAN;AAEApK,EAAAA,MAAM,GAAGqsG,MAAM,CAACnsG,KAAP,CAAakK,EAAb,CAAT;;AACA,MAAIpK,MAAM,IAAIA,MAAM,CAACktG,GAAjB,IAAwBltG,MAAM,CAACktG,GAAP,CAAWE,gBAAX,CAA4BjuG,MAAxD,EAAgE;AAC9Da,IAAAA,MAAM,CAACktG,GAAP,CAAWE,gBAAX,CAA4B9/F,OAA5B,CAAoC,UAAU6J,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"Node-build-blockchain.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/*!\n * Vue.js v2.6.12\n * (c) 2014-2020 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i]);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  if (!valid) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol)$/;\n\nfunction assertType (value, type) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(/^\\s*function (\\w+)/);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  var expectedValue = styleValue(value, expectedType);\n  var receivedValue = styleValue(value, receivedType);\n  // check if we need to specify expected value\n  if (expectedTypes.length === 1 &&\n      isExplicable(expectedType) &&\n      !isBoolean(expectedType, receivedType)) {\n    message += \" with value \" + expectedValue;\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + receivedValue + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nfunction isExplicable (value) {\n  var explicitTypes = ['string', 'number', 'boolean'];\n  return explicitTypes.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    return res && (\n      res.length === 0 ||\n      (res.length === 1 && res[0].isComment) // #9658\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallback,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) { // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn(\n          'slot v-bind without argument expects an Object',\n          this\n        );\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes = scopedSlotFn(props) || fallback;\n  } else {\n    nodes = this.$slots[name] || fallback;\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  vnode, // we know it's MountedComponentVNode but flow doesn't\n  parent // activeInstance in lifecycle state\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn)) {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        try {\n          this.cb.call(this.vm, value, oldValue);\n        } catch (e) {\n          handleError(e, this.vm, (\"callback for watcher \\\"\" + (this.expression) + \"\\\"\"));\n        }\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      try {\n        cb.call(vm, watcher.value);\n      } catch (error) {\n        handleError(error, vm, (\"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\"));\n      }\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var cachedNode = cache[key];\n    if (cachedNode) {\n      var name = getComponentName(cachedNode.componentOptions);\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var cached$$1 = cache[key];\n  if (cached$$1 && (!current || cached$$1.tag !== current.tag)) {\n    cached$$1.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        cache[key] = vnode;\n        keys.push(key);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.12';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,translate,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        a.asyncFactory === b.asyncFactory &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes([oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value) {\n  if (el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecessary `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport * as Strings from 'browser/LocalizableStrings';\nimport { ITerminal } from 'browser/Types';\nimport { IBuffer } from 'common/buffer/Types';\nimport { isMac } from 'common/Platform';\nimport { RenderDebouncer } from 'browser/RenderDebouncer';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { Disposable } from 'common/Lifecycle';\nimport { ScreenDprMonitor } from 'browser/ScreenDprMonitor';\nimport { IRenderService } from 'browser/services/Services';\nimport { removeElementFromParent } from 'browser/Dom';\n\nconst MAX_ROWS_TO_READ = 20;\n\nconst enum BoundaryPosition {\n  TOP,\n  BOTTOM\n}\n\nexport class AccessibilityManager extends Disposable {\n  private _accessibilityTreeRoot: HTMLElement;\n  private _rowContainer: HTMLElement;\n  private _rowElements: HTMLElement[];\n  private _liveRegion: HTMLElement;\n  private _liveRegionLineCount: number = 0;\n\n  private _renderRowsDebouncer: RenderDebouncer;\n  private _screenDprMonitor: ScreenDprMonitor;\n\n  private _topBoundaryFocusListener: (e: FocusEvent) => void;\n  private _bottomBoundaryFocusListener: (e: FocusEvent) => void;\n\n  /**\n   * This queue has a character pushed to it for keys that are pressed, if the\n   * next character added to the terminal is equal to the key char then it is\n   * not announced (added to live region) because it has already been announced\n   * by the textarea event (which cannot be canceled). There are some race\n   * condition cases if there is typing while data is streaming, but this covers\n   * the main case of typing into the prompt and inputting the answer to a\n   * question (Y/N, etc.).\n   */\n  private _charsToConsume: string[] = [];\n\n  private _charsToAnnounce: string = '';\n\n  constructor(\n    private readonly _terminal: ITerminal,\n    private readonly _renderService: IRenderService\n  ) {\n    super();\n    this._accessibilityTreeRoot = document.createElement('div');\n    this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n\n    this._rowContainer = document.createElement('div');\n    this._rowContainer.setAttribute('role', 'list');\n    this._rowContainer.classList.add('xterm-accessibility-tree');\n    this._rowElements = [];\n    for (let i = 0; i < this._terminal.rows; i++) {\n      this._rowElements[i] = this._createAccessibilityTreeNode();\n      this._rowContainer.appendChild(this._rowElements[i]);\n    }\n\n    this._topBoundaryFocusListener = e => this._onBoundaryFocus(e, BoundaryPosition.TOP);\n    this._bottomBoundaryFocusListener = e => this._onBoundaryFocus(e, BoundaryPosition.BOTTOM);\n    this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    this._refreshRowsDimensions();\n    this._accessibilityTreeRoot.appendChild(this._rowContainer);\n\n    this._renderRowsDebouncer = new RenderDebouncer(this._renderRows.bind(this));\n    this._refreshRows();\n\n    this._liveRegion = document.createElement('div');\n    this._liveRegion.classList.add('live-region');\n    this._liveRegion.setAttribute('aria-live', 'assertive');\n    this._accessibilityTreeRoot.appendChild(this._liveRegion);\n\n    if (!this._terminal.element) {\n      throw new Error('Cannot enable accessibility before Terminal.open');\n    }\n    this._terminal.element.insertAdjacentElement('afterbegin', this._accessibilityTreeRoot);\n\n    this.register(this._renderRowsDebouncer);\n    this.register(this._terminal.onResize(e => this._onResize(e.rows)));\n    this.register(this._terminal.onRender(e => this._refreshRows(e.start, e.end)));\n    this.register(this._terminal.onScroll(() => this._refreshRows()));\n    // Line feed is an issue as the prompt won't be read out after a command is run\n    this.register(this._terminal.onA11yChar(char => this._onChar(char)));\n    this.register(this._terminal.onLineFeed(() => this._onChar('\\n')));\n    this.register(this._terminal.onA11yTab(spaceCount => this._onTab(spaceCount)));\n    this.register(this._terminal.onKey(e => this._onKey(e.key)));\n    this.register(this._terminal.onBlur(() => this._clearLiveRegion()));\n    this.register(this._renderService.onDimensionsChange(() => this._refreshRowsDimensions()));\n\n    this._screenDprMonitor = new ScreenDprMonitor();\n    this.register(this._screenDprMonitor);\n    this._screenDprMonitor.setListener(() => this._refreshRowsDimensions());\n    // This shouldn't be needed on modern browsers but is present in case the\n    // media query that drives the ScreenDprMonitor isn't supported\n    this.register(addDisposableDomListener(window, 'resize', () => this._refreshRowsDimensions()));\n  }\n\n  public dispose(): void {\n    super.dispose();\n    removeElementFromParent(this._accessibilityTreeRoot);\n    this._rowElements.length = 0;\n  }\n\n  private _onBoundaryFocus(e: FocusEvent, position: BoundaryPosition): void {\n    const boundaryElement = <HTMLElement>e.target;\n    const beforeBoundaryElement = this._rowElements[position === BoundaryPosition.TOP ? 1 : this._rowElements.length - 2];\n\n    // Don't scroll if the buffer top has reached the end in that direction\n    const posInSet = boundaryElement.getAttribute('aria-posinset');\n    const lastRowPos = position === BoundaryPosition.TOP ? '1' : `${this._terminal.buffer.lines.length}`;\n    if (posInSet === lastRowPos) {\n      return;\n    }\n\n    // Don't scroll when the last focused item was not the second row (focus is going the other\n    // direction)\n    if (e.relatedTarget !== beforeBoundaryElement) {\n      return;\n    }\n\n    // Remove old boundary element from array\n    let topBoundaryElement: HTMLElement;\n    let bottomBoundaryElement: HTMLElement;\n    if (position === BoundaryPosition.TOP) {\n      topBoundaryElement = boundaryElement;\n      bottomBoundaryElement = this._rowElements.pop()!;\n      this._rowContainer.removeChild(bottomBoundaryElement);\n    } else {\n      topBoundaryElement = this._rowElements.shift()!;\n      bottomBoundaryElement = boundaryElement;\n      this._rowContainer.removeChild(topBoundaryElement);\n    }\n\n    // Remove listeners from old boundary elements\n    topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n    bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Add new element to array/DOM\n    if (position === BoundaryPosition.TOP) {\n      const newElement = this._createAccessibilityTreeNode();\n      this._rowElements.unshift(newElement);\n      this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n    } else {\n      const newElement = this._createAccessibilityTreeNode();\n      this._rowElements.push(newElement);\n      this._rowContainer.appendChild(newElement);\n    }\n\n    // Add listeners to new boundary elements\n    this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Scroll up\n    this._terminal.scrollLines(position === BoundaryPosition.TOP ? -1 : 1);\n\n    // Focus new boundary before element\n    this._rowElements[position === BoundaryPosition.TOP ? 1 : this._rowElements.length - 2].focus();\n\n    // Prevent the standard behavior\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  private _onResize(rows: number): void {\n    // Remove bottom boundary listener\n    this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Grow rows as required\n    for (let i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n      this._rowElements[i] = this._createAccessibilityTreeNode();\n      this._rowContainer.appendChild(this._rowElements[i]);\n    }\n    // Shrink rows as required\n    while (this._rowElements.length > rows) {\n      this._rowContainer.removeChild(this._rowElements.pop()!);\n    }\n\n    // Add bottom boundary listener\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    this._refreshRowsDimensions();\n  }\n\n  private _createAccessibilityTreeNode(): HTMLElement {\n    const element = document.createElement('div');\n    element.setAttribute('role', 'listitem');\n    element.tabIndex = -1;\n    this._refreshRowDimensions(element);\n    return element;\n  }\n\n  private _onTab(spaceCount: number): void {\n    for (let i = 0; i < spaceCount; i++) {\n      this._onChar(' ');\n    }\n  }\n\n  private _onChar(char: string): void {\n    if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n      if (this._charsToConsume.length > 0) {\n        // Have the screen reader ignore the char if it was just input\n        const shiftedChar = this._charsToConsume.shift();\n        if (shiftedChar !== char) {\n          this._charsToAnnounce += char;\n        }\n      } else {\n        this._charsToAnnounce += char;\n      }\n\n      if (char === '\\n') {\n        this._liveRegionLineCount++;\n        if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n          this._liveRegion.textContent += Strings.tooMuchOutput;\n        }\n      }\n\n      // Only detach/attach on mac as otherwise messages can go unaccounced\n      if (isMac) {\n        if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n          setTimeout(() => {\n            this._accessibilityTreeRoot.appendChild(this._liveRegion);\n          }, 0);\n        }\n      }\n    }\n  }\n\n  private _clearLiveRegion(): void {\n    this._liveRegion.textContent = '';\n    this._liveRegionLineCount = 0;\n\n    // Only detach/attach on mac as otherwise messages can go unaccounced\n    if (isMac) {\n      removeElementFromParent(this._liveRegion);\n    }\n  }\n\n  private _onKey(keyChar: string): void {\n    this._clearLiveRegion();\n    this._charsToConsume.push(keyChar);\n  }\n\n  private _refreshRows(start?: number, end?: number): void {\n    this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n  }\n\n  private _renderRows(start: number, end: number): void {\n    const buffer: IBuffer = this._terminal.buffer;\n    const setSize = buffer.lines.length.toString();\n    for (let i = start; i <= end; i++) {\n      const lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n      const posInSet = (buffer.ydisp + i + 1).toString();\n      const element = this._rowElements[i];\n      if (element) {\n        if (lineData.length === 0) {\n          element.innerText = '\\u00a0';\n        } else {\n          element.textContent = lineData;\n        }\n        element.setAttribute('aria-posinset', posInSet);\n        element.setAttribute('aria-setsize', setSize);\n      }\n    }\n    this._announceCharacters();\n  }\n\n  private _refreshRowsDimensions(): void {\n    if (!this._renderService.dimensions.actualCellHeight) {\n      return;\n    }\n    if (this._rowElements.length !== this._terminal.rows) {\n      this._onResize(this._terminal.rows);\n    }\n    for (let i = 0; i < this._terminal.rows; i++) {\n      this._refreshRowDimensions(this._rowElements[i]);\n    }\n  }\n\n  private _refreshRowDimensions(element: HTMLElement): void {\n    element.style.height = `${this._renderService.dimensions.actualCellHeight}px`;\n  }\n\n  private _announceCharacters(): void {\n    if (this._charsToAnnounce.length === 0) {\n      return;\n    }\n    this._liveRegion.textContent += this._charsToAnnounce;\n    this._charsToAnnounce = '';\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ISelectionService } from 'browser/services/Services';\nimport { ICoreService } from 'common/services/Services';\n\n/**\n * Prepares text to be pasted into the terminal by normalizing the line endings\n * @param text The pasted text that needs processing before inserting into the terminal\n */\nexport function prepareTextForTerminal(text: string): string {\n  return text.replace(/\\r?\\n/g, '\\r');\n}\n\n/**\n * Bracket text for paste, if necessary, as per https://cirw.in/blog/bracketed-paste\n * @param text The pasted text to bracket\n */\nexport function bracketTextForPaste(text: string, bracketedPasteMode: boolean): string {\n  if (bracketedPasteMode) {\n    return '\\x1b[200~' + text + '\\x1b[201~';\n  }\n  return text;\n}\n\n/**\n * Binds copy functionality to the given terminal.\n * @param ev The original copy event to be handled\n */\nexport function copyHandler(ev: ClipboardEvent, selectionService: ISelectionService): void {\n  if (ev.clipboardData) {\n    ev.clipboardData.setData('text/plain', selectionService.selectionText);\n  }\n  // Prevent or the original text will be copied.\n  ev.preventDefault();\n}\n\n/**\n * Redirect the clipboard's data to the terminal's input handler.\n * @param ev The original paste event to be handled\n * @param term The terminal on which to apply the handled paste event\n */\nexport function handlePasteEvent(ev: ClipboardEvent, textarea: HTMLTextAreaElement, coreService: ICoreService): void {\n  ev.stopPropagation();\n  if (ev.clipboardData) {\n    const text = ev.clipboardData.getData('text/plain');\n    paste(text, textarea, coreService);\n  }\n}\n\nexport function paste(text: string, textarea: HTMLTextAreaElement, coreService: ICoreService): void {\n  text = prepareTextForTerminal(text);\n  text = bracketTextForPaste(text, coreService.decPrivateModes.bracketedPasteMode);\n  coreService.triggerDataEvent(text, true);\n  textarea.value = '';\n}\n\n/**\n * Moves the textarea under the mouse cursor and focuses it.\n * @param ev The original right click event to be handled.\n * @param textarea The terminal's textarea.\n */\nexport function moveTextAreaUnderMouseCursor(ev: MouseEvent, textarea: HTMLTextAreaElement, screenElement: HTMLElement): void {\n\n  // Calculate textarea position relative to the screen element\n  const pos = screenElement.getBoundingClientRect();\n  const left = ev.clientX - pos.left - 10;\n  const top = ev.clientY - pos.top - 10;\n\n  // Bring textarea at the cursor position\n  textarea.style.width = '20px';\n  textarea.style.height = '20px';\n  textarea.style.left = `${left}px`;\n  textarea.style.top = `${top}px`;\n  textarea.style.zIndex = '1000';\n\n  textarea.focus();\n}\n\n/**\n * Bind to right-click event and allow right-click copy and paste.\n * @param ev The original right click event to be handled.\n * @param textarea The terminal's textarea.\n * @param selectionService The terminal's selection manager.\n * @param shouldSelectWord If true and there is no selection the current word will be selected\n */\nexport function rightClickHandler(ev: MouseEvent, textarea: HTMLTextAreaElement, screenElement: HTMLElement, selectionService: ISelectionService, shouldSelectWord: boolean): void {\n  moveTextAreaUnderMouseCursor(ev, textarea, screenElement);\n\n  if (shouldSelectWord) {\n    selectionService.rightClickSelect(ev);\n  }\n\n  // Get textarea ready to copy from the context menu\n  textarea.value = selectionService.selectionText;\n  textarea.select();\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColor } from 'browser/Types';\n\n/**\n * Helper functions where the source type is \"channels\" (individual color channels as numbers).\n */\nexport namespace channels {\n  export function toCss(r: number, g: number, b: number, a?: number): string {\n    if (a !== undefined) {\n      return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}${toPaddedHex(a)}`;\n    }\n    return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}`;\n  }\n\n  export function toRgba(r: number, g: number, b: number, a: number = 0xFF): number {\n    // >>> 0 forces an unsigned int\n    return (r << 24 | g << 16 | b << 8 | a) >>> 0;\n  }\n}\n\n/**\n * Helper functions where the source type is `IColor`.\n */\nexport namespace color {\n  export function blend(bg: IColor, fg: IColor): IColor {\n    const a = (fg.rgba & 0xFF) / 255;\n    if (a === 1) {\n      return {\n        css: fg.css,\n        rgba: fg.rgba\n      };\n    }\n    const fgR = (fg.rgba >> 24) & 0xFF;\n    const fgG = (fg.rgba >> 16) & 0xFF;\n    const fgB = (fg.rgba >> 8) & 0xFF;\n    const bgR = (bg.rgba >> 24) & 0xFF;\n    const bgG = (bg.rgba >> 16) & 0xFF;\n    const bgB = (bg.rgba >> 8) & 0xFF;\n    const r = bgR + Math.round((fgR - bgR) * a);\n    const g = bgG + Math.round((fgG - bgG) * a);\n    const b = bgB + Math.round((fgB - bgB) * a);\n    const css = channels.toCss(r, g, b);\n    const rgba = channels.toRgba(r, g, b);\n    return { css, rgba };\n  }\n\n  export function isOpaque(color: IColor): boolean {\n    return (color.rgba & 0xFF) === 0xFF;\n  }\n\n  export function ensureContrastRatio(bg: IColor, fg: IColor, ratio: number): IColor | undefined {\n    const result = rgba.ensureContrastRatio(bg.rgba, fg.rgba, ratio);\n    if (!result) {\n      return undefined;\n    }\n    return rgba.toColor(\n      (result >> 24 & 0xFF),\n      (result >> 16 & 0xFF),\n      (result >> 8  & 0xFF)\n    );\n  }\n\n  export function opaque(color: IColor): IColor {\n    const rgbaColor = (color.rgba | 0xFF) >>> 0;\n    const [r, g, b] = rgba.toChannels(rgbaColor);\n    return {\n      css: channels.toCss(r, g, b),\n      rgba: rgbaColor\n    };\n  }\n\n  export function opacity(color: IColor, opacity: number): IColor {\n    const a = Math.round(opacity * 0xFF);\n    const [r, g, b] = rgba.toChannels(color.rgba);\n    return {\n      css: channels.toCss(r, g, b, a),\n      rgba: channels.toRgba(r, g, b, a)\n    };\n  }\n}\n\n/**\n * Helper functions where the source type is \"css\" (string: '#rgb', '#rgba', '#rrggbb', '#rrggbbaa').\n */\nexport namespace css {\n  export function toColor(css: string): IColor {\n    switch (css.length) {\n      case 7: // #rrggbb\n        return {\n          css,\n          rgba: (parseInt(css.slice(1), 16) << 8 | 0xFF) >>> 0\n        };\n      case 9: // #rrggbbaa\n        return {\n          css,\n          rgba: parseInt(css.slice(1), 16) >>> 0\n        };\n    }\n    throw new Error('css.toColor: Unsupported css format');\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgb\" (number: 0xrrggbb).\n */\nexport namespace rgb {\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param rgb The color to use.\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance(rgb: number): number {\n    return relativeLuminance2(\n      (rgb >> 16) & 0xFF,\n      (rgb >> 8 ) & 0xFF,\n      (rgb      ) & 0xFF);\n  }\n\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param r The red channel (0x00 to 0xFF).\n   * @param g The green channel (0x00 to 0xFF).\n   * @param b The blue channel (0x00 to 0xFF).\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance2(r: number, g: number, b: number): number {\n    const rs = r / 255;\n    const gs = g / 255;\n    const bs = b / 255;\n    const rr = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);\n    const rg = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);\n    const rb = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);\n    return rr * 0.2126 + rg * 0.7152 + rb * 0.0722;\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgba\" (number: 0xrrggbbaa).\n */\nexport namespace rgba {\n  export function ensureContrastRatio(bgRgba: number, fgRgba: number, ratio: number): number | undefined {\n    const bgL = rgb.relativeLuminance(bgRgba >> 8);\n    const fgL = rgb.relativeLuminance(fgRgba >> 8);\n    const cr = contrastRatio(bgL, fgL);\n    if (cr < ratio) {\n      if (fgL < bgL) {\n        return reduceLuminance(bgRgba, fgRgba, ratio);\n      }\n      return increaseLuminance(bgRgba, fgRgba, ratio);\n    }\n    return undefined;\n  }\n\n  export function reduceLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to reducing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR > 0 || fgG > 0 || fgB > 0)) {\n      // Reduce by 10% until the ratio is hit\n      fgR -= Math.max(0, Math.ceil(fgR * 0.1));\n      fgG -= Math.max(0, Math.ceil(fgG * 0.1));\n      fgB -= Math.max(0, Math.ceil(fgB * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  export function increaseLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to increasing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR < 0xFF || fgG < 0xFF || fgB < 0xFF)) {\n      // Increase by 10% until the ratio is hit\n      fgR = Math.min(0xFF, fgR + Math.ceil((255 - fgR) * 0.1));\n      fgG = Math.min(0xFF, fgG + Math.ceil((255 - fgG) * 0.1));\n      fgB = Math.min(0xFF, fgB + Math.ceil((255 - fgB) * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  export function toChannels(value: number): [number, number, number, number] {\n    return [(value >> 24) & 0xFF, (value >> 16) & 0xFF, (value >> 8) & 0xFF, value & 0xFF];\n  }\n\n  export function toColor(r: number, g: number, b: number): IColor {\n    return {\n      css: channels.toCss(r, g, b),\n      rgba: channels.toRgba(r, g, b)\n    };\n  }\n}\n\nexport function toPaddedHex(c: number): string {\n  const s = c.toString(16);\n  return s.length < 2 ? '0' + s : s;\n}\n\n/**\n * Gets the contrast ratio between two relative luminance values.\n * @param l1 The first relative luminance.\n * @param l2 The first relative luminance.\n * @see https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n */\nexport function contrastRatio(l1: number, l2: number): number {\n  if (l1 < l2) {\n    return (l2 + 0.05) / (l1 + 0.05);\n  }\n  return (l1 + 0.05) / (l2 + 0.05);\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColor, IColorContrastCache } from 'browser/Types';\n\nexport class ColorContrastCache implements IColorContrastCache {\n  private _color: { [bg: number]: { [fg: number]: IColor | null | undefined } | undefined } = {};\n  private _rgba: { [bg: number]: { [fg: number]: string | null | undefined } | undefined } = {};\n\n  public clear(): void {\n    this._color = {};\n    this._rgba = {};\n  }\n\n  public setCss(bg: number, fg: number, value: string | null): void {\n    if (!this._rgba[bg]) {\n      this._rgba[bg] = {};\n    }\n    this._rgba[bg]![fg] = value;\n  }\n\n  public getCss(bg: number, fg: number): string | null | undefined {\n    return this._rgba[bg] ? this._rgba[bg]![fg] : undefined;\n  }\n\n  public setColor(bg: number, fg: number, value: IColor | null): void {\n    if (!this._color[bg]) {\n      this._color[bg] = {};\n    }\n    this._color[bg]![fg] = value;\n  }\n\n  public getColor(bg: number, fg: number): IColor | null | undefined {\n    return this._color[bg] ? this._color[bg]![fg] : undefined;\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColorManager, IColor, IColorSet, IColorContrastCache } from 'browser/Types';\nimport { ITheme } from 'common/services/Services';\nimport { channels, color, css } from 'browser/Color';\nimport { ColorContrastCache } from 'browser/ColorContrastCache';\n\nconst DEFAULT_FOREGROUND = css.toColor('#ffffff');\nconst DEFAULT_BACKGROUND = css.toColor('#000000');\nconst DEFAULT_CURSOR = css.toColor('#ffffff');\nconst DEFAULT_CURSOR_ACCENT = css.toColor('#000000');\nconst DEFAULT_SELECTION = {\n  css: 'rgba(255, 255, 255, 0.3)',\n  rgba: 0xFFFFFF4D\n};\n\n// An IIFE to generate DEFAULT_ANSI_COLORS.\nexport const DEFAULT_ANSI_COLORS = Object.freeze((() => {\n  const colors = [\n    // dark:\n    css.toColor('#2e3436'),\n    css.toColor('#cc0000'),\n    css.toColor('#4e9a06'),\n    css.toColor('#c4a000'),\n    css.toColor('#3465a4'),\n    css.toColor('#75507b'),\n    css.toColor('#06989a'),\n    css.toColor('#d3d7cf'),\n    // bright:\n    css.toColor('#555753'),\n    css.toColor('#ef2929'),\n    css.toColor('#8ae234'),\n    css.toColor('#fce94f'),\n    css.toColor('#729fcf'),\n    css.toColor('#ad7fa8'),\n    css.toColor('#34e2e2'),\n    css.toColor('#eeeeec')\n  ];\n\n  // Fill in the remaining 240 ANSI colors.\n  // Generate colors (16-231)\n  const v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n  for (let i = 0; i < 216; i++) {\n    const r = v[(i / 36) % 6 | 0];\n    const g = v[(i / 6) % 6 | 0];\n    const b = v[i % 6];\n    colors.push({\n      css: channels.toCss(r, g, b),\n      rgba: channels.toRgba(r, g, b)\n    });\n  }\n\n  // Generate greys (232-255)\n  for (let i = 0; i < 24; i++) {\n    const c = 8 + i * 10;\n    colors.push({\n      css: channels.toCss(c, c, c),\n      rgba: channels.toRgba(c, c, c)\n    });\n  }\n\n  return colors;\n})());\n\n/**\n * Manages the source of truth for a terminal's colors.\n */\nexport class ColorManager implements IColorManager {\n  public colors: IColorSet;\n  private _ctx: CanvasRenderingContext2D;\n  private _litmusColor: CanvasGradient;\n  private _contrastCache: IColorContrastCache;\n\n  constructor(document: Document, public allowTransparency: boolean) {\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Could not get rendering context');\n    }\n    this._ctx = ctx;\n    this._ctx.globalCompositeOperation = 'copy';\n    this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n    this._contrastCache = new ColorContrastCache();\n    this.colors = {\n      foreground: DEFAULT_FOREGROUND,\n      background: DEFAULT_BACKGROUND,\n      cursor: DEFAULT_CURSOR,\n      cursorAccent: DEFAULT_CURSOR_ACCENT,\n      selectionTransparent: DEFAULT_SELECTION,\n      selectionOpaque: color.blend(DEFAULT_BACKGROUND, DEFAULT_SELECTION),\n      ansi: DEFAULT_ANSI_COLORS.slice(),\n      contrastCache: this._contrastCache\n    };\n  }\n\n  public onOptionsChange(key: string): void {\n    if (key === 'minimumContrastRatio') {\n      this._contrastCache.clear();\n    }\n  }\n\n  /**\n   * Sets the terminal's theme.\n   * @param theme The  theme to use. If a partial theme is provided then default\n   * colors will be used where colors are not defined.\n   */\n  public setTheme(theme: ITheme = {}): void {\n    this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n    this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n    this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n    this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n    this.colors.selectionTransparent = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n    this.colors.selectionOpaque = color.blend(this.colors.background, this.colors.selectionTransparent);\n    /**\n     * If selection color is opaque, blend it with background with 0.3 opacity\n     * Issue #2737\n     */\n    if (color.isOpaque(this.colors.selectionTransparent)) {\n      const opacity = 0.3;\n      this.colors.selectionTransparent = color.opacity(this.colors.selectionTransparent, opacity);\n    }\n    this.colors.ansi[0] = this._parseColor(theme.black, DEFAULT_ANSI_COLORS[0]);\n    this.colors.ansi[1] = this._parseColor(theme.red, DEFAULT_ANSI_COLORS[1]);\n    this.colors.ansi[2] = this._parseColor(theme.green, DEFAULT_ANSI_COLORS[2]);\n    this.colors.ansi[3] = this._parseColor(theme.yellow, DEFAULT_ANSI_COLORS[3]);\n    this.colors.ansi[4] = this._parseColor(theme.blue, DEFAULT_ANSI_COLORS[4]);\n    this.colors.ansi[5] = this._parseColor(theme.magenta, DEFAULT_ANSI_COLORS[5]);\n    this.colors.ansi[6] = this._parseColor(theme.cyan, DEFAULT_ANSI_COLORS[6]);\n    this.colors.ansi[7] = this._parseColor(theme.white, DEFAULT_ANSI_COLORS[7]);\n    this.colors.ansi[8] = this._parseColor(theme.brightBlack, DEFAULT_ANSI_COLORS[8]);\n    this.colors.ansi[9] = this._parseColor(theme.brightRed, DEFAULT_ANSI_COLORS[9]);\n    this.colors.ansi[10] = this._parseColor(theme.brightGreen, DEFAULT_ANSI_COLORS[10]);\n    this.colors.ansi[11] = this._parseColor(theme.brightYellow, DEFAULT_ANSI_COLORS[11]);\n    this.colors.ansi[12] = this._parseColor(theme.brightBlue, DEFAULT_ANSI_COLORS[12]);\n    this.colors.ansi[13] = this._parseColor(theme.brightMagenta, DEFAULT_ANSI_COLORS[13]);\n    this.colors.ansi[14] = this._parseColor(theme.brightCyan, DEFAULT_ANSI_COLORS[14]);\n    this.colors.ansi[15] = this._parseColor(theme.brightWhite, DEFAULT_ANSI_COLORS[15]);\n    // Clear our the cache\n    this._contrastCache.clear();\n  }\n\n  private _parseColor(\n    css: string | undefined,\n    fallback: IColor,\n    allowTransparency: boolean = this.allowTransparency\n  ): IColor {\n    if (css === undefined) {\n      return fallback;\n    }\n\n    // If parsing the value results in failure, then it must be ignored, and the attribute must\n    // retain its previous value.\n    // -- https://html.spec.whatwg.org/multipage/canvas.html#fill-and-stroke-styles\n    this._ctx.fillStyle = this._litmusColor;\n    this._ctx.fillStyle = css;\n    if (typeof this._ctx.fillStyle !== 'string') {\n      console.warn(`Color: ${css} is invalid using fallback ${fallback.css}`);\n      return fallback;\n    }\n\n    this._ctx.fillRect(0, 0, 1, 1);\n    const data = this._ctx.getImageData(0, 0, 1, 1).data;\n\n    // Check if the printed color was transparent\n    if (data[3] !== 0xFF) {\n      if (!allowTransparency) {\n        // Ideally we'd just ignore the alpha channel, but...\n        //\n        // Browsers may not give back exactly the same RGB values we put in, because most/all\n        // convert the color to a pre-multiplied representation. getImageData converts that back to\n        // a un-premultipled representation, but the precision loss may make the RGB channels unuable\n        // on their own.\n        //\n        // E.g. In Chrome #12345610 turns into #10305010, and in the extreme case, 0xFFFFFF00 turns\n        // into 0x00000000.\n        //\n        // \"Note: Due to the lossy nature of converting to and from premultiplied alpha color values,\n        // pixels that have just been set using putImageData() might be returned to an equivalent\n        // getImageData() as different values.\"\n        // -- https://html.spec.whatwg.org/multipage/canvas.html#pixel-manipulation\n        //\n        // So let's just use the fallback color in this case instead.\n        console.warn(\n          `Color: ${css} is using transparency, but allowTransparency is false. ` +\n          `Using fallback ${fallback.css}.`\n        );\n        return fallback;\n      }\n\n      // https://html.spec.whatwg.org/multipage/canvas.html#serialisation-of-a-color\n      // the color value has alpha less than 1.0, and the string is the color value in the CSS rgba()\n      const [r, g, b, a] = this._ctx.fillStyle.substring(5, this._ctx.fillStyle.length - 1).split(',').map(component => Number(component));\n      const alpha = Math.round(a * 255);\n      const rgba: number = channels.toRgba(r, g, b, alpha);\n      return {\n        rgba,\n        css\n      };\n    }\n\n    return {\n      // https://html.spec.whatwg.org/multipage/canvas.html#serialisation-of-a-color\n      // if it has alpha equal to 1.0, then the string is a lowercase six-digit hex value, prefixed with a \"#\" character\n      css: this._ctx.fillStyle,\n      rgba: channels.toRgba(data[0], data[1], data[2], data[3])\n    };\n  }\n}\n","/**\n * Copyright (c) 2020 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function removeElementFromParent(...elements: (HTMLElement | undefined)[]): void {\n  for (const e of elements) {\n    e?.parentElement?.removeChild(e);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\n/**\n * Adds a disposable listener to a node in the DOM, returning the disposable.\n * @param type The event type.\n * @param handler The handler for the listener.\n */\nexport function addDisposableDomListener(\n  node: Element | Window | Document,\n  type: string,\n  handler: (e: any) => void,\n  options?: boolean | AddEventListenerOptions\n): IDisposable {\n  node.addEventListener(type, handler, options);\n  let disposed = false;\n  return {\n    dispose: () => {\n      if (disposed) {\n        return;\n      }\n      disposed = true;\n      node.removeEventListener(type, handler, options);\n    }\n  };\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILinkifierEvent, ILinkMatcher, LinkMatcherHandler, ILinkMatcherOptions, ILinkifier, IMouseZoneManager, IMouseZone, IRegisteredLinkMatcher } from 'browser/Types';\nimport { IBufferStringIteratorResult } from 'common/buffer/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { ILogService, IBufferService, IOptionsService, IUnicodeService } from 'common/services/Services';\n\n/**\n * Limit of the unwrapping line expansion (overscan) at the top and bottom\n * of the actual viewport in ASCII characters.\n * A limit of 2000 should match most sane urls.\n */\nconst OVERSCAN_CHAR_LIMIT = 2000;\n\n/**\n * The Linkifier applies links to rows shortly after they have been refreshed.\n */\nexport class Linkifier implements ILinkifier {\n  /**\n   * The time to wait after a row is changed before it is linkified. This prevents\n   * the costly operation of searching every row multiple times, potentially a\n   * huge amount of times.\n   */\n  protected static _timeBeforeLatency = 200;\n\n  protected _linkMatchers: IRegisteredLinkMatcher[] = [];\n\n  private _mouseZoneManager: IMouseZoneManager | undefined;\n  private _element: HTMLElement | undefined;\n\n  private _rowsTimeoutId: number | undefined;\n  private _nextLinkMatcherId = 0;\n  private _rowsToLinkify: { start: number | undefined, end: number | undefined };\n\n  private _onShowLinkUnderline = new EventEmitter<ILinkifierEvent>();\n  public get onShowLinkUnderline(): IEvent<ILinkifierEvent> { return this._onShowLinkUnderline.event; }\n  private _onHideLinkUnderline = new EventEmitter<ILinkifierEvent>();\n  public get onHideLinkUnderline(): IEvent<ILinkifierEvent> { return this._onHideLinkUnderline.event; }\n  private _onLinkTooltip = new EventEmitter<ILinkifierEvent>();\n  public get onLinkTooltip(): IEvent<ILinkifierEvent> { return this._onLinkTooltip.event; }\n\n  constructor(\n    @IBufferService protected readonly _bufferService: IBufferService,\n    @ILogService private readonly _logService: ILogService,\n    @IUnicodeService private readonly _unicodeService: IUnicodeService\n  ) {\n    this._rowsToLinkify = {\n      start: undefined,\n      end: undefined\n    };\n  }\n\n  /**\n   * Attaches the linkifier to the DOM, enabling linkification.\n   * @param mouseZoneManager The mouse zone manager to register link zones with.\n   */\n  public attachToDom(element: HTMLElement, mouseZoneManager: IMouseZoneManager): void {\n    this._element = element;\n    this._mouseZoneManager = mouseZoneManager;\n  }\n\n  /**\n   * Queue linkification on a set of rows.\n   * @param start The row to linkify from (inclusive).\n   * @param end The row to linkify to (inclusive).\n   */\n  public linkifyRows(start: number, end: number): void {\n    // Don't attempt linkify if not yet attached to DOM\n    if (!this._mouseZoneManager) {\n      return;\n    }\n\n    // Increase range to linkify\n    if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {\n      this._rowsToLinkify.start = start;\n      this._rowsToLinkify.end = end;\n    } else {\n      this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n      this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n    }\n\n    // Clear out any existing links on this row range\n    this._mouseZoneManager.clearAll(start, end);\n\n    // Restart timer\n    if (this._rowsTimeoutId) {\n      clearTimeout(this._rowsTimeoutId);\n    }\n    this._rowsTimeoutId = <number><any>setTimeout(() => this._linkifyRows(), Linkifier._timeBeforeLatency);\n  }\n\n  /**\n   * Linkifies the rows requested.\n   */\n  private _linkifyRows(): void {\n    this._rowsTimeoutId = undefined;\n    const buffer = this._bufferService.buffer;\n\n    if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {\n      this._logService.debug('_rowToLinkify was unset before _linkifyRows was called');\n      return;\n    }\n\n    // Ensure the start row exists\n    const absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n    if (absoluteRowIndexStart >= buffer.lines.length) {\n      return;\n    }\n\n    // Invalidate bad end row values (if a resize happened)\n    const absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._bufferService.rows) + 1;\n\n    // Iterate over the range of unwrapped content strings within start..end\n    // (excluding).\n    // _doLinkifyRow gets full unwrapped lines with the start row as buffer offset\n    // for every matcher.\n    // The unwrapping is needed to also match content that got wrapped across\n    // several buffer lines. To avoid a worst case scenario where the whole buffer\n    // contains just a single unwrapped string we limit this line expansion beyond\n    // the viewport to +OVERSCAN_CHAR_LIMIT chars (overscan) at top and bottom.\n    // This comes with the tradeoff that matches longer than OVERSCAN_CHAR_LIMIT\n    // chars will not match anymore at the viewport borders.\n    const overscanLineLimit = Math.ceil(OVERSCAN_CHAR_LIMIT / this._bufferService.cols);\n    const iterator = this._bufferService.buffer.iterator(\n      false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n    while (iterator.hasNext()) {\n      const lineData: IBufferStringIteratorResult = iterator.next();\n      for (let i = 0; i < this._linkMatchers.length; i++) {\n        this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n      }\n    }\n\n    this._rowsToLinkify.start = undefined;\n    this._rowsToLinkify.end = undefined;\n  }\n\n  /**\n   * Registers a link matcher, allowing custom link patterns to be matched and\n   * handled.\n   * @param regex The regular expression to search for. Specifically, this\n   * searches the textContent of the rows. You will want to use \\s to match a\n   * space ' ' character for example.\n   * @param handler The callback when the link is called.\n   * @param options Options for the link matcher.\n   * @return The ID of the new matcher, this can be used to deregister.\n   */\n  public registerLinkMatcher(regex: RegExp, handler: LinkMatcherHandler, options: ILinkMatcherOptions = {}): number {\n    if (!handler) {\n      throw new Error('handler must be defined');\n    }\n    const matcher: IRegisteredLinkMatcher = {\n      id: this._nextLinkMatcherId++,\n      regex,\n      handler,\n      matchIndex: options.matchIndex,\n      validationCallback: options.validationCallback,\n      hoverTooltipCallback: options.tooltipCallback,\n      hoverLeaveCallback: options.leaveCallback,\n      willLinkActivate: options.willLinkActivate,\n      priority: options.priority || 0\n    };\n    this._addLinkMatcherToList(matcher);\n    return matcher.id;\n  }\n\n  /**\n   * Inserts a link matcher to the list in the correct position based on the\n   * priority of each link matcher. New link matchers of equal priority are\n   * considered after older link matchers.\n   * @param matcher The link matcher to be added.\n   */\n  private _addLinkMatcherToList(matcher: IRegisteredLinkMatcher): void {\n    if (this._linkMatchers.length === 0) {\n      this._linkMatchers.push(matcher);\n      return;\n    }\n\n    for (let i = this._linkMatchers.length - 1; i >= 0; i--) {\n      if (matcher.priority <= this._linkMatchers[i].priority) {\n        this._linkMatchers.splice(i + 1, 0, matcher);\n        return;\n      }\n    }\n\n    this._linkMatchers.splice(0, 0, matcher);\n  }\n\n  /**\n   * Deregisters a link matcher if it has been registered.\n   * @param matcherId The link matcher's ID (returned after register)\n   * @return Whether a link matcher was found and deregistered.\n   */\n  public deregisterLinkMatcher(matcherId: number): boolean {\n    for (let i = 0; i < this._linkMatchers.length; i++) {\n      if (this._linkMatchers[i].id === matcherId) {\n        this._linkMatchers.splice(i, 1);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Linkifies a row given a specific handler.\n   * @param rowIndex The row index to linkify (absolute index).\n   * @param text string content of the unwrapped row.\n   * @param matcher The link matcher for this line.\n   */\n  private _doLinkifyRow(rowIndex: number, text: string, matcher: ILinkMatcher): void {\n    // clone regex to do a global search on text\n    const rex = new RegExp(matcher.regex.source, (matcher.regex.flags || '') + 'g');\n    let match;\n    let stringIndex = -1;\n    while ((match = rex.exec(text)) !== null) {\n      const uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n      if (!uri) {\n        // something matched but does not comply with the given matchIndex\n        // since this is most likely a bug the regex itself we simply do nothing here\n        this._logService.debug('match found without corresponding matchIndex', match, matcher);\n        break;\n      }\n\n      // Get index, match.index is for the outer match which includes negated chars\n      // therefore we cannot use match.index directly, instead we search the position\n      // of the match group in text again\n      // also correct regex and string search offsets for the next loop run\n      stringIndex = text.indexOf(uri, stringIndex + 1);\n      rex.lastIndex = stringIndex + uri.length;\n      if (stringIndex < 0) {\n        // invalid stringIndex (should not have happened)\n        break;\n      }\n\n      // get the buffer index as [absolute row, col] for the match\n      const bufferIndex = this._bufferService.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n      if (bufferIndex[0] < 0) {\n        // invalid bufferIndex (should not have happened)\n        break;\n      }\n\n      const line = this._bufferService.buffer.lines.get(bufferIndex[0]);\n      if (!line) {\n        break;\n      }\n\n      const attr = line.getFg(bufferIndex[1]);\n      const fg = attr ? (attr >> 9) & 0x1ff : undefined;\n\n      if (matcher.validationCallback) {\n        matcher.validationCallback(uri, isValid => {\n          // Discard link if the line has already changed\n          if (this._rowsTimeoutId) {\n            return;\n          }\n          if (isValid) {\n            this._addLink(bufferIndex[1], bufferIndex[0] - this._bufferService.buffer.ydisp, uri, matcher, fg);\n          }\n        });\n      } else {\n        this._addLink(bufferIndex[1], bufferIndex[0] - this._bufferService.buffer.ydisp, uri, matcher, fg);\n      }\n    }\n  }\n\n  /**\n   * Registers a link to the mouse zone manager.\n   * @param x The column the link starts.\n   * @param y The row the link is on.\n   * @param uri The URI of the link.\n   * @param matcher The link matcher for the link.\n   * @param fg The link color for hover event.\n   */\n  private _addLink(x: number, y: number, uri: string, matcher: ILinkMatcher, fg: number | undefined): void {\n    if (!this._mouseZoneManager || !this._element) {\n      return;\n    }\n    // FIXME: get cell length from buffer to avoid mismatch after Unicode version change\n    const width = this._unicodeService.getStringCellWidth(uri);\n    const x1 = x % this._bufferService.cols;\n    const y1 = y + Math.floor(x / this._bufferService.cols);\n    let x2 = (x1 + width) % this._bufferService.cols;\n    let y2 = y1 + Math.floor((x1 + width) / this._bufferService.cols);\n    if (x2 === 0) {\n      x2 = this._bufferService.cols;\n      y2--;\n    }\n\n    this._mouseZoneManager.add(new MouseZone(\n      x1 + 1,\n      y1 + 1,\n      x2 + 1,\n      y2 + 1,\n      e => {\n        if (matcher.handler) {\n          return matcher.handler(e, uri);\n        }\n        const newWindow = window.open();\n        if (newWindow) {\n          newWindow.opener = null;\n          newWindow.location.href = uri;\n        } else {\n          console.warn('Opening link blocked as opener could not be cleared');\n        }\n      },\n      () => {\n        this._onShowLinkUnderline.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        this._element!.classList.add('xterm-cursor-pointer');\n      },\n      e => {\n        this._onLinkTooltip.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        if (matcher.hoverTooltipCallback) {\n          // Note that IViewportRange use 1-based coordinates to align with escape sequences such\n          // as CUP which use 1,1 as the default for row/col\n          matcher.hoverTooltipCallback(e, uri, { start: { x: x1, y: y1 }, end: { x: x2, y: y2 } });\n        }\n      },\n      () => {\n        this._onHideLinkUnderline.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        this._element!.classList.remove('xterm-cursor-pointer');\n        if (matcher.hoverLeaveCallback) {\n          matcher.hoverLeaveCallback();\n        }\n      },\n      e => {\n        if (matcher.willLinkActivate) {\n          return matcher.willLinkActivate(e, uri);\n        }\n        return true;\n      }\n    ));\n  }\n\n  private _createLinkHoverEvent(x1: number, y1: number, x2: number, y2: number, fg: number | undefined): ILinkifierEvent {\n    return { x1, y1, x2, y2, cols: this._bufferService.cols, fg };\n  }\n}\n\nexport class MouseZone implements IMouseZone {\n  constructor(\n    public x1: number,\n    public y1: number,\n    public x2: number,\n    public y2: number,\n    public clickCallback: (e: MouseEvent) => any,\n    public hoverCallback: (e: MouseEvent) => any,\n    public tooltipCallback: (e: MouseEvent) => any,\n    public leaveCallback: () => void,\n    public willLinkActivate: (e: MouseEvent) => boolean\n  ) {\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILinkifier2, ILinkProvider, IBufferCellPosition, ILink, ILinkifierEvent, ILinkDecorations, ILinkWithState } from 'browser/Types';\nimport { IDisposable } from 'common/Types';\nimport { IMouseService, IRenderService } from './services/Services';\nimport { IBufferService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable, getDisposeArrayDisposable, disposeArray } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\n\nexport class Linkifier2 extends Disposable implements ILinkifier2 {\n  private _element: HTMLElement | undefined;\n  private _mouseService: IMouseService | undefined;\n  private _renderService: IRenderService | undefined;\n  private _linkProviders: ILinkProvider[] = [];\n  public get currentLink(): ILinkWithState | undefined { return this._currentLink; }\n  protected _currentLink: ILinkWithState | undefined;\n  private _lastMouseEvent: MouseEvent | undefined;\n  private _linkCacheDisposables: IDisposable[] = [];\n  private _lastBufferCell: IBufferCellPosition | undefined;\n  private _isMouseOut: boolean = true;\n  private _activeProviderReplies: Map<Number, ILinkWithState[] | undefined> | undefined;\n  private _activeLine: number = -1;\n\n  private _onShowLinkUnderline = this.register(new EventEmitter<ILinkifierEvent>());\n  public get onShowLinkUnderline(): IEvent<ILinkifierEvent> { return this._onShowLinkUnderline.event; }\n  private _onHideLinkUnderline = this.register(new EventEmitter<ILinkifierEvent>());\n  public get onHideLinkUnderline(): IEvent<ILinkifierEvent> { return this._onHideLinkUnderline.event; }\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this.register(getDisposeArrayDisposable(this._linkCacheDisposables));\n  }\n\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    this._linkProviders.push(linkProvider);\n    return {\n      dispose: () => {\n        // Remove the link provider from the list\n        const providerIndex = this._linkProviders.indexOf(linkProvider);\n\n        if (providerIndex !== -1) {\n          this._linkProviders.splice(providerIndex, 1);\n        }\n      }\n    };\n  }\n\n  public attachToDom(element: HTMLElement, mouseService: IMouseService, renderService: IRenderService): void {\n    this._element = element;\n    this._mouseService = mouseService;\n    this._renderService = renderService;\n\n    this.register(addDisposableDomListener(this._element, 'mouseleave', () => {\n      this._isMouseOut = true;\n      this._clearCurrentLink();\n    }));\n    this.register(addDisposableDomListener(this._element, 'mousemove', this._onMouseMove.bind(this)));\n    this.register(addDisposableDomListener(this._element, 'click', this._onClick.bind(this)));\n  }\n\n  private _onMouseMove(event: MouseEvent): void {\n    this._lastMouseEvent = event;\n\n    if (!this._element || !this._mouseService) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(event, this._element, this._mouseService);\n    if (!position) {\n      return;\n    }\n    this._isMouseOut = false;\n\n    // Ignore the event if it's an embedder created hover widget\n    const composedPath = event.composedPath() as HTMLElement[];\n    for (let i = 0; i < composedPath.length; i++) {\n      const target = composedPath[i];\n      // Hit Terminal.element, break and continue\n      if (target.classList.contains('xterm')) {\n        break;\n      }\n      // It's a hover, don't respect hover event\n      if (target.classList.contains('xterm-hover')) {\n        return;\n      }\n    }\n\n    if (!this._lastBufferCell || (position.x !== this._lastBufferCell.x || position.y !== this._lastBufferCell.y)) {\n      this._onHover(position);\n      this._lastBufferCell = position;\n    }\n  }\n\n  private _onHover(position: IBufferCellPosition): void {\n    // TODO: This currently does not cache link provider results across wrapped lines, activeLine should be something like `activeRange: {startY, endY}`\n    // Check if we need to clear the link\n    if (this._activeLine !== position.y) {\n      this._clearCurrentLink();\n      this._askForLink(position, false);\n      return;\n    }\n\n    // Check the if the link is in the mouse position\n    const isCurrentLinkInPosition = this._currentLink && this._linkAtPosition(this._currentLink.link, position);\n    if (!isCurrentLinkInPosition) {\n      this._clearCurrentLink();\n      this._askForLink(position, true);\n    }\n  }\n\n  private _askForLink(position: IBufferCellPosition, useLineCache: boolean): void {\n    if (!this._activeProviderReplies || !useLineCache) {\n      this._activeProviderReplies?.forEach(reply => {\n        reply?.forEach(linkWithState => {\n          if (linkWithState.link.dispose) {\n            linkWithState.link.dispose();\n          }\n        });\n      });\n      this._activeProviderReplies = new Map();\n      this._activeLine = position.y;\n    }\n    let linkProvided = false;\n\n    // There is no link cached, so ask for one\n    this._linkProviders.forEach((linkProvider, i) => {\n      if (useLineCache) {\n        const existingReply = this._activeProviderReplies?.get(i);\n        // If there isn't a reply, the provider hasn't responded yet.\n\n        // TODO: If there isn't a reply yet it means that the provider is still resolving. Ensuring\n        // provideLinks isn't triggered again saves ILink.hover firing twice though. This probably\n        // needs promises to get fixed\n        if (existingReply) {\n          linkProvided = this._checkLinkProviderResult(i, position, linkProvided);\n        }\n      } else {\n        linkProvider.provideLinks(position.y, (links: ILink[] | undefined) => {\n          if (this._isMouseOut) {\n            return;\n          }\n          const linksWithState: ILinkWithState[] | undefined = links?.map(link  => ({ link }));\n          this._activeProviderReplies?.set(i, linksWithState);\n          linkProvided = this._checkLinkProviderResult(i, position, linkProvided);\n\n          // If all providers have responded, remove lower priority links that intersect ranges of\n          // higher priority links\n          if (this._activeProviderReplies?.size === this._linkProviders.length) {\n            this._removeIntersectingLinks(position.y, this._activeProviderReplies);\n          }\n        });\n      }\n    });\n  }\n\n  private _removeIntersectingLinks(y: number, replies: Map<Number, ILinkWithState[] | undefined>): void {\n    const occupiedCells = new Set<number>();\n    for (let i = 0; i < replies.size; i++) {\n      const providerReply = replies.get(i);\n      if (!providerReply) {\n        continue;\n      }\n      for (let i = 0; i < providerReply.length; i++) {\n        const linkWithState = providerReply[i];\n        const startX = linkWithState.link.range.start.y < y ? 0 : linkWithState.link.range.start.x;\n        const endX = linkWithState.link.range.end.y > y ? this._bufferService.cols : linkWithState.link.range.end.x;\n        for (let x = startX; x <= endX; x++) {\n          if (occupiedCells.has(x)) {\n            providerReply.splice(i--, 1);\n            break;\n          }\n          occupiedCells.add(x);\n        }\n      }\n    }\n  }\n\n  private _checkLinkProviderResult(index: number, position: IBufferCellPosition, linkProvided: boolean): boolean {\n    if (!this._activeProviderReplies) {\n      return linkProvided;\n    }\n\n    const links = this._activeProviderReplies.get(index);\n\n    // Check if every provider before this one has come back undefined\n    let hasLinkBefore = false;\n    for (let j = 0; j < index; j++) {\n      if (!this._activeProviderReplies.has(j) || this._activeProviderReplies.get(j)) {\n        hasLinkBefore = true;\n      }\n    }\n\n    // If all providers with higher priority came back undefined, then this provider's link for\n    // the position should be used\n    if (!hasLinkBefore && links) {\n      const linkAtPosition = links.find(link => this._linkAtPosition(link.link, position));\n      if (linkAtPosition) {\n        linkProvided = true;\n        this._handleNewLink(linkAtPosition);\n      }\n    }\n\n    // Check if all the providers have responded\n    if (this._activeProviderReplies.size === this._linkProviders.length && !linkProvided) {\n      // Respect the order of the link providers\n      for (let j = 0; j < this._activeProviderReplies.size; j++) {\n        const currentLink = this._activeProviderReplies.get(j)?.find(link => this._linkAtPosition(link.link, position));\n        if (currentLink) {\n          linkProvided = true;\n          this._handleNewLink(currentLink);\n          break;\n        }\n      }\n    }\n\n    return linkProvided;\n  }\n\n  private _onClick(event: MouseEvent): void {\n    if (!this._element || !this._mouseService || !this._currentLink) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(event, this._element, this._mouseService);\n\n    if (!position) {\n      return;\n    }\n\n    if (this._linkAtPosition(this._currentLink.link, position)) {\n      this._currentLink.link.activate(event, this._currentLink.link.text);\n    }\n  }\n\n  private _clearCurrentLink(startRow?: number, endRow?: number): void {\n    if (!this._element || !this._currentLink || !this._lastMouseEvent) {\n      return;\n    }\n\n    // If we have a start and end row, check that the link is within it\n    if (!startRow || !endRow || (this._currentLink.link.range.start.y >= startRow && this._currentLink.link.range.end.y <= endRow)) {\n      this._linkLeave(this._element, this._currentLink.link, this._lastMouseEvent);\n      this._currentLink = undefined;\n      disposeArray(this._linkCacheDisposables);\n    }\n  }\n\n  private _handleNewLink(linkWithState: ILinkWithState): void {\n    if (!this._element || !this._lastMouseEvent || !this._mouseService) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);\n\n    if (!position) {\n      return;\n    }\n\n    // Trigger hover if the we have a link at the position\n    if (this._linkAtPosition(linkWithState.link, position)) {\n      this._currentLink = linkWithState;\n      this._currentLink.state = {\n        decorations: {\n          underline: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.underline,\n          pointerCursor: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.pointerCursor\n        },\n        isHovered: true\n      };\n      this._linkHover(this._element, linkWithState.link, this._lastMouseEvent);\n\n      // Add listener for tracking decorations changes\n      linkWithState.link.decorations = {} as ILinkDecorations;\n      Object.defineProperties(linkWithState.link.decorations, {\n        pointerCursor: {\n          get: () => this._currentLink?.state?.decorations.pointerCursor,\n          set: v => {\n            if (this._currentLink?.state && this._currentLink.state.decorations.pointerCursor !== v) {\n              this._currentLink.state.decorations.pointerCursor = v;\n              if (this._currentLink.state.isHovered) {\n                this._element?.classList.toggle('xterm-cursor-pointer', v);\n              }\n            }\n          }\n        },\n        underline: {\n          get: () => this._currentLink?.state?.decorations.underline,\n          set: v => {\n            if (this._currentLink?.state && this._currentLink?.state?.decorations.underline !== v) {\n              this._currentLink.state.decorations.underline = v;\n              if (this._currentLink.state.isHovered) {\n                this._fireUnderlineEvent(linkWithState.link, v);\n              }\n            }\n          }\n        }\n      });\n\n      // Add listener for rerendering\n      if (this._renderService) {\n        this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(e => {\n          // When start is 0 a scroll most likely occurred, make sure links above the fold also get\n          // cleared.\n          const start = e.start === 0 ? 0 : e.start + 1 + this._bufferService.buffer.ydisp;\n          this._clearCurrentLink(start, e.end + 1 + this._bufferService.buffer.ydisp);\n        }));\n      }\n    }\n  }\n\n  protected _linkHover(element: HTMLElement, link: ILink, event: MouseEvent): void {\n    if (this._currentLink?.state) {\n      this._currentLink.state.isHovered = true;\n      if (this._currentLink.state.decorations.underline) {\n        this._fireUnderlineEvent(link, true);\n      }\n      if (this._currentLink.state.decorations.pointerCursor) {\n        element.classList.add('xterm-cursor-pointer');\n      }\n    }\n\n    if (link.hover) {\n      link.hover(event, link.text);\n    }\n  }\n\n  private _fireUnderlineEvent(link: ILink, showEvent: boolean): void {\n    const range = link.range;\n    const scrollOffset = this._bufferService.buffer.ydisp;\n    const event = this._createLinkUnderlineEvent(range.start.x - 1, range.start.y - scrollOffset - 1, range.end.x, range.end.y - scrollOffset - 1, undefined);\n    const emitter = showEvent ? this._onShowLinkUnderline : this._onHideLinkUnderline;\n    emitter.fire(event);\n  }\n\n  protected _linkLeave(element: HTMLElement, link: ILink, event: MouseEvent): void {\n    if (this._currentLink?.state) {\n      this._currentLink.state.isHovered = false;\n      if (this._currentLink.state.decorations.underline) {\n        this._fireUnderlineEvent(link, false);\n      }\n      if (this._currentLink.state.decorations.pointerCursor) {\n        element.classList.remove('xterm-cursor-pointer');\n      }\n    }\n\n    if (link.leave) {\n      link.leave(event, link.text);\n    }\n  }\n\n  /**\n   * Check if the buffer position is within the link\n   * @param link\n   * @param position\n   */\n  private _linkAtPosition(link: ILink, position: IBufferCellPosition): boolean {\n    const sameLine = link.range.start.y === link.range.end.y;\n    const wrappedFromLeft = link.range.start.y < position.y;\n    const wrappedToRight = link.range.end.y > position.y;\n\n    // If the start and end have the same y, then the position must be between start and end x\n    // If not, then handle each case seperately, depending on which way it wraps\n    return ((sameLine && link.range.start.x <= position.x && link.range.end.x >= position.x) ||\n      (wrappedFromLeft && link.range.end.x >= position.x) ||\n      (wrappedToRight && link.range.start.x <= position.x) ||\n      (wrappedFromLeft && wrappedToRight)) &&\n      link.range.start.y <= position.y &&\n      link.range.end.y >= position.y;\n  }\n\n  /**\n   * Get the buffer position from a mouse event\n   * @param event\n   */\n  private _positionFromMouseEvent(event: MouseEvent, element: HTMLElement, mouseService: IMouseService): IBufferCellPosition | undefined {\n    const coords = mouseService.getCoords(event, element, this._bufferService.cols, this._bufferService.rows);\n    if (!coords) {\n      return;\n    }\n\n    return { x: coords[0], y: coords[1] + this._bufferService.buffer.ydisp };\n  }\n\n  private _createLinkUnderlineEvent(x1: number, y1: number, x2: number, y2: number, fg: number | undefined): ILinkifierEvent {\n    return { x1, y1, x2, y2, cols: this._bufferService.cols, fg };\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n// eslint-disable-next-line prefer-const\nexport let promptLabel = 'Terminal input';\n\n// eslint-disable-next-line prefer-const\nexport let tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IMouseService, ISelectionService } from 'browser/services/Services';\nimport { IMouseZoneManager, IMouseZone } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\n/**\n * The MouseZoneManager allows components to register zones within the terminal\n * that trigger hover and click callbacks.\n *\n * This class was intentionally made not so robust initially as the only case it\n * needed to support was single-line links which never overlap. Improvements can\n * be made in the future.\n */\nexport class MouseZoneManager extends Disposable implements IMouseZoneManager {\n  private _zones: IMouseZone[] = [];\n\n  private _areZonesActive: boolean = false;\n  private _mouseMoveListener: (e: MouseEvent) => any;\n  private _mouseLeaveListener: (e: MouseEvent) => any;\n  private _clickListener: (e: MouseEvent) => any;\n\n  private _tooltipTimeout: number | undefined;\n  private _currentZone: IMouseZone | undefined;\n  private _lastHoverCoords: [number | undefined, number | undefined] = [undefined, undefined];\n  private _initialSelectionLength: number = 0;\n\n  constructor(\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IMouseService private readonly _mouseService: IMouseService,\n    @ISelectionService private readonly _selectionService: ISelectionService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n\n    this.register(addDisposableDomListener(this._element, 'mousedown', e => this._onMouseDown(e)));\n\n    // These events are expensive, only listen to it when mouse zones are active\n    this._mouseMoveListener = e => this._onMouseMove(e);\n    this._mouseLeaveListener = e => this._onMouseLeave(e);\n    this._clickListener = e => this._onClick(e);\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this._deactivate();\n  }\n\n  public add(zone: IMouseZone): void {\n    this._zones.push(zone);\n    if (this._zones.length === 1) {\n      this._activate();\n    }\n  }\n\n  public clearAll(start?: number, end?: number): void {\n    // Exit if there's nothing to clear\n    if (this._zones.length === 0) {\n      return;\n    }\n\n    // Clear all if start/end weren't set\n    if (!start || !end) {\n      start = 0;\n      end = this._bufferService.rows - 1;\n    }\n\n    // Iterate through zones and clear them out if they're within the range\n    for (let i = 0; i < this._zones.length; i++) {\n      const zone = this._zones[i];\n      if ((zone.y1 > start && zone.y1 <= end + 1) ||\n          (zone.y2 > start && zone.y2 <= end + 1) ||\n          (zone.y1 < start && zone.y2 > end + 1)) {\n        if (this._currentZone && this._currentZone === zone) {\n          this._currentZone.leaveCallback();\n          this._currentZone = undefined;\n        }\n        this._zones.splice(i--, 1);\n      }\n    }\n\n    // Deactivate the mouse zone manager if all the zones have been removed\n    if (this._zones.length === 0) {\n      this._deactivate();\n    }\n  }\n\n  private _activate(): void {\n    if (!this._areZonesActive) {\n      this._areZonesActive = true;\n      this._element.addEventListener('mousemove', this._mouseMoveListener);\n      this._element.addEventListener('mouseleave', this._mouseLeaveListener);\n      this._element.addEventListener('click', this._clickListener);\n    }\n  }\n\n  private _deactivate(): void {\n    if (this._areZonesActive) {\n      this._areZonesActive = false;\n      this._element.removeEventListener('mousemove', this._mouseMoveListener);\n      this._element.removeEventListener('mouseleave', this._mouseLeaveListener);\n      this._element.removeEventListener('click', this._clickListener);\n    }\n  }\n\n  private _onMouseMove(e: MouseEvent): void {\n    // TODO: Ideally this would only clear the hover state when the mouse moves\n    // outside of the mouse zone\n    if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n      this._onHover(e);\n      // Record the current coordinates\n      this._lastHoverCoords = [e.pageX, e.pageY];\n    }\n  }\n\n  private _onHover(e: MouseEvent): void {\n    const zone = this._findZoneEventAt(e);\n\n    // Do nothing if the zone is the same\n    if (zone === this._currentZone) {\n      return;\n    }\n\n    // Fire the hover end callback and cancel any existing timer if a new zone\n    // is being hovered\n    if (this._currentZone) {\n      this._currentZone.leaveCallback();\n      this._currentZone = undefined;\n      if (this._tooltipTimeout) {\n        clearTimeout(this._tooltipTimeout);\n      }\n    }\n\n    // Exit if there is not zone\n    if (!zone) {\n      return;\n    }\n    this._currentZone = zone;\n\n    // Trigger the hover callback\n    if (zone.hoverCallback) {\n      zone.hoverCallback(e);\n    }\n\n    // Restart the tooltip timeout\n    this._tooltipTimeout = window.setTimeout(() => this._onTooltip(e), this._optionsService.options.linkTooltipHoverDuration);\n  }\n\n  private _onTooltip(e: MouseEvent): void {\n    this._tooltipTimeout = undefined;\n    const zone = this._findZoneEventAt(e);\n    zone?.tooltipCallback(e);\n  }\n\n  private _onMouseDown(e: MouseEvent): void {\n    // Store current terminal selection length, to check if we're performing\n    // a selection operation\n    this._initialSelectionLength = this._getSelectionLength();\n\n    // Ignore the event if there are no zones active\n    if (!this._areZonesActive) {\n      return;\n    }\n\n    // Find the active zone, prevent event propagation if found to prevent other\n    // components from handling the mouse event.\n    const zone = this._findZoneEventAt(e);\n    if (zone?.willLinkActivate(e)) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  private _onMouseLeave(e: MouseEvent): void {\n    // Fire the hover end callback and cancel any existing timer if the mouse\n    // leaves the terminal element\n    if (this._currentZone) {\n      this._currentZone.leaveCallback();\n      this._currentZone = undefined;\n      if (this._tooltipTimeout) {\n        clearTimeout(this._tooltipTimeout);\n      }\n    }\n  }\n\n  private _onClick(e: MouseEvent): void {\n    // Find the active zone and click it if found and no selection was\n    // being performed\n    const zone = this._findZoneEventAt(e);\n    const currentSelectionLength = this._getSelectionLength();\n\n    if (zone && currentSelectionLength === this._initialSelectionLength) {\n      zone.clickCallback(e);\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  private _getSelectionLength(): number {\n    const selectionText = this._selectionService.selectionText;\n    return selectionText ? selectionText.length : 0;\n  }\n\n  private _findZoneEventAt(e: MouseEvent): IMouseZone | undefined {\n    const coords = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows);\n    if (!coords) {\n      return undefined;\n    }\n    const x = coords[0];\n    const y = coords[1];\n    for (let i = 0; i < this._zones.length; i++) {\n      const zone = this._zones[i];\n      if (zone.y1 === zone.y2) {\n        // Single line link\n        if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n          return zone;\n        }\n      } else {\n        // Multi-line link\n        if ((y === zone.y1 && x >= zone.x1) ||\n            (y === zone.y2 && x < zone.x2) ||\n            (y > zone.y1 && y < zone.y2)) {\n          return zone;\n        }\n      }\n    }\n    return undefined;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\n/**\n * Debounces calls to render terminal rows using animation frames.\n */\nexport class RenderDebouncer implements IDisposable {\n  private _rowStart: number | undefined;\n  private _rowEnd: number | undefined;\n  private _rowCount: number | undefined;\n  private _animationFrame: number | undefined;\n\n  constructor(\n    private _renderCallback: (start: number, end: number) => void\n  ) {\n  }\n\n  public dispose(): void {\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public refresh(rowStart: number | undefined, rowEnd: number | undefined, rowCount: number): void {\n    this._rowCount = rowCount;\n    // Get the min/max row start/end for the arg values\n    rowStart = rowStart !== undefined ? rowStart : 0;\n    rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n    // Set the properties to the updated values\n    this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n    this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n\n    if (this._animationFrame) {\n      return;\n    }\n\n    this._animationFrame = window.requestAnimationFrame(() => this._innerRefresh());\n  }\n\n  private _innerRefresh(): void {\n    // Make sure values are set\n    if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n      return;\n    }\n\n    // Clamp values\n    const start = Math.max(this._rowStart, 0);\n    const end = Math.min(this._rowEnd, this._rowCount - 1);\n\n    // Reset debouncer (this happens before render callback as the render could trigger it again)\n    this._rowStart = undefined;\n    this._rowEnd = undefined;\n    this._animationFrame = undefined;\n\n    // Run render callback\n    this._renderCallback(start, end);\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\n\nexport type ScreenDprListener = (newDevicePixelRatio?: number, oldDevicePixelRatio?: number) => void;\n\n/**\n * The screen device pixel ratio monitor allows listening for when the\n * window.devicePixelRatio value changes. This is done not with polling but with\n * the use of window.matchMedia to watch media queries. When the event fires,\n * the listener will be reattached using a different media query to ensure that\n * any further changes will register.\n *\n * The listener should fire on both window zoom changes and switching to a\n * monitor with a different DPI.\n */\nexport class ScreenDprMonitor extends Disposable {\n  private _currentDevicePixelRatio: number = window.devicePixelRatio;\n  private _outerListener: ((this: MediaQueryList, ev: MediaQueryListEvent) => any) | undefined;\n  private _listener: ScreenDprListener | undefined;\n  private _resolutionMediaMatchList: MediaQueryList | undefined;\n\n  public setListener(listener: ScreenDprListener): void {\n    if (this._listener) {\n      this.clearListener();\n    }\n    this._listener = listener;\n    this._outerListener = () => {\n      if (!this._listener) {\n        return;\n      }\n      this._listener(window.devicePixelRatio, this._currentDevicePixelRatio);\n      this._updateDpr();\n    };\n    this._updateDpr();\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this.clearListener();\n  }\n\n  private _updateDpr(): void {\n    if (!this._outerListener) {\n      return;\n    }\n\n    // Clear listeners for old DPR\n    this._resolutionMediaMatchList?.removeListener(this._outerListener);\n\n    // Add listeners for new DPR\n    this._currentDevicePixelRatio = window.devicePixelRatio;\n    this._resolutionMediaMatchList = window.matchMedia(`screen and (resolution: ${window.devicePixelRatio}dppx)`);\n    this._resolutionMediaMatchList.addListener(this._outerListener);\n  }\n\n  public clearListener(): void {\n    if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n      return;\n    }\n    this._resolutionMediaMatchList.removeListener(this._outerListener);\n    this._resolutionMediaMatchList = undefined;\n    this._listener = undefined;\n    this._outerListener = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n *\n * Terminal Emulation References:\n *   http://vt100.net/\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.txt\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.html\n *   http://invisible-island.net/vttest/\n *   http://www.inwap.com/pdp10/ansicode.txt\n *   http://linux.die.net/man/4/console_codes\n *   http://linux.die.net/man/7/urxvt\n */\n\nimport { ICompositionHelper, ITerminal, IBrowser, CustomKeyEventHandler, ILinkifier, IMouseZoneManager, LinkMatcherHandler, ILinkMatcherOptions, IViewport, ILinkifier2, CharacterJoinerHandler } from 'browser/Types';\nimport { IRenderer } from 'browser/renderer/Types';\nimport { CompositionHelper } from 'browser/input/CompositionHelper';\nimport { Viewport } from 'browser/Viewport';\nimport { rightClickHandler, moveTextAreaUnderMouseCursor, handlePasteEvent, copyHandler, paste } from 'browser/Clipboard';\nimport { C0 } from 'common/data/EscapeSequences';\nimport { WindowsOptionsReportType } from '../common/InputHandler';\nimport { Renderer } from 'browser/renderer/Renderer';\nimport { Linkifier } from 'browser/Linkifier';\nimport { SelectionService } from 'browser/services/SelectionService';\nimport * as Browser from 'common/Platform';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport * as Strings from 'browser/LocalizableStrings';\nimport { SoundService } from 'browser/services/SoundService';\nimport { MouseZoneManager } from 'browser/MouseZoneManager';\nimport { AccessibilityManager } from './AccessibilityManager';\nimport { ITheme, IMarker, IDisposable, ISelectionPosition, ILinkProvider } from 'xterm';\nimport { DomRenderer } from 'browser/renderer/dom/DomRenderer';\nimport { IKeyboardEvent, KeyboardResultType, CoreMouseEventType, CoreMouseButton, CoreMouseAction, ITerminalOptions, ScrollSource, IAnsiColorChangeEvent } from 'common/Types';\nimport { evaluateKeyboardEvent } from 'common/input/Keyboard';\nimport { EventEmitter, IEvent, forwardEvent } from 'common/EventEmitter';\nimport { DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { ColorManager } from 'browser/ColorManager';\nimport { RenderService } from 'browser/services/RenderService';\nimport { ICharSizeService, IRenderService, IMouseService, ISelectionService, ISoundService, ICoreBrowserService, ICharacterJoinerService } from 'browser/services/Services';\nimport { CharSizeService } from 'browser/services/CharSizeService';\nimport { IBuffer } from 'common/buffer/Types';\nimport { MouseService } from 'browser/services/MouseService';\nimport { Linkifier2 } from 'browser/Linkifier2';\nimport { CoreBrowserService } from 'browser/services/CoreBrowserService';\nimport { CoreTerminal } from 'common/CoreTerminal';\nimport { ITerminalOptions as IInitializedTerminalOptions } from 'common/services/Services';\nimport { rgba } from 'browser/Color';\nimport { CharacterJoinerService } from 'browser/services/CharacterJoinerService';\n\n// Let it work inside Node.js for automated testing purposes.\nconst document: Document = (typeof window !== 'undefined') ? window.document : null as any;\n\nexport class Terminal extends CoreTerminal implements ITerminal {\n  public textarea: HTMLTextAreaElement | undefined;\n  public element: HTMLElement | undefined;\n  public screenElement: HTMLElement | undefined;\n\n  private _document: Document | undefined;\n  private _viewportScrollArea: HTMLElement | undefined;\n  private _viewportElement: HTMLElement | undefined;\n  private _helperContainer: HTMLElement | undefined;\n  private _compositionView: HTMLElement | undefined;\n\n  // private _visualBellTimer: number;\n\n  public browser: IBrowser = <any>Browser;\n\n  // TODO: We should remove options once components adopt optionsService\n  public get options(): IInitializedTerminalOptions { return this.optionsService.options; }\n\n  private _customKeyEventHandler: CustomKeyEventHandler | undefined;\n\n  // browser services\n  private _charSizeService: ICharSizeService | undefined;\n  private _mouseService: IMouseService | undefined;\n  private _renderService: IRenderService | undefined;\n  private _characterJoinerService: ICharacterJoinerService | undefined;\n  private _selectionService: ISelectionService | undefined;\n  private _soundService: ISoundService | undefined;\n\n  /**\n   * Records whether the keydown event has already been handled and triggered a data event, if so\n   * the keypress event should not trigger a data event but should still print to the textarea so\n   * screen readers will announce it.\n   */\n  private _keyDownHandled: boolean = false;\n\n  public linkifier: ILinkifier;\n  public linkifier2: ILinkifier2;\n  public viewport: IViewport | undefined;\n  private _compositionHelper: ICompositionHelper | undefined;\n  private _mouseZoneManager: IMouseZoneManager | undefined;\n  private _accessibilityManager: AccessibilityManager | undefined;\n  private _colorManager: ColorManager | undefined;\n  private _theme: ITheme | undefined;\n\n  private _onCursorMove = new EventEmitter<void>();\n  public get onCursorMove(): IEvent<void> { return this._onCursorMove.event; }\n  private _onKey = new EventEmitter<{ key: string, domEvent: KeyboardEvent }>();\n  public get onKey(): IEvent<{ key: string, domEvent: KeyboardEvent }> { return this._onKey.event; }\n  private _onRender = new EventEmitter<{ start: number, end: number }>();\n  public get onRender(): IEvent<{ start: number, end: number }> { return this._onRender.event; }\n  private _onSelectionChange = new EventEmitter<void>();\n  public get onSelectionChange(): IEvent<void> { return this._onSelectionChange.event; }\n  private _onTitleChange = new EventEmitter<string>();\n  public get onTitleChange(): IEvent<string> { return this._onTitleChange.event; }\n  private _onBell  = new EventEmitter<void>();\n  public get onBell (): IEvent<void> { return this._onBell.event; }\n\n  private _onFocus = new EventEmitter<void>();\n  public get onFocus(): IEvent<void> { return this._onFocus.event; }\n  private _onBlur = new EventEmitter<void>();\n  public get onBlur(): IEvent<void> { return this._onBlur.event; }\n  private _onA11yCharEmitter = new EventEmitter<string>();\n  public get onA11yChar(): IEvent<string> { return this._onA11yCharEmitter.event; }\n  private _onA11yTabEmitter = new EventEmitter<number>();\n  public get onA11yTab(): IEvent<number> { return this._onA11yTabEmitter.event; }\n\n  /**\n   * Creates a new `Terminal` object.\n   *\n   * @param options An object containing a set of options, the available options are:\n   *   - `cursorBlink` (boolean): Whether the terminal cursor blinks\n   *   - `cols` (number): The number of columns of the terminal (horizontal size)\n   *   - `rows` (number): The number of rows of the terminal (vertical size)\n   *\n   * @public\n   * @class Xterm Xterm\n   * @alias module:xterm/src/xterm\n   */\n  constructor(\n    options: ITerminalOptions = {}\n  ) {\n    super(options);\n\n    this._setup();\n\n    this.linkifier = this._instantiationService.createInstance(Linkifier);\n    this.linkifier2 = this.register(this._instantiationService.createInstance(Linkifier2));\n\n    // Setup InputHandler listeners\n    this.register(this._inputHandler.onRequestBell(() => this.bell()));\n    this.register(this._inputHandler.onRequestRefreshRows((start, end) => this.refresh(start, end)));\n    this.register(this._inputHandler.onRequestReset(() => this.reset()));\n    this.register(this._inputHandler.onRequestWindowsOptionsReport(type => this._reportWindowsOptions(type)));\n    this.register(this._inputHandler.onAnsiColorChange((event) => this._changeAnsiColor(event)));\n    this.register(forwardEvent(this._inputHandler.onCursorMove, this._onCursorMove));\n    this.register(forwardEvent(this._inputHandler.onTitleChange, this._onTitleChange));\n    this.register(forwardEvent(this._inputHandler.onA11yChar, this._onA11yCharEmitter));\n    this.register(forwardEvent(this._inputHandler.onA11yTab, this._onA11yTabEmitter));\n\n    // Setup listeners\n    this.register(this._bufferService.onResize(e => this._afterResize(e.cols, e.rows)));\n  }\n\n  private _changeAnsiColor(event: IAnsiColorChangeEvent): void {\n    if (!this._colorManager) { return; }\n\n    for (const ansiColor of event.colors) {\n      const color = rgba.toColor(ansiColor.red, ansiColor.green, ansiColor.blue);\n\n      this._colorManager!.colors.ansi[ansiColor.colorIndex] = color;\n    }\n\n    this._renderService?.setColors(this._colorManager!.colors);\n    this.viewport?.onThemeChange(this._colorManager!.colors);\n  }\n\n  public dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._renderService?.dispose();\n    this._customKeyEventHandler = undefined;\n    this.write = () => { };\n    this.element?.parentNode?.removeChild(this.element);\n  }\n\n  protected _setup(): void {\n    super._setup();\n\n    this._customKeyEventHandler = undefined;\n  }\n\n  /**\n   * Convenience property to active buffer.\n   */\n  public get buffer(): IBuffer {\n    return this.buffers.active;\n  }\n\n  /**\n   * Focus the terminal. Delegates focus handling to the terminal's DOM element.\n   */\n  public focus(): void {\n    if (this.textarea) {\n      this.textarea.focus({ preventScroll: true });\n    }\n  }\n\n  protected _updateOptions(key: string): void {\n    super._updateOptions(key);\n\n    // TODO: These listeners should be owned by individual components\n    switch (key) {\n      case 'fontFamily':\n      case 'fontSize':\n        // When the font changes the size of the cells may change which requires a renderer clear\n        this._renderService?.clear();\n        this._charSizeService?.measure();\n        break;\n      case 'cursorBlink':\n      case 'cursorStyle':\n        // The DOM renderer needs a row refresh to update the cursor styles\n        this.refresh(this.buffer.y, this.buffer.y);\n        break;\n      case 'drawBoldTextInBrightColors':\n      case 'letterSpacing':\n      case 'lineHeight':\n      case 'fontWeight':\n      case 'fontWeightBold':\n      case 'minimumContrastRatio':\n        // When the font changes the size of the cells may change which requires a renderer clear\n        if (this._renderService) {\n          this._renderService.clear();\n          this._renderService.onResize(this.cols, this.rows);\n          this.refresh(0, this.rows - 1);\n        }\n        break;\n      case 'rendererType':\n        if (this._renderService) {\n          this._renderService.setRenderer(this._createRenderer());\n          this._renderService.onResize(this.cols, this.rows);\n        }\n        break;\n      case 'scrollback':\n        this.viewport?.syncScrollArea();\n        break;\n      case 'screenReaderMode':\n        if (this.optionsService.options.screenReaderMode) {\n          if (!this._accessibilityManager && this._renderService) {\n            this._accessibilityManager = new AccessibilityManager(this, this._renderService);\n          }\n        } else {\n          this._accessibilityManager?.dispose();\n          this._accessibilityManager = undefined;\n        }\n        break;\n      case 'tabStopWidth': this.buffers.setupTabStops(); break;\n      case 'theme':\n        this._setTheme(this.optionsService.options.theme);\n        break;\n    }\n  }\n\n  /**\n   * Binds the desired focus behavior on a given terminal object.\n   */\n  private _onTextAreaFocus(ev: KeyboardEvent): void {\n    if (this._coreService.decPrivateModes.sendFocus) {\n      this._coreService.triggerDataEvent(C0.ESC + '[I');\n    }\n    this.updateCursorStyle(ev);\n    this.element!.classList.add('focus');\n    this._showCursor();\n    this._onFocus.fire();\n  }\n\n  /**\n   * Blur the terminal, calling the blur function on the terminal's underlying\n   * textarea.\n   */\n  public blur(): void {\n    return this.textarea?.blur();\n  }\n\n  /**\n   * Binds the desired blur behavior on a given terminal object.\n   */\n  private _onTextAreaBlur(): void {\n    // Text can safely be removed on blur. Doing it earlier could interfere with\n    // screen readers reading it out.\n    this.textarea!.value = '';\n    this.refresh(this.buffer.y, this.buffer.y);\n    if (this._coreService.decPrivateModes.sendFocus) {\n      this._coreService.triggerDataEvent(C0.ESC + '[O');\n    }\n    this.element!.classList.remove('focus');\n    this._onBlur.fire();\n  }\n\n  private _syncTextArea(): void {\n    if (!this.textarea || !this.buffer.isCursorInViewport || this._compositionHelper!.isComposing || !this._renderService) {\n      return;\n    }\n    const cursorY = this.buffer.ybase + this.buffer.y;\n    const bufferLine = this.buffer.lines.get(cursorY);\n    if (!bufferLine) {\n      return;\n    }\n    const cursorX = Math.min(this.buffer.x, this.cols - 1);\n    const cellHeight = this._renderService.dimensions.actualCellHeight;\n    const width = bufferLine.getWidth(cursorX);\n    const cellWidth = this._renderService.dimensions.actualCellWidth * width;\n    const cursorTop = this.buffer.y * this._renderService.dimensions.actualCellHeight;\n    const cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;\n\n    // Sync the textarea to the exact position of the composition view so the IME knows where the\n    // text is.\n    this.textarea.style.left = cursorLeft + 'px';\n    this.textarea.style.top = cursorTop + 'px';\n    this.textarea.style.width = cellWidth + 'px';\n    this.textarea.style.height = cellHeight + 'px';\n    this.textarea.style.lineHeight = cellHeight + 'px';\n    this.textarea.style.zIndex = '-5';\n  }\n\n  /**\n   * Initialize default behavior\n   */\n  private _initGlobal(): void {\n    this._bindKeys();\n\n    // Bind clipboard functionality\n    this.register(addDisposableDomListener(this.element!, 'copy', (event: ClipboardEvent) => {\n      // If mouse events are active it means the selection manager is disabled and\n      // copy should be handled by the host program.\n      if (!this.hasSelection()) {\n        return;\n      }\n      copyHandler(event, this._selectionService!);\n    }));\n    const pasteHandlerWrapper = (event: ClipboardEvent): void => handlePasteEvent(event, this.textarea!, this._coreService);\n    this.register(addDisposableDomListener(this.textarea!, 'paste', pasteHandlerWrapper));\n    this.register(addDisposableDomListener(this.element!, 'paste', pasteHandlerWrapper));\n\n    // Handle right click context menus\n    if (Browser.isFirefox) {\n      // Firefox doesn't appear to fire the contextmenu event on right click\n      this.register(addDisposableDomListener(this.element!, 'mousedown', (event: MouseEvent) => {\n        if (event.button === 2) {\n          rightClickHandler(event, this.textarea!, this.screenElement!, this._selectionService!, this.options.rightClickSelectsWord);\n        }\n      }));\n    } else {\n      this.register(addDisposableDomListener(this.element!, 'contextmenu', (event: MouseEvent) => {\n        rightClickHandler(event, this.textarea!, this.screenElement!, this._selectionService!, this.options.rightClickSelectsWord);\n      }));\n    }\n\n    // Move the textarea under the cursor when middle clicking on Linux to ensure\n    // middle click to paste selection works. This only appears to work in Chrome\n    // at the time is writing.\n    if (Browser.isLinux) {\n      // Use auxclick event over mousedown the latter doesn't seem to work. Note\n      // that the regular click event doesn't fire for the middle mouse button.\n      this.register(addDisposableDomListener(this.element!, 'auxclick', (event: MouseEvent) => {\n        if (event.button === 1) {\n          moveTextAreaUnderMouseCursor(event, this.textarea!, this.screenElement!);\n        }\n      }));\n    }\n  }\n\n  /**\n   * Apply key handling to the terminal\n   */\n  private _bindKeys(): void {\n    this.register(addDisposableDomListener(this.textarea!, 'keyup', (ev: KeyboardEvent) => this._keyUp(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'keydown', (ev: KeyboardEvent) => this._keyDown(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'keypress', (ev: KeyboardEvent) => this._keyPress(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionstart', () => this._compositionHelper!.compositionstart()));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionupdate', (e: CompositionEvent) => this._compositionHelper!.compositionupdate(e)));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionend', () => this._compositionHelper!.compositionend()));\n    this.register(this.onRender(() => this._compositionHelper!.updateCompositionElements()));\n    this.register(this.onRender(e => this._queueLinkification(e.start, e.end)));\n  }\n\n  /**\n   * Opens the terminal within an element.\n   *\n   * @param parent The element to create the terminal within.\n   */\n  public open(parent: HTMLElement): void {\n    if (!parent) {\n      throw new Error('Terminal requires a parent element.');\n    }\n\n    if (!parent.isConnected) {\n      this._logService.debug('Terminal.open was called on an element that was not attached to the DOM');\n    }\n\n    this._document = parent.ownerDocument!;\n\n    // Create main element container\n    this.element = this._document.createElement('div');\n    this.element.dir = 'ltr';   // xterm.css assumes LTR\n    this.element.classList.add('terminal');\n    this.element.classList.add('xterm');\n    this.element.setAttribute('tabindex', '0');\n    this.element.setAttribute('role', 'document');\n    parent.appendChild(this.element);\n\n    // Performance: Use a document fragment to build the terminal\n    // viewport and helper elements detached from the DOM\n    const fragment = document.createDocumentFragment();\n    this._viewportElement = document.createElement('div');\n    this._viewportElement.classList.add('xterm-viewport');\n    fragment.appendChild(this._viewportElement);\n    this._viewportScrollArea = document.createElement('div');\n    this._viewportScrollArea.classList.add('xterm-scroll-area');\n    this._viewportElement.appendChild(this._viewportScrollArea);\n\n    this.screenElement = document.createElement('div');\n    this.screenElement.classList.add('xterm-screen');\n    // Create the container that will hold helpers like the textarea for\n    // capturing DOM Events. Then produce the helpers.\n    this._helperContainer = document.createElement('div');\n    this._helperContainer.classList.add('xterm-helpers');\n    this.screenElement.appendChild(this._helperContainer);\n    fragment.appendChild(this.screenElement);\n\n    this.textarea = document.createElement('textarea');\n    this.textarea.classList.add('xterm-helper-textarea');\n    this.textarea.setAttribute('aria-label', Strings.promptLabel);\n    this.textarea.setAttribute('aria-multiline', 'false');\n    this.textarea.setAttribute('autocorrect', 'off');\n    this.textarea.setAttribute('autocapitalize', 'off');\n    this.textarea.setAttribute('spellcheck', 'false');\n    this.textarea.tabIndex = 0;\n    this.register(addDisposableDomListener(this.textarea, 'focus', (ev: KeyboardEvent) => this._onTextAreaFocus(ev)));\n    this.register(addDisposableDomListener(this.textarea, 'blur', () => this._onTextAreaBlur()));\n    this._helperContainer.appendChild(this.textarea);\n\n    const coreBrowserService = this._instantiationService.createInstance(CoreBrowserService, this.textarea);\n    this._instantiationService.setService(ICoreBrowserService, coreBrowserService);\n\n    this._charSizeService = this._instantiationService.createInstance(CharSizeService, this._document, this._helperContainer);\n    this._instantiationService.setService(ICharSizeService, this._charSizeService);\n\n    this._theme = this.options.theme || this._theme;\n    this._colorManager = new ColorManager(document, this.options.allowTransparency);\n    this.register(this.optionsService.onOptionChange(e => this._colorManager!.onOptionsChange(e)));\n    this._colorManager.setTheme(this._theme);\n\n    this._characterJoinerService = this._instantiationService.createInstance(CharacterJoinerService);\n    this._instantiationService.setService(ICharacterJoinerService, this._characterJoinerService);\n\n    const renderer = this._createRenderer();\n    this._renderService = this.register(this._instantiationService.createInstance(RenderService, renderer, this.rows, this.screenElement));\n    this._instantiationService.setService(IRenderService, this._renderService);\n    this.register(this._renderService.onRenderedBufferChange(e => this._onRender.fire(e)));\n    this.onResize(e => this._renderService!.resize(e.cols, e.rows));\n\n    this._compositionView = document.createElement('div');\n    this._compositionView.classList.add('composition-view');\n    this._compositionHelper = this._instantiationService.createInstance(CompositionHelper, this.textarea, this._compositionView);\n    this._helperContainer.appendChild(this._compositionView);\n\n    // Performance: Add viewport and helper elements from the fragment\n    this.element.appendChild(fragment);\n\n    this._soundService = this._instantiationService.createInstance(SoundService);\n    this._instantiationService.setService(ISoundService, this._soundService);\n    this._mouseService = this._instantiationService.createInstance(MouseService);\n    this._instantiationService.setService(IMouseService, this._mouseService);\n\n    this.viewport = this._instantiationService.createInstance(Viewport,\n      (amount: number) => this.scrollLines(amount, true, ScrollSource.VIEWPORT),\n      this._viewportElement,\n      this._viewportScrollArea\n    );\n    this.viewport.onThemeChange(this._colorManager.colors);\n    this.register(this._inputHandler.onRequestSyncScrollBar(() => this.viewport!.syncScrollArea()));\n    this.register(this.viewport);\n\n    this.register(this.onCursorMove(() => {\n      this._renderService!.onCursorMove();\n      this._syncTextArea();\n    }));\n    this.register(this.onResize(() => this._renderService!.onResize(this.cols, this.rows)));\n    this.register(this.onBlur(() => this._renderService!.onBlur()));\n    this.register(this.onFocus(() => this._renderService!.onFocus()));\n    this.register(this._renderService.onDimensionsChange(() => this.viewport!.syncScrollArea()));\n\n    this._selectionService = this.register(this._instantiationService.createInstance(SelectionService,\n      this.element,\n      this.screenElement,\n      this.linkifier2\n    ));\n    this._instantiationService.setService(ISelectionService, this._selectionService);\n    this.register(this._selectionService.onRequestScrollLines(e => this.scrollLines(e.amount, e.suppressScrollEvent)));\n    this.register(this._selectionService.onSelectionChange(() => this._onSelectionChange.fire()));\n    this.register(this._selectionService.onRequestRedraw(e => this._renderService!.onSelectionChanged(e.start, e.end, e.columnSelectMode)));\n    this.register(this._selectionService.onLinuxMouseSelection(text => {\n      // If there's a new selection, put it into the textarea, focus and select it\n      // in order to register it as a selection on the OS. This event is fired\n      // only on Linux to enable middle click to paste selection.\n      this.textarea!.value = text;\n      this.textarea!.focus();\n      this.textarea!.select();\n    }));\n    this.register(this._onScroll.event(ev => {\n      this.viewport!.syncScrollArea();\n      this._selectionService!.refresh();\n    }));\n    this.register(addDisposableDomListener(this._viewportElement, 'scroll', () => this._selectionService!.refresh()));\n\n    this._mouseZoneManager = this._instantiationService.createInstance(MouseZoneManager, this.element, this.screenElement);\n    this.register(this._mouseZoneManager);\n    this.register(this.onScroll(() => this._mouseZoneManager!.clearAll()));\n    this.linkifier.attachToDom(this.element, this._mouseZoneManager);\n    this.linkifier2.attachToDom(this.element, this._mouseService, this._renderService);\n\n    // This event listener must be registered aftre MouseZoneManager is created\n    this.register(addDisposableDomListener(this.element, 'mousedown', (e: MouseEvent) => this._selectionService!.onMouseDown(e)));\n\n    // apply mouse event classes set by escape codes before terminal was attached\n    if (this._coreMouseService.areMouseEventsActive) {\n      this._selectionService.disable();\n      this.element.classList.add('enable-mouse-events');\n    } else {\n      this._selectionService.enable();\n    }\n\n    if (this.options.screenReaderMode) {\n      // Note that this must be done *after* the renderer is created in order to\n      // ensure the correct order of the dprchange event\n      this._accessibilityManager = new AccessibilityManager(this, this._renderService);\n    }\n\n    // Measure the character size\n    this._charSizeService.measure();\n\n    // Setup loop that draws to screen\n    this.refresh(0, this.rows - 1);\n\n    // Initialize global actions that need to be taken on the document.\n    this._initGlobal();\n\n    // Listen for mouse events and translate\n    // them into terminal mouse protocols.\n    this.bindMouse();\n  }\n\n  private _createRenderer(): IRenderer {\n    switch (this.options.rendererType) {\n      case 'canvas': return this._instantiationService.createInstance(Renderer, this._colorManager!.colors, this.screenElement!, this.linkifier, this.linkifier2);\n      case 'dom': return this._instantiationService.createInstance(DomRenderer, this._colorManager!.colors, this.element!, this.screenElement!, this._viewportElement!, this.linkifier, this.linkifier2);\n      default: throw new Error(`Unrecognized rendererType \"${this.options.rendererType}\"`);\n    }\n  }\n\n  /**\n   * Sets the theme on the renderer. The renderer must have been initialized.\n   * @param theme The theme to set.\n   */\n  private _setTheme(theme: ITheme): void {\n    this._theme = theme;\n    this._colorManager?.setTheme(theme);\n    this._renderService?.setColors(this._colorManager!.colors);\n    this.viewport?.onThemeChange(this._colorManager!.colors);\n  }\n\n  /**\n   * Bind certain mouse events to the terminal.\n   * By default only 3 button + wheel up/down is ativated. For higher buttons\n   * no mouse report will be created. Typically the standard actions will be active.\n   *\n   * There are several reasons not to enable support for higher buttons/wheel:\n   * - Button 4 and 5 are typically used for history back and forward navigation,\n   *   there is no straight forward way to supress/intercept those standard actions.\n   * - Support for higher buttons does not work in some platform/browser combinations.\n   * - Left/right wheel was not tested.\n   * - Emulators vary in mouse button support, typically only 3 buttons and\n   *   wheel up/down work reliable.\n   *\n   * TODO: Move mouse event code into its own file.\n   */\n  public bindMouse(): void {\n    const self = this;\n    const el = this.element!;\n\n    // send event to CoreMouseService\n    function sendEvent(ev: MouseEvent | WheelEvent): boolean {\n      // get mouse coordinates\n      const pos = self._mouseService!.getRawByteCoords(ev, self.screenElement!, self.cols, self.rows);\n      if (!pos) {\n        return false;\n      }\n\n      let but: CoreMouseButton;\n      let action: CoreMouseAction | undefined;\n      switch ((<any>ev).overrideType || ev.type) {\n        case 'mousemove':\n          action = CoreMouseAction.MOVE;\n          if (ev.buttons === undefined) {\n            // buttons is not supported on macOS, try to get a value from button instead\n            but = CoreMouseButton.NONE;\n            if (ev.button !== undefined) {\n              but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n            }\n          } else {\n            // according to MDN buttons only reports up to button 5 (AUX2)\n            but = ev.buttons & 1 ? CoreMouseButton.LEFT :\n              ev.buttons & 4 ? CoreMouseButton.MIDDLE :\n                ev.buttons & 2 ? CoreMouseButton.RIGHT :\n                  CoreMouseButton.NONE; // fallback to NONE\n          }\n          break;\n        case 'mouseup':\n          action = CoreMouseAction.UP;\n          but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n          break;\n        case 'mousedown':\n          action = CoreMouseAction.DOWN;\n          but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n          break;\n        case 'wheel':\n          // only UP/DOWN wheel events are respected\n          if ((ev as WheelEvent).deltaY !== 0) {\n            action = (ev as WheelEvent).deltaY < 0 ? CoreMouseAction.UP : CoreMouseAction.DOWN;\n          }\n          but = CoreMouseButton.WHEEL;\n          break;\n        default:\n          // dont handle other event types by accident\n          return false;\n      }\n\n      // exit if we cannot determine valid button/action values\n      // do nothing for higher buttons than wheel\n      if (action === undefined || but === undefined || but > CoreMouseButton.WHEEL) {\n        return false;\n      }\n\n      return self._coreMouseService.triggerMouseEvent({\n        col: pos.x - 33, // FIXME: why -33 here?\n        row: pos.y - 33,\n        button: but,\n        action,\n        ctrl: ev.ctrlKey,\n        alt: ev.altKey,\n        shift: ev.shiftKey\n      });\n    }\n\n    /**\n     * Event listener state handling.\n     * We listen to the onProtocolChange event of CoreMouseService and put\n     * requested listeners in `requestedEvents`. With this the listeners\n     * have all bits to do the event listener juggling.\n     * Note: 'mousedown' currently is \"always on\" and not managed\n     * by onProtocolChange.\n     */\n    const requestedEvents: { [key: string]: ((ev: Event) => void) | null } = {\n      mouseup: null,\n      wheel: null,\n      mousedrag: null,\n      mousemove: null\n    };\n    const eventListeners: { [key: string]: (ev: any) => void | boolean } = {\n      mouseup: (ev: MouseEvent) => {\n        sendEvent(ev);\n        if (!ev.buttons) {\n          // if no other button is held remove global handlers\n          this._document!.removeEventListener('mouseup', requestedEvents.mouseup!);\n          if (requestedEvents.mousedrag) {\n            this._document!.removeEventListener('mousemove', requestedEvents.mousedrag);\n          }\n        }\n        return this.cancel(ev);\n      },\n      wheel: (ev: WheelEvent) => {\n        sendEvent(ev);\n        ev.preventDefault();\n        return this.cancel(ev);\n      },\n      mousedrag: (ev: MouseEvent) => {\n        // deal only with move while a button is held\n        if (ev.buttons) {\n          sendEvent(ev);\n        }\n      },\n      mousemove: (ev: MouseEvent) => {\n        // deal only with move without any button\n        if (!ev.buttons) {\n          sendEvent(ev);\n        }\n      }\n    };\n    this.register(this._coreMouseService.onProtocolChange(events => {\n      // apply global changes on events\n      if (events) {\n        if (this.optionsService.options.logLevel === 'debug') {\n          this._logService.debug('Binding to mouse events:', this._coreMouseService.explainEvents(events));\n        }\n        this.element!.classList.add('enable-mouse-events');\n        this._selectionService!.disable();\n      } else {\n        this._logService.debug('Unbinding from mouse events.');\n        this.element!.classList.remove('enable-mouse-events');\n        this._selectionService!.enable();\n      }\n\n      // add/remove handlers from requestedEvents\n\n      if (!(events & CoreMouseEventType.MOVE)) {\n        el.removeEventListener('mousemove', requestedEvents.mousemove!);\n        requestedEvents.mousemove = null;\n      } else if (!requestedEvents.mousemove) {\n        el.addEventListener('mousemove', eventListeners.mousemove);\n        requestedEvents.mousemove = eventListeners.mousemove;\n      }\n\n      if (!(events & CoreMouseEventType.WHEEL)) {\n        el.removeEventListener('wheel', requestedEvents.wheel!);\n        requestedEvents.wheel = null;\n      } else if (!requestedEvents.wheel) {\n        el.addEventListener('wheel', eventListeners.wheel, { passive: false });\n        requestedEvents.wheel = eventListeners.wheel;\n      }\n\n      if (!(events & CoreMouseEventType.UP)) {\n        this._document!.removeEventListener('mouseup', requestedEvents.mouseup!);\n        requestedEvents.mouseup = null;\n      } else if (!requestedEvents.mouseup) {\n        requestedEvents.mouseup = eventListeners.mouseup;\n      }\n\n      if (!(events & CoreMouseEventType.DRAG)) {\n        this._document!.removeEventListener('mousemove', requestedEvents.mousedrag!);\n        requestedEvents.mousedrag = null;\n      } else if (!requestedEvents.mousedrag) {\n        requestedEvents.mousedrag = eventListeners.mousedrag;\n      }\n    }));\n    // force initial onProtocolChange so we dont miss early mouse requests\n    this._coreMouseService.activeProtocol = this._coreMouseService.activeProtocol;\n\n    /**\n     * \"Always on\" event listeners.\n     */\n    this.register(addDisposableDomListener(el, 'mousedown', (ev: MouseEvent) => {\n      ev.preventDefault();\n      this.focus();\n\n      // Don't send the mouse button to the pty if mouse events are disabled or\n      // if the selection manager is having selection forced (ie. a modifier is\n      // held).\n      if (!this._coreMouseService.areMouseEventsActive || this._selectionService!.shouldForceSelection(ev)) {\n        return;\n      }\n\n      sendEvent(ev);\n\n      // Register additional global handlers which should keep reporting outside\n      // of the terminal element.\n      // Note: Other emulators also do this for 'mousedown' while a button\n      // is held, we currently limit 'mousedown' to the terminal only.\n      if (requestedEvents.mouseup) {\n        this._document!.addEventListener('mouseup', requestedEvents.mouseup);\n      }\n      if (requestedEvents.mousedrag) {\n        this._document!.addEventListener('mousemove', requestedEvents.mousedrag);\n      }\n\n      return this.cancel(ev);\n    }));\n\n    this.register(addDisposableDomListener(el, 'wheel', (ev: WheelEvent) => {\n      if (!requestedEvents.wheel) {\n        // Convert wheel events into up/down events when the buffer does not have scrollback, this\n        // enables scrolling in apps hosted in the alt buffer such as vim or tmux.\n        if (!this.buffer.hasScrollback) {\n          const amount = this.viewport!.getLinesScrolled(ev);\n\n          // Do nothing if there's no vertical scroll\n          if (amount === 0) {\n            return;\n          }\n\n          // Construct and send sequences\n          const sequence = C0.ESC + (this._coreService.decPrivateModes.applicationCursorKeys ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n          let data = '';\n          for (let i = 0; i < Math.abs(amount); i++) {\n            data += sequence;\n          }\n          this._coreService.triggerDataEvent(data, true);\n        }\n        return;\n      }\n    }, { passive: true }));\n\n    // allow wheel scrolling in\n    // the shell for example\n    this.register(addDisposableDomListener(el, 'wheel', (ev: WheelEvent) => {\n      if (requestedEvents.wheel) return;\n      if (!this.viewport!.onWheel(ev)) {\n        return this.cancel(ev);\n      }\n    }, { passive: false }));\n\n    this.register(addDisposableDomListener(el, 'touchstart', (ev: TouchEvent) => {\n      if (this._coreMouseService.areMouseEventsActive) return;\n      this.viewport!.onTouchStart(ev);\n      return this.cancel(ev);\n    }, { passive: true }));\n\n    this.register(addDisposableDomListener(el, 'touchmove', (ev: TouchEvent) => {\n      if (this._coreMouseService.areMouseEventsActive) return;\n      if (!this.viewport!.onTouchMove(ev)) {\n        return this.cancel(ev);\n      }\n    }, { passive: false }));\n  }\n\n\n  /**\n   * Tells the renderer to refresh terminal content between two rows (inclusive) at the next\n   * opportunity.\n   * @param start The row to start from (between 0 and this.rows - 1).\n   * @param end The row to end at (between start and this.rows - 1).\n   */\n  public refresh(start: number, end: number): void {\n    this._renderService?.refreshRows(start, end);\n  }\n\n  /**\n   * Queues linkification for the specified rows.\n   * @param start The row to start from (between 0 and this.rows - 1).\n   * @param end The row to end at (between start and this.rows - 1).\n   */\n  private _queueLinkification(start: number, end: number): void {\n    this.linkifier?.linkifyRows(start, end);\n  }\n\n  /**\n   * Change the cursor style for different selection modes\n   */\n  public updateCursorStyle(ev: KeyboardEvent): void {\n    if (this._selectionService?.shouldColumnSelect(ev)) {\n      this.element!.classList.add('column-select');\n    } else {\n      this.element!.classList.remove('column-select');\n    }\n  }\n\n  /**\n   * Display the cursor element\n   */\n  private _showCursor(): void {\n    if (!this._coreService.isCursorInitialized) {\n      this._coreService.isCursorInitialized = true;\n      this.refresh(this.buffer.y, this.buffer.y);\n    }\n  }\n\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source = ScrollSource.TERMINAL): void {\n    super.scrollLines(disp, suppressScrollEvent, source);\n    this.refresh(0, this.rows - 1);\n  }\n\n  public paste(data: string): void {\n    paste(data, this.textarea!, this._coreService);\n  }\n\n  /**\n   * Attaches a custom key event handler which is run before keys are processed,\n   * giving consumers of xterm.js ultimate control as to what keys should be\n   * processed by the terminal and what keys should not.\n   * @param customKeyEventHandler The custom KeyboardEvent handler to attach.\n   * This is a function that takes a KeyboardEvent, allowing consumers to stop\n   * propagation and/or prevent the default action. The function returns whether\n   * the event should be processed by xterm.js.\n   */\n  public attachCustomKeyEventHandler(customKeyEventHandler: CustomKeyEventHandler): void {\n    this._customKeyEventHandler = customKeyEventHandler;\n  }\n\n  /**\n   * Registers a link matcher, allowing custom link patterns to be matched and\n   * handled.\n   * @param regex The regular expression to search for, specifically\n   * this searches the textContent of the rows. You will want to use \\s to match\n   * a space ' ' character for example.\n   * @param handler The callback when the link is called.\n   * @param options Options for the link matcher.\n   * @return The ID of the new matcher, this can be used to deregister.\n   */\n  public registerLinkMatcher(regex: RegExp, handler: LinkMatcherHandler, options?: ILinkMatcherOptions): number {\n    const matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n    this.refresh(0, this.rows - 1);\n    return matcherId;\n  }\n\n  /**\n   * Deregisters a link matcher if it has been registered.\n   * @param matcherId The link matcher's ID (returned after register)\n   */\n  public deregisterLinkMatcher(matcherId: number): void {\n    if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n      this.refresh(0, this.rows - 1);\n    }\n  }\n\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    return this.linkifier2.registerLinkProvider(linkProvider);\n  }\n\n  public registerCharacterJoiner(handler: CharacterJoinerHandler): number {\n    if (!this._characterJoinerService) {\n      throw new Error('Terminal must be opened first');\n    }\n    const joinerId = this._characterJoinerService.register(handler);\n    this.refresh(0, this.rows - 1);\n    return joinerId;\n  }\n\n  public deregisterCharacterJoiner(joinerId: number): void {\n    if (!this._characterJoinerService) {\n      throw new Error('Terminal must be opened first');\n    }\n    if (this._characterJoinerService.deregister(joinerId)) {\n      this.refresh(0, this.rows - 1);\n    }\n  }\n\n  public get markers(): IMarker[] {\n    return this.buffer.markers;\n  }\n\n  public addMarker(cursorYOffset: number): IMarker | undefined {\n    // Disallow markers on the alt buffer\n    if (this.buffer !== this.buffers.normal) {\n      return;\n    }\n\n    return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n  }\n\n  /**\n   * Gets whether the terminal has an active selection.\n   */\n  public hasSelection(): boolean {\n    return this._selectionService ? this._selectionService.hasSelection : false;\n  }\n\n  /**\n   * Selects text within the terminal.\n   * @param column The column the selection starts at..\n   * @param row The row the selection starts at.\n   * @param length The length of the selection.\n   */\n  public select(column: number, row: number, length: number): void {\n    this._selectionService!.setSelection(column, row, length);\n  }\n\n  /**\n   * Gets the terminal's current selection, this is useful for implementing copy\n   * behavior outside of xterm.js.\n   */\n  public getSelection(): string {\n    return this._selectionService ? this._selectionService.selectionText : '';\n  }\n\n  public getSelectionPosition(): ISelectionPosition | undefined {\n    if (!this._selectionService || !this._selectionService.hasSelection) {\n      return undefined;\n    }\n\n    return {\n      startColumn: this._selectionService.selectionStart![0],\n      startRow: this._selectionService.selectionStart![1],\n      endColumn: this._selectionService.selectionEnd![0],\n      endRow: this._selectionService.selectionEnd![1]\n    };\n  }\n\n  /**\n   * Clears the current terminal selection.\n   */\n  public clearSelection(): void {\n    this._selectionService?.clearSelection();\n  }\n\n  /**\n   * Selects all text within the terminal.\n   */\n  public selectAll(): void {\n    this._selectionService?.selectAll();\n  }\n\n  public selectLines(start: number, end: number): void {\n    this._selectionService?.selectLines(start, end);\n  }\n\n  /**\n   * Handle a keydown event\n   * Key Resources:\n   *   - https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent\n   * @param ev The keydown event to be handled.\n   */\n  protected _keyDown(event: KeyboardEvent): boolean | undefined {\n    this._keyDownHandled = false;\n\n    if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n      return false;\n    }\n\n    if (!this._compositionHelper!.keydown(event)) {\n      if (this.buffer.ybase !== this.buffer.ydisp) {\n        this._bufferService.scrollToBottom();\n      }\n      return false;\n    }\n\n    const result = evaluateKeyboardEvent(event, this._coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);\n\n    this.updateCursorStyle(event);\n\n    if (result.type === KeyboardResultType.PAGE_DOWN || result.type === KeyboardResultType.PAGE_UP) {\n      const scrollCount = this.rows - 1;\n      this.scrollLines(result.type === KeyboardResultType.PAGE_UP ? -scrollCount : scrollCount);\n      return this.cancel(event, true);\n    }\n\n    if (result.type === KeyboardResultType.SELECT_ALL) {\n      this.selectAll();\n    }\n\n    if (this._isThirdLevelShift(this.browser, event)) {\n      return true;\n    }\n\n    if (result.cancel) {\n      // The event is canceled at the end already, is this necessary?\n      this.cancel(event, true);\n    }\n\n    if (!result.key) {\n      return true;\n    }\n\n    // If ctrl+c or enter is being sent, clear out the textarea. This is done so that screen readers\n    // will announce deleted characters. This will not work 100% of the time but it should cover\n    // most scenarios.\n    if (result.key === C0.ETX || result.key === C0.CR) {\n      this.textarea!.value = '';\n    }\n\n    this._onKey.fire({ key: result.key, domEvent: event });\n    this._showCursor();\n    this._coreService.triggerDataEvent(result.key, true);\n\n    // Cancel events when not in screen reader mode so events don't get bubbled up and handled by\n    // other listeners. When screen reader mode is enabled, this could cause issues if the event\n    // is handled at a higher level, this is a compromise in order to echo keys to the screen\n    // reader.\n    if (!this.optionsService.options.screenReaderMode) {\n      return this.cancel(event, true);\n    }\n\n    this._keyDownHandled = true;\n  }\n\n  private _isThirdLevelShift(browser: IBrowser, ev: IKeyboardEvent): boolean {\n    const thirdLevelKey =\n      (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n      (browser.isWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n\n    if (ev.type === 'keypress') {\n      return thirdLevelKey;\n    }\n\n    // Don't invoke for arrows, pageDown, home, backspace, etc. (on non-keypress events)\n    return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n  }\n\n  protected _keyUp(ev: KeyboardEvent): void {\n    if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n      return;\n    }\n\n    if (!wasModifierKeyOnlyEvent(ev)) {\n      this.focus();\n    }\n\n    this.updateCursorStyle(ev);\n  }\n\n  /**\n   * Handle a keypress event.\n   * Key Resources:\n   *   - https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent\n   * @param ev The keypress event to be handled.\n   */\n  protected _keyPress(ev: KeyboardEvent): boolean {\n    let key;\n\n    if (this._keyDownHandled) {\n      return false;\n    }\n\n    if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n      return false;\n    }\n\n    this.cancel(ev);\n\n    if (ev.charCode) {\n      key = ev.charCode;\n    } else if (ev.which === null || ev.which === undefined) {\n      key = ev.keyCode;\n    } else if (ev.which !== 0 && ev.charCode !== 0) {\n      key = ev.which;\n    } else {\n      return false;\n    }\n\n    if (!key || (\n      (ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev)\n    )) {\n      return false;\n    }\n\n    key = String.fromCharCode(key);\n\n    this._onKey.fire({ key, domEvent: ev });\n    this._showCursor();\n    this._coreService.triggerDataEvent(key, true);\n\n    return true;\n  }\n\n  /**\n   * Ring the bell.\n   * Note: We could do sweet things with webaudio here\n   */\n  public bell(): void {\n    if (this._soundBell()) {\n      this._soundService?.playBellSound();\n    }\n\n    this._onBell.fire();\n\n    // if (this._visualBell()) {\n    //   this.element.classList.add('visual-bell-active');\n    //   clearTimeout(this._visualBellTimer);\n    //   this._visualBellTimer = window.setTimeout(() => {\n    //     this.element.classList.remove('visual-bell-active');\n    //   }, 200);\n    // }\n  }\n\n  /**\n   * Resizes the terminal.\n   *\n   * @param x The number of columns to resize to.\n   * @param y The number of rows to resize to.\n   */\n  public resize(x: number, y: number): void {\n    if (x === this.cols && y === this.rows) {\n      // Check if we still need to measure the char size (fixes #785).\n      if (this._charSizeService && !this._charSizeService.hasValidSize) {\n        this._charSizeService.measure();\n      }\n      return;\n    }\n\n    super.resize(x, y);\n  }\n\n  private _afterResize(x: number, y: number): void {\n    this._charSizeService?.measure();\n\n    // Sync the scroll area to make sure scroll events don't fire and scroll the viewport to an\n    // invalid location\n    this.viewport?.syncScrollArea(true);\n  }\n\n  /**\n   * Clear the entire buffer, making the prompt line the new first line.\n   */\n  public clear(): void {\n    if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n      // Don't clear if it's already clear\n      return;\n    }\n    this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y)!);\n    this.buffer.lines.length = 1;\n    this.buffer.ydisp = 0;\n    this.buffer.ybase = 0;\n    this.buffer.y = 0;\n    for (let i = 1; i < this.rows; i++) {\n      this.buffer.lines.push(this.buffer.getBlankLine(DEFAULT_ATTR_DATA));\n    }\n    this.refresh(0, this.rows - 1);\n    this._onScroll.fire({ position: this.buffer.ydisp, source: ScrollSource.TERMINAL });\n  }\n\n  /**\n   * Reset terminal.\n   * Note: Calling this directly from JS is synchronous but does not clear\n   * input buffers and does not reset the parser, thus the terminal will\n   * continue to apply pending input data.\n   * If you need in band reset (synchronous with input data) consider\n   * using DECSTR (soft reset, CSI ! p) or RIS instead (hard reset, ESC c).\n   */\n  public reset(): void {\n    /**\n     * Since _setup handles a full terminal creation, we have to carry forward\n     * a few things that should not reset.\n     */\n    this.options.rows = this.rows;\n    this.options.cols = this.cols;\n    const customKeyEventHandler = this._customKeyEventHandler;\n\n    this._setup();\n    super.reset();\n    this._selectionService?.reset();\n\n    // reattach\n    this._customKeyEventHandler = customKeyEventHandler;\n\n    // do a full screen refresh\n    this.refresh(0, this.rows - 1);\n    this.viewport?.syncScrollArea();\n  }\n\n  private _reportWindowsOptions(type: WindowsOptionsReportType): void {\n    if (!this._renderService) {\n      return;\n    }\n\n    switch (type) {\n      case WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:\n        const canvasWidth = this._renderService.dimensions.scaledCanvasWidth.toFixed(0);\n        const canvasHeight = this._renderService.dimensions.scaledCanvasHeight.toFixed(0);\n        this._coreService.triggerDataEvent(`${C0.ESC}[4;${canvasHeight};${canvasWidth}t`);\n        break;\n      case WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:\n        const cellWidth = this._renderService.dimensions.scaledCellWidth.toFixed(0);\n        const cellHeight = this._renderService.dimensions.scaledCellHeight.toFixed(0);\n        this._coreService.triggerDataEvent(`${C0.ESC}[6;${cellHeight};${cellWidth}t`);\n        break;\n    }\n  }\n\n  // TODO: Remove cancel function and cancelEvents option\n  public cancel(ev: Event, force?: boolean): boolean | undefined {\n    if (!this.options.cancelEvents && !force) {\n      return;\n    }\n    ev.preventDefault();\n    ev.stopPropagation();\n    return false;\n  }\n\n  private _visualBell(): boolean {\n    return false;\n    // return this.options.bellStyle === 'visual' ||\n    //     this.options.bellStyle === 'both';\n  }\n\n  private _soundBell(): boolean {\n    return this.options.bellStyle === 'sound';\n    // return this.options.bellStyle === 'sound' ||\n    //     this.options.bellStyle === 'both';\n  }\n}\n\n/**\n * Helpers\n */\n\nfunction wasModifierKeyOnlyEvent(ev: KeyboardEvent): boolean {\n  return ev.keyCode === 16 || // Shift\n    ev.keyCode === 17 || // Ctrl\n    ev.keyCode === 18; // Alt\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IColorSet, IViewport } from 'browser/Types';\nimport { ICharSizeService, IRenderService } from 'browser/services/Services';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\nconst FALLBACK_SCROLL_BAR_WIDTH = 15;\n\n/**\n * Represents the viewport of a terminal, the visible area within the larger buffer of output.\n * Logic for the virtual scroll bar is included in this object.\n */\nexport class Viewport extends Disposable implements IViewport {\n  public scrollBarWidth: number = 0;\n  private _currentRowHeight: number = 0;\n  private _lastRecordedBufferLength: number = 0;\n  private _lastRecordedViewportHeight: number = 0;\n  private _lastRecordedBufferHeight: number = 0;\n  private _lastTouchY: number = 0;\n  private _lastScrollTop: number = 0;\n\n  // Stores a partial line amount when scrolling, this is used to keep track of how much of a line\n  // is scrolled so we can \"scroll\" over partial lines and feel natural on touchpads. This is a\n  // quick fix and could have a more robust solution in place that reset the value when needed.\n  private _wheelPartialScroll: number = 0;\n\n  private _refreshAnimationFrame: number | null = null;\n  private _ignoreNextScrollEvent: boolean = false;\n\n  constructor(\n    private readonly _scrollLines: (amount: number) => void,\n    private readonly _viewportElement: HTMLElement,\n    private readonly _scrollArea: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    super();\n\n    // Measure the width of the scrollbar. If it is 0 we can assume it's an OSX overlay scrollbar.\n    // Unfortunately the overlay scrollbar would be hidden underneath the screen element in that case,\n    // therefore we account for a standard amount to make it visible\n    this.scrollBarWidth = (this._viewportElement.offsetWidth - this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n    this.register(addDisposableDomListener(this._viewportElement, 'scroll', this._onScroll.bind(this)));\n\n    // Perform this async to ensure the ICharSizeService is ready.\n    setTimeout(() => this.syncScrollArea(), 0);\n  }\n\n  public onThemeChange(colors: IColorSet): void {\n    this._viewportElement.style.backgroundColor = colors.background.css;\n  }\n\n  /**\n   * Refreshes row height, setting line-height, viewport height and scroll area height if\n   * necessary.\n   */\n  private _refresh(immediate: boolean): void {\n    if (immediate) {\n      this._innerRefresh();\n      if (this._refreshAnimationFrame !== null) {\n        cancelAnimationFrame(this._refreshAnimationFrame);\n      }\n      return;\n    }\n    if (this._refreshAnimationFrame === null) {\n      this._refreshAnimationFrame = requestAnimationFrame(() => this._innerRefresh());\n    }\n  }\n\n  private _innerRefresh(): void {\n    if (this._charSizeService.height > 0) {\n      this._currentRowHeight = this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio;\n      this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n      const newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderService.dimensions.canvasHeight);\n      if (this._lastRecordedBufferHeight !== newBufferHeight) {\n        this._lastRecordedBufferHeight = newBufferHeight;\n        this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n      }\n    }\n\n    // Sync scrollTop\n    const scrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;\n    if (this._viewportElement.scrollTop !== scrollTop) {\n      // Ignore the next scroll event which will be triggered by setting the scrollTop as we do not\n      // want this event to scroll the terminal\n      this._ignoreNextScrollEvent = true;\n      this._viewportElement.scrollTop = scrollTop;\n    }\n\n    this._refreshAnimationFrame = null;\n  }\n  /**\n   * Updates dimensions and synchronizes the scroll area if necessary.\n   */\n  public syncScrollArea(immediate: boolean = false): void {\n    // If buffer height changed\n    if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) {\n      this._lastRecordedBufferLength = this._bufferService.buffer.lines.length;\n      this._refresh(immediate);\n      return;\n    }\n\n    // If viewport height changed\n    if (this._lastRecordedViewportHeight !== this._renderService.dimensions.canvasHeight) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If the buffer position doesn't match last scroll top\n    const newScrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;\n    if (this._lastScrollTop !== newScrollTop) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If element's scroll top changed, this can happen when hiding the element\n    if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If row height changed\n    if (this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n      this._refresh(immediate);\n      return;\n    }\n  }\n\n  /**\n   * Handles scroll events on the viewport, calculating the new viewport and requesting the\n   * terminal to scroll to it.\n   * @param ev The scroll event.\n   */\n  private _onScroll(ev: Event): void {\n    // Record current scroll top position\n    this._lastScrollTop = this._viewportElement.scrollTop;\n\n    // Don't attempt to scroll if the element is not visible, otherwise scrollTop will be corrupt\n    // which causes the terminal to scroll the buffer to the top\n    if (!this._viewportElement.offsetParent) {\n      return;\n    }\n\n    // Ignore the event if it was flagged to ignore (when the source of the event is from Viewport)\n    if (this._ignoreNextScrollEvent) {\n      this._ignoreNextScrollEvent = false;\n      // Still trigger the scroll so lines get refreshed\n      this._scrollLines(0);\n      return;\n    }\n\n    const newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n    const diff = newRow - this._bufferService.buffer.ydisp;\n    this._scrollLines(diff);\n  }\n\n  /**\n   * Handles bubbling of scroll event in case the viewport has reached top or bottom\n   * @param ev The scroll event.\n   * @param amount The amount scrolled\n   */\n  private _bubbleScroll(ev: Event, amount: number): boolean {\n    const scrollPosFromTop = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;\n    if ((amount < 0 && this._viewportElement.scrollTop !== 0) ||\n      (amount > 0 && scrollPosFromTop < this._lastRecordedBufferHeight)) {\n      if (ev.cancelable) {\n        ev.preventDefault();\n      }\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Handles mouse wheel events by adjusting the viewport's scrollTop and delegating the actual\n   * scrolling to `onScroll`, this event needs to be attached manually by the consumer of\n   * `Viewport`.\n   * @param ev The mouse wheel event.\n   */\n  public onWheel(ev: WheelEvent): boolean {\n    const amount = this._getPixelsScrolled(ev);\n    if (amount === 0) {\n      return false;\n    }\n    this._viewportElement.scrollTop += amount;\n    return this._bubbleScroll(ev, amount);\n  }\n\n  private _getPixelsScrolled(ev: WheelEvent): number {\n    // Do nothing if it's not a vertical scroll event\n    if (ev.deltaY === 0) {\n      return 0;\n    }\n\n    // Fallback to WheelEvent.DOM_DELTA_PIXEL\n    let amount = this._applyScrollModifier(ev.deltaY, ev);\n    if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      amount *= this._currentRowHeight;\n    } else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      amount *= this._currentRowHeight * this._bufferService.rows;\n    }\n    return amount;\n  }\n\n  /**\n   * Gets the number of pixels scrolled by the mouse event taking into account what type of delta\n   * is being used.\n   * @param ev The mouse wheel event.\n   */\n  public getLinesScrolled(ev: WheelEvent): number {\n    // Do nothing if it's not a vertical scroll event\n    if (ev.deltaY === 0) {\n      return 0;\n    }\n\n    // Fallback to WheelEvent.DOM_DELTA_LINE\n    let amount = this._applyScrollModifier(ev.deltaY, ev);\n    if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      amount /= this._currentRowHeight + 0.0; // Prevent integer division\n      this._wheelPartialScroll += amount;\n      amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n      this._wheelPartialScroll %= 1;\n    } else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      amount *= this._bufferService.rows;\n    }\n    return amount;\n  }\n\n  private _applyScrollModifier(amount: number, ev: WheelEvent): number {\n    const modifier = this._optionsService.options.fastScrollModifier;\n    // Multiply the scroll speed when the modifier is down\n    if ((modifier === 'alt' && ev.altKey) ||\n      (modifier === 'ctrl' && ev.ctrlKey) ||\n      (modifier === 'shift' && ev.shiftKey)) {\n      return amount * this._optionsService.options.fastScrollSensitivity * this._optionsService.options.scrollSensitivity;\n    }\n\n    return amount * this._optionsService.options.scrollSensitivity;\n  }\n\n  /**\n   * Handles the touchstart event, recording the touch occurred.\n   * @param ev The touch event.\n   */\n  public onTouchStart(ev: TouchEvent): void {\n    this._lastTouchY = ev.touches[0].pageY;\n  }\n\n  /**\n   * Handles the touchmove event, scrolling the viewport if the position shifted.\n   * @param ev The touch event.\n   */\n  public onTouchMove(ev: TouchEvent): boolean {\n    const deltaY = this._lastTouchY - ev.touches[0].pageY;\n    this._lastTouchY = ev.touches[0].pageY;\n    if (deltaY === 0) {\n      return false;\n    }\n    this._viewportElement.scrollTop += deltaY;\n    return this._bubbleScroll(ev, deltaY);\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderService } from 'browser/services/Services';\nimport { IBufferService, ICoreService, IOptionsService } from 'common/services/Services';\n\ninterface IPosition {\n  start: number;\n  end: number;\n}\n\n/**\n * Encapsulates the logic for handling compositionstart, compositionupdate and compositionend\n * events, displaying the in-progress composition to the UI and forwarding the final composition\n * to the handler.\n */\nexport class CompositionHelper {\n  /**\n   * Whether input composition is currently happening, eg. via a mobile keyboard, speech input or\n   * IME. This variable determines whether the compositionText should be displayed on the UI.\n   */\n  private _isComposing: boolean;\n  public get isComposing(): boolean { return this._isComposing; }\n\n  /**\n   * The position within the input textarea's value of the current composition.\n   */\n  private _compositionPosition: IPosition;\n\n  /**\n   * Whether a composition is in the process of being sent, setting this to false will cancel any\n   * in-progress composition.\n   */\n  private _isSendingComposition: boolean;\n\n  /**\n   * Data already sent due to keydown event.\n   */\n  private _dataAlreadySent: string;\n\n  constructor(\n    private readonly _textarea: HTMLTextAreaElement,\n    private readonly _compositionView: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    this._isComposing = false;\n    this._isSendingComposition = false;\n    this._compositionPosition = { start: 0, end: 0 };\n    this._dataAlreadySent = '';\n  }\n\n  /**\n   * Handles the compositionstart event, activating the composition view.\n   */\n  public compositionstart(): void {\n    this._isComposing = true;\n    this._compositionPosition.start = this._textarea.value.length;\n    this._compositionView.textContent = '';\n    this._dataAlreadySent = '';\n    this._compositionView.classList.add('active');\n  }\n\n  /**\n   * Handles the compositionupdate event, updating the composition view.\n   * @param ev The event.\n   */\n  public compositionupdate(ev: CompositionEvent): void {\n    this._compositionView.textContent = ev.data;\n    this.updateCompositionElements();\n    setTimeout(() => {\n      this._compositionPosition.end = this._textarea.value.length;\n    }, 0);\n  }\n\n  /**\n   * Handles the compositionend event, hiding the composition view and sending the composition to\n   * the handler.\n   */\n  public compositionend(): void {\n    this._finalizeComposition(true);\n  }\n\n  /**\n   * Handles the keydown event, routing any necessary events to the CompositionHelper functions.\n   * @param ev The keydown event.\n   * @return Whether the Terminal should continue processing the keydown event.\n   */\n  public keydown(ev: KeyboardEvent): boolean {\n    if (this._isComposing || this._isSendingComposition) {\n      if (ev.keyCode === 229) {\n        // Continue composing if the keyCode is the \"composition character\"\n        return false;\n      }\n      if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n        // Continue composing if the keyCode is a modifier key\n        return false;\n      }\n      // Finish composition immediately. This is mainly here for the case where enter is\n      // pressed and the handler needs to be triggered before the command is executed.\n      this._finalizeComposition(false);\n    }\n\n    if (ev.keyCode === 229) {\n      // If the \"composition character\" is used but gets to this point it means a non-composition\n      // character (eg. numbers and punctuation) was pressed when the IME was active.\n      this._handleAnyTextareaChanges();\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Finalizes the composition, resuming regular input actions. This is called when a composition\n   * is ending.\n   * @param waitForPropagation Whether to wait for events to propagate before sending\n   *   the input. This should be false if a non-composition keystroke is entered before the\n   *   compositionend event is triggered, such as enter, so that the composition is sent before\n   *   the command is executed.\n   */\n  private _finalizeComposition(waitForPropagation: boolean): void {\n    this._compositionView.classList.remove('active');\n    this._isComposing = false;\n\n    if (!waitForPropagation) {\n      // Cancel any delayed composition send requests and send the input immediately.\n      this._isSendingComposition = false;\n      const input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n      this._coreService.triggerDataEvent(input, true);\n    } else {\n      // Make a deep copy of the composition position here as a new compositionstart event may\n      // fire before the setTimeout executes.\n      const currentCompositionPosition = {\n        start: this._compositionPosition.start,\n        end: this._compositionPosition.end\n      };\n\n      // Since composition* events happen before the changes take place in the textarea on most\n      // browsers, use a setTimeout with 0ms time to allow the native compositionend event to\n      // complete. This ensures the correct character is retrieved.\n      // This solution was used because:\n      // - The compositionend event's data property is unreliable, at least on Chromium\n      // - The last compositionupdate event's data property does not always accurately describe\n      //   the character, a counter example being Korean where an ending consonsant can move to\n      //   the following character if the following input is a vowel.\n      this._isSendingComposition = true;\n      setTimeout(() => {\n        // Ensure that the input has not already been sent\n        if (this._isSendingComposition) {\n          this._isSendingComposition = false;\n          let input;\n          // Add length of data already sent due to keydown event,\n          // otherwise input characters can be duplicated. (Issue #3191)\n          currentCompositionPosition.start += this._dataAlreadySent.length;\n          if (this._isComposing) {\n            // Use the end position to get the string if a new composition has started.\n            input = this._textarea.value.substring(currentCompositionPosition.start, currentCompositionPosition.end);\n          } else {\n            // Don't use the end position here in order to pick up any characters after the\n            // composition has finished, for example when typing a non-composition character\n            // (eg. 2) after a composition character.\n            input = this._textarea.value.substring(currentCompositionPosition.start);\n          }\n          if (input.length > 0) {\n            this._coreService.triggerDataEvent(input, true);\n          }\n        }\n      }, 0);\n    }\n  }\n\n  /**\n   * Apply any changes made to the textarea after the current event chain is allowed to complete.\n   * This should be called when not currently composing but a keydown event with the \"composition\n   * character\" (229) is triggered, in order to allow non-composition text to be entered when an\n   * IME is active.\n   */\n  private _handleAnyTextareaChanges(): void {\n    const oldValue = this._textarea.value;\n    setTimeout(() => {\n      // Ignore if a composition has started since the timeout\n      if (!this._isComposing) {\n        const newValue = this._textarea.value;\n        const diff = newValue.replace(oldValue, '');\n        if (diff.length > 0) {\n          this._dataAlreadySent = diff;\n          this._coreService.triggerDataEvent(diff, true);\n        }\n      }\n    }, 0);\n  }\n\n  /**\n   * Positions the composition view on top of the cursor and the textarea just below it (so the\n   * IME helper dialog is positioned correctly).\n   * @param dontRecurse Whether to use setTimeout to recursively trigger another update, this is\n   *   necessary as the IME events across browsers are not consistently triggered.\n   */\n  public updateCompositionElements(dontRecurse?: boolean): void {\n    if (!this._isComposing) {\n      return;\n    }\n\n    if (this._bufferService.buffer.isCursorInViewport) {\n      const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n\n      const cellHeight = this._renderService.dimensions.actualCellHeight;\n      const cursorTop = this._bufferService.buffer.y * this._renderService.dimensions.actualCellHeight;\n      const cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;\n\n      this._compositionView.style.left = cursorLeft + 'px';\n      this._compositionView.style.top = cursorTop + 'px';\n      this._compositionView.style.height = cellHeight + 'px';\n      this._compositionView.style.lineHeight = cellHeight + 'px';\n      this._compositionView.style.fontFamily = this._optionsService.options.fontFamily;\n      this._compositionView.style.fontSize = this._optionsService.options.fontSize + 'px';\n      // Sync the textarea to the exact position of the composition view so the IME knows where the\n      // text is.\n      const compositionViewBounds = this._compositionView.getBoundingClientRect();\n      this._textarea.style.left = cursorLeft + 'px';\n      this._textarea.style.top = cursorTop + 'px';\n      // Ensure the text area is at least 1x1, otherwise certain IMEs may break\n      this._textarea.style.width = Math.max(compositionViewBounds.width, 1) + 'px';\n      this._textarea.style.height = Math.max(compositionViewBounds.height, 1) + 'px';\n      this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n    }\n\n    if (!dontRecurse) {\n      setTimeout(() => this.updateCompositionElements(true), 0);\n    }\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function getCoordsRelativeToElement(event: {clientX: number, clientY: number}, element: HTMLElement): [number, number] {\n  const rect = element.getBoundingClientRect();\n  return [event.clientX - rect.left, event.clientY - rect.top];\n}\n\n/**\n * Gets coordinates within the terminal for a particular mouse event. The result\n * is returned as an array in the form [x, y] instead of an object as it's a\n * little faster and this function is used in some low level code.\n * @param event The mouse event.\n * @param element The terminal's container element.\n * @param colCount The number of columns in the terminal.\n * @param rowCount The number of rows n the terminal.\n * @param isSelection Whether the request is for the selection or not. This will\n * apply an offset to the x value such that the left half of the cell will\n * select that cell and the right half will select the next cell.\n */\nexport function getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, hasValidCharSize: boolean, actualCellWidth: number, actualCellHeight: number, isSelection?: boolean): [number, number] | undefined {\n  // Coordinates cannot be measured if there are no valid\n  if (!hasValidCharSize) {\n    return undefined;\n  }\n\n  const coords = getCoordsRelativeToElement(event, element);\n  if (!coords) {\n    return undefined;\n  }\n\n  coords[0] = Math.ceil((coords[0] + (isSelection ? actualCellWidth / 2 : 0)) / actualCellWidth);\n  coords[1] = Math.ceil(coords[1] / actualCellHeight);\n\n  // Ensure coordinates are within the terminal viewport. Note that selections\n  // need an addition point of precision to cover the end point (as characters\n  // cover half of one char and half of the next).\n  coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n  coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n\n  return coords;\n}\n\n/**\n * Gets coordinates within the terminal for a particular mouse event, wrapping\n * them to the bounds of the terminal and adding 32 to both the x and y values\n * as expected by xterm.\n */\nexport function getRawByteCoords(coords: [number, number] | undefined): { x: number, y: number } | undefined {\n  if (!coords) {\n    return undefined;\n  }\n\n  // xterm sends raw bytes and starts at 32 (SP) for each.\n  return { x: coords[0] + 32, y: coords[1] + 32 };\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { C0 } from 'common/data/EscapeSequences';\nimport { IBufferService } from 'common/services/Services';\n\nconst enum Direction {\n  UP = 'A',\n  DOWN = 'B',\n  RIGHT = 'C',\n  LEFT = 'D'\n}\n\n/**\n * Concatenates all the arrow sequences together.\n * Resets the starting row to an unwrapped row, moves to the requested row,\n * then moves to requested col.\n */\nexport function moveToCellSequence(targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  const startX = bufferService.buffer.x;\n  const startY = bufferService.buffer.y;\n\n  // The alt buffer should try to navigate between rows\n  if (!bufferService.buffer.hasScrollback) {\n    return resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) +\n      moveToRequestedRow(startY, targetY, bufferService, applicationCursor) +\n      moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor);\n  }\n\n  // Only move horizontally for the normal buffer\n  let direction;\n  if (startY === targetY) {\n    direction = startX > targetX ? Direction.LEFT : Direction.RIGHT;\n    return repeat(Math.abs(startX - targetX), sequence(direction, applicationCursor));\n  }\n  direction = startY > targetY ? Direction.LEFT : Direction.RIGHT;\n  const rowDifference = Math.abs(startY - targetY);\n  const cellsToMove = colsFromRowEnd(startY > targetY ? targetX : startX, bufferService) +\n    (rowDifference - 1) * bufferService.cols + 1 /* wrap around 1 row */ +\n    colsFromRowBeginning(startY > targetY ? startX : targetX, bufferService);\n  return repeat(cellsToMove, sequence(direction, applicationCursor));\n}\n\n/**\n * Find the number of cols from a row beginning to a col.\n */\nfunction colsFromRowBeginning(currX: number, bufferService: IBufferService): number {\n  return currX - 1;\n}\n\n/**\n * Find the number of cols from a col to row end.\n */\nfunction colsFromRowEnd(currX: number, bufferService: IBufferService): number {\n  return bufferService.cols - currX;\n}\n\n/**\n * If the initial position of the cursor is on a row that is wrapped, move the\n * cursor up to the first row that is not wrapped to have accurate vertical\n * positioning.\n */\nfunction resetStartingRow(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length === 0) {\n    return '';\n  }\n  return repeat(bufferLine(\n    startX, startY, startX,\n    startY - wrappedRowsForRow(bufferService, startY), false, bufferService\n  ).length, sequence(Direction.LEFT, applicationCursor));\n}\n\n/**\n * Using the reset starting and ending row, move to the requested row,\n * ignoring wrapped rows\n */\nfunction moveToRequestedRow(startY: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  const startRow = startY - wrappedRowsForRow(bufferService, startY);\n  const endRow = targetY - wrappedRowsForRow(bufferService, targetY);\n\n  const rowsToMove = Math.abs(startRow - endRow) - wrappedRowsCount(startY, targetY, bufferService);\n\n  return repeat(rowsToMove, sequence(verticalDirection(startY, targetY), applicationCursor));\n}\n\n/**\n * Move to the requested col on the ending row\n */\nfunction moveToRequestedCol(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  let startRow;\n  if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length > 0) {\n    startRow = targetY - wrappedRowsForRow(bufferService, targetY);\n  } else {\n    startRow = startY;\n  }\n\n  const endRow = targetY;\n  const direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);\n\n  return repeat(bufferLine(\n    startX, startRow, targetX, endRow,\n    direction === Direction.RIGHT, bufferService\n  ).length, sequence(direction, applicationCursor));\n}\n\n/**\n * Utility functions\n */\n\n/**\n * Calculates the number of wrapped rows between the unwrapped starting and\n * ending rows. These rows need to ignored since the cursor skips over them.\n */\nfunction wrappedRowsCount(startY: number, targetY: number, bufferService: IBufferService): number {\n  let wrappedRows = 0;\n  const startRow = startY - wrappedRowsForRow(bufferService, startY);\n  const endRow = targetY - wrappedRowsForRow(bufferService, targetY);\n\n  for (let i = 0; i < Math.abs(startRow - endRow); i++) {\n    const direction = verticalDirection(startY, targetY) === Direction.UP ? -1 : 1;\n    const line = bufferService.buffer.lines.get(startRow + (direction * i));\n    if (line && line.isWrapped) {\n      wrappedRows++;\n    }\n  }\n\n  return wrappedRows;\n}\n\n/**\n * Calculates the number of wrapped rows that make up a given row.\n * @param currentRow The row to determine how many wrapped rows make it up\n */\nfunction wrappedRowsForRow(bufferService: IBufferService, currentRow: number): number {\n  let rowCount = 0;\n  let line = bufferService.buffer.lines.get(currentRow);\n  let lineWraps = line && line.isWrapped;\n\n  while (lineWraps && currentRow >= 0 && currentRow < bufferService.rows) {\n    rowCount++;\n    line = bufferService.buffer.lines.get(--currentRow);\n    lineWraps = line && line.isWrapped;\n  }\n\n  return rowCount;\n}\n\n/**\n * Direction determiners\n */\n\n/**\n * Determines if the right or left arrow is needed\n */\nfunction horizontalDirection(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): Direction {\n  let startRow;\n  if (moveToRequestedRow(targetX, targetY, bufferService, applicationCursor).length > 0) {\n    startRow = targetY - wrappedRowsForRow(bufferService, targetY);\n  } else {\n    startRow = startY;\n  }\n\n  if ((startX < targetX &&\n    startRow <= targetY) || // down/right or same y/right\n    (startX >= targetX &&\n    startRow < targetY)) {  // down/left or same y/left\n    return Direction.RIGHT;\n  }\n  return Direction.LEFT;\n}\n\n/**\n * Determines if the up or down arrow is needed\n */\nfunction verticalDirection(startY: number, targetY: number): Direction {\n  return startY > targetY ? Direction.UP : Direction.DOWN;\n}\n\n/**\n * Constructs the string of chars in the buffer from a starting row and col\n * to an ending row and col\n * @param startCol The starting column position\n * @param startRow The starting row position\n * @param endCol The ending column position\n * @param endRow The ending row position\n * @param forward Direction to move\n */\nfunction bufferLine(\n  startCol: number,\n  startRow: number,\n  endCol: number,\n  endRow: number,\n  forward: boolean,\n  bufferService: IBufferService\n): string {\n  let currentCol = startCol;\n  let currentRow = startRow;\n  let bufferStr = '';\n\n  while (currentCol !== endCol || currentRow !== endRow) {\n    currentCol += forward ? 1 : -1;\n\n    if (forward && currentCol > bufferService.cols - 1) {\n      bufferStr += bufferService.buffer.translateBufferLineToString(\n        currentRow, false, startCol, currentCol\n      );\n      currentCol = 0;\n      startCol = 0;\n      currentRow++;\n    } else if (!forward && currentCol < 0) {\n      bufferStr += bufferService.buffer.translateBufferLineToString(\n        currentRow, false, 0, startCol + 1\n      );\n      currentCol = bufferService.cols - 1;\n      startCol = currentCol;\n      currentRow--;\n    }\n  }\n\n  return bufferStr + bufferService.buffer.translateBufferLineToString(\n    currentRow, false, startCol, currentCol\n  );\n}\n\n/**\n * Constructs the escape sequence for clicking an arrow\n * @param direction The direction to move\n */\nfunction sequence(direction: Direction, applicationCursor: boolean): string {\n  const mod =  applicationCursor ? 'O' : '[';\n  return C0.ESC + mod + direction;\n}\n\n/**\n * Returns a string repeated a given number of times\n * Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n * @param count The number of times to repeat the string\n * @param string The string that is to be repeated\n */\nfunction repeat(count: number, str: string): string {\n  count = Math.floor(count);\n  let rpt = '';\n  for (let i = 0; i < count; i++) {\n    rpt += str;\n  }\n  return rpt;\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ITerminalAddon, IDisposable, Terminal } from 'xterm';\n\nexport interface ILoadedAddon {\n  instance: ITerminalAddon;\n  dispose: () => void;\n  isDisposed: boolean;\n}\n\nexport class AddonManager implements IDisposable {\n  protected _addons: ILoadedAddon[] = [];\n\n  constructor() {\n  }\n\n  public dispose(): void {\n    for (let i = this._addons.length - 1; i >= 0; i--) {\n      this._addons[i].instance.dispose();\n    }\n  }\n\n  public loadAddon(terminal: Terminal, instance: ITerminalAddon): void {\n    const loadedAddon: ILoadedAddon = {\n      instance,\n      dispose: instance.dispose,\n      isDisposed: false\n    };\n    this._addons.push(loadedAddon);\n    instance.dispose = () => this._wrappedAddonDispose(loadedAddon);\n    instance.activate(<any>terminal);\n  }\n\n  private _wrappedAddonDispose(loadedAddon: ILoadedAddon): void {\n    if (loadedAddon.isDisposed) {\n      // Do nothing if already disposed\n      return;\n    }\n    let index = -1;\n    for (let i = 0; i < this._addons.length; i++) {\n      if (this._addons[i] === loadedAddon) {\n        index = i;\n        break;\n      }\n    }\n    if (index === -1) {\n      throw new Error('Could not dispose an addon that has not been loaded');\n    }\n    loadedAddon.isDisposed = true;\n    loadedAddon.dispose.apply(loadedAddon.instance);\n    this._addons.splice(index, 1);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Terminal as ITerminalApi, ITerminalOptions, IMarker, IDisposable, ILinkMatcherOptions, ITheme, ILocalizableStrings, ITerminalAddon, ISelectionPosition, IBuffer as IBufferApi, IBufferNamespace as IBufferNamespaceApi, IBufferLine as IBufferLineApi, IBufferCell as IBufferCellApi, IParser, IFunctionIdentifier, ILinkProvider, IUnicodeHandling, IUnicodeVersionProvider, FontWeight } from 'xterm';\nimport { ITerminal } from 'browser/Types';\nimport { IBufferLine, ICellData } from 'common/Types';\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { Terminal as TerminalCore } from '../Terminal';\nimport * as Strings from '../LocalizableStrings';\nimport { IEvent, EventEmitter } from 'common/EventEmitter';\nimport { AddonManager } from './AddonManager';\nimport { IParams } from 'common/parser/Types';\nimport { BufferSet } from 'common/buffer/BufferSet';\n\nexport class Terminal implements ITerminalApi {\n  private _core: ITerminal;\n  private _addonManager: AddonManager;\n  private _parser: IParser | undefined;\n  private _buffer: BufferNamespaceApi | undefined;\n\n  constructor(options?: ITerminalOptions) {\n    this._core = new TerminalCore(options);\n    this._addonManager = new AddonManager();\n  }\n\n  private _checkProposedApi(): void {\n    if (!this._core.optionsService.options.allowProposedApi) {\n      throw new Error('You must set the allowProposedApi option to true to use proposed API');\n    }\n  }\n\n  public get onCursorMove(): IEvent<void> { return this._core.onCursorMove; }\n  public get onLineFeed(): IEvent<void> { return this._core.onLineFeed; }\n  public get onSelectionChange(): IEvent<void> { return this._core.onSelectionChange; }\n  public get onData(): IEvent<string> { return this._core.onData; }\n  public get onBinary(): IEvent<string> { return this._core.onBinary; }\n  public get onTitleChange(): IEvent<string> { return this._core.onTitleChange; }\n  public get onBell(): IEvent<void> { return this._core.onBell; }\n  public get onScroll(): IEvent<number> { return this._core.onScroll; }\n  public get onKey(): IEvent<{ key: string, domEvent: KeyboardEvent }> { return this._core.onKey; }\n  public get onRender(): IEvent<{ start: number, end: number }> { return this._core.onRender; }\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._core.onResize; }\n\n  public get element(): HTMLElement | undefined { return this._core.element; }\n  public get parser(): IParser {\n    this._checkProposedApi();\n    if (!this._parser) {\n      this._parser = new ParserApi(this._core);\n    }\n    return this._parser;\n  }\n  public get unicode(): IUnicodeHandling {\n    this._checkProposedApi();\n    return new UnicodeApi(this._core);\n  }\n  public get textarea(): HTMLTextAreaElement | undefined { return this._core.textarea; }\n  public get rows(): number { return this._core.rows; }\n  public get cols(): number { return this._core.cols; }\n  public get buffer(): IBufferNamespaceApi {\n    this._checkProposedApi();\n    if (!this._buffer) {\n      this._buffer = new BufferNamespaceApi(this._core);\n    }\n    return this._buffer;\n  }\n  public get markers(): ReadonlyArray<IMarker> {\n    this._checkProposedApi();\n    return this._core.markers;\n  }\n  public blur(): void {\n    this._core.blur();\n  }\n  public focus(): void {\n    this._core.focus();\n  }\n  public resize(columns: number, rows: number): void {\n    this._verifyIntegers(columns, rows);\n    this._core.resize(columns, rows);\n  }\n  public open(parent: HTMLElement): void {\n    this._core.open(parent);\n  }\n  public attachCustomKeyEventHandler(customKeyEventHandler: (event: KeyboardEvent) => boolean): void {\n    this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n  }\n  public registerLinkMatcher(regex: RegExp, handler: (event: MouseEvent, uri: string) => void, options?: ILinkMatcherOptions): number {\n    this._checkProposedApi();\n    return this._core.registerLinkMatcher(regex, handler, options);\n  }\n  public deregisterLinkMatcher(matcherId: number): void {\n    this._checkProposedApi();\n    this._core.deregisterLinkMatcher(matcherId);\n  }\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    this._checkProposedApi();\n    return this._core.registerLinkProvider(linkProvider);\n  }\n  public registerCharacterJoiner(handler: (text: string) => [number, number][]): number {\n    this._checkProposedApi();\n    return this._core.registerCharacterJoiner(handler);\n  }\n  public deregisterCharacterJoiner(joinerId: number): void {\n    this._checkProposedApi();\n    this._core.deregisterCharacterJoiner(joinerId);\n  }\n  public registerMarker(cursorYOffset: number): IMarker | undefined {\n    this._checkProposedApi();\n    this._verifyIntegers(cursorYOffset);\n    return this._core.addMarker(cursorYOffset);\n  }\n  public addMarker(cursorYOffset: number): IMarker | undefined {\n    return this.registerMarker(cursorYOffset);\n  }\n  public hasSelection(): boolean {\n    return this._core.hasSelection();\n  }\n  public select(column: number, row: number, length: number): void {\n    this._verifyIntegers(column, row, length);\n    this._core.select(column, row, length);\n  }\n  public getSelection(): string {\n    return this._core.getSelection();\n  }\n  public getSelectionPosition(): ISelectionPosition | undefined {\n    return this._core.getSelectionPosition();\n  }\n  public clearSelection(): void {\n    this._core.clearSelection();\n  }\n  public selectAll(): void {\n    this._core.selectAll();\n  }\n  public selectLines(start: number, end: number): void {\n    this._verifyIntegers(start, end);\n    this._core.selectLines(start, end);\n  }\n  public dispose(): void {\n    this._addonManager.dispose();\n    this._core.dispose();\n  }\n  public scrollLines(amount: number): void {\n    this._verifyIntegers(amount);\n    this._core.scrollLines(amount);\n  }\n  public scrollPages(pageCount: number): void {\n    this._verifyIntegers(pageCount);\n    this._core.scrollPages(pageCount);\n  }\n  public scrollToTop(): void {\n    this._core.scrollToTop();\n  }\n  public scrollToBottom(): void {\n    this._core.scrollToBottom();\n  }\n  public scrollToLine(line: number): void {\n    this._verifyIntegers(line);\n    this._core.scrollToLine(line);\n  }\n  public clear(): void {\n    this._core.clear();\n  }\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    this._core.write(data, callback);\n  }\n  public writeUtf8(data: Uint8Array, callback?: () => void): void {\n    this._core.write(data, callback);\n  }\n  public writeln(data: string | Uint8Array, callback?: () => void): void {\n    this._core.write(data);\n    this._core.write('\\r\\n', callback);\n  }\n  public paste(data: string): void {\n    this._core.paste(data);\n  }\n  public getOption(key: 'bellSound' | 'bellStyle' | 'cursorStyle' | 'fontFamily' | 'logLevel' | 'rendererType' | 'termName' | 'wordSeparator'): string;\n  public getOption(key: 'allowTransparency' | 'altClickMovesCursor' | 'cancelEvents' | 'convertEol' | 'cursorBlink' | 'disableStdin' | 'macOptionIsMeta' | 'rightClickSelectsWord' | 'popOnBell' | 'visualBell'): boolean;\n  public getOption(key: 'cols' | 'fontSize' | 'letterSpacing' | 'lineHeight' | 'rows' | 'tabStopWidth' | 'scrollback'): number;\n  public getOption(key: 'fontWeight' | 'fontWeightBold'): FontWeight;\n  public getOption(key: string): any;\n  public getOption(key: any): any {\n    return this._core.optionsService.getOption(key);\n  }\n  public setOption(key: 'bellSound' | 'fontFamily' | 'termName' | 'wordSeparator', value: string): void;\n  public setOption(key: 'fontWeight' | 'fontWeightBold', value: 'normal' | 'bold' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900' | number): void;\n  public setOption(key: 'logLevel', value: 'debug' | 'info' | 'warn' | 'error' | 'off'): void;\n  public setOption(key: 'bellStyle', value: 'none' | 'visual' | 'sound' | 'both'): void;\n  public setOption(key: 'cursorStyle', value: 'block' | 'underline' | 'bar'): void;\n  public setOption(key: 'allowTransparency' | 'altClickMovesCursor' | 'cancelEvents' | 'convertEol' | 'cursorBlink' | 'disableStdin' | 'macOptionIsMeta' | 'rightClickSelectsWord' | 'popOnBell' | 'visualBell', value: boolean): void;\n  public setOption(key: 'fontSize' | 'letterSpacing' | 'lineHeight' | 'tabStopWidth' | 'scrollback', value: number): void;\n  public setOption(key: 'theme', value: ITheme): void;\n  public setOption(key: 'cols' | 'rows', value: number): void;\n  public setOption(key: string, value: any): void;\n  public setOption(key: any, value: any): void {\n    this._core.optionsService.setOption(key, value);\n  }\n  public refresh(start: number, end: number): void {\n    this._verifyIntegers(start, end);\n    this._core.refresh(start, end);\n  }\n  public reset(): void {\n    this._core.reset();\n  }\n  public loadAddon(addon: ITerminalAddon): void {\n    return this._addonManager.loadAddon(this, addon);\n  }\n  public static get strings(): ILocalizableStrings {\n    return Strings;\n  }\n\n  private _verifyIntegers(...values: number[]): void {\n    for (const value of values) {\n      if (value === Infinity || isNaN(value) || value % 1 !== 0) {\n        throw new Error('This API only accepts integers');\n      }\n    }\n  }\n}\n\nclass BufferApiView implements IBufferApi {\n  constructor(\n    private _buffer: IBuffer,\n    public readonly type: 'normal' | 'alternate'\n  ) { }\n\n  public init(buffer: IBuffer): BufferApiView {\n    this._buffer = buffer;\n    return this;\n  }\n\n  public get cursorY(): number { return this._buffer.y; }\n  public get cursorX(): number { return this._buffer.x; }\n  public get viewportY(): number { return this._buffer.ydisp; }\n  public get baseY(): number { return this._buffer.ybase; }\n  public get length(): number { return this._buffer.lines.length; }\n  public getLine(y: number): IBufferLineApi | undefined {\n    const line = this._buffer.lines.get(y);\n    if (!line) {\n      return undefined;\n    }\n    return new BufferLineApiView(line);\n  }\n  public getNullCell(): IBufferCellApi { return new CellData(); }\n}\n\nclass BufferNamespaceApi implements IBufferNamespaceApi {\n  private _normal: BufferApiView;\n  private _alternate: BufferApiView;\n  private _onBufferChange = new EventEmitter<IBufferApi>();\n  public get onBufferChange(): IEvent<IBufferApi> { return this._onBufferChange.event; }\n\n  constructor(private _core: ITerminal) {\n    this._normal = new BufferApiView(this._core.buffers.normal, 'normal');\n    this._alternate = new BufferApiView(this._core.buffers.alt, 'alternate');\n    this._core.buffers.onBufferActivate(() => this._onBufferChange.fire(this.active));\n  }\n  public get active(): IBufferApi {\n    if (this._core.buffers.active === this._core.buffers.normal) { return this.normal; }\n    if (this._core.buffers.active === this._core.buffers.alt) { return this.alternate; }\n    throw new Error('Active buffer is neither normal nor alternate');\n  }\n  public get normal(): IBufferApi {\n    return this._normal.init(this._core.buffers.normal);\n  }\n  public get alternate(): IBufferApi {\n    return this._alternate.init(this._core.buffers.alt);\n  }\n}\n\nclass BufferLineApiView implements IBufferLineApi {\n  constructor(private _line: IBufferLine) { }\n\n  public get isWrapped(): boolean { return this._line.isWrapped; }\n  public get length(): number { return this._line.length; }\n  public getCell(x: number, cell?: IBufferCellApi): IBufferCellApi | undefined {\n    if (x < 0 || x >= this._line.length) {\n      return undefined;\n    }\n\n    if (cell) {\n      this._line.loadCell(x, <ICellData>cell);\n      return cell;\n    }\n    return this._line.loadCell(x, new CellData());\n  }\n  public translateToString(trimRight?: boolean, startColumn?: number, endColumn?: number): string {\n    return this._line.translateToString(trimRight, startColumn, endColumn);\n  }\n}\n\nclass ParserApi implements IParser {\n  constructor(private _core: ITerminal) { }\n\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerCsiHandler(id, (params: IParams) => callback(params.toArray()));\n  }\n  public addCsiHandler(id: IFunctionIdentifier, callback: (params: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this.registerCsiHandler(id, callback);\n  }\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerDcsHandler(id, (data: string, params: IParams) => callback(data, params.toArray()));\n  }\n  public addDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this.registerDcsHandler(id, callback);\n  }\n  public registerEscHandler(id: IFunctionIdentifier, handler: () => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerEscHandler(id, handler);\n  }\n  public addEscHandler(id: IFunctionIdentifier, handler: () => boolean | Promise<boolean>): IDisposable {\n    return this.registerEscHandler(id, handler);\n  }\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerOscHandler(ident, callback);\n  }\n  public addOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this.registerOscHandler(ident, callback);\n  }\n}\n\nclass UnicodeApi implements IUnicodeHandling {\n  constructor(private _core: ITerminal) { }\n\n  public register(provider: IUnicodeVersionProvider): void {\n    this._core.unicodeService.register(provider);\n  }\n\n  public get versions(): string[] {\n    return this._core.unicodeService.versions;\n  }\n\n  public get activeVersion(): string {\n    return this._core.unicodeService.activeVersion;\n  }\n\n  public set activeVersion(version: string) {\n    this._core.unicodeService.activeVersion = version;\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions, IRenderLayer } from 'browser/renderer/Types';\nimport { ICellData } from 'common/Types';\nimport { DEFAULT_COLOR, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_CODE, Attributes } from 'common/buffer/Constants';\nimport { IGlyphIdentifier } from 'browser/renderer/atlas/Types';\nimport { DIM_OPACITY, INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { acquireCharAtlas } from 'browser/renderer/atlas/CharAtlasCache';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { IColorSet, IColor } from 'browser/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\nimport { throwIfFalsy } from 'browser/renderer/RendererUtils';\nimport { channels, color, rgba } from 'browser/Color';\nimport { removeElementFromParent } from 'browser/Dom';\n\nexport abstract class BaseRenderLayer implements IRenderLayer {\n  private _canvas: HTMLCanvasElement;\n  protected _ctx!: CanvasRenderingContext2D;\n  private _scaledCharWidth: number = 0;\n  private _scaledCharHeight: number = 0;\n  private _scaledCellWidth: number = 0;\n  private _scaledCellHeight: number = 0;\n  private _scaledCharLeft: number = 0;\n  private _scaledCharTop: number = 0;\n\n  protected _charAtlas: BaseCharAtlas | undefined;\n\n  /**\n   * An object that's reused when drawing glyphs in order to reduce GC.\n   */\n  private _currentGlyphIdentifier: IGlyphIdentifier = {\n    chars: '',\n    code: 0,\n    bg: 0,\n    fg: 0,\n    bold: false,\n    dim: false,\n    italic: false\n  };\n\n  constructor(\n    private _container: HTMLElement,\n    id: string,\n    zIndex: number,\n    private _alpha: boolean,\n    protected _colors: IColorSet,\n    private _rendererId: number,\n    protected readonly _bufferService: IBufferService,\n    protected readonly _optionsService: IOptionsService\n  ) {\n    this._canvas = document.createElement('canvas');\n    this._canvas.classList.add(`xterm-${id}-layer`);\n    this._canvas.style.zIndex = zIndex.toString();\n    this._initCanvas();\n    this._container.appendChild(this._canvas);\n  }\n\n  public dispose(): void {\n    removeElementFromParent(this._canvas);\n    this._charAtlas?.dispose();\n  }\n\n  private _initCanvas(): void {\n    this._ctx = throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n  }\n\n  public onOptionsChanged(): void {}\n  public onBlur(): void {}\n  public onFocus(): void {}\n  public onCursorMove(): void {}\n  public onGridChanged(startRow: number, endRow: number): void {}\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {}\n\n  public setColors(colorSet: IColorSet): void {\n    this._refreshCharAtlas(colorSet);\n  }\n\n  protected _setTransparency(alpha: boolean): void {\n    // Do nothing when alpha doesn't change\n    if (alpha === this._alpha) {\n      return;\n    }\n\n    // Create new canvas and replace old one\n    const oldCanvas = this._canvas;\n    this._alpha = alpha;\n    // Cloning preserves properties\n    this._canvas = this._canvas.cloneNode() as HTMLCanvasElement;\n    this._initCanvas();\n    this._container.replaceChild(this._canvas, oldCanvas);\n\n    // Regenerate char atlas and force a full redraw\n    this._refreshCharAtlas(this._colors);\n    this.onGridChanged(0, this._bufferService.rows - 1);\n  }\n\n  /**\n   * Refreshes the char atlas, aquiring a new one if necessary.\n   * @param colorSet The color set to use for the char atlas.\n   */\n  private _refreshCharAtlas(colorSet: IColorSet): void {\n    if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n      return;\n    }\n    this._charAtlas = acquireCharAtlas(this._optionsService.options, this._rendererId, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n    this._charAtlas.warmUp();\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    this._scaledCellWidth = dim.scaledCellWidth;\n    this._scaledCellHeight = dim.scaledCellHeight;\n    this._scaledCharWidth = dim.scaledCharWidth;\n    this._scaledCharHeight = dim.scaledCharHeight;\n    this._scaledCharLeft = dim.scaledCharLeft;\n    this._scaledCharTop = dim.scaledCharTop;\n    this._canvas.width = dim.scaledCanvasWidth;\n    this._canvas.height = dim.scaledCanvasHeight;\n    this._canvas.style.width = `${dim.canvasWidth}px`;\n    this._canvas.style.height = `${dim.canvasHeight}px`;\n\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n\n    this._refreshCharAtlas(this._colors);\n  }\n\n  public abstract reset(): void;\n\n  /**\n   * Fills 1+ cells completely. This uses the existing fillStyle on the context.\n   * @param x The column to start at.\n   * @param y The row to start at\n   * @param width The number of columns to fill.\n   * @param height The number of rows to fill.\n   */\n  protected _fillCells(x: number, y: number, width: number, height: number): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      y * this._scaledCellHeight,\n      width * this._scaledCellWidth,\n      height * this._scaledCellHeight);\n  }\n\n  /**\n   * Fills a 1px line (2px on HDPI) at the bottom of the cell. This uses the\n   * existing fillStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _fillBottomLineAtCells(x: number, y: number, width: number = 1): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1 /* Ensure it's drawn within the cell */,\n      width * this._scaledCellWidth,\n      window.devicePixelRatio);\n  }\n\n  /**\n   * Fills a 1px line (2px on HDPI) at the left of the cell. This uses the\n   * existing fillStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _fillLeftLineAtCell(x: number, y: number, width: number): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      y * this._scaledCellHeight,\n      window.devicePixelRatio * width,\n      this._scaledCellHeight);\n  }\n\n  /**\n   * Strokes a 1px rectangle (2px on HDPI) around a cell. This uses the existing\n   * strokeStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _strokeRectAtCell(x: number, y: number, width: number, height: number): void {\n    this._ctx.lineWidth = window.devicePixelRatio;\n    this._ctx.strokeRect(\n      x * this._scaledCellWidth + window.devicePixelRatio / 2,\n      y * this._scaledCellHeight + (window.devicePixelRatio / 2),\n      width * this._scaledCellWidth - window.devicePixelRatio,\n      (height * this._scaledCellHeight) - window.devicePixelRatio);\n  }\n\n  /**\n   * Clears the entire canvas.\n   */\n  protected _clearAll(): void {\n    if (this._alpha) {\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    } else {\n      this._ctx.fillStyle = this._colors.background.css;\n      this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  /**\n   * Clears 1+ cells completely.\n   * @param x The column to start at.\n   * @param y The row to start at.\n   * @param width The number of columns to clear.\n   * @param height The number of rows to clear.\n   */\n  protected _clearCells(x: number, y: number, width: number, height: number): void {\n    if (this._alpha) {\n      this._ctx.clearRect(\n        x * this._scaledCellWidth,\n        y * this._scaledCellHeight,\n        width * this._scaledCellWidth,\n        height * this._scaledCellHeight);\n    } else {\n      this._ctx.fillStyle = this._colors.background.css;\n      this._ctx.fillRect(\n        x * this._scaledCellWidth,\n        y * this._scaledCellHeight,\n        width * this._scaledCellWidth,\n        height * this._scaledCellHeight);\n    }\n  }\n\n  /**\n   * Draws a truecolor character at the cell. The character will be clipped to\n   * ensure that it fits with the cell, including the cell to the right if it's\n   * a wide character. This uses the existing fillStyle on the context.\n   * @param cell The cell data for the character to draw.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   * @param color The color of the character.\n   */\n  protected _fillCharTrueColor(cell: CellData, x: number, y: number): void {\n    this._ctx.font = this._getFont(false, false);\n    this._ctx.textBaseline = 'ideographic';\n    this._clipRow(y);\n    this._ctx.fillText(\n      cell.getChars(),\n      x * this._scaledCellWidth + this._scaledCharLeft,\n      y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);\n  }\n\n  /**\n   * Draws one or more characters at a cell. If possible this will draw using\n   * the character atlas to reduce draw time.\n   * @param chars The character or characters.\n   * @param code The character code.\n   * @param width The width of the characters.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   * @param fg The foreground color, in the format stored within the attributes.\n   * @param bg The background color, in the format stored within the attributes.\n   * This is used to validate whether a cached image can be used.\n   * @param bold Whether the text is bold.\n   */\n  protected _drawChars(cell: ICellData, x: number, y: number): void {\n    const contrastColor = this._getContrastColor(cell);\n\n    // skip cache right away if we draw in RGB\n    // Note: to avoid bad runtime JoinedCellData will be skipped\n    //       in the cache handler itself (atlasDidDraw == false) and\n    //       fall through to uncached later down below\n    if (contrastColor || cell.isFgRGB() || cell.isBgRGB()) {\n      this._drawUncachedChars(cell, x, y, contrastColor);\n      return;\n    }\n\n    let fg;\n    let bg;\n    if (cell.isInverse()) {\n      fg = (cell.isBgDefault()) ? INVERTED_DEFAULT_COLOR : cell.getBgColor();\n      bg = (cell.isFgDefault()) ? INVERTED_DEFAULT_COLOR : cell.getFgColor();\n    } else {\n      bg = (cell.isBgDefault()) ? DEFAULT_COLOR : cell.getBgColor();\n      fg = (cell.isFgDefault()) ? DEFAULT_COLOR : cell.getFgColor();\n    }\n\n    const drawInBrightColor = this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8;\n\n    fg += drawInBrightColor ? 8 : 0;\n    this._currentGlyphIdentifier.chars = cell.getChars() || WHITESPACE_CELL_CHAR;\n    this._currentGlyphIdentifier.code = cell.getCode() || WHITESPACE_CELL_CODE;\n    this._currentGlyphIdentifier.bg = bg;\n    this._currentGlyphIdentifier.fg = fg;\n    this._currentGlyphIdentifier.bold = !!cell.isBold();\n    this._currentGlyphIdentifier.dim = !!cell.isDim();\n    this._currentGlyphIdentifier.italic = !!cell.isItalic();\n    const atlasDidDraw = this._charAtlas && this._charAtlas.draw(\n      this._ctx,\n      this._currentGlyphIdentifier,\n      x * this._scaledCellWidth + this._scaledCharLeft,\n      y * this._scaledCellHeight + this._scaledCharTop\n    );\n\n    if (!atlasDidDraw) {\n      this._drawUncachedChars(cell, x, y);\n    }\n  }\n\n  /**\n   * Draws one or more characters at one or more cells. The character(s) will be\n   * clipped to ensure that they fit with the cell(s), including the cell to the\n   * right if the last character is a wide character.\n   * @param chars The character.\n   * @param width The width of the character.\n   * @param fg The foreground color, in the format stored within the attributes.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   */\n  private _drawUncachedChars(cell: ICellData, x: number, y: number, fgOverride?: IColor): void {\n    this._ctx.save();\n    this._ctx.font = this._getFont(!!cell.isBold(), !!cell.isItalic());\n    this._ctx.textBaseline = 'ideographic';\n\n    if (cell.isInverse()) {\n      if (fgOverride) {\n        this._ctx.fillStyle = fgOverride.css;\n      } else if (cell.isBgDefault()) {\n        this._ctx.fillStyle = color.opaque(this._colors.background).css;\n      } else if (cell.isBgRGB()) {\n        this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n      } else {\n        let bg = cell.getBgColor();\n        if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {\n          bg += 8;\n        }\n        this._ctx.fillStyle = this._colors.ansi[bg].css;\n      }\n    } else {\n      if (fgOverride) {\n        this._ctx.fillStyle = fgOverride.css;\n      } else if (cell.isFgDefault()) {\n        this._ctx.fillStyle = this._colors.foreground.css;\n      } else if (cell.isFgRGB()) {\n        this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n      } else {\n        let fg = cell.getFgColor();\n        if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n          fg += 8;\n        }\n        this._ctx.fillStyle = this._colors.ansi[fg].css;\n      }\n    }\n\n    this._clipRow(y);\n\n    // Apply alpha to dim the character\n    if (cell.isDim()) {\n      this._ctx.globalAlpha = DIM_OPACITY;\n    }\n    // Draw the character\n    this._ctx.fillText(\n      cell.getChars(),\n      x * this._scaledCellWidth + this._scaledCharLeft,\n      y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);\n    this._ctx.restore();\n  }\n\n  /**\n   * Clips a row to ensure no pixels will be drawn outside the cells in the row.\n   * @param y The row to clip.\n   */\n  private _clipRow(y: number): void {\n    this._ctx.beginPath();\n    this._ctx.rect(\n      0,\n      y * this._scaledCellHeight,\n      this._bufferService.cols * this._scaledCellWidth,\n      this._scaledCellHeight);\n    this._ctx.clip();\n  }\n\n  /**\n   * Gets the current font.\n   * @param isBold If we should use the bold fontWeight.\n   */\n  protected _getFont(isBold: boolean, isItalic: boolean): string {\n    const fontWeight = isBold ? this._optionsService.options.fontWeightBold : this._optionsService.options.fontWeight;\n    const fontStyle = isItalic ? 'italic' : '';\n\n    return `${fontStyle} ${fontWeight} ${this._optionsService.options.fontSize * window.devicePixelRatio}px ${this._optionsService.options.fontFamily}`;\n  }\n\n  private _getContrastColor(cell: CellData): IColor | undefined {\n    if (this._optionsService.options.minimumContrastRatio === 1) {\n      return undefined;\n    }\n\n    // Try get from cache first\n    const adjustedColor = this._colors.contrastCache.getColor(cell.bg, cell.fg);\n    if (adjustedColor !== undefined) {\n      return adjustedColor || undefined;\n    }\n\n    let fgColor = cell.getFgColor();\n    let fgColorMode = cell.getFgColorMode();\n    let bgColor = cell.getBgColor();\n    let bgColorMode = cell.getBgColorMode();\n    const isInverse = !!cell.isInverse();\n    const isBold = !!cell.isInverse();\n    if (isInverse) {\n      const temp = fgColor;\n      fgColor = bgColor;\n      bgColor = temp;\n      const temp2 = fgColorMode;\n      fgColorMode = bgColorMode;\n      bgColorMode = temp2;\n    }\n\n    const bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, isInverse);\n    const fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, isInverse, isBold);\n    const result = rgba.ensureContrastRatio(bgRgba, fgRgba, this._optionsService.options.minimumContrastRatio);\n\n    if (!result) {\n      this._colors.contrastCache.setColor(cell.bg, cell.fg, null);\n      return undefined;\n    }\n\n    const color: IColor = {\n      css: channels.toCss(\n        (result >> 24) & 0xFF,\n        (result >> 16) & 0xFF,\n        (result >> 8) & 0xFF\n      ),\n      rgba: result\n    };\n    this._colors.contrastCache.setColor(cell.bg, cell.fg, color);\n\n    return color;\n  }\n\n  private _resolveBackgroundRgba(bgColorMode: number, bgColor: number, inverse: boolean): number {\n    switch (bgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        return this._colors.ansi[bgColor].rgba;\n      case Attributes.CM_RGB:\n        return bgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._colors.foreground.rgba;\n        }\n        return this._colors.background.rgba;\n    }\n  }\n\n  private _resolveForegroundRgba(fgColorMode: number, fgColor: number, inverse: boolean, bold: boolean): number {\n    switch (fgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        if (this._optionsService.options.drawBoldTextInBrightColors && bold && fgColor < 8) {\n          fgColor += 8;\n        }\n        return this._colors.ansi[fgColor].rgba;\n      case Attributes.CM_RGB:\n        return fgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._colors.background.rgba;\n        }\n        return this._colors.foreground.rgba;\n    }\n  }\n}\n\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { ICellData } from 'common/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IColorSet } from 'browser/Types';\nimport { IBufferService, IOptionsService, ICoreService } from 'common/services/Services';\nimport { IEventEmitter } from 'common/EventEmitter';\nimport { ICoreBrowserService } from 'browser/services/Services';\n\ninterface ICursorState {\n  x: number;\n  y: number;\n  isFocused: boolean;\n  style: string;\n  width: number;\n}\n\n/**\n * The time between cursor blinks.\n */\nconst BLINK_INTERVAL = 600;\n\nexport class CursorRenderLayer extends BaseRenderLayer {\n  private _state: ICursorState;\n  private _cursorRenderers: {[key: string]: (x: number, y: number, cell: ICellData) => void};\n  private _cursorBlinkStateManager: CursorBlinkStateManager | undefined;\n  private _cell: ICellData = new CellData();\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    private _onRequestRedraw: IEventEmitter<IRequestRedrawEvent>,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @ICoreBrowserService private readonly _coreBrowserService: ICoreBrowserService\n  ) {\n    super(container, 'cursor', zIndex, true, colors, rendererId, bufferService, optionsService);\n    this._state = {\n      x: 0,\n      y: 0,\n      isFocused: false,\n      style: '',\n      width: 0\n    };\n    this._cursorRenderers = {\n      'bar': this._renderBarCursor.bind(this),\n      'block': this._renderBlockCursor.bind(this),\n      'underline': this._renderUnderlineCursor.bind(this)\n    };\n    // TODO: Consider initial options? Maybe onOptionsChanged should be called at the end of open?\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state = {\n      x: 0,\n      y: 0,\n      isFocused: false,\n      style: '',\n      width: 0\n    };\n  }\n\n  public reset(): void {\n    this._clearCursor();\n    if (this._cursorBlinkStateManager) {\n      this._cursorBlinkStateManager.dispose();\n      this._cursorBlinkStateManager = undefined;\n      this.onOptionsChanged();\n    }\n  }\n\n  public onBlur(): void {\n    if (this._cursorBlinkStateManager) {\n      this._cursorBlinkStateManager.pause();\n    }\n    this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n  }\n\n  public onFocus(): void {\n    if (this._cursorBlinkStateManager) {\n      this._cursorBlinkStateManager.resume();\n    } else {\n      this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n    }\n  }\n\n  public onOptionsChanged(): void {\n    if (this._optionsService.options.cursorBlink) {\n      if (!this._cursorBlinkStateManager) {\n        this._cursorBlinkStateManager = new CursorBlinkStateManager(this._coreBrowserService.isFocused, () => {\n          this._render(true);\n        });\n      }\n    } else {\n      this._cursorBlinkStateManager?.dispose();\n      this._cursorBlinkStateManager = undefined;\n    }\n    // Request a refresh from the terminal as management of rendering is being\n    // moved back to the terminal\n    this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n  }\n\n  public onCursorMove(): void {\n    if (this._cursorBlinkStateManager) {\n      this._cursorBlinkStateManager.restartBlinkAnimation();\n    }\n  }\n\n  public onGridChanged(startRow: number, endRow: number): void {\n    if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n      this._render(false);\n    } else {\n      this._cursorBlinkStateManager.restartBlinkAnimation();\n    }\n  }\n\n  private _render(triggeredByAnimationFrame: boolean): void {\n    // Don't draw the cursor if it's hidden\n    if (!this._coreService.isCursorInitialized || this._coreService.isCursorHidden) {\n      this._clearCursor();\n      return;\n    }\n\n    const cursorY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;\n    const viewportRelativeCursorY = cursorY - this._bufferService.buffer.ydisp;\n\n    // Don't draw the cursor if it's off-screen\n    if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= this._bufferService.rows) {\n      this._clearCursor();\n      return;\n    }\n\n    // in case cursor.x == cols adjust visual cursor to cols - 1\n    const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n    this._bufferService.buffer.lines.get(cursorY)!.loadCell(cursorX, this._cell);\n    if (this._cell.content === undefined) {\n      return;\n    }\n\n    if (!this._coreBrowserService.isFocused) {\n      this._clearCursor();\n      this._ctx.save();\n      this._ctx.fillStyle = this._colors.cursor.css;\n      const cursorStyle = this._optionsService.options.cursorStyle;\n      if (cursorStyle && cursorStyle !== 'block') {\n        this._cursorRenderers[cursorStyle](cursorX, viewportRelativeCursorY, this._cell);\n      } else {\n        this._renderBlurCursor(cursorX, viewportRelativeCursorY, this._cell);\n      }\n      this._ctx.restore();\n      this._state.x = cursorX;\n      this._state.y = viewportRelativeCursorY;\n      this._state.isFocused = false;\n      this._state.style = cursorStyle;\n      this._state.width = this._cell.getWidth();\n      return;\n    }\n\n    // Don't draw the cursor if it's blinking\n    if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n      this._clearCursor();\n      return;\n    }\n\n    if (this._state) {\n      // The cursor is already in the correct spot, don't redraw\n      if (this._state.x === cursorX &&\n          this._state.y === viewportRelativeCursorY &&\n          this._state.isFocused === this._coreBrowserService.isFocused &&\n          this._state.style === this._optionsService.options.cursorStyle &&\n          this._state.width === this._cell.getWidth()) {\n        return;\n      }\n      this._clearCursor();\n    }\n\n    this._ctx.save();\n    this._cursorRenderers[this._optionsService.options.cursorStyle || 'block'](cursorX, viewportRelativeCursorY, this._cell);\n    this._ctx.restore();\n\n    this._state.x = cursorX;\n    this._state.y = viewportRelativeCursorY;\n    this._state.isFocused = false;\n    this._state.style = this._optionsService.options.cursorStyle;\n    this._state.width = this._cell.getWidth();\n  }\n\n  private _clearCursor(): void {\n    if (this._state) {\n      this._clearCells(this._state.x, this._state.y, this._state.width, 1);\n      this._state = {\n        x: 0,\n        y: 0,\n        isFocused: false,\n        style: '',\n        width: 0\n      };\n    }\n  }\n\n  private _renderBarCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillLeftLineAtCell(x, y, this._optionsService.options.cursorWidth);\n    this._ctx.restore();\n  }\n\n  private _renderBlockCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillCells(x, y, cell.getWidth(), 1);\n    this._ctx.fillStyle = this._colors.cursorAccent.css;\n    this._fillCharTrueColor(cell, x, y);\n    this._ctx.restore();\n  }\n\n  private _renderUnderlineCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillBottomLineAtCells(x, y);\n    this._ctx.restore();\n  }\n\n  private _renderBlurCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.strokeStyle = this._colors.cursor.css;\n    this._strokeRectAtCell(x, y, cell.getWidth(), 1);\n    this._ctx.restore();\n  }\n}\n\nclass CursorBlinkStateManager {\n  public isCursorVisible: boolean;\n\n  private _animationFrame: number | undefined;\n  private _blinkStartTimeout: number | undefined;\n  private _blinkInterval: number | undefined;\n\n  /**\n   * The time at which the animation frame was restarted, this is used on the\n   * next render to restart the timers so they don't need to restart the timers\n   * multiple times over a short period.\n   */\n  private _animationTimeRestarted: number | undefined;\n\n  constructor(\n    isFocused: boolean,\n    private _renderCallback: () => void\n  ) {\n    this.isCursorVisible = true;\n    if (isFocused) {\n      this._restartInterval();\n    }\n  }\n\n  public get isPaused(): boolean { return !(this._blinkStartTimeout || this._blinkInterval); }\n\n  public dispose(): void {\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public restartBlinkAnimation(): void {\n    if (this.isPaused) {\n      return;\n    }\n    // Save a timestamp so that the restart can be done on the next interval\n    this._animationTimeRestarted = Date.now();\n    // Force a cursor render to ensure it's visible and in the correct position\n    this.isCursorVisible = true;\n    if (!this._animationFrame) {\n      this._animationFrame = window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n    }\n  }\n\n  private _restartInterval(timeToStart: number = BLINK_INTERVAL): void {\n    // Clear any existing interval\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n    }\n\n    // Setup the initial timeout which will hide the cursor, this is done before\n    // the regular interval is setup in order to support restarting the blink\n    // animation in a lightweight way (without thrashing clearInterval and\n    // setInterval).\n    this._blinkStartTimeout = window.setTimeout(() => {\n      // Check if another animation restart was requested while this was being\n      // started\n      if (this._animationTimeRestarted) {\n        const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n        this._animationTimeRestarted = undefined;\n        if (time > 0) {\n          this._restartInterval(time);\n          return;\n        }\n      }\n\n      // Hide the cursor\n      this.isCursorVisible = false;\n      this._animationFrame = window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n\n      // Setup the blink interval\n      this._blinkInterval = window.setInterval(() => {\n        // Adjust the animation time if it was restarted\n        if (this._animationTimeRestarted) {\n          // calc time diff\n          // Make restart interval do a setTimeout initially?\n          const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n          this._animationTimeRestarted = undefined;\n          this._restartInterval(time);\n          return;\n        }\n\n        // Invert visibility and render\n        this.isCursorVisible = !this.isCursorVisible;\n        this._animationFrame = window.requestAnimationFrame(() => {\n          this._renderCallback();\n          this._animationFrame = undefined;\n        });\n      }, BLINK_INTERVAL);\n    }, timeToStart);\n  }\n\n  public pause(): void {\n    this.isCursorVisible = true;\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public resume(): void {\n    // Clear out any existing timers just in case\n    this.pause();\n\n    this._animationTimeRestarted = undefined;\n    this._restartInterval();\n    this.restartBlinkAnimation();\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport class GridCache<T> {\n  public cache: (T | undefined)[][];\n\n  public constructor() {\n    this.cache = [];\n  }\n\n  public resize(width: number, height: number): void {\n    for (let x = 0; x < width; x++) {\n      if (this.cache.length <= x) {\n        this.cache.push([]);\n      }\n      for (let y = this.cache[x].length; y < height; y++) {\n        this.cache[x].push(undefined);\n      }\n      this.cache[x].length = height;\n    }\n    this.cache.length = width;\n  }\n\n  public clear(): void {\n    for (let x = 0; x < this.cache.length; x++) {\n      for (let y = 0; y < this.cache[x].length; y++) {\n        this.cache[x][y] = undefined;\n      }\n    }\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from './BaseRenderLayer';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { is256Color } from 'browser/renderer/atlas/CharAtlasUtils';\nimport { IColorSet, ILinkifierEvent, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\nexport class LinkRenderLayer extends BaseRenderLayer {\n  private _state: ILinkifierEvent | undefined;\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    linkifier: ILinkifier,\n    linkifier2: ILinkifier2,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService\n  ) {\n    super(container, 'link', zIndex, true, colors, rendererId, bufferService, optionsService);\n    linkifier.onShowLinkUnderline(e => this._onShowLinkUnderline(e));\n    linkifier.onHideLinkUnderline(e => this._onHideLinkUnderline(e));\n\n    linkifier2.onShowLinkUnderline(e => this._onShowLinkUnderline(e));\n    linkifier2.onHideLinkUnderline(e => this._onHideLinkUnderline(e));\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state = undefined;\n  }\n\n  public reset(): void {\n    this._clearCurrentLink();\n  }\n\n  private _clearCurrentLink(): void {\n    if (this._state) {\n      this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n      const middleRowCount = this._state.y2 - this._state.y1 - 1;\n      if (middleRowCount > 0) {\n        this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n      }\n      this._clearCells(0, this._state.y2, this._state.x2, 1);\n      this._state = undefined;\n    }\n  }\n\n  private _onShowLinkUnderline(e: ILinkifierEvent): void {\n    if (e.fg === INVERTED_DEFAULT_COLOR) {\n      this._ctx.fillStyle = this._colors.background.css;\n    } else if (e.fg && is256Color(e.fg)) {\n      // 256 color support\n      this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n    } else {\n      this._ctx.fillStyle = this._colors.foreground.css;\n    }\n\n    if (e.y1 === e.y2) {\n      // Single line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n    } else {\n      // Multi-line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n      for (let y = e.y1 + 1; y < e.y2; y++) {\n        this._fillBottomLineAtCells(0, y, e.cols);\n      }\n      this._fillBottomLineAtCells(0, e.y2, e.x2);\n    }\n    this._state = e;\n  }\n\n  private _onHideLinkUnderline(e: ILinkifierEvent): void {\n    this._clearCurrentLink();\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { TextRenderLayer } from 'browser/renderer/TextRenderLayer';\nimport { SelectionRenderLayer } from 'browser/renderer/SelectionRenderLayer';\nimport { CursorRenderLayer } from 'browser/renderer/CursorRenderLayer';\nimport { IRenderLayer, IRenderer, IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { LinkRenderLayer } from 'browser/renderer/LinkRenderLayer';\nimport { Disposable } from 'common/Lifecycle';\nimport { IColorSet, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { ICharSizeService, ICoreBrowserService } from 'browser/services/Services';\nimport { IBufferService, IOptionsService, ICoreService, IInstantiationService } from 'common/services/Services';\nimport { removeTerminalFromCache } from 'browser/renderer/atlas/CharAtlasCache';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\n\nlet nextRendererId = 1;\n\nexport class Renderer extends Disposable implements IRenderer {\n  private _id = nextRendererId++;\n\n  private _renderLayers: IRenderLayer[];\n  private _devicePixelRatio: number;\n\n  public dimensions: IRenderDimensions;\n\n  private _onRequestRedraw = new EventEmitter<IRequestRedrawEvent>();\n  public get onRequestRedraw(): IEvent<IRequestRedrawEvent> { return this._onRequestRedraw.event; }\n\n  constructor(\n    private _colors: IColorSet,\n    private readonly _screenElement: HTMLElement,\n    linkifier: ILinkifier,\n    linkifier2: ILinkifier2,\n    @IInstantiationService instantiationService: IInstantiationService,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n    const allowTransparency = this._optionsService.options.allowTransparency;\n    this._renderLayers = [\n      instantiationService.createInstance(TextRenderLayer, this._screenElement, 0, this._colors, allowTransparency, this._id),\n      instantiationService.createInstance(SelectionRenderLayer, this._screenElement, 1, this._colors, this._id),\n      instantiationService.createInstance(LinkRenderLayer, this._screenElement, 2, this._colors, this._id, linkifier, linkifier2),\n      instantiationService.createInstance(CursorRenderLayer, this._screenElement, 3, this._colors, this._id, this._onRequestRedraw)\n    ];\n    this.dimensions = {\n      scaledCharWidth: 0,\n      scaledCharHeight: 0,\n      scaledCellWidth: 0,\n      scaledCellHeight: 0,\n      scaledCharLeft: 0,\n      scaledCharTop: 0,\n      scaledCanvasWidth: 0,\n      scaledCanvasHeight: 0,\n      canvasWidth: 0,\n      canvasHeight: 0,\n      actualCellWidth: 0,\n      actualCellHeight: 0\n    };\n    this._devicePixelRatio = window.devicePixelRatio;\n    this._updateDimensions();\n    this.onOptionsChanged();\n  }\n\n  public dispose(): void {\n    for (const l of this._renderLayers) {\n      l.dispose();\n    }\n    super.dispose();\n    removeTerminalFromCache(this._id);\n  }\n\n  public onDevicePixelRatioChange(): void {\n    // If the device pixel ratio changed, the char atlas needs to be regenerated\n    // and the terminal needs to refreshed\n    if (this._devicePixelRatio !== window.devicePixelRatio) {\n      this._devicePixelRatio = window.devicePixelRatio;\n      this.onResize(this._bufferService.cols, this._bufferService.rows);\n    }\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n    // Clear layers and force a full render\n    for (const l of this._renderLayers) {\n      l.setColors(this._colors);\n      l.reset();\n    }\n  }\n\n  public onResize(cols: number, rows: number): void {\n    // Update character and canvas dimensions\n    this._updateDimensions();\n\n    // Resize all render layers\n    for (const l of this._renderLayers) {\n      l.resize(this.dimensions);\n    }\n\n    // Resize the screen\n    this._screenElement.style.width = `${this.dimensions.canvasWidth}px`;\n    this._screenElement.style.height = `${this.dimensions.canvasHeight}px`;\n  }\n\n  public onCharSizeChanged(): void {\n    this.onResize(this._bufferService.cols, this._bufferService.rows);\n  }\n\n  public onBlur(): void {\n    this._runOperation(l => l.onBlur());\n  }\n\n  public onFocus(): void {\n    this._runOperation(l => l.onFocus());\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {\n    this._runOperation(l => l.onSelectionChanged(start, end, columnSelectMode));\n  }\n\n  public onCursorMove(): void {\n    this._runOperation(l => l.onCursorMove());\n  }\n\n  public onOptionsChanged(): void {\n    this._runOperation(l => l.onOptionsChanged());\n  }\n\n  public clear(): void {\n    this._runOperation(l => l.reset());\n  }\n\n  private _runOperation(operation: (layer: IRenderLayer) => void): void {\n    for (const l of this._renderLayers) {\n      operation(l);\n    }\n  }\n\n  /**\n   * Performs the refresh loop callback, calling refresh only if a refresh is\n   * necessary before queueing up the next one.\n   */\n  public renderRows(start: number, end: number): void {\n    for (const l of this._renderLayers) {\n      l.onGridChanged(start, end);\n    }\n  }\n\n  /**\n   * Recalculates the character and canvas dimensions.\n   */\n  private _updateDimensions(): void {\n    if (!this._charSizeService.hasValidSize) {\n      return;\n    }\n\n    // Calculate the scaled character width. Width is floored as it must be\n    // drawn to an integer grid in order for the CharAtlas \"stamps\" to not be\n    // blurry. When text is drawn to the grid not using the CharAtlas, it is\n    // clipped to ensure there is no overlap with the next cell.\n    this.dimensions.scaledCharWidth = Math.floor(this._charSizeService.width * window.devicePixelRatio);\n\n    // Calculate the scaled character height. Height is ceiled in case\n    // devicePixelRatio is a floating point number in order to ensure there is\n    // enough space to draw the character to the cell.\n    this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);\n\n    // Calculate the scaled cell height, if lineHeight is not 1 then the value\n    // will be floored because since lineHeight can never be lower then 1, there\n    // is a guarentee that the scaled line height will always be larger than\n    // scaled char height.\n    this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);\n\n    // Calculate the y coordinate within a cell that text should draw from in\n    // order to draw in the center of a cell.\n    this.dimensions.scaledCharTop = this._optionsService.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n\n    // Calculate the scaled cell width, taking the letterSpacing into account.\n    this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);\n\n    // Calculate the x coordinate with a cell that text should draw from in\n    // order to draw in the center of a cell.\n    this.dimensions.scaledCharLeft = Math.floor(this._optionsService.options.letterSpacing / 2);\n\n    // Recalculate the canvas dimensions; scaled* define the actual number of\n    // pixel in the canvas\n    this.dimensions.scaledCanvasHeight = this._bufferService.rows * this.dimensions.scaledCellHeight;\n    this.dimensions.scaledCanvasWidth = this._bufferService.cols * this.dimensions.scaledCellWidth;\n\n    // The the size of the canvas on the page. It's very important that this\n    // rounds to nearest integer and not ceils as browsers often set\n    // window.devicePixelRatio as something like 1.100000023841858, when it's\n    // actually 1.1. Ceiling causes blurriness as the backing canvas image is 1\n    // pixel too large for the canvas element size.\n    this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n    this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n\n    // Get the _actual_ dimensions of an individual cell. This needs to be\n    // derived from the canvasWidth/Height calculated above which takes into\n    // account window.devicePixelRatio. ICharSizeService.width/height by itself\n    // is insufficient when the page is not at 100% zoom level as it's measured\n    // in CSS pixels, but the actual char size on the canvas can differ.\n    this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;\n    this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function throwIfFalsy<T>(value: T | undefined | null): T {\n  if (!value) {\n    throw new Error('value must not be falsy');\n  }\n  return value;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { IColorSet } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\ninterface ISelectionState {\n  start?: [number, number];\n  end?: [number, number];\n  columnSelectMode?: boolean;\n  ydisp?: number;\n}\n\nexport class SelectionRenderLayer extends BaseRenderLayer {\n  private _state!: ISelectionState;\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService\n  ) {\n    super(container, 'selection', zIndex, true, colors, rendererId, bufferService, optionsService);\n    this._clearState();\n  }\n\n  private _clearState(): void {\n    this._state = {\n      start: undefined,\n      end: undefined,\n      columnSelectMode: undefined,\n      ydisp: undefined\n    };\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._clearState();\n  }\n\n  public reset(): void {\n    if (this._state.start && this._state.end) {\n      this._clearState();\n      this._clearAll();\n    }\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    // Selection has not changed\n    if (!this._didStateChange(start, end, columnSelectMode, this._bufferService.buffer.ydisp)) {\n      return;\n    }\n\n    // Remove all selections\n    this._clearAll();\n\n    // Selection does not exist\n    if (!start || !end) {\n      this._clearState();\n      return;\n    }\n\n    // Translate from buffer position to viewport position\n    const viewportStartRow = start[1] - this._bufferService.buffer.ydisp;\n    const viewportEndRow = end[1] - this._bufferService.buffer.ydisp;\n    const viewportCappedStartRow = Math.max(viewportStartRow, 0);\n    const viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);\n\n    // No need to draw the selection\n    if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {\n      this._state.ydisp = this._bufferService.buffer.ydisp;\n      return;\n    }\n\n    this._ctx.fillStyle = this._colors.selectionTransparent.css;\n\n    if (columnSelectMode) {\n      const startCol = start[0];\n      const width = end[0] - startCol;\n      const height = viewportCappedEndRow - viewportCappedStartRow + 1;\n      this._fillCells(startCol, viewportCappedStartRow, width, height);\n    } else {\n      // Draw first row\n      const startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n      const startRowEndCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;\n      this._fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n\n      // Draw middle rows\n      const middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n      this._fillCells(0, viewportCappedStartRow + 1, this._bufferService.cols, middleRowsCount);\n\n      // Draw final row\n      if (viewportCappedStartRow !== viewportCappedEndRow) {\n        // Only draw viewportEndRow if it's not the same as viewportStartRow\n        const endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;\n        this._fillCells(0, viewportCappedEndRow, endCol, 1);\n      }\n    }\n\n    // Save state for next render\n    this._state.start = [start[0], start[1]];\n    this._state.end = [end[0], end[1]];\n    this._state.columnSelectMode = columnSelectMode;\n    this._state.ydisp = this._bufferService.buffer.ydisp;\n  }\n\n  private _didStateChange(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean, ydisp: number): boolean {\n    return !this._areCoordinatesEqual(start, this._state.start) ||\n      !this._areCoordinatesEqual(end, this._state.end) ||\n      columnSelectMode !== this._state.columnSelectMode ||\n      ydisp !== this._state.ydisp;\n  }\n\n  private _areCoordinatesEqual(coord1: [number, number] | undefined, coord2: [number, number] | undefined): boolean {\n    if (!coord1 || !coord2) {\n      return false;\n    }\n\n    return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { CharData, ICellData } from 'common/Types';\nimport { GridCache } from 'browser/renderer/GridCache';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { NULL_CELL_CODE, Content } from 'common/buffer/Constants';\nimport { IColorSet } from 'browser/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { ICharacterJoinerService } from 'browser/services/Services';\nimport { JoinedCellData } from 'browser/services/CharacterJoinerService';\n\n/**\n * This CharData looks like a null character, which will forc a clear and render\n * when the character changes (a regular space ' ' character may not as it's\n * drawn state is a cleared cell).\n */\n// const OVERLAP_OWNED_CHAR_DATA: CharData = [null, '', 0, -1];\n\nexport class TextRenderLayer extends BaseRenderLayer {\n  private _state: GridCache<CharData>;\n  private _characterWidth: number = 0;\n  private _characterFont: string = '';\n  private _characterOverlapCache: { [key: string]: boolean } = {};\n  private _workCell = new CellData();\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    alpha: boolean,\n    rendererId: number,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService,\n    @ICharacterJoinerService private readonly _characterJoinerService: ICharacterJoinerService\n  ) {\n    super(container, 'text', zIndex, alpha, colors, rendererId, bufferService, optionsService);\n    this._state = new GridCache<CharData>();\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n\n    // Clear the character width cache if the font or width has changed\n    const terminalFont = this._getFont(false, false);\n    if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n      this._characterWidth = dim.scaledCharWidth;\n      this._characterFont = terminalFont;\n      this._characterOverlapCache = {};\n    }\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state.clear();\n    this._state.resize(this._bufferService.cols, this._bufferService.rows);\n  }\n\n  public reset(): void {\n    this._state.clear();\n    this._clearAll();\n  }\n\n  private _forEachCell(\n    firstRow: number,\n    lastRow: number,\n    callback: (\n      cell: ICellData,\n      x: number,\n      y: number\n    ) => void\n  ): void {\n    for (let y = firstRow; y <= lastRow; y++) {\n      const row = y + this._bufferService.buffer.ydisp;\n      const line = this._bufferService.buffer.lines.get(row);\n      const joinedRanges = this._characterJoinerService.getJoinedCharacters(row);\n      for (let x = 0; x < this._bufferService.cols; x++) {\n        line!.loadCell(x, this._workCell);\n        let cell = this._workCell;\n\n        // If true, indicates that the current character(s) to draw were joined.\n        let isJoined = false;\n        let lastCharX = x;\n\n        // The character to the left is a wide character, drawing is owned by\n        // the char at x-1\n        if (cell.getWidth() === 0) {\n          continue;\n        }\n\n        // Process any joined character ranges as needed. Because of how the\n        // ranges are produced, we know that they are valid for the characters\n        // and attributes of our input.\n        if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n          isJoined = true;\n          const range = joinedRanges.shift()!;\n\n          // We already know the exact start and end column of the joined range,\n          // so we get the string and width representing it directly\n          cell = new JoinedCellData(\n            this._workCell,\n            line!.translateToString(true, range[0], range[1]),\n            range[1] - range[0]\n          );\n\n          // Skip over the cells occupied by this range in the loop\n          lastCharX = range[1] - 1;\n        }\n\n        // If the character is an overlapping char and the character to the\n        // right is a space, take ownership of the cell to the right. We skip\n        // this check for joined characters because their rendering likely won't\n        // yield the same result as rendering the last character individually.\n        if (!isJoined && this._isOverlapping(cell)) {\n          // If the character is overlapping, we want to force a re-render on every\n          // frame. This is specifically to work around the case where two\n          // overlaping chars `a` and `b` are adjacent, the cursor is moved to b and a\n          // space is added. Without this, the first half of `b` would never\n          // get removed, and `a` would not re-render because it thinks it's\n          // already in the correct state.\n          // this._state.cache[x][y] = OVERLAP_OWNED_CHAR_DATA;\n          if (lastCharX < line!.length - 1 && line!.getCodePoint(lastCharX + 1) === NULL_CELL_CODE) {\n            // patch width to 2\n            cell.content &= ~Content.WIDTH_MASK;\n            cell.content |= 2 << Content.WIDTH_SHIFT;\n            // this._clearChar(x + 1, y);\n            // The overlapping char's char data will force a clear and render when the\n            // overlapping char is no longer to the left of the character and also when\n            // the space changes to another character.\n            // this._state.cache[x + 1][y] = OVERLAP_OWNED_CHAR_DATA;\n          }\n        }\n\n        callback(\n          cell,\n          x,\n          y\n        );\n\n        x = lastCharX;\n      }\n    }\n  }\n\n  /**\n   * Draws the background for a specified range of columns. Tries to batch adjacent cells of the\n   * same color together to reduce draw calls.\n   */\n  private _drawBackground(firstRow: number, lastRow: number): void {\n    const ctx = this._ctx;\n    const cols = this._bufferService.cols;\n    let startX: number = 0;\n    let startY: number = 0;\n    let prevFillStyle: string | null = null;\n\n    ctx.save();\n\n    this._forEachCell(firstRow, lastRow, (cell, x, y) => {\n      // libvte and xterm both draw the background (but not foreground) of invisible characters,\n      // so we should too.\n      let nextFillStyle = null; // null represents default background color\n\n      if (cell.isInverse()) {\n        if (cell.isFgDefault()) {\n          nextFillStyle = this._colors.foreground.css;\n        } else if (cell.isFgRGB()) {\n          nextFillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n        } else {\n          nextFillStyle = this._colors.ansi[cell.getFgColor()].css;\n        }\n      } else if (cell.isBgRGB()) {\n        nextFillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n      } else if (cell.isBgPalette()) {\n        nextFillStyle = this._colors.ansi[cell.getBgColor()].css;\n      }\n\n      if (prevFillStyle === null) {\n        // This is either the first iteration, or the default background was set. Either way, we\n        // don't need to draw anything.\n        startX = x;\n        startY = y;\n      }\n\n      if (y !== startY) {\n        // our row changed, draw the previous row\n        ctx.fillStyle = prevFillStyle || '';\n        this._fillCells(startX, startY, cols - startX, 1);\n        startX = x;\n        startY = y;\n      } else if (prevFillStyle !== nextFillStyle) {\n        // our color changed, draw the previous characters in this row\n        ctx.fillStyle = prevFillStyle || '';\n        this._fillCells(startX, startY, x - startX, 1);\n        startX = x;\n        startY = y;\n      }\n\n      prevFillStyle = nextFillStyle;\n    });\n\n    // flush the last color we encountered\n    if (prevFillStyle !== null) {\n      ctx.fillStyle = prevFillStyle;\n      this._fillCells(startX, startY, cols - startX, 1);\n    }\n\n    ctx.restore();\n  }\n\n  private _drawForeground(firstRow: number, lastRow: number): void {\n    this._forEachCell(firstRow, lastRow, (cell, x, y) => {\n      if (cell.isInvisible()) {\n        return;\n      }\n      this._drawChars(cell, x, y);\n      if (cell.isUnderline()) {\n        this._ctx.save();\n\n        if (cell.isInverse()) {\n          if (cell.isBgDefault()) {\n            this._ctx.fillStyle = this._colors.background.css;\n          } else if (cell.isBgRGB()) {\n            this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n          } else {\n            let bg = cell.getBgColor();\n            if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {\n              bg += 8;\n            }\n            this._ctx.fillStyle = this._colors.ansi[bg].css;\n          }\n        } else {\n          if (cell.isFgDefault()) {\n            this._ctx.fillStyle = this._colors.foreground.css;\n          } else if (cell.isFgRGB()) {\n            this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n          } else {\n            let fg = cell.getFgColor();\n            if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n              fg += 8;\n            }\n            this._ctx.fillStyle = this._colors.ansi[fg].css;\n          }\n        }\n\n        this._fillBottomLineAtCells(x, y, cell.getWidth());\n        this._ctx.restore();\n      }\n    });\n  }\n\n  public onGridChanged(firstRow: number, lastRow: number): void {\n    // Resize has not been called yet\n    if (this._state.cache.length === 0) {\n      return;\n    }\n\n    if (this._charAtlas) {\n      this._charAtlas.beginFrame();\n    }\n\n    this._clearCells(0, firstRow, this._bufferService.cols, lastRow - firstRow + 1);\n    this._drawBackground(firstRow, lastRow);\n    this._drawForeground(firstRow, lastRow);\n  }\n\n  public onOptionsChanged(): void {\n    this._setTransparency(this._optionsService.options.allowTransparency);\n  }\n\n  /**\n   * Whether a character is overlapping to the next cell.\n   */\n  private _isOverlapping(cell: ICellData): boolean {\n    // Only single cell characters can be overlapping, rendering issues can\n    // occur without this check\n    if (cell.getWidth() !== 1) {\n      return false;\n    }\n\n    // We assume that any ascii character will not overlap\n    if (cell.getCode() < 256) {\n      return false;\n    }\n\n    const chars = cell.getChars();\n\n    // Deliver from cache if available\n    if (this._characterOverlapCache.hasOwnProperty(chars)) {\n      return this._characterOverlapCache[chars];\n    }\n\n    // Setup the font\n    this._ctx.save();\n    this._ctx.font = this._characterFont;\n\n    // Measure the width of the character, but Math.floor it\n    // because that is what the renderer does when it calculates\n    // the character dimensions we are comparing against\n    const overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n\n    // Restore the original context\n    this._ctx.restore();\n\n    // Cache and return\n    this._characterOverlapCache[chars] = overlaps;\n    return overlaps;\n  }\n\n  /**\n   * Clear the charcater at the cell specified.\n   * @param x The column of the char.\n   * @param y The row of the char.\n   */\n  // private _clearChar(x: number, y: number): void {\n  //   let colsToClear = 1;\n  //   // Clear the adjacent character if it was wide\n  //   const state = this._state.cache[x][y];\n  //   if (state && state[CHAR_DATA_WIDTH_INDEX] === 2) {\n  //     colsToClear = 2;\n  //   }\n  //   this.clearCells(x, y, colsToClear, 1);\n  // }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IGlyphIdentifier } from 'browser/renderer/atlas/Types';\nimport { IDisposable } from 'common/Types';\n\nexport abstract class BaseCharAtlas implements IDisposable {\n  private _didWarmUp: boolean = false;\n\n  public dispose(): void { }\n\n  /**\n   * Perform any work needed to warm the cache before it can be used. May be called multiple times.\n   * Implement _doWarmUp instead if you only want to get called once.\n   */\n  public warmUp(): void {\n    if (!this._didWarmUp) {\n      this._doWarmUp();\n      this._didWarmUp = true;\n    }\n  }\n\n  /**\n   * Perform any work needed to warm the cache before it can be used. Used by the default\n   * implementation of warmUp(), and will only be called once.\n   */\n  private _doWarmUp(): void { }\n\n  /**\n   * Called when we start drawing a new frame.\n   *\n   * TODO: We rely on this getting called by TextRenderLayer. This should really be called by\n   * Renderer instead, but we need to make Renderer the source-of-truth for the char atlas, instead\n   * of BaseRenderLayer.\n   */\n  public beginFrame(): void { }\n\n  /**\n   * May be called before warmUp finishes, however it is okay for the implementation to\n   * do nothing and return false in that case.\n   *\n   * @param ctx Where to draw the character onto.\n   * @param glyph Information about what to draw\n   * @param x The position on the context to start drawing at\n   * @param y The position on the context to start drawing at\n   * @returns The success state. True if we drew the character.\n   */\n  public abstract draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { generateConfig, configEquals } from 'browser/renderer/atlas/CharAtlasUtils';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { DynamicCharAtlas } from 'browser/renderer/atlas/DynamicCharAtlas';\nimport { ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { IColorSet } from 'browser/Types';\nimport { ITerminalOptions } from 'common/services/Services';\n\ninterface ICharAtlasCacheEntry {\n  atlas: BaseCharAtlas;\n  config: ICharAtlasConfig;\n  // N.B. This implementation potentially holds onto copies of the terminal forever, so\n  // this may cause memory leaks.\n  ownedBy: number[];\n}\n\nconst charAtlasCache: ICharAtlasCacheEntry[] = [];\n\n/**\n * Acquires a char atlas, either generating a new one or returning an existing\n * one that is in use by another terminal.\n */\nexport function acquireCharAtlas(\n  options: ITerminalOptions,\n  rendererId: number,\n  colors: IColorSet,\n  scaledCharWidth: number,\n  scaledCharHeight: number\n): BaseCharAtlas {\n  const newConfig = generateConfig(scaledCharWidth, scaledCharHeight, options, colors);\n\n  // Check to see if the renderer already owns this config\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    const ownedByIndex = entry.ownedBy.indexOf(rendererId);\n    if (ownedByIndex >= 0) {\n      if (configEquals(entry.config, newConfig)) {\n        return entry.atlas;\n      }\n      // The configs differ, release the renderer from the entry\n      if (entry.ownedBy.length === 1) {\n        entry.atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        entry.ownedBy.splice(ownedByIndex, 1);\n      }\n      break;\n    }\n  }\n\n  // Try match a char atlas from the cache\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    if (configEquals(entry.config, newConfig)) {\n      // Add the renderer to the cache entry and return\n      entry.ownedBy.push(rendererId);\n      return entry.atlas;\n    }\n  }\n\n  const newEntry: ICharAtlasCacheEntry = {\n    atlas: new DynamicCharAtlas(\n      document,\n      newConfig\n    ),\n    config: newConfig,\n    ownedBy: [rendererId]\n  };\n  charAtlasCache.push(newEntry);\n  return newEntry.atlas;\n}\n\n/**\n * Removes a terminal reference from the cache, allowing its memory to be freed.\n */\nexport function removeTerminalFromCache(rendererId: number): void {\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const index = charAtlasCache[i].ownedBy.indexOf(rendererId);\n    if (index !== -1) {\n      if (charAtlasCache[i].ownedBy.length === 1) {\n        // Remove the cache entry if it's the only renderer\n        charAtlasCache[i].atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        // Remove the reference from the cache entry\n        charAtlasCache[i].ownedBy.splice(index, 1);\n      }\n      break;\n    }\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { DEFAULT_COLOR } from 'common/buffer/Constants';\nimport { IColorSet, IPartialColorSet } from 'browser/Types';\nimport { ITerminalOptions } from 'common/services/Services';\n\nexport function generateConfig(scaledCharWidth: number, scaledCharHeight: number, options: ITerminalOptions, colors: IColorSet): ICharAtlasConfig {\n  // null out some fields that don't matter\n  const clonedColors = <IPartialColorSet>{\n    foreground: colors.foreground,\n    background: colors.background,\n    cursor: undefined,\n    cursorAccent: undefined,\n    selection: undefined,\n    ansi: colors.ansi\n  };\n  return {\n    devicePixelRatio: window.devicePixelRatio,\n    scaledCharWidth,\n    scaledCharHeight,\n    fontFamily: options.fontFamily,\n    fontSize: options.fontSize,\n    fontWeight: options.fontWeight,\n    fontWeightBold: options.fontWeightBold,\n    allowTransparency: options.allowTransparency,\n    colors: clonedColors\n  };\n}\n\nexport function configEquals(a: ICharAtlasConfig, b: ICharAtlasConfig): boolean {\n  for (let i = 0; i < a.colors.ansi.length; i++) {\n    if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n      return false;\n    }\n  }\n  return a.devicePixelRatio === b.devicePixelRatio &&\n      a.fontFamily === b.fontFamily &&\n      a.fontSize === b.fontSize &&\n      a.fontWeight === b.fontWeight &&\n      a.fontWeightBold === b.fontWeightBold &&\n      a.allowTransparency === b.allowTransparency &&\n      a.scaledCharWidth === b.scaledCharWidth &&\n      a.scaledCharHeight === b.scaledCharHeight &&\n      a.colors.foreground === b.colors.foreground &&\n      a.colors.background === b.colors.background;\n}\n\nexport function is256Color(colorCode: number): boolean {\n  return colorCode < DEFAULT_COLOR;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport const INVERTED_DEFAULT_COLOR = 257;\nexport const DIM_OPACITY = 0.5;\n\nexport const CHAR_ATLAS_CELL_SPACING = 1;\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { DIM_OPACITY, INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { IGlyphIdentifier, ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { DEFAULT_ANSI_COLORS } from 'browser/ColorManager';\nimport { LRUMap } from 'browser/renderer/atlas/LRUMap';\nimport { isFirefox, isSafari } from 'common/Platform';\nimport { IColor } from 'browser/Types';\nimport { throwIfFalsy } from 'browser/renderer/RendererUtils';\nimport { color } from 'browser/Color';\n\n// In practice we're probably never going to exhaust a texture this large. For debugging purposes,\n// however, it can be useful to set this to a really tiny value, to verify that LRU eviction works.\nconst TEXTURE_WIDTH = 1024;\nconst TEXTURE_HEIGHT = 1024;\n\nconst TRANSPARENT_COLOR = {\n  css: 'rgba(0, 0, 0, 0)',\n  rgba: 0\n};\n\n// Drawing to the cache is expensive: If we have to draw more than this number of glyphs to the\n// cache in a single frame, give up on trying to cache anything else, and try to finish the current\n// frame ASAP.\n//\n// This helps to limit the amount of damage a program can do when it would otherwise thrash the\n// cache.\nconst FRAME_CACHE_DRAW_LIMIT = 100;\n\n/**\n * The number of milliseconds to wait before generating the ImageBitmap, this is to debounce/batch\n * the operation as window.createImageBitmap is asynchronous.\n */\nconst GLYPH_BITMAP_COMMIT_DELAY = 100;\n\ninterface IGlyphCacheValue {\n  index: number;\n  isEmpty: boolean;\n  inBitmap: boolean;\n}\n\nexport function getGlyphCacheKey(glyph: IGlyphIdentifier): number {\n  // Note that this only returns a valid key when code < 256\n  // Layout:\n  // 0b00000000000000000000000000000001: italic (1)\n  // 0b00000000000000000000000000000010: dim (1)\n  // 0b00000000000000000000000000000100: bold (1)\n  // 0b00000000000000000000111111111000: fg (9)\n  // 0b00000000000111111111000000000000: bg (9)\n  // 0b00011111111000000000000000000000: code (8)\n  // 0b11100000000000000000000000000000: unused (3)\n  return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\n\nexport class DynamicCharAtlas extends BaseCharAtlas {\n  // An ordered map that we're using to keep track of where each glyph is in the atlas texture.\n  // It's ordered so that we can determine when to remove the old entries.\n  private _cacheMap: LRUMap<IGlyphCacheValue>;\n\n  // The texture that the atlas is drawn to\n  private _cacheCanvas: HTMLCanvasElement;\n  private _cacheCtx: CanvasRenderingContext2D;\n\n  // A temporary context that glyphs are drawn to before being transfered to the atlas.\n  private _tmpCtx: CanvasRenderingContext2D;\n\n  // The number of characters stored in the atlas by width/height\n  private _width: number;\n  private _height: number;\n\n  private _drawToCacheCount: number = 0;\n\n  // An array of glyph keys that are waiting on the bitmap to be generated.\n  private _glyphsWaitingOnBitmap: IGlyphCacheValue[] = [];\n\n  // The timeout that is used to batch bitmap generation so it's not requested for every new glyph.\n  private _bitmapCommitTimeout: number | null = null;\n\n  // The bitmap to draw from, this is much faster on other browsers than others.\n  private _bitmap: ImageBitmap | null = null;\n\n  constructor(document: Document, private _config: ICharAtlasConfig) {\n    super();\n    this._cacheCanvas = document.createElement('canvas');\n    this._cacheCanvas.width = TEXTURE_WIDTH;\n    this._cacheCanvas.height = TEXTURE_HEIGHT;\n    // The canvas needs alpha because we use clearColor to convert the background color to alpha.\n    // It might also contain some characters with transparent backgrounds if allowTransparency is\n    // set.\n    this._cacheCtx = throwIfFalsy(this._cacheCanvas.getContext('2d', { alpha: true }));\n\n    const tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = this._config.scaledCharWidth;\n    tmpCanvas.height = this._config.scaledCharHeight;\n    this._tmpCtx = throwIfFalsy(tmpCanvas.getContext('2d', { alpha: this._config.allowTransparency }));\n\n    this._width = Math.floor(TEXTURE_WIDTH / this._config.scaledCharWidth);\n    this._height = Math.floor(TEXTURE_HEIGHT / this._config.scaledCharHeight);\n    const capacity = this._width * this._height;\n    this._cacheMap = new LRUMap(capacity);\n    this._cacheMap.prealloc(capacity);\n\n    // This is useful for debugging\n    // document.body.appendChild(this._cacheCanvas);\n  }\n\n  public dispose(): void {\n    if (this._bitmapCommitTimeout !== null) {\n      window.clearTimeout(this._bitmapCommitTimeout);\n      this._bitmapCommitTimeout = null;\n    }\n  }\n\n  public beginFrame(): void {\n    this._drawToCacheCount = 0;\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean {\n    // Space is always an empty cell, special case this as it's so common\n    if (glyph.code === 32) {\n      return true;\n    }\n\n    // Exit early for uncachable glyphs\n    if (!this._canCache(glyph)) {\n      return false;\n    }\n\n    const glyphKey = getGlyphCacheKey(glyph);\n    const cacheValue = this._cacheMap.get(glyphKey);\n    if (cacheValue !== null && cacheValue !== undefined) {\n      this._drawFromCache(ctx, cacheValue, x, y);\n      return true;\n    }\n    if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n      let index;\n      if (this._cacheMap.size < this._cacheMap.capacity) {\n        index = this._cacheMap.size;\n      } else {\n        // we're out of space, so our call to set will delete this item\n        index = this._cacheMap.peek()!.index;\n      }\n      const cacheValue = this._drawToCache(glyph, index);\n      this._cacheMap.set(glyphKey, cacheValue);\n      this._drawFromCache(ctx, cacheValue, x, y);\n      return true;\n    }\n    return false;\n  }\n\n  private _canCache(glyph: IGlyphIdentifier): boolean {\n    // Only cache ascii and extended characters for now, to be safe. In the future, we could do\n    // something more complicated to determine the expected width of a character.\n    //\n    // If we switch the renderer over to webgl at some point, we may be able to use blending modes\n    // to draw overlapping glyphs from the atlas:\n    // https://github.com/servo/webrender/issues/464#issuecomment-255632875\n    // https://webglfundamentals.org/webgl/lessons/webgl-text-texture.html\n    return glyph.code < 256;\n  }\n\n  private _toCoordinateX(index: number): number {\n    return (index % this._width) * this._config.scaledCharWidth;\n  }\n\n  private _toCoordinateY(index: number): number {\n    return Math.floor(index / this._width) * this._config.scaledCharHeight;\n  }\n\n  private _drawFromCache(\n    ctx: CanvasRenderingContext2D,\n    cacheValue: IGlyphCacheValue,\n    x: number,\n    y: number\n  ): void {\n    // We don't actually need to do anything if this is whitespace.\n    if (cacheValue.isEmpty) {\n      return;\n    }\n    const cacheX = this._toCoordinateX(cacheValue.index);\n    const cacheY = this._toCoordinateY(cacheValue.index);\n    ctx.drawImage(\n      cacheValue.inBitmap ? this._bitmap! : this._cacheCanvas,\n      cacheX,\n      cacheY,\n      this._config.scaledCharWidth,\n      this._config.scaledCharHeight,\n      x,\n      y,\n      this._config.scaledCharWidth,\n      this._config.scaledCharHeight\n    );\n  }\n\n  private _getColorFromAnsiIndex(idx: number): IColor {\n    if (idx < this._config.colors.ansi.length) {\n      return this._config.colors.ansi[idx];\n    }\n    return DEFAULT_ANSI_COLORS[idx];\n  }\n\n  private _getBackgroundColor(glyph: IGlyphIdentifier): IColor {\n    if (this._config.allowTransparency) {\n      // The background color might have some transparency, so we need to render it as fully\n      // transparent in the atlas. Otherwise we'd end up drawing the transparent background twice\n      // around the anti-aliased edges of the glyph, and it would look too dark.\n      return TRANSPARENT_COLOR;\n    }\n    if (glyph.bg === INVERTED_DEFAULT_COLOR) {\n      return this._config.colors.foreground;\n    }\n    if (glyph.bg < 256) {\n      return this._getColorFromAnsiIndex(glyph.bg);\n    }\n    return this._config.colors.background;\n  }\n\n  private _getForegroundColor(glyph: IGlyphIdentifier): IColor {\n    if (glyph.fg === INVERTED_DEFAULT_COLOR) {\n      return color.opaque(this._config.colors.background);\n    }\n    if (glyph.fg < 256) {\n      // 256 color support\n      return this._getColorFromAnsiIndex(glyph.fg);\n    }\n    return this._config.colors.foreground;\n  }\n\n  // TODO: We do this (or something similar) in multiple places. We should split this off\n  // into a shared function.\n  private _drawToCache(glyph: IGlyphIdentifier, index: number): IGlyphCacheValue {\n    this._drawToCacheCount++;\n\n    this._tmpCtx.save();\n\n    // draw the background\n    const backgroundColor = this._getBackgroundColor(glyph);\n    // Use a 'copy' composite operation to clear any existing glyph out of _tmpCtxWithAlpha, regardless of\n    // transparency in backgroundColor\n    this._tmpCtx.globalCompositeOperation = 'copy';\n    this._tmpCtx.fillStyle = backgroundColor.css;\n    this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    this._tmpCtx.globalCompositeOperation = 'source-over';\n\n    // draw the foreground/glyph\n    const fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n    const fontStyle = glyph.italic ? 'italic' : '';\n    this._tmpCtx.font =\n      `${fontStyle} ${fontWeight} ${this._config.fontSize * this._config.devicePixelRatio}px ${this._config.fontFamily}`;\n    this._tmpCtx.textBaseline = 'ideographic';\n\n    this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n\n    // Apply alpha to dim the character\n    if (glyph.dim) {\n      this._tmpCtx.globalAlpha = DIM_OPACITY;\n    }\n    // Draw the character\n    this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight);\n    this._tmpCtx.restore();\n\n    // clear the background from the character to avoid issues with drawing over the previous\n    // character if it extends past it's bounds\n    const imageData = this._tmpCtx.getImageData(\n      0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight\n    );\n    let isEmpty = false;\n    if (!this._config.allowTransparency) {\n      isEmpty = clearColor(imageData, backgroundColor);\n    }\n\n    // copy the data from imageData to _cacheCanvas\n    const x = this._toCoordinateX(index);\n    const y = this._toCoordinateY(index);\n    // putImageData doesn't do any blending, so it will overwrite any existing cache entry for us\n    this._cacheCtx.putImageData(imageData, x, y);\n\n    // Add the glyph and queue it to the bitmap (if the browser supports it)\n    const cacheValue = {\n      index,\n      isEmpty,\n      inBitmap: false\n    };\n    this._addGlyphToBitmap(cacheValue);\n\n    return cacheValue;\n  }\n\n  private _addGlyphToBitmap(cacheValue: IGlyphCacheValue): void {\n    // Support is patchy for createImageBitmap at the moment, pass a canvas back\n    // if support is lacking as drawImage works there too. Firefox is also\n    // included here as ImageBitmap appears both buggy and has horrible\n    // performance (tested on v55).\n    if (!('createImageBitmap' in window) || isFirefox || isSafari) {\n      return;\n    }\n\n    // Add the glyph to the queue\n    this._glyphsWaitingOnBitmap.push(cacheValue);\n\n    // Check if bitmap generation timeout already exists\n    if (this._bitmapCommitTimeout !== null) {\n      return;\n    }\n\n    this._bitmapCommitTimeout = window.setTimeout(() => this._generateBitmap(), GLYPH_BITMAP_COMMIT_DELAY);\n  }\n\n  private _generateBitmap(): void {\n    const glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n    this._glyphsWaitingOnBitmap = [];\n    window.createImageBitmap(this._cacheCanvas).then(bitmap => {\n      // Set bitmap\n      this._bitmap = bitmap;\n\n      // Mark all new glyphs as in bitmap, excluding glyphs that came in after\n      // the bitmap was requested\n      for (let i = 0; i < glyphsMovingToBitmap.length; i++) {\n        const value = glyphsMovingToBitmap[i];\n        // It doesn't matter if the value was already evicted, it will be\n        // released from memory after this block if so.\n        value.inBitmap = true;\n      }\n    });\n    this._bitmapCommitTimeout = null;\n  }\n}\n\n// This is used for debugging the renderer, just swap out `new DynamicCharAtlas` with\n// `new NoneCharAtlas`.\nexport class NoneCharAtlas extends BaseCharAtlas {\n  constructor(document: Document, config: ICharAtlasConfig) {\n    super();\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean {\n    return false;\n  }\n}\n\n/**\n * Makes a partiicular rgb color in an ImageData completely transparent.\n * @returns True if the result is \"empty\", meaning all pixels are fully transparent.\n */\nfunction clearColor(imageData: ImageData, color: IColor): boolean {\n  let isEmpty = true;\n  const r = color.rgba >>> 24;\n  const g = color.rgba >>> 16 & 0xFF;\n  const b = color.rgba >>> 8 & 0xFF;\n  for (let offset = 0; offset < imageData.data.length; offset += 4) {\n    if (imageData.data[offset] === r &&\n        imageData.data[offset + 1] === g &&\n        imageData.data[offset + 2] === b) {\n      imageData.data[offset + 3] = 0;\n    } else {\n      isEmpty = false;\n    }\n  }\n  return isEmpty;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ninterface ILinkedListNode<T> {\n  prev: ILinkedListNode<T> | null;\n  next: ILinkedListNode<T> | null;\n  key: number | null;\n  value: T | null;\n}\n\nexport class LRUMap<T> {\n  private _map: { [key: number]: ILinkedListNode<T> } = {};\n  private _head: ILinkedListNode<T> | null = null;\n  private _tail: ILinkedListNode<T> | null = null;\n  private _nodePool: ILinkedListNode<T>[] = [];\n  public size: number = 0;\n\n  constructor(public capacity: number) { }\n\n  private _unlinkNode(node: ILinkedListNode<T>): void {\n    const prev = node.prev;\n    const next = node.next;\n    if (node === this._head) {\n      this._head = next;\n    }\n    if (node === this._tail) {\n      this._tail = prev;\n    }\n    if (prev !== null) {\n      prev.next = next;\n    }\n    if (next !== null) {\n      next.prev = prev;\n    }\n  }\n\n  private _appendNode(node: ILinkedListNode<T>): void {\n    const tail = this._tail;\n    if (tail !== null) {\n      tail.next = node;\n    }\n    node.prev = tail;\n    node.next = null;\n    this._tail = node;\n    if (this._head === null) {\n      this._head = node;\n    }\n  }\n\n  /**\n   * Preallocate a bunch of linked-list nodes. Allocating these nodes ahead of time means that\n   * they're more likely to live next to each other in memory, which seems to improve performance.\n   *\n   * Each empty object only consumes about 60 bytes of memory, so this is pretty cheap, even for\n   * large maps.\n   */\n  public prealloc(count: number): void {\n    const nodePool = this._nodePool;\n    for (let i = 0; i < count; i++) {\n      nodePool.push({\n        prev: null,\n        next: null,\n        key: null,\n        value: null\n      });\n    }\n  }\n\n  public get(key: number): T | null {\n    // This is unsafe: We're assuming our keyspace doesn't overlap with Object.prototype. However,\n    // it's faster than calling hasOwnProperty, and in our case, it would never overlap.\n    const node = this._map[key];\n    if (node !== undefined) {\n      this._unlinkNode(node);\n      this._appendNode(node);\n      return node.value;\n    }\n    return null;\n  }\n\n  /**\n   * Gets a value from a key without marking it as the most recently used item.\n   */\n  public peekValue(key: number): T | null {\n    const node = this._map[key];\n    if (node !== undefined) {\n      return node.value;\n    }\n    return null;\n  }\n\n  public peek(): T | null {\n    const head = this._head;\n    return head === null ? null : head.value;\n  }\n\n  public set(key: number, value: T): void {\n    // This is unsafe: See note above.\n    let node = this._map[key];\n    if (node !== undefined) {\n      // already exists, we just need to mutate it and move it to the end of the list\n      node = this._map[key];\n      this._unlinkNode(node);\n      node.value = value;\n    } else if (this.size >= this.capacity) {\n      // we're out of space: recycle the head node, move it to the tail\n      node = this._head!;\n      this._unlinkNode(node);\n      delete this._map[node.key!];\n      node.key = key;\n      node.value = value;\n      this._map[key] = node;\n    } else {\n      // make a new element\n      const nodePool = this._nodePool;\n      if (nodePool.length > 0) {\n        // use a preallocated node if we can\n        node = nodePool.pop()!;\n        node.key = key;\n        node.value = value;\n      } else {\n        node = {\n          prev: null,\n          next: null,\n          key,\n          value\n        };\n      }\n      this._map[key] = node;\n      this.size++;\n    }\n    this._appendNode(node);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderer, IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { BOLD_CLASS, ITALIC_CLASS, CURSOR_CLASS, CURSOR_STYLE_BLOCK_CLASS, CURSOR_BLINK_CLASS, CURSOR_STYLE_BAR_CLASS, CURSOR_STYLE_UNDERLINE_CLASS, DomRendererRowFactory } from 'browser/renderer/dom/DomRendererRowFactory';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { Disposable } from 'common/Lifecycle';\nimport { IColorSet, ILinkifierEvent, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { ICharSizeService } from 'browser/services/Services';\nimport { IOptionsService, IBufferService, IInstantiationService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { color } from 'browser/Color';\nimport { removeElementFromParent } from 'browser/Dom';\n\nconst TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nconst ROW_CONTAINER_CLASS = 'xterm-rows';\nconst FG_CLASS_PREFIX = 'xterm-fg-';\nconst BG_CLASS_PREFIX = 'xterm-bg-';\nconst FOCUS_CLASS = 'xterm-focus';\nconst SELECTION_CLASS = 'xterm-selection';\n\nlet nextTerminalId = 1;\n\n/**\n * A fallback renderer for when canvas is slow. This is not meant to be\n * particularly fast or feature complete, more just stable and usable for when\n * canvas is not an option.\n */\nexport class DomRenderer extends Disposable implements IRenderer {\n  private _rowFactory: DomRendererRowFactory;\n  private _terminalClass: number = nextTerminalId++;\n\n  private _themeStyleElement!: HTMLStyleElement;\n  private _dimensionsStyleElement!: HTMLStyleElement;\n  private _rowContainer: HTMLElement;\n  private _rowElements: HTMLElement[] = [];\n  private _selectionContainer: HTMLElement;\n\n  public dimensions: IRenderDimensions;\n\n  public get onRequestRedraw(): IEvent<IRequestRedrawEvent> { return new EventEmitter<IRequestRedrawEvent>().event; }\n\n  constructor(\n    private _colors: IColorSet,\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    private readonly _viewportElement: HTMLElement,\n    private readonly _linkifier: ILinkifier,\n    private readonly _linkifier2: ILinkifier2,\n    @IInstantiationService instantiationService: IInstantiationService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this._rowContainer = document.createElement('div');\n    this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n    this._rowContainer.style.lineHeight = 'normal';\n    this._rowContainer.setAttribute('aria-hidden', 'true');\n    this._refreshRowElements(this._bufferService.cols, this._bufferService.rows);\n    this._selectionContainer = document.createElement('div');\n    this._selectionContainer.classList.add(SELECTION_CLASS);\n    this._selectionContainer.setAttribute('aria-hidden', 'true');\n\n    this.dimensions = {\n      scaledCharWidth: 0,\n      scaledCharHeight: 0,\n      scaledCellWidth: 0,\n      scaledCellHeight: 0,\n      scaledCharLeft: 0,\n      scaledCharTop: 0,\n      scaledCanvasWidth: 0,\n      scaledCanvasHeight: 0,\n      canvasWidth: 0,\n      canvasHeight: 0,\n      actualCellWidth: 0,\n      actualCellHeight: 0\n    };\n    this._updateDimensions();\n    this._injectCss();\n\n    this._rowFactory = instantiationService.createInstance(DomRendererRowFactory, document, this._colors);\n\n    this._element.classList.add(TERMINAL_CLASS_PREFIX + this._terminalClass);\n    this._screenElement.appendChild(this._rowContainer);\n    this._screenElement.appendChild(this._selectionContainer);\n\n    this._linkifier.onShowLinkUnderline(e => this._onLinkHover(e));\n    this._linkifier.onHideLinkUnderline(e => this._onLinkLeave(e));\n\n    this._linkifier2.onShowLinkUnderline(e => this._onLinkHover(e));\n    this._linkifier2.onHideLinkUnderline(e => this._onLinkLeave(e));\n  }\n\n  public dispose(): void {\n    this._element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n\n    // Outside influences such as React unmounts may manipulate the DOM before our disposal.\n    // https://github.com/xtermjs/xterm.js/issues/2960\n    removeElementFromParent(this._rowContainer, this._selectionContainer, this._themeStyleElement, this._dimensionsStyleElement);\n\n    super.dispose();\n  }\n\n  private _updateDimensions(): void {\n    this.dimensions.scaledCharWidth = this._charSizeService.width * window.devicePixelRatio;\n    this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);\n    this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);\n    this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);\n    this.dimensions.scaledCharLeft = 0;\n    this.dimensions.scaledCharTop = 0;\n    this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._bufferService.cols;\n    this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._bufferService.rows;\n    this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n    this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n    this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;\n    this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;\n\n    for (const element of this._rowElements) {\n      element.style.width = `${this.dimensions.canvasWidth}px`;\n      element.style.height = `${this.dimensions.actualCellHeight}px`;\n      element.style.lineHeight = `${this.dimensions.actualCellHeight}px`;\n      // Make sure rows don't overflow onto following row\n      element.style.overflow = 'hidden';\n    }\n\n    if (!this._dimensionsStyleElement) {\n      this._dimensionsStyleElement = document.createElement('style');\n      this._screenElement.appendChild(this._dimensionsStyleElement);\n    }\n\n    const styles =\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} span {` +\n      ` display: inline-block;` +\n      ` height: 100%;` +\n      ` vertical-align: top;` +\n      ` width: ${this.dimensions.actualCellWidth}px` +\n      `}`;\n\n    this._dimensionsStyleElement.textContent = styles;\n\n    this._selectionContainer.style.height = this._viewportElement.style.height;\n    this._screenElement.style.width = `${this.dimensions.canvasWidth}px`;\n    this._screenElement.style.height = `${this.dimensions.canvasHeight}px`;\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n    this._injectCss();\n  }\n\n  private _injectCss(): void {\n    if (!this._themeStyleElement) {\n      this._themeStyleElement = document.createElement('style');\n      this._screenElement.appendChild(this._themeStyleElement);\n    }\n\n    // Base CSS\n    let styles =\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} {` +\n      ` color: ${this._colors.foreground.css};` +\n      ` font-family: ${this._optionsService.options.fontFamily};` +\n      ` font-size: ${this._optionsService.options.fontSize}px;` +\n      `}`;\n    // Text styles\n    styles +=\n      `${this._terminalSelector} span:not(.${BOLD_CLASS}) {` +\n      ` font-weight: ${this._optionsService.options.fontWeight};` +\n      `}` +\n      `${this._terminalSelector} span.${BOLD_CLASS} {` +\n      ` font-weight: ${this._optionsService.options.fontWeightBold};` +\n      `}` +\n      `${this._terminalSelector} span.${ITALIC_CLASS} {` +\n      ` font-style: italic;` +\n      `}`;\n    // Blink animation\n    styles +=\n      `@keyframes blink_box_shadow` + `_` + this._terminalClass + ` {` +\n      ` 50% {` +\n      `  box-shadow: none;` +\n      ` }` +\n      `}`;\n    styles +=\n      `@keyframes blink_block` + `_` + this._terminalClass + ` {` +\n      ` 0% {` +\n      `  background-color: ${this._colors.cursor.css};` +\n      `  color: ${this._colors.cursorAccent.css};` +\n      ` }` +\n      ` 50% {` +\n      `  background-color: ${this._colors.cursorAccent.css};` +\n      `  color: ${this._colors.cursor.css};` +\n      ` }` +\n      `}`;\n    // Cursor\n    styles +=\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}:not(.${FOCUS_CLASS}) .${CURSOR_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` outline: 1px solid ${this._colors.cursor.css};` +\n      ` outline-offset: -1px;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_BLINK_CLASS}:not(.${CURSOR_STYLE_BLOCK_CLASS}) {` +\n      ` animation: blink_box_shadow` + `_` + this._terminalClass + ` 1s step-end infinite;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_BLINK_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` animation: blink_block` + `_` + this._terminalClass + ` 1s step-end infinite;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` background-color: ${this._colors.cursor.css};` +\n      ` color: ${this._colors.cursorAccent.css};` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_BAR_CLASS} {` +\n      ` box-shadow: ${this._optionsService.options.cursorWidth}px 0 0 ${this._colors.cursor.css} inset;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_UNDERLINE_CLASS} {` +\n      ` box-shadow: 0 -1px 0 ${this._colors.cursor.css} inset;` +\n      `}`;\n    // Selection\n    styles +=\n      `${this._terminalSelector} .${SELECTION_CLASS} {` +\n      ` position: absolute;` +\n      ` top: 0;` +\n      ` left: 0;` +\n      ` z-index: 1;` +\n      ` pointer-events: none;` +\n      `}` +\n      `${this._terminalSelector} .${SELECTION_CLASS} div {` +\n      ` position: absolute;` +\n      ` background-color: ${this._colors.selectionTransparent.css};` +\n      `}`;\n    // Colors\n    this._colors.ansi.forEach((c, i) => {\n      styles +=\n        `${this._terminalSelector} .${FG_CLASS_PREFIX}${i} { color: ${c.css}; }` +\n        `${this._terminalSelector} .${BG_CLASS_PREFIX}${i} { background-color: ${c.css}; }`;\n    });\n    styles +=\n      `${this._terminalSelector} .${FG_CLASS_PREFIX}${INVERTED_DEFAULT_COLOR} { color: ${color.opaque(this._colors.background).css}; }` +\n      `${this._terminalSelector} .${BG_CLASS_PREFIX}${INVERTED_DEFAULT_COLOR} { background-color: ${this._colors.foreground.css}; }`;\n\n    this._themeStyleElement.textContent = styles;\n  }\n\n  public onDevicePixelRatioChange(): void {\n    this._updateDimensions();\n  }\n\n  private _refreshRowElements(cols: number, rows: number): void {\n    // Add missing elements\n    for (let i = this._rowElements.length; i <= rows; i++) {\n      const row = document.createElement('div');\n      this._rowContainer.appendChild(row);\n      this._rowElements.push(row);\n    }\n    // Remove excess elements\n    while (this._rowElements.length > rows) {\n      this._rowContainer.removeChild(this._rowElements.pop()!);\n    }\n  }\n\n  public onResize(cols: number, rows: number): void {\n    this._refreshRowElements(cols, rows);\n    this._updateDimensions();\n  }\n\n  public onCharSizeChanged(): void {\n    this._updateDimensions();\n  }\n\n  public onBlur(): void {\n    this._rowContainer.classList.remove(FOCUS_CLASS);\n  }\n\n  public onFocus(): void {\n    this._rowContainer.classList.add(FOCUS_CLASS);\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    // Remove all selections\n    while (this._selectionContainer.children.length) {\n      this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n    }\n\n    // Selection does not exist\n    if (!start || !end) {\n      return;\n    }\n\n    // Translate from buffer position to viewport position\n    const viewportStartRow = start[1] - this._bufferService.buffer.ydisp;\n    const viewportEndRow = end[1] - this._bufferService.buffer.ydisp;\n    const viewportCappedStartRow = Math.max(viewportStartRow, 0);\n    const viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);\n\n    // No need to draw the selection\n    if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {\n      return;\n    }\n\n    // Create the selections\n    const documentFragment = document.createDocumentFragment();\n\n    if (columnSelectMode) {\n      documentFragment.appendChild(\n        this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1)\n      );\n    } else {\n      // Draw first row\n      const startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n      const endCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;\n      documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n      // Draw middle rows\n      const middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n      documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._bufferService.cols, middleRowsCount));\n      // Draw final row\n      if (viewportCappedStartRow !== viewportCappedEndRow) {\n        // Only draw viewportEndRow if it's not the same as viewporttartRow\n        const endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;\n        documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol));\n      }\n    }\n    this._selectionContainer.appendChild(documentFragment);\n  }\n\n  /**\n   * Creates a selection element at the specified position.\n   * @param row The row of the selection.\n   * @param colStart The start column.\n   * @param colEnd The end columns.\n   */\n  private _createSelectionElement(row: number, colStart: number, colEnd: number, rowCount: number = 1): HTMLElement {\n    const element = document.createElement('div');\n    element.style.height = `${rowCount * this.dimensions.actualCellHeight}px`;\n    element.style.top = `${row * this.dimensions.actualCellHeight}px`;\n    element.style.left = `${colStart * this.dimensions.actualCellWidth}px`;\n    element.style.width = `${this.dimensions.actualCellWidth * (colEnd - colStart)}px`;\n    return element;\n  }\n\n  public onCursorMove(): void {\n    // No-op, the cursor is drawn when rows are drawn\n  }\n\n  public onOptionsChanged(): void {\n    // Force a refresh\n    this._updateDimensions();\n    this._injectCss();\n  }\n\n  public clear(): void {\n    for (const e of this._rowElements) {\n      e.innerText = '';\n    }\n  }\n\n  public renderRows(start: number, end: number): void {\n    const cursorAbsoluteY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;\n    const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n    const cursorBlink = this._optionsService.options.cursorBlink;\n\n    for (let y = start; y <= end; y++) {\n      const rowElement = this._rowElements[y];\n      rowElement.innerText = '';\n\n      const row = y + this._bufferService.buffer.ydisp;\n      const lineData = this._bufferService.buffer.lines.get(row);\n      const cursorStyle = this._optionsService.options.cursorStyle;\n      rowElement.appendChild(this._rowFactory.createRow(lineData!, row, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, this._bufferService.cols));\n    }\n  }\n\n  private get _terminalSelector(): string {\n    return `.${TERMINAL_CLASS_PREFIX}${this._terminalClass}`;\n  }\n\n  private _onLinkHover(e: ILinkifierEvent): void {\n    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n  }\n\n  private _onLinkLeave(e: ILinkifierEvent): void {\n    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n  }\n\n  private _setCellUnderline(x: number, x2: number, y: number, y2: number, cols: number, enabled: boolean): void {\n    while (x !== x2 || y !== y2) {\n      const row = this._rowElements[y];\n      if (!row) {\n        return;\n      }\n      const span = <HTMLElement>row.children[x];\n      if (span) {\n        span.style.textDecoration = enabled ? 'underline' : 'none';\n      }\n      if (++x >= cols) {\n        x = 0;\n        y++;\n      }\n    }\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferLine } from 'common/Types';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { NULL_CELL_CODE, WHITESPACE_CELL_CHAR, Attributes } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { IOptionsService } from 'common/services/Services';\nimport { color, rgba } from 'browser/Color';\nimport { IColorSet, IColor } from 'browser/Types';\nimport { ICharacterJoinerService } from 'browser/services/Services';\nimport { JoinedCellData } from 'browser/services/CharacterJoinerService';\n\nexport const BOLD_CLASS = 'xterm-bold';\nexport const DIM_CLASS = 'xterm-dim';\nexport const ITALIC_CLASS = 'xterm-italic';\nexport const UNDERLINE_CLASS = 'xterm-underline';\nexport const CURSOR_CLASS = 'xterm-cursor';\nexport const CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexport const CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexport const CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexport const CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\n\nexport class DomRendererRowFactory {\n  private _workCell: CellData = new CellData();\n\n  constructor(\n    private readonly _document: Document,\n    private _colors: IColorSet,\n    @ICharacterJoinerService private readonly _characterJoinerService: ICharacterJoinerService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n  }\n\n  public createRow(lineData: IBufferLine, row: number, isCursorRow: boolean, cursorStyle: string | undefined, cursorX: number, cursorBlink: boolean, cellWidth: number, cols: number): DocumentFragment {\n    const fragment = this._document.createDocumentFragment();\n\n    const joinedRanges = this._characterJoinerService.getJoinedCharacters(row);\n    // Find the line length first, this prevents the need to output a bunch of\n    // empty cells at the end. This cannot easily be integrated into the main\n    // loop below because of the colCount feature (which can be removed after we\n    // properly support reflow and disallow data to go beyond the right-side of\n    // the viewport).\n    let lineLength = 0;\n    for (let x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n      if (lineData.loadCell(x, this._workCell).getCode() !== NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n        lineLength = x + 1;\n        break;\n      }\n    }\n\n    for (let x = 0; x < lineLength; x++) {\n      lineData.loadCell(x, this._workCell);\n      let width = this._workCell.getWidth();\n\n      // The character to the left is a wide character, drawing is owned by the char at x-1\n      if (width === 0) {\n        continue;\n      }\n\n      // If true, indicates that the current character(s) to draw were joined.\n      let isJoined = false;\n      let lastCharX = x;\n\n      // Process any joined character ranges as needed. Because of how the\n      // ranges are produced, we know that they are valid for the characters\n      // and attributes of our input.\n      let cell = this._workCell;\n      if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n        isJoined = true;\n        const range = joinedRanges.shift()!;\n\n        // We already know the exact start and end column of the joined range,\n        // so we get the string and width representing it directly\n        cell = new JoinedCellData(\n          this._workCell,\n          lineData.translateToString(true, range[0], range[1]),\n          range[1] - range[0]\n        );\n\n        // Skip over the cells occupied by this range in the loop\n        lastCharX = range[1] - 1;\n\n        // Recalculate width\n        width = cell.getWidth();\n      }\n\n      const charElement = this._document.createElement('span');\n      if (width > 1) {\n        charElement.style.width = `${cellWidth * width}px`;\n      }\n\n      if (isJoined) {\n        // Ligatures in the DOM renderer must use display inline, as they may not show with\n        // inline-block if they are outside the bounds of the element\n        charElement.style.display = 'inline';\n\n        // The DOM renderer colors the background of the cursor but for ligatures all cells are\n        // joined. The workaround here is to show a cursor around the whole ligature so it shows up,\n        // the cursor looks the same when on any character of the ligature though\n        if (cursorX >= x && cursorX <= lastCharX) {\n          cursorX = x;\n        }\n      }\n\n      if (isCursorRow && x === cursorX) {\n        charElement.classList.add(CURSOR_CLASS);\n\n        if (cursorBlink) {\n          charElement.classList.add(CURSOR_BLINK_CLASS);\n        }\n\n        switch (cursorStyle) {\n          case 'bar':\n            charElement.classList.add(CURSOR_STYLE_BAR_CLASS);\n            break;\n          case 'underline':\n            charElement.classList.add(CURSOR_STYLE_UNDERLINE_CLASS);\n            break;\n          default:\n            charElement.classList.add(CURSOR_STYLE_BLOCK_CLASS);\n            break;\n        }\n      }\n\n      if (cell.isBold()) {\n        charElement.classList.add(BOLD_CLASS);\n      }\n\n      if (cell.isItalic()) {\n        charElement.classList.add(ITALIC_CLASS);\n      }\n\n      if (cell.isDim()) {\n        charElement.classList.add(DIM_CLASS);\n      }\n\n      if (cell.isUnderline()) {\n        charElement.classList.add(UNDERLINE_CLASS);\n      }\n\n      if (cell.isInvisible()) {\n        charElement.textContent = WHITESPACE_CELL_CHAR;\n      } else {\n        charElement.textContent = cell.getChars() || WHITESPACE_CELL_CHAR;\n      }\n\n      let fg = cell.getFgColor();\n      let fgColorMode = cell.getFgColorMode();\n      let bg = cell.getBgColor();\n      let bgColorMode = cell.getBgColorMode();\n      const isInverse = !!cell.isInverse();\n      if (isInverse) {\n        const temp = fg;\n        fg = bg;\n        bg = temp;\n        const temp2 = fgColorMode;\n        fgColorMode = bgColorMode;\n        bgColorMode = temp2;\n      }\n\n      // Foreground\n      switch (fgColorMode) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          if (cell.isBold() && fg < 8 && this._optionsService.options.drawBoldTextInBrightColors) {\n            fg += 8;\n          }\n          if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.ansi[fg])) {\n            charElement.classList.add(`xterm-fg-${fg}`);\n          }\n          break;\n        case Attributes.CM_RGB:\n          const color = rgba.toColor(\n            (fg >> 16) & 0xFF,\n            (fg >>  8) & 0xFF,\n            (fg      ) & 0xFF\n          );\n          if (!this._applyMinimumContrast(charElement, this._colors.background, color)) {\n            this._addStyle(charElement, `color:#${padStart(fg.toString(16), '0', 6)}`);\n          }\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.foreground)) {\n            if (isInverse) {\n              charElement.classList.add(`xterm-fg-${INVERTED_DEFAULT_COLOR}`);\n            }\n          }\n      }\n\n      // Background\n      switch (bgColorMode) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          charElement.classList.add(`xterm-bg-${bg}`);\n          break;\n        case Attributes.CM_RGB:\n          this._addStyle(charElement, `background-color:#${padStart(bg.toString(16), '0', 6)}`);\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          if (isInverse) {\n            charElement.classList.add(`xterm-bg-${INVERTED_DEFAULT_COLOR}`);\n          }\n      }\n\n      fragment.appendChild(charElement);\n\n      x = lastCharX;\n    }\n    return fragment;\n  }\n\n  private _applyMinimumContrast(element: HTMLElement, bg: IColor, fg: IColor): boolean {\n    if (this._optionsService.options.minimumContrastRatio === 1) {\n      return false;\n    }\n\n    // Try get from cache first\n    let adjustedColor = this._colors.contrastCache.getColor(this._workCell.bg, this._workCell.fg);\n\n    // Calculate and store in cache\n    if (adjustedColor === undefined) {\n      adjustedColor = color.ensureContrastRatio(bg, fg, this._optionsService.options.minimumContrastRatio);\n      this._colors.contrastCache.setColor(this._workCell.bg, this._workCell.fg, adjustedColor ?? null);\n    }\n\n    if (adjustedColor) {\n      this._addStyle(element, `color:${adjustedColor.css}`);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _addStyle(element: HTMLElement, style: string): void {\n    element.setAttribute('style', `${element.getAttribute('style') || ''}${style};`);\n  }\n}\n\nfunction padStart(text: string, padChar: string, length: number): string {\n  while (text.length < length) {\n    text = padChar + text;\n  }\n  return text;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService } from 'common/services/Services';\n\n/**\n * Represents a selection within the buffer. This model only cares about column\n * and row coordinates, not wide characters.\n */\nexport class SelectionModel {\n  /**\n   * Whether select all is currently active.\n   */\n  public isSelectAllActive: boolean = false;\n\n  /**\n   * The minimal length of the selection from the start position. When double\n   * clicking on a word, the word will be selected which makes the selection\n   * start at the start of the word and makes this variable the length.\n   */\n  public selectionStartLength: number = 0;\n\n  /**\n   * The [x, y] position the selection starts at.\n   */\n  public selectionStart: [number, number] | undefined;\n\n  /**\n   * The [x, y] position the selection ends at.\n   */\n  public selectionEnd: [number, number] | undefined;\n\n  constructor(\n    private _bufferService: IBufferService\n  ) {\n  }\n\n  /**\n   * Clears the current selection.\n   */\n  public clearSelection(): void {\n    this.selectionStart = undefined;\n    this.selectionEnd = undefined;\n    this.isSelectAllActive = false;\n    this.selectionStartLength = 0;\n  }\n\n  /**\n   * The final selection start, taking into consideration select all.\n   */\n  public get finalSelectionStart(): [number, number] | undefined {\n    if (this.isSelectAllActive) {\n      return [0, 0];\n    }\n\n    if (!this.selectionEnd || !this.selectionStart) {\n      return this.selectionStart;\n    }\n\n    return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n  }\n\n  /**\n   * The final selection end, taking into consideration select all, double click\n   * word selection and triple click line selection.\n   */\n  public get finalSelectionEnd(): [number, number] | undefined {\n    if (this.isSelectAllActive) {\n      return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];\n    }\n\n    if (!this.selectionStart) {\n      return undefined;\n    }\n\n    // Use the selection start + length if the end doesn't exist or they're reversed\n    if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n      const startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n      if (startPlusLength > this._bufferService.cols) {\n        return [startPlusLength % this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols)];\n      }\n      return [startPlusLength, this.selectionStart[1]];\n    }\n\n    // Ensure the the word/line is selected after a double/triple click\n    if (this.selectionStartLength) {\n      // Select the larger of the two when start and end are on the same line\n      if (this.selectionEnd[1] === this.selectionStart[1]) {\n        return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n      }\n    }\n    return this.selectionEnd;\n  }\n\n  /**\n   * Returns whether the selection start and end are reversed.\n   */\n  public areSelectionValuesReversed(): boolean {\n    const start = this.selectionStart;\n    const end = this.selectionEnd;\n    if (!start || !end) {\n      return false;\n    }\n    return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n  }\n\n  /**\n   * Handle the buffer being trimmed, adjust the selection position.\n   * @param amount The amount the buffer is being trimmed.\n   * @return Whether a refresh is necessary.\n   */\n  public onTrim(amount: number): boolean {\n    // Adjust the selection position based on the trimmed amount.\n    if (this.selectionStart) {\n      this.selectionStart[1] -= amount;\n    }\n    if (this.selectionEnd) {\n      this.selectionEnd[1] -= amount;\n    }\n\n    // The selection has moved off the buffer, clear it.\n    if (this.selectionEnd && this.selectionEnd[1] < 0) {\n      this.clearSelection();\n      return true;\n    }\n\n    // If the selection start is trimmed, ensure the start column is 0.\n    if (this.selectionStart && this.selectionStart[1] < 0) {\n      this.selectionStart[1] = 0;\n    }\n    return false;\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService } from 'common/services/Services';\nimport { IEvent, EventEmitter } from 'common/EventEmitter';\nimport { ICharSizeService } from 'browser/services/Services';\n\nexport class CharSizeService implements ICharSizeService {\n  public serviceBrand: undefined;\n\n  public width: number = 0;\n  public height: number = 0;\n  private _measureStrategy: IMeasureStrategy;\n\n  public get hasValidSize(): boolean { return this.width > 0 && this.height > 0; }\n\n  private _onCharSizeChange = new EventEmitter<void>();\n  public get onCharSizeChange(): IEvent<void> { return this._onCharSizeChange.event; }\n\n  constructor(\n    document: Document,\n    parentElement: HTMLElement,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    this._measureStrategy = new DomMeasureStrategy(document, parentElement, this._optionsService);\n  }\n\n  public measure(): void {\n    const result = this._measureStrategy.measure();\n    if (result.width !== this.width || result.height !== this.height) {\n      this.width = result.width;\n      this.height = result.height;\n      this._onCharSizeChange.fire();\n    }\n  }\n}\n\ninterface IMeasureStrategy {\n  measure(): IReadonlyMeasureResult;\n}\n\ninterface IReadonlyMeasureResult {\n  readonly width: number;\n  readonly height: number;\n}\n\ninterface IMeasureResult {\n  width: number;\n  height: number;\n}\n\n// TODO: For supporting browsers we should also provide a CanvasCharDimensionsProvider that uses ctx.measureText\nclass DomMeasureStrategy implements IMeasureStrategy {\n  private _result: IMeasureResult = { width: 0, height: 0 };\n  private _measureElement: HTMLElement;\n\n  constructor(\n    private _document: Document,\n    private _parentElement: HTMLElement,\n    private _optionsService: IOptionsService\n  ) {\n    this._measureElement = this._document.createElement('span');\n    this._measureElement.classList.add('xterm-char-measure-element');\n    this._measureElement.textContent = 'W';\n    this._measureElement.setAttribute('aria-hidden', 'true');\n    this._parentElement.appendChild(this._measureElement);\n  }\n\n  public measure(): IReadonlyMeasureResult {\n    this._measureElement.style.fontFamily = this._optionsService.options.fontFamily;\n    this._measureElement.style.fontSize = `${this._optionsService.options.fontSize}px`;\n\n    // Note that this triggers a synchronous layout\n    const geometry = this._measureElement.getBoundingClientRect();\n\n    // If values are 0 then the element is likely currently display:none, in which case we should\n    // retain the previous value.\n    if (geometry.width !== 0 && geometry.height !== 0) {\n      this._result.width = geometry.width;\n      this._result.height = Math.ceil(geometry.height);\n    }\n\n    return this._result;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferLine, ICellData, CharData } from 'common/Types';\nimport { ICharacterJoiner } from 'browser/Types';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { WHITESPACE_CELL_CHAR, Content } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { IBufferService } from 'common/services/Services';\nimport { ICharacterJoinerService } from 'browser/services/Services';\n\nexport class JoinedCellData extends AttributeData implements ICellData {\n  private _width: number;\n  // .content carries no meaning for joined CellData, simply nullify it\n  // thus we have to overload all other .content accessors\n  public content: number = 0;\n  public fg: number;\n  public bg: number;\n  public combinedData: string = '';\n\n  constructor(firstCell: ICellData, chars: string, width: number) {\n    super();\n    this.fg = firstCell.fg;\n    this.bg = firstCell.bg;\n    this.combinedData = chars;\n    this._width = width;\n  }\n\n  public isCombined(): number {\n    // always mark joined cell data as combined\n    return Content.IS_COMBINED_MASK;\n  }\n\n  public getWidth(): number {\n    return this._width;\n  }\n\n  public getChars(): string {\n    return this.combinedData;\n  }\n\n  public getCode(): number {\n    // code always gets the highest possible fake codepoint (read as -1)\n    // this is needed as code is used by caches as identifier\n    return 0x1FFFFF;\n  }\n\n  public setFromCharData(value: CharData): void {\n    throw new Error('not implemented');\n  }\n\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n\nexport class CharacterJoinerService implements ICharacterJoinerService {\n  public serviceBrand: undefined;\n\n  private _characterJoiners: ICharacterJoiner[] = [];\n  private _nextCharacterJoinerId: number = 0;\n  private _workCell: CellData = new CellData();\n\n  constructor(\n    @IBufferService private _bufferService: IBufferService\n  ) { }\n\n  public register(handler: (text: string) => [number, number][]): number {\n    const joiner: ICharacterJoiner = {\n      id: this._nextCharacterJoinerId++,\n      handler\n    };\n\n    this._characterJoiners.push(joiner);\n    return joiner.id;\n  }\n\n  public deregister(joinerId: number): boolean {\n    for (let i = 0; i < this._characterJoiners.length; i++) {\n      if (this._characterJoiners[i].id === joinerId) {\n        this._characterJoiners.splice(i, 1);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  public getJoinedCharacters(row: number): [number, number][] {\n    if (this._characterJoiners.length === 0) {\n      return [];\n    }\n\n    const line = this._bufferService.buffer.lines.get(row);\n    if (!line || line.length === 0) {\n      return [];\n    }\n\n    const ranges: [number, number][] = [];\n    const lineStr = line.translateToString(true);\n\n    // Because some cells can be represented by multiple javascript characters,\n    // we track the cell and the string indexes separately. This allows us to\n    // translate the string ranges we get from the joiners back into cell ranges\n    // for use when rendering\n    let rangeStartColumn = 0;\n    let currentStringIndex = 0;\n    let rangeStartStringIndex = 0;\n    let rangeAttrFG = line.getFg(0);\n    let rangeAttrBG = line.getBg(0);\n\n    for (let x = 0; x < line.getTrimmedLength(); x++) {\n      line.loadCell(x, this._workCell);\n\n      if (this._workCell.getWidth() === 0) {\n        // If this character is of width 0, skip it.\n        continue;\n      }\n\n      // End of range\n      if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n        // If we ended up with a sequence of more than one character,\n        // look for ranges to join.\n        if (x - rangeStartColumn > 1) {\n          const joinedRanges = this._getJoinedRanges(\n            lineStr,\n            rangeStartStringIndex,\n            currentStringIndex,\n            line,\n            rangeStartColumn\n          );\n          for (let i = 0; i < joinedRanges.length; i++) {\n            ranges.push(joinedRanges[i]);\n          }\n        }\n\n        // Reset our markers for a new range.\n        rangeStartColumn = x;\n        rangeStartStringIndex = currentStringIndex;\n        rangeAttrFG = this._workCell.fg;\n        rangeAttrBG = this._workCell.bg;\n      }\n\n      currentStringIndex += this._workCell.getChars().length || WHITESPACE_CELL_CHAR.length;\n    }\n\n    // Process any trailing ranges.\n    if (this._bufferService.cols - rangeStartColumn > 1) {\n      const joinedRanges = this._getJoinedRanges(\n        lineStr,\n        rangeStartStringIndex,\n        currentStringIndex,\n        line,\n        rangeStartColumn\n      );\n      for (let i = 0; i < joinedRanges.length; i++) {\n        ranges.push(joinedRanges[i]);\n      }\n    }\n\n    return ranges;\n  }\n\n  /**\n   * Given a segment of a line of text, find all ranges of text that should be\n   * joined in a single rendering unit. Ranges are internally converted to\n   * column ranges, rather than string ranges.\n   * @param line String representation of the full line of text\n   * @param startIndex Start position of the range to search in the string (inclusive)\n   * @param endIndex End position of the range to search in the string (exclusive)\n   */\n  private _getJoinedRanges(line: string, startIndex: number, endIndex: number, lineData: IBufferLine, startCol: number): [number, number][] {\n    const text = line.substring(startIndex, endIndex);\n    // At this point we already know that there is at least one joiner so\n    // we can just pull its value and assign it directly rather than\n    // merging it into an empty array, which incurs unnecessary writes.\n    const joinedRanges: [number, number][] = this._characterJoiners[0].handler(text);\n    for (let i = 1; i < this._characterJoiners.length; i++) {\n      // We merge any overlapping ranges across the different joiners\n      const joinerRanges = this._characterJoiners[i].handler(text);\n      for (let j = 0; j < joinerRanges.length; j++) {\n        CharacterJoinerService._mergeRanges(joinedRanges, joinerRanges[j]);\n      }\n    }\n    this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n    return joinedRanges;\n  }\n\n  /**\n   * Modifies the provided ranges in-place to adjust for variations between\n   * string length and cell width so that the range represents a cell range,\n   * rather than the string range the joiner provides.\n   * @param ranges String ranges containing start (inclusive) and end (exclusive) index\n   * @param line Cell data for the relevant line in the terminal\n   * @param startCol Offset within the line to start from\n   */\n  private _stringRangesToCellRanges(ranges: [number, number][], line: IBufferLine, startCol: number): void {\n    let currentRangeIndex = 0;\n    let currentRangeStarted = false;\n    let currentStringIndex = 0;\n    let currentRange = ranges[currentRangeIndex];\n\n    // If we got through all of the ranges, stop searching\n    if (!currentRange) {\n      return;\n    }\n\n    for (let x = startCol; x < this._bufferService.cols; x++) {\n      const width = line.getWidth(x);\n      const length = line.getString(x).length || WHITESPACE_CELL_CHAR.length;\n\n      // We skip zero-width characters when creating the string to join the text\n      // so we do the same here\n      if (width === 0) {\n        continue;\n      }\n\n      // Adjust the start of the range\n      if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n        currentRange[0] = x;\n        currentRangeStarted = true;\n      }\n\n      // Adjust the end of the range\n      if (currentRange[1] <= currentStringIndex) {\n        currentRange[1] = x;\n\n        // We're finished with this range, so we move to the next one\n        currentRange = ranges[++currentRangeIndex];\n\n        // If there are no more ranges left, stop searching\n        if (!currentRange) {\n          break;\n        }\n\n        // Ranges can be on adjacent characters. Because the end index of the\n        // ranges are exclusive, this means that the index for the start of a\n        // range can be the same as the end index of the previous range. To\n        // account for the start of the next range, we check here just in case.\n        if (currentRange[0] <= currentStringIndex) {\n          currentRange[0] = x;\n          currentRangeStarted = true;\n        } else {\n          currentRangeStarted = false;\n        }\n      }\n\n      // Adjust the string index based on the character length to line up with\n      // the column adjustment\n      currentStringIndex += length;\n    }\n\n    // If there is still a range left at the end, it must extend all the way to\n    // the end of the line.\n    if (currentRange) {\n      currentRange[1] = this._bufferService.cols;\n    }\n  }\n\n  /**\n   * Merges the range defined by the provided start and end into the list of\n   * existing ranges. The merge is done in place on the existing range for\n   * performance and is also returned.\n   * @param ranges Existing range list\n   * @param newRange Tuple of two numbers representing the new range to merge in.\n   * @returns The ranges input with the new range merged in place\n   */\n  private static _mergeRanges(ranges: [number, number][], newRange: [number, number]): [number, number][] {\n    let inRange = false;\n    for (let i = 0; i < ranges.length; i++) {\n      const range = ranges[i];\n      if (!inRange) {\n        if (newRange[1] <= range[0]) {\n          // Case 1: New range is before the search range\n          ranges.splice(i, 0, newRange);\n          return ranges;\n        }\n\n        if (newRange[1] <= range[1]) {\n          // Case 2: New range is either wholly contained within the\n          // search range or overlaps with the front of it\n          range[0] = Math.min(newRange[0], range[0]);\n          return ranges;\n        }\n\n        if (newRange[0] < range[1]) {\n          // Case 3: New range either wholly contains the search range\n          // or overlaps with the end of it\n          range[0] = Math.min(newRange[0], range[0]);\n          inRange = true;\n        }\n\n        // Case 4: New range starts after the search range\n        continue;\n      } else {\n        if (newRange[1] <= range[0]) {\n          // Case 5: New range extends from previous range but doesn't\n          // reach the current one\n          ranges[i - 1][1] = newRange[1];\n          return ranges;\n        }\n\n        if (newRange[1] <= range[1]) {\n          // Case 6: New range extends from prvious range into the\n          // current range\n          ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n          ranges.splice(i, 1);\n          return ranges;\n        }\n\n        // Case 7: New range extends from previous range past the\n        // end of the current range\n        ranges.splice(i, 1);\n        i--;\n      }\n    }\n\n    if (inRange) {\n      // Case 8: New range extends past the last existing range\n      ranges[ranges.length - 1][1] = newRange[1];\n    } else {\n      // Case 9: New range starts after the last existing range\n      ranges.push(newRange);\n    }\n\n    return ranges;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreBrowserService } from './Services';\n\nexport class CoreBrowserService implements ICoreBrowserService {\n  public serviceBrand: undefined;\n\n  constructor(\n    private _textarea: HTMLTextAreaElement\n  ) {\n  }\n\n  public get isFocused(): boolean {\n    const docOrShadowRoot = this._textarea.getRootNode ? this._textarea.getRootNode() as Document | ShadowRoot : document;\n    return docOrShadowRoot.activeElement === this._textarea && document.hasFocus();\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharSizeService, IRenderService, IMouseService } from './Services';\nimport { getCoords, getRawByteCoords } from 'browser/input/Mouse';\n\nexport class MouseService implements IMouseService {\n  public serviceBrand: undefined;\n\n  constructor(\n    @IRenderService private readonly _renderService: IRenderService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService\n  ) {\n  }\n\n  public getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, isSelection?: boolean): [number, number] | undefined {\n    return getCoords(\n      event,\n      element,\n      colCount,\n      rowCount,\n      this._charSizeService.hasValidSize,\n      this._renderService.dimensions.actualCellWidth,\n      this._renderService.dimensions.actualCellHeight,\n      isSelection\n    );\n  }\n\n  public getRawByteCoords(event: MouseEvent, element: HTMLElement, colCount: number, rowCount: number): { x: number, y: number } | undefined {\n    const coords = this.getCoords(event, element, colCount, rowCount);\n    return getRawByteCoords(coords);\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderer, IRenderDimensions } from 'browser/renderer/Types';\nimport { RenderDebouncer } from 'browser/RenderDebouncer';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { ScreenDprMonitor } from 'browser/ScreenDprMonitor';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IColorSet } from 'browser/Types';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { ICharSizeService, IRenderService } from 'browser/services/Services';\n\ninterface ISelectionState {\n  start: [number, number] | undefined;\n  end: [number, number] | undefined;\n  columnSelectMode: boolean;\n}\n\nexport class RenderService extends Disposable implements IRenderService {\n  public serviceBrand: undefined;\n\n  private _renderDebouncer: RenderDebouncer;\n  private _screenDprMonitor: ScreenDprMonitor;\n\n  private _isPaused: boolean = false;\n  private _needsFullRefresh: boolean = false;\n  private _isNextRenderRedrawOnly: boolean = true;\n  private _needsSelectionRefresh: boolean = false;\n  private _canvasWidth: number = 0;\n  private _canvasHeight: number = 0;\n  private _selectionState: ISelectionState = {\n    start: undefined,\n    end: undefined,\n    columnSelectMode: false\n  };\n\n  private _onDimensionsChange = new EventEmitter<IRenderDimensions>();\n  public get onDimensionsChange(): IEvent<IRenderDimensions> { return this._onDimensionsChange.event; }\n  private _onRender = new EventEmitter<{ start: number, end: number }>();\n  public get onRenderedBufferChange(): IEvent<{ start: number, end: number }> { return this._onRender.event; }\n  private _onRefreshRequest = new EventEmitter<{ start: number, end: number }>();\n  public get onRefreshRequest(): IEvent<{ start: number, end: number }> { return this._onRefreshRequest.event; }\n\n  public get dimensions(): IRenderDimensions { return this._renderer.dimensions; }\n\n  constructor(\n    private _renderer: IRenderer,\n    private _rowCount: number,\n    screenElement: HTMLElement,\n    @IOptionsService optionsService: IOptionsService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IBufferService bufferService: IBufferService\n  ) {\n    super();\n\n    this.register({ dispose: () => this._renderer.dispose() });\n\n    this._renderDebouncer = new RenderDebouncer((start, end) => this._renderRows(start, end));\n    this.register(this._renderDebouncer);\n\n    this._screenDprMonitor = new ScreenDprMonitor();\n    this._screenDprMonitor.setListener(() => this.onDevicePixelRatioChange());\n    this.register(this._screenDprMonitor);\n\n    this.register(bufferService.onResize(e => this._fullRefresh()));\n    this.register(optionsService.onOptionChange(() => this._renderer.onOptionsChanged()));\n    this.register(this._charSizeService.onCharSizeChange(() => this.onCharSizeChanged()));\n\n    // No need to register this as renderer is explicitly disposed in RenderService.dispose\n    this._renderer.onRequestRedraw(e => this.refreshRows(e.start, e.end, true));\n\n    // dprchange should handle this case, we need this as well for browsers that don't support the\n    // matchMedia query.\n    this.register(addDisposableDomListener(window, 'resize', () => this.onDevicePixelRatioChange()));\n\n    // Detect whether IntersectionObserver is detected and enable renderer pause\n    // and resume based on terminal visibility if so\n    if ('IntersectionObserver' in window) {\n      const observer = new IntersectionObserver(e => this._onIntersectionChange(e[e.length - 1]), { threshold: 0 });\n      observer.observe(screenElement);\n      this.register({ dispose: () => observer.disconnect() });\n    }\n  }\n\n  private _onIntersectionChange(entry: IntersectionObserverEntry): void {\n    this._isPaused = entry.isIntersecting === undefined ? (entry.intersectionRatio === 0) : !entry.isIntersecting;\n\n    // Terminal was hidden on open\n    if (!this._isPaused && !this._charSizeService.hasValidSize) {\n      this._charSizeService.measure();\n    }\n\n    if (!this._isPaused && this._needsFullRefresh) {\n      this.refreshRows(0, this._rowCount - 1);\n      this._needsFullRefresh = false;\n    }\n  }\n\n  public refreshRows(start: number, end: number, isRedrawOnly: boolean = false): void {\n    if (this._isPaused) {\n      this._needsFullRefresh = true;\n      return;\n    }\n    if (!isRedrawOnly) {\n      this._isNextRenderRedrawOnly = false;\n    }\n    this._renderDebouncer.refresh(start, end, this._rowCount);\n  }\n\n  private _renderRows(start: number, end: number): void {\n    this._renderer.renderRows(start, end);\n\n    // Update selection if needed\n    if (this._needsSelectionRefresh) {\n      this._renderer.onSelectionChanged(this._selectionState.start, this._selectionState.end, this._selectionState.columnSelectMode);\n      this._needsSelectionRefresh = false;\n    }\n\n    // Fire render event only if it was not a redraw\n    if (!this._isNextRenderRedrawOnly) {\n      this._onRender.fire({ start, end });\n    }\n    this._isNextRenderRedrawOnly = true;\n  }\n\n  public resize(cols: number, rows: number): void {\n    this._rowCount = rows;\n    this._fireOnCanvasResize();\n  }\n\n  public changeOptions(): void {\n    this._renderer.onOptionsChanged();\n    this.refreshRows(0, this._rowCount - 1);\n    this._fireOnCanvasResize();\n  }\n\n  private _fireOnCanvasResize(): void {\n    // Don't fire the event if the dimensions haven't changed\n    if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n      return;\n    }\n    this._onDimensionsChange.fire(this._renderer.dimensions);\n  }\n\n  public dispose(): void {\n    super.dispose();\n  }\n\n  public setRenderer(renderer: IRenderer): void {\n    // TODO: RenderService should be the only one to dispose the renderer\n    this._renderer.dispose();\n    this._renderer = renderer;\n    this._renderer.onRequestRedraw(e => this.refreshRows(e.start, e.end, true));\n\n    // Force a refresh\n    this._needsSelectionRefresh = true;\n    this._fullRefresh();\n  }\n\n  private _fullRefresh(): void {\n    if (this._isPaused) {\n      this._needsFullRefresh = true;\n    } else {\n      this.refreshRows(0, this._rowCount - 1);\n    }\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._renderer.setColors(colors);\n    this._fullRefresh();\n  }\n\n  public onDevicePixelRatioChange(): void {\n    // Force char size measurement as DomMeasureStrategy(getBoundingClientRect) is not stable\n    // when devicePixelRatio changes\n    this._charSizeService.measure();\n\n    this._renderer.onDevicePixelRatioChange();\n    this.refreshRows(0, this._rowCount - 1);\n  }\n\n  public onResize(cols: number, rows: number): void {\n    this._renderer.onResize(cols, rows);\n    this._fullRefresh();\n  }\n\n  // TODO: Is this useful when we have onResize?\n  public onCharSizeChanged(): void {\n    this._renderer.onCharSizeChanged();\n  }\n\n  public onBlur(): void {\n    this._renderer.onBlur();\n  }\n\n  public onFocus(): void {\n    this._renderer.onFocus();\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    this._selectionState.start = start;\n    this._selectionState.end = end;\n    this._selectionState.columnSelectMode = columnSelectMode;\n    this._renderer.onSelectionChanged(start, end, columnSelectMode);\n  }\n\n  public onCursorMove(): void {\n    this._renderer.onCursorMove();\n  }\n\n  public clear(): void {\n    this._renderer.clear();\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ISelectionRedrawRequestEvent, ISelectionRequestScrollLinesEvent } from 'browser/selection/Types';\nimport { IBuffer } from 'common/buffer/Types';\nimport { IBufferLine, IDisposable } from 'common/Types';\nimport * as Browser from 'common/Platform';\nimport { SelectionModel } from 'browser/selection/SelectionModel';\nimport { CellData } from 'common/buffer/CellData';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IMouseService, ISelectionService, IRenderService } from 'browser/services/Services';\nimport { ILinkifier2 } from 'browser/Types';\nimport { IBufferService, IOptionsService, ICoreService } from 'common/services/Services';\nimport { getCoordsRelativeToElement } from 'browser/input/Mouse';\nimport { moveToCellSequence } from 'browser/input/MoveToCell';\nimport { Disposable } from 'common/Lifecycle';\nimport { getRangeLength } from 'common/buffer/BufferRange';\n\n/**\n * The number of pixels the mouse needs to be above or below the viewport in\n * order to scroll at the maximum speed.\n */\nconst DRAG_SCROLL_MAX_THRESHOLD = 50;\n\n/**\n * The maximum scrolling speed\n */\nconst DRAG_SCROLL_MAX_SPEED = 15;\n\n/**\n * The number of milliseconds between drag scroll updates.\n */\nconst DRAG_SCROLL_INTERVAL = 50;\n\n/**\n * The maximum amount of time that can have elapsed for an alt click to move the\n * cursor.\n */\nconst ALT_CLICK_MOVE_CURSOR_TIME = 500;\n\nconst NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nconst ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\n\n/**\n * Represents a position of a word on a line.\n */\ninterface IWordPosition {\n  start: number;\n  length: number;\n}\n\n/**\n * A selection mode, this drives how the selection behaves on mouse move.\n */\nexport const enum SelectionMode {\n  NORMAL,\n  WORD,\n  LINE,\n  COLUMN\n}\n\n/**\n * A class that manages the selection of the terminal. With help from\n * SelectionModel, SelectionService handles with all logic associated with\n * dealing with the selection, including handling mouse interaction, wide\n * characters and fetching the actual text within the selection. Rendering is\n * not handled by the SelectionService but the onRedrawRequest event is fired\n * when the selection is ready to be redrawn (on an animation frame).\n */\nexport class SelectionService extends Disposable implements ISelectionService {\n  public serviceBrand: undefined;\n\n  protected _model: SelectionModel;\n\n  /**\n   * The amount to scroll every drag scroll update (depends on how far the mouse\n   * drag is above or below the terminal).\n   */\n  private _dragScrollAmount: number = 0;\n\n  /**\n   * The current selection mode.\n   */\n  protected _activeSelectionMode: SelectionMode;\n\n  /**\n   * A setInterval timer that is active while the mouse is down whose callback\n   * scrolls the viewport when necessary.\n   */\n  private _dragScrollIntervalTimer: number | undefined;\n\n  /**\n   * The animation frame ID used for refreshing the selection.\n   */\n  private _refreshAnimationFrame: number | undefined;\n\n  /**\n   * Whether selection is enabled.\n   */\n  private _enabled = true;\n\n  private _mouseMoveListener: EventListener;\n  private _mouseUpListener: EventListener;\n  private _trimListener: IDisposable;\n  private _workCell: CellData = new CellData();\n\n  private _mouseDownTimeStamp: number = 0;\n  private _oldHasSelection: boolean = false;\n  private _oldSelectionStart: [number, number] | undefined = undefined;\n  private _oldSelectionEnd: [number, number] | undefined = undefined;\n\n  private _onLinuxMouseSelection = this.register(new EventEmitter<string>());\n  public get onLinuxMouseSelection(): IEvent<string> { return this._onLinuxMouseSelection.event; }\n  private _onRedrawRequest = this.register(new EventEmitter<ISelectionRedrawRequestEvent>());\n  public get onRequestRedraw(): IEvent<ISelectionRedrawRequestEvent> { return this._onRedrawRequest.event; }\n  private _onSelectionChange = this.register(new EventEmitter<void>());\n  public get onSelectionChange(): IEvent<void> { return this._onSelectionChange.event; }\n  private _onRequestScrollLines = this.register(new EventEmitter<ISelectionRequestScrollLinesEvent>());\n  public get onRequestScrollLines(): IEvent<ISelectionRequestScrollLinesEvent> { return this._onRequestScrollLines.event; }\n\n  constructor(\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    private readonly _linkifier: ILinkifier2,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @IMouseService private readonly _mouseService: IMouseService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    super();\n\n    // Init listeners\n    this._mouseMoveListener = event => this._onMouseMove(<MouseEvent>event);\n    this._mouseUpListener = event => this._onMouseUp(<MouseEvent>event);\n    this._coreService.onUserInput(() => {\n      if (this.hasSelection) {\n        this.clearSelection();\n      }\n    });\n    this._trimListener = this._bufferService.buffer.lines.onTrim(amount => this._onTrim(amount));\n    this.register(this._bufferService.buffers.onBufferActivate(e => this._onBufferActivate(e)));\n\n    this.enable();\n\n    this._model = new SelectionModel(this._bufferService);\n    this._activeSelectionMode = SelectionMode.NORMAL;\n  }\n\n  public dispose(): void {\n    this._removeMouseDownListeners();\n  }\n\n  public reset(): void {\n    this.clearSelection();\n  }\n\n  /**\n   * Disables the selection manager. This is useful for when terminal mouse\n   * are enabled.\n   */\n  public disable(): void {\n    this.clearSelection();\n    this._enabled = false;\n  }\n\n  /**\n   * Enable the selection manager.\n   */\n  public enable(): void {\n    this._enabled = true;\n  }\n\n  public get selectionStart(): [number, number] | undefined { return this._model.finalSelectionStart; }\n  public get selectionEnd(): [number, number] | undefined { return this._model.finalSelectionEnd; }\n\n  /**\n   * Gets whether there is an active text selection.\n   */\n  public get hasSelection(): boolean {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    if (!start || !end) {\n      return false;\n    }\n    return start[0] !== end[0] || start[1] !== end[1];\n  }\n\n  /**\n   * Gets the text currently selected.\n   */\n  public get selectionText(): string {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    if (!start || !end) {\n      return '';\n    }\n\n    const buffer = this._bufferService.buffer;\n    const result: string[] = [];\n\n    if (this._activeSelectionMode === SelectionMode.COLUMN) {\n      // Ignore zero width selections\n      if (start[0] === end[0]) {\n        return '';\n      }\n\n      for (let i = start[1]; i <= end[1]; i++) {\n        const lineText = buffer.translateBufferLineToString(i, true, start[0], end[0]);\n        result.push(lineText);\n      }\n    } else {\n      // Get first row\n      const startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n      result.push(buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n\n      // Get middle rows\n      for (let i = start[1] + 1; i <= end[1] - 1; i++) {\n        const bufferLine = buffer.lines.get(i);\n        const lineText = buffer.translateBufferLineToString(i, true);\n        if (bufferLine && bufferLine.isWrapped) {\n          result[result.length - 1] += lineText;\n        } else {\n          result.push(lineText);\n        }\n      }\n\n      // Get final row\n      if (start[1] !== end[1]) {\n        const bufferLine = buffer.lines.get(end[1]);\n        const lineText = buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n        if (bufferLine && bufferLine!.isWrapped) {\n          result[result.length - 1] += lineText;\n        } else {\n          result.push(lineText);\n        }\n      }\n    }\n\n    // Format string by replacing non-breaking space chars with regular spaces\n    // and joining the array into a multi-line string.\n    const formattedResult = result.map(line => {\n      return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n    }).join(Browser.isWindows ? '\\r\\n' : '\\n');\n\n    return formattedResult;\n  }\n\n  /**\n   * Clears the current terminal selection.\n   */\n  public clearSelection(): void {\n    this._model.clearSelection();\n    this._removeMouseDownListeners();\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  /**\n   * Queues a refresh, redrawing the selection on the next opportunity.\n   * @param isLinuxMouseSelection Whether the selection should be registered as a new\n   * selection on Linux.\n   */\n  public refresh(isLinuxMouseSelection?: boolean): void {\n    // Queue the refresh for the renderer\n    if (!this._refreshAnimationFrame) {\n      this._refreshAnimationFrame = window.requestAnimationFrame(() => this._refresh());\n    }\n\n    // If the platform is Linux and the refresh call comes from a mouse event,\n    // we need to update the selection for middle click to paste selection.\n    if (Browser.isLinux && isLinuxMouseSelection) {\n      const selectionText = this.selectionText;\n      if (selectionText.length) {\n        this._onLinuxMouseSelection.fire(this.selectionText);\n      }\n    }\n  }\n\n  /**\n   * Fires the refresh event, causing consumers to pick it up and redraw the\n   * selection state.\n   */\n  private _refresh(): void {\n    this._refreshAnimationFrame = undefined;\n    this._onRedrawRequest.fire({\n      start: this._model.finalSelectionStart,\n      end: this._model.finalSelectionEnd,\n      columnSelectMode: this._activeSelectionMode === SelectionMode.COLUMN\n    });\n  }\n\n  /**\n   * Checks if the current click was inside the current selection\n   * @param event The mouse event\n   */\n  private _isClickInSelection(event: MouseEvent): boolean {\n    const coords = this._getMouseBufferCoords(event);\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n\n    if (!start || !end || !coords) {\n      return false;\n    }\n\n    return this._areCoordsInSelection(coords, start, end);\n  }\n\n  protected _areCoordsInSelection(coords: [number, number], start: [number, number], end: [number, number]): boolean {\n    return (coords[1] > start[1] && coords[1] < end[1]) ||\n        (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n        (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n        (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n  }\n\n  /**\n   * Selects word at the current mouse event coordinates.\n   * @param event The mouse event.\n   */\n  private _selectWordAtCursor(event: MouseEvent, allowWhitespaceOnlySelection: boolean): boolean {\n    // Check if there is a link under the cursor first and select that if so\n    const range = this._linkifier.currentLink?.link?.range;\n    if (range) {\n      this._model.selectionStart = [range.start.x - 1, range.start.y - 1];\n      this._model.selectionStartLength = getRangeLength(range, this._bufferService.cols);\n      this._model.selectionEnd = undefined;\n      return true;\n    }\n\n    const coords = this._getMouseBufferCoords(event);\n    if (coords) {\n      this._selectWordAt(coords, allowWhitespaceOnlySelection);\n      this._model.selectionEnd = undefined;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Selects all text within the terminal.\n   */\n  public selectAll(): void {\n    this._model.isSelectAllActive = true;\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  public selectLines(start: number, end: number): void {\n    this._model.clearSelection();\n    start = Math.max(start, 0);\n    end = Math.min(end, this._bufferService.buffer.lines.length - 1);\n    this._model.selectionStart = [0, start];\n    this._model.selectionEnd = [this._bufferService.cols, end];\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  /**\n   * Handle the buffer being trimmed, adjust the selection position.\n   * @param amount The amount the buffer is being trimmed.\n   */\n  private _onTrim(amount: number): void {\n    const needsRefresh = this._model.onTrim(amount);\n    if (needsRefresh) {\n      this.refresh();\n    }\n  }\n\n  /**\n   * Gets the 0-based [x, y] buffer coordinates of the current mouse event.\n   * @param event The mouse event.\n   */\n  private _getMouseBufferCoords(event: MouseEvent): [number, number] | undefined {\n    const coords = this._mouseService.getCoords(event, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);\n    if (!coords) {\n      return undefined;\n    }\n\n    // Convert to 0-based\n    coords[0]--;\n    coords[1]--;\n\n    // Convert viewport coords to buffer coords\n    coords[1] += this._bufferService.buffer.ydisp;\n    return coords;\n  }\n\n  /**\n   * Gets the amount the viewport should be scrolled based on how far out of the\n   * terminal the mouse is.\n   * @param event The mouse event.\n   */\n  private _getMouseEventScrollAmount(event: MouseEvent): number {\n    let offset = getCoordsRelativeToElement(event, this._screenElement)[1];\n    const terminalHeight = this._renderService.dimensions.canvasHeight;\n    if (offset >= 0 && offset <= terminalHeight) {\n      return 0;\n    }\n    if (offset > terminalHeight) {\n      offset -= terminalHeight;\n    }\n\n    offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n    offset /= DRAG_SCROLL_MAX_THRESHOLD;\n    return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n  }\n\n  /**\n   * Returns whether the selection manager should force selection, regardless of\n   * whether the terminal is in mouse events mode.\n   * @param event The mouse event.\n   */\n  public shouldForceSelection(event: MouseEvent): boolean {\n    if (Browser.isMac) {\n      return event.altKey && this._optionsService.options.macOptionClickForcesSelection;\n    }\n\n    return event.shiftKey;\n  }\n\n  /**\n   * Handles te mousedown event, setting up for a new selection.\n   * @param event The mousedown event.\n   */\n  public onMouseDown(event: MouseEvent): void {\n    this._mouseDownTimeStamp = event.timeStamp;\n    // If we have selection, we want the context menu on right click even if the\n    // terminal is in mouse mode.\n    if (event.button === 2 && this.hasSelection) {\n      return;\n    }\n\n    // Only action the primary button\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Allow selection when using a specific modifier key, even when disabled\n    if (!this._enabled) {\n      if (!this.shouldForceSelection(event)) {\n        return;\n      }\n\n      // Don't send the mouse down event to the current process, we want to select\n      event.stopPropagation();\n    }\n\n    // Tell the browser not to start a regular selection\n    event.preventDefault();\n\n    // Reset drag scroll state\n    this._dragScrollAmount = 0;\n\n    if (this._enabled && event.shiftKey) {\n      this._onIncrementalClick(event);\n    } else {\n      if (event.detail === 1) {\n        this._onSingleClick(event);\n      } else if (event.detail === 2) {\n        this._onDoubleClick(event);\n      } else if (event.detail === 3) {\n        this._onTripleClick(event);\n      }\n    }\n\n    this._addMouseDownListeners();\n    this.refresh(true);\n  }\n\n  /**\n   * Adds listeners when mousedown is triggered.\n   */\n  private _addMouseDownListeners(): void {\n    // Listen on the document so that dragging outside of viewport works\n    if (this._screenElement.ownerDocument) {\n      this._screenElement.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n      this._screenElement.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n    }\n    this._dragScrollIntervalTimer = window.setInterval(() => this._dragScroll(), DRAG_SCROLL_INTERVAL);\n  }\n\n  /**\n   * Removes the listeners that are registered when mousedown is triggered.\n   */\n  private _removeMouseDownListeners(): void {\n    if (this._screenElement.ownerDocument) {\n      this._screenElement.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n      this._screenElement.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n    }\n    clearInterval(this._dragScrollIntervalTimer);\n    this._dragScrollIntervalTimer = undefined;\n  }\n\n  /**\n   * Performs an incremental click, setting the selection end position to the mouse\n   * position.\n   * @param event The mouse event.\n   */\n  private _onIncrementalClick(event: MouseEvent): void {\n    if (this._model.selectionStart) {\n      this._model.selectionEnd = this._getMouseBufferCoords(event);\n    }\n  }\n\n  /**\n   * Performs a single click, resetting relevant state and setting the selection\n   * start position.\n   * @param event The mouse event.\n   */\n  private _onSingleClick(event: MouseEvent): void {\n    this._model.selectionStartLength = 0;\n    this._model.isSelectAllActive = false;\n    this._activeSelectionMode = this.shouldColumnSelect(event) ? SelectionMode.COLUMN : SelectionMode.NORMAL;\n\n    // Initialize the new selection\n    this._model.selectionStart = this._getMouseBufferCoords(event);\n    if (!this._model.selectionStart) {\n      return;\n    }\n    this._model.selectionEnd = undefined;\n\n    // Ensure the line exists\n    const line = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);\n    if (!line) {\n      return;\n    }\n\n    // Return early if the click event is not in the buffer (eg. in scroll bar)\n    if (line.length === this._model.selectionStart[0]) {\n      return;\n    }\n\n    // If the mouse is over the second half of a wide character, adjust the\n    // selection to cover the whole character\n    if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n      this._model.selectionStart[0]++;\n    }\n  }\n\n  /**\n   * Performs a double click, selecting the current word.\n   * @param event The mouse event.\n   */\n  private _onDoubleClick(event: MouseEvent): void {\n    if (this._selectWordAtCursor(event, true)) {\n      this._activeSelectionMode = SelectionMode.WORD;\n    }\n  }\n\n  /**\n   * Performs a triple click, selecting the current line and activating line\n   * select mode.\n   * @param event The mouse event.\n   */\n  private _onTripleClick(event: MouseEvent): void {\n    const coords = this._getMouseBufferCoords(event);\n    if (coords) {\n      this._activeSelectionMode = SelectionMode.LINE;\n      this._selectLineAt(coords[1]);\n    }\n  }\n\n  /**\n   * Returns whether the selection manager should operate in column select mode\n   * @param event the mouse or keyboard event\n   */\n  public shouldColumnSelect(event: KeyboardEvent | MouseEvent): boolean {\n    return event.altKey && !(Browser.isMac && this._optionsService.options.macOptionClickForcesSelection);\n  }\n\n  /**\n   * Handles the mousemove event when the mouse button is down, recording the\n   * end of the selection and refreshing the selection.\n   * @param event The mousemove event.\n   */\n  private _onMouseMove(event: MouseEvent): void {\n    // If the mousemove listener is active it means that a selection is\n    // currently being made, we should stop propagation to prevent mouse events\n    // to be sent to the pty.\n    event.stopImmediatePropagation();\n\n    // Do nothing if there is no selection start, this can happen if the first\n    // click in the terminal is an incremental click\n    if (!this._model.selectionStart) {\n      return;\n    }\n\n    // Record the previous position so we know whether to redraw the selection\n    // at the end.\n    const previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n\n    // Set the initial selection end based on the mouse coordinates\n    this._model.selectionEnd = this._getMouseBufferCoords(event);\n    if (!this._model.selectionEnd) {\n      this.refresh(true);\n      return;\n    }\n\n    // Select the entire line if line select mode is active.\n    if (this._activeSelectionMode === SelectionMode.LINE) {\n      if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n        this._model.selectionEnd[0] = 0;\n      } else {\n        this._model.selectionEnd[0] = this._bufferService.cols;\n      }\n    } else if (this._activeSelectionMode === SelectionMode.WORD) {\n      this._selectToWordAt(this._model.selectionEnd);\n    }\n\n    // Determine the amount of scrolling that will happen.\n    this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n\n    // If the cursor was above or below the viewport, make sure it's at the\n    // start or end of the viewport respectively. This should only happen when\n    // NOT in column select mode.\n    if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n      if (this._dragScrollAmount > 0) {\n        this._model.selectionEnd[0] = this._bufferService.cols;\n      } else if (this._dragScrollAmount < 0) {\n        this._model.selectionEnd[0] = 0;\n      }\n    }\n\n    // If the character is a wide character include the cell to the right in the\n    // selection. Note that selections at the very end of the line will never\n    // have a character.\n    const buffer = this._bufferService.buffer;\n    if (this._model.selectionEnd[1] < buffer.lines.length) {\n      const line = buffer.lines.get(this._model.selectionEnd[1]);\n      if (line && line.hasWidth(this._model.selectionEnd[0]) === 0) {\n        this._model.selectionEnd[0]++;\n      }\n    }\n\n    // Only draw here if the selection changes.\n    if (!previousSelectionEnd ||\n      previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n      previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n      this.refresh(true);\n    }\n  }\n\n  /**\n   * The callback that occurs every DRAG_SCROLL_INTERVAL ms that does the\n   * scrolling of the viewport.\n   */\n  private _dragScroll(): void {\n    if (!this._model.selectionEnd || !this._model.selectionStart) {\n      return;\n    }\n    if (this._dragScrollAmount) {\n      this._onRequestScrollLines.fire({ amount: this._dragScrollAmount, suppressScrollEvent: false });\n      // Re-evaluate selection\n      // If the cursor was above or below the viewport, make sure it's at the\n      // start or end of the viewport respectively. This should only happen when\n      // NOT in column select mode.\n      const buffer = this._bufferService.buffer;\n      if (this._dragScrollAmount > 0) {\n        if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n          this._model.selectionEnd[0] = this._bufferService.cols;\n        }\n        this._model.selectionEnd[1] = Math.min(buffer.ydisp + this._bufferService.rows, buffer.lines.length - 1);\n      } else {\n        if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n          this._model.selectionEnd[0] = 0;\n        }\n        this._model.selectionEnd[1] = buffer.ydisp;\n      }\n      this.refresh();\n    }\n  }\n\n  /**\n   * Handles the mouseup event, removing the mousedown listeners.\n   * @param event The mouseup event.\n   */\n  private _onMouseUp(event: MouseEvent): void {\n    const timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n\n    this._removeMouseDownListeners();\n\n    if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME && event.altKey && this._optionsService.getOption('altClickMovesCursor')) {\n      if (this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {\n        const coordinates = this._mouseService.getCoords(\n          event,\n          this._element,\n          this._bufferService.cols,\n          this._bufferService.rows,\n          false\n        );\n        if (coordinates && coordinates[0] !== undefined && coordinates[1] !== undefined) {\n          const sequence = moveToCellSequence(coordinates[0] - 1, coordinates[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);\n          this._coreService.triggerDataEvent(sequence, true);\n        }\n      }\n    } else {\n      this._fireEventIfSelectionChanged();\n    }\n  }\n\n  private _fireEventIfSelectionChanged(): void {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    const hasSelection = !!start && !!end && (start[0] !== end[0] || start[1] !== end[1]);\n\n    if (!hasSelection) {\n      if (this._oldHasSelection) {\n        this._fireOnSelectionChange(start, end, hasSelection);\n      }\n      return;\n    }\n\n    // Sanity check, these should not be undefined as there is a selection\n    if (!start || !end) {\n      return;\n    }\n\n    if (!this._oldSelectionStart || !this._oldSelectionEnd || (\n      start[0] !== this._oldSelectionStart[0] || start[1] !== this._oldSelectionStart[1] ||\n      end[0] !== this._oldSelectionEnd[0] || end[1] !== this._oldSelectionEnd[1])) {\n\n      this._fireOnSelectionChange(start, end, hasSelection);\n    }\n  }\n\n  private _fireOnSelectionChange(start: [number, number] | undefined, end: [number, number] | undefined, hasSelection: boolean): void {\n    this._oldSelectionStart = start;\n    this._oldSelectionEnd = end;\n    this._oldHasSelection = hasSelection;\n    this._onSelectionChange.fire();\n  }\n\n  private _onBufferActivate(e: {activeBuffer: IBuffer, inactiveBuffer: IBuffer}): void {\n    this.clearSelection();\n    // Only adjust the selection on trim, shiftElements is rarely used (only in\n    // reverseIndex) and delete in a splice is only ever used when the same\n    // number of elements was just added. Given this is could actually be\n    // beneficial to leave the selection as is for these cases.\n    this._trimListener.dispose();\n    this._trimListener = e.activeBuffer.lines.onTrim(amount => this._onTrim(amount));\n  }\n\n  /**\n   * Converts a viewport column to the character index on the buffer line, the\n   * latter takes into account wide characters.\n   * @param coords The coordinates to find the 2 index for.\n   */\n  private _convertViewportColToCharacterIndex(bufferLine: IBufferLine, coords: [number, number]): number {\n    let charIndex = coords[0];\n    for (let i = 0; coords[0] >= i; i++) {\n      const length = bufferLine.loadCell(i, this._workCell).getChars().length;\n      if (this._workCell.getWidth() === 0) {\n        // Wide characters aren't included in the line string so decrement the\n        // index so the index is back on the wide character.\n        charIndex--;\n      } else if (length > 1 && coords[0] !== i) {\n        // Emojis take up multiple characters, so adjust accordingly. For these\n        // we don't want ot include the character at the column as we're\n        // returning the start index in the string, not the end index.\n        charIndex += length - 1;\n      }\n    }\n    return charIndex;\n  }\n\n  public setSelection(col: number, row: number, length: number): void {\n    this._model.clearSelection();\n    this._removeMouseDownListeners();\n    this._model.selectionStart = [col, row];\n    this._model.selectionStartLength = length;\n    this.refresh();\n  }\n\n  public rightClickSelect(ev: MouseEvent): void {\n    if (!this._isClickInSelection(ev)) {\n      if (this._selectWordAtCursor(ev, false)) {\n        this.refresh(true);\n      }\n      this._fireEventIfSelectionChanged();\n    }\n  }\n\n  /**\n   * Gets positional information for the word at the coordinated specified.\n   * @param coords The coordinates to get the word at.\n   */\n  private _getWordAt(coords: [number, number], allowWhitespaceOnlySelection: boolean, followWrappedLinesAbove: boolean = true, followWrappedLinesBelow: boolean = true): IWordPosition | undefined {\n    // Ensure coords are within viewport (eg. not within scroll bar)\n    if (coords[0] >= this._bufferService.cols) {\n      return undefined;\n    }\n\n    const buffer = this._bufferService.buffer;\n    const bufferLine = buffer.lines.get(coords[1]);\n    if (!bufferLine) {\n      return undefined;\n    }\n\n    const line = buffer.translateBufferLineToString(coords[1], false);\n\n    // Get actual index, taking into consideration wide characters\n    let startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n    let endIndex = startIndex;\n\n    // Record offset to be used later\n    const charOffset = coords[0] - startIndex;\n    let leftWideCharCount = 0;\n    let rightWideCharCount = 0;\n    let leftLongCharOffset = 0;\n    let rightLongCharOffset = 0;\n\n    if (line.charAt(startIndex) === ' ') {\n      // Expand until non-whitespace is hit\n      while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n        startIndex--;\n      }\n      while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n        endIndex++;\n      }\n    } else {\n      // Expand until whitespace is hit. This algorithm works by scanning left\n      // and right from the starting position, keeping both the index format\n      // (line) and the column format (bufferLine) in sync. When a wide\n      // character is hit, it is recorded and the column index is adjusted.\n      let startCol = coords[0];\n      let endCol = coords[0];\n\n      // Consider the initial position, skip it and increment the wide char\n      // variable\n      if (bufferLine.getWidth(startCol) === 0) {\n        leftWideCharCount++;\n        startCol--;\n      }\n      if (bufferLine.getWidth(endCol) === 2) {\n        rightWideCharCount++;\n        endCol++;\n      }\n\n      // Adjust the end index for characters whose length are > 1 (emojis)\n      const length = bufferLine.getString(endCol).length;\n      if (length > 1) {\n        rightLongCharOffset += length - 1;\n        endIndex += length - 1;\n      }\n\n      // Expand the string in both directions until a space is hit\n      while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n        bufferLine.loadCell(startCol - 1, this._workCell);\n        const length = this._workCell.getChars().length;\n        if (this._workCell.getWidth() === 0) {\n          // If the next character is a wide char, record it and skip the column\n          leftWideCharCount++;\n          startCol--;\n        } else if (length > 1) {\n          // If the next character's string is longer than 1 char (eg. emoji),\n          // adjust the index\n          leftLongCharOffset += length - 1;\n          startIndex -= length - 1;\n        }\n        startIndex--;\n        startCol--;\n      }\n      while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n        bufferLine.loadCell(endCol + 1, this._workCell);\n        const length = this._workCell.getChars().length;\n        if (this._workCell.getWidth() === 2) {\n          // If the next character is a wide char, record it and skip the column\n          rightWideCharCount++;\n          endCol++;\n        } else if (length > 1) {\n          // If the next character's string is longer than 1 char (eg. emoji),\n          // adjust the index\n          rightLongCharOffset += length - 1;\n          endIndex += length - 1;\n        }\n        endIndex++;\n        endCol++;\n      }\n    }\n\n    // Incremenet the end index so it is at the start of the next character\n    endIndex++;\n\n    // Calculate the start _column_, converting the the string indexes back to\n    // column coordinates.\n    let start =\n        startIndex // The index of the selection's start char in the line string\n        + charOffset // The difference between the initial char's column and index\n        - leftWideCharCount // The number of wide chars left of the initial char\n        + leftLongCharOffset; // The number of additional chars left of the initial char added by columns with strings longer than 1 (emojis)\n\n    // Calculate the length in _columns_, converting the the string indexes back\n    // to column coordinates.\n    let length = Math.min(this._bufferService.cols, // Disallow lengths larger than the terminal cols\n      endIndex // The index of the selection's end char in the line string\n      - startIndex // The index of the selection's start char in the line string\n      + leftWideCharCount // The number of wide chars left of the initial char\n      + rightWideCharCount // The number of wide chars right of the initial char (inclusive)\n      - leftLongCharOffset // The number of additional chars left of the initial char added by columns with strings longer than 1 (emojis)\n      - rightLongCharOffset); // The number of additional chars right of the initial char (inclusive) added by columns with strings longer than 1 (emojis)\n\n    if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n      return undefined;\n    }\n\n    // Recurse upwards if the line is wrapped and the word wraps to the above line\n    if (followWrappedLinesAbove) {\n      if (start === 0 && bufferLine.getCodePoint(0) !== 32 /* ' ' */) {\n        const previousBufferLine = buffer.lines.get(coords[1] - 1);\n        if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._bufferService.cols - 1) !== 32 /* ' ' */) {\n          const previousLineWordPosition = this._getWordAt([this._bufferService.cols - 1, coords[1] - 1], false, true, false);\n          if (previousLineWordPosition) {\n            const offset = this._bufferService.cols - previousLineWordPosition.start;\n            start -= offset;\n            length += offset;\n          }\n        }\n      }\n    }\n\n    // Recurse downwards if the line is wrapped and the word wraps to the next line\n    if (followWrappedLinesBelow) {\n      if (start + length === this._bufferService.cols && bufferLine.getCodePoint(this._bufferService.cols - 1) !== 32 /* ' ' */) {\n        const nextBufferLine = buffer.lines.get(coords[1] + 1);\n        if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32 /* ' ' */) {\n          const nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n          if (nextLineWordPosition) {\n            length += nextLineWordPosition.length;\n          }\n        }\n      }\n    }\n\n    return { start, length };\n  }\n\n  /**\n   * Selects the word at the coordinates specified.\n   * @param coords The coordinates to get the word at.\n   * @param allowWhitespaceOnlySelection If whitespace should be selected\n   */\n  protected _selectWordAt(coords: [number, number], allowWhitespaceOnlySelection: boolean): void {\n    const wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n    if (wordPosition) {\n      // Adjust negative start value\n      while (wordPosition.start < 0) {\n        wordPosition.start += this._bufferService.cols;\n        coords[1]--;\n      }\n      this._model.selectionStart = [wordPosition.start, coords[1]];\n      this._model.selectionStartLength = wordPosition.length;\n    }\n  }\n\n  /**\n   * Sets the selection end to the word at the coordinated specified.\n   * @param coords The coordinates to get the word at.\n   */\n  private _selectToWordAt(coords: [number, number]): void {\n    const wordPosition = this._getWordAt(coords, true);\n    if (wordPosition) {\n      let endRow = coords[1];\n\n      // Adjust negative start value\n      while (wordPosition.start < 0) {\n        wordPosition.start += this._bufferService.cols;\n        endRow--;\n      }\n\n      // Adjust wrapped length value, this only needs to happen when values are reversed as in that\n      // case we're interested in the start of the word, not the end\n      if (!this._model.areSelectionValuesReversed()) {\n        while (wordPosition.start + wordPosition.length > this._bufferService.cols) {\n          wordPosition.length -= this._bufferService.cols;\n          endRow++;\n        }\n      }\n\n      this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n    }\n  }\n\n  /**\n   * Gets whether the character is considered a word separator by the select\n   * word logic.\n   * @param char The character to check.\n   */\n  private _isCharWordSeparator(cell: CellData): boolean {\n    // Zero width characters are never separators as they are always to the\n    // right of wide characters\n    if (cell.getWidth() === 0) {\n      return false;\n    }\n    return this._optionsService.options.wordSeparator.indexOf(cell.getChars()) >= 0;\n  }\n\n  /**\n   * Selects the line specified.\n   * @param line The line index.\n   */\n  protected _selectLineAt(line: number): void {\n    const wrappedRange = this._bufferService.buffer.getWrappedRangeForLine(line);\n    this._model.selectionStart = [0, wrappedRange.first];\n    this._model.selectionEnd = [this._bufferService.cols, wrappedRange.last];\n    this._model.selectionStartLength = 0;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IEvent } from 'common/EventEmitter';\nimport { IRenderDimensions, IRenderer } from 'browser/renderer/Types';\nimport { IColorSet } from 'browser/Types';\nimport { ISelectionRedrawRequestEvent as ISelectionRequestRedrawEvent, ISelectionRequestScrollLinesEvent } from 'browser/selection/Types';\nimport { createDecorator } from 'common/services/ServiceRegistry';\nimport { IDisposable } from 'common/Types';\n\nexport const ICharSizeService = createDecorator<ICharSizeService>('CharSizeService');\nexport interface ICharSizeService {\n  serviceBrand: undefined;\n\n  readonly width: number;\n  readonly height: number;\n  readonly hasValidSize: boolean;\n\n  readonly onCharSizeChange: IEvent<void>;\n\n  measure(): void;\n}\n\nexport const ICoreBrowserService = createDecorator<ICoreBrowserService>('CoreBrowserService');\nexport interface ICoreBrowserService {\n  serviceBrand: undefined;\n\n  readonly isFocused: boolean;\n}\n\nexport const IMouseService = createDecorator<IMouseService>('MouseService');\nexport interface IMouseService {\n  serviceBrand: undefined;\n\n  getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, isSelection?: boolean): [number, number] | undefined;\n  getRawByteCoords(event: MouseEvent, element: HTMLElement, colCount: number, rowCount: number): { x: number, y: number } | undefined;\n}\n\nexport const IRenderService = createDecorator<IRenderService>('RenderService');\nexport interface IRenderService extends IDisposable {\n  serviceBrand: undefined;\n\n  onDimensionsChange: IEvent<IRenderDimensions>;\n  /**\n   * Fires when buffer changes are rendered. This does not fire when only cursor\n   * or selections are rendered.\n   */\n  onRenderedBufferChange: IEvent<{ start: number, end: number }>;\n  onRefreshRequest: IEvent<{ start: number, end: number }>;\n\n  dimensions: IRenderDimensions;\n\n  refreshRows(start: number, end: number): void;\n  resize(cols: number, rows: number): void;\n  changeOptions(): void;\n  setRenderer(renderer: IRenderer): void;\n  setColors(colors: IColorSet): void;\n  onDevicePixelRatioChange(): void;\n  onResize(cols: number, rows: number): void;\n  // TODO: Is this useful when we have onResize?\n  onCharSizeChanged(): void;\n  onBlur(): void;\n  onFocus(): void;\n  onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void;\n  onCursorMove(): void;\n  clear(): void;\n}\n\nexport const ISelectionService = createDecorator<ISelectionService>('SelectionService');\nexport interface ISelectionService {\n  serviceBrand: undefined;\n\n  readonly selectionText: string;\n  readonly hasSelection: boolean;\n  readonly selectionStart: [number, number] | undefined;\n  readonly selectionEnd: [number, number] | undefined;\n\n  readonly onLinuxMouseSelection: IEvent<string>;\n  readonly onRequestRedraw: IEvent<ISelectionRequestRedrawEvent>;\n  readonly onRequestScrollLines: IEvent<ISelectionRequestScrollLinesEvent>;\n  readonly onSelectionChange: IEvent<void>;\n\n  disable(): void;\n  enable(): void;\n  reset(): void;\n  setSelection(row: number, col: number, length: number): void;\n  selectAll(): void;\n  selectLines(start: number, end: number): void;\n  clearSelection(): void;\n  rightClickSelect(event: MouseEvent): void;\n  shouldColumnSelect(event: KeyboardEvent | MouseEvent): boolean;\n  shouldForceSelection(event: MouseEvent): boolean;\n  refresh(isLinuxMouseSelection?: boolean): void;\n  onMouseDown(event: MouseEvent): void;\n}\n\nexport const ISoundService = createDecorator<ISoundService>('SoundService');\nexport interface ISoundService {\n  serviceBrand: undefined;\n\n  playBellSound(): void;\n}\n\n\nexport const ICharacterJoinerService = createDecorator<ICharacterJoinerService>('CharacterJoinerService');\nexport interface ICharacterJoinerService {\n  serviceBrand: undefined;\n\n  register(handler: (text: string) => [number, number][]): number;\n  deregister(joinerId: number): boolean;\n  getJoinedCharacters(row: number): [number, number][];\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService } from 'common/services/Services';\nimport { ISoundService } from 'browser/services/Services';\n\nexport class SoundService implements ISoundService {\n  public serviceBrand: undefined;\n\n  private static _audioContext: AudioContext;\n\n  public static get audioContext(): AudioContext | null {\n    if (!SoundService._audioContext) {\n      const audioContextCtor: typeof AudioContext = (<any>window).AudioContext || (<any>window).webkitAudioContext;\n      if (!audioContextCtor) {\n        console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n        return null;\n      }\n      SoundService._audioContext = new audioContextCtor();\n    }\n    return SoundService._audioContext;\n  }\n\n  constructor(\n    @IOptionsService private _optionsService: IOptionsService\n  ) {\n  }\n\n  public playBellSound(): void {\n    const ctx = SoundService.audioContext;\n    if (!ctx) {\n      return;\n    }\n    const bellAudioSource = ctx.createBufferSource();\n    ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)), (buffer) => {\n      bellAudioSource.buffer = buffer;\n      bellAudioSource.connect(ctx.destination);\n      bellAudioSource.start(0);\n    });\n  }\n\n  private _base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = window.atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n\n    for (let i = 0; i < len; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n\n    return bytes.buffer;\n  }\n\n  private _removeMimeType(dataURI: string): string {\n    // Split the input to get the mime-type and the data itself\n    const splitUri = dataURI.split(',');\n\n    // Return only the data\n    return splitUri[1];\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICircularList } from 'common/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\n\nexport interface IInsertEvent {\n  index: number;\n  amount: number;\n}\n\nexport interface IDeleteEvent {\n  index: number;\n  amount: number;\n}\n\n/**\n * Represents a circular list; a list with a maximum size that wraps around when push is called,\n * overriding values at the start of the list.\n */\nexport class CircularList<T> implements ICircularList<T> {\n  protected _array: (T | undefined)[];\n  private _startIndex: number;\n  private _length: number;\n\n  public onDeleteEmitter = new EventEmitter<IDeleteEvent>();\n  public get onDelete(): IEvent<IDeleteEvent> { return this.onDeleteEmitter.event; }\n  public onInsertEmitter = new EventEmitter<IInsertEvent>();\n  public get onInsert(): IEvent<IInsertEvent> { return this.onInsertEmitter.event; }\n  public onTrimEmitter = new EventEmitter<number>();\n  public get onTrim(): IEvent<number> { return this.onTrimEmitter.event; }\n\n  constructor(\n    private _maxLength: number\n  ) {\n    this._array = new Array<T>(this._maxLength);\n    this._startIndex = 0;\n    this._length = 0;\n  }\n\n  public get maxLength(): number {\n    return this._maxLength;\n  }\n\n  public set maxLength(newMaxLength: number) {\n    // There was no change in maxLength, return early.\n    if (this._maxLength === newMaxLength) {\n      return;\n    }\n\n    // Reconstruct array, starting at index 0. Only transfer values from the\n    // indexes 0 to length.\n    const newArray = new Array<T | undefined>(newMaxLength);\n    for (let i = 0; i < Math.min(newMaxLength, this.length); i++) {\n      newArray[i] = this._array[this._getCyclicIndex(i)];\n    }\n    this._array = newArray;\n    this._maxLength = newMaxLength;\n    this._startIndex = 0;\n  }\n\n  public get length(): number {\n    return this._length;\n  }\n\n  public set length(newLength: number) {\n    if (newLength > this._length) {\n      for (let i = this._length; i < newLength; i++) {\n        this._array[i] = undefined;\n      }\n    }\n    this._length = newLength;\n  }\n\n  /**\n   * Gets the value at an index.\n   *\n   * Note that for performance reasons there is no bounds checking here, the index reference is\n   * circular so this should always return a value and never throw.\n   * @param index The index of the value to get.\n   * @return The value corresponding to the index.\n   */\n  public get(index: number): T | undefined {\n    return this._array[this._getCyclicIndex(index)];\n  }\n\n  /**\n   * Sets the value at an index.\n   *\n   * Note that for performance reasons there is no bounds checking here, the index reference is\n   * circular so this should always return a value and never throw.\n   * @param index The index to set.\n   * @param value The value to set.\n   */\n  public set(index: number, value: T | undefined): void {\n    this._array[this._getCyclicIndex(index)] = value;\n  }\n\n  /**\n   * Pushes a new value onto the list, wrapping around to the start of the array, overriding index 0\n   * if the maximum length is reached.\n   * @param value The value to push onto the list.\n   */\n  public push(value: T): void {\n    this._array[this._getCyclicIndex(this._length)] = value;\n    if (this._length === this._maxLength) {\n      this._startIndex = ++this._startIndex % this._maxLength;\n      this.onTrimEmitter.fire(1);\n    } else {\n      this._length++;\n    }\n  }\n\n  /**\n   * Advance ringbuffer index and return current element for recycling.\n   * Note: The buffer must be full for this method to work.\n   * @throws When the buffer is not full.\n   */\n  public recycle(): T {\n    if (this._length !== this._maxLength) {\n      throw new Error('Can only recycle when the buffer is full');\n    }\n    this._startIndex = ++this._startIndex % this._maxLength;\n    this.onTrimEmitter.fire(1);\n    return this._array[this._getCyclicIndex(this._length - 1)]!;\n  }\n\n  /**\n   * Ringbuffer is at max length.\n   */\n  public get isFull(): boolean {\n    return this._length === this._maxLength;\n  }\n\n  /**\n   * Removes and returns the last value on the list.\n   * @return The popped value.\n   */\n  public pop(): T | undefined {\n    return this._array[this._getCyclicIndex(this._length-- - 1)];\n  }\n\n  /**\n   * Deletes and/or inserts items at a particular index (in that order). Unlike\n   * Array.prototype.splice, this operation does not return the deleted items as a new array in\n   * order to save creating a new array. Note that this operation may shift all values in the list\n   * in the worst case.\n   * @param start The index to delete and/or insert.\n   * @param deleteCount The number of elements to delete.\n   * @param items The items to insert.\n   */\n  public splice(start: number, deleteCount: number, ...items: T[]): void {\n    // Delete items\n    if (deleteCount) {\n      for (let i = start; i < this._length - deleteCount; i++) {\n        this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n      }\n      this._length -= deleteCount;\n      this.onDeleteEmitter.fire({ index: start, amount: deleteCount });\n    }\n\n    // Add items\n    for (let i = this._length - 1; i >= start; i--) {\n      this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n    }\n    for (let i = 0; i < items.length; i++) {\n      this._array[this._getCyclicIndex(start + i)] = items[i];\n    }\n    if (items.length) {\n      this.onInsertEmitter.fire({ index: start, amount: items.length });\n    }\n\n    // Adjust length as needed\n    if (this._length + items.length > this._maxLength) {\n      const countToTrim = (this._length + items.length) - this._maxLength;\n      this._startIndex += countToTrim;\n      this._length = this._maxLength;\n      this.onTrimEmitter.fire(countToTrim);\n    } else {\n      this._length += items.length;\n    }\n  }\n\n  /**\n   * Trims a number of items from the start of the list.\n   * @param count The number of items to remove.\n   */\n  public trimStart(count: number): void {\n    if (count > this._length) {\n      count = this._length;\n    }\n    this._startIndex += count;\n    this._length -= count;\n    this.onTrimEmitter.fire(count);\n  }\n\n  public shiftElements(start: number, count: number, offset: number): void {\n    if (count <= 0) {\n      return;\n    }\n    if (start < 0 || start >= this._length) {\n      throw new Error('start argument out of range');\n    }\n    if (start + offset < 0) {\n      throw new Error('Cannot shift elements in list beyond index 0');\n    }\n\n    if (offset > 0) {\n      for (let i = count - 1; i >= 0; i--) {\n        this.set(start + i + offset, this.get(start + i));\n      }\n      const expandListBy = (start + count + offset) - this._length;\n      if (expandListBy > 0) {\n        this._length += expandListBy;\n        while (this._length > this._maxLength) {\n          this._length--;\n          this._startIndex++;\n          this.onTrimEmitter.fire(1);\n        }\n      }\n    } else {\n      for (let i = 0; i < count; i++) {\n        this.set(start + i + offset, this.get(start + i));\n      }\n    }\n  }\n\n  /**\n   * Gets the cyclic index for the specified regular index. The cyclic index can then be used on the\n   * backing array to get the element associated with the regular index.\n   * @param index The regular index.\n   * @returns The cyclic index.\n   */\n  private _getCyclicIndex(index: number): number {\n    return (this._startIndex + index) % this._maxLength;\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/*\n * A simple utility for cloning values\n */\nexport function clone<T>(val: T, depth: number = 5): T {\n  if (typeof val !== 'object') {\n    return val;\n  }\n\n  // If we're cloning an array, use an array as the base, otherwise use an object\n  const clonedObject: any = Array.isArray(val) ? [] : {};\n\n  for (const key in val) {\n    // Recursively clone eack item unless we're at the maximum depth\n    clonedObject[key] = depth <= 1 ? val[key] : (val[key] ? clone(val[key], depth - 1) : val[key]);\n  }\n\n  return clonedObject as T;\n}\n","/**\n * Copyright (c) 2014-2020 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n *\n * Terminal Emulation References:\n *   http://vt100.net/\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.txt\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.html\n *   http://invisible-island.net/vttest/\n *   http://www.inwap.com/pdp10/ansicode.txt\n *   http://linux.die.net/man/4/console_codes\n *   http://linux.die.net/man/7/urxvt\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { IInstantiationService, IOptionsService, IBufferService, ILogService, ICharsetService, ICoreService, ICoreMouseService, IUnicodeService, IDirtyRowService, LogLevelEnum } from 'common/services/Services';\nimport { InstantiationService } from 'common/services/InstantiationService';\nimport { LogService } from 'common/services/LogService';\nimport { BufferService, MINIMUM_COLS, MINIMUM_ROWS } from 'common/services/BufferService';\nimport { OptionsService } from 'common/services/OptionsService';\nimport { ITerminalOptions, IDisposable, IBufferLine, IAttributeData, ICoreTerminal, IKeyboardEvent, IScrollEvent, ScrollSource } from 'common/Types';\nimport { CoreService } from 'common/services/CoreService';\nimport { EventEmitter, IEvent, forwardEvent } from 'common/EventEmitter';\nimport { CoreMouseService } from 'common/services/CoreMouseService';\nimport { DirtyRowService } from 'common/services/DirtyRowService';\nimport { UnicodeService } from 'common/services/UnicodeService';\nimport { CharsetService } from 'common/services/CharsetService';\nimport { updateWindowsModeWrappedState } from 'common/WindowsMode';\nimport { IFunctionIdentifier, IParams } from 'common/parser/Types';\nimport { IBufferSet } from 'common/buffer/Types';\nimport { InputHandler } from 'common/InputHandler';\nimport { WriteBuffer } from 'common/input/WriteBuffer';\n\n// Only trigger this warning a single time per session\nlet hasWriteSyncWarnHappened = false;\n\nexport abstract class CoreTerminal extends Disposable implements ICoreTerminal {\n  protected readonly _instantiationService: IInstantiationService;\n  protected readonly _bufferService: IBufferService;\n  protected readonly _logService: ILogService;\n  protected readonly _coreService: ICoreService;\n  protected readonly _charsetService: ICharsetService;\n  protected readonly _coreMouseService: ICoreMouseService;\n  protected readonly _dirtyRowService: IDirtyRowService;\n\n  public readonly unicodeService: IUnicodeService;\n  public readonly optionsService: IOptionsService;\n\n  protected _inputHandler: InputHandler;\n  private _writeBuffer: WriteBuffer;\n  private _windowsMode: IDisposable | undefined;\n\n  private _onBinary = new EventEmitter<string>();\n  public get onBinary(): IEvent<string> { return this._onBinary.event; }\n  private _onData = new EventEmitter<string>();\n  public get onData(): IEvent<string> { return this._onData.event; }\n  protected _onLineFeed = new EventEmitter<void>();\n  public get onLineFeed(): IEvent<void> { return this._onLineFeed.event; }\n  private _onResize = new EventEmitter<{ cols: number, rows: number }>();\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._onResize.event; }\n  protected _onScroll = new EventEmitter<IScrollEvent, void>();\n  /**\n   * Internally we track the source of the scroll but this is meaningless outside the library so\n   * it's filtered out.\n   */\n  protected _onScrollApi?: EventEmitter<number, void>;\n  public get onScroll(): IEvent<number, void> {\n    if (!this._onScrollApi) {\n      this._onScrollApi = new EventEmitter<number, void>();\n      this.register(this._onScroll.event(ev => {\n        this._onScrollApi?.fire(ev.position);\n      }));\n    }\n    return this._onScrollApi.event;\n  }\n\n  public get cols(): number { return this._bufferService.cols; }\n  public get rows(): number { return this._bufferService.rows; }\n  public get buffers(): IBufferSet { return this._bufferService.buffers; }\n\n  constructor(\n    options: ITerminalOptions\n  ) {\n    super();\n\n    // Setup and initialize services\n    this._instantiationService = new InstantiationService();\n    this.optionsService = new OptionsService(options);\n    this._instantiationService.setService(IOptionsService, this.optionsService);\n    this._bufferService = this.register(this._instantiationService.createInstance(BufferService));\n    this._instantiationService.setService(IBufferService, this._bufferService);\n    this._logService = this._instantiationService.createInstance(LogService);\n    this._instantiationService.setService(ILogService, this._logService);\n    this._coreService = this.register(this._instantiationService.createInstance(CoreService, () => this.scrollToBottom()));\n    this._instantiationService.setService(ICoreService, this._coreService);\n    this._coreMouseService = this._instantiationService.createInstance(CoreMouseService);\n    this._instantiationService.setService(ICoreMouseService, this._coreMouseService);\n    this._dirtyRowService = this._instantiationService.createInstance(DirtyRowService);\n    this._instantiationService.setService(IDirtyRowService, this._dirtyRowService);\n    this.unicodeService = this._instantiationService.createInstance(UnicodeService);\n    this._instantiationService.setService(IUnicodeService, this.unicodeService);\n    this._charsetService = this._instantiationService.createInstance(CharsetService);\n    this._instantiationService.setService(ICharsetService, this._charsetService);\n\n    // Register input handler and handle/forward events\n    this._inputHandler = new InputHandler(this._bufferService, this._charsetService, this._coreService, this._dirtyRowService, this._logService, this.optionsService, this._coreMouseService, this.unicodeService);\n    this.register(forwardEvent(this._inputHandler.onLineFeed, this._onLineFeed));\n    this.register(this._inputHandler);\n\n    // Setup listeners\n    this.register(forwardEvent(this._bufferService.onResize, this._onResize));\n    this.register(forwardEvent(this._coreService.onData, this._onData));\n    this.register(forwardEvent(this._coreService.onBinary, this._onBinary));\n    this.register(this.optionsService.onOptionChange(key => this._updateOptions(key)));\n    this.register(this._bufferService.onScroll(event => {\n      this._onScroll.fire({ position: this._bufferService.buffer.ydisp, source: ScrollSource.TERMINAL });\n      this._dirtyRowService.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);\n    }));\n\n    // Setup WriteBuffer\n    this._writeBuffer = new WriteBuffer((data, promiseResult) => this._inputHandler.parse(data, promiseResult));\n  }\n\n  public dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._windowsMode?.dispose();\n    this._windowsMode = undefined;\n  }\n\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    this._writeBuffer.write(data, callback);\n  }\n\n  /**\n   * Write data to terminal synchonously.\n   *\n   * This method is unreliable with async parser handlers, thus should not\n   * be used anymore. If you need blocking semantics on data input consider\n   * `write` with a callback instead.\n   *\n   * @deprecated Unreliable, will be removed soon.\n   */\n  public writeSync(data: string | Uint8Array, maxSubsequentCalls?: number): void {\n    if (this._logService.logLevel <= LogLevelEnum.WARN && !hasWriteSyncWarnHappened) {\n      this._logService.warn('writeSync is unreliable and will be removed soon.');\n      hasWriteSyncWarnHappened = true;\n    }\n    this._writeBuffer.writeSync(data, maxSubsequentCalls);\n  }\n\n  public resize(x: number, y: number): void {\n    if (isNaN(x) || isNaN(y)) {\n      return;\n    }\n\n    x = Math.max(x, MINIMUM_COLS);\n    y = Math.max(y, MINIMUM_ROWS);\n\n    this._bufferService.resize(x, y);\n  }\n\n  /**\n   * Scroll the terminal down 1 row, creating a blank line.\n   * @param isWrapped Whether the new line is wrapped from the previous line.\n   */\n  public scroll(eraseAttr: IAttributeData, isWrapped: boolean = false): void {\n    this._bufferService.scroll(eraseAttr, isWrapped);\n  }\n\n  /**\n   * Scroll the display of the terminal\n   * @param disp The number of lines to scroll down (negative scroll up).\n   * @param suppressScrollEvent Don't emit the scroll event as scrollLines. This is used\n   * to avoid unwanted events being handled by the viewport when the event was triggered from the\n   * viewport originally.\n   */\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void {\n    this._bufferService.scrollLines(disp, suppressScrollEvent, source);\n  }\n\n  /**\n   * Scroll the display of the terminal by a number of pages.\n   * @param pageCount The number of pages to scroll (negative scrolls up).\n   */\n  public scrollPages(pageCount: number): void {\n    this._bufferService.scrollPages(pageCount);\n  }\n\n  /**\n   * Scrolls the display of the terminal to the top.\n   */\n  public scrollToTop(): void {\n    this._bufferService.scrollToTop();\n  }\n\n  /**\n   * Scrolls the display of the terminal to the bottom.\n   */\n  public scrollToBottom(): void {\n    this._bufferService.scrollToBottom();\n  }\n\n  public scrollToLine(line: number): void {\n    this._bufferService.scrollToLine(line);\n  }\n\n  /** Add handler for ESC escape sequence. See xterm.d.ts for details. */\n  public registerEscHandler(id: IFunctionIdentifier, callback: () => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerEscHandler(id, callback);\n  }\n\n  /** Add handler for DCS escape sequence. See xterm.d.ts for details. */\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerDcsHandler(id, callback);\n  }\n\n  /** Add handler for CSI escape sequence. See xterm.d.ts for details. */\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerCsiHandler(id, callback);\n  }\n\n  /** Add handler for OSC escape sequence. See xterm.d.ts for details. */\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerOscHandler(ident, callback);\n  }\n\n  protected _setup(): void {\n    if (this.optionsService.options.windowsMode) {\n      this._enableWindowsMode();\n    }\n  }\n\n  public reset(): void {\n    this._inputHandler.reset();\n    this._bufferService.reset();\n    this._charsetService.reset();\n    this._coreService.reset();\n    this._coreMouseService.reset();\n  }\n\n  protected _updateOptions(key: string): void {\n    // TODO: These listeners should be owned by individual components\n    switch (key) {\n      case 'scrollback':\n        this.buffers.resize(this.cols, this.rows);\n        break;\n      case 'windowsMode':\n        if (this.optionsService.options.windowsMode) {\n          this._enableWindowsMode();\n        } else {\n          this._windowsMode?.dispose();\n          this._windowsMode = undefined;\n        }\n        break;\n    }\n  }\n\n  protected _enableWindowsMode(): void {\n    if (!this._windowsMode) {\n      const disposables: IDisposable[] = [];\n      disposables.push(this.onLineFeed(updateWindowsModeWrappedState.bind(null, this._bufferService)));\n      disposables.push(this.registerCsiHandler({ final: 'H' }, () => {\n        updateWindowsModeWrappedState(this._bufferService);\n        return false;\n      }));\n      this._windowsMode = {\n        dispose: () => {\n          for (const d of disposables) {\n            d.dispose();\n          }\n        }\n      };\n    }\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\ninterface IListener<T, U = void> {\n  (arg1: T, arg2: U): void;\n}\n\nexport interface IEvent<T, U = void> {\n  (listener: (arg1: T, arg2: U) => any): IDisposable;\n}\n\nexport interface IEventEmitter<T, U = void> {\n  event: IEvent<T, U>;\n  fire(arg1: T, arg2: U): void;\n  dispose(): void;\n}\n\nexport class EventEmitter<T, U = void> implements IEventEmitter<T, U> {\n  private _listeners: IListener<T, U>[] = [];\n  private _event?: IEvent<T, U>;\n  private _disposed: boolean = false;\n\n  public get event(): IEvent<T, U> {\n    if (!this._event) {\n      this._event = (listener: (arg1: T, arg2: U) => any) => {\n        this._listeners.push(listener);\n        const disposable = {\n          dispose: () => {\n            if (!this._disposed) {\n              for (let i = 0; i < this._listeners.length; i++) {\n                if (this._listeners[i] === listener) {\n                  this._listeners.splice(i, 1);\n                  return;\n                }\n              }\n            }\n          }\n        };\n        return disposable;\n      };\n    }\n    return this._event;\n  }\n\n  public fire(arg1: T, arg2: U): void {\n    const queue: IListener<T, U>[] = [];\n    for (let i = 0; i < this._listeners.length; i++) {\n      queue.push(this._listeners[i]);\n    }\n    for (let i = 0; i < queue.length; i++) {\n      queue[i].call(undefined, arg1, arg2);\n    }\n  }\n\n  public dispose(): void {\n    if (this._listeners) {\n      this._listeners.length = 0;\n    }\n    this._disposed = true;\n  }\n}\n\nexport function forwardEvent<T>(from: IEvent<T>, to: IEventEmitter<T>): IDisposable {\n  return from(e => to.fire(e));\n}\n","/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n */\n\nimport { IInputHandler, IAttributeData, IDisposable, IWindowOptions, IAnsiColorChangeEvent, IParseStack } from 'common/Types';\nimport { C0, C1 } from 'common/data/EscapeSequences';\nimport { CHARSETS, DEFAULT_CHARSET } from 'common/data/Charsets';\nimport { EscapeSequenceParser } from 'common/parser/EscapeSequenceParser';\nimport { Disposable } from 'common/Lifecycle';\nimport { concat } from 'common/TypedArrayUtils';\nimport { StringToUtf32, stringFromCodePoint, utf32ToString, Utf8ToUtf32 } from 'common/input/TextDecoder';\nimport { DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IParsingState, IDcsHandler, IEscapeSequenceParser, IParams, IFunctionIdentifier } from 'common/parser/Types';\nimport { NULL_CELL_CODE, NULL_CELL_WIDTH, Attributes, FgFlags, BgFlags, Content, UnderlineStyle } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { ICoreService, IBufferService, IOptionsService, ILogService, IDirtyRowService, ICoreMouseService, ICharsetService, IUnicodeService, LogLevelEnum } from 'common/services/Services';\nimport { OscHandler } from 'common/parser/OscParser';\nimport { DcsHandler } from 'common/parser/DcsParser';\n\n/**\n * Map collect to glevel. Used in `selectCharset`.\n */\nconst GLEVEL: {[key: string]: number} = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\n\n/**\n * VT commands done by the parser - FIXME: move this to the parser?\n */\n// @vt: #Y   ESC   CSI   \"Control Sequence Introducer\"   \"ESC [\"   \"Start of a CSI sequence.\"\n// @vt: #Y   ESC   OSC   \"Operating System Command\"      \"ESC ]\"   \"Start of an OSC sequence.\"\n// @vt: #Y   ESC   DCS   \"Device Control String\"         \"ESC P\"   \"Start of a DCS sequence.\"\n// @vt: #Y   ESC   ST    \"String Terminator\"             \"ESC \\\"   \"Terminator used for string type sequences.\"\n// @vt: #Y   ESC   PM    \"Privacy Message\"               \"ESC ^\"   \"Start of a privacy message.\"\n// @vt: #Y   ESC   APC   \"Application Program Command\"   \"ESC _\"   \"Start of an APC sequence.\"\n// @vt: #Y   C1    CSI   \"Control Sequence Introducer\"   \"\\x9B\"    \"Start of a CSI sequence.\"\n// @vt: #Y   C1    OSC   \"Operating System Command\"      \"\\x9D\"    \"Start of an OSC sequence.\"\n// @vt: #Y   C1    DCS   \"Device Control String\"         \"\\x90\"    \"Start of a DCS sequence.\"\n// @vt: #Y   C1    ST    \"String Terminator\"             \"\\x9C\"    \"Terminator used for string type sequences.\"\n// @vt: #Y   C1    PM    \"Privacy Message\"               \"\\x9E\"    \"Start of a privacy message.\"\n// @vt: #Y   C1    APC   \"Application Program Command\"   \"\\x9F\"    \"Start of an APC sequence.\"\n// @vt: #Y   C0    NUL   \"Null\"                          \"\\0, \\x00\"  \"NUL is ignored.\"\n// @vt: #Y   C0    ESC   \"Escape\"                        \"\\e, \\x1B\"  \"Start of a sequence. Cancels any other sequence.\"\n\n/**\n * Document common VT features here that are currently unsupported\n */\n// @vt: #N   DCS   SIXEL   \"SIXEL Graphics\"  \"DCS Ps ; Ps ; Ps ; q \tPt ST\"   \"Draw SIXEL image starting at cursor position.\"\n// @vt: #N   OSC    1   \"Set Icon Name\"  \"OSC 1 ; Pt BEL\"  \"Set icon name.\"\n\n/**\n * Max length of the UTF32 input buffer. Real memory consumption is 4 times higher.\n */\nconst MAX_PARSEBUFFER_LENGTH = 131072;\n\n/**\n * Limit length of title and icon name stacks.\n */\nconst STACK_LIMIT = 10;\n\n// map params to window option\nfunction paramToWindowOption(n: number, opts: IWindowOptions): boolean {\n  if (n > 24) {\n    return opts.setWinLines || false;\n  }\n  switch (n) {\n    case 1: return !!opts.restoreWin;\n    case 2: return !!opts.minimizeWin;\n    case 3: return !!opts.setWinPosition;\n    case 4: return !!opts.setWinSizePixels;\n    case 5: return !!opts.raiseWin;\n    case 6: return !!opts.lowerWin;\n    case 7: return !!opts.refreshWin;\n    case 8: return !!opts.setWinSizeChars;\n    case 9: return !!opts.maximizeWin;\n    case 10: return !!opts.fullscreenWin;\n    case 11: return !!opts.getWinState;\n    case 13: return !!opts.getWinPosition;\n    case 14: return !!opts.getWinSizePixels;\n    case 15: return !!opts.getScreenSizePixels;\n    case 16: return !!opts.getCellSizePixels;\n    case 18: return !!opts.getWinSizeChars;\n    case 19: return !!opts.getScreenSizeChars;\n    case 20: return !!opts.getIconTitle;\n    case 21: return !!opts.getWinTitle;\n    case 22: return !!opts.pushTitle;\n    case 23: return !!opts.popTitle;\n    case 24: return !!opts.setWinLines;\n  }\n  return false;\n}\n\nexport enum WindowsOptionsReportType {\n  GET_WIN_SIZE_PIXELS = 0,\n  GET_CELL_SIZE_PIXELS = 1\n}\n\n// create a warning log if an async handler takes longer than the limit (in ms)\nconst SLOW_ASYNC_LIMIT = 5000;\n\n/**\n * DCS subparser implementations\n */\n\n/**\n * DCS $ q Pt ST\n *   DECRQSS (https://vt100.net/docs/vt510-rm/DECRQSS.html)\n *   Request Status String (DECRQSS), VT420 and up.\n *   Response: DECRPSS (https://vt100.net/docs/vt510-rm/DECRPSS.html)\n *\n * @vt: #P[See limited support below.]  DCS   DECRQSS   \"Request Selection or Setting\"  \"DCS $ q Pt ST\"   \"Request several terminal settings.\"\n * Response is in the form `ESC P 1 $ r Pt ST` for valid requests, where `Pt` contains the corresponding CSI string,\n * `ESC P 0 ST` for invalid requests.\n *\n * Supported requests and responses:\n *\n * | Type                             | Request           | Response (`Pt`)                                       |\n * | -------------------------------- | ----------------- | ----------------------------------------------------- |\n * | Graphic Rendition (SGR)          | `DCS $ q m ST`    | always reporting `0m` (currently broken)              |\n * | Top and Bottom Margins (DECSTBM) | `DCS $ q r ST`    | `Ps ; Ps r`                                           |\n * | Cursor Style (DECSCUSR)          | `DCS $ q SP q ST` | `Ps SP q`                                             |\n * | Protection Attribute (DECSCA)    | `DCS $ q \" q ST`  | always reporting `0 \" q` (DECSCA is unsupported)      |\n * | Conformance Level (DECSCL)       | `DCS $ q \" p ST`  | always reporting `61 ; 1 \" p` (DECSCL is unsupported) |\n *\n *\n * TODO:\n * - fix SGR report\n * - either implement DECSCA or remove the report\n * - either check which conformance is better suited or remove the report completely\n *   --> we are currently a mixture of all up to VT400 but dont follow anyone strictly\n */\nclass DECRQSS implements IDcsHandler {\n  private _data: Uint32Array = new Uint32Array(0);\n\n  constructor(\n    private _bufferService: IBufferService,\n    private _coreService: ICoreService,\n    private _logService: ILogService,\n    private _optionsService: IOptionsService\n  ) { }\n\n  public hook(params: IParams): void {\n    this._data = new Uint32Array(0);\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    this._data = concat(this._data, data.subarray(start, end));\n  }\n\n  public unhook(success: boolean): boolean {\n    if (!success) {\n      this._data = new Uint32Array(0);\n      return true;\n    }\n    const data = utf32ToString(this._data);\n    this._data = new Uint32Array(0);\n    switch (data) {\n      // valid: DCS 1 $ r Pt ST (xterm)\n      case '\"q': // DECSCA\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r0\"q${C0.ESC}\\\\`);\n        break;\n      case '\"p': // DECSCL\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r61;1\"p${C0.ESC}\\\\`);\n        break;\n      case 'r': // DECSTBM\n        const pt = '' + (this._bufferService.buffer.scrollTop + 1) +\n                ';' + (this._bufferService.buffer.scrollBottom + 1) + 'r';\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r${pt}${C0.ESC}\\\\`);\n        break;\n      case 'm': // SGR\n        // TODO: report real settings instead of 0m\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r0m${C0.ESC}\\\\`);\n        break;\n      case ' q': // DECSCUSR\n        const STYLES: {[key: string]: number} = { 'block': 2, 'underline': 4, 'bar': 6 };\n        let style = STYLES[this._optionsService.options.cursorStyle];\n        style -= this._optionsService.options.cursorBlink ? 1 : 0;\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r${style} q${C0.ESC}\\\\`);\n        break;\n      default:\n        // invalid: DCS 0 $ r Pt ST (xterm)\n        this._logService.debug('Unknown DCS $q %s', data);\n        this._coreService.triggerDataEvent(`${C0.ESC}P0$r${C0.ESC}\\\\`);\n    }\n    return true;\n  }\n}\n\n/**\n * DCS Ps; Ps| Pt ST\n *   DECUDK (https://vt100.net/docs/vt510-rm/DECUDK.html)\n *   not supported\n *\n * @vt: #N  DCS   DECUDK   \"User Defined Keys\"  \"DCS Ps ; Ps | Pt ST\"   \"Definitions for user-defined keys.\"\n */\n\n/**\n * DCS + q Pt ST (xterm)\n *   Request Terminfo String\n *   not implemented\n *\n * @vt: #N  DCS   XTGETTCAP   \"Request Terminfo String\"  \"DCS + q Pt ST\"   \"Request Terminfo String.\"\n */\n\n/**\n * DCS + p Pt ST (xterm)\n *   Set Terminfo Data\n *   not supported\n *\n * @vt: #N  DCS   XTSETTCAP   \"Set Terminfo Data\"  \"DCS + p Pt ST\"   \"Set Terminfo Data.\"\n */\n\n\n\n/**\n * The terminal's standard implementation of IInputHandler, this handles all\n * input from the Parser.\n *\n * Refer to http://invisible-island.net/xterm/ctlseqs/ctlseqs.html to understand\n * each function's header comment.\n */\nexport class InputHandler extends Disposable implements IInputHandler {\n  private _parseBuffer: Uint32Array = new Uint32Array(4096);\n  private _stringDecoder: StringToUtf32 = new StringToUtf32();\n  private _utf8Decoder: Utf8ToUtf32 = new Utf8ToUtf32();\n  private _workCell: CellData = new CellData();\n  private _windowTitle = '';\n  private _iconName = '';\n  protected _windowTitleStack: string[] = [];\n  protected _iconNameStack: string[] = [];\n\n  private _curAttrData: IAttributeData = DEFAULT_ATTR_DATA.clone();\n  private _eraseAttrDataInternal: IAttributeData = DEFAULT_ATTR_DATA.clone();\n\n  private _onRequestBell = new EventEmitter<void>();\n  public get onRequestBell(): IEvent<void> { return this._onRequestBell.event; }\n  private _onRequestRefreshRows = new EventEmitter<number, number>();\n  public get onRequestRefreshRows(): IEvent<number, number> { return this._onRequestRefreshRows.event; }\n  private _onRequestReset = new EventEmitter<void>();\n  public get onRequestReset(): IEvent<void> { return this._onRequestReset.event; }\n  private _onRequestSyncScrollBar = new EventEmitter<void>();\n  public get onRequestSyncScrollBar(): IEvent<void> { return this._onRequestSyncScrollBar.event; }\n  private _onRequestWindowsOptionsReport = new EventEmitter<WindowsOptionsReportType>();\n  public get onRequestWindowsOptionsReport(): IEvent<WindowsOptionsReportType> { return this._onRequestWindowsOptionsReport.event; }\n\n  private _onA11yChar = new EventEmitter<string>();\n  public get onA11yChar(): IEvent<string> { return this._onA11yChar.event; }\n  private _onA11yTab = new EventEmitter<number>();\n  public get onA11yTab(): IEvent<number> { return this._onA11yTab.event; }\n  private _onCursorMove = new EventEmitter<void>();\n  public get onCursorMove(): IEvent<void> { return this._onCursorMove.event; }\n  private _onLineFeed = new EventEmitter<void>();\n  public get onLineFeed(): IEvent<void> { return this._onLineFeed.event; }\n  private _onScroll = new EventEmitter<number>();\n  public get onScroll(): IEvent<number> { return this._onScroll.event; }\n  private _onTitleChange = new EventEmitter<string>();\n  public get onTitleChange(): IEvent<string> { return this._onTitleChange.event; }\n  private _onAnsiColorChange = new EventEmitter<IAnsiColorChangeEvent>();\n  public get onAnsiColorChange(): IEvent<IAnsiColorChangeEvent> { return this._onAnsiColorChange.event; }\n\n  private _parseStack: IParseStack = {\n    paused: false,\n    cursorStartX: 0,\n    cursorStartY: 0,\n    decodedLength: 0,\n    position: 0\n  };\n\n  constructor(\n    private readonly _bufferService: IBufferService,\n    private readonly _charsetService: ICharsetService,\n    private readonly _coreService: ICoreService,\n    private readonly _dirtyRowService: IDirtyRowService,\n    private readonly _logService: ILogService,\n    private readonly _optionsService: IOptionsService,\n    private readonly _coreMouseService: ICoreMouseService,\n    private readonly _unicodeService: IUnicodeService,\n    private readonly _parser: IEscapeSequenceParser = new EscapeSequenceParser()\n  ) {\n    super();\n    this.register(this._parser);\n\n    /**\n     * custom fallback handlers\n     */\n    this._parser.setCsiHandlerFallback((ident, params) => {\n      this._logService.debug('Unknown CSI code: ', { identifier: this._parser.identToString(ident), params: params.toArray() });\n    });\n    this._parser.setEscHandlerFallback(ident => {\n      this._logService.debug('Unknown ESC code: ', { identifier: this._parser.identToString(ident) });\n    });\n    this._parser.setExecuteHandlerFallback(code => {\n      this._logService.debug('Unknown EXECUTE code: ', { code });\n    });\n    this._parser.setOscHandlerFallback((identifier, action, data) => {\n      this._logService.debug('Unknown OSC code: ', { identifier, action, data });\n    });\n    this._parser.setDcsHandlerFallback((ident, action, payload) => {\n      if (action === 'HOOK') {\n        payload = payload.toArray();\n      }\n      this._logService.debug('Unknown DCS code: ', { identifier: this._parser.identToString(ident), action, payload });\n    });\n\n    /**\n     * print handler\n     */\n    this._parser.setPrintHandler((data, start, end) => this.print(data, start, end));\n\n    /**\n     * CSI handler\n     */\n    this._parser.registerCsiHandler({ final: '@' }, params => this.insertChars(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: '@' }, params => this.scrollLeft(params));\n    this._parser.registerCsiHandler({ final: 'A' }, params => this.cursorUp(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: 'A' }, params => this.scrollRight(params));\n    this._parser.registerCsiHandler({ final: 'B' }, params => this.cursorDown(params));\n    this._parser.registerCsiHandler({ final: 'C' }, params => this.cursorForward(params));\n    this._parser.registerCsiHandler({ final: 'D' }, params => this.cursorBackward(params));\n    this._parser.registerCsiHandler({ final: 'E' }, params => this.cursorNextLine(params));\n    this._parser.registerCsiHandler({ final: 'F' }, params => this.cursorPrecedingLine(params));\n    this._parser.registerCsiHandler({ final: 'G' }, params => this.cursorCharAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'H' }, params => this.cursorPosition(params));\n    this._parser.registerCsiHandler({ final: 'I' }, params => this.cursorForwardTab(params));\n    this._parser.registerCsiHandler({ final: 'J' }, params => this.eraseInDisplay(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'J' }, params => this.eraseInDisplay(params));\n    this._parser.registerCsiHandler({ final: 'K' }, params => this.eraseInLine(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'K' }, params => this.eraseInLine(params));\n    this._parser.registerCsiHandler({ final: 'L' }, params => this.insertLines(params));\n    this._parser.registerCsiHandler({ final: 'M' }, params => this.deleteLines(params));\n    this._parser.registerCsiHandler({ final: 'P' }, params => this.deleteChars(params));\n    this._parser.registerCsiHandler({ final: 'S' }, params => this.scrollUp(params));\n    this._parser.registerCsiHandler({ final: 'T' }, params => this.scrollDown(params));\n    this._parser.registerCsiHandler({ final: 'X' }, params => this.eraseChars(params));\n    this._parser.registerCsiHandler({ final: 'Z' }, params => this.cursorBackwardTab(params));\n    this._parser.registerCsiHandler({ final: '`' }, params => this.charPosAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'a' }, params => this.hPositionRelative(params));\n    this._parser.registerCsiHandler({ final: 'b' }, params => this.repeatPrecedingCharacter(params));\n    this._parser.registerCsiHandler({ final: 'c' }, params => this.sendDeviceAttributesPrimary(params));\n    this._parser.registerCsiHandler({ prefix: '>', final: 'c' }, params => this.sendDeviceAttributesSecondary(params));\n    this._parser.registerCsiHandler({ final: 'd' }, params => this.linePosAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'e' }, params => this.vPositionRelative(params));\n    this._parser.registerCsiHandler({ final: 'f' }, params => this.hVPosition(params));\n    this._parser.registerCsiHandler({ final: 'g' }, params => this.tabClear(params));\n    this._parser.registerCsiHandler({ final: 'h' }, params => this.setMode(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'h' }, params => this.setModePrivate(params));\n    this._parser.registerCsiHandler({ final: 'l' }, params => this.resetMode(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'l' }, params => this.resetModePrivate(params));\n    this._parser.registerCsiHandler({ final: 'm' }, params => this.charAttributes(params));\n    this._parser.registerCsiHandler({ final: 'n' }, params => this.deviceStatus(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'n' }, params => this.deviceStatusPrivate(params));\n    this._parser.registerCsiHandler({ intermediates: '!', final: 'p' }, params => this.softReset(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: 'q' }, params => this.setCursorStyle(params));\n    this._parser.registerCsiHandler({ final: 'r' }, params => this.setScrollRegion(params));\n    this._parser.registerCsiHandler({ final: 's' }, params => this.saveCursor(params));\n    this._parser.registerCsiHandler({ final: 't' }, params => this.windowOptions(params));\n    this._parser.registerCsiHandler({ final: 'u' }, params => this.restoreCursor(params));\n    this._parser.registerCsiHandler({ intermediates: '\\'', final: '}' }, params => this.insertColumns(params));\n    this._parser.registerCsiHandler({ intermediates: '\\'', final: '~' }, params => this.deleteColumns(params));\n\n    /**\n     * execute handler\n     */\n    this._parser.setExecuteHandler(C0.BEL, () => this.bell());\n    this._parser.setExecuteHandler(C0.LF, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.VT, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.FF, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.CR, () => this.carriageReturn());\n    this._parser.setExecuteHandler(C0.BS, () => this.backspace());\n    this._parser.setExecuteHandler(C0.HT, () => this.tab());\n    this._parser.setExecuteHandler(C0.SO, () => this.shiftOut());\n    this._parser.setExecuteHandler(C0.SI, () => this.shiftIn());\n    // FIXME:   What do to with missing? Old code just added those to print.\n\n    this._parser.setExecuteHandler(C1.IND, () => this.index());\n    this._parser.setExecuteHandler(C1.NEL, () => this.nextLine());\n    this._parser.setExecuteHandler(C1.HTS, () => this.tabSet());\n\n    /**\n     * OSC handler\n     */\n    //   0 - icon name + title\n    this._parser.registerOscHandler(0, new OscHandler(data => { this.setTitle(data); this.setIconName(data); return true; }));\n    //   1 - icon name\n    this._parser.registerOscHandler(1, new OscHandler(data => this.setIconName(data)));\n    //   2 - title\n    this._parser.registerOscHandler(2, new OscHandler(data => this.setTitle(data)));\n    //   3 - set property X in the form \"prop=value\"\n    //   4 - Change Color Number\n    this._parser.registerOscHandler(4, new OscHandler(data => this.setAnsiColor(data)));\n    //   5 - Change Special Color Number\n    //   6 - Enable/disable Special Color Number c\n    //   7 - current directory? (not in xterm spec, see https://gitlab.com/gnachman/iterm2/issues/3939)\n    //  10 - Change VT100 text foreground color to Pt.\n    //  11 - Change VT100 text background color to Pt.\n    //  12 - Change text cursor color to Pt.\n    //  13 - Change mouse foreground color to Pt.\n    //  14 - Change mouse background color to Pt.\n    //  15 - Change Tektronix foreground color to Pt.\n    //  16 - Change Tektronix background color to Pt.\n    //  17 - Change highlight background color to Pt.\n    //  18 - Change Tektronix cursor color to Pt.\n    //  19 - Change highlight foreground color to Pt.\n    //  46 - Change Log File to Pt.\n    //  50 - Set Font to Pt.\n    //  51 - reserved for Emacs shell.\n    //  52 - Manipulate Selection Data.\n    // 104 ; c - Reset Color Number c.\n    // 105 ; c - Reset Special Color Number c.\n    // 106 ; c; f - Enable/disable Special Color Number c.\n    // 110 - Reset VT100 text foreground color.\n    // 111 - Reset VT100 text background color.\n    // 112 - Reset text cursor color.\n    // 113 - Reset mouse foreground color.\n    // 114 - Reset mouse background color.\n    // 115 - Reset Tektronix foreground color.\n    // 116 - Reset Tektronix background color.\n    // 117 - Reset highlight color.\n    // 118 - Reset Tektronix cursor color.\n    // 119 - Reset highlight foreground color.\n\n    /**\n     * ESC handlers\n     */\n    this._parser.registerEscHandler({ final: '7' }, () => this.saveCursor());\n    this._parser.registerEscHandler({ final: '8' }, () => this.restoreCursor());\n    this._parser.registerEscHandler({ final: 'D' }, () => this.index());\n    this._parser.registerEscHandler({ final: 'E' }, () => this.nextLine());\n    this._parser.registerEscHandler({ final: 'H' }, () => this.tabSet());\n    this._parser.registerEscHandler({ final: 'M' }, () => this.reverseIndex());\n    this._parser.registerEscHandler({ final: '=' }, () => this.keypadApplicationMode());\n    this._parser.registerEscHandler({ final: '>' }, () => this.keypadNumericMode());\n    this._parser.registerEscHandler({ final: 'c' }, () => this.fullReset());\n    this._parser.registerEscHandler({ final: 'n' }, () => this.setgLevel(2));\n    this._parser.registerEscHandler({ final: 'o' }, () => this.setgLevel(3));\n    this._parser.registerEscHandler({ final: '|' }, () => this.setgLevel(3));\n    this._parser.registerEscHandler({ final: '}' }, () => this.setgLevel(2));\n    this._parser.registerEscHandler({ final: '~' }, () => this.setgLevel(1));\n    this._parser.registerEscHandler({ intermediates: '%', final: '@' }, () => this.selectDefaultCharset());\n    this._parser.registerEscHandler({ intermediates: '%', final: 'G' }, () => this.selectDefaultCharset());\n    for (const flag in CHARSETS) {\n      this._parser.registerEscHandler({ intermediates: '(', final: flag }, () => this.selectCharset('(' + flag));\n      this._parser.registerEscHandler({ intermediates: ')', final: flag }, () => this.selectCharset(')' + flag));\n      this._parser.registerEscHandler({ intermediates: '*', final: flag }, () => this.selectCharset('*' + flag));\n      this._parser.registerEscHandler({ intermediates: '+', final: flag }, () => this.selectCharset('+' + flag));\n      this._parser.registerEscHandler({ intermediates: '-', final: flag }, () => this.selectCharset('-' + flag));\n      this._parser.registerEscHandler({ intermediates: '.', final: flag }, () => this.selectCharset('.' + flag));\n      this._parser.registerEscHandler({ intermediates: '/', final: flag }, () => this.selectCharset('/' + flag)); // TODO: supported?\n    }\n    this._parser.registerEscHandler({ intermediates: '#', final: '8' }, () => this.screenAlignmentPattern());\n\n    /**\n     * error handler\n     */\n    this._parser.setErrorHandler((state: IParsingState) => {\n      this._logService.error('Parsing error: ', state);\n      return state;\n    });\n\n    /**\n     * DCS handler\n     */\n    this._parser.registerDcsHandler({ intermediates: '$', final: 'q' }, new DECRQSS(this._bufferService, this._coreService, this._logService, this._optionsService));\n  }\n\n  public dispose(): void {\n    super.dispose();\n  }\n\n  /**\n   * Async parse support.\n   */\n  private _preserveStack(cursorStartX: number, cursorStartY: number, decodedLength: number, position: number): void {\n    this._parseStack.paused = true;\n    this._parseStack.cursorStartX = cursorStartX;\n    this._parseStack.cursorStartY = cursorStartY;\n    this._parseStack.decodedLength = decodedLength;\n    this._parseStack.position = position;\n  }\n\n  private _logSlowResolvingAsync(p: Promise<boolean>): void {\n    // log a limited warning about an async handler taking too long\n    if (this._logService.logLevel <= LogLevelEnum.WARN) {\n      Promise.race([p, new Promise((res, rej) => setTimeout(() => rej('#SLOW_TIMEOUT'), SLOW_ASYNC_LIMIT))])\n        .catch(err => {\n          if (err !== '#SLOW_TIMEOUT') {\n            throw err;\n          }\n          console.warn(`async parser handler taking longer than ${SLOW_ASYNC_LIMIT} ms`);\n        });\n    }\n  }\n\n  /**\n   * Parse call with async handler support.\n   *\n   * Whether the stack state got preserved for the next call, is indicated by the return value:\n   * - undefined (void):\n   *   all handlers were sync, no stack save, continue normally with next chunk\n   * - Promise\\<boolean\\>:\n   *   execution stopped at async handler, stack saved, continue with\n   *   same chunk and the promise resolve value as `promiseResult` until the method returns `undefined`\n   *\n   * Note: This method should only be called by `Terminal.write` to ensure correct execution order and\n   * proper continuation of async parser handlers.\n   */\n  public parse(data: string | Uint8Array, promiseResult?: boolean): void | Promise<boolean> {\n    let result: void | Promise<boolean>;\n    let buffer = this._bufferService.buffer;\n    let cursorStartX = buffer.x;\n    let cursorStartY = buffer.y;\n    let start = 0;\n    const wasPaused = this._parseStack.paused;\n\n    if (wasPaused) {\n      // assumption: _parseBuffer never mutates between async calls\n      if (result = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, promiseResult)) {\n        this._logSlowResolvingAsync(result);\n        return result;\n      }\n      cursorStartX = this._parseStack.cursorStartX;\n      cursorStartY = this._parseStack.cursorStartY;\n      this._parseStack.paused = false;\n      if (data.length > MAX_PARSEBUFFER_LENGTH) {\n        start = this._parseStack.position + MAX_PARSEBUFFER_LENGTH;\n      }\n    }\n\n    this._logService.debug('parsing data', data);\n\n    // resize input buffer if needed\n    if (this._parseBuffer.length < data.length) {\n      if (this._parseBuffer.length < MAX_PARSEBUFFER_LENGTH) {\n        this._parseBuffer = new Uint32Array(Math.min(data.length, MAX_PARSEBUFFER_LENGTH));\n      }\n    }\n\n    // Clear the dirty row service so we know which lines changed as a result of parsing\n    // Important: do not clear between async calls, otherwise we lost pending update information.\n    if (!wasPaused) {\n      this._dirtyRowService.clearRange();\n    }\n\n    // process big data in smaller chunks\n    if (data.length > MAX_PARSEBUFFER_LENGTH) {\n      for (let i = start; i < data.length; i += MAX_PARSEBUFFER_LENGTH) {\n        const end = i + MAX_PARSEBUFFER_LENGTH < data.length ? i + MAX_PARSEBUFFER_LENGTH : data.length;\n        const len = (typeof data === 'string')\n          ? this._stringDecoder.decode(data.substring(i, end), this._parseBuffer)\n          : this._utf8Decoder.decode(data.subarray(i, end), this._parseBuffer);\n        if (result = this._parser.parse(this._parseBuffer, len)) {\n          this._preserveStack(cursorStartX, cursorStartY, len, i);\n          this._logSlowResolvingAsync(result);\n          return result;\n        }\n      }\n    } else {\n      if (!wasPaused) {\n        const len = (typeof data === 'string')\n          ? this._stringDecoder.decode(data, this._parseBuffer)\n          : this._utf8Decoder.decode(data, this._parseBuffer);\n        if (result = this._parser.parse(this._parseBuffer, len)) {\n          this._preserveStack(cursorStartX, cursorStartY, len, 0);\n          this._logSlowResolvingAsync(result);\n          return result;\n        }\n      }\n    }\n\n    buffer = this._bufferService.buffer;\n    if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n      this._onCursorMove.fire();\n    }\n\n    // Refresh any dirty rows accumulated as part of parsing\n    this._onRequestRefreshRows.fire(this._dirtyRowService.start, this._dirtyRowService.end);\n  }\n\n  public print(data: Uint32Array, start: number, end: number): void {\n    let code: number;\n    let chWidth: number;\n    const buffer = this._bufferService.buffer;\n    const charset = this._charsetService.charset;\n    const screenReaderMode = this._optionsService.options.screenReaderMode;\n    const cols = this._bufferService.cols;\n    const wraparoundMode = this._coreService.decPrivateModes.wraparound;\n    const insertMode = this._coreService.modes.insertMode;\n    const curAttr = this._curAttrData;\n    let bufferRow = buffer.lines.get(buffer.ybase + buffer.y)!;\n\n    this._dirtyRowService.markDirty(buffer.y);\n\n    // handle wide chars: reset start_cell-1 if we would overwrite the second cell of a wide char\n    if (buffer.x && end - start > 0 && bufferRow.getWidth(buffer.x - 1) === 2) {\n      bufferRow.setCellFromCodePoint(buffer.x - 1, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n    }\n\n    for (let pos = start; pos < end; ++pos) {\n      code = data[pos];\n\n      // calculate print space\n      // expensive call, therefore we save width in line buffer\n      chWidth = this._unicodeService.wcwidth(code);\n\n      // get charset replacement character\n      // charset is only defined for ASCII, therefore we only\n      // search for an replacement char if code < 127\n      if (code < 127 && charset) {\n        const ch = charset[String.fromCharCode(code)];\n        if (ch) {\n          code = ch.charCodeAt(0);\n        }\n      }\n\n      if (screenReaderMode) {\n        this._onA11yChar.fire(stringFromCodePoint(code));\n      }\n\n      // insert combining char at last cursor position\n      // buffer.x should never be 0 for a combining char\n      // since they always follow a cell consuming char\n      // therefore we can test for buffer.x to avoid overflow left\n      if (!chWidth && buffer.x) {\n        if (!bufferRow.getWidth(buffer.x - 1)) {\n          // found empty cell after fullwidth, need to go 2 cells back\n          // it is save to step 2 cells back here\n          // since an empty cell is only set by fullwidth chars\n          bufferRow.addCodepointToCell(buffer.x - 2, code);\n        } else {\n          bufferRow.addCodepointToCell(buffer.x - 1, code);\n        }\n        continue;\n      }\n\n      // goto next line if ch would overflow\n      // NOTE: To avoid costly width checks here,\n      // the terminal does not allow a cols < 2.\n      if (buffer.x + chWidth - 1 >= cols) {\n        // autowrap - DECAWM\n        // automatically wraps to the beginning of the next line\n        if (wraparoundMode) {\n          // clear left over cells to the right\n          while (buffer.x < cols) {\n            bufferRow.setCellFromCodePoint(buffer.x++, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n          }\n          buffer.x = 0;\n          buffer.y++;\n          if (buffer.y === buffer.scrollBottom + 1) {\n            buffer.y--;\n            this._bufferService.scroll(this._eraseAttrData(), true);\n          } else {\n            if (buffer.y >= this._bufferService.rows) {\n              buffer.y = this._bufferService.rows - 1;\n            }\n            // The line already exists (eg. the initial viewport), mark it as a\n            // wrapped line\n            buffer.lines.get(buffer.ybase + buffer.y)!.isWrapped = true;\n          }\n          // row changed, get it again\n          bufferRow = buffer.lines.get(buffer.ybase + buffer.y)!;\n        } else {\n          buffer.x = cols - 1;\n          if (chWidth === 2) {\n            // FIXME: check for xterm behavior\n            // What to do here? We got a wide char that does not fit into last cell\n            continue;\n          }\n        }\n      }\n\n      // insert mode: move characters to right\n      if (insertMode) {\n        // right shift cells according to the width\n        bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr), curAttr);\n        // test last cell - since the last cell has only room for\n        // a halfwidth char any fullwidth shifted there is lost\n        // and will be set to empty cell\n        if (bufferRow.getWidth(cols - 1) === 2) {\n          bufferRow.setCellFromCodePoint(cols - 1, NULL_CELL_CODE, NULL_CELL_WIDTH, curAttr.fg, curAttr.bg, curAttr.extended);\n        }\n      }\n\n      // write current char to buffer and advance cursor\n      bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg, curAttr.extended);\n\n      // fullwidth char - also set next cell to placeholder stub and advance cursor\n      // for graphemes bigger than fullwidth we can simply loop to zero\n      // we already made sure above, that buffer.x + chWidth will not overflow right\n      if (chWidth > 0) {\n        while (--chWidth) {\n          // other than a regular empty cell a cell following a wide char has no width\n          bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg, curAttr.extended);\n        }\n      }\n    }\n    // store last char in Parser.precedingCodepoint for REP to work correctly\n    // This needs to check whether:\n    //  - fullwidth + surrogates: reset\n    //  - combining: only base char gets carried on (bug in xterm?)\n    if (end - start > 0) {\n      bufferRow.loadCell(buffer.x - 1, this._workCell);\n      if (this._workCell.getWidth() === 2 || this._workCell.getCode() > 0xFFFF) {\n        this._parser.precedingCodepoint = 0;\n      } else if (this._workCell.isCombined()) {\n        this._parser.precedingCodepoint = this._workCell.getChars().charCodeAt(0);\n      } else {\n        this._parser.precedingCodepoint = this._workCell.content;\n      }\n    }\n\n    // handle wide chars: reset cell to the right if it is second cell of a wide char\n    if (buffer.x < cols && end - start > 0 && bufferRow.getWidth(buffer.x) === 0 && !bufferRow.hasContent(buffer.x)) {\n      bufferRow.setCellFromCodePoint(buffer.x, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n    }\n\n    this._dirtyRowService.markDirty(buffer.y);\n  }\n\n  /**\n   * Forward registerCsiHandler from parser.\n   */\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: IParams) => boolean | Promise<boolean>): IDisposable {\n    if (id.final === 't' && !id.prefix && !id.intermediates) {\n      // security: always check whether window option is allowed\n      return this._parser.registerCsiHandler(id, params => {\n        if (!paramToWindowOption(params.params[0], this._optionsService.options.windowOptions)) {\n          return true;\n        }\n        return callback(params);\n      });\n    }\n    return this._parser.registerCsiHandler(id, callback);\n  }\n\n  /**\n   * Forward registerDcsHandler from parser.\n   */\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerDcsHandler(id, new DcsHandler(callback));\n  }\n\n  /**\n   * Forward registerEscHandler from parser.\n   */\n  public registerEscHandler(id: IFunctionIdentifier, callback: () => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerEscHandler(id, callback);\n  }\n\n  /**\n   * Forward registerOscHandler from parser.\n   */\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerOscHandler(ident, new OscHandler(callback));\n  }\n\n  /**\n   * BEL\n   * Bell (Ctrl-G).\n   *\n   * @vt: #Y   C0    BEL   \"Bell\"  \"\\a, \\x07\"  \"Ring the bell.\"\n   * The behavior of the bell is further customizable with `ITerminalOptions.bellStyle`\n   * and `ITerminalOptions.bellSound`.\n   */\n  public bell(): boolean {\n    this._onRequestBell.fire();\n    return true;\n  }\n\n  /**\n   * LF\n   * Line Feed or New Line (NL).  (LF  is Ctrl-J).\n   *\n   * @vt: #Y   C0    LF   \"Line Feed\"            \"\\n, \\x0A\"  \"Move the cursor one row down, scrolling if needed.\"\n   * Scrolling is restricted to scroll margins and will only happen on the bottom line.\n   *\n   * @vt: #Y   C0    VT   \"Vertical Tabulation\"  \"\\v, \\x0B\"  \"Treated as LF.\"\n   * @vt: #Y   C0    FF   \"Form Feed\"            \"\\f, \\x0C\"  \"Treated as LF.\"\n   */\n  public lineFeed(): boolean {\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    this._dirtyRowService.markDirty(buffer.y);\n    if (this._optionsService.options.convertEol) {\n      buffer.x = 0;\n    }\n    buffer.y++;\n    if (buffer.y === buffer.scrollBottom + 1) {\n      buffer.y--;\n      this._bufferService.scroll(this._eraseAttrData());\n    } else if (buffer.y >= this._bufferService.rows) {\n      buffer.y = this._bufferService.rows - 1;\n    }\n    // If the end of the line is hit, prevent this action from wrapping around to the next line.\n    if (buffer.x >= this._bufferService.cols) {\n      buffer.x--;\n    }\n    this._dirtyRowService.markDirty(buffer.y);\n\n    this._onLineFeed.fire();\n    return true;\n  }\n\n  /**\n   * CR\n   * Carriage Return (Ctrl-M).\n   *\n   * @vt: #Y   C0    CR   \"Carriage Return\"  \"\\r, \\x0D\"  \"Move the cursor to the beginning of the row.\"\n   */\n  public carriageReturn(): boolean {\n    this._bufferService.buffer.x = 0;\n    return true;\n  }\n\n  /**\n   * BS\n   * Backspace (Ctrl-H).\n   *\n   * @vt: #Y   C0    BS   \"Backspace\"  \"\\b, \\x08\"  \"Move the cursor one position to the left.\"\n   * By default it is not possible to move the cursor past the leftmost position.\n   * If `reverse wrap-around` (`CSI ? 45 h`) is set, a previous soft line wrap (DECAWM)\n   * can be undone with BS within the scroll margins. In that case the cursor will wrap back\n   * to the end of the previous row. Note that it is not possible to peek back into the scrollbuffer\n   * with the cursor, thus at the home position (top-leftmost cell) this has no effect.\n   */\n  public backspace(): boolean {\n    const buffer = this._bufferService.buffer;\n\n    // reverse wrap-around is disabled\n    if (!this._coreService.decPrivateModes.reverseWraparound) {\n      this._restrictCursor();\n      if (buffer.x > 0) {\n        buffer.x--;\n      }\n      return true;\n    }\n\n    // reverse wrap-around is enabled\n    // other than for normal operation mode, reverse wrap-around allows the cursor\n    // to be at x=cols to be able to address the last cell of a row by BS\n    this._restrictCursor(this._bufferService.cols);\n\n    if (buffer.x > 0) {\n      buffer.x--;\n    } else {\n      /**\n       * reverse wrap-around handling:\n       * Our implementation deviates from xterm on purpose. Details:\n       * - only previous soft NLs can be reversed (isWrapped=true)\n       * - only works within scrollborders (top/bottom, left/right not yet supported)\n       * - cannot peek into scrollbuffer\n       * - any cursor movement sequence keeps working as expected\n       */\n      if (buffer.x === 0\n          && buffer.y > buffer.scrollTop\n          && buffer.y <= buffer.scrollBottom\n          && buffer.lines.get(buffer.ybase + buffer.y)?.isWrapped)\n      {\n        buffer.lines.get(buffer.ybase + buffer.y)!.isWrapped = false;\n        buffer.y--;\n        buffer.x = this._bufferService.cols - 1;\n        // find last taken cell - last cell can have 3 different states:\n        // - hasContent(true) + hasWidth(1): narrow char - we are done\n        // - hasWidth(0): second part of wide char - we are done\n        // - hasContent(false) + hasWidth(1): empty cell due to early wrapping wide char, go one cell further back\n        const line = buffer.lines.get(buffer.ybase + buffer.y)!;\n        if (line.hasWidth(buffer.x) && !line.hasContent(buffer.x)) {\n          buffer.x--;\n          // We do this only once, since width=1 + hasContent=false currently happens only once before\n          // early wrapping of a wide char.\n          // This needs to be fixed once we support graphemes taking more than 2 cells.\n        }\n      }\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n  /**\n   * TAB\n   * Horizontal Tab (HT) (Ctrl-I).\n   *\n   * @vt: #Y   C0    HT   \"Horizontal Tabulation\"  \"\\t, \\x09\"  \"Move the cursor to the next character tab stop.\"\n   */\n  public tab(): boolean {\n    if (this._bufferService.buffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    const originalX = this._bufferService.buffer.x;\n    this._bufferService.buffer.x = this._bufferService.buffer.nextStop();\n    if (this._optionsService.options.screenReaderMode) {\n      this._onA11yTab.fire(this._bufferService.buffer.x - originalX);\n    }\n    return true;\n  }\n\n  /**\n   * SO\n   * Shift Out (Ctrl-N) -> Switch to Alternate Character Set.  This invokes the\n   * G1 character set.\n   *\n   * @vt: #P[Only limited ISO-2022 charset support.]  C0    SO   \"Shift Out\"  \"\\x0E\"  \"Switch to an alternative character set.\"\n   */\n  public shiftOut(): boolean {\n    this._charsetService.setgLevel(1);\n    return true;\n  }\n\n  /**\n   * SI\n   * Shift In (Ctrl-O) -> Switch to Standard Character Set.  This invokes the G0\n   * character set (the default).\n   *\n   * @vt: #Y   C0    SI   \"Shift In\"   \"\\x0F\"  \"Return to regular character set after Shift Out.\"\n   */\n  public shiftIn(): boolean {\n    this._charsetService.setgLevel(0);\n    return true;\n  }\n\n  /**\n   * Restrict cursor to viewport size / scroll margin (origin mode).\n   */\n  private _restrictCursor(maxCol: number = this._bufferService.cols - 1): void {\n    this._bufferService.buffer.x = Math.min(maxCol, Math.max(0, this._bufferService.buffer.x));\n    this._bufferService.buffer.y = this._coreService.decPrivateModes.origin\n      ? Math.min(this._bufferService.buffer.scrollBottom, Math.max(this._bufferService.buffer.scrollTop, this._bufferService.buffer.y))\n      : Math.min(this._bufferService.rows - 1, Math.max(0, this._bufferService.buffer.y));\n    this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n  }\n\n  /**\n   * Set absolute cursor position.\n   */\n  private _setCursor(x: number, y: number): void {\n    this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n    if (this._coreService.decPrivateModes.origin) {\n      this._bufferService.buffer.x = x;\n      this._bufferService.buffer.y = this._bufferService.buffer.scrollTop + y;\n    } else {\n      this._bufferService.buffer.x = x;\n      this._bufferService.buffer.y = y;\n    }\n    this._restrictCursor();\n    this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n  }\n\n  /**\n   * Set relative cursor position.\n   */\n  private _moveCursor(x: number, y: number): void {\n    // for relative changes we have to make sure we are within 0 .. cols/rows - 1\n    // before calculating the new position\n    this._restrictCursor();\n    this._setCursor(this._bufferService.buffer.x + x, this._bufferService.buffer.y + y);\n  }\n\n  /**\n   * CSI Ps A\n   * Cursor Up Ps Times (default = 1) (CUU).\n   *\n   * @vt: #Y CSI CUU   \"Cursor Up\"   \"CSI Ps A\"  \"Move cursor `Ps` times up (default=1).\"\n   * If the cursor would pass the top scroll margin, it will stop there.\n   */\n  public cursorUp(params: IParams): boolean {\n    // stop at scrollTop\n    const diffToTop = this._bufferService.buffer.y - this._bufferService.buffer.scrollTop;\n    if (diffToTop >= 0) {\n      this._moveCursor(0, -Math.min(diffToTop, params.params[0] || 1));\n    } else {\n      this._moveCursor(0, -(params.params[0] || 1));\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps B\n   * Cursor Down Ps Times (default = 1) (CUD).\n   *\n   * @vt: #Y CSI CUD   \"Cursor Down\"   \"CSI Ps B\"  \"Move cursor `Ps` times down (default=1).\"\n   * If the cursor would pass the bottom scroll margin, it will stop there.\n   */\n  public cursorDown(params: IParams): boolean {\n    // stop at scrollBottom\n    const diffToBottom = this._bufferService.buffer.scrollBottom - this._bufferService.buffer.y;\n    if (diffToBottom >= 0) {\n      this._moveCursor(0, Math.min(diffToBottom, params.params[0] || 1));\n    } else {\n      this._moveCursor(0, params.params[0] || 1);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps C\n   * Cursor Forward Ps Times (default = 1) (CUF).\n   *\n   * @vt: #Y CSI CUF   \"Cursor Forward\"    \"CSI Ps C\"  \"Move cursor `Ps` times forward (default=1).\"\n   */\n  public cursorForward(params: IParams): boolean {\n    this._moveCursor(params.params[0] || 1, 0);\n    return true;\n  }\n\n  /**\n   * CSI Ps D\n   * Cursor Backward Ps Times (default = 1) (CUB).\n   *\n   * @vt: #Y CSI CUB   \"Cursor Backward\"   \"CSI Ps D\"  \"Move cursor `Ps` times backward (default=1).\"\n   */\n  public cursorBackward(params: IParams): boolean {\n    this._moveCursor(-(params.params[0] || 1), 0);\n    return true;\n  }\n\n  /**\n   * CSI Ps E\n   * Cursor Next Line Ps Times (default = 1) (CNL).\n   * Other than cursorDown (CUD) also set the cursor to first column.\n   *\n   * @vt: #Y CSI CNL   \"Cursor Next Line\"  \"CSI Ps E\"  \"Move cursor `Ps` times down (default=1) and to the first column.\"\n   * Same as CUD, additionally places the cursor at the first column.\n   */\n  public cursorNextLine(params: IParams): boolean {\n    this.cursorDown(params);\n    this._bufferService.buffer.x = 0;\n    return true;\n  }\n\n  /**\n   * CSI Ps F\n   * Cursor Previous Line Ps Times (default = 1) (CPL).\n   * Other than cursorUp (CUU) also set the cursor to first column.\n   *\n   * @vt: #Y CSI CPL   \"Cursor Backward\"   \"CSI Ps F\"  \"Move cursor `Ps` times up (default=1) and to the first column.\"\n   * Same as CUU, additionally places the cursor at the first column.\n   */\n  public cursorPrecedingLine(params: IParams): boolean {\n    this.cursorUp(params);\n    this._bufferService.buffer.x = 0;\n    return true;\n  }\n\n  /**\n   * CSI Ps G\n   * Cursor Character Absolute  [column] (default = [row,1]) (CHA).\n   *\n   * @vt: #Y CSI CHA   \"Cursor Horizontal Absolute\" \"CSI Ps G\" \"Move cursor to `Ps`-th column of the active row (default=1).\"\n   */\n  public cursorCharAbsolute(params: IParams): boolean {\n    this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps H\n   * Cursor Position [row;column] (default = [1,1]) (CUP).\n   *\n   * @vt: #Y CSI CUP   \"Cursor Position\"   \"CSI Ps ; Ps H\"  \"Set cursor to position [`Ps`, `Ps`] (default = [1, 1]).\"\n   * If ORIGIN mode is set, places the cursor to the absolute position within the scroll margins.\n   * If ORIGIN mode is not set, places the cursor to the absolute position within the viewport.\n   * Note that the coordinates are 1-based, thus the top left position starts at `1 ; 1`.\n   */\n  public cursorPosition(params: IParams): boolean {\n    this._setCursor(\n      // col\n      (params.length >= 2) ? (params.params[1] || 1) - 1 : 0,\n      // row\n      (params.params[0] || 1) - 1\n    );\n    return true;\n  }\n\n  /**\n   * CSI Pm `  Character Position Absolute\n   *   [column] (default = [row,1]) (HPA).\n   * Currently same functionality as CHA.\n   *\n   * @vt: #Y CSI HPA   \"Horizontal Position Absolute\"  \"CSI Ps ` \" \"Same as CHA.\"\n   */\n  public charPosAbsolute(params: IParams): boolean {\n    this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Pm a  Character Position Relative\n   *   [columns] (default = [row,col+1]) (HPR)\n   *\n   * @vt: #Y CSI HPR   \"Horizontal Position Relative\"  \"CSI Ps a\"  \"Same as CUF.\"\n   */\n  public hPositionRelative(params: IParams): boolean {\n    this._moveCursor(params.params[0] || 1, 0);\n    return true;\n  }\n\n  /**\n   * CSI Pm d  Vertical Position Absolute (VPA)\n   *   [row] (default = [1,column])\n   *\n   * @vt: #Y CSI VPA   \"Vertical Position Absolute\"    \"CSI Ps d\"  \"Move cursor to `Ps`-th row (default=1).\"\n   */\n  public linePosAbsolute(params: IParams): boolean {\n    this._setCursor(this._bufferService.buffer.x, (params.params[0] || 1) - 1);\n    return true;\n  }\n\n  /**\n   * CSI Pm e  Vertical Position Relative (VPR)\n   *   [rows] (default = [row+1,column])\n   * reuse CSI Ps B ?\n   *\n   * @vt: #Y CSI VPR   \"Vertical Position Relative\"    \"CSI Ps e\"  \"Move cursor `Ps` times down (default=1).\"\n   */\n  public vPositionRelative(params: IParams): boolean {\n    this._moveCursor(0, params.params[0] || 1);\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps f\n   *   Horizontal and Vertical Position [row;column] (default =\n   *   [1,1]) (HVP).\n   *   Same as CUP.\n   *\n   * @vt: #Y CSI HVP   \"Horizontal and Vertical Position\" \"CSI Ps ; Ps f\"  \"Same as CUP.\"\n   */\n  public hVPosition(params: IParams): boolean {\n    this.cursorPosition(params);\n    return true;\n  }\n\n  /**\n   * CSI Ps g  Tab Clear (TBC).\n   *     Ps = 0  -> Clear Current Column (default).\n   *     Ps = 3  -> Clear All.\n   * Potentially:\n   *   Ps = 2  -> Clear Stops on Line.\n   *   http://vt100.net/annarbor/aaa-ug/section6.html\n   *\n   * @vt: #Y CSI TBC   \"Tab Clear\" \"CSI Ps g\"  \"Clear tab stops at current position (0) or all (3) (default=0).\"\n   * Clearing tabstops off the active row (Ps = 2, VT100) is currently not supported.\n   */\n  public tabClear(params: IParams): boolean {\n    const param = params.params[0];\n    if (param === 0) {\n      delete this._bufferService.buffer.tabs[this._bufferService.buffer.x];\n    } else if (param === 3) {\n      this._bufferService.buffer.tabs = {};\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps I\n   *   Cursor Forward Tabulation Ps tab stops (default = 1) (CHT).\n   *\n   * @vt: #Y CSI CHT   \"Cursor Horizontal Tabulation\" \"CSI Ps I\" \"Move cursor `Ps` times tabs forward (default=1).\"\n   */\n  public cursorForwardTab(params: IParams): boolean {\n    if (this._bufferService.buffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    let param = params.params[0] || 1;\n    while (param--) {\n      this._bufferService.buffer.x = this._bufferService.buffer.nextStop();\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps Z  Cursor Backward Tabulation Ps tab stops (default = 1) (CBT).\n   *\n   * @vt: #Y CSI CBT   \"Cursor Backward Tabulation\"  \"CSI Ps Z\"  \"Move cursor `Ps` tabs backward (default=1).\"\n   */\n  public cursorBackwardTab(params: IParams): boolean {\n    if (this._bufferService.buffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    let param = params.params[0] || 1;\n\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    while (param--) {\n      buffer.x = buffer.prevStop();\n    }\n    return true;\n  }\n\n\n  /**\n   * Helper method to erase cells in a terminal row.\n   * The cell gets replaced with the eraseChar of the terminal.\n   * @param y row index\n   * @param start first cell index to be erased\n   * @param end   end - 1 is last erased cell\n   */\n  private _eraseInBufferLine(y: number, start: number, end: number, clearWrap: boolean = false): void {\n    const line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y)!;\n    line.replaceCells(\n      start,\n      end,\n      this._bufferService.buffer.getNullCell(this._eraseAttrData()),\n      this._eraseAttrData()\n    );\n    if (clearWrap) {\n      line.isWrapped = false;\n    }\n  }\n\n  /**\n   * Helper method to reset cells in a terminal row.\n   * The cell gets replaced with the eraseChar of the terminal and the isWrapped property is set to false.\n   * @param y row index\n   */\n  private _resetBufferLine(y: number): void {\n    const line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y)!;\n    line.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData()));\n    line.isWrapped = false;\n  }\n\n  /**\n   * CSI Ps J  Erase in Display (ED).\n   *     Ps = 0  -> Erase Below (default).\n   *     Ps = 1  -> Erase Above.\n   *     Ps = 2  -> Erase All.\n   *     Ps = 3  -> Erase Saved Lines (xterm).\n   * CSI ? Ps J\n   *   Erase in Display (DECSED).\n   *     Ps = 0  -> Selective Erase Below (default).\n   *     Ps = 1  -> Selective Erase Above.\n   *     Ps = 2  -> Selective Erase All.\n   *\n   * @vt: #Y CSI ED  \"Erase In Display\"  \"CSI Ps J\"  \"Erase various parts of the viewport.\"\n   * Supported param values:\n   *\n   * | Ps | Effect                                                       |\n   * | -- | ------------------------------------------------------------ |\n   * | 0  | Erase from the cursor through the end of the viewport.       |\n   * | 1  | Erase from the beginning of the viewport through the cursor. |\n   * | 2  | Erase complete viewport.                                     |\n   * | 3  | Erase scrollback.                                            |\n   *\n   * @vt: #P[Protection attributes are not supported.] CSI DECSED   \"Selective Erase In Display\"  \"CSI ? Ps J\"  \"Currently the same as ED.\"\n   */\n  public eraseInDisplay(params: IParams): boolean {\n    this._restrictCursor();\n    let j;\n    switch (params.params[0]) {\n      case 0:\n        j = this._bufferService.buffer.y;\n        this._dirtyRowService.markDirty(j);\n        this._eraseInBufferLine(j++, this._bufferService.buffer.x, this._bufferService.cols, this._bufferService.buffer.x === 0);\n        for (; j < this._bufferService.rows; j++) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(j);\n        break;\n      case 1:\n        j = this._bufferService.buffer.y;\n        this._dirtyRowService.markDirty(j);\n        // Deleted front part of line and everything before. This line will no longer be wrapped.\n        this._eraseInBufferLine(j, 0, this._bufferService.buffer.x + 1, true);\n        if (this._bufferService.buffer.x + 1 >= this._bufferService.cols) {\n          // Deleted entire previous line. This next line can no longer be wrapped.\n          this._bufferService.buffer.lines.get(j + 1)!.isWrapped = false;\n        }\n        while (j--) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(0);\n        break;\n      case 2:\n        j = this._bufferService.rows;\n        this._dirtyRowService.markDirty(j - 1);\n        while (j--) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(0);\n        break;\n      case 3:\n        // Clear scrollback (everything not in viewport)\n        const scrollBackSize = this._bufferService.buffer.lines.length - this._bufferService.rows;\n        if (scrollBackSize > 0) {\n          this._bufferService.buffer.lines.trimStart(scrollBackSize);\n          this._bufferService.buffer.ybase = Math.max(this._bufferService.buffer.ybase - scrollBackSize, 0);\n          this._bufferService.buffer.ydisp = Math.max(this._bufferService.buffer.ydisp - scrollBackSize, 0);\n          // Force a scroll event to refresh viewport\n          this._onScroll.fire(0);\n        }\n        break;\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps K  Erase in Line (EL).\n   *     Ps = 0  -> Erase to Right (default).\n   *     Ps = 1  -> Erase to Left.\n   *     Ps = 2  -> Erase All.\n   * CSI ? Ps K\n   *   Erase in Line (DECSEL).\n   *     Ps = 0  -> Selective Erase to Right (default).\n   *     Ps = 1  -> Selective Erase to Left.\n   *     Ps = 2  -> Selective Erase All.\n   *\n   * @vt: #Y CSI EL    \"Erase In Line\"  \"CSI Ps K\"  \"Erase various parts of the active row.\"\n   * Supported param values:\n   *\n   * | Ps | Effect                                                   |\n   * | -- | -------------------------------------------------------- |\n   * | 0  | Erase from the cursor through the end of the row.        |\n   * | 1  | Erase from the beginning of the line through the cursor. |\n   * | 2  | Erase complete line.                                     |\n   *\n   * @vt: #P[Protection attributes are not supported.] CSI DECSEL   \"Selective Erase In Line\"  \"CSI ? Ps K\"  \"Currently the same as EL.\"\n   */\n  public eraseInLine(params: IParams): boolean {\n    this._restrictCursor();\n    switch (params.params[0]) {\n      case 0:\n        this._eraseInBufferLine(this._bufferService.buffer.y, this._bufferService.buffer.x, this._bufferService.cols);\n        break;\n      case 1:\n        this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.buffer.x + 1);\n        break;\n      case 2:\n        this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.cols);\n        break;\n    }\n    this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Ps L\n   * Insert Ps Line(s) (default = 1) (IL).\n   *\n   * @vt: #Y CSI IL  \"Insert Line\"   \"CSI Ps L\"  \"Insert `Ps` blank lines at active row (default=1).\"\n   * For every inserted line at the scroll top one line at the scroll bottom gets removed.\n   * The cursor is set to the first column.\n   * IL has no effect if the cursor is outside the scroll margins.\n   */\n  public insertLines(params: IParams): boolean {\n    this._restrictCursor();\n    let param = params.params[0] || 1;\n\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n\n    const row: number = buffer.ybase + buffer.y;\n\n    const scrollBottomRowsOffset = this._bufferService.rows - 1 - buffer.scrollBottom;\n    const scrollBottomAbsolute = this._bufferService.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n    while (param--) {\n      // test: echo -e '\\e[44m\\e[1L\\e[0m'\n      // blankLine(true) - xterm/linux behavior\n      buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n      buffer.lines.splice(row, 0, buffer.getBlankLine(this._eraseAttrData()));\n    }\n\n    this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);\n    buffer.x = 0; // see https://vt100.net/docs/vt220-rm/chapter4.html - vt220 only?\n    return true;\n  }\n\n  /**\n   * CSI Ps M\n   * Delete Ps Line(s) (default = 1) (DL).\n   *\n   * @vt: #Y CSI DL  \"Delete Line\"   \"CSI Ps M\"  \"Delete `Ps` lines at active row (default=1).\"\n   * For every deleted line at the scroll top one blank line at the scroll bottom gets appended.\n   * The cursor is set to the first column.\n   * DL has no effect if the cursor is outside the scroll margins.\n   */\n  public deleteLines(params: IParams): boolean {\n    this._restrictCursor();\n    let param = params.params[0] || 1;\n\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n\n    const row: number = buffer.ybase + buffer.y;\n\n    let j: number;\n    j = this._bufferService.rows - 1 - buffer.scrollBottom;\n    j = this._bufferService.rows - 1 + buffer.ybase - j;\n    while (param--) {\n      // test: echo -e '\\e[44m\\e[1M\\e[0m'\n      // blankLine(true) - xterm/linux behavior\n      buffer.lines.splice(row, 1);\n      buffer.lines.splice(j, 0, buffer.getBlankLine(this._eraseAttrData()));\n    }\n\n    this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);\n    buffer.x = 0; // see https://vt100.net/docs/vt220-rm/chapter4.html - vt220 only?\n    return true;\n  }\n\n  /**\n   * CSI Ps @\n   * Insert Ps (Blank) Character(s) (default = 1) (ICH).\n   *\n   * @vt: #Y CSI ICH  \"Insert Characters\"   \"CSI Ps @\"  \"Insert `Ps` (blank) characters (default = 1).\"\n   * The ICH sequence inserts `Ps` blank characters. The cursor remains at the beginning of the blank characters.\n   * Text between the cursor and right margin moves to the right. Characters moved past the right margin are lost.\n   *\n   *\n   * FIXME: check against xterm - should not work outside of scroll margins (see VT520 manual)\n   */\n  public insertChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);\n    if (line) {\n      line.insertCells(\n        this._bufferService.buffer.x,\n        params.params[0] || 1,\n        this._bufferService.buffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps P\n   * Delete Ps Character(s) (default = 1) (DCH).\n   *\n   * @vt: #Y CSI DCH   \"Delete Character\"  \"CSI Ps P\"  \"Delete `Ps` characters (default=1).\"\n   * As characters are deleted, the remaining characters between the cursor and right margin move to the left.\n   * Character attributes move with the characters. The terminal adds blank characters at the right margin.\n   *\n   *\n   * FIXME: check against xterm - should not work outside of scroll margins (see VT520 manual)\n   */\n  public deleteChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);\n    if (line) {\n      line.deleteCells(\n        this._bufferService.buffer.x,\n        params.params[0] || 1,\n        this._bufferService.buffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps S  Scroll up Ps lines (default = 1) (SU).\n   *\n   * @vt: #Y CSI SU  \"Scroll Up\"   \"CSI Ps S\"  \"Scroll `Ps` lines up (default=1).\"\n   *\n   *\n   * FIXME: scrolled out lines at top = 1 should add to scrollback (xterm)\n   */\n  public scrollUp(params: IParams): boolean {\n    let param = params.params[0] || 1;\n\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    while (param--) {\n      buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n      buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(this._eraseAttrData()));\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps T  Scroll down Ps lines (default = 1) (SD).\n   *\n   * @vt: #Y CSI SD  \"Scroll Down\"   \"CSI Ps T\"  \"Scroll `Ps` lines down (default=1).\"\n   */\n  public scrollDown(params: IParams): boolean {\n    let param = params.params[0] || 1;\n\n    // make buffer local for faster access\n    const buffer = this._bufferService.buffer;\n\n    while (param--) {\n      buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n      buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(DEFAULT_ATTR_DATA));\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps SP @  Scroll left Ps columns (default = 1) (SL) ECMA-48\n   *\n   * Notation: (Pn)\n   * Representation: CSI Pn 02/00 04/00\n   * Parameter default value: Pn = 1\n   * SL causes the data in the presentation component to be moved by n character positions\n   * if the line orientation is horizontal, or by n line positions if the line orientation\n   * is vertical, such that the data appear to move to the left; where n equals the value of Pn.\n   * The active presentation position is not affected by this control function.\n   *\n   * Supported:\n   *   - always left shift (no line orientation setting respected)\n   *\n   * @vt: #Y CSI SL  \"Scroll Left\" \"CSI Ps SP @\" \"Scroll viewport `Ps` times to the left.\"\n   * SL moves the content of all lines within the scroll margins `Ps` times to the left.\n   * SL has no effect outside of the scroll margins.\n   */\n  public scrollLeft(params: IParams): boolean {\n    const buffer = this._bufferService.buffer;\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {\n      const line = buffer.lines.get(buffer.ybase + y)!;\n      line.deleteCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps SP A  Scroll right Ps columns (default = 1) (SR) ECMA-48\n   *\n   * Notation: (Pn)\n   * Representation: CSI Pn 02/00 04/01\n   * Parameter default value: Pn = 1\n   * SR causes the data in the presentation component to be moved by n character positions\n   * if the line orientation is horizontal, or by n line positions if the line orientation\n   * is vertical, such that the data appear to move to the right; where n equals the value of Pn.\n   * The active presentation position is not affected by this control function.\n   *\n   * Supported:\n   *   - always right shift (no line orientation setting respected)\n   *\n   * @vt: #Y CSI SR  \"Scroll Right\"  \"CSI Ps SP A\"   \"Scroll viewport `Ps` times to the right.\"\n   * SL moves the content of all lines within the scroll margins `Ps` times to the right.\n   * Content at the right margin is lost.\n   * SL has no effect outside of the scroll margins.\n   */\n  public scrollRight(params: IParams): boolean {\n    const buffer = this._bufferService.buffer;\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {\n      const line = buffer.lines.get(buffer.ybase + y)!;\n      line.insertCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Pm ' }\n   * Insert Ps Column(s) (default = 1) (DECIC), VT420 and up.\n   *\n   * @vt: #Y CSI DECIC \"Insert Columns\"  \"CSI Ps ' }\"  \"Insert `Ps` columns at cursor position.\"\n   * DECIC inserts `Ps` times blank columns at the cursor position for all lines with the scroll margins,\n   * moving content to the right. Content at the right margin is lost.\n   * DECIC has no effect outside the scrolling margins.\n   */\n  public insertColumns(params: IParams): boolean {\n    const buffer = this._bufferService.buffer;\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {\n      const line = this._bufferService.buffer.lines.get(buffer.ybase + y)!;\n      line.insertCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Pm ' ~\n   * Delete Ps Column(s) (default = 1) (DECDC), VT420 and up.\n   *\n   * @vt: #Y CSI DECDC \"Delete Columns\"  \"CSI Ps ' ~\"  \"Delete `Ps` columns at cursor position.\"\n   * DECDC deletes `Ps` times columns at the cursor position for all lines with the scroll margins,\n   * moving content to the left. Blank columns are added at the right margin.\n   * DECDC has no effect outside the scrolling margins.\n   */\n  public deleteColumns(params: IParams): boolean {\n    const buffer = this._bufferService.buffer;\n    if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {\n      const line = buffer.lines.get(buffer.ybase + y)!;\n      line.deleteCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps X\n   * Erase Ps Character(s) (default = 1) (ECH).\n   *\n   * @vt: #Y CSI ECH   \"Erase Character\"   \"CSI Ps X\"  \"Erase `Ps` characters from current cursor position to the right (default=1).\"\n   * ED erases `Ps` characters from current cursor position to the right.\n   * ED works inside or outside the scrolling margins.\n   */\n  public eraseChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + this._bufferService.buffer.y);\n    if (line) {\n      line.replaceCells(\n        this._bufferService.buffer.x,\n        this._bufferService.buffer.x + (params.params[0] || 1),\n        this._bufferService.buffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._bufferService.buffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps b  Repeat the preceding graphic character Ps times (REP).\n   * From ECMA 48 (@see http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-048.pdf)\n   *    Notation: (Pn)\n   *    Representation: CSI Pn 06/02\n   *    Parameter default value: Pn = 1\n   *    REP is used to indicate that the preceding character in the data stream,\n   *    if it is a graphic character (represented by one or more bit combinations) including SPACE,\n   *    is to be repeated n times, where n equals the value of Pn.\n   *    If the character preceding REP is a control function or part of a control function,\n   *    the effect of REP is not defined by this Standard.\n   *\n   * Since we propagate the terminal as xterm-256color we have to follow xterm's behavior:\n   *    - fullwidth + surrogate chars are ignored\n   *    - for combining chars only the base char gets repeated\n   *    - text attrs are applied normally\n   *    - wrap around is respected\n   *    - any valid sequence resets the carried forward char\n   *\n   * Note: To get reset on a valid sequence working correctly without much runtime penalty,\n   * the preceding codepoint is stored on the parser in `this.print` and reset during `parser.parse`.\n   *\n   * @vt: #Y CSI REP   \"Repeat Preceding Character\"    \"CSI Ps b\"  \"Repeat preceding character `Ps` times (default=1).\"\n   * REP repeats the previous character `Ps` times advancing the cursor, also wrapping if DECAWM is set.\n   * REP has no effect if the sequence does not follow a printable ASCII character\n   * (NOOP for any other sequence in between or NON ASCII characters).\n   */\n  public repeatPrecedingCharacter(params: IParams): boolean {\n    if (!this._parser.precedingCodepoint) {\n      return true;\n    }\n    // call print to insert the chars and handle correct wrapping\n    const length = params.params[0] || 1;\n    const data = new Uint32Array(length);\n    for (let i = 0; i < length; ++i) {\n      data[i] = this._parser.precedingCodepoint;\n    }\n    this.print(data, 0, data.length);\n    return true;\n  }\n\n  /**\n   * CSI Ps c  Send Device Attributes (Primary DA).\n   *     Ps = 0  or omitted -> request attributes from terminal.  The\n   *     response depends on the decTerminalID resource setting.\n   *     -> CSI ? 1 ; 2 c  (``VT100 with Advanced Video Option'')\n   *     -> CSI ? 1 ; 0 c  (``VT101 with No Options'')\n   *     -> CSI ? 6 c  (``VT102'')\n   *     -> CSI ? 6 0 ; 1 ; 2 ; 6 ; 8 ; 9 ; 1 5 ; c  (``VT220'')\n   *   The VT100-style response parameters do not mean anything by\n   *   themselves.  VT220 parameters do, telling the host what fea-\n   *   tures the terminal supports:\n   *     Ps = 1  -> 132-columns.\n   *     Ps = 2  -> Printer.\n   *     Ps = 6  -> Selective erase.\n   *     Ps = 8  -> User-defined keys.\n   *     Ps = 9  -> National replacement character sets.\n   *     Ps = 1 5  -> Technical characters.\n   *     Ps = 2 2  -> ANSI color, e.g., VT525.\n   *     Ps = 2 9  -> ANSI text locator (i.e., DEC Locator mode).\n   *\n   * @vt: #Y CSI DA1   \"Primary Device Attributes\"     \"CSI c\"  \"Send primary device attributes.\"\n   *\n   *\n   * TODO: fix and cleanup response\n   */\n  public sendDeviceAttributesPrimary(params: IParams): boolean {\n    if (params.params[0] > 0) {\n      return true;\n    }\n    if (this._is('xterm') || this._is('rxvt-unicode') || this._is('screen')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[?1;2c');\n    } else if (this._is('linux')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[?6c');\n    }\n    return true;\n  }\n\n  /**\n   * CSI > Ps c\n   *   Send Device Attributes (Secondary DA).\n   *     Ps = 0  or omitted -> request the terminal's identification\n   *     code.  The response depends on the decTerminalID resource set-\n   *     ting.  It should apply only to VT220 and up, but xterm extends\n   *     this to VT100.\n   *     -> CSI  > Pp ; Pv ; Pc c\n   *   where Pp denotes the terminal type\n   *     Pp = 0  -> ``VT100''.\n   *     Pp = 1  -> ``VT220''.\n   *   and Pv is the firmware version (for xterm, this was originally\n   *   the XFree86 patch number, starting with 95).  In a DEC termi-\n   *   nal, Pc indicates the ROM cartridge registration number and is\n   *   always zero.\n   * More information:\n   *   xterm/charproc.c - line 2012, for more information.\n   *   vim responds with ^[[?0c or ^[[?1c after the terminal's response (?)\n   *\n   * @vt: #Y CSI DA2   \"Secondary Device Attributes\"   \"CSI > c\" \"Send primary device attributes.\"\n   *\n   *\n   * TODO: fix and cleanup response\n   */\n  public sendDeviceAttributesSecondary(params: IParams): boolean {\n    if (params.params[0] > 0) {\n      return true;\n    }\n    // xterm and urxvt\n    // seem to spit this\n    // out around ~370 times (?).\n    if (this._is('xterm')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>0;276;0c');\n    } else if (this._is('rxvt-unicode')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>85;95;0c');\n    } else if (this._is('linux')) {\n      // not supported by linux console.\n      // linux console echoes parameters.\n      this._coreService.triggerDataEvent(params.params[0] + 'c');\n    } else if (this._is('screen')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>83;40003;0c');\n    }\n    return true;\n  }\n\n  /**\n   * Evaluate if the current terminal is the given argument.\n   * @param term The terminal name to evaluate\n   */\n  private _is(term: string): boolean {\n    return (this._optionsService.options.termName + '').indexOf(term) === 0;\n  }\n\n  /**\n   * CSI Pm h  Set Mode (SM).\n   *     Ps = 2  -> Keyboard Action Mode (AM).\n   *     Ps = 4  -> Insert Mode (IRM).\n   *     Ps = 1 2  -> Send/receive (SRM).\n   *     Ps = 2 0  -> Automatic Newline (LNM).\n   *\n   * @vt: #P[Only IRM is supported.]    CSI SM    \"Set Mode\"  \"CSI Pm h\"  \"Set various terminal modes.\"\n   * Supported param values by SM:\n   *\n   * | Param | Action                                 | Support |\n   * | ----- | -------------------------------------- | ------- |\n   * | 2     | Keyboard Action Mode (KAM). Always on. | #N      |\n   * | 4     | Insert Mode (IRM).                     | #Y      |\n   * | 12    | Send/receive (SRM). Always off.        | #N      |\n   * | 20    | Automatic Newline (LNM). Always off.   | #N      |\n   */\n  public setMode(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 4:\n          this._coreService.modes.insertMode = true;\n          break;\n        case 20:\n          // this._t.convertEol = true;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI ? Pm h\n   *   DEC Private Mode Set (DECSET).\n   *     Ps = 1  -> Application Cursor Keys (DECCKM).\n   *     Ps = 2  -> Designate USASCII for character sets G0-G3\n   *     (DECANM), and set VT100 mode.\n   *     Ps = 3  -> 132 Column Mode (DECCOLM).\n   *     Ps = 4  -> Smooth (Slow) Scroll (DECSCLM).\n   *     Ps = 5  -> Reverse Video (DECSCNM).\n   *     Ps = 6  -> Origin Mode (DECOM).\n   *     Ps = 7  -> Wraparound Mode (DECAWM).\n   *     Ps = 8  -> Auto-repeat Keys (DECARM).\n   *     Ps = 9  -> Send Mouse X & Y on button press.  See the sec-\n   *     tion Mouse Tracking.\n   *     Ps = 1 0  -> Show toolbar (rxvt).\n   *     Ps = 1 2  -> Start Blinking Cursor (att610).\n   *     Ps = 1 8  -> Print form feed (DECPFF).\n   *     Ps = 1 9  -> Set print extent to full screen (DECPEX).\n   *     Ps = 2 5  -> Show Cursor (DECTCEM).\n   *     Ps = 3 0  -> Show scrollbar (rxvt).\n   *     Ps = 3 5  -> Enable font-shifting functions (rxvt).\n   *     Ps = 3 8  -> Enter Tektronix Mode (DECTEK).\n   *     Ps = 4 0  -> Allow 80 -> 132 Mode.\n   *     Ps = 4 1  -> more(1) fix (see curses resource).\n   *     Ps = 4 2  -> Enable Nation Replacement Character sets (DECN-\n   *     RCM).\n   *     Ps = 4 4  -> Turn On Margin Bell.\n   *     Ps = 4 5  -> Reverse-wraparound Mode.\n   *     Ps = 4 6  -> Start Logging.  This is normally disabled by a\n   *     compile-time option.\n   *     Ps = 4 7  -> Use Alternate Screen Buffer.  (This may be dis-\n   *     abled by the titeInhibit resource).\n   *     Ps = 6 6  -> Application keypad (DECNKM).\n   *     Ps = 6 7  -> Backarrow key sends backspace (DECBKM).\n   *     Ps = 1 0 0 0  -> Send Mouse X & Y on button press and\n   *     release.  See the section Mouse Tracking.\n   *     Ps = 1 0 0 1  -> Use Hilite Mouse Tracking.\n   *     Ps = 1 0 0 2  -> Use Cell Motion Mouse Tracking.\n   *     Ps = 1 0 0 3  -> Use All Motion Mouse Tracking.\n   *     Ps = 1 0 0 4  -> Send FocusIn/FocusOut events.\n   *     Ps = 1 0 0 5  -> Enable Extended Mouse Mode.\n   *     Ps = 1 0 1 0  -> Scroll to bottom on tty output (rxvt).\n   *     Ps = 1 0 1 1  -> Scroll to bottom on key press (rxvt).\n   *     Ps = 1 0 3 4  -> Interpret \"meta\" key, sets eighth bit.\n   *     (enables the eightBitInput resource).\n   *     Ps = 1 0 3 5  -> Enable special modifiers for Alt and Num-\n   *     Lock keys.  (This enables the numLock resource).\n   *     Ps = 1 0 3 6  -> Send ESC   when Meta modifies a key.  (This\n   *     enables the metaSendsEscape resource).\n   *     Ps = 1 0 3 7  -> Send DEL from the editing-keypad Delete\n   *     key.\n   *     Ps = 1 0 3 9  -> Send ESC  when Alt modifies a key.  (This\n   *     enables the altSendsEscape resource).\n   *     Ps = 1 0 4 0  -> Keep selection even if not highlighted.\n   *     (This enables the keepSelection resource).\n   *     Ps = 1 0 4 1  -> Use the CLIPBOARD selection.  (This enables\n   *     the selectToClipboard resource).\n   *     Ps = 1 0 4 2  -> Enable Urgency window manager hint when\n   *     Control-G is received.  (This enables the bellIsUrgent\n   *     resource).\n   *     Ps = 1 0 4 3  -> Enable raising of the window when Control-G\n   *     is received.  (enables the popOnBell resource).\n   *     Ps = 1 0 4 7  -> Use Alternate Screen Buffer.  (This may be\n   *     disabled by the titeInhibit resource).\n   *     Ps = 1 0 4 8  -> Save cursor as in DECSC.  (This may be dis-\n   *     abled by the titeInhibit resource).\n   *     Ps = 1 0 4 9  -> Save cursor as in DECSC and use Alternate\n   *     Screen Buffer, clearing it first.  (This may be disabled by\n   *     the titeInhibit resource).  This combines the effects of the 1\n   *     0 4 7  and 1 0 4 8  modes.  Use this with terminfo-based\n   *     applications rather than the 4 7  mode.\n   *     Ps = 1 0 5 0  -> Set terminfo/termcap function-key mode.\n   *     Ps = 1 0 5 1  -> Set Sun function-key mode.\n   *     Ps = 1 0 5 2  -> Set HP function-key mode.\n   *     Ps = 1 0 5 3  -> Set SCO function-key mode.\n   *     Ps = 1 0 6 0  -> Set legacy keyboard emulation (X11R6).\n   *     Ps = 1 0 6 1  -> Set VT220 keyboard emulation.\n   *     Ps = 2 0 0 4  -> Set bracketed paste mode.\n   * Modes:\n   *   http: *vt100.net/docs/vt220-rm/chapter4.html\n   *\n   * @vt: #P[See below for supported modes.]    CSI DECSET  \"DEC Private Set Mode\" \"CSI ? Pm h\"  \"Set various terminal attributes.\"\n   * Supported param values by DECSET:\n   *\n   * | param | Action                                                  | Support |\n   * | ----- | ------------------------------------------------------- | --------|\n   * | 1     | Application Cursor Keys (DECCKM).                       | #Y      |\n   * | 2     | Designate US-ASCII for character sets G0-G3 (DECANM).   | #Y      |\n   * | 3     | 132 Column Mode (DECCOLM).                              | #Y      |\n   * | 6     | Origin Mode (DECOM).                                    | #Y      |\n   * | 7     | Auto-wrap Mode (DECAWM).                                | #Y      |\n   * | 8     | Auto-repeat Keys (DECARM). Always on.                   | #N      |\n   * | 9     | X10 xterm mouse protocol.                               | #Y      |\n   * | 12    | Start Blinking Cursor.                                  | #Y      |\n   * | 25    | Show Cursor (DECTCEM).                                  | #Y      |\n   * | 45    | Reverse wrap-around.                                    | #Y      |\n   * | 47    | Use Alternate Screen Buffer.                            | #Y      |\n   * | 66    | Application keypad (DECNKM).                            | #Y      |\n   * | 1000  | X11 xterm mouse protocol.                               | #Y      |\n   * | 1002  | Use Cell Motion Mouse Tracking.                         | #Y      |\n   * | 1003  | Use All Motion Mouse Tracking.                          | #Y      |\n   * | 1004  | Send FocusIn/FocusOut events                            | #Y      |\n   * | 1005  | Enable UTF-8 Mouse Mode.                                | #N      |\n   * | 1006  | Enable SGR Mouse Mode.                                  | #Y      |\n   * | 1015  | Enable urxvt Mouse Mode.                                | #N      |\n   * | 1047  | Use Alternate Screen Buffer.                            | #Y      |\n   * | 1048  | Save cursor as in DECSC.                                | #Y      |\n   * | 1049  | Save cursor and switch to alternate buffer clearing it. | #P[Does not clear the alternate buffer.] |\n   * | 2004  | Set bracketed paste mode.                               | #Y      |\n   *\n   *\n   * FIXME: implement DECSCNM, 1049 should clear altbuffer\n   */\n  public setModePrivate(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 1:\n          this._coreService.decPrivateModes.applicationCursorKeys = true;\n          break;\n        case 2:\n          this._charsetService.setgCharset(0, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(1, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(2, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(3, DEFAULT_CHARSET);\n          // set VT100 mode here\n          break;\n        case 3:\n          /**\n           * DECCOLM - 132 column mode.\n           * This is only active if 'SetWinLines' (24) is enabled\n           * through `options.windowsOptions`.\n           */\n          if (this._optionsService.options.windowOptions.setWinLines) {\n            this._bufferService.resize(132, this._bufferService.rows);\n            this._onRequestReset.fire();\n          }\n          break;\n        case 6:\n          this._coreService.decPrivateModes.origin = true;\n          this._setCursor(0, 0);\n          break;\n        case 7:\n          this._coreService.decPrivateModes.wraparound = true;\n          break;\n        case 12:\n          // this.cursorBlink = true;\n          break;\n        case 45:\n          this._coreService.decPrivateModes.reverseWraparound = true;\n          break;\n        case 66:\n          this._logService.debug('Serial port requested application keypad.');\n          this._coreService.decPrivateModes.applicationKeypad = true;\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 9: // X10 Mouse\n          // no release, no motion, no wheel, no modifiers.\n          this._coreMouseService.activeProtocol = 'X10';\n          break;\n        case 1000: // vt200 mouse\n          // no motion.\n          this._coreMouseService.activeProtocol = 'VT200';\n          break;\n        case 1002: // button event mouse\n          this._coreMouseService.activeProtocol = 'DRAG';\n          break;\n        case 1003: // any event mouse\n          // any event - sends motion events,\n          // even if there is no button held down.\n          this._coreMouseService.activeProtocol = 'ANY';\n          break;\n        case 1004: // send focusin/focusout events\n          // focusin: ^[[I\n          // focusout: ^[[O\n          this._coreService.decPrivateModes.sendFocus = true;\n          break;\n        case 1005: // utf8 ext mode mouse - removed in #2507\n          this._logService.debug('DECSET 1005 not supported (see #2507)');\n          break;\n        case 1006: // sgr ext mode mouse\n          this._coreMouseService.activeEncoding = 'SGR';\n          break;\n        case 1015: // urxvt ext mode mouse - removed in #2507\n          this._logService.debug('DECSET 1015 not supported (see #2507)');\n          break;\n        case 25: // show cursor\n          this._coreService.isCursorHidden = false;\n          break;\n        case 1048: // alt screen cursor\n          this.saveCursor();\n          break;\n        case 1049: // alt screen buffer cursor\n          this.saveCursor();\n          // FALL-THROUGH\n        case 47: // alt screen buffer\n        case 1047: // alt screen buffer\n          this._bufferService.buffers.activateAltBuffer(this._eraseAttrData());\n          this._coreService.isCursorInitialized = true;\n          this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 2004: // bracketed paste mode (https://cirw.in/blog/bracketed-paste)\n          this._coreService.decPrivateModes.bracketedPasteMode = true;\n          break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * CSI Pm l  Reset Mode (RM).\n   *     Ps = 2  -> Keyboard Action Mode (AM).\n   *     Ps = 4  -> Replace Mode (IRM).\n   *     Ps = 1 2  -> Send/receive (SRM).\n   *     Ps = 2 0  -> Normal Linefeed (LNM).\n   *\n   * @vt: #P[Only IRM is supported.]    CSI RM    \"Reset Mode\"  \"CSI Pm l\"  \"Set various terminal attributes.\"\n   * Supported param values by RM:\n   *\n   * | Param | Action                                 | Support |\n   * | ----- | -------------------------------------- | ------- |\n   * | 2     | Keyboard Action Mode (KAM). Always on. | #N      |\n   * | 4     | Replace Mode (IRM). (default)          | #Y      |\n   * | 12    | Send/receive (SRM). Always off.        | #N      |\n   * | 20    | Normal Linefeed (LNM). Always off.     | #N      |\n   *\n   *\n   * FIXME: why is LNM commented out?\n   */\n  public resetMode(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 4:\n          this._coreService.modes.insertMode = false;\n          break;\n        case 20:\n          // this._t.convertEol = false;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI ? Pm l\n   *   DEC Private Mode Reset (DECRST).\n   *     Ps = 1  -> Normal Cursor Keys (DECCKM).\n   *     Ps = 2  -> Designate VT52 mode (DECANM).\n   *     Ps = 3  -> 80 Column Mode (DECCOLM).\n   *     Ps = 4  -> Jump (Fast) Scroll (DECSCLM).\n   *     Ps = 5  -> Normal Video (DECSCNM).\n   *     Ps = 6  -> Normal Cursor Mode (DECOM).\n   *     Ps = 7  -> No Wraparound Mode (DECAWM).\n   *     Ps = 8  -> No Auto-repeat Keys (DECARM).\n   *     Ps = 9  -> Don't send Mouse X & Y on button press.\n   *     Ps = 1 0  -> Hide toolbar (rxvt).\n   *     Ps = 1 2  -> Stop Blinking Cursor (att610).\n   *     Ps = 1 8  -> Don't print form feed (DECPFF).\n   *     Ps = 1 9  -> Limit print to scrolling region (DECPEX).\n   *     Ps = 2 5  -> Hide Cursor (DECTCEM).\n   *     Ps = 3 0  -> Don't show scrollbar (rxvt).\n   *     Ps = 3 5  -> Disable font-shifting functions (rxvt).\n   *     Ps = 4 0  -> Disallow 80 -> 132 Mode.\n   *     Ps = 4 1  -> No more(1) fix (see curses resource).\n   *     Ps = 4 2  -> Disable Nation Replacement Character sets (DEC-\n   *     NRCM).\n   *     Ps = 4 4  -> Turn Off Margin Bell.\n   *     Ps = 4 5  -> No Reverse-wraparound Mode.\n   *     Ps = 4 6  -> Stop Logging.  (This is normally disabled by a\n   *     compile-time option).\n   *     Ps = 4 7  -> Use Normal Screen Buffer.\n   *     Ps = 6 6  -> Numeric keypad (DECNKM).\n   *     Ps = 6 7  -> Backarrow key sends delete (DECBKM).\n   *     Ps = 1 0 0 0  -> Don't send Mouse X & Y on button press and\n   *     release.  See the section Mouse Tracking.\n   *     Ps = 1 0 0 1  -> Don't use Hilite Mouse Tracking.\n   *     Ps = 1 0 0 2  -> Don't use Cell Motion Mouse Tracking.\n   *     Ps = 1 0 0 3  -> Don't use All Motion Mouse Tracking.\n   *     Ps = 1 0 0 4  -> Don't send FocusIn/FocusOut events.\n   *     Ps = 1 0 0 5  -> Disable Extended Mouse Mode.\n   *     Ps = 1 0 1 0  -> Don't scroll to bottom on tty output\n   *     (rxvt).\n   *     Ps = 1 0 1 1  -> Don't scroll to bottom on key press (rxvt).\n   *     Ps = 1 0 3 4  -> Don't interpret \"meta\" key.  (This disables\n   *     the eightBitInput resource).\n   *     Ps = 1 0 3 5  -> Disable special modifiers for Alt and Num-\n   *     Lock keys.  (This disables the numLock resource).\n   *     Ps = 1 0 3 6  -> Don't send ESC  when Meta modifies a key.\n   *     (This disables the metaSendsEscape resource).\n   *     Ps = 1 0 3 7  -> Send VT220 Remove from the editing-keypad\n   *     Delete key.\n   *     Ps = 1 0 3 9  -> Don't send ESC  when Alt modifies a key.\n   *     (This disables the altSendsEscape resource).\n   *     Ps = 1 0 4 0  -> Do not keep selection when not highlighted.\n   *     (This disables the keepSelection resource).\n   *     Ps = 1 0 4 1  -> Use the PRIMARY selection.  (This disables\n   *     the selectToClipboard resource).\n   *     Ps = 1 0 4 2  -> Disable Urgency window manager hint when\n   *     Control-G is received.  (This disables the bellIsUrgent\n   *     resource).\n   *     Ps = 1 0 4 3  -> Disable raising of the window when Control-\n   *     G is received.  (This disables the popOnBell resource).\n   *     Ps = 1 0 4 7  -> Use Normal Screen Buffer, clearing screen\n   *     first if in the Alternate Screen.  (This may be disabled by\n   *     the titeInhibit resource).\n   *     Ps = 1 0 4 8  -> Restore cursor as in DECRC.  (This may be\n   *     disabled by the titeInhibit resource).\n   *     Ps = 1 0 4 9  -> Use Normal Screen Buffer and restore cursor\n   *     as in DECRC.  (This may be disabled by the titeInhibit\n   *     resource).  This combines the effects of the 1 0 4 7  and 1 0\n   *     4 8  modes.  Use this with terminfo-based applications rather\n   *     than the 4 7  mode.\n   *     Ps = 1 0 5 0  -> Reset terminfo/termcap function-key mode.\n   *     Ps = 1 0 5 1  -> Reset Sun function-key mode.\n   *     Ps = 1 0 5 2  -> Reset HP function-key mode.\n   *     Ps = 1 0 5 3  -> Reset SCO function-key mode.\n   *     Ps = 1 0 6 0  -> Reset legacy keyboard emulation (X11R6).\n   *     Ps = 1 0 6 1  -> Reset keyboard emulation to Sun/PC style.\n   *     Ps = 2 0 0 4  -> Reset bracketed paste mode.\n   *\n   * @vt: #P[See below for supported modes.]    CSI DECRST  \"DEC Private Reset Mode\" \"CSI ? Pm l\"  \"Reset various terminal attributes.\"\n   * Supported param values by DECRST:\n   *\n   * | param | Action                                                  | Support |\n   * | ----- | ------------------------------------------------------- | ------- |\n   * | 1     | Normal Cursor Keys (DECCKM).                            | #Y      |\n   * | 2     | Designate VT52 mode (DECANM).                           | #N      |\n   * | 3     | 80 Column Mode (DECCOLM).                               | #B[Switches to old column width instead of 80.] |\n   * | 6     | Normal Cursor Mode (DECOM).                             | #Y      |\n   * | 7     | No Wraparound Mode (DECAWM).                            | #Y      |\n   * | 8     | No Auto-repeat Keys (DECARM).                           | #N      |\n   * | 9     | Don't send Mouse X & Y on button press.                 | #Y      |\n   * | 12    | Stop Blinking Cursor.                                   | #Y      |\n   * | 25    | Hide Cursor (DECTCEM).                                  | #Y      |\n   * | 45    | No reverse wrap-around.                                 | #Y      |\n   * | 47    | Use Normal Screen Buffer.                               | #Y      |\n   * | 66    | Numeric keypad (DECNKM).                                | #Y      |\n   * | 1000  | Don't send Mouse reports.                               | #Y      |\n   * | 1002  | Don't use Cell Motion Mouse Tracking.                   | #Y      |\n   * | 1003  | Don't use All Motion Mouse Tracking.                    | #Y      |\n   * | 1004  | Don't send FocusIn/FocusOut events.                     | #Y      |\n   * | 1005  | Disable UTF-8 Mouse Mode.                               | #N      |\n   * | 1006  | Disable SGR Mouse Mode.                                 | #Y      |\n   * | 1015  | Disable urxvt Mouse Mode.                               | #N      |\n   * | 1047  | Use Normal Screen Buffer (clearing screen if in alt).   | #Y      |\n   * | 1048  | Restore cursor as in DECRC.                             | #Y      |\n   * | 1049  | Use Normal Screen Buffer and restore cursor.            | #Y      |\n   * | 2004  | Reset bracketed paste mode.                             | #Y      |\n   *\n   *\n   * FIXME: DECCOLM is currently broken (already fixed in window options PR)\n   */\n  public resetModePrivate(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 1:\n          this._coreService.decPrivateModes.applicationCursorKeys = false;\n          break;\n        case 3:\n          /**\n           * DECCOLM - 80 column mode.\n           * This is only active if 'SetWinLines' (24) is enabled\n           * through `options.windowsOptions`.\n           */\n          if (this._optionsService.options.windowOptions.setWinLines) {\n            this._bufferService.resize(80, this._bufferService.rows);\n            this._onRequestReset.fire();\n          }\n          break;\n        case 6:\n          this._coreService.decPrivateModes.origin = false;\n          this._setCursor(0, 0);\n          break;\n        case 7:\n          this._coreService.decPrivateModes.wraparound = false;\n          break;\n        case 12:\n          // this.cursorBlink = false;\n          break;\n        case 45:\n          this._coreService.decPrivateModes.reverseWraparound = false;\n          break;\n        case 66:\n          this._logService.debug('Switching back to normal keypad.');\n          this._coreService.decPrivateModes.applicationKeypad = false;\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 9: // X10 Mouse\n        case 1000: // vt200 mouse\n        case 1002: // button event mouse\n        case 1003: // any event mouse\n          this._coreMouseService.activeProtocol = 'NONE';\n          break;\n        case 1004: // send focusin/focusout events\n          this._coreService.decPrivateModes.sendFocus = false;\n          break;\n        case 1005: // utf8 ext mode mouse - removed in #2507\n          this._logService.debug('DECRST 1005 not supported (see #2507)');\n          break;\n        case 1006: // sgr ext mode mouse\n          this._coreMouseService.activeEncoding = 'DEFAULT';\n          break;\n        case 1015: // urxvt ext mode mouse - removed in #2507\n          this._logService.debug('DECRST 1015 not supported (see #2507)');\n          break;\n        case 25: // hide cursor\n          this._coreService.isCursorHidden = true;\n          break;\n        case 1048: // alt screen cursor\n          this.restoreCursor();\n          break;\n        case 1049: // alt screen buffer cursor\n          // FALL-THROUGH\n        case 47: // normal screen buffer\n        case 1047: // normal screen buffer - clearing it first\n          // Ensure the selection manager has the correct buffer\n          this._bufferService.buffers.activateNormalBuffer();\n          if (params.params[i] === 1049) {\n            this.restoreCursor();\n          }\n          this._coreService.isCursorInitialized = true;\n          this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 2004: // bracketed paste mode (https://cirw.in/blog/bracketed-paste)\n          this._coreService.decPrivateModes.bracketedPasteMode = false;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Helper to write color information packed with color mode.\n   */\n  private _updateAttrColor(color: number, mode: number, c1: number, c2: number, c3: number): number {\n    if (mode === 2) {\n      color |= Attributes.CM_RGB;\n      color &= ~Attributes.RGB_MASK;\n      color |= AttributeData.fromColorRGB([c1, c2, c3]);\n    } else if (mode === 5) {\n      color &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n      color |= Attributes.CM_P256 | (c1 & 0xff);\n    }\n    return color;\n  }\n\n  /**\n   * Helper to extract and apply color params/subparams.\n   * Returns advance for params index.\n   */\n  private _extractColor(params: IParams, pos: number, attr: IAttributeData): number {\n    // normalize params\n    // meaning: [target, CM, ign, val, val, val]\n    // RGB    : [ 38/48,  2, ign,   r,   g,   b]\n    // P256   : [ 38/48,  5, ign,   v, ign, ign]\n    const accu = [0, 0, -1, 0, 0, 0];\n\n    // alignment placeholder for non color space sequences\n    let cSpace = 0;\n\n    // return advance we took in params\n    let advance = 0;\n\n    do {\n      accu[advance + cSpace] = params.params[pos + advance];\n      if (params.hasSubParams(pos + advance)) {\n        const subparams = params.getSubParams(pos + advance)!;\n        let i = 0;\n        do {\n          if (accu[1] === 5) {\n            cSpace = 1;\n          }\n          accu[advance + i + 1 + cSpace] = subparams[i];\n        } while (++i < subparams.length && i + advance + 1 + cSpace < accu.length);\n        break;\n      }\n      // exit early if can decide color mode with semicolons\n      if ((accu[1] === 5 && advance + cSpace >= 2)\n          || (accu[1] === 2 && advance + cSpace >= 5)) {\n        break;\n      }\n      // offset colorSpace slot for semicolon mode\n      if (accu[1]) {\n        cSpace = 1;\n      }\n    } while (++advance + pos < params.length && advance + cSpace < accu.length);\n\n    // set default values to 0\n    for (let i = 2; i < accu.length; ++i) {\n      if (accu[i] === -1) {\n        accu[i] = 0;\n      }\n    }\n\n    // apply colors\n    switch (accu[0]) {\n      case 38:\n        attr.fg = this._updateAttrColor(attr.fg, accu[1], accu[3], accu[4], accu[5]);\n        break;\n      case 48:\n        attr.bg = this._updateAttrColor(attr.bg, accu[1], accu[3], accu[4], accu[5]);\n        break;\n      case 58:\n        attr.extended = attr.extended.clone();\n        attr.extended.underlineColor = this._updateAttrColor(attr.extended.underlineColor, accu[1], accu[3], accu[4], accu[5]);\n    }\n\n    return advance;\n  }\n\n  /**\n   * SGR 4 subparams:\n   *    4:0   -   equal to SGR 24 (turn off all underline)\n   *    4:1   -   equal to SGR 4 (single underline)\n   *    4:2   -   equal to SGR 21 (double underline)\n   *    4:3   -   curly underline\n   *    4:4   -   dotted underline\n   *    4:5   -   dashed underline\n   */\n  private _processUnderline(style: number, attr: IAttributeData): void {\n    // treat extended attrs as immutable, thus always clone from old one\n    // this is needed since the buffer only holds references to it\n    attr.extended = attr.extended.clone();\n\n    // default to 1 == single underline\n    if (!~style || style > 5) {\n      style = 1;\n    }\n    attr.extended.underlineStyle = style;\n    attr.fg |= FgFlags.UNDERLINE;\n\n    // 0 deactivates underline\n    if (style === 0) {\n      attr.fg &= ~FgFlags.UNDERLINE;\n    }\n\n    // update HAS_EXTENDED in BG\n    attr.updateExtended();\n  }\n\n  /**\n   * CSI Pm m  Character Attributes (SGR).\n   *\n   * @vt: #P[See below for supported attributes.]    CSI SGR   \"Select Graphic Rendition\"  \"CSI Pm m\"  \"Set/Reset various text attributes.\"\n   * SGR selects one or more character attributes at the same time. Multiple params (up to 32)\n   * are applied in order from left to right. The changed attributes are applied to all new\n   * characters received. If you move characters in the viewport by scrolling or any other means,\n   * then the attributes move with the characters.\n   *\n   * Supported param values by SGR:\n   *\n   * | Param     | Meaning                                                  | Support |\n   * | --------- | -------------------------------------------------------- | ------- |\n   * | 0         | Normal (default). Resets any other preceding SGR.        | #Y      |\n   * | 1         | Bold. (also see `options.drawBoldTextInBrightColors`)    | #Y      |\n   * | 2         | Faint, decreased intensity.                              | #Y      |\n   * | 3         | Italic.                                                  | #Y      |\n   * | 4         | Underlined (see below for style support).                | #Y      |\n   * | 5         | Slowly blinking.                                         | #N      |\n   * | 6         | Rapidly blinking.                                        | #N      |\n   * | 7         | Inverse. Flips foreground and background color.          | #Y      |\n   * | 8         | Invisible (hidden).                                      | #Y      |\n   * | 9         | Crossed-out characters.                                  | #N      |\n   * | 21        | Doubly underlined.                                       | #P[Currently outputs a single underline.] |\n   * | 22        | Normal (neither bold nor faint).                         | #Y      |\n   * | 23        | No italic.                                               | #Y      |\n   * | 24        | Not underlined.                                          | #Y      |\n   * | 25        | Steady (not blinking).                                   | #Y      |\n   * | 27        | Positive (not inverse).                                  | #Y      |\n   * | 28        | Visible (not hidden).                                    | #Y      |\n   * | 29        | Not Crossed-out.                                         | #N      |\n   * | 30        | Foreground color: Black.                                 | #Y      |\n   * | 31        | Foreground color: Red.                                   | #Y      |\n   * | 32        | Foreground color: Green.                                 | #Y      |\n   * | 33        | Foreground color: Yellow.                                | #Y      |\n   * | 34        | Foreground color: Blue.                                  | #Y      |\n   * | 35        | Foreground color: Magenta.                               | #Y      |\n   * | 36        | Foreground color: Cyan.                                  | #Y      |\n   * | 37        | Foreground color: White.                                 | #Y      |\n   * | 38        | Foreground color: Extended color.                        | #P[Support for RGB and indexed colors, see below.] |\n   * | 39        | Foreground color: Default (original).                    | #Y      |\n   * | 40        | Background color: Black.                                 | #Y      |\n   * | 41        | Background color: Red.                                   | #Y      |\n   * | 42        | Background color: Green.                                 | #Y      |\n   * | 43        | Background color: Yellow.                                | #Y      |\n   * | 44        | Background color: Blue.                                  | #Y      |\n   * | 45        | Background color: Magenta.                               | #Y      |\n   * | 46        | Background color: Cyan.                                  | #Y      |\n   * | 47        | Background color: White.                                 | #Y      |\n   * | 48        | Background color: Extended color.                        | #P[Support for RGB and indexed colors, see below.] |\n   * | 49        | Background color: Default (original).                    | #Y      |\n   * | 90 - 97   | Bright foreground color (analogous to 30 - 37).          | #Y      |\n   * | 100 - 107 | Bright background color (analogous to 40 - 47).          | #Y      |\n   *\n   * Underline supports subparams to denote the style in the form `4 : x`:\n   *\n   * | x      | Meaning                                                       | Support |\n   * | ------ | ------------------------------------------------------------- | ------- |\n   * | 0      | No underline. Same as `SGR 24 m`.                             | #Y      |\n   * | 1      | Single underline. Same as `SGR 4 m`.                          | #Y      |\n   * | 2      | Double underline.                                             | #P[Currently outputs a single underline.] |\n   * | 3      | Curly underline.                                              | #P[Currently outputs a single underline.] |\n   * | 4      | Dotted underline.                                             | #P[Currently outputs a single underline.] |\n   * | 5      | Dashed underline.                                             | #P[Currently outputs a single underline.] |\n   * | other  | Single underline. Same as `SGR 4 m`.                          | #Y      |\n   *\n   * Extended colors are supported for foreground (Ps=38) and background (Ps=48) as follows:\n   *\n   * | Ps + 1 | Meaning                                                       | Support |\n   * | ------ | ------------------------------------------------------------- | ------- |\n   * | 0      | Implementation defined.                                       | #N      |\n   * | 1      | Transparent.                                                  | #N      |\n   * | 2      | RGB color as `Ps ; 2 ; R ; G ; B` or `Ps : 2 : : R : G : B`.  | #Y      |\n   * | 3      | CMY color.                                                    | #N      |\n   * | 4      | CMYK color.                                                   | #N      |\n   * | 5      | Indexed (256 colors) as `Ps ; 5 ; INDEX` or `Ps : 5 : INDEX`. | #Y      |\n   *\n   *\n   * FIXME: blinking is implemented in attrs, but not working in renderers?\n   * FIXME: remove dead branch for p=100\n   */\n  public charAttributes(params: IParams): boolean {\n    // Optimize a single SGR0.\n    if (params.length === 1 && params.params[0] === 0) {\n      this._curAttrData.fg = DEFAULT_ATTR_DATA.fg;\n      this._curAttrData.bg = DEFAULT_ATTR_DATA.bg;\n      return true;\n    }\n\n    const l = params.length;\n    let p;\n    const attr = this._curAttrData;\n\n    for (let i = 0; i < l; i++) {\n      p = params.params[i];\n      if (p >= 30 && p <= 37) {\n        // fg color 8\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.fg |= Attributes.CM_P16 | (p - 30);\n      } else if (p >= 40 && p <= 47) {\n        // bg color 8\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.bg |= Attributes.CM_P16 | (p - 40);\n      } else if (p >= 90 && p <= 97) {\n        // fg color 16\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.fg |= Attributes.CM_P16 | (p - 90) | 8;\n      } else if (p >= 100 && p <= 107) {\n        // bg color 16\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.bg |= Attributes.CM_P16 | (p - 100) | 8;\n      } else if (p === 0) {\n        // default\n        attr.fg = DEFAULT_ATTR_DATA.fg;\n        attr.bg = DEFAULT_ATTR_DATA.bg;\n      } else if (p === 1) {\n        // bold text\n        attr.fg |= FgFlags.BOLD;\n      } else if (p === 3) {\n        // italic text\n        attr.bg |= BgFlags.ITALIC;\n      } else if (p === 4) {\n        // underlined text\n        attr.fg |= FgFlags.UNDERLINE;\n        this._processUnderline(params.hasSubParams(i) ? params.getSubParams(i)![0] : UnderlineStyle.SINGLE, attr);\n      } else if (p === 5) {\n        // blink\n        attr.fg |= FgFlags.BLINK;\n      } else if (p === 7) {\n        // inverse and positive\n        // test with: echo -e '\\e[31m\\e[42mhello\\e[7mworld\\e[27mhi\\e[m'\n        attr.fg |= FgFlags.INVERSE;\n      } else if (p === 8) {\n        // invisible\n        attr.fg |= FgFlags.INVISIBLE;\n      } else if (p === 2) {\n        // dimmed text\n        attr.bg |= BgFlags.DIM;\n      } else if (p === 21) {\n        // double underline\n        this._processUnderline(UnderlineStyle.DOUBLE, attr);\n      } else if (p === 22) {\n        // not bold nor faint\n        attr.fg &= ~FgFlags.BOLD;\n        attr.bg &= ~BgFlags.DIM;\n      } else if (p === 23) {\n        // not italic\n        attr.bg &= ~BgFlags.ITALIC;\n      } else if (p === 24) {\n        // not underlined\n        attr.fg &= ~FgFlags.UNDERLINE;\n      } else if (p === 25) {\n        // not blink\n        attr.fg &= ~FgFlags.BLINK;\n      } else if (p === 27) {\n        // not inverse\n        attr.fg &= ~FgFlags.INVERSE;\n      } else if (p === 28) {\n        // not invisible\n        attr.fg &= ~FgFlags.INVISIBLE;\n      } else if (p === 39) {\n        // reset fg\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.fg |= DEFAULT_ATTR_DATA.fg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else if (p === 49) {\n        // reset bg\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.bg |= DEFAULT_ATTR_DATA.bg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else if (p === 38 || p === 48 || p === 58) {\n        // fg color 256 and RGB\n        i += this._extractColor(params, i, attr);\n      } else if (p === 59) {\n        attr.extended = attr.extended.clone();\n        attr.extended.underlineColor = -1;\n        attr.updateExtended();\n      } else if (p === 100) { // FIXME: dead branch, p=100 already handled above!\n        // reset fg/bg\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.fg |= DEFAULT_ATTR_DATA.fg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.bg |= DEFAULT_ATTR_DATA.bg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else {\n        this._logService.debug('Unknown SGR attribute: %d.', p);\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps n  Device Status Report (DSR).\n   *     Ps = 5  -> Status Report.  Result (``OK'') is\n   *   CSI 0 n\n   *     Ps = 6  -> Report Cursor Position (CPR) [row;column].\n   *   Result is\n   *   CSI r ; c R\n   * CSI ? Ps n\n   *   Device Status Report (DSR, DEC-specific).\n   *     Ps = 6  -> Report Cursor Position (CPR) [row;column] as CSI\n   *     ? r ; c R (assumes page is zero).\n   *     Ps = 1 5  -> Report Printer status as CSI ? 1 0  n  (ready).\n   *     or CSI ? 1 1  n  (not ready).\n   *     Ps = 2 5  -> Report UDK status as CSI ? 2 0  n  (unlocked)\n   *     or CSI ? 2 1  n  (locked).\n   *     Ps = 2 6  -> Report Keyboard status as\n   *   CSI ? 2 7  ;  1  ;  0  ;  0  n  (North American).\n   *   The last two parameters apply to VT400 & up, and denote key-\n   *   board ready and LK01 respectively.\n   *     Ps = 5 3  -> Report Locator status as\n   *   CSI ? 5 3  n  Locator available, if compiled-in, or\n   *   CSI ? 5 0  n  No Locator, if not.\n   *\n   * @vt: #Y CSI DSR   \"Device Status Report\"  \"CSI Ps n\"  \"Request cursor position (CPR) with `Ps` = 6.\"\n   */\n  public deviceStatus(params: IParams): boolean {\n    switch (params.params[0]) {\n      case 5:\n        // status report\n        this._coreService.triggerDataEvent(`${C0.ESC}[0n`);\n        break;\n      case 6:\n        // cursor position\n        const y = this._bufferService.buffer.y + 1;\n        const x = this._bufferService.buffer.x + 1;\n        this._coreService.triggerDataEvent(`${C0.ESC}[${y};${x}R`);\n        break;\n    }\n    return true;\n  }\n\n  // @vt: #P[Only CPR is supported.]  CSI DECDSR  \"DEC Device Status Report\"  \"CSI ? Ps n\"  \"Only CPR is supported (same as DSR).\"\n  public deviceStatusPrivate(params: IParams): boolean {\n    // modern xterm doesnt seem to\n    // respond to any of these except ?6, 6, and 5\n    switch (params.params[0]) {\n      case 6:\n        // cursor position\n        const y = this._bufferService.buffer.y + 1;\n        const x = this._bufferService.buffer.x + 1;\n        this._coreService.triggerDataEvent(`${C0.ESC}[?${y};${x}R`);\n        break;\n      case 15:\n        // no printer\n        // this.handler(C0.ESC + '[?11n');\n        break;\n      case 25:\n        // dont support user defined keys\n        // this.handler(C0.ESC + '[?21n');\n        break;\n      case 26:\n        // north american keyboard\n        // this.handler(C0.ESC + '[?27;1;0;0n');\n        break;\n      case 53:\n        // no dec locator/mouse\n        // this.handler(C0.ESC + '[?50n');\n        break;\n    }\n    return true;\n  }\n\n  /**\n   * CSI ! p   Soft terminal reset (DECSTR).\n   * http://vt100.net/docs/vt220-rm/table4-10.html\n   *\n   * @vt: #Y CSI DECSTR  \"Soft Terminal Reset\"   \"CSI ! p\"   \"Reset several terminal attributes to initial state.\"\n   * There are two terminal reset sequences - RIS and DECSTR. While RIS performs almost a full terminal bootstrap,\n   * DECSTR only resets certain attributes. For most needs DECSTR should be sufficient.\n   *\n   * The following terminal attributes are reset to default values:\n   * - IRM is reset (dafault = false)\n   * - scroll margins are reset (default = viewport size)\n   * - erase attributes are reset to default\n   * - charsets are reset\n   * - DECSC data is reset to initial values\n   * - DECOM is reset to absolute mode\n   *\n   *\n   * FIXME: there are several more attributes missing (see VT520 manual)\n   */\n  public softReset(params: IParams): boolean {\n    this._coreService.isCursorHidden = false;\n    this._onRequestSyncScrollBar.fire();\n    this._bufferService.buffer.scrollTop = 0;\n    this._bufferService.buffer.scrollBottom = this._bufferService.rows - 1;\n    this._curAttrData = DEFAULT_ATTR_DATA.clone();\n    this._coreService.reset();\n    this._charsetService.reset();\n\n    // reset DECSC data\n    this._bufferService.buffer.savedX = 0;\n    this._bufferService.buffer.savedY = this._bufferService.buffer.ybase;\n    this._bufferService.buffer.savedCurAttrData.fg = this._curAttrData.fg;\n    this._bufferService.buffer.savedCurAttrData.bg = this._curAttrData.bg;\n    this._bufferService.buffer.savedCharset = this._charsetService.charset;\n\n    // reset DECOM\n    this._coreService.decPrivateModes.origin = false;\n    return true;\n  }\n\n  /**\n   * CSI Ps SP q  Set cursor style (DECSCUSR, VT520).\n   *   Ps = 0  -> blinking block.\n   *   Ps = 1  -> blinking block (default).\n   *   Ps = 2  -> steady block.\n   *   Ps = 3  -> blinking underline.\n   *   Ps = 4  -> steady underline.\n   *   Ps = 5  -> blinking bar (xterm).\n   *   Ps = 6  -> steady bar (xterm).\n   *\n   * @vt: #Y CSI DECSCUSR  \"Set Cursor Style\"  \"CSI Ps SP q\"   \"Set cursor style.\"\n   * Supported cursor styles:\n   *  - empty, 0 or 1: steady block\n   *  - 2: blink block\n   *  - 3: steady underline\n   *  - 4: blink underline\n   *  - 5: steady bar\n   *  - 6: blink bar\n   */\n  public setCursorStyle(params: IParams): boolean {\n    const param = params.params[0] || 1;\n    switch (param) {\n      case 1:\n      case 2:\n        this._optionsService.options.cursorStyle = 'block';\n        break;\n      case 3:\n      case 4:\n        this._optionsService.options.cursorStyle = 'underline';\n        break;\n      case 5:\n      case 6:\n        this._optionsService.options.cursorStyle = 'bar';\n        break;\n    }\n    const isBlinking = param % 2 === 1;\n    this._optionsService.options.cursorBlink = isBlinking;\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps r\n   *   Set Scrolling Region [top;bottom] (default = full size of win-\n   *   dow) (DECSTBM).\n   *\n   * @vt: #Y CSI DECSTBM \"Set Top and Bottom Margin\" \"CSI Ps ; Ps r\" \"Set top and bottom margins of the viewport [top;bottom] (default = viewport size).\"\n   */\n  public setScrollRegion(params: IParams): boolean {\n    const top = params.params[0] || 1;\n    let bottom: number;\n\n    if (params.length < 2 || (bottom = params.params[1]) >  this._bufferService.rows || bottom === 0) {\n      bottom = this._bufferService.rows;\n    }\n\n    if (bottom > top) {\n      this._bufferService.buffer.scrollTop = top - 1;\n      this._bufferService.buffer.scrollBottom = bottom - 1;\n      this._setCursor(0, 0);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps ; Ps t - Various window manipulations and reports (xterm)\n   *\n   * Note: Only those listed below are supported. All others are left to integrators and\n   * need special treatment based on the embedding environment.\n   *\n   *    Ps = 1 4                                                          supported\n   *      Report xterm text area size in pixels.\n   *      Result is CSI 4 ; height ; width t\n   *    Ps = 14 ; 2                                                       not implemented\n   *    Ps = 16                                                           supported\n   *      Report xterm character cell size in pixels.\n   *      Result is CSI 6 ; height ; width t\n   *    Ps = 18                                                           supported\n   *      Report the size of the text area in characters.\n   *      Result is CSI 8 ; height ; width t\n   *    Ps = 20                                                           supported\n   *      Report xterm window's icon label.\n   *      Result is OSC L label ST\n   *    Ps = 21                                                           supported\n   *      Report xterm window's title.\n   *      Result is OSC l label ST\n   *    Ps = 22 ; 0  -> Save xterm icon and window title on stack.        supported\n   *    Ps = 22 ; 1  -> Save xterm icon title on stack.                   supported\n   *    Ps = 22 ; 2  -> Save xterm window title on stack.                 supported\n   *    Ps = 23 ; 0  -> Restore xterm icon and window title from stack.   supported\n   *    Ps = 23 ; 1  -> Restore xterm icon title from stack.              supported\n   *    Ps = 23 ; 2  -> Restore xterm window title from stack.            supported\n   *    Ps >= 24                                                          not implemented\n   */\n  public windowOptions(params: IParams): boolean {\n    if (!paramToWindowOption(params.params[0], this._optionsService.options.windowOptions)) {\n      return true;\n    }\n    const second = (params.length > 1) ? params.params[1] : 0;\n    switch (params.params[0]) {\n      case 14:  // GetWinSizePixels, returns CSI 4 ; height ; width t\n        if (second !== 2) {\n          this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_WIN_SIZE_PIXELS);\n        }\n        break;\n      case 16:  // GetCellSizePixels, returns CSI 6 ; height ; width t\n        this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_CELL_SIZE_PIXELS);\n        break;\n      case 18:  // GetWinSizeChars, returns CSI 8 ; height ; width t\n        if (this._bufferService) {\n          this._coreService.triggerDataEvent(`${C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);\n        }\n        break;\n      case 22:  // PushTitle\n        if (second === 0 || second === 2) {\n          this._windowTitleStack.push(this._windowTitle);\n          if (this._windowTitleStack.length > STACK_LIMIT) {\n            this._windowTitleStack.shift();\n          }\n        }\n        if (second === 0 || second === 1) {\n          this._iconNameStack.push(this._iconName);\n          if (this._iconNameStack.length > STACK_LIMIT) {\n            this._iconNameStack.shift();\n          }\n        }\n        break;\n      case 23:  // PopTitle\n        if (second === 0 || second === 2) {\n          if (this._windowTitleStack.length) {\n            this.setTitle(this._windowTitleStack.pop()!);\n          }\n        }\n        if (second === 0 || second === 1) {\n          if (this._iconNameStack.length) {\n            this.setIconName(this._iconNameStack.pop()!);\n          }\n        }\n        break;\n    }\n    return true;\n  }\n\n\n  /**\n   * CSI s\n   * ESC 7\n   *   Save cursor (ANSI.SYS).\n   *\n   * @vt: #P[TODO...]  CSI SCOSC   \"Save Cursor\"   \"CSI s\"   \"Save cursor position, charmap and text attributes.\"\n   * @vt: #Y ESC  SC   \"Save Cursor\"   \"ESC 7\"   \"Save cursor position, charmap and text attributes.\"\n   */\n  public saveCursor(params?: IParams): boolean {\n    this._bufferService.buffer.savedX = this._bufferService.buffer.x;\n    this._bufferService.buffer.savedY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;\n    this._bufferService.buffer.savedCurAttrData.fg = this._curAttrData.fg;\n    this._bufferService.buffer.savedCurAttrData.bg = this._curAttrData.bg;\n    this._bufferService.buffer.savedCharset = this._charsetService.charset;\n    return true;\n  }\n\n\n  /**\n   * CSI u\n   * ESC 8\n   *   Restore cursor (ANSI.SYS).\n   *\n   * @vt: #P[TODO...]  CSI SCORC \"Restore Cursor\"  \"CSI u\"   \"Restore cursor position, charmap and text attributes.\"\n   * @vt: #Y ESC  RC \"Restore Cursor\"  \"ESC 8\"   \"Restore cursor position, charmap and text attributes.\"\n   */\n  public restoreCursor(params?: IParams): boolean {\n    this._bufferService.buffer.x = this._bufferService.buffer.savedX || 0;\n    this._bufferService.buffer.y = Math.max(this._bufferService.buffer.savedY - this._bufferService.buffer.ybase, 0);\n    this._curAttrData.fg = this._bufferService.buffer.savedCurAttrData.fg;\n    this._curAttrData.bg = this._bufferService.buffer.savedCurAttrData.bg;\n    this._charsetService.charset = (this as any)._savedCharset;\n    if (this._bufferService.buffer.savedCharset) {\n      this._charsetService.charset = this._bufferService.buffer.savedCharset;\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n\n  /**\n   * OSC 2; <data> ST (set window title)\n   *   Proxy to set window title.\n   *\n   * @vt: #P[Icon name is not exposed.]   OSC    0   \"Set Windows Title and Icon Name\"  \"OSC 0 ; Pt BEL\"  \"Set window title and icon name.\"\n   * Icon name is not supported. For Window Title see below.\n   *\n   * @vt: #Y     OSC    2   \"Set Windows Title\"  \"OSC 2 ; Pt BEL\"  \"Set window title.\"\n   * xterm.js does not manipulate the title directly, instead exposes changes via the event `Terminal.onTitleChange`.\n   */\n  public setTitle(data: string): boolean {\n    this._windowTitle = data;\n    this._onTitleChange.fire(data);\n    return true;\n  }\n\n  /**\n   * OSC 1; <data> ST\n   * Note: Icon name is not exposed.\n   */\n  public setIconName(data: string): boolean {\n    this._iconName = data;\n    return true;\n  }\n\n  protected _parseAnsiColorChange(data: string): IAnsiColorChangeEvent | null {\n    const result: IAnsiColorChangeEvent = { colors: [] };\n    // example data: 5;rgb:aa/bb/cc\n    const regex = /(\\d+);rgb:([\\da-f]{2})\\/([\\da-f]{2})\\/([\\da-f]{2})/gi;\n    let match;\n\n    while ((match = regex.exec(data)) !== null) {\n      result.colors.push({\n        colorIndex: parseInt(match[1]),\n        red: parseInt(match[2], 16),\n        green: parseInt(match[3], 16),\n        blue: parseInt(match[4], 16)\n      });\n    }\n\n    if (result.colors.length === 0) {\n      return null;\n    }\n\n    return result;\n  }\n\n  /**\n   * OSC 4; <num> ; <text> ST (set ANSI color <num> to <text>)\n   *\n   * @vt: #Y    OSC    4    \"Set ANSI color\"   \"OSC 4 ; c ; spec BEL\" \"Change color number `c` to the color specified by `spec`.\"\n   * `c` is the color index between 0 and 255. `spec` color format is 'rgb:hh/hh/hh' where `h` are hexadecimal digits.\n   * There may be multipe c ; spec elements present in the same instruction, e.g. 1;rgb:10/20/30;2;rgb:a0/b0/c0.\n   */\n  public setAnsiColor(data: string): boolean {\n    const event = this._parseAnsiColorChange(data);\n    if (event) {\n      this._onAnsiColorChange.fire(event);\n    }\n    else {\n      this._logService.warn(`Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: ${data}`);\n    }\n    return true;\n  }\n\n  /**\n   * ESC E\n   * C1.NEL\n   *   DEC mnemonic: NEL (https://vt100.net/docs/vt510-rm/NEL)\n   *   Moves cursor to first position on next line.\n   *\n   * @vt: #Y   C1    NEL   \"Next Line\"   \"\\x85\"    \"Move the cursor to the beginning of the next row.\"\n   * @vt: #Y   ESC   NEL   \"Next Line\"   \"ESC E\"   \"Move the cursor to the beginning of the next row.\"\n   */\n  public nextLine(): boolean {\n    this._bufferService.buffer.x = 0;\n    this.index();\n    return true;\n  }\n\n  /**\n   * ESC =\n   *   DEC mnemonic: DECKPAM (https://vt100.net/docs/vt510-rm/DECKPAM.html)\n   *   Enables the numeric keypad to send application sequences to the host.\n   */\n  public keypadApplicationMode(): boolean {\n    this._logService.debug('Serial port requested application keypad.');\n    this._coreService.decPrivateModes.applicationKeypad = true;\n    this._onRequestSyncScrollBar.fire();\n    return true;\n  }\n\n  /**\n   * ESC >\n   *   DEC mnemonic: DECKPNM (https://vt100.net/docs/vt510-rm/DECKPNM.html)\n   *   Enables the keypad to send numeric characters to the host.\n   */\n  public keypadNumericMode(): boolean {\n    this._logService.debug('Switching back to normal keypad.');\n    this._coreService.decPrivateModes.applicationKeypad = false;\n    this._onRequestSyncScrollBar.fire();\n    return true;\n  }\n\n  /**\n   * ESC % @\n   * ESC % G\n   *   Select default character set. UTF-8 is not supported (string are unicode anyways)\n   *   therefore ESC % G does the same.\n   */\n  public selectDefaultCharset(): boolean {\n    this._charsetService.setgLevel(0);\n    this._charsetService.setgCharset(0, DEFAULT_CHARSET); // US (default)\n    return true;\n  }\n\n  /**\n   * ESC ( C\n   *   Designate G0 Character Set, VT100, ISO 2022.\n   * ESC ) C\n   *   Designate G1 Character Set (ISO 2022, VT100).\n   * ESC * C\n   *   Designate G2 Character Set (ISO 2022, VT220).\n   * ESC + C\n   *   Designate G3 Character Set (ISO 2022, VT220).\n   * ESC - C\n   *   Designate G1 Character Set (VT300).\n   * ESC . C\n   *   Designate G2 Character Set (VT300).\n   * ESC / C\n   *   Designate G3 Character Set (VT300). C = A  -> ISO Latin-1 Supplemental. - Supported?\n   */\n  public selectCharset(collectAndFlag: string): boolean {\n    if (collectAndFlag.length !== 2) {\n      this.selectDefaultCharset();\n      return true;\n    }\n    if (collectAndFlag[0] === '/') {\n      return true;  // TODO: Is this supported?\n    }\n    this._charsetService.setgCharset(GLEVEL[collectAndFlag[0]], CHARSETS[collectAndFlag[1]] || DEFAULT_CHARSET);\n    return true;\n  }\n\n  /**\n   * ESC D\n   * C1.IND\n   *   DEC mnemonic: IND (https://vt100.net/docs/vt510-rm/IND.html)\n   *   Moves the cursor down one line in the same column.\n   *\n   * @vt: #Y   C1    IND   \"Index\"   \"\\x84\"    \"Move the cursor one line down scrolling if needed.\"\n   * @vt: #Y   ESC   IND   \"Index\"   \"ESC D\"   \"Move the cursor one line down scrolling if needed.\"\n   */\n  public index(): boolean {\n    this._restrictCursor();\n    const buffer = this._bufferService.buffer;\n    this._bufferService.buffer.y++;\n    if (buffer.y === buffer.scrollBottom + 1) {\n      buffer.y--;\n      this._bufferService.scroll(this._eraseAttrData());\n    } else if (buffer.y >= this._bufferService.rows) {\n      buffer.y = this._bufferService.rows - 1;\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n  /**\n   * ESC H\n   * C1.HTS\n   *   DEC mnemonic: HTS (https://vt100.net/docs/vt510-rm/HTS.html)\n   *   Sets a horizontal tab stop at the column position indicated by\n   *   the value of the active column when the terminal receives an HTS.\n   *\n   * @vt: #Y   C1    HTS   \"Horizontal Tabulation Set\" \"\\x88\"    \"Places a tab stop at the current cursor position.\"\n   * @vt: #Y   ESC   HTS   \"Horizontal Tabulation Set\" \"ESC H\"   \"Places a tab stop at the current cursor position.\"\n   */\n  public tabSet(): boolean {\n    this._bufferService.buffer.tabs[this._bufferService.buffer.x] = true;\n    return true;\n  }\n\n  /**\n   * ESC M\n   * C1.RI\n   *   DEC mnemonic: HTS\n   *   Moves the cursor up one line in the same column. If the cursor is at the top margin,\n   *   the page scrolls down.\n   *\n   * @vt: #Y ESC  IR \"Reverse Index\" \"ESC M\"  \"Move the cursor one line up scrolling if needed.\"\n   */\n  public reverseIndex(): boolean {\n    this._restrictCursor();\n    const buffer = this._bufferService.buffer;\n    if (buffer.y === buffer.scrollTop) {\n      // possibly move the code below to term.reverseScroll();\n      // test: echo -ne '\\e[1;1H\\e[44m\\eM\\e[0m'\n      // blankLine(true) is xterm/linux behavior\n      const scrollRegionHeight = buffer.scrollBottom - buffer.scrollTop;\n      buffer.lines.shiftElements(buffer.ybase + buffer.y, scrollRegionHeight, 1);\n      buffer.lines.set(buffer.ybase + buffer.y, buffer.getBlankLine(this._eraseAttrData()));\n      this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);\n    } else {\n      buffer.y--;\n      this._restrictCursor(); // quickfix to not run out of bounds\n    }\n    return true;\n  }\n\n  /**\n   * ESC c\n   *   DEC mnemonic: RIS (https://vt100.net/docs/vt510-rm/RIS.html)\n   *   Reset to initial state.\n   */\n  public fullReset(): boolean {\n    this._parser.reset();\n    this._onRequestReset.fire();\n    return true;\n  }\n\n  public reset(): void {\n    this._curAttrData = DEFAULT_ATTR_DATA.clone();\n    this._eraseAttrDataInternal = DEFAULT_ATTR_DATA.clone();\n  }\n\n  /**\n   * back_color_erase feature for xterm.\n   */\n  private _eraseAttrData(): IAttributeData {\n    this._eraseAttrDataInternal.bg &= ~(Attributes.CM_MASK | 0xFFFFFF);\n    this._eraseAttrDataInternal.bg |= this._curAttrData.bg & ~0xFC000000;\n    return this._eraseAttrDataInternal;\n  }\n\n  /**\n   * ESC n\n   * ESC o\n   * ESC |\n   * ESC }\n   * ESC ~\n   *   DEC mnemonic: LS (https://vt100.net/docs/vt510-rm/LS.html)\n   *   When you use a locking shift, the character set remains in GL or GR until\n   *   you use another locking shift. (partly supported)\n   */\n  public setgLevel(level: number): boolean {\n    this._charsetService.setgLevel(level);\n    return true;\n  }\n\n  /**\n   * ESC # 8\n   *   DEC mnemonic: DECALN (https://vt100.net/docs/vt510-rm/DECALN.html)\n   *   This control function fills the complete screen area with\n   *   a test pattern (E) used for adjusting screen alignment.\n   *\n   * @vt: #Y   ESC   DECALN   \"Screen Alignment Pattern\"  \"ESC # 8\"  \"Fill viewport with a test pattern (E).\"\n   */\n  public screenAlignmentPattern(): boolean {\n    // prepare cell data\n    const cell = new CellData();\n    cell.content = 1 << Content.WIDTH_SHIFT | 'E'.charCodeAt(0);\n    cell.fg = this._curAttrData.fg;\n    cell.bg = this._curAttrData.bg;\n\n    const buffer = this._bufferService.buffer;\n\n    this._setCursor(0, 0);\n    for (let yOffset = 0; yOffset < this._bufferService.rows; ++yOffset) {\n      const row = buffer.ybase + buffer.y + yOffset;\n      const line = buffer.lines.get(row);\n      if (line) {\n        line.fill(cell);\n        line.isWrapped = false;\n      }\n    }\n    this._dirtyRowService.markAllDirty();\n    this._setCursor(0, 0);\n    return true;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\n/**\n * A base class that can be extended to provide convenience methods for managing the lifecycle of an\n * object and its components.\n */\nexport abstract class Disposable implements IDisposable {\n  protected _disposables: IDisposable[] = [];\n  protected _isDisposed: boolean = false;\n\n  constructor() {\n  }\n\n  /**\n   * Disposes the object, triggering the `dispose` method on all registered IDisposables.\n   */\n  public dispose(): void {\n    this._isDisposed = true;\n    for (const d of this._disposables) {\n      d.dispose();\n    }\n    this._disposables.length = 0;\n  }\n\n  /**\n   * Registers a disposable object.\n   * @param d The disposable to register.\n   * @returns The disposable.\n   */\n  public register<T extends IDisposable>(d: T): T {\n    this._disposables.push(d);\n    return d;\n  }\n\n  /**\n   * Unregisters a disposable object if it has been registered, if not do\n   * nothing.\n   * @param d The disposable to unregister.\n   */\n  public unregister<T extends IDisposable>(d: T): void {\n    const index = this._disposables.indexOf(d);\n    if (index !== -1) {\n      this._disposables.splice(index, 1);\n    }\n  }\n}\n\n/**\n * Dispose of all disposables in an array and set its length to 0.\n */\nexport function disposeArray(disposables: IDisposable[]): void {\n  for (const d of disposables) {\n    d.dispose();\n  }\n  disposables.length = 0;\n}\n\n/**\n * Creates a disposable that will dispose of an array of disposables when disposed.\n */\nexport function getDisposeArrayDisposable(array: IDisposable[]): IDisposable {\n  return { dispose: () => disposeArray(array) };\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ninterface INavigator {\n  userAgent: string;\n  language: string;\n  platform: string;\n}\n\n// We're declaring a navigator global here as we expect it in all runtimes (node and browser), but\n// we want this module to live in common.\ndeclare const navigator: INavigator;\n\nconst isNode = (typeof navigator === 'undefined') ? true : false;\nconst userAgent = (isNode) ? 'node' : navigator.userAgent;\nconst platform = (isNode) ? 'node' : navigator.platform;\n\nexport const isFirefox = userAgent.includes('Firefox');\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\n\n// Find the users platform. We use this to interpret the meta key\n// and ISO third level shifts.\n// http://stackoverflow.com/q/19877924/577598\nexport const isMac = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(platform);\nexport const isIpad = platform === 'iPad';\nexport const isIphone = platform === 'iPhone';\nexport const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].includes(platform);\nexport const isLinux = platform.indexOf('Linux') >= 0;\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport type TypedArray = Uint8Array | Uint16Array | Uint32Array | Uint8ClampedArray | Int8Array | Int16Array | Int32Array | Float32Array | Float64Array;\n\n\n/**\n * polyfill for TypedArray.fill\n * This is needed to support .fill in all safari versions and IE 11.\n */\nexport function fill<T extends TypedArray>(array: T, value: number, start?: number, end?: number): T {\n  // all modern engines that support .fill\n  if (array.fill) {\n    return array.fill(value, start, end) as T;\n  }\n  return fillFallback(array, value, start, end);\n}\n\nexport function fillFallback<T extends TypedArray>(array: T, value: number, start: number = 0, end: number = array.length): T {\n  // safari and IE 11\n  // since IE 11 does not support Array.prototype.fill either\n  // we cannot use the suggested polyfill from MDN\n  // instead we simply fall back to looping\n  if (start >= array.length) {\n    return array;\n  }\n  start = (array.length + start) % array.length;\n  if (end >= array.length) {\n    end = array.length;\n  } else {\n    end = (array.length + end) % array.length;\n  }\n  for (let i = start; i < end; ++i) {\n    array[i] = value;\n  }\n  return array;\n}\n\n/**\n * Concat two typed arrays `a` and `b`.\n * Returns a new typed array.\n */\nexport function concat<T extends TypedArray>(a: T, b: T): T {\n  const result = new (a.constructor as any)(a.length + b.length);\n  result.set(a);\n  result.set(b, a.length);\n  return result;\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CHAR_DATA_CODE_INDEX, NULL_CELL_CODE, WHITESPACE_CELL_CODE } from 'common/buffer/Constants';\nimport { IBufferService } from 'common/services/Services';\n\nexport function updateWindowsModeWrappedState(bufferService: IBufferService): void {\n  // Winpty does not support wraparound mode which means that lines will never\n  // be marked as wrapped. This causes issues for things like copying a line\n  // retaining the wrapped new line characters or if consumers are listening\n  // in on the data stream.\n  //\n  // The workaround for this is to listen to every incoming line feed and mark\n  // the line as wrapped if the last character in the previous line is not a\n  // space. This is certainly not without its problems, but generally on\n  // Windows when text reaches the end of the terminal it's likely going to be\n  // wrapped.\n  const line = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y - 1);\n  const lastChar = line?.get(bufferService.cols - 1);\n\n  const nextLine = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y);\n  if (nextLine && lastChar) {\n    nextLine.isWrapped = (lastChar[CHAR_DATA_CODE_INDEX] !== NULL_CELL_CODE && lastChar[CHAR_DATA_CODE_INDEX] !== WHITESPACE_CELL_CODE);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IAttributeData, IColorRGB, IExtendedAttrs } from 'common/Types';\nimport { Attributes, FgFlags, BgFlags, UnderlineStyle } from 'common/buffer/Constants';\n\nexport class AttributeData implements IAttributeData {\n  public static toColorRGB(value: number): IColorRGB {\n    return [\n      value >>> Attributes.RED_SHIFT & 255,\n      value >>> Attributes.GREEN_SHIFT & 255,\n      value & 255\n    ];\n  }\n\n  public static fromColorRGB(value: IColorRGB): number {\n    return (value[0] & 255) << Attributes.RED_SHIFT | (value[1] & 255) << Attributes.GREEN_SHIFT | value[2] & 255;\n  }\n\n  public clone(): IAttributeData {\n    const newObj = new AttributeData();\n    newObj.fg = this.fg;\n    newObj.bg = this.bg;\n    newObj.extended = this.extended.clone();\n    return newObj;\n  }\n\n  // data\n  public fg = 0;\n  public bg = 0;\n  public extended = new ExtendedAttrs();\n\n  // flags\n  public isInverse(): number   { return this.fg & FgFlags.INVERSE; }\n  public isBold(): number      { return this.fg & FgFlags.BOLD; }\n  public isUnderline(): number { return this.fg & FgFlags.UNDERLINE; }\n  public isBlink(): number     { return this.fg & FgFlags.BLINK; }\n  public isInvisible(): number { return this.fg & FgFlags.INVISIBLE; }\n  public isItalic(): number    { return this.bg & BgFlags.ITALIC; }\n  public isDim(): number       { return this.bg & BgFlags.DIM; }\n\n  // color modes\n  public getFgColorMode(): number { return this.fg & Attributes.CM_MASK; }\n  public getBgColorMode(): number { return this.bg & Attributes.CM_MASK; }\n  public isFgRGB(): boolean       { return (this.fg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isBgRGB(): boolean       { return (this.bg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isFgPalette(): boolean   { return (this.fg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.fg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isBgPalette(): boolean   { return (this.bg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.bg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isFgDefault(): boolean   { return (this.fg & Attributes.CM_MASK) === 0; }\n  public isBgDefault(): boolean   { return (this.bg & Attributes.CM_MASK) === 0; }\n  public isAttributeDefault(): boolean { return this.fg === 0 && this.bg === 0; }\n\n  // colors\n  public getFgColor(): number {\n    switch (this.fg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.fg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.fg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n  public getBgColor(): number {\n    switch (this.bg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.bg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.bg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n\n  // extended attrs\n  public hasExtendedAttrs(): number {\n    return this.bg & BgFlags.HAS_EXTENDED;\n  }\n  public updateExtended(): void {\n    if (this.extended.isEmpty()) {\n      this.bg &= ~BgFlags.HAS_EXTENDED;\n    } else {\n      this.bg |= BgFlags.HAS_EXTENDED;\n    }\n  }\n  public getUnderlineColor(): number {\n    if ((this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor) {\n      switch (this.extended.underlineColor & Attributes.CM_MASK) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:  return this.extended.underlineColor & Attributes.PCOLOR_MASK;\n        case Attributes.CM_RGB:   return this.extended.underlineColor & Attributes.RGB_MASK;\n        default:                  return this.getFgColor();\n      }\n    }\n    return this.getFgColor();\n  }\n  public getUnderlineColorMode(): number {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? this.extended.underlineColor & Attributes.CM_MASK\n      : this.getFgColorMode();\n  }\n  public isUnderlineColorRGB(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_RGB\n      : this.isFgRGB();\n  }\n  public isUnderlineColorPalette(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P16\n          || (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P256\n      : this.isFgPalette();\n  }\n  public isUnderlineColorDefault(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === 0\n      : this.isFgDefault();\n  }\n  public getUnderlineStyle(): UnderlineStyle {\n    return this.fg & FgFlags.UNDERLINE\n      ? (this.bg & BgFlags.HAS_EXTENDED ? this.extended.underlineStyle : UnderlineStyle.SINGLE)\n      : UnderlineStyle.NONE;\n  }\n}\n\n\n/**\n * Extended attributes for a cell.\n * Holds information about different underline styles and color.\n */\nexport class ExtendedAttrs implements IExtendedAttrs {\n  constructor(\n    // underline style, NONE is empty\n    public underlineStyle: UnderlineStyle = UnderlineStyle.NONE,\n    // underline color, -1 is empty (same as FG)\n    public underlineColor: number = -1\n  ) {}\n\n  public clone(): IExtendedAttrs {\n    return new ExtendedAttrs(this.underlineStyle, this.underlineColor);\n  }\n\n  /**\n   * Convenient method to indicate whether the object holds no additional information,\n   * that needs to be persistant in the buffer.\n   */\n  public isEmpty(): boolean {\n    return this.underlineStyle === UnderlineStyle.NONE;\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CircularList, IInsertEvent } from 'common/CircularList';\nimport { IBuffer, BufferIndex, IBufferStringIterator, IBufferStringIteratorResult } from 'common/buffer/Types';\nimport { IBufferLine, ICellData, IAttributeData, ICharset } from 'common/Types';\nimport { BufferLine, DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { CellData } from 'common/buffer/CellData';\nimport { NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_WIDTH, WHITESPACE_CELL_CODE, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_CHAR_INDEX } from 'common/buffer/Constants';\nimport { reflowLargerApplyNewLayout, reflowLargerCreateNewLayout, reflowLargerGetLinesToRemove, reflowSmallerGetNewLineLengths, getWrappedLineTrimmedLength } from 'common/buffer/BufferReflow';\nimport { Marker } from 'common/buffer/Marker';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { DEFAULT_CHARSET } from 'common/data/Charsets';\nimport { ExtendedAttrs } from 'common/buffer/AttributeData';\n\nexport const MAX_BUFFER_SIZE = 4294967295; // 2^32 - 1\n\n/**\n * This class represents a terminal buffer (an internal state of the terminal), where the\n * following information is stored (in high-level):\n *   - text content of this particular buffer\n *   - cursor position\n *   - scroll position\n */\nexport class Buffer implements IBuffer {\n  public lines: CircularList<IBufferLine>;\n  public ydisp: number = 0;\n  public ybase: number = 0;\n  public y: number = 0;\n  public x: number = 0;\n  public scrollBottom: number;\n  public scrollTop: number;\n  // TODO: Type me\n  public tabs: any;\n  public savedY: number = 0;\n  public savedX: number = 0;\n  public savedCurAttrData = DEFAULT_ATTR_DATA.clone();\n  public savedCharset: ICharset | undefined = DEFAULT_CHARSET;\n  public markers: Marker[] = [];\n  private _nullCell: ICellData = CellData.fromCharData([0, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE]);\n  private _whitespaceCell: ICellData = CellData.fromCharData([0, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_WIDTH, WHITESPACE_CELL_CODE]);\n  private _cols: number;\n  private _rows: number;\n\n  constructor(\n    private _hasScrollback: boolean,\n    private _optionsService: IOptionsService,\n    private _bufferService: IBufferService\n  ) {\n    this._cols = this._bufferService.cols;\n    this._rows = this._bufferService.rows;\n    this.lines = new CircularList<IBufferLine>(this._getCorrectBufferLength(this._rows));\n    this.scrollTop = 0;\n    this.scrollBottom = this._rows - 1;\n    this.setupTabStops();\n  }\n\n  public getNullCell(attr?: IAttributeData): ICellData {\n    if (attr) {\n      this._nullCell.fg = attr.fg;\n      this._nullCell.bg = attr.bg;\n      this._nullCell.extended = attr.extended;\n    } else {\n      this._nullCell.fg = 0;\n      this._nullCell.bg = 0;\n      this._nullCell.extended = new ExtendedAttrs();\n    }\n    return this._nullCell;\n  }\n\n  public getWhitespaceCell(attr?: IAttributeData): ICellData {\n    if (attr) {\n      this._whitespaceCell.fg = attr.fg;\n      this._whitespaceCell.bg = attr.bg;\n      this._whitespaceCell.extended = attr.extended;\n    } else {\n      this._whitespaceCell.fg = 0;\n      this._whitespaceCell.bg = 0;\n      this._whitespaceCell.extended = new ExtendedAttrs();\n    }\n    return this._whitespaceCell;\n  }\n\n  public getBlankLine(attr: IAttributeData, isWrapped?: boolean): IBufferLine {\n    return new BufferLine(this._bufferService.cols, this.getNullCell(attr), isWrapped);\n  }\n\n  public get hasScrollback(): boolean {\n    return this._hasScrollback && this.lines.maxLength > this._rows;\n  }\n\n  public get isCursorInViewport(): boolean {\n    const absoluteY = this.ybase + this.y;\n    const relativeY = absoluteY - this.ydisp;\n    return (relativeY >= 0 && relativeY < this._rows);\n  }\n\n  /**\n   * Gets the correct buffer length based on the rows provided, the terminal's\n   * scrollback and whether this buffer is flagged to have scrollback or not.\n   * @param rows The terminal rows to use in the calculation.\n   */\n  private _getCorrectBufferLength(rows: number): number {\n    if (!this._hasScrollback) {\n      return rows;\n    }\n\n    const correctBufferLength = rows + this._optionsService.options.scrollback;\n\n    return correctBufferLength > MAX_BUFFER_SIZE ? MAX_BUFFER_SIZE : correctBufferLength;\n  }\n\n  /**\n   * Fills the buffer's viewport with blank lines.\n   */\n  public fillViewportRows(fillAttr?: IAttributeData): void {\n    if (this.lines.length === 0) {\n      if (fillAttr === undefined) {\n        fillAttr = DEFAULT_ATTR_DATA;\n      }\n      let i = this._rows;\n      while (i--) {\n        this.lines.push(this.getBlankLine(fillAttr));\n      }\n    }\n  }\n\n  /**\n   * Clears the buffer to it's initial state, discarding all previous data.\n   */\n  public clear(): void {\n    this.ydisp = 0;\n    this.ybase = 0;\n    this.y = 0;\n    this.x = 0;\n    this.lines = new CircularList<IBufferLine>(this._getCorrectBufferLength(this._rows));\n    this.scrollTop = 0;\n    this.scrollBottom = this._rows - 1;\n    this.setupTabStops();\n  }\n\n  /**\n   * Resizes the buffer, adjusting its data accordingly.\n   * @param newCols The new number of columns.\n   * @param newRows The new number of rows.\n   */\n  public resize(newCols: number, newRows: number): void {\n    // store reference to null cell with default attrs\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n\n    // Increase max length if needed before adjustments to allow space to fill\n    // as required.\n    const newMaxLength = this._getCorrectBufferLength(newRows);\n    if (newMaxLength > this.lines.maxLength) {\n      this.lines.maxLength = newMaxLength;\n    }\n\n    // The following adjustments should only happen if the buffer has been\n    // initialized/filled.\n    if (this.lines.length > 0) {\n      // Deal with columns increasing (reducing needs to happen after reflow)\n      if (this._cols < newCols) {\n        for (let i = 0; i < this.lines.length; i++) {\n          this.lines.get(i)!.resize(newCols, nullCell);\n        }\n      }\n\n      // Resize rows in both directions as needed\n      let addToY = 0;\n      if (this._rows < newRows) {\n        for (let y = this._rows; y < newRows; y++) {\n          if (this.lines.length < newRows + this.ybase) {\n            if (this._optionsService.options.windowsMode) {\n              // Just add the new missing rows on Windows as conpty reprints the screen with it's\n              // view of the world. Once a line enters scrollback for conpty it remains there\n              this.lines.push(new BufferLine(newCols, nullCell));\n            } else {\n              if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                // There is room above the buffer and there are no empty elements below the line,\n                // scroll up\n                this.ybase--;\n                addToY++;\n                if (this.ydisp > 0) {\n                  // Viewport is at the top of the buffer, must increase downwards\n                  this.ydisp--;\n                }\n              } else {\n                // Add a blank line if there is no buffer left at the top to scroll to, or if there\n                // are blank lines after the cursor\n                this.lines.push(new BufferLine(newCols, nullCell));\n              }\n            }\n          }\n        }\n      } else { // (this._rows >= newRows)\n        for (let y = this._rows; y > newRows; y--) {\n          if (this.lines.length > newRows + this.ybase) {\n            if (this.lines.length > this.ybase + this.y + 1) {\n              // The line is a blank line below the cursor, remove it\n              this.lines.pop();\n            } else {\n              // The line is the cursor, scroll down\n              this.ybase++;\n              this.ydisp++;\n            }\n          }\n        }\n      }\n\n      // Reduce max length if needed after adjustments, this is done after as it\n      // would otherwise cut data from the bottom of the buffer.\n      if (newMaxLength < this.lines.maxLength) {\n        // Trim from the top of the buffer and adjust ybase and ydisp.\n        const amountToTrim = this.lines.length - newMaxLength;\n        if (amountToTrim > 0) {\n          this.lines.trimStart(amountToTrim);\n          this.ybase = Math.max(this.ybase - amountToTrim, 0);\n          this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n          this.savedY = Math.max(this.savedY - amountToTrim, 0);\n        }\n        this.lines.maxLength = newMaxLength;\n      }\n\n      // Make sure that the cursor stays on screen\n      this.x = Math.min(this.x, newCols - 1);\n      this.y = Math.min(this.y, newRows - 1);\n      if (addToY) {\n        this.y += addToY;\n      }\n      this.savedX = Math.min(this.savedX, newCols - 1);\n\n      this.scrollTop = 0;\n    }\n\n    this.scrollBottom = newRows - 1;\n\n    if (this._isReflowEnabled) {\n      this._reflow(newCols, newRows);\n\n      // Trim the end of the line off if cols shrunk\n      if (this._cols > newCols) {\n        for (let i = 0; i < this.lines.length; i++) {\n          this.lines.get(i)!.resize(newCols, nullCell);\n        }\n      }\n    }\n\n    this._cols = newCols;\n    this._rows = newRows;\n  }\n\n  private get _isReflowEnabled(): boolean {\n    return this._hasScrollback && !this._optionsService.options.windowsMode;\n  }\n\n  private _reflow(newCols: number, newRows: number): void {\n    if (this._cols === newCols) {\n      return;\n    }\n\n    // Iterate through rows, ignore the last one as it cannot be wrapped\n    if (newCols > this._cols) {\n      this._reflowLarger(newCols, newRows);\n    } else {\n      this._reflowSmaller(newCols, newRows);\n    }\n  }\n\n  private _reflowLarger(newCols: number, newRows: number): void {\n    const toRemove: number[] = reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(DEFAULT_ATTR_DATA));\n    if (toRemove.length > 0) {\n      const newLayoutResult = reflowLargerCreateNewLayout(this.lines, toRemove);\n      reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n      this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n    }\n  }\n\n  private _reflowLargerAdjustViewport(newCols: number, newRows: number, countRemoved: number): void {\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n    // Adjust viewport based on number of items removed\n    let viewportAdjustments = countRemoved;\n    while (viewportAdjustments-- > 0) {\n      if (this.ybase === 0) {\n        if (this.y > 0) {\n          this.y--;\n        }\n        if (this.lines.length < newRows) {\n          // Add an extra row at the bottom of the viewport\n          this.lines.push(new BufferLine(newCols, nullCell));\n        }\n      } else {\n        if (this.ydisp === this.ybase) {\n          this.ydisp--;\n        }\n        this.ybase--;\n      }\n    }\n    this.savedY = Math.max(this.savedY - countRemoved, 0);\n  }\n\n  private _reflowSmaller(newCols: number, newRows: number): void {\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n    // Gather all BufferLines that need to be inserted into the Buffer here so that they can be\n    // batched up and only committed once\n    const toInsert = [];\n    let countToInsert = 0;\n    // Go backwards as many lines may be trimmed and this will avoid considering them\n    for (let y = this.lines.length - 1; y >= 0; y--) {\n      // Check whether this line is a problem\n      let nextLine = this.lines.get(y) as BufferLine;\n      if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n        continue;\n      }\n\n      // Gather wrapped lines and adjust y to be the starting line\n      const wrappedLines: BufferLine[] = [nextLine];\n      while (nextLine.isWrapped && y > 0) {\n        nextLine = this.lines.get(--y) as BufferLine;\n        wrappedLines.unshift(nextLine);\n      }\n\n      // If these lines contain the cursor don't touch them, the program will handle fixing up\n      // wrapped lines with the cursor\n      const absoluteY = this.ybase + this.y;\n      if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n        continue;\n      }\n\n      const lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n      const destLineLengths = reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n      const linesToAdd = destLineLengths.length - wrappedLines.length;\n      let trimmedLines: number;\n      if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n        // If the top section of the buffer is not yet filled\n        trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n      } else {\n        trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n      }\n\n      // Add the new lines\n      const newLines: BufferLine[] = [];\n      for (let i = 0; i < linesToAdd; i++) {\n        const newLine = this.getBlankLine(DEFAULT_ATTR_DATA, true) as BufferLine;\n        newLines.push(newLine);\n      }\n      if (newLines.length > 0) {\n        toInsert.push({\n          // countToInsert here gets the actual index, taking into account other inserted items.\n          // using this we can iterate through the list forwards\n          start: y + wrappedLines.length + countToInsert,\n          newLines\n        });\n        countToInsert += newLines.length;\n      }\n      wrappedLines.push(...newLines);\n\n      // Copy buffer data to new locations, this needs to happen backwards to do in-place\n      let destLineIndex = destLineLengths.length - 1; // Math.floor(cellsNeeded / newCols);\n      let destCol = destLineLengths[destLineIndex]; // cellsNeeded % newCols;\n      if (destCol === 0) {\n        destLineIndex--;\n        destCol = destLineLengths[destLineIndex];\n      }\n      let srcLineIndex = wrappedLines.length - linesToAdd - 1;\n      let srcCol = lastLineLength;\n      while (srcLineIndex >= 0) {\n        const cellsToCopy = Math.min(srcCol, destCol);\n        wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n        destCol -= cellsToCopy;\n        if (destCol === 0) {\n          destLineIndex--;\n          destCol = destLineLengths[destLineIndex];\n        }\n        srcCol -= cellsToCopy;\n        if (srcCol === 0) {\n          srcLineIndex--;\n          const wrappedLinesIndex = Math.max(srcLineIndex, 0);\n          srcCol = getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n        }\n      }\n\n      // Null out the end of the line ends if a wide character wrapped to the following line\n      for (let i = 0; i < wrappedLines.length; i++) {\n        if (destLineLengths[i] < newCols) {\n          wrappedLines[i].setCell(destLineLengths[i], nullCell);\n        }\n      }\n\n      // Adjust viewport as needed\n      let viewportAdjustments = linesToAdd - trimmedLines;\n      while (viewportAdjustments-- > 0) {\n        if (this.ybase === 0) {\n          if (this.y < newRows - 1) {\n            this.y++;\n            this.lines.pop();\n          } else {\n            this.ybase++;\n            this.ydisp++;\n          }\n        } else {\n          // Ensure ybase does not exceed its maximum value\n          if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n            if (this.ybase === this.ydisp) {\n              this.ydisp++;\n            }\n            this.ybase++;\n          }\n        }\n      }\n      this.savedY = Math.min(this.savedY + linesToAdd, this.ybase + newRows - 1);\n    }\n\n    // Rearrange lines in the buffer if there are any insertions, this is done at the end rather\n    // than earlier so that it's a single O(n) pass through the buffer, instead of O(n^2) from many\n    // costly calls to CircularList.splice.\n    if (toInsert.length > 0) {\n      // Record buffer insert events and then play them back backwards so that the indexes are\n      // correct\n      const insertEvents: IInsertEvent[] = [];\n\n      // Record original lines so they don't get overridden when we rearrange the list\n      const originalLines: BufferLine[] = [];\n      for (let i = 0; i < this.lines.length; i++) {\n        originalLines.push(this.lines.get(i) as BufferLine);\n      }\n      const originalLinesLength = this.lines.length;\n\n      let originalLineIndex = originalLinesLength - 1;\n      let nextToInsertIndex = 0;\n      let nextToInsert = toInsert[nextToInsertIndex];\n      this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n      let countInsertedSoFar = 0;\n      for (let i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n        if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n          // Insert extra lines here, adjusting i as needed\n          for (let nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n            this.lines.set(i--, nextToInsert.newLines[nextI]);\n          }\n          i++;\n\n          // Create insert events for later\n          insertEvents.push({\n            index: originalLineIndex + 1,\n            amount: nextToInsert.newLines.length\n          });\n\n          countInsertedSoFar += nextToInsert.newLines.length;\n          nextToInsert = toInsert[++nextToInsertIndex];\n        } else {\n          this.lines.set(i, originalLines[originalLineIndex--]);\n        }\n      }\n\n      // Update markers\n      let insertCountEmitted = 0;\n      for (let i = insertEvents.length - 1; i >= 0; i--) {\n        insertEvents[i].index += insertCountEmitted;\n        this.lines.onInsertEmitter.fire(insertEvents[i]);\n        insertCountEmitted += insertEvents[i].amount;\n      }\n      const amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n      if (amountToTrim > 0) {\n        this.lines.onTrimEmitter.fire(amountToTrim);\n      }\n    }\n  }\n\n  // private _reflowSmallerGetLinesNeeded()\n\n  /**\n   * Translates a string index back to a BufferIndex.\n   * To get the correct buffer position the string must start at `startCol` 0\n   * (default in translateBufferLineToString).\n   * The method also works on wrapped line strings given rows were not trimmed.\n   * The method operates on the CharData string length, there are no\n   * additional content or boundary checks. Therefore the string and the buffer\n   * should not be altered in between.\n   * TODO: respect trim flag after fixing #1685\n   * @param lineIndex line index the string was retrieved from\n   * @param stringIndex index within the string\n   * @param startCol column offset the string was retrieved from\n   */\n  public stringIndexToBufferIndex(lineIndex: number, stringIndex: number, trimRight: boolean = false): BufferIndex {\n    while (stringIndex) {\n      const line = this.lines.get(lineIndex);\n      if (!line) {\n        return [-1, -1];\n      }\n      const length = (trimRight) ? line.getTrimmedLength() : line.length;\n      for (let i = 0; i < length; ++i) {\n        if (line.get(i)[CHAR_DATA_WIDTH_INDEX]) {\n          // empty cells report a string length of 0, but get replaced\n          // with a whitespace in translateToString, thus replace with 1\n          stringIndex -= line.get(i)[CHAR_DATA_CHAR_INDEX].length || 1;\n        }\n        if (stringIndex < 0) {\n          return [lineIndex, i];\n        }\n      }\n      lineIndex++;\n    }\n    return [lineIndex, 0];\n  }\n\n  /**\n   * Translates a buffer line to a string, with optional start and end columns.\n   * Wide characters will count as two columns in the resulting string. This\n   * function is useful for getting the actual text underneath the raw selection\n   * position.\n   * @param line The line being translated.\n   * @param trimRight Whether to trim whitespace to the right.\n   * @param startCol The column to start at.\n   * @param endCol The column to end at.\n   */\n  public translateBufferLineToString(lineIndex: number, trimRight: boolean, startCol: number = 0, endCol?: number): string {\n    const line = this.lines.get(lineIndex);\n    if (!line) {\n      return '';\n    }\n    return line.translateToString(trimRight, startCol, endCol);\n  }\n\n  public getWrappedRangeForLine(y: number): { first: number, last: number } {\n    let first = y;\n    let last = y;\n    // Scan upwards for wrapped lines\n    while (first > 0 && this.lines.get(first)!.isWrapped) {\n      first--;\n    }\n    // Scan downwards for wrapped lines\n    while (last + 1 < this.lines.length && this.lines.get(last + 1)!.isWrapped) {\n      last++;\n    }\n    return { first, last };\n  }\n\n  /**\n   * Setup the tab stops.\n   * @param i The index to start setting up tab stops from.\n   */\n  public setupTabStops(i?: number): void {\n    if (i !== null && i !== undefined) {\n      if (!this.tabs[i]) {\n        i = this.prevStop(i);\n      }\n    } else {\n      this.tabs = {};\n      i = 0;\n    }\n\n    for (; i < this._cols; i += this._optionsService.options.tabStopWidth) {\n      this.tabs[i] = true;\n    }\n  }\n\n  /**\n   * Move the cursor to the previous tab stop from the given position (default is current).\n   * @param x The position to move the cursor to the previous tab stop.\n   */\n  public prevStop(x?: number): number {\n    if (x === null || x === undefined) {\n      x = this.x;\n    }\n    while (!this.tabs[--x] && x > 0);\n    return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n  }\n\n  /**\n   * Move the cursor one tab stop forward from the given position (default is current).\n   * @param x The position to move the cursor one tab stop forward.\n   */\n  public nextStop(x?: number): number {\n    if (x === null || x === undefined) {\n      x = this.x;\n    }\n    while (!this.tabs[++x] && x < this._cols);\n    return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n  }\n\n  public addMarker(y: number): Marker {\n    const marker = new Marker(y);\n    this.markers.push(marker);\n    marker.register(this.lines.onTrim(amount => {\n      marker.line -= amount;\n      // The marker should be disposed when the line is trimmed from the buffer\n      if (marker.line < 0) {\n        marker.dispose();\n      }\n    }));\n    marker.register(this.lines.onInsert(event => {\n      if (marker.line >= event.index) {\n        marker.line += event.amount;\n      }\n    }));\n    marker.register(this.lines.onDelete(event => {\n      // Delete the marker if it's within the range\n      if (marker.line >= event.index && marker.line < event.index + event.amount) {\n        marker.dispose();\n      }\n\n      // Shift the marker if it's after the deleted range\n      if (marker.line > event.index) {\n        marker.line -= event.amount;\n      }\n    }));\n    marker.register(marker.onDispose(() => this._removeMarker(marker)));\n    return marker;\n  }\n\n  private _removeMarker(marker: Marker): void {\n    this.markers.splice(this.markers.indexOf(marker), 1);\n  }\n\n  public iterator(trimRight: boolean, startIndex?: number, endIndex?: number, startOverscan?: number, endOverscan?: number): IBufferStringIterator {\n    return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n  }\n}\n\n/**\n * Iterator to get unwrapped content strings from the buffer.\n * The iterator returns at least the string data between the borders\n * `startIndex` and `endIndex` (exclusive) and will expand the lines\n * by `startOverscan` to the top and by `endOverscan` to the bottom,\n * if no new line was found in between.\n * It will never read/return string data beyond `startIndex - startOverscan`\n * or `endIndex + endOverscan`. Therefore the first and last line might be truncated.\n * It is possible to always get the full string for the first and last line as well\n * by setting the overscan values to the actual buffer length. This not recommended\n * since it might return the whole buffer within a single string in a worst case scenario.\n */\nexport class BufferStringIterator implements IBufferStringIterator {\n  private _current: number;\n\n  constructor (\n    private _buffer: IBuffer,\n    private _trimRight: boolean,\n    private _startIndex: number = 0,\n    private _endIndex: number = _buffer.lines.length,\n    private _startOverscan: number = 0,\n    private _endOverscan: number = 0\n  ) {\n    if (this._startIndex < 0) {\n      this._startIndex = 0;\n    }\n    if (this._endIndex > this._buffer.lines.length) {\n      this._endIndex = this._buffer.lines.length;\n    }\n    this._current = this._startIndex;\n  }\n\n  public hasNext(): boolean {\n    return this._current < this._endIndex;\n  }\n\n  public next(): IBufferStringIteratorResult {\n    const range = this._buffer.getWrappedRangeForLine(this._current);\n    // limit search window to overscan value at both borders\n    if (range.first < this._startIndex - this._startOverscan) {\n      range.first = this._startIndex - this._startOverscan;\n    }\n    if (range.last > this._endIndex + this._endOverscan) {\n      range.last = this._endIndex + this._endOverscan;\n    }\n    // limit to current buffer length\n    range.first = Math.max(range.first, 0);\n    range.last = Math.min(range.last, this._buffer.lines.length);\n    let content = '';\n    for (let i = range.first; i <= range.last; ++i) {\n      content += this._buffer.translateBufferLineToString(i, this._trimRight);\n    }\n    this._current = range.last + 1;\n    return { range, content };\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CharData, IBufferLine, ICellData, IAttributeData, IExtendedAttrs } from 'common/Types';\nimport { stringFromCodePoint } from 'common/input/TextDecoder';\nimport { CHAR_DATA_CHAR_INDEX, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_ATTR_INDEX, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE, WHITESPACE_CELL_CHAR, Content, BgFlags } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { AttributeData, ExtendedAttrs } from 'common/buffer/AttributeData';\n\n/**\n * buffer memory layout:\n *\n *   |             uint32_t             |        uint32_t         |        uint32_t         |\n *   |             `content`            |          `FG`           |          `BG`           |\n *   | wcwidth(2) comb(1) codepoint(21) | flags(8) R(8) G(8) B(8) | flags(8) R(8) G(8) B(8) |\n */\n\n\n/** typed array slots taken by one cell */\nconst CELL_SIZE = 3;\n\n/**\n * Cell member indices.\n *\n * Direct access:\n *    `content = data[column * CELL_SIZE + Cell.CONTENT];`\n *    `fg = data[column * CELL_SIZE + Cell.FG];`\n *    `bg = data[column * CELL_SIZE + Cell.BG];`\n */\nconst enum Cell {\n  CONTENT = 0,\n  FG = 1, // currently simply holds all known attrs\n  BG = 2  // currently unused\n}\n\nexport const DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\n\n/**\n * Typed array based bufferline implementation.\n *\n * There are 2 ways to insert data into the cell buffer:\n * - `setCellFromCodepoint` + `addCodepointToCell`\n *   Use these for data that is already UTF32.\n *   Used during normal input in `InputHandler` for faster buffer access.\n * - `setCell`\n *   This method takes a CellData object and stores the data in the buffer.\n *   Use `CellData.fromCharData` to create the CellData object (e.g. from JS string).\n *\n * To retrieve data from the buffer use either one of the primitive methods\n * (if only one particular value is needed) or `loadCell`. For `loadCell` in a loop\n * memory allocs / GC pressure can be greatly reduced by reusing the CellData object.\n */\nexport class BufferLine implements IBufferLine {\n  protected _data: Uint32Array;\n  protected _combined: {[index: number]: string} = {};\n  protected _extendedAttrs: {[index: number]: ExtendedAttrs} = {};\n  public length: number;\n\n  constructor(cols: number, fillCellData?: ICellData, public isWrapped: boolean = false) {\n    this._data = new Uint32Array(cols * CELL_SIZE);\n    const cell = fillCellData || CellData.fromCharData([0, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE]);\n    for (let i = 0; i < cols; ++i) {\n      this.setCell(i, cell);\n    }\n    this.length = cols;\n  }\n\n  /**\n   * Get cell data CharData.\n   * @deprecated\n   */\n  public get(index: number): CharData {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    const cp = content & Content.CODEPOINT_MASK;\n    return [\n      this._data[index * CELL_SIZE + Cell.FG],\n      (content & Content.IS_COMBINED_MASK)\n        ? this._combined[index]\n        : (cp) ? stringFromCodePoint(cp) : '',\n      content >> Content.WIDTH_SHIFT,\n      (content & Content.IS_COMBINED_MASK)\n        ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n        : cp\n    ];\n  }\n\n  /**\n   * Set cell data from CharData.\n   * @deprecated\n   */\n  public set(index: number, value: CharData): void {\n    this._data[index * CELL_SIZE + Cell.FG] = value[CHAR_DATA_ATTR_INDEX];\n    if (value[CHAR_DATA_CHAR_INDEX].length > 1) {\n      this._combined[index] = value[1];\n      this._data[index * CELL_SIZE + Cell.CONTENT] = index | Content.IS_COMBINED_MASK | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    } else {\n      this._data[index * CELL_SIZE + Cell.CONTENT] = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n  }\n\n  /**\n   * primitive getters\n   * use these when only one value is needed, otherwise use `loadCell`\n   */\n  public getWidth(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] >> Content.WIDTH_SHIFT;\n  }\n\n  /** Test whether content has width. */\n  public hasWidth(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.WIDTH_MASK;\n  }\n\n  /** Get FG cell component. */\n  public getFg(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.FG];\n  }\n\n  /** Get BG cell component. */\n  public getBg(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.BG];\n  }\n\n  /**\n   * Test whether contains any chars.\n   * Basically an empty has no content, but other cells might differ in FG/BG\n   * from real empty cells.\n   * */\n  public hasContent(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.HAS_CONTENT_MASK;\n  }\n\n  /**\n   * Get codepoint of the cell.\n   * To be in line with `code` in CharData this either returns\n   * a single UTF32 codepoint or the last codepoint of a combined string.\n   */\n  public getCodePoint(index: number): number {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      return this._combined[index].charCodeAt(this._combined[index].length - 1);\n    }\n    return content & Content.CODEPOINT_MASK;\n  }\n\n  /** Test whether the cell contains a combined string. */\n  public isCombined(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.IS_COMBINED_MASK;\n  }\n\n  /** Returns the string content of the cell. */\n  public getString(index: number): string {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      return this._combined[index];\n    }\n    if (content & Content.CODEPOINT_MASK) {\n      return stringFromCodePoint(content & Content.CODEPOINT_MASK);\n    }\n    // return empty string for empty cells\n    return '';\n  }\n\n  /**\n   * Load data at `index` into `cell`. This is used to access cells in a way that's more friendly\n   * to GC as it significantly reduced the amount of new objects/references needed.\n   */\n  public loadCell(index: number, cell: ICellData): ICellData {\n    const startIndex = index * CELL_SIZE;\n    cell.content = this._data[startIndex + Cell.CONTENT];\n    cell.fg = this._data[startIndex + Cell.FG];\n    cell.bg = this._data[startIndex + Cell.BG];\n    if (cell.content & Content.IS_COMBINED_MASK) {\n      cell.combinedData = this._combined[index];\n    }\n    if (cell.bg & BgFlags.HAS_EXTENDED) {\n      cell.extended = this._extendedAttrs[index];\n    }\n    return cell;\n  }\n\n  /**\n   * Set data at `index` to `cell`.\n   */\n  public setCell(index: number, cell: ICellData): void {\n    if (cell.content & Content.IS_COMBINED_MASK) {\n      this._combined[index] = cell.combinedData;\n    }\n    if (cell.bg & BgFlags.HAS_EXTENDED) {\n      this._extendedAttrs[index] = cell.extended;\n    }\n    this._data[index * CELL_SIZE + Cell.CONTENT] = cell.content;\n    this._data[index * CELL_SIZE + Cell.FG] = cell.fg;\n    this._data[index * CELL_SIZE + Cell.BG] = cell.bg;\n  }\n\n  /**\n   * Set cell data from input handler.\n   * Since the input handler see the incoming chars as UTF32 codepoints,\n   * it gets an optimized access method.\n   */\n  public setCellFromCodePoint(index: number, codePoint: number, width: number, fg: number, bg: number, eAttrs: IExtendedAttrs): void {\n    if (bg & BgFlags.HAS_EXTENDED) {\n      this._extendedAttrs[index] = eAttrs;\n    }\n    this._data[index * CELL_SIZE + Cell.CONTENT] = codePoint | (width << Content.WIDTH_SHIFT);\n    this._data[index * CELL_SIZE + Cell.FG] = fg;\n    this._data[index * CELL_SIZE + Cell.BG] = bg;\n  }\n\n  /**\n   * Add a codepoint to a cell from input handler.\n   * During input stage combining chars with a width of 0 follow and stack\n   * onto a leading char. Since we already set the attrs\n   * by the previous `setDataFromCodePoint` call, we can omit it here.\n   */\n  public addCodepointToCell(index: number, codePoint: number): void {\n    let content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      // we already have a combined string, simply add\n      this._combined[index] += stringFromCodePoint(codePoint);\n    } else {\n      if (content & Content.CODEPOINT_MASK) {\n        // normal case for combining chars:\n        //  - move current leading char + new one into combined string\n        //  - set combined flag\n        this._combined[index] = stringFromCodePoint(content & Content.CODEPOINT_MASK) + stringFromCodePoint(codePoint);\n        content &= ~Content.CODEPOINT_MASK; // set codepoint in buffer to 0\n        content |= Content.IS_COMBINED_MASK;\n      } else {\n        // should not happen - we actually have no data in the cell yet\n        // simply set the data in the cell buffer with a width of 1\n        content = codePoint | (1 << Content.WIDTH_SHIFT);\n      }\n      this._data[index * CELL_SIZE + Cell.CONTENT] = content;\n    }\n  }\n\n  public insertCells(pos: number, n: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    pos %= this.length;\n\n    // handle fullwidth at pos: reset cell one to the left if pos is second cell of a wide char\n    if (pos && this.getWidth(pos - 1) === 2) {\n      this.setCellFromCodePoint(pos - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n\n    if (n < this.length - pos) {\n      const cell = new CellData();\n      for (let i = this.length - pos - n - 1; i >= 0; --i) {\n        this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n      }\n      for (let i = 0; i < n; ++i) {\n        this.setCell(pos + i, fillCellData);\n      }\n    } else {\n      for (let i = pos; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    }\n\n    // handle fullwidth at line end: reset last cell if it is first cell of a wide char\n    if (this.getWidth(this.length - 1) === 2) {\n      this.setCellFromCodePoint(this.length - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n  }\n\n  public deleteCells(pos: number, n: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    pos %= this.length;\n    if (n < this.length - pos) {\n      const cell = new CellData();\n      for (let i = 0; i < this.length - pos - n; ++i) {\n        this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n      }\n      for (let i = this.length - n; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    } else {\n      for (let i = pos; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    }\n\n    // handle fullwidth at pos:\n    // - reset pos-1 if wide char\n    // - reset pos if width==0 (previous second cell of a wide char)\n    if (pos && this.getWidth(pos - 1) === 2) {\n      this.setCellFromCodePoint(pos - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n    if (this.getWidth(pos) === 0 && !this.hasContent(pos)) {\n      this.setCellFromCodePoint(pos, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n  }\n\n  public replaceCells(start: number, end: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    // handle fullwidth at start: reset cell one to the left if start is second cell of a wide char\n    if (start && this.getWidth(start - 1) === 2) {\n      this.setCellFromCodePoint(start - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n    // handle fullwidth at last cell + 1: reset to empty cell if it is second part of a wide char\n    if (end < this.length && this.getWidth(end - 1) === 2) {\n      this.setCellFromCodePoint(end, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n\n    while (start < end  && start < this.length) {\n      this.setCell(start++, fillCellData);\n    }\n  }\n\n  public resize(cols: number, fillCellData: ICellData): void {\n    if (cols === this.length) {\n      return;\n    }\n    if (cols > this.length) {\n      const data = new Uint32Array(cols * CELL_SIZE);\n      if (this.length) {\n        if (cols * CELL_SIZE < this._data.length) {\n          data.set(this._data.subarray(0, cols * CELL_SIZE));\n        } else {\n          data.set(this._data);\n        }\n      }\n      this._data = data;\n      for (let i = this.length; i < cols; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    } else {\n      if (cols) {\n        const data = new Uint32Array(cols * CELL_SIZE);\n        data.set(this._data.subarray(0, cols * CELL_SIZE));\n        this._data = data;\n        // Remove any cut off combined data, FIXME: repeat this for extended attrs\n        const keys = Object.keys(this._combined);\n        for (let i = 0; i < keys.length; i++) {\n          const key = parseInt(keys[i], 10);\n          if (key >= cols) {\n            delete this._combined[key];\n          }\n        }\n      } else {\n        this._data = new Uint32Array(0);\n        this._combined = {};\n      }\n    }\n    this.length = cols;\n  }\n\n  /** fill a line with fillCharData */\n  public fill(fillCellData: ICellData): void {\n    this._combined = {};\n    this._extendedAttrs = {};\n    for (let i = 0; i < this.length; ++i) {\n      this.setCell(i, fillCellData);\n    }\n  }\n\n  /** alter to a full copy of line  */\n  public copyFrom(line: BufferLine): void {\n    if (this.length !== line.length) {\n      this._data = new Uint32Array(line._data);\n    } else {\n      // use high speed copy if lengths are equal\n      this._data.set(line._data);\n    }\n    this.length = line.length;\n    this._combined = {};\n    for (const el in line._combined) {\n      this._combined[el] = line._combined[el];\n    }\n    this._extendedAttrs = {};\n    for (const el in line._extendedAttrs) {\n      this._extendedAttrs[el] = line._extendedAttrs[el];\n    }\n    this.isWrapped = line.isWrapped;\n  }\n\n  /** create a new clone */\n  public clone(): IBufferLine {\n    const newLine = new BufferLine(0);\n    newLine._data = new Uint32Array(this._data);\n    newLine.length = this.length;\n    for (const el in this._combined) {\n      newLine._combined[el] = this._combined[el];\n    }\n    for (const el in this._extendedAttrs) {\n      newLine._extendedAttrs[el] = this._extendedAttrs[el];\n    }\n    newLine.isWrapped = this.isWrapped;\n    return newLine;\n  }\n\n  public getTrimmedLength(): number {\n    for (let i = this.length - 1; i >= 0; --i) {\n      if ((this._data[i * CELL_SIZE + Cell.CONTENT] & Content.HAS_CONTENT_MASK)) {\n        return i + (this._data[i * CELL_SIZE + Cell.CONTENT] >> Content.WIDTH_SHIFT);\n      }\n    }\n    return 0;\n  }\n\n  public copyCellsFrom(src: BufferLine, srcCol: number, destCol: number, length: number, applyInReverse: boolean): void {\n    const srcData = src._data;\n    if (applyInReverse) {\n      for (let cell = length - 1; cell >= 0; cell--) {\n        for (let i = 0; i < CELL_SIZE; i++) {\n          this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n        }\n      }\n    } else {\n      for (let cell = 0; cell < length; cell++) {\n        for (let i = 0; i < CELL_SIZE; i++) {\n          this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n        }\n      }\n    }\n\n    // Move any combined data over as needed, FIXME: repeat for extended attrs\n    const srcCombinedKeys = Object.keys(src._combined);\n    for (let i = 0; i < srcCombinedKeys.length; i++) {\n      const key = parseInt(srcCombinedKeys[i], 10);\n      if (key >= srcCol) {\n        this._combined[key - srcCol + destCol] = src._combined[key];\n      }\n    }\n  }\n\n  public translateToString(trimRight: boolean = false, startCol: number = 0, endCol: number = this.length): string {\n    if (trimRight) {\n      endCol = Math.min(endCol, this.getTrimmedLength());\n    }\n    let result = '';\n    while (startCol < endCol) {\n      const content = this._data[startCol * CELL_SIZE + Cell.CONTENT];\n      const cp = content & Content.CODEPOINT_MASK;\n      result += (content & Content.IS_COMBINED_MASK) ? this._combined[startCol] : (cp) ? stringFromCodePoint(cp) : WHITESPACE_CELL_CHAR;\n      startCol += (content >> Content.WIDTH_SHIFT) || 1; // always advance by 1\n    }\n    return result;\n  }\n}\n","/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferRange } from 'xterm';\n\nexport function getRangeLength(range: IBufferRange, cols: number): number {\n  if (range.start.y === range.end.y) {\n    return range.end.x - range.start.x + 1;\n  }\n  if (range.start.y > range.end.y) {\n    throw new Error(`Buffer range end (${range.end.x}, ${range.end.y}) cannot be before start (${range.start.x}, ${range.start.y})`);\n  }\n  return cols * (range.end.y - range.start.y - 1) + cols - range.start.x + range.end.x;\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { BufferLine } from 'common/buffer/BufferLine';\nimport { CircularList } from 'common/CircularList';\nimport { IBufferLine, ICellData } from 'common/Types';\n\nexport interface INewLayoutResult {\n  layout: number[];\n  countRemoved: number;\n}\n\n/**\n * Evaluates and returns indexes to be removed after a reflow larger occurs. Lines will be removed\n * when a wrapped line unwraps.\n * @param lines The buffer lines.\n * @param newCols The columns after resize.\n */\nexport function reflowLargerGetLinesToRemove(lines: CircularList<IBufferLine>, oldCols: number, newCols: number, bufferAbsoluteY: number, nullCell: ICellData): number[] {\n  // Gather all BufferLines that need to be removed from the Buffer here so that they can be\n  // batched up and only committed once\n  const toRemove: number[] = [];\n\n  for (let y = 0; y < lines.length - 1; y++) {\n    // Check if this row is wrapped\n    let i = y;\n    let nextLine = lines.get(++i) as BufferLine;\n    if (!nextLine.isWrapped) {\n      continue;\n    }\n\n    // Check how many lines it's wrapped for\n    const wrappedLines: BufferLine[] = [lines.get(y) as BufferLine];\n    while (i < lines.length && nextLine.isWrapped) {\n      wrappedLines.push(nextLine);\n      nextLine = lines.get(++i) as BufferLine;\n    }\n\n    // If these lines contain the cursor don't touch them, the program will handle fixing up wrapped\n    // lines with the cursor\n    if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n      y += wrappedLines.length - 1;\n      continue;\n    }\n\n    // Copy buffer data to new locations\n    let destLineIndex = 0;\n    let destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n    let srcLineIndex = 1;\n    let srcCol = 0;\n    while (srcLineIndex < wrappedLines.length) {\n      const srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n      const srcRemainingCells = srcTrimmedTineLength - srcCol;\n      const destRemainingCells = newCols - destCol;\n      const cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n\n      wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n\n      destCol += cellsToCopy;\n      if (destCol === newCols) {\n        destLineIndex++;\n        destCol = 0;\n      }\n      srcCol += cellsToCopy;\n      if (srcCol === srcTrimmedTineLength) {\n        srcLineIndex++;\n        srcCol = 0;\n      }\n\n      // Make sure the last cell isn't wide, if it is copy it to the current dest\n      if (destCol === 0 && destLineIndex !== 0) {\n        if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n          wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n          // Null out the end of the last row\n          wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n        }\n      }\n    }\n\n    // Clear out remaining cells or fragments could remain;\n    wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n\n    // Work backwards and remove any rows at the end that only contain null cells\n    let countToRemove = 0;\n    for (let i = wrappedLines.length - 1; i > 0; i--) {\n      if (i > destLineIndex || wrappedLines[i].getTrimmedLength() === 0) {\n        countToRemove++;\n      } else {\n        break;\n      }\n    }\n\n    if (countToRemove > 0) {\n      toRemove.push(y + wrappedLines.length - countToRemove); // index\n      toRemove.push(countToRemove);\n    }\n\n    y += wrappedLines.length - 1;\n  }\n  return toRemove;\n}\n\n/**\n * Creates and return the new layout for lines given an array of indexes to be removed.\n * @param lines The buffer lines.\n * @param toRemove The indexes to remove.\n */\nexport function reflowLargerCreateNewLayout(lines: CircularList<IBufferLine>, toRemove: number[]): INewLayoutResult {\n  const layout: number[] = [];\n  // First iterate through the list and get the actual indexes to use for rows\n  let nextToRemoveIndex = 0;\n  let nextToRemoveStart = toRemove[nextToRemoveIndex];\n  let countRemovedSoFar = 0;\n  for (let i = 0; i < lines.length; i++) {\n    if (nextToRemoveStart === i) {\n      const countToRemove = toRemove[++nextToRemoveIndex];\n\n      // Tell markers that there was a deletion\n      lines.onDeleteEmitter.fire({\n        index: i - countRemovedSoFar,\n        amount: countToRemove\n      });\n\n      i += countToRemove - 1;\n      countRemovedSoFar += countToRemove;\n      nextToRemoveStart = toRemove[++nextToRemoveIndex];\n    } else {\n      layout.push(i);\n    }\n  }\n  return {\n    layout,\n    countRemoved: countRemovedSoFar\n  };\n}\n\n/**\n * Applies a new layout to the buffer. This essentially does the same as many splice calls but it's\n * done all at once in a single iteration through the list since splice is very expensive.\n * @param lines The buffer lines.\n * @param newLayout The new layout to apply.\n */\nexport function reflowLargerApplyNewLayout(lines: CircularList<IBufferLine>, newLayout: number[]): void {\n  // Record original lines so they don't get overridden when we rearrange the list\n  const newLayoutLines: BufferLine[] = [];\n  for (let i = 0; i < newLayout.length; i++) {\n    newLayoutLines.push(lines.get(newLayout[i]) as BufferLine);\n  }\n\n  // Rearrange the list\n  for (let i = 0; i < newLayoutLines.length; i++) {\n    lines.set(i, newLayoutLines[i]);\n  }\n  lines.length = newLayout.length;\n}\n\n/**\n * Gets the new line lengths for a given wrapped line. The purpose of this function it to pre-\n * compute the wrapping points since wide characters may need to be wrapped onto the following line.\n * This function will return an array of numbers of where each line wraps to, the resulting array\n * will only contain the values `newCols` (when the line does not end with a wide character) and\n * `newCols - 1` (when the line does end with a wide character), except for the last value which\n * will contain the remaining items to fill the line.\n *\n * Calling this with a `newCols` value of `1` will lock up.\n *\n * @param wrappedLines The wrapped lines to evaluate.\n * @param oldCols The columns before resize.\n * @param newCols The columns after resize.\n */\nexport function reflowSmallerGetNewLineLengths(wrappedLines: BufferLine[], oldCols: number, newCols: number): number[] {\n  const newLineLengths: number[] = [];\n  const cellsNeeded = wrappedLines.map((l, i) => getWrappedLineTrimmedLength(wrappedLines, i, oldCols)).reduce((p, c) => p + c);\n\n  // Use srcCol and srcLine to find the new wrapping point, use that to get the cellsAvailable and\n  // linesNeeded\n  let srcCol = 0;\n  let srcLine = 0;\n  let cellsAvailable = 0;\n  while (cellsAvailable < cellsNeeded) {\n    if (cellsNeeded - cellsAvailable < newCols) {\n      // Add the final line and exit the loop\n      newLineLengths.push(cellsNeeded - cellsAvailable);\n      break;\n    }\n    srcCol += newCols;\n    const oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n    if (srcCol > oldTrimmedLength) {\n      srcCol -= oldTrimmedLength;\n      srcLine++;\n    }\n    const endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n    if (endsWithWide) {\n      srcCol--;\n    }\n    const lineLength = endsWithWide ? newCols - 1 : newCols;\n    newLineLengths.push(lineLength);\n    cellsAvailable += lineLength;\n  }\n\n  return newLineLengths;\n}\n\nexport function getWrappedLineTrimmedLength(lines: BufferLine[], i: number, cols: number): number {\n  // If this is the last row in the wrapped line, get the actual trimmed length\n  if (i === lines.length - 1) {\n    return lines[i].getTrimmedLength();\n  }\n  // Detect whether the following line starts with a wide character and the end of the current line\n  // is null, if so then we can be pretty sure the null character should be excluded from the line\n  // length]\n  const endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n  const followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n  if (endsInNull && followingLineStartsWithWide) {\n    return cols - 1;\n  }\n  return cols;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { IAttributeData } from 'common/Types';\nimport { Buffer } from 'common/buffer/Buffer';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { Disposable } from 'common/Lifecycle';\n\n/**\n * The BufferSet represents the set of two buffers used by xterm terminals (normal and alt) and\n * provides also utilities for working with them.\n */\nexport class BufferSet extends Disposable implements IBufferSet {\n  private _normal!: Buffer;\n  private _alt!: Buffer;\n  private _activeBuffer!: Buffer;\n\n  private _onBufferActivate = this.register(new EventEmitter<{activeBuffer: IBuffer, inactiveBuffer: IBuffer}>());\n  public get onBufferActivate(): IEvent<{activeBuffer: IBuffer, inactiveBuffer: IBuffer}> { return this._onBufferActivate.event; }\n\n  /**\n   * Create a new BufferSet for the given terminal.\n   * @param _terminal - The terminal the BufferSet will belong to\n   */\n  constructor(\n    private readonly _optionsService: IOptionsService,\n    private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this.reset();\n  }\n\n  public reset(): void {\n    this._normal = new Buffer(true, this._optionsService, this._bufferService);\n    this._normal.fillViewportRows();\n\n    // The alt buffer should never have scrollback.\n    // See http://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h2-The-Alternate-Screen-Buffer\n    this._alt = new Buffer(false, this._optionsService, this._bufferService);\n    this._activeBuffer = this._normal;\n\n    this.setupTabStops();\n  }\n\n  /**\n   * Returns the alt Buffer of the BufferSet\n   */\n  public get alt(): Buffer {\n    return this._alt;\n  }\n\n  /**\n   * Returns the normal Buffer of the BufferSet\n   */\n  public get active(): Buffer {\n    return this._activeBuffer;\n  }\n\n  /**\n   * Returns the currently active Buffer of the BufferSet\n   */\n  public get normal(): Buffer {\n    return this._normal;\n  }\n\n  /**\n   * Sets the normal Buffer of the BufferSet as its currently active Buffer\n   */\n  public activateNormalBuffer(): void {\n    if (this._activeBuffer === this._normal) {\n      return;\n    }\n    this._normal.x = this._alt.x;\n    this._normal.y = this._alt.y;\n    // The alt buffer should always be cleared when we switch to the normal\n    // buffer. This frees up memory since the alt buffer should always be new\n    // when activated.\n    this._alt.clear();\n    this._activeBuffer = this._normal;\n    this._onBufferActivate.fire({\n      activeBuffer: this._normal,\n      inactiveBuffer: this._alt\n    });\n  }\n\n  /**\n   * Sets the alt Buffer of the BufferSet as its currently active Buffer\n   */\n  public activateAltBuffer(fillAttr?: IAttributeData): void {\n    if (this._activeBuffer === this._alt) {\n      return;\n    }\n    // Since the alt buffer is always cleared when the normal buffer is\n    // activated, we want to fill it when switching to it.\n    this._alt.fillViewportRows(fillAttr);\n    this._alt.x = this._normal.x;\n    this._alt.y = this._normal.y;\n    this._activeBuffer = this._alt;\n    this._onBufferActivate.fire({\n      activeBuffer: this._alt,\n      inactiveBuffer: this._normal\n    });\n  }\n\n  /**\n   * Resizes both normal and alt buffers, adjusting their data accordingly.\n   * @param newCols The new number of columns.\n   * @param newRows The new number of rows.\n   */\n  public resize(newCols: number, newRows: number): void {\n    this._normal.resize(newCols, newRows);\n    this._alt.resize(newCols, newRows);\n  }\n\n  /**\n   * Setup the tab stops.\n   * @param i The index to start setting up tab stops from.\n   */\n  public setupTabStops(i?: number): void {\n    this._normal.setupTabStops(i);\n    this._alt.setupTabStops(i);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CharData, ICellData, IExtendedAttrs } from 'common/Types';\nimport { stringFromCodePoint } from 'common/input/TextDecoder';\nimport { CHAR_DATA_CHAR_INDEX, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_ATTR_INDEX, Content } from 'common/buffer/Constants';\nimport { AttributeData, ExtendedAttrs } from 'common/buffer/AttributeData';\n\n/**\n * CellData - represents a single Cell in the terminal buffer.\n */\nexport class CellData extends AttributeData implements ICellData {\n  /** Helper to create CellData from CharData. */\n  public static fromCharData(value: CharData): CellData {\n    const obj = new CellData();\n    obj.setFromCharData(value);\n    return obj;\n  }\n  /** Primitives from terminal buffer. */\n  public content = 0;\n  public fg = 0;\n  public bg = 0;\n  public extended: IExtendedAttrs = new ExtendedAttrs();\n  public combinedData = '';\n  /** Whether cell contains a combined string. */\n  public isCombined(): number {\n    return this.content & Content.IS_COMBINED_MASK;\n  }\n  /** Width of the cell. */\n  public getWidth(): number {\n    return this.content >> Content.WIDTH_SHIFT;\n  }\n  /** JS string of the content. */\n  public getChars(): string {\n    if (this.content & Content.IS_COMBINED_MASK) {\n      return this.combinedData;\n    }\n    if (this.content & Content.CODEPOINT_MASK) {\n      return stringFromCodePoint(this.content & Content.CODEPOINT_MASK);\n    }\n    return '';\n  }\n  /**\n   * Codepoint of cell\n   * Note this returns the UTF32 codepoint of single chars,\n   * if content is a combined string it returns the codepoint\n   * of the last char in string to be in line with code in CharData.\n   * */\n  public getCode(): number {\n    return (this.isCombined())\n      ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n      : this.content & Content.CODEPOINT_MASK;\n  }\n  /** Set data from CharData */\n  public setFromCharData(value: CharData): void {\n    this.fg = value[CHAR_DATA_ATTR_INDEX];\n    this.bg = 0;\n    let combined = false;\n    // surrogates and combined strings need special treatment\n    if (value[CHAR_DATA_CHAR_INDEX].length > 2) {\n      combined = true;\n    }\n    else if (value[CHAR_DATA_CHAR_INDEX].length === 2) {\n      const code = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n      // if the 2-char string is a surrogate create single codepoint\n      // everything else is combined\n      if (0xD800 <= code && code <= 0xDBFF) {\n        const second = value[CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n        }\n        else {\n          combined = true;\n        }\n      }\n      else {\n        combined = true;\n      }\n    }\n    else {\n      this.content = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n    if (combined) {\n      this.combinedData = value[CHAR_DATA_CHAR_INDEX];\n      this.content = Content.IS_COMBINED_MASK | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n  }\n  /** Get data as CharData. */\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport const DEFAULT_COLOR = 256;\nexport const DEFAULT_ATTR = (0 << 18) | (DEFAULT_COLOR << 9) | (256 << 0);\n\nexport const CHAR_DATA_ATTR_INDEX = 0;\nexport const CHAR_DATA_CHAR_INDEX = 1;\nexport const CHAR_DATA_WIDTH_INDEX = 2;\nexport const CHAR_DATA_CODE_INDEX = 3;\n\n/**\n * Null cell - a real empty cell (containing nothing).\n * Note that code should always be 0 for a null cell as\n * several test condition of the buffer line rely on this.\n */\nexport const NULL_CELL_CHAR = '';\nexport const NULL_CELL_WIDTH = 1;\nexport const NULL_CELL_CODE = 0;\n\n/**\n * Whitespace cell.\n * This is meant as a replacement for empty cells when needed\n * during rendering lines to preserve correct aligment.\n */\nexport const WHITESPACE_CELL_CHAR = ' ';\nexport const WHITESPACE_CELL_WIDTH = 1;\nexport const WHITESPACE_CELL_CODE = 32;\n\n/**\n * Bitmasks for accessing data in `content`.\n */\nexport const enum Content {\n  /**\n   * bit 1..21    codepoint, max allowed in UTF32 is 0x10FFFF (21 bits taken)\n   *              read:   `codepoint = content & Content.codepointMask;`\n   *              write:  `content |= codepoint & Content.codepointMask;`\n   *                      shortcut if precondition `codepoint <= 0x10FFFF` is met:\n   *                      `content |= codepoint;`\n   */\n  CODEPOINT_MASK = 0x1FFFFF,\n\n  /**\n   * bit 22       flag indication whether a cell contains combined content\n   *              read:   `isCombined = content & Content.isCombined;`\n   *              set:    `content |= Content.isCombined;`\n   *              clear:  `content &= ~Content.isCombined;`\n   */\n  IS_COMBINED_MASK = 0x200000,  // 1 << 21\n\n  /**\n   * bit 1..22    mask to check whether a cell contains any string data\n   *              we need to check for codepoint and isCombined bits to see\n   *              whether a cell contains anything\n   *              read:   `isEmpty = !(content & Content.hasContent)`\n   */\n  HAS_CONTENT_MASK = 0x3FFFFF,\n\n  /**\n   * bit 23..24   wcwidth value of cell, takes 2 bits (ranges from 0..2)\n   *              read:   `width = (content & Content.widthMask) >> Content.widthShift;`\n   *                      `hasWidth = content & Content.widthMask;`\n   *                      as long as wcwidth is highest value in `content`:\n   *                      `width = content >> Content.widthShift;`\n   *              write:  `content |= (width << Content.widthShift) & Content.widthMask;`\n   *                      shortcut if precondition `0 <= width <= 3` is met:\n   *                      `content |= width << Content.widthShift;`\n   */\n  WIDTH_MASK = 0xC00000,   // 3 << 22\n  WIDTH_SHIFT = 22\n}\n\nexport const enum Attributes {\n  /**\n   * bit 1..8     blue in RGB, color in P256 and P16\n   */\n  BLUE_MASK = 0xFF,\n  BLUE_SHIFT = 0,\n  PCOLOR_MASK = 0xFF,\n  PCOLOR_SHIFT = 0,\n\n  /**\n   * bit 9..16    green in RGB\n   */\n  GREEN_MASK = 0xFF00,\n  GREEN_SHIFT = 8,\n\n  /**\n   * bit 17..24   red in RGB\n   */\n  RED_MASK = 0xFF0000,\n  RED_SHIFT = 16,\n\n  /**\n   * bit 25..26   color mode: DEFAULT (0) | P16 (1) | P256 (2) | RGB (3)\n   */\n  CM_MASK = 0x3000000,\n  CM_DEFAULT = 0,\n  CM_P16 = 0x1000000,\n  CM_P256 = 0x2000000,\n  CM_RGB = 0x3000000,\n\n  /**\n   * bit 1..24  RGB room\n   */\n  RGB_MASK = 0xFFFFFF\n}\n\nexport const enum FgFlags {\n  /**\n   * bit 27..31 (32th bit unused)\n   */\n  INVERSE = 0x4000000,\n  BOLD = 0x8000000,\n  UNDERLINE = 0x10000000,\n  BLINK = 0x20000000,\n  INVISIBLE = 0x40000000\n}\n\nexport const enum BgFlags {\n  /**\n   * bit 27..32 (upper 3 unused)\n   */\n  ITALIC = 0x4000000,\n  DIM = 0x8000000,\n  HAS_EXTENDED = 0x10000000\n}\n\nexport const enum UnderlineStyle {\n  NONE = 0,\n  SINGLE = 1,\n  DOUBLE = 2,\n  CURLY = 3,\n  DOTTED = 4,\n  DASHED = 5\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { IMarker } from 'common/Types';\n\nexport class Marker extends Disposable implements IMarker {\n  private static _nextId = 1;\n\n  private _id: number = Marker._nextId++;\n  public isDisposed: boolean = false;\n\n  public get id(): number { return this._id; }\n\n  private _onDispose = new EventEmitter<void>();\n  public get onDispose(): IEvent<void> { return this._onDispose.event; }\n\n  constructor(\n    public line: number\n  ) {\n    super();\n  }\n\n  public dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n    this.isDisposed = true;\n    this.line = -1;\n    // Emit before super.dispose such that dispose listeners get a change to react\n    this._onDispose.fire();\n    super.dispose();\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharset } from 'common/Types';\n\n/**\n * The character sets supported by the terminal. These enable several languages\n * to be represented within the terminal with only 8-bit encoding. See ISO 2022\n * for a discussion on character sets. Only VT100 character sets are supported.\n */\nexport const CHARSETS: { [key: string]: ICharset | undefined } = {};\n\n/**\n * The default character set, US.\n */\nexport const DEFAULT_CHARSET: ICharset | undefined = CHARSETS['B'];\n\n/**\n * DEC Special Character and Line Drawing Set.\n * Reference: http://vt100.net/docs/vt102-ug/table5-13.html\n * A lot of curses apps use this if they see TERM=xterm.\n * testing: echo -e '\\e(0a\\e(B'\n * The xterm output sometimes seems to conflict with the\n * reference above. xterm seems in line with the reference\n * when running vttest however.\n * The table below now uses xterm's output from vttest.\n */\nCHARSETS['0'] = {\n  '`': '\\u25c6', // ''\n  'a': '\\u2592', // ''\n  'b': '\\u2409', // '' (HT)\n  'c': '\\u240c', // '' (FF)\n  'd': '\\u240d', // '' (CR)\n  'e': '\\u240a', // '' (LF)\n  'f': '\\u00b0', // ''\n  'g': '\\u00b1', // ''\n  'h': '\\u2424', // '' (NL)\n  'i': '\\u240b', // '' (VT)\n  'j': '\\u2518', // ''\n  'k': '\\u2510', // ''\n  'l': '\\u250c', // ''\n  'm': '\\u2514', // ''\n  'n': '\\u253c', // ''\n  'o': '\\u23ba', // ''\n  'p': '\\u23bb', // ''\n  'q': '\\u2500', // ''\n  'r': '\\u23bc', // ''\n  's': '\\u23bd', // ''\n  't': '\\u251c', // ''\n  'u': '\\u2524', // ''\n  'v': '\\u2534', // ''\n  'w': '\\u252c', // ''\n  'x': '\\u2502', // ''\n  'y': '\\u2264', // ''\n  'z': '\\u2265', // ''\n  '{': '\\u03c0', // ''\n  '|': '\\u2260', // ''\n  '}': '\\u00a3', // ''\n  '~': '\\u00b7'  // ''\n};\n\n/**\n * British character set\n * ESC (A\n * Reference: http://vt100.net/docs/vt220-rm/table2-5.html\n */\nCHARSETS['A'] = {\n  '#': ''\n};\n\n/**\n * United States character set\n * ESC (B\n */\nCHARSETS['B'] = undefined;\n\n/**\n * Dutch character set\n * ESC (4\n * Reference: http://vt100.net/docs/vt220-rm/table2-6.html\n */\nCHARSETS['4'] = {\n  '#': '',\n  '@': '',\n  '[': 'ij',\n  '\\\\': '',\n  ']': '|',\n  '{': '',\n  '|': 'f',\n  '}': '',\n  '~': ''\n};\n\n/**\n * Finnish character set\n * ESC (C or ESC (5\n * Reference: http://vt100.net/docs/vt220-rm/table2-7.html\n */\nCHARSETS['C'] =\nCHARSETS['5'] = {\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '^': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * French character set\n * ESC (R\n * Reference: http://vt100.net/docs/vt220-rm/table2-8.html\n */\nCHARSETS['R'] = {\n  '#': '',\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * French Canadian character set\n * ESC (Q\n * Reference: http://vt100.net/docs/vt220-rm/table2-9.html\n */\nCHARSETS['Q'] = {\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '^': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * German character set\n * ESC (K\n * Reference: http://vt100.net/docs/vt220-rm/table2-10.html\n */\nCHARSETS['K'] = {\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * Italian character set\n * ESC (Y\n * Reference: http://vt100.net/docs/vt220-rm/table2-11.html\n */\nCHARSETS['Y'] = {\n  '#': '',\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * Norwegian/Danish character set\n * ESC (E or ESC (6\n * Reference: http://vt100.net/docs/vt220-rm/table2-12.html\n */\nCHARSETS['E'] =\nCHARSETS['6'] = {\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '^': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * Spanish character set\n * ESC (Z\n * Reference: http://vt100.net/docs/vt220-rm/table2-13.html\n */\nCHARSETS['Z'] = {\n  '#': '',\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '{': '',\n  '|': '',\n  '}': ''\n};\n\n/**\n * Swedish character set\n * ESC (H or ESC (7\n * Reference: http://vt100.net/docs/vt220-rm/table2-14.html\n */\nCHARSETS['H'] =\nCHARSETS['7'] = {\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '^': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n\n/**\n * Swiss character set\n * ESC (=\n * Reference: http://vt100.net/docs/vt220-rm/table2-15.html\n */\nCHARSETS['='] = {\n  '#': '',\n  '@': '',\n  '[': '',\n  '\\\\': '',\n  ']': '',\n  '^': '',\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  '_': '',\n  '`': '',\n  '{': '',\n  '|': '',\n  '}': '',\n  '~': ''\n};\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * C0 control codes\n * See = https://en.wikipedia.org/wiki/C0_and_C1_control_codes\n */\nexport namespace C0 {\n  /** Null (Caret = ^@, C = \\0) */\n  export const NUL = '\\x00';\n  /** Start of Heading (Caret = ^A) */\n  export const SOH = '\\x01';\n  /** Start of Text (Caret = ^B) */\n  export const STX = '\\x02';\n  /** End of Text (Caret = ^C) */\n  export const ETX = '\\x03';\n  /** End of Transmission (Caret = ^D) */\n  export const EOT = '\\x04';\n  /** Enquiry (Caret = ^E) */\n  export const ENQ = '\\x05';\n  /** Acknowledge (Caret = ^F) */\n  export const ACK = '\\x06';\n  /** Bell (Caret = ^G, C = \\a) */\n  export const BEL = '\\x07';\n  /** Backspace (Caret = ^H, C = \\b) */\n  export const BS  = '\\x08';\n  /** Character Tabulation, Horizontal Tabulation (Caret = ^I, C = \\t) */\n  export const HT  = '\\x09';\n  /** Line Feed (Caret = ^J, C = \\n) */\n  export const LF  = '\\x0a';\n  /** Line Tabulation, Vertical Tabulation (Caret = ^K, C = \\v) */\n  export const VT  = '\\x0b';\n  /** Form Feed (Caret = ^L, C = \\f) */\n  export const FF  = '\\x0c';\n  /** Carriage Return (Caret = ^M, C = \\r) */\n  export const CR  = '\\x0d';\n  /** Shift Out (Caret = ^N) */\n  export const SO  = '\\x0e';\n  /** Shift In (Caret = ^O) */\n  export const SI  = '\\x0f';\n  /** Data Link Escape (Caret = ^P) */\n  export const DLE = '\\x10';\n  /** Device Control One (XON) (Caret = ^Q) */\n  export const DC1 = '\\x11';\n  /** Device Control Two (Caret = ^R) */\n  export const DC2 = '\\x12';\n  /** Device Control Three (XOFF) (Caret = ^S) */\n  export const DC3 = '\\x13';\n  /** Device Control Four (Caret = ^T) */\n  export const DC4 = '\\x14';\n  /** Negative Acknowledge (Caret = ^U) */\n  export const NAK = '\\x15';\n  /** Synchronous Idle (Caret = ^V) */\n  export const SYN = '\\x16';\n  /** End of Transmission Block (Caret = ^W) */\n  export const ETB = '\\x17';\n  /** Cancel (Caret = ^X) */\n  export const CAN = '\\x18';\n  /** End of Medium (Caret = ^Y) */\n  export const EM  = '\\x19';\n  /** Substitute (Caret = ^Z) */\n  export const SUB = '\\x1a';\n  /** Escape (Caret = ^[, C = \\e) */\n  export const ESC = '\\x1b';\n  /** File Separator (Caret = ^\\) */\n  export const FS  = '\\x1c';\n  /** Group Separator (Caret = ^]) */\n  export const GS  = '\\x1d';\n  /** Record Separator (Caret = ^^) */\n  export const RS  = '\\x1e';\n  /** Unit Separator (Caret = ^_) */\n  export const US  = '\\x1f';\n  /** Space */\n  export const SP  = '\\x20';\n  /** Delete (Caret = ^?) */\n  export const DEL = '\\x7f';\n}\n\n/**\n * C1 control codes\n * See = https://en.wikipedia.org/wiki/C0_and_C1_control_codes\n */\nexport namespace C1 {\n  /** padding character */\n  export const PAD = '\\x80';\n  /** High Octet Preset */\n  export const HOP = '\\x81';\n  /** Break Permitted Here */\n  export const BPH = '\\x82';\n  /** No Break Here */\n  export const NBH = '\\x83';\n  /** Index */\n  export const IND = '\\x84';\n  /** Next Line */\n  export const NEL = '\\x85';\n  /** Start of Selected Area */\n  export const SSA = '\\x86';\n  /** End of Selected Area */\n  export const ESA = '\\x87';\n  /** Horizontal Tabulation Set */\n  export const HTS = '\\x88';\n  /** Horizontal Tabulation With Justification */\n  export const HTJ = '\\x89';\n  /** Vertical Tabulation Set */\n  export const VTS = '\\x8a';\n  /** Partial Line Down */\n  export const PLD = '\\x8b';\n  /** Partial Line Up */\n  export const PLU = '\\x8c';\n  /** Reverse Index */\n  export const RI = '\\x8d';\n  /** Single-Shift 2 */\n  export const SS2 = '\\x8e';\n  /** Single-Shift 3 */\n  export const SS3 = '\\x8f';\n  /** Device Control String */\n  export const DCS = '\\x90';\n  /** Private Use 1 */\n  export const PU1 = '\\x91';\n  /** Private Use 2 */\n  export const PU2 = '\\x92';\n  /** Set Transmit State */\n  export const STS = '\\x93';\n  /** Destructive backspace, intended to eliminate ambiguity about meaning of BS. */\n  export const CCH = '\\x94';\n  /** Message Waiting */\n  export const MW = '\\x95';\n  /** Start of Protected Area */\n  export const SPA = '\\x96';\n  /** End of Protected Area */\n  export const EPA = '\\x97';\n  /** Start of String */\n  export const SOS = '\\x98';\n  /** Single Graphic Character Introducer */\n  export const SGCI = '\\x99';\n  /** Single Character Introducer */\n  export const SCI = '\\x9a';\n  /** Control Sequence Introducer */\n  export const CSI = '\\x9b';\n  /** String Terminator */\n  export const ST = '\\x9c';\n  /** Operating System Command */\n  export const OSC = '\\x9d';\n  /** Privacy Message */\n  export const PM = '\\x9e';\n  /** Application Program Command */\n  export const APC = '\\x9f';\n}\n","/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n */\n\nimport { IKeyboardEvent, IKeyboardResult, KeyboardResultType } from 'common/Types';\nimport { C0 } from 'common/data/EscapeSequences';\n\n// reg + shift key mappings for digits and special chars\nconst KEYCODE_KEY_MAPPINGS: { [key: number]: [string, string]} = {\n  // digits 0-9\n  48: ['0', ')'],\n  49: ['1', '!'],\n  50: ['2', '@'],\n  51: ['3', '#'],\n  52: ['4', '$'],\n  53: ['5', '%'],\n  54: ['6', '^'],\n  55: ['7', '&'],\n  56: ['8', '*'],\n  57: ['9', '('],\n\n  // special chars\n  186: [';', ':'],\n  187: ['=', '+'],\n  188: [',', '<'],\n  189: ['-', '_'],\n  190: ['.', '>'],\n  191: ['/', '?'],\n  192: ['`', '~'],\n  219: ['[', '{'],\n  220: ['\\\\', '|'],\n  221: [']', '}'],\n  222: ['\\'', '\"']\n};\n\nexport function evaluateKeyboardEvent(\n  ev: IKeyboardEvent,\n  applicationCursorMode: boolean,\n  isMac: boolean,\n  macOptionIsMeta: boolean\n): IKeyboardResult {\n  const result: IKeyboardResult = {\n    type: KeyboardResultType.SEND_KEY,\n    // Whether to cancel event propagation (NOTE: this may not be needed since the event is\n    // canceled at the end of keyDown\n    cancel: false,\n    // The new key even to emit\n    key: undefined\n  };\n  const modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n  switch (ev.keyCode) {\n    case 0:\n      if (ev.key === 'UIKeyInputUpArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OA';\n        } else {\n          result.key = C0.ESC + '[A';\n        }\n      }\n      else if (ev.key === 'UIKeyInputLeftArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OD';\n        } else {\n          result.key = C0.ESC + '[D';\n        }\n      }\n      else if (ev.key === 'UIKeyInputRightArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OC';\n        } else {\n          result.key = C0.ESC + '[C';\n        }\n      }\n      else if (ev.key === 'UIKeyInputDownArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OB';\n        } else {\n          result.key = C0.ESC + '[B';\n        }\n      }\n      break;\n    case 8:\n      // backspace\n      if (ev.shiftKey) {\n        result.key = C0.BS; // ^H\n        break;\n      } else if (ev.altKey) {\n        result.key = C0.ESC + C0.DEL; // \\e ^?\n        break;\n      }\n      result.key = C0.DEL; // ^?\n      break;\n    case 9:\n      // tab\n      if (ev.shiftKey) {\n        result.key = C0.ESC + '[Z';\n        break;\n      }\n      result.key = C0.HT;\n      result.cancel = true;\n      break;\n    case 13:\n      // return/enter\n      result.key = ev.altKey ? C0.ESC + C0.CR : C0.CR;\n      result.cancel = true;\n      break;\n    case 27:\n      // escape\n      result.key = C0.ESC;\n      if (ev.altKey) {\n        result.key = C0.ESC + C0.ESC;\n      }\n      result.cancel = true;\n      break;\n    case 37:\n      // left-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'D';\n        // HACK: Make Alt + left-arrow behave like Ctrl + left-arrow: move one word backwards\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (result.key === C0.ESC + '[1;3D') {\n          result.key = C0.ESC + (isMac ? 'b' : '[1;5D');\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OD';\n      } else {\n        result.key = C0.ESC + '[D';\n      }\n      break;\n    case 39:\n      // right-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'C';\n        // HACK: Make Alt + right-arrow behave like Ctrl + right-arrow: move one word forward\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (result.key === C0.ESC + '[1;3C') {\n          result.key = C0.ESC + (isMac ? 'f' : '[1;5C');\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OC';\n      } else {\n        result.key = C0.ESC + '[C';\n      }\n      break;\n    case 38:\n      // up-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'A';\n        // HACK: Make Alt + up-arrow behave like Ctrl + up-arrow\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (!isMac && result.key === C0.ESC + '[1;3A') {\n          result.key = C0.ESC + '[1;5A';\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OA';\n      } else {\n        result.key = C0.ESC + '[A';\n      }\n      break;\n    case 40:\n      // down-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'B';\n        // HACK: Make Alt + down-arrow behave like Ctrl + down-arrow\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (!isMac && result.key === C0.ESC + '[1;3B') {\n          result.key = C0.ESC + '[1;5B';\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OB';\n      } else {\n        result.key = C0.ESC + '[B';\n      }\n      break;\n    case 45:\n      // insert\n      if (!ev.shiftKey && !ev.ctrlKey) {\n        // <Ctrl> or <Shift> + <Insert> are used to\n        // copy-paste on some systems.\n        result.key = C0.ESC + '[2~';\n      }\n      break;\n    case 46:\n      // delete\n      if (modifiers) {\n        result.key = C0.ESC + '[3;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[3~';\n      }\n      break;\n    case 36:\n      // home\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'H';\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OH';\n      } else {\n        result.key = C0.ESC + '[H';\n      }\n      break;\n    case 35:\n      // end\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'F';\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OF';\n      } else {\n        result.key = C0.ESC + '[F';\n      }\n      break;\n    case 33:\n      // page up\n      if (ev.shiftKey) {\n        result.type = KeyboardResultType.PAGE_UP;\n      } else {\n        result.key = C0.ESC + '[5~';\n      }\n      break;\n    case 34:\n      // page down\n      if (ev.shiftKey) {\n        result.type = KeyboardResultType.PAGE_DOWN;\n      } else {\n        result.key = C0.ESC + '[6~';\n      }\n      break;\n    case 112:\n      // F1-F12\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'P';\n      } else {\n        result.key = C0.ESC + 'OP';\n      }\n      break;\n    case 113:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n      } else {\n        result.key = C0.ESC + 'OQ';\n      }\n      break;\n    case 114:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'R';\n      } else {\n        result.key = C0.ESC + 'OR';\n      }\n      break;\n    case 115:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'S';\n      } else {\n        result.key = C0.ESC + 'OS';\n      }\n      break;\n    case 116:\n      if (modifiers) {\n        result.key = C0.ESC + '[15;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[15~';\n      }\n      break;\n    case 117:\n      if (modifiers) {\n        result.key = C0.ESC + '[17;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[17~';\n      }\n      break;\n    case 118:\n      if (modifiers) {\n        result.key = C0.ESC + '[18;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[18~';\n      }\n      break;\n    case 119:\n      if (modifiers) {\n        result.key = C0.ESC + '[19;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[19~';\n      }\n      break;\n    case 120:\n      if (modifiers) {\n        result.key = C0.ESC + '[20;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[20~';\n      }\n      break;\n    case 121:\n      if (modifiers) {\n        result.key = C0.ESC + '[21;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[21~';\n      }\n      break;\n    case 122:\n      if (modifiers) {\n        result.key = C0.ESC + '[23;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[23~';\n      }\n      break;\n    case 123:\n      if (modifiers) {\n        result.key = C0.ESC + '[24;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[24~';\n      }\n      break;\n    default:\n      // a-z and space\n      if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n        if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n          result.key = String.fromCharCode(ev.keyCode - 64);\n        } else if (ev.keyCode === 32) {\n          result.key = C0.NUL;\n        } else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n          // escape, file sep, group sep, record sep, unit sep\n          result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n        } else if (ev.keyCode === 56) {\n          result.key = C0.DEL;\n        } else if (ev.keyCode === 219) {\n          result.key = C0.ESC;\n        } else if (ev.keyCode === 220) {\n          result.key = C0.FS;\n        } else if (ev.keyCode === 221) {\n          result.key = C0.GS;\n        }\n      } else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n        // On macOS this is a third level shift when !macOptionIsMeta. Use <Esc> instead.\n        const keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n        const key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n        if (key) {\n          result.key = C0.ESC + key;\n        } else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n          const keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n          result.key = C0.ESC + String.fromCharCode(keyCode);\n        }\n      } else if (isMac && !ev.altKey && !ev.ctrlKey && !ev.shiftKey && ev.metaKey) {\n        if (ev.keyCode === 65) { // cmd + a\n          result.type = KeyboardResultType.SELECT_ALL;\n        }\n      } else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n        // Include only keys that that result in a _single_ character; don't include num lock, volume up, etc.\n        result.key = ev.key;\n      } else if (ev.key && ev.ctrlKey) {\n        if (ev.key === '_') { // ^_\n          result.key = C0.US;\n        }\n      }\n      break;\n  }\n\n  return result;\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * Polyfill - Convert UTF32 codepoint into JS string.\n * Note: The built-in String.fromCodePoint happens to be much slower\n *       due to additional sanity checks. We can avoid them since\n *       we always operate on legal UTF32 (granted by the input decoders)\n *       and use this faster version instead.\n */\nexport function stringFromCodePoint(codePoint: number): string {\n  if (codePoint > 0xFFFF) {\n    codePoint -= 0x10000;\n    return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n  }\n  return String.fromCharCode(codePoint);\n}\n\n/**\n * Convert UTF32 char codes into JS string.\n * Basically the same as `stringFromCodePoint` but for multiple codepoints\n * in a loop (which is a lot faster).\n */\nexport function utf32ToString(data: Uint32Array, start: number = 0, end: number = data.length): string {\n  let result = '';\n  for (let i = start; i < end; ++i) {\n    let codepoint = data[i];\n    if (codepoint > 0xFFFF) {\n      // JS strings are encoded as UTF16, thus a non BMP codepoint gets converted into a surrogate pair\n      // conversion rules:\n      //  - subtract 0x10000 from code point, leaving a 20 bit number\n      //  - add high 10 bits to 0xD800  --> first surrogate\n      //  - add low 10 bits to 0xDC00   --> second surrogate\n      codepoint -= 0x10000;\n      result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n    } else {\n      result += String.fromCharCode(codepoint);\n    }\n  }\n  return result;\n}\n\n/**\n * StringToUtf32 - decodes UTF16 sequences into UTF32 codepoints.\n * To keep the decoder in line with JS strings it handles single surrogates as UCS2.\n */\nexport class StringToUtf32 {\n  private _interim: number = 0;\n\n  /**\n   * Clears interim and resets decoder to clean state.\n   */\n  public clear(): void {\n    this._interim = 0;\n  }\n\n  /**\n   * Decode JS string to UTF32 codepoints.\n   * The methods assumes stream input and will store partly transmitted\n   * surrogate pairs and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided input data does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: string, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let startPos = 0;\n\n    // handle leftover surrogate high\n    if (this._interim) {\n      const second = input.charCodeAt(startPos++);\n      if (0xDC00 <= second && second <= 0xDFFF) {\n        target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n      } else {\n        // illegal codepoint (USC2 handling)\n        target[size++] = this._interim;\n        target[size++] = second;\n      }\n      this._interim = 0;\n    }\n\n    for (let i = startPos; i < length; ++i) {\n      const code = input.charCodeAt(i);\n      // surrogate pair first\n      if (0xD800 <= code && code <= 0xDBFF) {\n        if (++i >= length) {\n          this._interim = code;\n          return size;\n        }\n        const second = input.charCodeAt(i);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        } else {\n          // illegal codepoint (USC2 handling)\n          target[size++] = code;\n          target[size++] = second;\n        }\n        continue;\n      }\n      if (code === 0xFEFF) {\n        // BOM\n        continue;\n      }\n      target[size++] = code;\n    }\n    return size;\n  }\n}\n\n/**\n * Utf8Decoder - decodes UTF8 byte sequences into UTF32 codepoints.\n */\nexport class Utf8ToUtf32 {\n  public interim: Uint8Array = new Uint8Array(3);\n\n  /**\n   * Clears interim bytes and resets decoder to clean state.\n   */\n  public clear(): void {\n    this.interim.fill(0);\n  }\n\n  /**\n   * Decodes UTF8 byte sequences in `input` to UTF32 codepoints in `target`.\n   * The methods assumes stream input and will store partly transmitted bytes\n   * and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided data chunk does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: Uint8Array, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let byte1: number;\n    let byte2: number;\n    let byte3: number;\n    let byte4: number;\n    let codepoint = 0;\n    let startPos = 0;\n\n    // handle leftover bytes\n    if (this.interim[0]) {\n      let discardInterim = false;\n      let cp = this.interim[0];\n      cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n      let pos = 0;\n      let tmp: number;\n      while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n        cp <<= 6;\n        cp |= tmp;\n      }\n      // missing bytes - read ahead from input\n      const type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n      const missing = type - pos;\n      while (startPos < missing) {\n        if (startPos >= length) {\n          return 0;\n        }\n        tmp = input[startPos++];\n        if ((tmp & 0xC0) !== 0x80) {\n          // wrong continuation, discard interim bytes completely\n          startPos--;\n          discardInterim = true;\n          break;\n        } else {\n          // need to save so we can continue short inputs in next call\n          this.interim[pos++] = tmp;\n          cp <<= 6;\n          cp |= tmp & 0x3F;\n        }\n      }\n      if (!discardInterim) {\n        // final test is type dependent\n        if (type === 2) {\n          if (cp < 0x80) {\n            // wrong starter byte\n            startPos--;\n          } else {\n            target[size++] = cp;\n          }\n        } else if (type === 3) {\n          if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF) || cp === 0xFEFF) {\n            // illegal codepoint or BOM\n          } else {\n            target[size++] = cp;\n          }\n        } else {\n          if (cp < 0x010000 || cp > 0x10FFFF) {\n            // illegal codepoint\n          } else {\n            target[size++] = cp;\n          }\n        }\n      }\n      this.interim.fill(0);\n    }\n\n    // loop through input\n    const fourStop = length - 4;\n    let i = startPos;\n    while (i < length) {\n      /**\n       * ASCII shortcut with loop unrolled to 4 consecutive ASCII chars.\n       * This is a compromise between speed gain for ASCII\n       * and penalty for non ASCII:\n       * For best ASCII performance the char should be stored directly into target,\n       * but even a single attempt to write to target and compare afterwards\n       * penalizes non ASCII really bad (-50%), thus we load the char into byteX first,\n       * which reduces ASCII performance by ~15%.\n       * This trial for ASCII reduces non ASCII performance by ~10% which seems acceptible\n       * compared to the gains.\n       * Note that this optimization only takes place for 4 consecutive ASCII chars,\n       * for any shorter it bails out. Worst case - all 4 bytes being read but\n       * thrown away due to the last being a non ASCII char (-10% performance).\n       */\n      while (i < fourStop\n        && !((byte1 = input[i]) & 0x80)\n        && !((byte2 = input[i + 1]) & 0x80)\n        && !((byte3 = input[i + 2]) & 0x80)\n        && !((byte4 = input[i + 3]) & 0x80))\n      {\n        target[size++] = byte1;\n        target[size++] = byte2;\n        target[size++] = byte3;\n        target[size++] = byte4;\n        i += 4;\n      }\n\n      // reread byte1\n      byte1 = input[i++];\n\n      // 1 byte\n      if (byte1 < 0x80) {\n        target[size++] = byte1;\n\n        // 2 bytes\n      } else if ((byte1 & 0xE0) === 0xC0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n        if (codepoint < 0x80) {\n          // wrong starter byte\n          i--;\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 3 bytes\n      } else if ((byte1 & 0xF0) === 0xE0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n        if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF) || codepoint === 0xFEFF) {\n          // illegal codepoint or BOM, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 4 bytes\n      } else if ((byte1 & 0xF8) === 0xF0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          this.interim[2] = byte3;\n          return size;\n        }\n        byte4 = input[i++];\n        if ((byte4 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n        if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n          // illegal codepoint, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n      } else {\n        // illegal byte, just skip\n      }\n    }\n    return size;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IUnicodeVersionProvider } from 'common/services/Services';\nimport { fill } from 'common/TypedArrayUtils';\n\ntype CharWidth = 0 | 1 | 2;\n\nconst BMP_COMBINING = [\n  [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n  [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n  [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n  [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n  [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n  [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n  [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n  [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n  [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n  [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n  [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n  [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n  [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n  [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n  [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n  [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n  [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n  [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n  [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n  [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n  [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n  [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n  [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n  [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n  [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n  [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n  [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n  [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n  [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n  [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n  [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n  [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n  [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n  [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n  [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n  [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n  [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n  [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n  [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n  [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n  [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n  [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n  [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n];\nconst HIGH_COMBINING = [\n  [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n  [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n  [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n  [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n  [0xE0100, 0xE01EF]\n];\n\n// BMP lookup table, lazy initialized during first addon loading\nlet table: Uint8Array;\n\nfunction bisearch(ucs: number, data: number[][]): boolean {\n  let min = 0;\n  let max = data.length - 1;\n  let mid;\n  if (ucs < data[0][0] || ucs > data[max][1]) {\n    return false;\n  }\n  while (max >= min) {\n    mid = (min + max) >> 1;\n    if (ucs > data[mid][1]) {\n      min = mid + 1;\n    } else if (ucs < data[mid][0]) {\n      max = mid - 1;\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport class UnicodeV6 implements IUnicodeVersionProvider {\n  public readonly version = '6';\n\n  constructor() {\n    // init lookup table once\n    if (!table) {\n      table = new Uint8Array(65536);\n      fill(table, 1);\n      table[0] = 0;\n      // control chars\n      fill(table, 0, 1, 32);\n      fill(table, 0, 0x7f, 0xa0);\n\n      // apply wide char rules first\n      // wide chars\n      fill(table, 2, 0x1100, 0x1160);\n      table[0x2329] = 2;\n      table[0x232a] = 2;\n      fill(table, 2, 0x2e80, 0xa4d0);\n      table[0x303f] = 1;  // wrongly in last line\n\n      fill(table, 2, 0xac00, 0xd7a4);\n      fill(table, 2, 0xf900, 0xfb00);\n      fill(table, 2, 0xfe10, 0xfe1a);\n      fill(table, 2, 0xfe30, 0xfe70);\n      fill(table, 2, 0xff00, 0xff61);\n      fill(table, 2, 0xffe0, 0xffe7);\n\n      // apply combining last to ensure we overwrite\n      // wrongly wide set chars:\n      //    the original algo evals combining first and falls\n      //    through to wide check so we simply do here the opposite\n      // combining 0\n      for (let r = 0; r < BMP_COMBINING.length; ++r) {\n        fill(table, 0, BMP_COMBINING[r][0], BMP_COMBINING[r][1] + 1);\n      }\n    }\n  }\n\n  public wcwidth(num: number): CharWidth {\n    if (num < 32) return 0;\n    if (num < 127) return 1;\n    if (num < 65536) return table[num] as CharWidth;\n    if (bisearch(num, HIGH_COMBINING)) return 0;\n    if ((num >= 0x20000 && num <= 0x2fffd) || (num >= 0x30000 && num <= 0x3fffd)) return 2;\n    return 1;\n  }\n}\n","\n/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ndeclare const setTimeout: (handler: () => void, timeout?: number) => void;\n\n/**\n * Safety watermark to avoid memory exhaustion and browser engine crash on fast data input.\n * Enable flow control to avoid this limit and make sure that your backend correctly\n * propagates this to the underlying pty. (see docs for further instructions)\n * Since this limit is meant as a safety parachute to prevent browser crashs,\n * it is set to a very high number. Typically xterm.js gets unresponsive with\n * a 100 times lower number (>500 kB).\n */\nconst DISCARD_WATERMARK = 50000000; // ~50 MB\n\n/**\n * The max number of ms to spend on writes before allowing the renderer to\n * catch up with a 0ms setTimeout. A value of < 33 to keep us close to\n * 30fps, and a value of < 16 to try to run at 60fps. Of course, the real FPS\n * depends on the time it takes for the renderer to draw the frame.\n */\nconst WRITE_TIMEOUT_MS = 12;\n\n/**\n * Threshold of max held chunks in the write buffer, that were already processed.\n * This is a tradeoff between extensive write buffer shifts (bad runtime) and high\n * memory consumption by data thats not used anymore.\n */\nconst WRITE_BUFFER_LENGTH_THRESHOLD = 50;\n\n// queueMicrotask polyfill for nodejs < v11\nconst qmt: (cb: () => void) => void = (typeof queueMicrotask === 'undefined')\n  ? (cb: () => void) => { Promise.resolve().then(cb); }\n  : queueMicrotask;\n\n\nexport class WriteBuffer {\n  private _writeBuffer: (string | Uint8Array)[] = [];\n  private _callbacks: ((() => void) | undefined)[] = [];\n  private _pendingData = 0;\n  private _bufferOffset = 0;\n  private _isSyncWriting = false;\n  private _syncCalls = 0;\n\n  constructor(private _action: (data: string | Uint8Array, promiseResult?: boolean) => void | Promise<boolean>) { }\n\n  /**\n   * @deprecated Unreliable, to be removed soon.\n   */\n  public writeSync(data: string | Uint8Array, maxSubsequentCalls?: number): void {\n    // stop writeSync recursions with maxSubsequentCalls argument\n    // This is dangerous to use as it will lose the current data chunk\n    // and return immediately.\n    if (maxSubsequentCalls !== undefined && this._syncCalls > maxSubsequentCalls) {\n      // comment next line if a whole loop block should only contain x `writeSync` calls\n      // (total flat vs. deep nested limit)\n      this._syncCalls = 0;\n      return;\n    }\n    // append chunk to buffer\n    this._pendingData += data.length;\n    this._writeBuffer.push(data);\n    this._callbacks.push(undefined);\n\n    // increase recursion counter\n    this._syncCalls++;\n    // exit early if another writeSync loop is active\n    if (this._isSyncWriting) {\n      return;\n    }\n    this._isSyncWriting = true;\n\n    // force sync processing on pending data chunks to avoid in-band data scrambling\n    // does the same as innerWrite but without event loop\n    // we have to do it here as single loop steps to not corrupt loop subject\n    // by another writeSync call triggered from _action\n    let chunk: string | Uint8Array | undefined;\n    while (chunk = this._writeBuffer.shift()) {\n      this._action(chunk);\n      const cb = this._callbacks.shift();\n      if (cb) cb();\n    }\n    // reset to avoid reprocessing of chunks with scheduled innerWrite call\n    // stopping scheduled innerWrite by offset > length condition\n    this._pendingData = 0;\n    this._bufferOffset = 0x7FFFFFFF;\n\n    // allow another writeSync to loop\n    this._isSyncWriting = false;\n    this._syncCalls = 0;\n  }\n\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    if (this._pendingData > DISCARD_WATERMARK) {\n      throw new Error('write data discarded, use flow control to avoid losing data');\n    }\n\n    // schedule chunk processing for next event loop run\n    if (!this._writeBuffer.length) {\n      this._bufferOffset = 0;\n      setTimeout(() => this._innerWrite());\n    }\n\n    this._pendingData += data.length;\n    this._writeBuffer.push(data);\n    this._callbacks.push(callback);\n  }\n\n  /**\n   * Inner write call, that enters the sliced chunk processing by timing.\n   *\n   * `lastTime` indicates, when the last _innerWrite call had started.\n   * It is used to aggregate async handler execution under a timeout constraint\n   * effectively lowering the redrawing needs, schematically:\n   *\n   *   macroTask _innerWrite:\n   *     if (Date.now() - (lastTime | 0) < WRITE_TIMEOUT_MS):\n   *        schedule microTask _innerWrite(lastTime)\n   *     else:\n   *        schedule macroTask _innerWrite(0)\n   *\n   *   overall execution order on task queues:\n   *\n   *   macrotasks:  [...]  -->  _innerWrite(0)  -->  [...]  -->  screenUpdate  -->  [...]\n   *         m  t:                    |\n   *         i  a:                  [...]\n   *         c  s:                    |\n   *         r  k:              while < timeout:\n   *         o  s:                _innerWrite(timeout)\n   *\n   * `promiseResult` depicts the promise resolve value of an async handler.\n   * This value gets carried forward through all saved stack states of the\n   * paused parser for proper continuation.\n   *\n   * Note, for pure sync code `lastTime` and `promiseResult` have no meaning.\n   */\n  protected _innerWrite(lastTime: number = 0, promiseResult: boolean = true): void {\n    const startTime = lastTime || Date.now();\n    while (this._writeBuffer.length > this._bufferOffset) {\n      const data = this._writeBuffer[this._bufferOffset];\n      const result = this._action(data, promiseResult);\n      if (result) {\n        /**\n         * If we get a promise as return value, we re-schedule the continuation\n         * as thenable on the promise and exit right away.\n         *\n         * The exit here means, that we block input processing at the current active chunk,\n         * the exact execution position within the chunk is preserved by the saved\n         * stack content in InputHandler and EscapeSequenceParser.\n         *\n         * Resuming happens automatically from that saved stack state.\n         * Also the resolved promise value is passed along the callstack to\n         * `EscapeSequenceParser.parse` to correctly resume the stopped handler loop.\n         *\n         * Exceptions on async handlers will be logged to console async, but do not interrupt\n         * the input processing (continues with next handler at the current input position).\n         */\n\n        /**\n         * If a promise takes long to resolve, we should schedule continuation behind setTimeout.\n         * This might already be too late, if our .then enters really late (executor + prev thens took very long).\n         * This cannot be solved here for the handler itself (it is the handlers responsibility to slice hard work),\n         * but we can at least schedule a screen update as we gain control.\n         */\n        const continuation: (r: boolean) => void = (r: boolean) => Date.now() - startTime >= WRITE_TIMEOUT_MS\n          ? setTimeout(() => this._innerWrite(0, r))\n          : this._innerWrite(startTime, r);\n\n        /**\n         * Optimization considerations:\n         * The continuation above favors FPS over throughput by eval'ing `startTime` on resolve.\n         * This might schedule too many screen updates with bad throughput drops (in case a slow\n         * resolving handler sliced its work properly behind setTimeout calls). We cannot spot\n         * this condition here, also the renderer has no way to spot nonsense updates either.\n         * FIXME: A proper fix for this would track the FPS at the renderer entry level separately.\n         *\n         * If favoring of FPS shows bad throughtput impact, use the following instead. It favors\n         * throughput by eval'ing `startTime` upfront pulling at least one more chunk into the\n         * current microtask queue (executed before setTimeout).\n         */\n        // const continuation: (r: boolean) => void = Date.now() - startTime >= WRITE_TIMEOUT_MS\n        //   ? r => setTimeout(() => this._innerWrite(0, r))\n        //   : r => this._innerWrite(startTime, r);\n\n        // Handle exceptions synchronously to current band position, idea:\n        // 1. spawn a single microtask which we allow to throw hard\n        // 2. spawn a promise immediately resolving to `true`\n        // (executed on the same queue, thus properly aligned before continuation happens)\n        result.catch(err => {\n          qmt(() => {throw err;});\n          return Promise.resolve(false);\n        }).then(continuation);\n        return;\n      }\n\n      const cb = this._callbacks[this._bufferOffset];\n      if (cb) cb();\n      this._bufferOffset++;\n      this._pendingData -= data.length;\n\n      if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n        break;\n      }\n    }\n    if (this._writeBuffer.length > this._bufferOffset) {\n      // Allow renderer to catch up before processing the next batch\n      // trim already processed chunks if we are above threshold\n      if (this._bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n        this._writeBuffer = this._writeBuffer.slice(this._bufferOffset);\n        this._callbacks = this._callbacks.slice(this._bufferOffset);\n        this._bufferOffset = 0;\n      }\n      setTimeout(() => this._innerWrite());\n    } else {\n      this._writeBuffer.length = 0;\n      this._callbacks.length = 0;\n      this._pendingData = 0;\n      this._bufferOffset = 0;\n    }\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * Internal states of EscapeSequenceParser.\n */\nexport const enum ParserState {\n  GROUND = 0,\n  ESCAPE = 1,\n  ESCAPE_INTERMEDIATE = 2,\n  CSI_ENTRY = 3,\n  CSI_PARAM = 4,\n  CSI_INTERMEDIATE = 5,\n  CSI_IGNORE = 6,\n  SOS_PM_APC_STRING = 7,\n  OSC_STRING = 8,\n  DCS_ENTRY = 9,\n  DCS_PARAM = 10,\n  DCS_IGNORE = 11,\n  DCS_INTERMEDIATE = 12,\n  DCS_PASSTHROUGH = 13\n}\n\n/**\n* Internal actions of EscapeSequenceParser.\n*/\nexport const enum ParserAction {\n  IGNORE = 0,\n  ERROR = 1,\n  PRINT = 2,\n  EXECUTE = 3,\n  OSC_START = 4,\n  OSC_PUT = 5,\n  OSC_END = 6,\n  CSI_DISPATCH = 7,\n  PARAM = 8,\n  COLLECT = 9,\n  ESC_DISPATCH = 10,\n  CLEAR = 11,\n  DCS_HOOK = 12,\n  DCS_PUT = 13,\n  DCS_UNHOOK = 14\n}\n\n/**\n * Internal states of OscParser.\n */\nexport const enum OscState {\n  START = 0,\n  ID = 1,\n  PAYLOAD = 2,\n  ABORT = 3\n}\n\n// payload limit for OSC and DCS\nexport const PAYLOAD_LIMIT = 10000000;\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\nimport { IDcsHandler, IParams, IHandlerCollection, IDcsParser, DcsFallbackHandlerType, ISubParserStackState } from 'common/parser/Types';\nimport { utf32ToString } from 'common/input/TextDecoder';\nimport { Params } from 'common/parser/Params';\nimport { PAYLOAD_LIMIT } from 'common/parser/Constants';\n\nconst EMPTY_HANDLERS: IDcsHandler[] = [];\n\nexport class DcsParser implements IDcsParser {\n  private _handlers: IHandlerCollection<IDcsHandler> = Object.create(null);\n  private _active: IDcsHandler[] = EMPTY_HANDLERS;\n  private _ident: number = 0;\n  private _handlerFb: DcsFallbackHandlerType = () => { };\n  private _stack: ISubParserStackState = {\n    paused: false,\n    loopPosition: 0,\n    fallThrough: false\n  };\n\n  public dispose(): void {\n    this._handlers = Object.create(null);\n    this._handlerFb = () => { };\n    this._active = EMPTY_HANDLERS;\n  }\n\n  public registerHandler(ident: number, handler: IDcsHandler): IDisposable {\n    if (this._handlers[ident] === undefined) {\n      this._handlers[ident] = [];\n    }\n    const handlerList = this._handlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n\n  public clearHandler(ident: number): void {\n    if (this._handlers[ident]) delete this._handlers[ident];\n  }\n\n  public setHandlerFallback(handler: DcsFallbackHandlerType): void {\n    this._handlerFb = handler;\n  }\n\n  public reset(): void {\n    // force cleanup leftover handlers\n    if (this._active.length) {\n      for (let j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {\n        this._active[j].unhook(false);\n      }\n    }\n    this._stack.paused = false;\n    this._active = EMPTY_HANDLERS;\n    this._ident = 0;\n  }\n\n  public hook(ident: number, params: IParams): void {\n    // always reset leftover handlers\n    this.reset();\n    this._ident = ident;\n    this._active = this._handlers[ident] || EMPTY_HANDLERS;\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'HOOK', params);\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].hook(params);\n      }\n    }\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'PUT', utf32ToString(data, start, end));\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].put(data, start, end);\n      }\n    }\n  }\n\n  public unhook(success: boolean, promiseResult: boolean = true): void | Promise<boolean> {\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'UNHOOK', success);\n    } else {\n      let handlerResult: boolean | Promise<boolean> = false;\n      let j = this._active.length - 1;\n      let fallThrough = false;\n      if (this._stack.paused) {\n        j = this._stack.loopPosition - 1;\n        handlerResult = promiseResult;\n        fallThrough = this._stack.fallThrough;\n        this._stack.paused = false;\n      }\n      if (!fallThrough && handlerResult === false) {\n        for (; j >= 0; j--) {\n          handlerResult = this._active[j].unhook(success);\n          if (handlerResult === true) {\n            break;\n          } else if (handlerResult instanceof Promise) {\n            this._stack.paused = true;\n            this._stack.loopPosition = j;\n            this._stack.fallThrough = false;\n            return handlerResult;\n          }\n        }\n        j--;\n      }\n      // cleanup left over handlers (fallThrough for async)\n      for (; j >= 0; j--) {\n        handlerResult = this._active[j].unhook(false);\n        if (handlerResult instanceof Promise) {\n          this._stack.paused = true;\n          this._stack.loopPosition = j;\n          this._stack.fallThrough = true;\n          return handlerResult;\n        }\n      }\n    }\n    this._active = EMPTY_HANDLERS;\n    this._ident = 0;\n  }\n}\n\n// predefine empty params as [0] (ZDM)\nconst EMPTY_PARAMS = new Params();\nEMPTY_PARAMS.addParam(0);\n\n/**\n * Convenient class to create a DCS handler from a single callback function.\n * Note: The payload is currently limited to 50 MB (hardcoded).\n */\nexport class DcsHandler implements IDcsHandler {\n  private _data = '';\n  private _params: IParams = EMPTY_PARAMS;\n  private _hitLimit: boolean = false;\n\n  constructor(private _handler: (data: string, params: IParams) => boolean | Promise<boolean>) { }\n\n  public hook(params: IParams): void {\n    // since we need to preserve params until `unhook`, we have to clone it\n    // (only borrowed from parser and spans multiple parser states)\n    // perf optimization:\n    // clone only, if we have non empty params, otherwise stick with default\n    this._params = (params.length > 1 || params.params[0]) ? params.clone() : EMPTY_PARAMS;\n    this._data = '';\n    this._hitLimit = false;\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._hitLimit) {\n      return;\n    }\n    this._data += utf32ToString(data, start, end);\n    if (this._data.length > PAYLOAD_LIMIT) {\n      this._data = '';\n      this._hitLimit = true;\n    }\n  }\n\n  public unhook(success: boolean): boolean | Promise<boolean> {\n    let ret: boolean | Promise<boolean> = false;\n    if (this._hitLimit) {\n      ret = false;\n    } else if (success) {\n      ret = this._handler(this._data, this._params);\n      if (ret instanceof Promise) {\n        // need to hold data and params until `ret` got resolved\n        // dont care for errors, data will be freed anyway on next start\n        return ret.then(res => {\n          this._params = EMPTY_PARAMS;\n          this._data = '';\n          this._hitLimit = false;\n          return res;\n        });\n      }\n    }\n    this._params = EMPTY_PARAMS;\n    this._data = '';\n    this._hitLimit = false;\n    return ret;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IParsingState, IDcsHandler, IEscapeSequenceParser, IParams, IOscHandler, IHandlerCollection, CsiHandlerType, OscFallbackHandlerType, IOscParser, EscHandlerType, IDcsParser, DcsFallbackHandlerType, IFunctionIdentifier, ExecuteFallbackHandlerType, CsiFallbackHandlerType, EscFallbackHandlerType, PrintHandlerType, PrintFallbackHandlerType, ExecuteHandlerType, IParserStackState, ParserStackType, ResumableHandlersType } from 'common/parser/Types';\nimport { ParserState, ParserAction } from 'common/parser/Constants';\nimport { Disposable } from 'common/Lifecycle';\nimport { IDisposable } from 'common/Types';\nimport { fill } from 'common/TypedArrayUtils';\nimport { Params } from 'common/parser/Params';\nimport { OscParser } from 'common/parser/OscParser';\nimport { DcsParser } from 'common/parser/DcsParser';\n\n/**\n * Table values are generated like this:\n *    index:  currentState << TableValue.INDEX_STATE_SHIFT | charCode\n *    value:  action << TableValue.TRANSITION_ACTION_SHIFT | nextState\n */\nconst enum TableAccess {\n  TRANSITION_ACTION_SHIFT = 4,\n  TRANSITION_STATE_MASK = 15,\n  INDEX_STATE_SHIFT = 8\n}\n\n/**\n * Transition table for EscapeSequenceParser.\n */\nexport class TransitionTable {\n  public table: Uint8Array;\n\n  constructor(length: number) {\n    this.table = new Uint8Array(length);\n  }\n\n  /**\n   * Set default transition.\n   * @param action default action\n   * @param next default next state\n   */\n  public setDefault(action: ParserAction, next: ParserState): void {\n    fill(this.table, action << TableAccess.TRANSITION_ACTION_SHIFT | next);\n  }\n\n  /**\n   * Add a transition to the transition table.\n   * @param code input character code\n   * @param state current parser state\n   * @param action parser action to be done\n   * @param next next parser state\n   */\n  public add(code: number, state: ParserState, action: ParserAction, next: ParserState): void {\n    this.table[state << TableAccess.INDEX_STATE_SHIFT | code] = action << TableAccess.TRANSITION_ACTION_SHIFT | next;\n  }\n\n  /**\n   * Add transitions for multiple input character codes.\n   * @param codes input character code array\n   * @param state current parser state\n   * @param action parser action to be done\n   * @param next next parser state\n   */\n  public addMany(codes: number[], state: ParserState, action: ParserAction, next: ParserState): void {\n    for (let i = 0; i < codes.length; i++) {\n      this.table[state << TableAccess.INDEX_STATE_SHIFT | codes[i]] = action << TableAccess.TRANSITION_ACTION_SHIFT | next;\n    }\n  }\n}\n\n\n// Pseudo-character placeholder for printable non-ascii characters (unicode).\nconst NON_ASCII_PRINTABLE = 0xA0;\n\n\n/**\n * VT500 compatible transition table.\n * Taken from https://vt100.net/emu/dec_ansi_parser.\n */\nexport const VT500_TRANSITION_TABLE = (function (): TransitionTable {\n  const table: TransitionTable = new TransitionTable(4095);\n\n  // range macro for byte\n  const BYTE_VALUES = 256;\n  const blueprint = Array.apply(null, Array(BYTE_VALUES)).map((unused: any, i: number) => i);\n  const r = (start: number, end: number): number[] => blueprint.slice(start, end);\n\n  // Default definitions.\n  const PRINTABLES = r(0x20, 0x7f); // 0x20 (SP) included, 0x7F (DEL) excluded\n  const EXECUTABLES = r(0x00, 0x18);\n  EXECUTABLES.push(0x19);\n  EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\n\n  const states: number[] = r(ParserState.GROUND, ParserState.DCS_PASSTHROUGH + 1);\n  let state: any;\n\n  // set default transition\n  table.setDefault(ParserAction.ERROR, ParserState.GROUND);\n  // printables\n  table.addMany(PRINTABLES, ParserState.GROUND, ParserAction.PRINT, ParserState.GROUND);\n  // global anywhere rules\n  for (state in states) {\n    table.addMany([0x18, 0x1a, 0x99, 0x9a], state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.addMany(r(0x80, 0x90), state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.addMany(r(0x90, 0x98), state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.add(0x9c, state, ParserAction.IGNORE, ParserState.GROUND); // ST as terminator\n    table.add(0x1b, state, ParserAction.CLEAR, ParserState.ESCAPE);  // ESC\n    table.add(0x9d, state, ParserAction.OSC_START, ParserState.OSC_STRING);  // OSC\n    table.addMany([0x98, 0x9e, 0x9f], state, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n    table.add(0x9b, state, ParserAction.CLEAR, ParserState.CSI_ENTRY);  // CSI\n    table.add(0x90, state, ParserAction.CLEAR, ParserState.DCS_ENTRY);  // DCS\n  }\n  // rules for executables and 7f\n  table.addMany(EXECUTABLES, ParserState.GROUND, ParserAction.EXECUTE, ParserState.GROUND);\n  table.addMany(EXECUTABLES, ParserState.ESCAPE, ParserAction.EXECUTE, ParserState.ESCAPE);\n  table.add(0x7f, ParserState.ESCAPE, ParserAction.IGNORE, ParserState.ESCAPE);\n  table.addMany(EXECUTABLES, ParserState.OSC_STRING, ParserAction.IGNORE, ParserState.OSC_STRING);\n  table.addMany(EXECUTABLES, ParserState.CSI_ENTRY, ParserAction.EXECUTE, ParserState.CSI_ENTRY);\n  table.add(0x7f, ParserState.CSI_ENTRY, ParserAction.IGNORE, ParserState.CSI_ENTRY);\n  table.addMany(EXECUTABLES, ParserState.CSI_PARAM, ParserAction.EXECUTE, ParserState.CSI_PARAM);\n  table.add(0x7f, ParserState.CSI_PARAM, ParserAction.IGNORE, ParserState.CSI_PARAM);\n  table.addMany(EXECUTABLES, ParserState.CSI_IGNORE, ParserAction.EXECUTE, ParserState.CSI_IGNORE);\n  table.addMany(EXECUTABLES, ParserState.CSI_INTERMEDIATE, ParserAction.EXECUTE, ParserState.CSI_INTERMEDIATE);\n  table.add(0x7f, ParserState.CSI_INTERMEDIATE, ParserAction.IGNORE, ParserState.CSI_INTERMEDIATE);\n  table.addMany(EXECUTABLES, ParserState.ESCAPE_INTERMEDIATE, ParserAction.EXECUTE, ParserState.ESCAPE_INTERMEDIATE);\n  table.add(0x7f, ParserState.ESCAPE_INTERMEDIATE, ParserAction.IGNORE, ParserState.ESCAPE_INTERMEDIATE);\n  // osc\n  table.add(0x5d, ParserState.ESCAPE, ParserAction.OSC_START, ParserState.OSC_STRING);\n  table.addMany(PRINTABLES, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.add(0x7f, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], ParserState.OSC_STRING, ParserAction.OSC_END, ParserState.GROUND);\n  table.addMany(r(0x1c, 0x20), ParserState.OSC_STRING, ParserAction.IGNORE, ParserState.OSC_STRING);\n  // sos/pm/apc does nothing\n  table.addMany([0x58, 0x5e, 0x5f], ParserState.ESCAPE, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.addMany(PRINTABLES, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.addMany(EXECUTABLES, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.add(0x9c, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.GROUND);\n  table.add(0x7f, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  // csi entries\n  table.add(0x5b, ParserState.ESCAPE, ParserAction.CLEAR, ParserState.CSI_ENTRY);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_ENTRY, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x30, 0x3c), ParserState.CSI_ENTRY, ParserAction.PARAM, ParserState.CSI_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.CSI_ENTRY, ParserAction.COLLECT, ParserState.CSI_PARAM);\n  table.addMany(r(0x30, 0x3c), ParserState.CSI_PARAM, ParserAction.PARAM, ParserState.CSI_PARAM);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_PARAM, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.CSI_PARAM, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x20, 0x40), ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.add(0x7f, ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.GROUND);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_ENTRY, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_INTERMEDIATE, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  table.addMany(r(0x30, 0x40), ParserState.CSI_INTERMEDIATE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_INTERMEDIATE, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_PARAM, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  // esc_intermediate\n  table.addMany(r(0x20, 0x30), ParserState.ESCAPE, ParserAction.COLLECT, ParserState.ESCAPE_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.ESCAPE_INTERMEDIATE, ParserAction.COLLECT, ParserState.ESCAPE_INTERMEDIATE);\n  table.addMany(r(0x30, 0x7f), ParserState.ESCAPE_INTERMEDIATE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x30, 0x50), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x51, 0x58), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany([0x59, 0x5a, 0x5c], ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x60, 0x7f), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  // dcs entry\n  table.add(0x50, ParserState.ESCAPE, ParserAction.CLEAR, ParserState.DCS_ENTRY);\n  table.addMany(EXECUTABLES, ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.add(0x7f, ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_ENTRY, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x30, 0x3c), ParserState.DCS_ENTRY, ParserAction.PARAM, ParserState.DCS_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.DCS_ENTRY, ParserAction.COLLECT, ParserState.DCS_PARAM);\n  table.addMany(EXECUTABLES, ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x20, 0x80), ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(EXECUTABLES, ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.add(0x7f, ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.addMany(r(0x30, 0x3c), ParserState.DCS_PARAM, ParserAction.PARAM, ParserState.DCS_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_PARAM, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(EXECUTABLES, ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.add(0x7f, ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_INTERMEDIATE, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x30, 0x40), ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_INTERMEDIATE, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_PARAM, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_ENTRY, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(EXECUTABLES, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  table.addMany(PRINTABLES, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  table.add(0x7f, ParserState.DCS_PASSTHROUGH, ParserAction.IGNORE, ParserState.DCS_PASSTHROUGH);\n  table.addMany([0x1b, 0x9c, 0x18, 0x1a], ParserState.DCS_PASSTHROUGH, ParserAction.DCS_UNHOOK, ParserState.GROUND);\n  // special handling of unicode chars\n  table.add(NON_ASCII_PRINTABLE, ParserState.GROUND, ParserAction.PRINT, ParserState.GROUND);\n  table.add(NON_ASCII_PRINTABLE, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.add(NON_ASCII_PRINTABLE, ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.add(NON_ASCII_PRINTABLE, ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.add(NON_ASCII_PRINTABLE, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  return table;\n})();\n\n\n/**\n * EscapeSequenceParser.\n * This class implements the ANSI/DEC compatible parser described by\n * Paul Williams (https://vt100.net/emu/dec_ansi_parser).\n *\n * To implement custom ANSI compliant escape sequences it is not needed to\n * alter this parser, instead consider registering a custom handler.\n * For non ANSI compliant sequences change the transition table with\n * the optional `transitions` constructor argument and\n * reimplement the `parse` method.\n *\n * This parser is currently hardcoded to operate in ZDM (Zero Default Mode)\n * as suggested by the original parser, thus empty parameters are set to 0.\n * This this is not in line with the latest ECMA-48 specification\n * (ZDM was part of the early specs and got completely removed later on).\n *\n * Other than the original parser from vt100.net this parser supports\n * sub parameters in digital parameters separated by colons. Empty sub parameters\n * are set to -1 (no ZDM for sub parameters).\n *\n * About prefix and intermediate bytes:\n * This parser follows the assumptions of the vt100.net parser with these restrictions:\n * - only one prefix byte is allowed as first parameter byte, byte range 0x3c .. 0x3f\n * - max. two intermediates are respected, byte range 0x20 .. 0x2f\n * Note that this is not in line with ECMA-48 which does not limit either of those.\n * Furthermore ECMA-48 allows the prefix byte range at any param byte position. Currently\n * there are no known sequences that follow the broader definition of the specification.\n *\n * TODO: implement error recovery hook via error handler return values\n */\nexport class EscapeSequenceParser extends Disposable implements IEscapeSequenceParser {\n  public initialState: number;\n  public currentState: number;\n  public precedingCodepoint: number;\n\n  // buffers over several parse calls\n  protected _params: Params;\n  protected _collect: number;\n\n  // handler lookup containers\n  protected _printHandler: PrintHandlerType;\n  protected _executeHandlers: { [flag: number]: ExecuteHandlerType };\n  protected _csiHandlers: IHandlerCollection<CsiHandlerType>;\n  protected _escHandlers: IHandlerCollection<EscHandlerType>;\n  protected _oscParser: IOscParser;\n  protected _dcsParser: IDcsParser;\n  protected _errorHandler: (state: IParsingState) => IParsingState;\n\n  // fallback handlers\n  protected _printHandlerFb: PrintFallbackHandlerType;\n  protected _executeHandlerFb: ExecuteFallbackHandlerType;\n  protected _csiHandlerFb: CsiFallbackHandlerType;\n  protected _escHandlerFb: EscFallbackHandlerType;\n  protected _errorHandlerFb: (state: IParsingState) => IParsingState;\n\n  // parser stack save for async handler support\n  protected _parseStack: IParserStackState = {\n    state: ParserStackType.NONE,\n    handlers: [],\n    handlerPos: 0,\n    transition: 0,\n    chunkPos: 0\n  };\n\n  constructor(\n    protected readonly _transitions: TransitionTable = VT500_TRANSITION_TABLE\n  ) {\n    super();\n\n    this.initialState = ParserState.GROUND;\n    this.currentState = this.initialState;\n    this._params = new Params(); // defaults to 32 storable params/subparams\n    this._params.addParam(0);    // ZDM\n    this._collect = 0;\n    this.precedingCodepoint = 0;\n\n    // set default fallback handlers and handler lookup containers\n    this._printHandlerFb = (data, start, end): void => { };\n    this._executeHandlerFb = (code: number): void => { };\n    this._csiHandlerFb = (ident: number, params: IParams): void => { };\n    this._escHandlerFb = (ident: number): void => { };\n    this._errorHandlerFb = (state: IParsingState): IParsingState => state;\n    this._printHandler = this._printHandlerFb;\n    this._executeHandlers = Object.create(null);\n    this._csiHandlers = Object.create(null);\n    this._escHandlers = Object.create(null);\n    this._oscParser = new OscParser();\n    this._dcsParser = new DcsParser();\n    this._errorHandler = this._errorHandlerFb;\n\n    // swallow 7bit ST (ESC+\\)\n    this.registerEscHandler({ final: '\\\\' }, () => true);\n  }\n\n  protected _identifier(id: IFunctionIdentifier, finalRange: number[] = [0x40, 0x7e]): number {\n    let res = 0;\n    if (id.prefix) {\n      if (id.prefix.length > 1) {\n        throw new Error('only one byte as prefix supported');\n      }\n      res = id.prefix.charCodeAt(0);\n      if (res && 0x3c > res || res > 0x3f) {\n        throw new Error('prefix must be in range 0x3c .. 0x3f');\n      }\n    }\n    if (id.intermediates) {\n      if (id.intermediates.length > 2) {\n        throw new Error('only two bytes as intermediates are supported');\n      }\n      for (let i = 0; i < id.intermediates.length; ++i) {\n        const intermediate = id.intermediates.charCodeAt(i);\n        if (0x20 > intermediate || intermediate > 0x2f) {\n          throw new Error('intermediate must be in range 0x20 .. 0x2f');\n        }\n        res <<= 8;\n        res |= intermediate;\n      }\n    }\n    if (id.final.length !== 1) {\n      throw new Error('final must be a single byte');\n    }\n    const finalCode = id.final.charCodeAt(0);\n    if (finalRange[0] > finalCode || finalCode > finalRange[1]) {\n      throw new Error(`final must be in range ${finalRange[0]} .. ${finalRange[1]}`);\n    }\n    res <<= 8;\n    res |= finalCode;\n\n    return res;\n  }\n\n  public identToString(ident: number): string {\n    const res: string[] = [];\n    while (ident) {\n      res.push(String.fromCharCode(ident & 0xFF));\n      ident >>= 8;\n    }\n    return res.reverse().join('');\n  }\n\n  public dispose(): void {\n    this._csiHandlers = Object.create(null);\n    this._executeHandlers = Object.create(null);\n    this._escHandlers = Object.create(null);\n    this._oscParser.dispose();\n    this._dcsParser.dispose();\n  }\n\n  public setPrintHandler(handler: PrintHandlerType): void {\n    this._printHandler = handler;\n  }\n  public clearPrintHandler(): void {\n    this._printHandler = this._printHandlerFb;\n  }\n\n  public registerEscHandler(id: IFunctionIdentifier, handler: EscHandlerType): IDisposable {\n    const ident = this._identifier(id, [0x30, 0x7e]);\n    if (this._escHandlers[ident] === undefined) {\n      this._escHandlers[ident] = [];\n    }\n    const handlerList = this._escHandlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearEscHandler(id: IFunctionIdentifier): void {\n    if (this._escHandlers[this._identifier(id, [0x30, 0x7e])]) delete this._escHandlers[this._identifier(id, [0x30, 0x7e])];\n  }\n  public setEscHandlerFallback(handler: EscFallbackHandlerType): void {\n    this._escHandlerFb = handler;\n  }\n\n  public setExecuteHandler(flag: string, handler: ExecuteHandlerType): void {\n    this._executeHandlers[flag.charCodeAt(0)] = handler;\n  }\n  public clearExecuteHandler(flag: string): void {\n    if (this._executeHandlers[flag.charCodeAt(0)]) delete this._executeHandlers[flag.charCodeAt(0)];\n  }\n  public setExecuteHandlerFallback(handler: ExecuteFallbackHandlerType): void {\n    this._executeHandlerFb = handler;\n  }\n\n  public registerCsiHandler(id: IFunctionIdentifier, handler: CsiHandlerType): IDisposable {\n    const ident = this._identifier(id);\n    if (this._csiHandlers[ident] === undefined) {\n      this._csiHandlers[ident] = [];\n    }\n    const handlerList = this._csiHandlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearCsiHandler(id: IFunctionIdentifier): void {\n    if (this._csiHandlers[this._identifier(id)]) delete this._csiHandlers[this._identifier(id)];\n  }\n  public setCsiHandlerFallback(callback: (ident: number, params: IParams) => void): void {\n    this._csiHandlerFb = callback;\n  }\n\n  public registerDcsHandler(id: IFunctionIdentifier, handler: IDcsHandler): IDisposable {\n    return this._dcsParser.registerHandler(this._identifier(id), handler);\n  }\n  public clearDcsHandler(id: IFunctionIdentifier): void {\n    this._dcsParser.clearHandler(this._identifier(id));\n  }\n  public setDcsHandlerFallback(handler: DcsFallbackHandlerType): void {\n    this._dcsParser.setHandlerFallback(handler);\n  }\n\n  public registerOscHandler(ident: number, handler: IOscHandler): IDisposable {\n    return this._oscParser.registerHandler(ident, handler);\n  }\n  public clearOscHandler(ident: number): void {\n    this._oscParser.clearHandler(ident);\n  }\n  public setOscHandlerFallback(handler: OscFallbackHandlerType): void {\n    this._oscParser.setHandlerFallback(handler);\n  }\n\n  public setErrorHandler(callback: (state: IParsingState) => IParsingState): void {\n    this._errorHandler = callback;\n  }\n  public clearErrorHandler(): void {\n    this._errorHandler = this._errorHandlerFb;\n  }\n\n  /**\n   * Reset parser to initial values.\n   *\n   * This can also be used to lift the improper continuation error condition\n   * when dealing with async handlers. Use this only as a last resort to silence\n   * that error when the terminal has no pending data to be processed. Note that\n   * the interrupted async handler might continue its work in the future messing\n   * up the terminal state even further.\n   */\n  public reset(): void {\n    this.currentState = this.initialState;\n    this._oscParser.reset();\n    this._dcsParser.reset();\n    this._params.reset();\n    this._params.addParam(0); // ZDM\n    this._collect = 0;\n    this.precedingCodepoint = 0;\n    // abort pending continuation from async handler\n    // Here the RESET type indicates, that the next parse call will\n    // ignore any saved stack, instead continues sync with next codepoint from GROUND\n    if (this._parseStack.state !== ParserStackType.NONE) {\n      this._parseStack.state = ParserStackType.RESET;\n      this._parseStack.handlers = []; // also release handlers ref\n    }\n  }\n\n  /**\n   * Async parse support.\n   */\n  protected _preserveStack(\n    state: ParserStackType,\n    handlers: ResumableHandlersType,\n    handlerPos: number,\n    transition: number,\n    chunkPos: number\n  ): void {\n    this._parseStack.state = state;\n    this._parseStack.handlers = handlers;\n    this._parseStack.handlerPos = handlerPos;\n    this._parseStack.transition = transition;\n    this._parseStack.chunkPos = chunkPos;\n  }\n\n  /**\n   * Parse UTF32 codepoints in `data` up to `length`.\n   *\n   * Note: For several actions with high data load the parsing is optimized\n   * by using local read ahead loops with hardcoded conditions to\n   * avoid costly table lookups. Make sure that any change of table values\n   * will be reflected in the loop conditions as well and vice versa.\n   * Affected states/actions:\n   * - GROUND:PRINT\n   * - CSI_PARAM:PARAM\n   * - DCS_PARAM:PARAM\n   * - OSC_STRING:OSC_PUT\n   * - DCS_PASSTHROUGH:DCS_PUT\n   *\n   * Note on asynchronous handler support:\n   * Any handler returning a promise will be treated as asynchronous.\n   * To keep the in-band blocking working for async handlers, `parse` pauses execution,\n   * creates a stack save and returns the promise to the caller.\n   * For proper continuation of the paused state it is important\n   * to await the promise resolving. On resolve the parse must be repeated\n   * with the same chunk of data and the resolved value in `promiseResult`\n   * until no promise is returned.\n   *\n   * Important: With only sync handlers defined, parsing is completely synchronous as well.\n   * As soon as an async handler is involved, synchronous parsing is not possible anymore.\n   *\n   * Boilerplate for proper parsing of multiple chunks with async handlers:\n   *\n   * ```typescript\n   * async function parseMultipleChunks(chunks: Uint32Array[]): Promise<void> {\n   *   for (const chunk of chunks) {\n   *     let result: void | Promise<boolean>;\n   *     let prev: boolean | undefined;\n   *     while (result = parser.parse(chunk, chunk.length, prev)) {\n   *       prev = await result;\n   *     }\n   *   }\n   *   // finished parsing all chunks...\n   * }\n   * ```\n   */\n  public parse(data: Uint32Array, length: number, promiseResult?: boolean): void | Promise<boolean> {\n    let code = 0;\n    let transition = 0;\n    let start = 0;\n    let handlerResult: void | boolean | Promise<boolean>;\n\n    // resume from async handler\n    if (this._parseStack.state) {\n      // allow sync parser reset even in continuation mode\n      // Note: can be used to recover parser from improper continuation error below\n      if (this._parseStack.state === ParserStackType.RESET) {\n        this._parseStack.state = ParserStackType.NONE;\n        start = this._parseStack.chunkPos + 1; // continue with next codepoint in GROUND\n      } else {\n        if (promiseResult === undefined || this._parseStack.state === ParserStackType.FAIL) {\n          /**\n           * Reject further parsing on improper continuation after pausing.\n           * This is a really bad condition with screwed up execution order and prolly messed up\n           * terminal state, therefore we exit hard with an exception and reject any further parsing.\n           *\n           * Note: With `Terminal.write` usage this exception should never occur, as the top level\n           * calls are guaranteed to handle async conditions properly. If you ever encounter this\n           * exception in your terminal integration it indicates, that you injected data chunks to\n           * `InputHandler.parse` or `EscapeSequenceParser.parse` synchronously without waiting for\n           * continuation of a running async handler.\n           *\n           * It is possible to get rid of this error by calling `reset`. But dont rely on that,\n           * as the pending async handler still might mess up the terminal later. Instead fix the faulty\n           * async handling, so this error will not be thrown anymore.\n           */\n          this._parseStack.state = ParserStackType.FAIL;\n          throw new Error('improper continuation due to previous async handler, giving up parsing');\n        }\n\n        // we have to resume the old handler loop if:\n        // - return value of the promise was `false`\n        // - handlers are not exhausted yet\n        const handlers = this._parseStack.handlers;\n        let handlerPos = this._parseStack.handlerPos - 1;\n        switch (this._parseStack.state) {\n          case ParserStackType.CSI:\n            if (promiseResult === false && handlerPos > -1) {\n              for (; handlerPos >= 0; handlerPos--) {\n                handlerResult = (handlers as CsiHandlerType[])[handlerPos](this._params);\n                if (handlerResult === true) {\n                  break;\n                } else if (handlerResult instanceof Promise) {\n                  this._parseStack.handlerPos = handlerPos;\n                  return handlerResult;\n                }\n              }\n            }\n            this._parseStack.handlers = [];\n            break;\n          case ParserStackType.ESC:\n            if (promiseResult === false && handlerPos > -1) {\n              for (; handlerPos >= 0; handlerPos--) {\n                handlerResult = (handlers as EscHandlerType[])[handlerPos]();\n                if (handlerResult === true) {\n                  break;\n                } else if (handlerResult instanceof Promise) {\n                  this._parseStack.handlerPos = handlerPos;\n                  return handlerResult;\n                }\n              }\n            }\n            this._parseStack.handlers = [];\n            break;\n          case ParserStackType.DCS:\n            code = data[this._parseStack.chunkPos];\n            handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a, promiseResult);\n            if (handlerResult) {\n              return handlerResult;\n            }\n            if (code === 0x1b) this._parseStack.transition |= ParserState.ESCAPE;\n            this._params.reset();\n            this._params.addParam(0); // ZDM\n            this._collect = 0;\n            break;\n          case ParserStackType.OSC:\n            code = data[this._parseStack.chunkPos];\n            handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a, promiseResult);\n            if (handlerResult) {\n              return handlerResult;\n            }\n            if (code === 0x1b) this._parseStack.transition |= ParserState.ESCAPE;\n            this._params.reset();\n            this._params.addParam(0); // ZDM\n            this._collect = 0;\n            break;\n        }\n        // cleanup before continuing with the main sync loop\n        this._parseStack.state = ParserStackType.NONE;\n        start = this._parseStack.chunkPos + 1;\n        this.precedingCodepoint = 0;\n        this.currentState = this._parseStack.transition & TableAccess.TRANSITION_STATE_MASK;\n      }\n    }\n\n    // continue with main sync loop\n\n    // process input string\n    for (let i = start; i < length; ++i) {\n      code = data[i];\n\n      // normal transition & action lookup\n      transition = this._transitions.table[this.currentState << TableAccess.INDEX_STATE_SHIFT | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n      switch (transition >> TableAccess.TRANSITION_ACTION_SHIFT) {\n        case ParserAction.PRINT:\n          // read ahead with loop unrolling\n          // Note: 0x20 (SP) is included, 0x7F (DEL) is excluded\n          for (let j = i + 1; ; ++j) {\n            if (j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.EXECUTE:\n          if (this._executeHandlers[code]) this._executeHandlers[code]();\n          else this._executeHandlerFb(code);\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.IGNORE:\n          break;\n        case ParserAction.ERROR:\n          const inject: IParsingState = this._errorHandler(\n            {\n              position: i,\n              code,\n              currentState: this.currentState,\n              collect: this._collect,\n              params: this._params,\n              abort: false\n            });\n          if (inject.abort) return;\n          // inject values: currently not implemented\n          break;\n        case ParserAction.CSI_DISPATCH:\n          // Trigger CSI Handler\n          const handlers = this._csiHandlers[this._collect << 8 | code];\n          let j = handlers ? handlers.length - 1 : -1;\n          for (; j >= 0; j--) {\n            // true means success and to stop bubbling\n            // a promise indicates an async handler that needs to finish before progressing\n            handlerResult = handlers[j](this._params);\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._preserveStack(ParserStackType.CSI, handlers, j, transition, i);\n              return handlerResult;\n            }\n          }\n          if (j < 0) {\n            this._csiHandlerFb(this._collect << 8 | code, this._params);\n          }\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.PARAM:\n          // inner loop: digits (0x30 - 0x39) and ; (0x3b) and : (0x3a)\n          do {\n            switch (code) {\n              case 0x3b:\n                this._params.addParam(0);  // ZDM\n                break;\n              case 0x3a:\n                this._params.addSubParam(-1);\n                break;\n              default:  // 0x30 - 0x39\n                this._params.addDigit(code - 48);\n            }\n          } while (++i < length && (code = data[i]) > 0x2f && code < 0x3c);\n          i--;\n          break;\n        case ParserAction.COLLECT:\n          this._collect <<= 8;\n          this._collect |= code;\n          break;\n        case ParserAction.ESC_DISPATCH:\n          const handlersEsc = this._escHandlers[this._collect << 8 | code];\n          let jj = handlersEsc ? handlersEsc.length - 1 : -1;\n          for (; jj >= 0; jj--) {\n            // true means success and to stop bubbling\n            // a promise indicates an async handler that needs to finish before progressing\n            handlerResult = handlersEsc[jj]();\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._preserveStack(ParserStackType.ESC, handlersEsc, jj, transition, i);\n              return handlerResult;\n            }\n          }\n          if (jj < 0) {\n            this._escHandlerFb(this._collect << 8 | code);\n          }\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.CLEAR:\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          break;\n        case ParserAction.DCS_HOOK:\n          this._dcsParser.hook(this._collect << 8 | code, this._params);\n          break;\n        case ParserAction.DCS_PUT:\n          // inner loop - exit DCS_PUT: 0x18, 0x1a, 0x1b, 0x7f, 0x80 - 0x9f\n          // unhook triggered by: 0x1b, 0x9c (success) and 0x18, 0x1a (abort)\n          for (let j = i + 1; ; ++j) {\n            if (j >= length || (code = data[j]) === 0x18 || code === 0x1a || code === 0x1b || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {\n              this._dcsParser.put(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.DCS_UNHOOK:\n          handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a);\n          if (handlerResult) {\n            this._preserveStack(ParserStackType.DCS, [], 0, transition, i);\n            return handlerResult;\n          }\n          if (code === 0x1b) transition |= ParserState.ESCAPE;\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.OSC_START:\n          this._oscParser.start();\n          break;\n        case ParserAction.OSC_PUT:\n          // inner loop: 0x20 (SP) included, 0x7F (DEL) included\n          for (let j = i + 1; ; j++) {\n            if (j >= length || (code = data[j]) < 0x20 || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {\n              this._oscParser.put(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.OSC_END:\n          handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a);\n          if (handlerResult) {\n            this._preserveStack(ParserStackType.OSC, [], 0, transition, i);\n            return handlerResult;\n          }\n          if (code === 0x1b) transition |= ParserState.ESCAPE;\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          this.precedingCodepoint = 0;\n          break;\n      }\n      this.currentState = transition & TableAccess.TRANSITION_STATE_MASK;\n    }\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOscHandler, IHandlerCollection, OscFallbackHandlerType, IOscParser, ISubParserStackState } from 'common/parser/Types';\nimport { OscState, PAYLOAD_LIMIT } from 'common/parser/Constants';\nimport { utf32ToString } from 'common/input/TextDecoder';\nimport { IDisposable } from 'common/Types';\n\nconst EMPTY_HANDLERS: IOscHandler[] = [];\n\nexport class OscParser implements IOscParser {\n  private _state = OscState.START;\n  private _active = EMPTY_HANDLERS;\n  private _id = -1;\n  private _handlers: IHandlerCollection<IOscHandler> = Object.create(null);\n  private _handlerFb: OscFallbackHandlerType = () => { };\n  private _stack: ISubParserStackState = {\n    paused: false,\n    loopPosition: 0,\n    fallThrough: false\n  };\n\n  public registerHandler(ident: number, handler: IOscHandler): IDisposable {\n    if (this._handlers[ident] === undefined) {\n      this._handlers[ident] = [];\n    }\n    const handlerList = this._handlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearHandler(ident: number): void {\n    if (this._handlers[ident]) delete this._handlers[ident];\n  }\n  public setHandlerFallback(handler: OscFallbackHandlerType): void {\n    this._handlerFb = handler;\n  }\n\n  public dispose(): void {\n    this._handlers = Object.create(null);\n    this._handlerFb = () => { };\n    this._active = EMPTY_HANDLERS;\n  }\n\n  public reset(): void {\n    // force cleanup handlers if payload was already sent\n    if (this._state === OscState.PAYLOAD) {\n      for (let j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {\n        this._active[j].end(false);\n      }\n    }\n    this._stack.paused = false;\n    this._active = EMPTY_HANDLERS;\n    this._id = -1;\n    this._state = OscState.START;\n  }\n\n  private _start(): void {\n    this._active = this._handlers[this._id] || EMPTY_HANDLERS;\n    if (!this._active.length) {\n      this._handlerFb(this._id, 'START');\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].start();\n      }\n    }\n  }\n\n  private _put(data: Uint32Array, start: number, end: number): void {\n    if (!this._active.length) {\n      this._handlerFb(this._id, 'PUT', utf32ToString(data, start, end));\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].put(data, start, end);\n      }\n    }\n  }\n\n  public start(): void {\n    // always reset leftover handlers\n    this.reset();\n    this._state = OscState.ID;\n  }\n\n  /**\n   * Put data to current OSC command.\n   * Expects the identifier of the OSC command in the form\n   * OSC id ; payload ST/BEL\n   * Payload chunks are not further processed and get\n   * directly passed to the handlers.\n   */\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._state === OscState.ABORT) {\n      return;\n    }\n    if (this._state === OscState.ID) {\n      while (start < end) {\n        const code = data[start++];\n        if (code === 0x3b) {\n          this._state = OscState.PAYLOAD;\n          this._start();\n          break;\n        }\n        if (code < 0x30 || 0x39 < code) {\n          this._state = OscState.ABORT;\n          return;\n        }\n        if (this._id === -1) {\n          this._id = 0;\n        }\n        this._id = this._id * 10 + code - 48;\n      }\n    }\n    if (this._state === OscState.PAYLOAD && end - start > 0) {\n      this._put(data, start, end);\n    }\n  }\n\n  /**\n   * Indicates end of an OSC command.\n   * Whether the OSC got aborted or finished normally\n   * is indicated by `success`.\n   */\n  public end(success: boolean, promiseResult: boolean = true): void | Promise<boolean> {\n    if (this._state === OscState.START) {\n      return;\n    }\n    // do nothing if command was faulty\n    if (this._state !== OscState.ABORT) {\n      // if we are still in ID state and get an early end\n      // means that the command has no payload thus we still have\n      // to announce START and send END right after\n      if (this._state === OscState.ID) {\n        this._start();\n      }\n\n      if (!this._active.length) {\n        this._handlerFb(this._id, 'END', success);\n      } else {\n        let handlerResult: boolean | Promise<boolean> = false;\n        let j = this._active.length - 1;\n        let fallThrough = false;\n        if (this._stack.paused) {\n          j = this._stack.loopPosition - 1;\n          handlerResult = promiseResult;\n          fallThrough = this._stack.fallThrough;\n          this._stack.paused = false;\n        }\n        if (!fallThrough && handlerResult === false) {\n          for (; j >= 0; j--) {\n            handlerResult = this._active[j].end(success);\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._stack.paused = true;\n              this._stack.loopPosition = j;\n              this._stack.fallThrough = false;\n              return handlerResult;\n            }\n          }\n          j--;\n        }\n        // cleanup left over handlers\n        // we always have to call .end for proper cleanup,\n        // here we use `success` to indicate whether a handler should execute\n        for (; j >= 0; j--) {\n          handlerResult = this._active[j].end(false);\n          if (handlerResult instanceof Promise) {\n            this._stack.paused = true;\n            this._stack.loopPosition = j;\n            this._stack.fallThrough = true;\n            return handlerResult;\n          }\n        }\n      }\n\n    }\n    this._active = EMPTY_HANDLERS;\n    this._id = -1;\n    this._state = OscState.START;\n  }\n}\n\n/**\n * Convenient class to allow attaching string based handler functions\n * as OSC handlers.\n */\nexport class OscHandler implements IOscHandler {\n  private _data = '';\n  private _hitLimit: boolean = false;\n\n  constructor(private _handler: (data: string) => boolean | Promise<boolean>) { }\n\n  public start(): void {\n    this._data = '';\n    this._hitLimit = false;\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._hitLimit) {\n      return;\n    }\n    this._data += utf32ToString(data, start, end);\n    if (this._data.length > PAYLOAD_LIMIT) {\n      this._data = '';\n      this._hitLimit = true;\n    }\n  }\n\n  public end(success: boolean): boolean | Promise<boolean> {\n    let ret: boolean | Promise<boolean> = false;\n    if (this._hitLimit) {\n      ret = false;\n    } else if (success) {\n      ret = this._handler(this._data);\n      if (ret instanceof Promise) {\n        // need to hold data until `ret` got resolved\n        // dont care for errors, data will be freed anyway on next start\n        return ret.then(res => {\n          this._data = '';\n          this._hitLimit = false;\n          return res;\n        });\n      }\n    }\n    this._data = '';\n    this._hitLimit = false;\n    return ret;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IParams, ParamsArray } from 'common/parser/Types';\n\n// max value supported for a single param/subparam (clamped to positive int32 range)\nconst MAX_VALUE = 0x7FFFFFFF;\n// max allowed subparams for a single sequence (hardcoded limitation)\nconst MAX_SUBPARAMS = 256;\n\n/**\n * Params storage class.\n * This type is used by the parser to accumulate sequence parameters and sub parameters\n * and transmit them to the input handler actions.\n *\n * NOTES:\n *  - params object for action handlers is borrowed, use `.toArray` or `.clone` to get a copy\n *  - never read beyond `params.length - 1` (likely to contain arbitrary data)\n *  - `.getSubParams` returns a borrowed typed array, use `.getSubParamsAll` for cloned sub params\n *  - hardcoded limitations:\n *    - max. value for a single (sub) param is 2^31 - 1 (greater values are clamped to that)\n *    - max. 256 sub params possible\n *    - negative values are not allowed beside -1 (placeholder for default value)\n *\n * About ZDM (Zero Default Mode):\n * ZDM is not orchestrated by this class. If the parser is in ZDM,\n * it should add 0 for empty params, otherwise -1. This does not apply\n * to subparams, empty subparams should always be added with -1.\n */\nexport class Params implements IParams {\n  // params store and length\n  public params: Int32Array;\n  public length: number;\n\n  // sub params store and length\n  protected _subParams: Int32Array;\n  protected _subParamsLength: number;\n\n  // sub params offsets from param: param idx --> [start, end] offset\n  private _subParamsIdx: Uint16Array;\n  private _rejectDigits: boolean;\n  private _rejectSubDigits: boolean;\n  private _digitIsSub: boolean;\n\n  /**\n   * Create a `Params` type from JS array representation.\n   */\n  public static fromArray(values: ParamsArray): Params {\n    const params = new Params();\n    if (!values.length) {\n      return params;\n    }\n    // skip leading sub params\n    for (let i = (values[0] instanceof Array) ? 1 : 0; i < values.length; ++i) {\n      const value = values[i];\n      if (value instanceof Array) {\n        for (let k = 0; k < value.length; ++k) {\n          params.addSubParam(value[k]);\n        }\n      } else {\n        params.addParam(value);\n      }\n    }\n    return params;\n  }\n\n  /**\n   * @param maxLength max length of storable parameters\n   * @param maxSubParamsLength max length of storable sub parameters\n   */\n  constructor(public maxLength: number = 32, public maxSubParamsLength: number = 32) {\n    if (maxSubParamsLength > MAX_SUBPARAMS) {\n      throw new Error('maxSubParamsLength must not be greater than 256');\n    }\n    this.params = new Int32Array(maxLength);\n    this.length = 0;\n    this._subParams = new Int32Array(maxSubParamsLength);\n    this._subParamsLength = 0;\n    this._subParamsIdx = new Uint16Array(maxLength);\n    this._rejectDigits = false;\n    this._rejectSubDigits = false;\n    this._digitIsSub = false;\n  }\n\n  /**\n   * Clone object.\n   */\n  public clone(): Params {\n    const newParams = new Params(this.maxLength, this.maxSubParamsLength);\n    newParams.params.set(this.params);\n    newParams.length = this.length;\n    newParams._subParams.set(this._subParams);\n    newParams._subParamsLength = this._subParamsLength;\n    newParams._subParamsIdx.set(this._subParamsIdx);\n    newParams._rejectDigits = this._rejectDigits;\n    newParams._rejectSubDigits = this._rejectSubDigits;\n    newParams._digitIsSub = this._digitIsSub;\n    return newParams;\n  }\n\n  /**\n   * Get a JS array representation of the current parameters and sub parameters.\n   * The array is structured as follows:\n   *    sequence: \"1;2:3:4;5::6\"\n   *    array   : [1, 2, [3, 4], 5, [-1, 6]]\n   */\n  public toArray(): ParamsArray {\n    const res: ParamsArray = [];\n    for (let i = 0; i < this.length; ++i) {\n      res.push(this.params[i]);\n      const start = this._subParamsIdx[i] >> 8;\n      const end = this._subParamsIdx[i] & 0xFF;\n      if (end - start > 0) {\n        res.push(Array.prototype.slice.call(this._subParams, start, end));\n      }\n    }\n    return res;\n  }\n\n  /**\n   * Reset to initial empty state.\n   */\n  public reset(): void {\n    this.length = 0;\n    this._subParamsLength = 0;\n    this._rejectDigits = false;\n    this._rejectSubDigits = false;\n    this._digitIsSub = false;\n  }\n\n  /**\n   * Add a parameter value.\n   * `Params` only stores up to `maxLength` parameters, any later\n   * parameter will be ignored.\n   * Note: VT devices only stored up to 16 values, xterm seems to\n   * store up to 30.\n   */\n  public addParam(value: number): void {\n    this._digitIsSub = false;\n    if (this.length >= this.maxLength) {\n      this._rejectDigits = true;\n      return;\n    }\n    if (value < -1) {\n      throw new Error('values lesser than -1 are not allowed');\n    }\n    this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength;\n    this.params[this.length++] = value > MAX_VALUE ? MAX_VALUE : value;\n  }\n\n  /**\n   * Add a sub parameter value.\n   * The sub parameter is automatically associated with the last parameter value.\n   * Thus it is not possible to add a subparameter without any parameter added yet.\n   * `Params` only stores up to `subParamsLength` sub parameters, any later\n   * sub parameter will be ignored.\n   */\n  public addSubParam(value: number): void {\n    this._digitIsSub = true;\n    if (!this.length) {\n      return;\n    }\n    if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {\n      this._rejectSubDigits = true;\n      return;\n    }\n    if (value < -1) {\n      throw new Error('values lesser than -1 are not allowed');\n    }\n    this._subParams[this._subParamsLength++] = value > MAX_VALUE ? MAX_VALUE : value;\n    this._subParamsIdx[this.length - 1]++;\n  }\n\n  /**\n   * Whether parameter at index `idx` has sub parameters.\n   */\n  public hasSubParams(idx: number): boolean {\n    return ((this._subParamsIdx[idx] & 0xFF) - (this._subParamsIdx[idx] >> 8) > 0);\n  }\n\n  /**\n   * Return sub parameters for parameter at index `idx`.\n   * Note: The values are borrowed, thus you need to copy\n   * the values if you need to hold them in nonlocal scope.\n   */\n  public getSubParams(idx: number): Int32Array | null {\n    const start = this._subParamsIdx[idx] >> 8;\n    const end = this._subParamsIdx[idx] & 0xFF;\n    if (end - start > 0) {\n      return this._subParams.subarray(start, end);\n    }\n    return null;\n  }\n\n  /**\n   * Return all sub parameters as {idx: subparams} mapping.\n   * Note: The values are not borrowed.\n   */\n  public getSubParamsAll(): {[idx: number]: Int32Array} {\n    const result: {[idx: number]: Int32Array} = {};\n    for (let i = 0; i < this.length; ++i) {\n      const start = this._subParamsIdx[i] >> 8;\n      const end = this._subParamsIdx[i] & 0xFF;\n      if (end - start > 0) {\n        result[i] = this._subParams.slice(start, end);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Add a single digit value to current parameter.\n   * This is used by the parser to account digits on a char by char basis.\n   */\n  public addDigit(value: number): void {\n    let length;\n    if (this._rejectDigits\n      || !(length = this._digitIsSub ? this._subParamsLength : this.length)\n      || (this._digitIsSub && this._rejectSubDigits)\n    ) {\n      return;\n    }\n\n    const store = this._digitIsSub ? this._subParams : this.params;\n    const cur = store[length - 1];\n    store[length - 1] = ~cur ? Math.min(cur * 10 + value, MAX_VALUE) : value;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService, IOptionsService } from 'common/services/Services';\nimport { BufferSet } from 'common/buffer/BufferSet';\nimport { IBufferSet, IBuffer } from 'common/buffer/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { IAttributeData, IBufferLine, ScrollSource } from 'common/Types';\n\nexport const MINIMUM_COLS = 2; // Less than 2 can mess with wide chars\nexport const MINIMUM_ROWS = 1;\n\nexport class BufferService extends Disposable implements IBufferService {\n  public serviceBrand: any;\n\n  public cols: number;\n  public rows: number;\n  public buffers: IBufferSet;\n  /** Whether the user is scrolling (locks the scroll position) */\n  public isUserScrolling: boolean = false;\n\n  private _onResize = new EventEmitter<{ cols: number, rows: number }>();\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._onResize.event; }\n  private _onScroll = new EventEmitter<number>();\n  public get onScroll(): IEvent<number> { return this._onScroll.event; }\n\n  public get buffer(): IBuffer { return this.buffers.active; }\n\n  /** An IBufferline to clone/copy from for new blank lines */\n  private _cachedBlankLine: IBufferLine | undefined;\n\n  constructor(\n    @IOptionsService private _optionsService: IOptionsService\n  ) {\n    super();\n    this.cols = Math.max(_optionsService.options.cols, MINIMUM_COLS);\n    this.rows = Math.max(_optionsService.options.rows, MINIMUM_ROWS);\n    this.buffers = new BufferSet(_optionsService, this);\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this.buffers.dispose();\n  }\n\n  public resize(cols: number, rows: number): void {\n    this.cols = cols;\n    this.rows = rows;\n    this.buffers.resize(cols, rows);\n    this.buffers.setupTabStops(this.cols);\n    this._onResize.fire({ cols, rows });\n  }\n\n  public reset(): void {\n    this.buffers.reset();\n    this.isUserScrolling = false;\n  }\n\n  /**\n   * Scroll the terminal down 1 row, creating a blank line.\n   * @param isWrapped Whether the new line is wrapped from the previous line.\n   */\n  public scroll(eraseAttr: IAttributeData, isWrapped: boolean = false): void {\n    const buffer = this.buffer;\n\n    let newLine: IBufferLine | undefined;\n    newLine = this._cachedBlankLine;\n    if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n      newLine = buffer.getBlankLine(eraseAttr, isWrapped);\n      this._cachedBlankLine = newLine;\n    }\n    newLine.isWrapped = isWrapped;\n\n    const topRow = buffer.ybase + buffer.scrollTop;\n    const bottomRow = buffer.ybase + buffer.scrollBottom;\n\n    if (buffer.scrollTop === 0) {\n      // Determine whether the buffer is going to be trimmed after insertion.\n      const willBufferBeTrimmed = buffer.lines.isFull;\n\n      // Insert the line using the fastest method\n      if (bottomRow === buffer.lines.length - 1) {\n        if (willBufferBeTrimmed) {\n          buffer.lines.recycle().copyFrom(newLine);\n        } else {\n          buffer.lines.push(newLine.clone());\n        }\n      } else {\n        buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n      }\n\n      // Only adjust ybase and ydisp when the buffer is not trimmed\n      if (!willBufferBeTrimmed) {\n        buffer.ybase++;\n        // Only scroll the ydisp with ybase if the user has not scrolled up\n        if (!this.isUserScrolling) {\n          buffer.ydisp++;\n        }\n      } else {\n        // When the buffer is full and the user has scrolled up, keep the text\n        // stable unless ydisp is right at the top\n        if (this.isUserScrolling) {\n          buffer.ydisp = Math.max(buffer.ydisp - 1, 0);\n        }\n      }\n    } else {\n      // scrollTop is non-zero which means no line will be going to the\n      // scrollback, instead we can just shift them in-place.\n      const scrollRegionHeight = bottomRow - topRow + 1 /* as it's zero-based */;\n      buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n      buffer.lines.set(bottomRow, newLine.clone());\n    }\n\n    // Move the viewport to the bottom of the buffer unless the user is\n    // scrolling.\n    if (!this.isUserScrolling) {\n      buffer.ydisp = buffer.ybase;\n    }\n\n    this._onScroll.fire(buffer.ydisp);\n  }\n\n  /**\n   * Scroll the display of the terminal\n   * @param disp The number of lines to scroll down (negative scroll up).\n   * @param suppressScrollEvent Don't emit the scroll event as scrollLines. This is used\n   * to avoid unwanted events being handled by the viewport when the event was triggered from the\n   * viewport originally.\n   */\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void {\n    const buffer = this.buffer;\n    if (disp < 0) {\n      if (buffer.ydisp === 0) {\n        return;\n      }\n      this.isUserScrolling = true;\n    } else if (disp + buffer.ydisp >= buffer.ybase) {\n      this.isUserScrolling = false;\n    }\n\n    const oldYdisp = buffer.ydisp;\n    buffer.ydisp = Math.max(Math.min(buffer.ydisp + disp, buffer.ybase), 0);\n\n    // No change occurred, don't trigger scroll/refresh\n    if (oldYdisp === buffer.ydisp) {\n      return;\n    }\n\n    if (!suppressScrollEvent) {\n      this._onScroll.fire(buffer.ydisp);\n    }\n  }\n\n  /**\n   * Scroll the display of the terminal by a number of pages.\n   * @param pageCount The number of pages to scroll (negative scrolls up).\n   */\n  public scrollPages(pageCount: number): void {\n    this.scrollLines(pageCount * (this.rows - 1));\n  }\n\n  /**\n   * Scrolls the display of the terminal to the top.\n   */\n  public scrollToTop(): void {\n    this.scrollLines(-this.buffer.ydisp);\n  }\n\n  /**\n   * Scrolls the display of the terminal to the bottom.\n   */\n  public scrollToBottom(): void {\n    this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n  }\n\n  public scrollToLine(line: number): void {\n    const scrollAmount = line - this.buffer.ydisp;\n    if (scrollAmount !== 0) {\n      this.scrollLines(scrollAmount);\n    }\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharsetService } from 'common/services/Services';\nimport { ICharset } from 'common/Types';\n\nexport class CharsetService implements ICharsetService {\n  public serviceBrand: any;\n\n  public charset: ICharset | undefined;\n  public glevel: number = 0;\n\n  private _charsets: (ICharset | undefined)[] = [];\n\n  public reset(): void {\n    this.charset = undefined;\n    this._charsets = [];\n    this.glevel = 0;\n  }\n\n  public setgLevel(g: number): void {\n    this.glevel = g;\n    this.charset = this._charsets[g];\n  }\n\n  public setgCharset(g: number, charset: ICharset | undefined): void {\n    this._charsets[g] = charset;\n    if (this.glevel === g) {\n      this.charset = charset;\n    }\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IBufferService, ICoreService, ICoreMouseService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { ICoreMouseProtocol, ICoreMouseEvent, CoreMouseEncoding, CoreMouseEventType, CoreMouseButton, CoreMouseAction } from 'common/Types';\n\n/**\n * Supported default protocols.\n */\nconst DEFAULT_PROTOCOLS: {[key: string]: ICoreMouseProtocol} = {\n  /**\n   * NONE\n   * Events: none\n   * Modifiers: none\n   */\n  NONE: {\n    events: CoreMouseEventType.NONE,\n    restrict: () => false\n  },\n  /**\n   * X10\n   * Events: mousedown\n   * Modifiers: none\n   */\n  X10: {\n    events: CoreMouseEventType.DOWN,\n    restrict: (e: ICoreMouseEvent) => {\n      // no wheel, no move, no up\n      if (e.button === CoreMouseButton.WHEEL || e.action !== CoreMouseAction.DOWN) {\n        return false;\n      }\n      // no modifiers\n      e.ctrl = false;\n      e.alt = false;\n      e.shift = false;\n      return true;\n    }\n  },\n  /**\n   * VT200\n   * Events: mousedown / mouseup / wheel\n   * Modifiers: all\n   */\n  VT200: {\n    events: CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL,\n    restrict: (e: ICoreMouseEvent) => {\n      // no move\n      if (e.action === CoreMouseAction.MOVE) {\n        return false;\n      }\n      return true;\n    }\n  },\n  /**\n   * DRAG\n   * Events: mousedown / mouseup / wheel / mousedrag\n   * Modifiers: all\n   */\n  DRAG: {\n    events: CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL | CoreMouseEventType.DRAG,\n    restrict: (e: ICoreMouseEvent) => {\n      // no move without button\n      if (e.action === CoreMouseAction.MOVE && e.button === CoreMouseButton.NONE) {\n        return false;\n      }\n      return true;\n    }\n  },\n  /**\n   * ANY\n   * Events: all mouse related events\n   * Modifiers: all\n   */\n  ANY: {\n    events:\n      CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL\n      | CoreMouseEventType.DRAG | CoreMouseEventType.MOVE,\n    restrict: (e: ICoreMouseEvent) => true\n  }\n};\n\nconst enum Modifiers {\n  SHIFT = 4,\n  ALT = 8,\n  CTRL = 16\n}\n\n// helper for default encoders to generate the event code.\nfunction eventCode(e: ICoreMouseEvent, isSGR: boolean): number {\n  let code = (e.ctrl ? Modifiers.CTRL : 0) | (e.shift ? Modifiers.SHIFT : 0) | (e.alt ? Modifiers.ALT : 0);\n  if (e.button === CoreMouseButton.WHEEL) {\n    code |= 64;\n    code |= e.action;\n  } else {\n    code |= e.button & 3;\n    if (e.button & 4) {\n      code |= 64;\n    }\n    if (e.button & 8) {\n      code |= 128;\n    }\n    if (e.action === CoreMouseAction.MOVE) {\n      code |= CoreMouseAction.MOVE;\n    } else if (e.action === CoreMouseAction.UP && !isSGR) {\n      // special case - only SGR can report button on release\n      // all others have to go with NONE\n      code |= CoreMouseButton.NONE;\n    }\n  }\n  return code;\n}\n\nconst S = String.fromCharCode;\n\n/**\n * Supported default encodings.\n */\nconst DEFAULT_ENCODINGS: {[key: string]: CoreMouseEncoding} = {\n  /**\n   * DEFAULT - CSI M Pb Px Py\n   * Single byte encoding for coords and event code.\n   * Can encode values up to 223 (1-based).\n   */\n  DEFAULT: (e: ICoreMouseEvent) => {\n    const params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];\n    // supress mouse report if we exceed addressible range\n    // Note this is handled differently by emulators\n    // - xterm:         sends 0;0 coords instead\n    // - vte, konsole:  no report\n    if (params[0] > 255 || params[1] > 255 || params[2] > 255) {\n      return '';\n    }\n    return `\\x1b[M${S(params[0])}${S(params[1])}${S(params[2])}`;\n  },\n  /**\n   * SGR - CSI < Pb ; Px ; Py M|m\n   * No encoding limitation.\n   * Can report button on release and works with a well formed sequence.\n   */\n  SGR: (e: ICoreMouseEvent) => {\n    const final = (e.action === CoreMouseAction.UP && e.button !== CoreMouseButton.WHEEL) ? 'm' : 'M';\n    return `\\x1b[<${eventCode(e, true)};${e.col};${e.row}${final}`;\n  }\n};\n\n/**\n * CoreMouseService\n *\n * Provides mouse tracking reports with different protocols and encodings.\n *  - protocols: NONE (default), X10, VT200, DRAG, ANY\n *  - encodings: DEFAULT, SGR (UTF8, URXVT removed in #2507)\n *\n * Custom protocols/encodings can be added by `addProtocol` / `addEncoding`.\n * To activate a protocol/encoding, set `activeProtocol` / `activeEncoding`.\n * Switching a protocol will send a notification event `onProtocolChange`\n * with a list of needed events to track.\n *\n * The service handles the mouse tracking state and decides whether to send\n * a tracking report to the backend based on protocol and encoding limitations.\n * To send a mouse event call `triggerMouseEvent`.\n */\nexport class CoreMouseService implements ICoreMouseService {\n  private _protocols: {[name: string]: ICoreMouseProtocol} = {};\n  private _encodings: {[name: string]: CoreMouseEncoding} = {};\n  private _activeProtocol: string = '';\n  private _activeEncoding: string = '';\n  private _onProtocolChange = new EventEmitter<CoreMouseEventType>();\n  private _lastEvent: ICoreMouseEvent | null = null;\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICoreService private readonly _coreService: ICoreService\n  ) {\n    // register default protocols and encodings\n    for (const name of Object.keys(DEFAULT_PROTOCOLS)) this.addProtocol(name, DEFAULT_PROTOCOLS[name]);\n    for (const name of Object.keys(DEFAULT_ENCODINGS)) this.addEncoding(name, DEFAULT_ENCODINGS[name]);\n    // call reset to set defaults\n    this.reset();\n  }\n\n  public addProtocol(name: string, protocol: ICoreMouseProtocol): void {\n    this._protocols[name] = protocol;\n  }\n\n  public addEncoding(name: string, encoding: CoreMouseEncoding): void {\n    this._encodings[name] = encoding;\n  }\n\n  public get activeProtocol(): string {\n    return this._activeProtocol;\n  }\n\n  public get areMouseEventsActive(): boolean {\n    return this._protocols[this._activeProtocol].events !== 0;\n  }\n\n  public set activeProtocol(name: string) {\n    if (!this._protocols[name]) {\n      throw new Error(`unknown protocol \"${name}\"`);\n    }\n    this._activeProtocol = name;\n    this._onProtocolChange.fire(this._protocols[name].events);\n  }\n\n  public get activeEncoding(): string {\n    return this._activeEncoding;\n  }\n\n  public set activeEncoding(name: string) {\n    if (!this._encodings[name]) {\n      throw new Error(`unknown encoding \"${name}\"`);\n    }\n    this._activeEncoding = name;\n  }\n\n  public reset(): void {\n    this.activeProtocol = 'NONE';\n    this.activeEncoding = 'DEFAULT';\n    this._lastEvent = null;\n  }\n\n  /**\n   * Event to announce changes in mouse tracking.\n   */\n  public get onProtocolChange(): IEvent<CoreMouseEventType> {\n    return this._onProtocolChange.event;\n  }\n\n  /**\n   * Triggers a mouse event to be sent.\n   *\n   * Returns true if the event passed all protocol restrictions and a report\n   * was sent, otherwise false. The return value may be used to decide whether\n   * the default event action in the bowser component should be omitted.\n   *\n   * Note: The method will change values of the given event object\n   * to fullfill protocol and encoding restrictions.\n   */\n  public triggerMouseEvent(e: ICoreMouseEvent): boolean {\n    // range check for col/row\n    if (e.col < 0 || e.col >= this._bufferService.cols\n        || e.row < 0 || e.row >= this._bufferService.rows) {\n      return false;\n    }\n\n    // filter nonsense combinations of button + action\n    if (e.button === CoreMouseButton.WHEEL && e.action === CoreMouseAction.MOVE) {\n      return false;\n    }\n    if (e.button === CoreMouseButton.NONE && e.action !== CoreMouseAction.MOVE) {\n      return false;\n    }\n    if (e.button !== CoreMouseButton.WHEEL && (e.action === CoreMouseAction.LEFT || e.action === CoreMouseAction.RIGHT)) {\n      return false;\n    }\n\n    // report 1-based coords\n    e.col++;\n    e.row++;\n\n    // debounce move at grid level\n    if (e.action === CoreMouseAction.MOVE && this._lastEvent && this._compareEvents(this._lastEvent, e)) {\n      return false;\n    }\n\n    // apply protocol restrictions\n    if (!this._protocols[this._activeProtocol].restrict(e)) {\n      return false;\n    }\n\n    // encode report and send\n    const report = this._encodings[this._activeEncoding](e);\n    if (report) {\n      // always send DEFAULT as binary data\n      if (this._activeEncoding === 'DEFAULT') {\n        this._coreService.triggerBinaryEvent(report);\n      } else {\n        this._coreService.triggerDataEvent(report, true);\n      }\n    }\n\n    this._lastEvent = e;\n\n    return true;\n  }\n\n  public explainEvents(events: CoreMouseEventType): {[event: string]: boolean} {\n    return {\n      down: !!(events & CoreMouseEventType.DOWN),\n      up: !!(events & CoreMouseEventType.UP),\n      drag: !!(events & CoreMouseEventType.DRAG),\n      move: !!(events & CoreMouseEventType.MOVE),\n      wheel: !!(events & CoreMouseEventType.WHEEL)\n    };\n  }\n\n  private _compareEvents(e1: ICoreMouseEvent, e2: ICoreMouseEvent): boolean {\n    if (e1.col !== e2.col) return false;\n    if (e1.row !== e2.row) return false;\n    if (e1.button !== e2.button) return false;\n    if (e1.action !== e2.action) return false;\n    if (e1.ctrl !== e2.ctrl) return false;\n    if (e1.alt !== e2.alt) return false;\n    if (e1.shift !== e2.shift) return false;\n    return true;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreService, ILogService, IOptionsService, IBufferService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IDecPrivateModes, IModes } from 'common/Types';\nimport { clone } from 'common/Clone';\nimport { Disposable } from 'common/Lifecycle';\n\nconst DEFAULT_MODES: IModes = Object.freeze({\n  insertMode: false\n});\n\nconst DEFAULT_DEC_PRIVATE_MODES: IDecPrivateModes = Object.freeze({\n  applicationCursorKeys: false,\n  applicationKeypad: false,\n  bracketedPasteMode: false,\n  origin: false,\n  reverseWraparound: false,\n  sendFocus: false,\n  wraparound: true // defaults: xterm - true, vt100 - false\n});\n\nexport class CoreService extends Disposable implements ICoreService {\n  public serviceBrand: any;\n\n  public isCursorInitialized: boolean = false;\n  public isCursorHidden: boolean = false;\n  public modes: IModes;\n  public decPrivateModes: IDecPrivateModes;\n\n  // Circular dependency, this must be unset or memory will leak after Terminal.dispose\n  private _scrollToBottom: (() => void) | undefined;\n\n  private _onData = this.register(new EventEmitter<string>());\n  public get onData(): IEvent<string> { return this._onData.event; }\n  private _onUserInput = this.register(new EventEmitter<void>());\n  public get onUserInput(): IEvent<void> { return this._onUserInput.event; }\n  private _onBinary = this.register(new EventEmitter<string>());\n  public get onBinary(): IEvent<string> { return this._onBinary.event; }\n\n  constructor(\n    // TODO: Move this into a service\n    scrollToBottom: () => void,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ILogService private readonly _logService: ILogService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n    this._scrollToBottom = scrollToBottom;\n    this.register({ dispose: () => this._scrollToBottom = undefined });\n    this.modes = clone(DEFAULT_MODES);\n    this.decPrivateModes = clone(DEFAULT_DEC_PRIVATE_MODES);\n  }\n\n  public reset(): void {\n    this.modes = clone(DEFAULT_MODES);\n    this.decPrivateModes = clone(DEFAULT_DEC_PRIVATE_MODES);\n  }\n\n  public triggerDataEvent(data: string, wasUserInput: boolean = false): void {\n    // Prevents all events to pty process if stdin is disabled\n    if (this._optionsService.options.disableStdin) {\n      return;\n    }\n\n    // Input is being sent to the terminal, the terminal should focus the prompt.\n    const buffer = this._bufferService.buffer;\n    if (buffer.ybase !== buffer.ydisp) {\n      this._scrollToBottom!();\n    }\n\n    // Fire onUserInput so listeners can react as well (eg. clear selection)\n    if (wasUserInput) {\n      this._onUserInput.fire();\n    }\n\n    // Fire onData API\n    this._logService.debug(`sending data \"${data}\"`, () => data.split('').map(e => e.charCodeAt(0)));\n    this._onData.fire(data);\n  }\n\n  public triggerBinaryEvent(data: string): void {\n    if (this._optionsService.options.disableStdin) {\n      return;\n    }\n    this._logService.debug(`sending binary \"${data}\"`, () => data.split('').map(e => e.charCodeAt(0)));\n    this._onBinary.fire(data);\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService, IDirtyRowService } from 'common/services/Services';\n\nexport class DirtyRowService implements IDirtyRowService {\n  public serviceBrand: any;\n\n  private _start!: number;\n  private _end!: number;\n\n  public get start(): number { return this._start; }\n  public get end(): number { return this._end; }\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    this.clearRange();\n  }\n\n  public clearRange(): void {\n    this._start = this._bufferService.buffer.y;\n    this._end = this._bufferService.buffer.y;\n  }\n\n  public markDirty(y: number): void {\n    if (y < this._start) {\n      this._start = y;\n    } else if (y > this._end) {\n      this._end = y;\n    }\n  }\n\n  public markRangeDirty(y1: number, y2: number): void {\n    if (y1 > y2) {\n      const temp = y1;\n      y1 = y2;\n      y2 = temp;\n    }\n    if (y1 < this._start) {\n      this._start = y1;\n    }\n    if (y2 > this._end) {\n      this._end = y2;\n    }\n  }\n\n  public markAllDirty(): void {\n    this.markRangeDirty(0, this._bufferService.rows - 1);\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * This was heavily inspired from microsoft/vscode's dependency injection system (MIT).\n */\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IInstantiationService, IServiceIdentifier } from 'common/services/Services';\nimport { getServiceDependencies } from 'common/services/ServiceRegistry';\n\nexport class ServiceCollection {\n\n  private _entries = new Map<IServiceIdentifier<any>, any>();\n\n  constructor(...entries: [IServiceIdentifier<any>, any][]) {\n    for (const [id, service] of entries) {\n      this.set(id, service);\n    }\n  }\n\n  public set<T>(id: IServiceIdentifier<T>, instance: T): T {\n    const result = this._entries.get(id);\n    this._entries.set(id, instance);\n    return result;\n  }\n\n  public forEach(callback: (id: IServiceIdentifier<any>, instance: any) => any): void {\n    this._entries.forEach((value, key) => callback(key, value));\n  }\n\n  public has(id: IServiceIdentifier<any>): boolean {\n    return this._entries.has(id);\n  }\n\n  public get<T>(id: IServiceIdentifier<T>): T | undefined {\n    return this._entries.get(id);\n  }\n}\n\nexport class InstantiationService implements IInstantiationService {\n  public serviceBrand: undefined;\n\n  private readonly _services: ServiceCollection = new ServiceCollection();\n\n  constructor() {\n    this._services.set(IInstantiationService, this);\n  }\n\n  public setService<T>(id: IServiceIdentifier<T>, instance: T): void {\n    this._services.set(id, instance);\n  }\n\n  public getService<T>(id: IServiceIdentifier<T>): T | undefined {\n    return this._services.get(id);\n  }\n\n  public createInstance<T>(ctor: any, ...args: any[]): T {\n    const serviceDependencies = getServiceDependencies(ctor).sort((a, b) => a.index - b.index);\n\n    const serviceArgs: any[] = [];\n    for (const dependency of serviceDependencies) {\n      const service = this._services.get(dependency.id);\n      if (!service) {\n        throw new Error(`[createInstance] ${ctor.name} depends on UNKNOWN service ${dependency.id}.`);\n      }\n      serviceArgs.push(service);\n    }\n\n    const firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;\n\n    // check for argument mismatches, adjust static args if needed\n    if (args.length !== firstServiceArgPos) {\n      throw new Error(`[createInstance] First service dependency of ${ctor.name} at position ${firstServiceArgPos + 1} conflicts with ${args.length} static arguments`);\n    }\n\n    // now create the instance\n    return new ctor(...[...args, ...serviceArgs]);\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILogService, IOptionsService, LogLevelEnum } from 'common/services/Services';\n\ntype LogType = (message?: any, ...optionalParams: any[]) => void;\n\ninterface IConsole {\n  log: LogType;\n  error: LogType;\n  info: LogType;\n  trace: LogType;\n  warn: LogType;\n}\n\n// console is available on both node.js and browser contexts but the common\n// module doesn't depend on them so we need to explicitly declare it.\ndeclare const console: IConsole;\n\nconst optionsKeyToLogLevel: { [key: string]: LogLevelEnum } = {\n  debug: LogLevelEnum.DEBUG,\n  info: LogLevelEnum.INFO,\n  warn: LogLevelEnum.WARN,\n  error: LogLevelEnum.ERROR,\n  off: LogLevelEnum.OFF\n};\n\nconst LOG_PREFIX = 'xterm.js: ';\n\nexport class LogService implements ILogService {\n  public serviceBrand: any;\n\n  public logLevel: LogLevelEnum = LogLevelEnum.OFF;\n\n  constructor(\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    this._updateLogLevel();\n    this._optionsService.onOptionChange(key => {\n      if (key === 'logLevel') {\n        this._updateLogLevel();\n      }\n    });\n  }\n\n  private _updateLogLevel(): void {\n    this.logLevel = optionsKeyToLogLevel[this._optionsService.options.logLevel];\n  }\n\n  private _evalLazyOptionalParams(optionalParams: any[]): void {\n    for (let i = 0; i < optionalParams.length; i++) {\n      if (typeof optionalParams[i] === 'function') {\n        optionalParams[i] = optionalParams[i]();\n      }\n    }\n  }\n\n  private _log(type: LogType, message: string, optionalParams: any[]): void {\n    this._evalLazyOptionalParams(optionalParams);\n    type.call(console, LOG_PREFIX + message, ...optionalParams);\n  }\n\n  public debug(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.DEBUG) {\n      this._log(console.log, message, optionalParams);\n    }\n  }\n\n  public info(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.INFO) {\n      this._log(console.info, message, optionalParams);\n    }\n  }\n\n  public warn(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.WARN) {\n      this._log(console.warn, message, optionalParams);\n    }\n  }\n\n  public error(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.ERROR) {\n      this._log(console.error, message, optionalParams);\n    }\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService, ITerminalOptions, IPartialTerminalOptions, FontWeight } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { isMac } from 'common/Platform';\nimport { clone } from 'common/Clone';\n\n// Source: https://freesound.org/people/altemark/sounds/45759/\n// This sound is released under the Creative Commons Attribution 3.0 Unported\n// (CC BY 3.0) license. It was created by 'altemark'. No modifications have been\n// made, apart from the conversion to base64.\nexport const DEFAULT_BELL_SOUND = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq';\n\n// TODO: Freeze?\nexport const DEFAULT_OPTIONS: ITerminalOptions = Object.freeze({\n  cols: 80,\n  rows: 24,\n  cursorBlink: false,\n  cursorStyle: 'block',\n  cursorWidth: 1,\n  bellSound:  DEFAULT_BELL_SOUND,\n  bellStyle: 'none',\n  drawBoldTextInBrightColors: true,\n  fastScrollModifier: 'alt',\n  fastScrollSensitivity: 5,\n  fontFamily: 'courier-new, courier, monospace',\n  fontSize: 15,\n  fontWeight: 'normal',\n  fontWeightBold: 'bold',\n  lineHeight: 1.0,\n  linkTooltipHoverDuration: 500,\n  letterSpacing: 0,\n  logLevel: 'info',\n  scrollback: 1000,\n  scrollSensitivity: 1,\n  screenReaderMode: false,\n  macOptionIsMeta: false,\n  macOptionClickForcesSelection: false,\n  minimumContrastRatio: 1,\n  disableStdin: false,\n  allowProposedApi: true,\n  allowTransparency: false,\n  tabStopWidth: 8,\n  theme: {},\n  rightClickSelectsWord: isMac,\n  rendererType: 'canvas',\n  windowOptions: {},\n  windowsMode: false,\n  wordSeparator: ' ()[]{}\\',\"`',\n  altClickMovesCursor: true,\n  convertEol: false,\n  termName: 'xterm',\n  cancelEvents: false\n});\n\nconst FONT_WEIGHT_OPTIONS: Extract<FontWeight, string>[] = ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'];\n\n/**\n * The set of options that only have an effect when set in the Terminal constructor.\n */\nconst CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\n\nexport class OptionsService implements IOptionsService {\n  public serviceBrand: any;\n\n  public options: ITerminalOptions;\n\n  private _onOptionChange = new EventEmitter<string>();\n  public get onOptionChange(): IEvent<string> { return this._onOptionChange.event; }\n\n  constructor(options: IPartialTerminalOptions) {\n    this.options = clone(DEFAULT_OPTIONS);\n    for (const k of Object.keys(options)) {\n      if (k in this.options) {\n        try {\n          const newValue = options[k as keyof IPartialTerminalOptions] as any;\n          this.options[k] = this._sanitizeAndValidateOption(k, newValue);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  }\n\n  public setOption(key: string, value: any): void {\n    if (!(key in DEFAULT_OPTIONS)) {\n      throw new Error('No option with key \"' + key + '\"');\n    }\n    if (CONSTRUCTOR_ONLY_OPTIONS.includes(key)) {\n      throw new Error(`Option \"${key}\" can only be set in the constructor`);\n    }\n    if (this.options[key] === value) {\n      return;\n    }\n\n    value = this._sanitizeAndValidateOption(key, value);\n\n    // Don't fire an option change event if they didn't change\n    if (this.options[key] === value) {\n      return;\n    }\n\n    this.options[key] = value;\n    this._onOptionChange.fire(key);\n  }\n\n  private _sanitizeAndValidateOption(key: string, value: any): any {\n    switch (key) {\n      case 'bellStyle':\n      case 'cursorStyle':\n      case 'rendererType':\n      case 'wordSeparator':\n        if (!value) {\n          value = DEFAULT_OPTIONS[key];\n        }\n        break;\n      case 'fontWeight':\n      case 'fontWeightBold':\n        if (typeof value === 'number' && 1 <= value && value <= 1000) {\n          // already valid numeric value\n          break;\n        }\n        value = FONT_WEIGHT_OPTIONS.includes(value) ? value : DEFAULT_OPTIONS[key];\n        break;\n      case 'cursorWidth':\n        value = Math.floor(value);\n        // Fall through for bounds check\n      case 'lineHeight':\n      case 'tabStopWidth':\n        if (value < 1) {\n          throw new Error(`${key} cannot be less than 1, value: ${value}`);\n        }\n        break;\n      case 'minimumContrastRatio':\n        value = Math.max(1, Math.min(21, Math.round(value * 10) / 10));\n        break;\n      case 'scrollback':\n        value = Math.min(value, 4294967295);\n        if (value < 0) {\n          throw new Error(`${key} cannot be less than 0, value: ${value}`);\n        }\n        break;\n      case 'fastScrollSensitivity':\n      case 'scrollSensitivity':\n        if (value <= 0) {\n          throw new Error(`${key} cannot be less than or equal to 0, value: ${value}`);\n        }\n        break;\n    }\n    return value;\n  }\n\n  public getOption(key: string): any {\n    if (!(key in DEFAULT_OPTIONS)) {\n      throw new Error(`No option with key \"${key}\"`);\n    }\n    return this.options[key];\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * This was heavily inspired from microsoft/vscode's dependency injection system (MIT).\n */\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IServiceIdentifier } from 'common/services/Services';\n\nconst DI_TARGET = 'di$target';\nconst DI_DEPENDENCIES = 'di$dependencies';\n\nexport const serviceRegistry: Map<string, IServiceIdentifier<any>> = new Map();\n\nexport function getServiceDependencies(ctor: any): { id: IServiceIdentifier<any>, index: number, optional: boolean }[] {\n  return ctor[DI_DEPENDENCIES] || [];\n}\n\nexport function createDecorator<T>(id: string): IServiceIdentifier<T> {\n  if (serviceRegistry.has(id)) {\n    return serviceRegistry.get(id)!;\n  }\n\n  const decorator: any = function (target: Function, key: string, index: number): any {\n    if (arguments.length !== 3) {\n      throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n    }\n\n    storeServiceDependency(decorator, target, index);\n  };\n\n  decorator.toString = () => id;\n\n  serviceRegistry.set(id, decorator);\n  return decorator;\n}\n\nfunction storeServiceDependency(id: Function, target: Function, index: number): void {\n  if ((target as any)[DI_TARGET] === target) {\n    (target as any)[DI_DEPENDENCIES].push({ id, index });\n  } else {\n    (target as any)[DI_DEPENDENCIES] = [{ id, index }];\n    (target as any)[DI_TARGET] = target;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IEvent } from 'common/EventEmitter';\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { IDecPrivateModes, ICoreMouseEvent, CoreMouseEncoding, ICoreMouseProtocol, CoreMouseEventType, ICharset, IWindowOptions, IModes, IAttributeData, ScrollSource } from 'common/Types';\nimport { createDecorator } from 'common/services/ServiceRegistry';\n\nexport const IBufferService = createDecorator<IBufferService>('BufferService');\nexport interface IBufferService {\n  serviceBrand: undefined;\n\n  readonly cols: number;\n  readonly rows: number;\n  readonly buffer: IBuffer;\n  readonly buffers: IBufferSet;\n  isUserScrolling: boolean;\n  onResize: IEvent<{ cols: number, rows: number }>;\n  onScroll: IEvent<number>;\n  scroll(eraseAttr: IAttributeData, isWrapped?: boolean): void;\n  scrollToBottom(): void;\n  scrollToTop(): void;\n  scrollToLine(line: number): void;\n  scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void;\n  scrollPages(pageCount: number): void;\n  resize(cols: number, rows: number): void;\n  reset(): void;\n}\n\nexport const ICoreMouseService = createDecorator<ICoreMouseService>('CoreMouseService');\nexport interface ICoreMouseService {\n  activeProtocol: string;\n  activeEncoding: string;\n  areMouseEventsActive: boolean;\n  addProtocol(name: string, protocol: ICoreMouseProtocol): void;\n  addEncoding(name: string, encoding: CoreMouseEncoding): void;\n  reset(): void;\n\n  /**\n   * Triggers a mouse event to be sent.\n   *\n   * Returns true if the event passed all protocol restrictions and a report\n   * was sent, otherwise false. The return value may be used to decide whether\n   * the default event action in the bowser component should be omitted.\n   *\n   * Note: The method will change values of the given event object\n   * to fullfill protocol and encoding restrictions.\n   */\n  triggerMouseEvent(event: ICoreMouseEvent): boolean;\n\n  /**\n   * Event to announce changes in mouse tracking.\n   */\n  onProtocolChange: IEvent<CoreMouseEventType>;\n\n  /**\n   * Human readable version of mouse events.\n   */\n  explainEvents(events: CoreMouseEventType): { [event: string]: boolean };\n}\n\nexport const ICoreService = createDecorator<ICoreService>('CoreService');\nexport interface ICoreService {\n  serviceBrand: undefined;\n\n  /**\n   * Initially the cursor will not be visible until the first time the terminal\n   * is focused.\n   */\n  isCursorInitialized: boolean;\n  isCursorHidden: boolean;\n\n  readonly modes: IModes;\n  readonly decPrivateModes: IDecPrivateModes;\n\n  readonly onData: IEvent<string>;\n  readonly onUserInput: IEvent<void>;\n  readonly onBinary: IEvent<string>;\n\n  reset(): void;\n\n  /**\n   * Triggers the onData event in the public API.\n   * @param data The data that is being emitted.\n   * @param wasFromUser Whether the data originated from the user (as opposed to\n   * resulting from parsing incoming data). When true this will also:\n   * - Scroll to the bottom of the buffer.s\n   * - Fire the `onUserInput` event (so selection can be cleared).\n   */\n  triggerDataEvent(data: string, wasUserInput?: boolean): void;\n\n  /**\n   * Triggers the onBinary event in the public API.\n   * @param data The data that is being emitted.\n   */\n  triggerBinaryEvent(data: string): void;\n}\n\nexport const ICharsetService = createDecorator<ICharsetService>('CharsetService');\nexport interface ICharsetService {\n  serviceBrand: undefined;\n\n  charset: ICharset | undefined;\n  readonly glevel: number;\n\n  reset(): void;\n\n  /**\n   * Set the G level of the terminal.\n   * @param g\n   */\n  setgLevel(g: number): void;\n\n  /**\n   * Set the charset for the given G level of the terminal.\n   * @param g\n   * @param charset\n   */\n  setgCharset(g: number, charset: ICharset | undefined): void;\n}\n\nexport const IDirtyRowService = createDecorator<IDirtyRowService>('DirtyRowService');\nexport interface IDirtyRowService {\n  serviceBrand: undefined;\n\n  readonly start: number;\n  readonly end: number;\n\n  clearRange(): void;\n  markDirty(y: number): void;\n  markRangeDirty(y1: number, y2: number): void;\n  markAllDirty(): void;\n}\n\nexport interface IServiceIdentifier<T> {\n  (...args: any[]): void;\n  type: T;\n}\n\nexport interface IBrandedService {\n  serviceBrand: undefined;\n}\n\ntype GetLeadingNonServiceArgs<Args> =\n  Args extends [...IBrandedService[]] ? []\n    : Args extends [infer A1, ...IBrandedService[]] ? [A1]\n      : Args extends [infer A1, infer A2, ...IBrandedService[]] ? [A1, A2]\n        : Args extends [infer A1, infer A2, infer A3, ...IBrandedService[]] ? [A1, A2, A3]\n          : Args extends [infer A1, infer A2, infer A3, infer A4, ...IBrandedService[]] ? [A1, A2, A3, A4]\n            : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, ...IBrandedService[]] ? [A1, A2, A3, A4, A5]\n              : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6]\n                : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7]\n                  : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, infer A8, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7, A8]\n                    : never;\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('InstantiationService');\nexport interface IInstantiationService {\n  serviceBrand: undefined;\n\n  setService<T>(id: IServiceIdentifier<T>, instance: T): void;\n  getService<T>(id: IServiceIdentifier<T>): T | undefined;\n  createInstance<Ctor extends new (...args: any[]) => any, R extends InstanceType<Ctor>>(t: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n}\n\nexport const ILogService = createDecorator<ILogService>('LogService');\nexport interface ILogService {\n  serviceBrand: undefined;\n\n  logLevel: LogLevelEnum;\n\n  debug(message: any, ...optionalParams: any[]): void;\n  info(message: any, ...optionalParams: any[]): void;\n  warn(message: any, ...optionalParams: any[]): void;\n  error(message: any, ...optionalParams: any[]): void;\n}\n\nexport const IOptionsService = createDecorator<IOptionsService>('OptionsService');\nexport interface IOptionsService {\n  serviceBrand: undefined;\n\n  readonly options: ITerminalOptions;\n\n  readonly onOptionChange: IEvent<string>;\n\n  setOption<T>(key: string, value: T): void;\n  getOption<T>(key: string): T | undefined;\n}\n\nexport type FontWeight = 'normal' | 'bold' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900' | number;\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'off';\nexport enum LogLevelEnum {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  OFF = 4\n}\nexport type RendererType = 'dom' | 'canvas';\n\nexport interface IPartialTerminalOptions {\n  altClickMovesCursor?: boolean;\n  allowTransparency?: boolean;\n  bellSound?: string;\n  bellStyle?: 'none' | 'sound' /* | 'visual' | 'both' */;\n  cols?: number;\n  cursorBlink?: boolean;\n  cursorStyle?: 'block' | 'underline' | 'bar';\n  cursorWidth?: number;\n  disableStdin?: boolean;\n  drawBoldTextInBrightColors?: boolean;\n  fastScrollModifier?: 'alt' | 'ctrl' | 'shift';\n  fastScrollSensitivity?: number;\n  fontSize?: number;\n  fontFamily?: string;\n  fontWeight?: FontWeight;\n  fontWeightBold?: FontWeight;\n  letterSpacing?: number;\n  lineHeight?: number;\n  logLevel?: LogLevel;\n  macOptionIsMeta?: boolean;\n  macOptionClickForcesSelection?: boolean;\n  rendererType?: RendererType;\n  rightClickSelectsWord?: boolean;\n  rows?: number;\n  screenReaderMode?: boolean;\n  scrollback?: number;\n  scrollSensitivity?: number;\n  tabStopWidth?: number;\n  theme?: ITheme;\n  windowsMode?: boolean;\n  wordSeparator?: string;\n  windowOptions?: IWindowOptions;\n}\n\nexport interface ITerminalOptions {\n  allowProposedApi: boolean;\n  allowTransparency: boolean;\n  altClickMovesCursor: boolean;\n  bellSound: string;\n  bellStyle: 'none' | 'sound' /* | 'visual' | 'both' */;\n  cols: number;\n  cursorBlink: boolean;\n  cursorStyle: 'block' | 'underline' | 'bar';\n  cursorWidth: number;\n  disableStdin: boolean;\n  drawBoldTextInBrightColors: boolean;\n  fastScrollModifier: 'alt' | 'ctrl' | 'shift' | undefined;\n  fastScrollSensitivity: number;\n  fontSize: number;\n  fontFamily: string;\n  fontWeight: FontWeight;\n  fontWeightBold: FontWeight;\n  letterSpacing: number;\n  lineHeight: number;\n  linkTooltipHoverDuration: number;\n  logLevel: LogLevel;\n  macOptionIsMeta: boolean;\n  macOptionClickForcesSelection: boolean;\n  minimumContrastRatio: number;\n  rendererType: RendererType;\n  rightClickSelectsWord: boolean;\n  rows: number;\n  screenReaderMode: boolean;\n  scrollback: number;\n  scrollSensitivity: number;\n  tabStopWidth: number;\n  theme: ITheme;\n  windowsMode: boolean;\n  windowOptions: IWindowOptions;\n  wordSeparator: string;\n\n  [key: string]: any;\n  cancelEvents: boolean;\n  convertEol: boolean;\n  termName: string;\n}\n\nexport interface ITheme {\n  foreground?: string;\n  background?: string;\n  cursor?: string;\n  cursorAccent?: string;\n  selection?: string;\n  black?: string;\n  red?: string;\n  green?: string;\n  yellow?: string;\n  blue?: string;\n  magenta?: string;\n  cyan?: string;\n  white?: string;\n  brightBlack?: string;\n  brightRed?: string;\n  brightGreen?: string;\n  brightYellow?: string;\n  brightBlue?: string;\n  brightMagenta?: string;\n  brightCyan?: string;\n  brightWhite?: string;\n}\n\nexport const IUnicodeService = createDecorator<IUnicodeService>('UnicodeService');\nexport interface IUnicodeService {\n  serviceBrand: undefined;\n  /** Register an Unicode version provider. */\n  register(provider: IUnicodeVersionProvider): void;\n  /** Registered Unicode versions. */\n  readonly versions: string[];\n  /** Currently active version. */\n  activeVersion: string;\n  /** Event triggered, when activate version changed. */\n  readonly onChange: IEvent<string>;\n\n  /**\n   * Unicode version dependent\n   */\n  wcwidth(codepoint: number): number;\n  getStringCellWidth(s: string): number;\n}\n\nexport interface IUnicodeVersionProvider {\n  readonly version: string;\n  wcwidth(ucs: number): 0 | 1 | 2;\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IUnicodeService, IUnicodeVersionProvider } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { UnicodeV6 } from 'common/input/UnicodeV6';\n\n\nexport class UnicodeService implements IUnicodeService {\n  public serviceBrand: any;\n\n  private _providers: {[key: string]: IUnicodeVersionProvider} = Object.create(null);\n  private _active: string = '';\n  private _activeProvider: IUnicodeVersionProvider;\n  private _onChange = new EventEmitter<string>();\n  public get onChange(): IEvent<string> { return this._onChange.event; }\n\n  constructor() {\n    const defaultProvider = new UnicodeV6();\n    this.register(defaultProvider);\n    this._active = defaultProvider.version;\n    this._activeProvider = defaultProvider;\n  }\n\n  public get versions(): string[] {\n    return Object.keys(this._providers);\n  }\n\n  public get activeVersion(): string {\n    return this._active;\n  }\n\n  public set activeVersion(version: string) {\n    if (!this._providers[version]) {\n      throw new Error(`unknown Unicode version \"${version}\"`);\n    }\n    this._active = version;\n    this._activeProvider = this._providers[version];\n    this._onChange.fire(version);\n  }\n\n  public register(provider: IUnicodeVersionProvider): void {\n    this._providers[provider.version] = provider;\n  }\n\n  /**\n   * Unicode version dependent interface.\n   */\n  public wcwidth(num: number): number {\n    return this._activeProvider.wcwidth(num);\n  }\n\n  public getStringCellWidth(s: string): number {\n    let result = 0;\n    const length = s.length;\n    for (let i = 0; i < length; ++i) {\n      let code = s.charCodeAt(i);\n      // surrogate pair first\n      if (0xD800 <= code && code <= 0xDBFF) {\n        if (++i >= length) {\n          // this should not happen with strings retrieved from\n          // Buffer.translateToString as it converts from UTF-32\n          // and therefore always should contain the second part\n          // for any other string we still have to handle it somehow:\n          // simply treat the lonely surrogate first as a single char (UCS-2 behavior)\n          return result + this.wcwidth(code);\n        }\n        const second = s.charCodeAt(i);\n        // convert surrogate pair to high codepoint only for valid second part (UTF-16)\n        // otherwise treat them independently (UCS-2 behavior)\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        } else {\n          result += this.wcwidth(second);\n        }\n      }\n      result += this.wcwidth(code);\n    }\n    return result;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(4389);\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FitAddon\"] = factory();\n\telse\n\t\troot[\"FitAddon\"] = factory();\n})(self, function() {\nreturn ","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Terminal, ITerminalAddon } from 'xterm';\n\ninterface ITerminalDimensions {\n  /**\n   * The number of rows in the terminal.\n   */\n  rows: number;\n\n  /**\n   * The number of columns in the terminal.\n   */\n  cols: number;\n}\n\nconst MINIMUM_COLS = 2;\nconst MINIMUM_ROWS = 1;\n\nexport class FitAddon implements ITerminalAddon {\n  private _terminal: Terminal | undefined;\n\n  constructor() {}\n\n  public activate(terminal: Terminal): void {\n    this._terminal = terminal;\n  }\n\n  public dispose(): void {}\n\n  public fit(): void {\n    const dims = this.proposeDimensions();\n    if (!dims || !this._terminal) {\n      return;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n\n    // Force a full render\n    if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {\n      core._renderService.clear();\n      this._terminal.resize(dims.cols, dims.rows);\n    }\n  }\n\n  public proposeDimensions(): ITerminalDimensions | undefined {\n    if (!this._terminal) {\n      return undefined;\n    }\n\n    if (!this._terminal.element || !this._terminal.element.parentElement) {\n      return undefined;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n\n    if (core._renderService.dimensions.actualCellWidth === 0 || core._renderService.dimensions.actualCellHeight === 0) {\n      return undefined;\n    }\n\n    const parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);\n    const parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    const parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    const elementStyle = window.getComputedStyle(this._terminal.element);\n    const elementPadding = {\n      top: parseInt(elementStyle.getPropertyValue('padding-top')),\n      bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n      right: parseInt(elementStyle.getPropertyValue('padding-right')),\n      left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    const elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    const elementPaddingHor = elementPadding.right + elementPadding.left;\n    const availableHeight = parentElementHeight - elementPaddingVer;\n    const availableWidth = parentElementWidth - elementPaddingHor - core.viewport.scrollBarWidth;\n    const geometry = {\n      cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / core._renderService.dimensions.actualCellWidth)),\n      rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / core._renderService.dimensions.actualCellHeight))\n    };\n    return geometry;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(775);\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AttachAddon\"] = factory();\n\telse\n\t\troot[\"AttachAddon\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Copyright (c) 2014, 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * Implements the attach method, that attaches the terminal to a WebSocket stream.\n */\n\nimport { Terminal, IDisposable, ITerminalAddon } from 'xterm';\n\ninterface IAttachOptions {\n  bidirectional?: boolean;\n}\n\nexport class AttachAddon implements ITerminalAddon {\n  private _socket: WebSocket;\n  private _bidirectional: boolean;\n  private _disposables: IDisposable[] = [];\n\n  constructor(socket: WebSocket, options?: IAttachOptions) {\n    this._socket = socket;\n    // always set binary type to arraybuffer, we do not handle blobs\n    this._socket.binaryType = 'arraybuffer';\n    this._bidirectional = (options && options.bidirectional === false) ? false : true;\n  }\n\n  public activate(terminal: Terminal): void {\n    this._disposables.push(\n      addSocketListener(this._socket, 'message', ev => {\n        const data: ArrayBuffer | string = ev.data;\n        terminal.write(typeof data === 'string' ? data : new Uint8Array(data));\n      })\n    );\n\n    if (this._bidirectional) {\n      this._disposables.push(terminal.onData(data => this._sendData(data)));\n      this._disposables.push(terminal.onBinary(data => this._sendBinary(data)));\n    }\n\n    this._disposables.push(addSocketListener(this._socket, 'close', () => this.dispose()));\n    this._disposables.push(addSocketListener(this._socket, 'error', () => this.dispose()));\n  }\n\n  public dispose(): void {\n    this._disposables.forEach(d => d.dispose());\n  }\n\n  private _sendData(data: string): void {\n    // TODO: do something better than just swallowing\n    // the data if the socket is not in a working condition\n    if (this._socket.readyState !== 1) {\n      return;\n    }\n    this._socket.send(data);\n  }\n\n  private _sendBinary(data: string): void {\n    if (this._socket.readyState !== 1) {\n      return;\n    }\n    const buffer = new Uint8Array(data.length);\n    for (let i = 0; i < data.length; ++i) {\n      buffer[i] = data.charCodeAt(i) & 255;\n    }\n    this._socket.send(buffer);\n  }\n}\n\nfunction addSocketListener<K extends keyof WebSocketEventMap>(socket: WebSocket, type: K, handler: (this: WebSocket, ev: WebSocketEventMap[K]) => any): IDisposable {\n  socket.addEventListener(type, handler);\n  return {\n    dispose: () => {\n      if (!handler) {\n        // Already disposed\n        return;\n      }\n      socket.removeEventListener(type, handler);\n    }\n  };\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var Vue // late bind\nvar version\nvar map = Object.create(null)\nif (typeof window !== 'undefined') {\n  window.__VUE_HOT_MAP__ = map\n}\nvar installed = false\nvar isBrowserify = false\nvar initHookName = 'beforeCreate'\n\nexports.install = function (vue, browserify) {\n  if (installed) { return }\n  installed = true\n\n  Vue = vue.__esModule ? vue.default : vue\n  version = Vue.version.split('.').map(Number)\n  isBrowserify = browserify\n\n  // compat with < 2.0.0-alpha.7\n  if (Vue.config._lifecycleHooks.indexOf('init') > -1) {\n    initHookName = 'init'\n  }\n\n  exports.compatible = version[0] >= 2\n  if (!exports.compatible) {\n    console.warn(\n      '[HMR] You are using a version of vue-hot-reload-api that is ' +\n        'only compatible with Vue.js core ^2.0.0.'\n    )\n    return\n  }\n}\n\n/**\n * Create a record for a hot module, which keeps track of its constructor\n * and instances\n *\n * @param {String} id\n * @param {Object} options\n */\n\nexports.createRecord = function (id, options) {\n  if(map[id]) { return }\n\n  var Ctor = null\n  if (typeof options === 'function') {\n    Ctor = options\n    options = Ctor.options\n  }\n  makeOptionsHot(id, options)\n  map[id] = {\n    Ctor: Ctor,\n    options: options,\n    instances: []\n  }\n}\n\n/**\n * Check if module is recorded\n *\n * @param {String} id\n */\n\nexports.isRecorded = function (id) {\n  return typeof map[id] !== 'undefined'\n}\n\n/**\n * Make a Component options object hot.\n *\n * @param {String} id\n * @param {Object} options\n */\n\nfunction makeOptionsHot(id, options) {\n  if (options.functional) {\n    var render = options.render\n    options.render = function (h, ctx) {\n      var instances = map[id].instances\n      if (ctx && instances.indexOf(ctx.parent) < 0) {\n        instances.push(ctx.parent)\n      }\n      return render(h, ctx)\n    }\n  } else {\n    injectHook(options, initHookName, function() {\n      var record = map[id]\n      if (!record.Ctor) {\n        record.Ctor = this.constructor\n      }\n      record.instances.push(this)\n    })\n    injectHook(options, 'beforeDestroy', function() {\n      var instances = map[id].instances\n      instances.splice(instances.indexOf(this), 1)\n    })\n  }\n}\n\n/**\n * Inject a hook to a hot reloadable component so that\n * we can keep track of it.\n *\n * @param {Object} options\n * @param {String} name\n * @param {Function} hook\n */\n\nfunction injectHook(options, name, hook) {\n  var existing = options[name]\n  options[name] = existing\n    ? Array.isArray(existing) ? existing.concat(hook) : [existing, hook]\n    : [hook]\n}\n\nfunction tryWrap(fn) {\n  return function (id, arg) {\n    try {\n      fn(id, arg)\n    } catch (e) {\n      console.error(e)\n      console.warn(\n        'Something went wrong during Vue component hot-reload. Full reload required.'\n      )\n    }\n  }\n}\n\nfunction updateOptions (oldOptions, newOptions) {\n  for (var key in oldOptions) {\n    if (!(key in newOptions)) {\n      delete oldOptions[key]\n    }\n  }\n  for (var key$1 in newOptions) {\n    oldOptions[key$1] = newOptions[key$1]\n  }\n}\n\nexports.rerender = tryWrap(function (id, options) {\n  var record = map[id]\n  if (!options) {\n    record.instances.slice().forEach(function (instance) {\n      instance.$forceUpdate()\n    })\n    return\n  }\n  if (typeof options === 'function') {\n    options = options.options\n  }\n  if (record.Ctor) {\n    record.Ctor.options.render = options.render\n    record.Ctor.options.staticRenderFns = options.staticRenderFns\n    record.instances.slice().forEach(function (instance) {\n      instance.$options.render = options.render\n      instance.$options.staticRenderFns = options.staticRenderFns\n      // reset static trees\n      // pre 2.5, all static trees are cached together on the instance\n      if (instance._staticTrees) {\n        instance._staticTrees = []\n      }\n      // 2.5.0\n      if (Array.isArray(record.Ctor.options.cached)) {\n        record.Ctor.options.cached = []\n      }\n      // 2.5.3\n      if (Array.isArray(instance.$options.cached)) {\n        instance.$options.cached = []\n      }\n\n      // post 2.5.4: v-once trees are cached on instance._staticTrees.\n      // Pure static trees are cached on the staticRenderFns array\n      // (both already reset above)\n\n      // 2.6: temporarily mark rendered scoped slots as unstable so that\n      // child components can be forced to update\n      var restore = patchScopedSlots(instance)\n      instance.$forceUpdate()\n      instance.$nextTick(restore)\n    })\n  } else {\n    // functional or no instance created yet\n    record.options.render = options.render\n    record.options.staticRenderFns = options.staticRenderFns\n\n    // handle functional component re-render\n    if (record.options.functional) {\n      // rerender with full options\n      if (Object.keys(options).length > 2) {\n        updateOptions(record.options, options)\n      } else {\n        // template-only rerender.\n        // need to inject the style injection code for CSS modules\n        // to work properly.\n        var injectStyles = record.options._injectStyles\n        if (injectStyles) {\n          var render = options.render\n          record.options.render = function (h, ctx) {\n            injectStyles.call(ctx)\n            return render(h, ctx)\n          }\n        }\n      }\n      record.options._Ctor = null\n      // 2.5.3\n      if (Array.isArray(record.options.cached)) {\n        record.options.cached = []\n      }\n      record.instances.slice().forEach(function (instance) {\n        instance.$forceUpdate()\n      })\n    }\n  }\n})\n\nexports.reload = tryWrap(function (id, options) {\n  var record = map[id]\n  if (options) {\n    if (typeof options === 'function') {\n      options = options.options\n    }\n    makeOptionsHot(id, options)\n    if (record.Ctor) {\n      if (version[1] < 2) {\n        // preserve pre 2.2 behavior for global mixin handling\n        record.Ctor.extendOptions = options\n      }\n      var newCtor = record.Ctor.super.extend(options)\n      // prevent record.options._Ctor from being overwritten accidentally\n      newCtor.options._Ctor = record.options._Ctor\n      record.Ctor.options = newCtor.options\n      record.Ctor.cid = newCtor.cid\n      record.Ctor.prototype = newCtor.prototype\n      if (newCtor.release) {\n        // temporary global mixin strategy used in < 2.0.0-alpha.6\n        newCtor.release()\n      }\n    } else {\n      updateOptions(record.options, options)\n    }\n  }\n  record.instances.slice().forEach(function (instance) {\n    if (instance.$vnode && instance.$vnode.context) {\n      instance.$vnode.context.$forceUpdate()\n    } else {\n      console.warn(\n        'Root or manually mounted instance modified. Full reload required.'\n      )\n    }\n  })\n})\n\n// 2.6 optimizes template-compiled scoped slots and skips updates if child\n// only uses scoped slots. We need to patch the scoped slots resolving helper\n// to temporarily mark all scoped slots as unstable in order to force child\n// updates.\nfunction patchScopedSlots (instance) {\n  if (!instance._u) { return }\n  // https://github.com/vuejs/vue/blob/dev/src/core/instance/render-helpers/resolve-scoped-slots.js\n  var original = instance._u\n  instance._u = function (slots) {\n    try {\n      // 2.6.4 ~ 2.6.6\n      return original(slots, true)\n    } catch (e) {\n      // 2.5 / >= 2.6.7\n      return original(slots, null, true)\n    }\n  }\n  return function () {\n    instance._u = original\n  }\n}\n","<template>\r\n    <div id=\"xterm\" class=\"xterm\" />\r\n</template>\r\n\r\n<script>\r\nimport 'xterm/css/xterm.css'\r\nimport { Terminal } from 'xterm'\r\nimport { FitAddon } from 'xterm-addon-fit'\r\nimport { AttachAddon } from 'xterm-addon-attach'\r\n\r\nexport default {\r\n  name: 'App',\r\n  props: {\r\n    socketURI: {\r\n      type: String,\r\n      default: 'ws:127.0.0.1:4011'\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initSocket()\r\n  },\r\n  beforeDestroy() {\r\n    this.socket.close()\r\n    this.term.dispose()\r\n  },\r\n  methods: {\r\n    initTerm() {\r\n      const term = new Terminal({\r\n        fontSize: 14,\r\n        rows:30,\r\n        cursorBlink: true\r\n      });\r\n      const attachAddon = new AttachAddon(this.socket);\r\n      const fitAddon = new FitAddon();\r\n      term.loadAddon(attachAddon);\r\n      term.loadAddon(fitAddon);\r\n      term.open(document.getElementById('xterm'));\r\n      fitAddon.fit();\r\n      term.focus();\r\n      this.term = term\r\n    },\r\n    initSocket() {\r\n      this.socket = new WebSocket(this.socketURI);\r\n     \r\n      this.socketOnOpen();\r\n       this.socketOnClose();\r\n      this.socketOnError();\r\n    },\r\n    socketOnOpen() {\r\n      this.socket.onopen = () => {\r\n        // \r\n        this.initTerm()\r\n      }\r\n    },\r\n    socketOnClose() {\r\n      this.socket.onclose = () => {\r\n        console.log('close socket')\r\n      }\r\n    },\r\n    socketOnError() {\r\n      this.socket.onerror = () => {\r\n        console.log('socket ')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  color: green;\r\n}\r\n</style>","import Vue from 'vue'\r\nimport App from './app.vue'\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  render: h => h(App)\r\n})","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}